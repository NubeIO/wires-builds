{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./nodes/container.ts","webpack:///./nodes/node-io.ts","webpack:///./nodes/node-info.ts","webpack:///./nodes/node.ts","webpack:///./nodes/utils.ts","webpack:///./nodes/node-interface.ts","webpack:///./utils/helper.ts","webpack:///./nodes/utils/time-utils.ts","webpack:///./nodes/flexible-node.ts","webpack:///./utils/loggers.ts","webpack:///./config.ts","webpack:///./nodes/node-type-registry.ts","webpack:///./nodes/constants.ts","webpack:///external \"logplease\"","webpack:///external \"moment-timezone\"","webpack:///external \"axios\"","webpack:///./utils/id-generator.ts","webpack:///external \"lodash\"","webpack:///./nodes/node-db-helper.ts","webpack:///./nodes/node-link.ts","webpack:///external \"express\"","webpack:///./utils/errors.ts","webpack:///./nodes/serializable.ts","webpack:///./nodes/nodes/dashboard/ui-node.ts","webpack:///./nodes/nodes/statistics/statistics.ts","webpack:///./nodes/container-node.ts","webpack:///external \"child_process\"","webpack:///./app.ts","webpack:///./utils/decorators.ts","webpack:///./shared/websocket-events.ts","webpack:///./nodes/node-factory.ts","webpack:///./nodes/utils/crypto-utils.ts","webpack:///./nodes/utils/os-utils.ts","webpack:///./database/database/BaseDatabase.ts","webpack:///external \"moment\"","webpack:///./shared/validator.ts","webpack:///./promise-actor.ts","webpack:///./nodes/nodes/protocols/edge-28/edge-constant.ts","webpack:///./nodes/node-hook.ts","webpack:///./nodes/registry.ts","webpack:///./nodes/node-icons.ts","webpack:///./nodes/node-registry.ts","webpack:///./nodes/nodes/IoT/shared/mixin.ts","webpack:///external \"fs\"","webpack:///./nodes/utils/file-utils.ts","webpack:///./database/datasource/PlatformDataSource.ts","webpack:///./nodes/nodes/system/system-utils.ts","webpack:///./nodes/nodes/bsa/bsa-client-config.ts","webpack:///external \"jsonata\"","webpack:///./nodes/nodes/protocols/edge-28/edge-utils.ts","webpack:///./nodes/nodes/protocols/bacnet/bacnet-constant.ts","webpack:///external \"path\"","webpack:///./database/database.ts","webpack:///./pub-sub/PubSubHelpers.ts","webpack:///./backend/entry.ts","webpack:///./server/service/node-service.ts","webpack:///external \"influx\"","webpack:///./nodes/lib/psychrolib.ts","webpack:///./nodes/nodes/history/HistoryBase.ts","webpack:///./nodes/nodes/protocols/bacnet/bacnet-utils.ts","webpack:///external \"mqtt-match\"","webpack:///external \"mqtt\"","webpack:///external \"cron\"","webpack:///external \"cronstrue\"","webpack:///./shared/link-result-visitor.ts","webpack:///external \"@hapi/joi\"","webpack:///./nodes/node-presenter.ts","webpack:///./pub-sub/DispatcherRegistry.ts","webpack:///./backend/api.ts","webpack:///./nodes/nodes/IoT/shared/api-container-node.ts","webpack:///./nodes/nodes/IoT/shared/top-level-api-container-node.ts","webpack:///external \"lodash-decorators/debounce\"","webpack:///external \"socket.io\"","webpack:///./server/middleware.ts","webpack:///./server/routes/handler/api-handler.ts","webpack:///./server/service/NodeCRUDService.ts","webpack:///./shared/etl-result.ts","webpack:///./server/service/NodeETLService.ts","webpack:///./nodes/nodes/container/folder.ts","webpack:///./nodes/nodes/container/abstract-folder-io.ts","webpack:///./nodes/nodes/protocols/modbus/modbus-fc/modbus-point-byte-order.ts","webpack:///./nodes/utils/uuid-utils.ts","webpack:///./nodes/utils/string-json-compare-utils.ts","webpack:///./nodes/utils/setting-utils.ts","webpack:///./nodes/utils/node-utils.ts","webpack:///./nodes/nodes/protocols/edge-28/edge-gpio-utils.ts","webpack:///external \"node-bacnet\"","webpack:///./nodes/nodes/protocols/lora-raw/lora-two-way-in.ts","webpack:///external \"crypto\"","webpack:///external \"serialport\"","webpack:///./nodes/utils/ip-address-utils.ts","webpack:///external \"set-ip-address\"","webpack:///external \"ip\"","webpack:///./nodes/utils/nodes/node-colour-change.ts","webpack:///external \"source-map-support\"","webpack:///external \"process\"","webpack:///external \"minimist\"","webpack:///external \"dotenv\"","webpack:///./backend/backend.ts","webpack:///external \"slugid\"","webpack:///external \"enumify\"","webpack:///./shared/link-result.ts","webpack:///./pub-sub/DispatchNode.ts","webpack:///./pub-sub/IPubSub.ts","webpack:///./pub-sub/PubSub.ts","webpack:///./nodes/utils/help/protocols/edge-28.ts","webpack:///./nodes/nodes/IoT/datapoint-node.ts","webpack:///./backend/datapoint.ts","webpack:///./nodes/nodes/IoT/installer-node.ts","webpack:///./backend/installer.ts","webpack:///./nodes/nodes/IoT/shared/api-node.ts","webpack:///./server/dashboard.ts","webpack:///./server/server.ts","webpack:///external \"body-parser\"","webpack:///external \"cookie-parser\"","webpack:///external \"http\"","webpack:///external \"morgan\"","webpack:///./server/dashboard-server-socket.ts","webpack:///./server/editor-server-socket.ts","webpack:///./nodes/node-utils.ts","webpack:///./server/ping-pong-server-socket.ts","webpack:///./server/routes/api-editor.ts","webpack:///./server/routes/handler/api-link-handler.ts","webpack:///./server/service/NodeLinkService.ts","webpack:///./server/routes/handler/api-node-handler.ts","webpack:///./server/wire-name-server-socket.ts","webpack:///external \"express-validator\"","webpack:///./server/routes/dashboard.ts","webpack:///./server/routes/api-dashboard.ts","webpack:///./server/routes/editor.ts","webpack:///./server/routes/api-wire-name.ts","webpack:///./database/datasource/WireNameDataSource.ts","webpack:///./server/routes/auth.ts","webpack:///external \"crypto-js\"","webpack:///./server/routes/api-help.ts","webpack:///./database/datasource/HelpDataSource.ts","webpack:///./server/routes/api-platform.ts","webpack:///external \"os\"","webpack:///external \"systeminformation\"","webpack:///./nodes/nodes/index.ts","webpack:///./nodes/nodes/boolean/and.ts","webpack:///./nodes/nodes/boolean/or.ts","webpack:///./nodes/nodes/boolean/xor.ts","webpack:///./nodes/nodes/boolean/not.ts","webpack:///./nodes/nodes/boolean/toggle.ts","webpack:///./nodes/nodes/boolean/one-shot.ts","webpack:///./nodes/nodes/boolean/min-on-off.ts","webpack:///./nodes/nodes/boolean/on-delay.ts","webpack:///./nodes/nodes/boolean/off-delay.ts","webpack:///./nodes/nodes/boolean/ticker.ts","webpack:///./nodes/nodes/compare/equal.ts","webpack:///./nodes/nodes/compare/greater-than.ts","webpack:///./nodes/nodes/compare/less-than.ts","webpack:///./nodes/nodes/compare/between.ts","webpack:///./nodes/nodes/compare/hysteresis.ts","webpack:///./nodes/nodes/compare/type-check.ts","webpack:///./nodes/nodes/connection/local-transmitter-single.ts","webpack:///./nodes/nodes/connection/local-receiver-single.ts","webpack:///./nodes/nodes/connection/local-transmitter.ts","webpack:///./nodes/nodes/connection/local-receiver.ts","webpack:///./nodes/nodes/connection/hub.ts","webpack:///./nodes/nodes/container/folder-input.ts","webpack:///./nodes/nodes/container/folder-output.ts","webpack:///./nodes/nodes/conversion/bit-mask.ts","webpack:///./nodes/nodes/conversion/bit-split.ts","webpack:///./nodes/nodes/conversion/bool-to-int.ts","webpack:///./nodes/nodes/conversion/buffer-to-hex-string.ts","webpack:///./nodes/nodes/conversion/buffer-to-num.ts","webpack:///./nodes/nodes/conversion/data-conversion.ts","webpack:///external \"convert-units\"","webpack:///./nodes/nodes/conversion/hex-string-to-buffer.ts","webpack:///./nodes/nodes/conversion/int-to-byte-four-array.ts","webpack:///./nodes/nodes/count/any-event-counter.ts","webpack:///./nodes/nodes/count/counter.ts","webpack:///./nodes/nodes/count/triggered-ramp.ts","webpack:///./nodes/nodes/count/interval-ramp.ts","webpack:///./nodes/nodes/count/waveform.ts","webpack:///./nodes/nodes/csv/csv-merge-rows.ts","webpack:///./nodes/nodes/csv/csv-merge-columns.ts","webpack:///./nodes/nodes/bsa/bsa-cumulocity-device.ts","webpack:///./nodes/nodes/bsa/bsa-cumulocity-point.ts","webpack:///./nodes/nodes/bsa/bsa-cumulocity-alarm.ts","webpack:///./nodes/nodes/bsa/cumulocity-operation.ts","webpack:///./nodes/nodes/custom-function/function.ts","webpack:///./nodes/nodes/custom-function/base-function-node.ts","webpack:///external \"vm2\"","webpack:///./nodes/nodes/custom-function/uuid.ts","webpack:///./nodes/nodes/dashboard/label.ts","webpack:///./nodes/nodes/dashboard/button.ts","webpack:///./nodes/nodes/dashboard/switch.ts","webpack:///./nodes/nodes/dashboard/progress.ts","webpack:///./nodes/nodes/dashboard/slider.ts","webpack:///./nodes/nodes/dashboard/text-box.ts","webpack:///./nodes/nodes/dashboard/log.ts","webpack:///./nodes/nodes/dashboard/chart.ts","webpack:///./nodes/nodes/debug/console.ts","webpack:///./nodes/nodes/debug/notes.ts","webpack:///./nodes/nodes/debug/watch.ts","webpack:///./nodes/nodes/error/link-error-check.ts","webpack:///./nodes/nodes/error/output-error-check.ts","webpack:///./nodes/nodes/filter/only-true.ts","webpack:///./nodes/nodes/filter/only-false.ts","webpack:///./nodes/nodes/filter/only-between.ts","webpack:///./nodes/nodes/filter/only-greater.ts","webpack:///./nodes/nodes/filter/only-lower.ts","webpack:///./nodes/nodes/filter/only-equal.ts","webpack:///./nodes/nodes/filter/prevent-null.ts","webpack:///./nodes/nodes/filter/prevent-equal.ts","webpack:///./nodes/nodes/filter/prevent-duplicates.ts","webpack:///./nodes/nodes/history/data-store.ts","webpack:///./nodes/nodes/history/influx-db.ts","webpack:///./nodes/nodes/history/influx-db-2.ts","webpack:///external \"@influxdata/influxdb-client\"","webpack:///external \"@influxdata/influxdb-client-apis\"","webpack:///./nodes/nodes/history/point-persistence.ts","webpack:///./nodes/nodes/hvac/deadband.ts","webpack:///./nodes/nodes/hvac/thermostat.ts","webpack:///./nodes/nodes/hvac/lead-lag-staging.ts","webpack:///./nodes/nodes/hvac/lead-lag-switch.ts","webpack:///./nodes/nodes/hvac/pac-unit-control.ts","webpack:///./nodes/nodes/hvac/PID.ts","webpack:///./nodes/lib/pid-controller.ts","webpack:///./nodes/nodes/hvac/toggle-duration.ts","webpack:///./nodes/nodes/hvac/psychometrics.ts","webpack:///./nodes/nodes/hvac/energy-conversion.ts","webpack:///./nodes/nodes/hvac/power-conversion.ts","webpack:///./nodes/nodes/hvac/volume-conversion.ts","webpack:///./nodes/nodes/hvac/temperature-conversion.ts","webpack:///./nodes/nodes/hvac/atm-pressure-conversion.ts","webpack:///./nodes/nodes/hvac/pressure-conversion.ts","webpack:///./nodes/nodes/hvac/actuator-sizing.ts","webpack:///./nodes/nodes/hvac/k-factor.ts","webpack:///./nodes/nodes/hvac/dp-airflow.ts","webpack:///./nodes/nodes/json/array-builder.ts","webpack:///./nodes/nodes/json/array-builder-num.ts","webpack:///./nodes/nodes/json/array-combine.ts","webpack:///./nodes/nodes/json/json-builder.ts","webpack:///./nodes/nodes/json/json-enum-builder.ts","webpack:///./nodes/nodes/json/json-filter.ts","webpack:///./nodes/nodes/json/json-obj-filter.ts","webpack:///./nodes/nodes/json/json-filter-compare.ts","webpack:///./nodes/nodes/json/json-filter-multiple.ts","webpack:///./nodes/nodes/json/json-checker.ts","webpack:///./nodes/nodes/json/json-parse.ts","webpack:///./nodes/nodes/json/json-prevent-duplicates.ts","webpack:///./nodes/nodes/json/json-query.ts","webpack:///./nodes/nodes/latch/any-latch.ts","webpack:///./nodes/nodes/latch/bool-latch.ts","webpack:///./nodes/nodes/latch/num-latch.ts","webpack:///./nodes/nodes/latch/string-latch.ts","webpack:///./nodes/nodes/latch/set-reset.ts","webpack:///./nodes/nodes/math/add.ts","webpack:///./nodes/nodes/math/subtract.ts","webpack:///./nodes/nodes/math/multiply.ts","webpack:///./nodes/nodes/math/divide.ts","webpack:///./nodes/nodes/math/absolute.ts","webpack:///./nodes/nodes/math/modulus.ts","webpack:///./nodes/nodes/math/power.ts","webpack:///./nodes/nodes/math-advanced/acos.ts","webpack:///./nodes/nodes/math-advanced/asin.ts","webpack:///./nodes/nodes/math-advanced/atan.ts","webpack:///./nodes/nodes/math-advanced/cbrt.ts","webpack:///./nodes/nodes/math-advanced/cos.ts","webpack:///./nodes/nodes/math-advanced/exp.ts","webpack:///./nodes/nodes/math-advanced/log.ts","webpack:///./nodes/nodes/math-advanced/log10.ts","webpack:///./nodes/nodes/math-advanced/sin.ts","webpack:///./nodes/nodes/math-advanced/sqrt.ts","webpack:///./nodes/nodes/math-advanced/tan.ts","webpack:///./nodes/nodes/math-trigger/trigger-add.ts","webpack:///./nodes/nodes/math-trigger/trigger-subtract.ts","webpack:///./nodes/nodes/math-trigger/trigger-multiply.ts","webpack:///./nodes/nodes/math-trigger/trigger-divide.ts","webpack:///./nodes/nodes/math-trigger/trigger-modulus.ts","webpack:///./nodes/nodes/math-trigger/trigger-power.ts","webpack:///./nodes/nodes/miscellaneous/geo-hash.ts","webpack:///external \"ngeohash\"","webpack:///./nodes/nodes/miscellaneous/num-series-generator.ts","webpack:///./nodes/nodes/miscellaneous/append-to-strings.ts","webpack:///./nodes/nodes/nube/get-schedules.ts","webpack:///external \"btoa\"","webpack:///./nodes/nodes/num-transform/round.ts","webpack:///./nodes/nodes/num-transform/floor.ts","webpack:///./nodes/nodes/num-transform/ceil.ts","webpack:///./nodes/nodes/num-transform/limit.ts","webpack:///./nodes/nodes/num-transform/scale.ts","webpack:///./nodes/nodes/num-transform/linear-shaper.ts","webpack:///./nodes/nodes/num-transform/fade.ts","webpack:///./nodes/nodes/num-transform/rate-limit.ts","webpack:///./nodes/nodes/point/bool-constant.ts","webpack:///./nodes/nodes/point/num-constant.ts","webpack:///./nodes/nodes/point/string-constant.ts","webpack:///./nodes/nodes/point/json-constant.ts","webpack:///./nodes/nodes/point/bool-writable.ts","webpack:///./nodes/nodes/point/num-writable.ts","webpack:///./nodes/nodes/point/string-writable.ts","webpack:///./nodes/nodes/point/generic-point.ts","webpack:///./nodes/utils/points/history-config.ts","webpack:///./nodes/utils/points/priority-config.ts","webpack:///./nodes/nodes/protocols/email/email.ts","webpack:///external \"nodemailer\"","webpack:///./nodes/nodes/protocols/http/http-client.ts","webpack:///./nodes/nodes/protocols/edge-28/edge-28-network.ts","webpack:///./nodes/nodes/protocols/edge-28/edge-28-input.ts","webpack:///./nodes/utils/MathUtils.ts","webpack:///./nodes/nodes/protocols/edge-28/edge-10k-sensor-calc.ts","webpack:///./nodes/nodes/protocols/edge-28/edge-28-output.ts","webpack:///./nodes/nodes/protocols/edge-28/edge-28-lora-reset.ts","webpack:///./nodes/nodes/protocols/bacnet/bacnet-network.ts","webpack:///./nodes/nodes/protocols/bacnet/bacnet-device.ts","webpack:///./nodes/nodes/protocols/bacnet/bacnet-point.ts","webpack:///./nodes/nodes/protocols/bacnet-server/bacnet-server-api.ts","webpack:///./nodes/nodes/protocols/lora-raw/lora.ts","webpack:///./nodes/nodes/protocols/lora-raw/lora-two-way-out.ts","webpack:///./nodes/nodes/protocols/lora-raw-v2/lora-raw-points.ts","webpack:///./nodes/nodes/protocols/lora-raw-v2/lora-raw-crypt.ts","webpack:///external \"node-aes-cmac\"","webpack:///./nodes/nodes/protocols/lora-raw-v2/lora-raw-sensor-legacy.ts","webpack:///./nodes/nodes/protocols/modbus/modbus-server.ts","webpack:///external \"modbus-serial\"","webpack:///external \"net\"","webpack:///./nodes/nodes/protocols/mqtt/mqtt-client.ts","webpack:///./nodes/nodes/protocols/mqtt/mqtt-client-single.ts","webpack:///./nodes/nodes/protocols/mqtt/topic-parts.ts","webpack:///./nodes/nodes/protocols/mqtt/topic-builder.ts","webpack:///./nodes/nodes/protocols/serial-connector/serial-connector.ts","webpack:///./nodes/utils/serial-utils.ts","webpack:///./nodes/nodes/schedule/weekly-schedule.ts","webpack:///./nodes/nodes/schedule/schedule-merge.ts","webpack:///./nodes/nodes/schedule/schedule-checker.ts","webpack:///./nodes/nodes/schedule/schedule-utils.ts","webpack:///./nodes/nodes/statistics/min-max-avg.ts","webpack:///./nodes/nodes/statistics/avg.ts","webpack:///./nodes/nodes/statistics/min.ts","webpack:///./nodes/nodes/statistics/max.ts","webpack:///./nodes/nodes/statistics/sum.ts","webpack:///./nodes/nodes/statistics/median.ts","webpack:///./nodes/nodes/statistics/range.ts","webpack:///./nodes/nodes/statistics/rank.ts","webpack:///./nodes/nodes/statistics/stats-all.ts","webpack:///./nodes/nodes/streams/stream-average.ts","webpack:///./nodes/nodes/streams/stream-highest.ts","webpack:///./nodes/nodes/streams/stream-lowest.ts","webpack:///./nodes/nodes/streams/stream-sum.ts","webpack:///./nodes/nodes/streams/stream-merge.ts","webpack:///./nodes/nodes/streams/gate.ts","webpack:///./nodes/nodes/streams/stack.ts","webpack:///./nodes/nodes/streams/queue.ts","webpack:///./nodes/nodes/streams/stream-delay.ts","webpack:///./nodes/nodes/streams/stream-delay-meter.ts","webpack:///./nodes/nodes/streams/frequency-meter.ts","webpack:///./nodes/nodes/streams/flatline.ts","webpack:///./nodes/nodes/string/string-compare.ts","webpack:///./nodes/nodes/string/substring-cut.ts","webpack:///./nodes/nodes/string/string-join.ts","webpack:///./nodes/nodes/string/string-length.ts","webpack:///./nodes/nodes/string/string-index-of.ts","webpack:///./nodes/nodes/string/char-at-index.ts","webpack:///./nodes/nodes/string/string-split.ts","webpack:///./nodes/nodes/string/string-case.ts","webpack:///./nodes/nodes/string/char-to-ascii.ts","webpack:///./nodes/nodes/string/ascii-to-char.ts","webpack:///./nodes/nodes/string/string-buffer.ts","webpack:///./nodes/nodes/switch/bool-switch.ts","webpack:///./nodes/nodes/switch/num-switch.ts","webpack:///./nodes/nodes/switch/string-switch.ts","webpack:///./nodes/nodes/switch/bool-select.ts","webpack:///./nodes/nodes/switch/num-select.ts","webpack:///./nodes/nodes/switch/string-select.ts","webpack:///./nodes/nodes/switch/bool-output-select.ts","webpack:///./nodes/nodes/switch/num-output-select.ts","webpack:///./nodes/nodes/switch/string-output-select.ts","webpack:///./nodes/nodes/system/host-info.ts","webpack:///./nodes/nodes/system/platform.ts","webpack:///./nodes/nodes/system/beep.ts","webpack:///./nodes/nodes/system/execute-cmd.ts","webpack:///./nodes/nodes/system/flow-export.ts","webpack:///./nodes/nodes/system/ip/network-interfaces-bbb.ts","webpack:///external \"network\"","webpack:///./nodes/nodes/system/ip/network-interfaces.ts","webpack:///./nodes/nodes/system/wires-version.ts","webpack:///./nodes/nodes/time/time-conversion.ts","webpack:///./nodes/nodes/time/time-conversion-plus.ts","webpack:///./nodes/nodes/time/timezone-conversion.ts","webpack:///./nodes/utils/timezone-utils.ts","webpack:///./nodes/nodes/time/clock.ts","webpack:///./nodes/nodes/time/date.ts","webpack:///./nodes/nodes/time/time-diff.ts","webpack:///./nodes/nodes/time/stopwatch.ts","webpack:///./nodes/nodes/time/cron-interval.ts","webpack:///./nodes/nodes/time/cron-weekly.ts","webpack:///./nodes/nodes/time/cron-expression.ts","webpack:///external \"cron-validator\"","webpack:///./nodes/nodes/time/timestamp-generator.ts","webpack:///./nodes/nodes/trigger/change-of-value.ts","webpack:///./nodes/nodes/trigger/random.ts","webpack:///./nodes/nodes/trigger/inject.ts","webpack:///./nodes/nodes/trigger/interval-inject.ts","webpack:///./nodes/nodes/trigger/iterator.ts","webpack:///./nodes/nodes/widget/schedule-afterhours-off.ts","webpack:///./nodes/nodes/widget/schedule-prestart-fixed.ts","webpack:///./nodes/nodes/unknown/unknown-export.ts","webpack:///./nodes/nodes/unknown/unknown.ts","webpack:///./database/neDbDatabase.ts","webpack:///./database/datasource/AuthUserDataSource.ts","webpack:///external \"nedb\"","webpack:///external \"jsonwebtoken\"","webpack:///./database/datasource/DashboardDataSource.ts","webpack:///./database/datasource/HistorianDataSource.ts","webpack:///./database/datasource/NodeDataSource.ts","webpack:///./database/datasource/ScheduleDataSource.ts","webpack:///./database/datasource/UserDataSource.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","logger","color","Colors","Magenta","ContainerRegistry","DefaultContainerRegistry","super","IdGenerator","instance","_instance","rootContainer","force","container","optimizeBeforeRegister","id","this","server_dashboard_socket","server_editor_socket","client_socket","db","dashboard","ErrorHandler","NodeInContainerRegistry","DefaultSubNodeRegistry","parent","containerRegistry","globalNodeRegistry","node","isCaching","sNode","NodeFactory","toSimpleNode","nodeId","createNodeId","cid","logInfo","side","isFolderNode","sub_container","Promise","resolve","isNode","then","NodeHookHelper","execute","createNodeDbHelper","delete","_","remove","validate","nodeItself","shouldRejectNodeType","type","RegistryError","getReadableId","k","insert","doRegister","reassignContainer","globalRegistry","Container","folderNode","properties","renderers","UNINITIALIZED","ROOT","config","cloneObject","_itself","_nodeRegistry","clear","obj","serializedNodes","node_class","parentContainerNodeType","show_in_menu","recursive","alwaysInsideContainer","NodeTypeRegistry","registerNodeType","nodeRegistry","list","stop","isRunning","iteration","globaltime","runningtime","fixedtime","fixedtime_lapse","elapsed_time","starttime","sendActionToRenderer","onStopEvent","execution_timer_id","clearInterval","renderer","deselectAllNodes","detachRenderer","push","boxcolor","theme","NODE_DEFAULT_BOXCOLOR","setDirtyCanvas","pos","indexOf","splice","length","interval","onPlayEvent","getTime","that","setInterval","runStep","steps","start","transferDataBetweenNodes","now","Date","EXECUTE_INTERVAL","executeLastTime","isUpdated","UPDATE_INPUTS_INTERVAL","updateInputsLastTime","inputs","updated","onExecuteStep","onAfterExecute","elapsed","outputs","output","links","link","target_node","debugErr","target_id","ioId","slot","target_input","data","parseValue","action","params","apply","includeSubContainers","nodes","addNodes","_nodes","toLowerCase","ContainerNode","getNodesByType","forEach","nodeClass","getNodesByClass","parentId","getAllNodes","isContainer","iconImageUrl","icon","title","sort","a","b","foreground","background","f","editor","map","SerializableHelper","serialize","message","info","debug","warn","error","Type","SettingType","NodeSetting","description","validation","toJSON","serializedObj","AbstractNodeIO","label","locked","round","subNodeId","NodeOutput","isEmpty","Link","NodeInput","setting","isOptional","convertStringToType","STRING","NUMBER","BOOLEAN","JSON","ANY","convertSettingType","convertType","DROPDOWN","NODE_INFO","aiIcon","frog","inputsDesc","outputsDesc","doNothing","BROADCAST","NodeState","Node","settings","flags","MIN_WIDTH","settingConfigs","contextMenu","clonable","showIcon","convertInput","input","dataType","decimals","inputDataType","Number","isNaN","toFixed","stringify","oldSettings","oldName","oldIcon","size","Shape2D","isDisplayable","computeSize","entries","filter","isNotNull","disconnectInputLink","disconnectOutputLinks","selected_nodes","node_dragged","onSerialize","serializedNode","isNew","doMerge","o1","o2","shouldMerge","serialized","mapToObjectSameKey","merge","debugWarn","UNKNOWN_NODE","category","getParent","keys","v","callback","val","getInputData","setOutputData","update","saveSettings","saveProperties","saveInputs","saveOutputs","props","output_id","only_if_new","undefined","isRecentlyActive","dispatch","slotId","iSetting","exist","isNull","hasValidInput","nullable","settingName","match","items","x","includes","err","stack","extra_info","getFreeOutputId","hidden","getFreeInputId","defaultValue","addInput","position","inputsCount","getInputsCount","myID","source","target","outputNode","linksArray","replaceLinkIndex","findIndex","io","compareNodeIO","updateNodeOutput","immediateDirtyCanvas","ids","redrawNode","target_count","diff","removeInput","getOutputsCount","addOutput","removeOutput","values","Math","max","getLastInputIndex","getLastOutputIndex","changeWidth","computeHeight","title_width","compute_text_size","maxLabelWidth","maxNameWidth","labelWidth","nameWidth","text","width","nodeIO","registry","BackendLinkVisitor","visit","createLinkHandler","disconnectOutput","input_slot","input_id","disconnectInput","dirty_foreground","dirty_background","collapsed","Side","server","emit","onlyConnectedUsers","socket","in","inputs_values","outputs_values","inputId","outputId","slots_values","NODE_IO_VALUES","sendMessageToEditorSide","UPDATE_SETTINGS","payload","UPDATE_PROPERTIES","UPDATE_OUTPUTS","UPDATE_STATE","nodeState","UPDATE_TITLE","UPDATE_NAME","UPDATE_VALUE","moment","format","state","broadcastNodeStateToClients","inputSettings","outputSettings","tempNode","e","ERROR","extractErrorMessage","NOTIFICATION","PubSubHelpers","Utils","getFullYear","getMonth","getDate","getHours","getMinutes","parse","typeofVal","parseFloat","test","originalVal","formatAsPerValueType","toString","performance","digits","pow","substr","textarea","document","createElement","textContent","style","body","appendChild","select","execCommand","ex","removeChild","filename","element","setAttribute","encodeURIComponent","display","click","day","WEEKDAYS","operatorsBoolName","operatorsMathName","operatorsBool","eq","neq","lt","lte","gt","gte","btwn","contains","regex","RegExp","true","false","null","notNull","empty","Array","isArray","Buffer","isBuffer","notEmpty","operatorsStatName","stat","array","min","range","midRange","sum","num","mean","median","mid","modes","modeMap","maxCount","variance","standardDeviation","sqrt","meanAbsoluteDeviation","abs","zScores","buildUrl","host","port","schema","reduce","cv","pv","clamp","remap","inMin","inMax","outMin","outMax","renameKey","old_key","new_key","cloned","pSBC","percentageChange","fromColor","toColor","useLinear","g","P","h","parseInt","isToColorString","pSBCr","split","slice","sleep","ms","setTimeout","Enumify","closeEnum","isSerializedContainer","isFunction","isJSON","isString","String","isGreaterThanZero","isNumeric","trim","toLowerSnakeCase","replace","str","func","isFinite","convertToNumber","strict","inString","Error","Generator","generator","mapper","args","from","to","step","union","collections","Set","unionToArray","mapToObject","keyMapper","valMapper","arrayToObject","arr","idx","groupBy","accumulator","objectOf","TIME_TYPE","TimeUtils","timeOut","timeType","DAYS","HOURS","MINUTES","SECONDS","MILLISECONDS","momentValue","roundedMinutes","ceil","minute","clone","second","millisecond","timeInMs","duration","timeConvert","mm","days","hours","minutes","seconds","milliseconds","padStart","monthNames","dayNames","dts","toDateString","mnu","pad","mn","dy","getDay","dt","yr","hr","mi","ny","getSeconds","mil","getMilliseconds","thr","amp","date","yearMonthDay","year","month","monthAsNumber","dayAsNumber","dayOfYearNumber","pmOrAm","hourAsAmPm","hour","timeHourMin","time","minutesSeconds","epoch","rawDate","console","log","FlexibleNode","nullableInputs","dynamicInputsExist","dynamicOutputsExist","dynamicSettingsExist","dynamicInputsField","dynamicOutputsField","dynamicInputStartPosition","dynamicInputsStartName","dynamicOutputsStartName","dynamicInputsType","dynamicOutputsType","dynamicMinInputs","dynamicMaxInputs","dynamicMinOutputs","dynamicMaxOutputs","dynamicDefaultInputs","dynamicDefaultOutputs","addDynamicInputsOnRange","save","count","dynamicInputsCount","addedInputsCount","addInputWithName","inputCount","updateNodeInput","addDynamicOutputsOnRange","dynamicOutputsCount","addedOutputsCount","addOutputWithName","settingWiseDynamicInputsAndSettingsUpdate","startingCount","targetCount","addDynamicSettings","settingWiseDynamicInputsAndSettingsUpdateForBoolean","dynamicIndex","getInputSetting","changeDynamicInputsAndSettings","db_logger","Blue","registry_logger","reliability_logger","Red","node_service_logger","Cyan","server_logger","Yellow","heartbeat_logger","env","process","rubix","version","buildNb","secretKey","SECRET_KEY","PORT","dataDir","DATA_DIR","loopInterval","LOOP_INTERVAL","backendSync","enabled","BACKEND_ENABLED","baseUrl","BACKEND_API","nodeRefreshIntervalSeconds","NODE_DISTANCE","pointRefreshIntervalSeconds","NODE_REFRESH_INTERVAL_SEC","nodeDistance","POINT_REFRESH_INTERVAL_SEC","database","compactionInterval","bsa","baseURL","BSA_BASEURL","username","BSA_USERNAME","password","BSA_PASSWORD","paths","measurement","path","BSA_PATHS_MEASUREMENT_PATH","accept","BSA_PATHS_MEASUREMENT_ACCEPT","alarm","BSA_PATHS_ALARM_PATH","BSA_PATHS_ALARM_ACCEPT","contentType","BSA_PATHS_ALARM_CONTENTTYPE","device","BSA_PATHS_DEVICE_PATH","operation","BSA_PATHS_OPERATION_PATH","BSA_PATHS_OPERATION_ACCEPT","BSA_PATHS_OPERATION_CONTENTTYPE","ditto","DITTO_BASEURL","DITTO_USERNAME","DITTO_PASSWORD","pg","PG_BASEURL","influxDb","protocol","INFLUX_DB_PROTOCOL","INFLUX_DB_HOST","INFLUX_DB_PORT","databaseName","INFLUX_DB_DB_NAME","INFLUX_DB_USERNAME","INFLUX_DB_PASSWORD","influxDb2","INFLUX_DB_2_PROTOCOL","url","INFLUX_DB_2_URL","token","INFLUX_DB_2_TOKEN","bucket","INFLUX_DB_2_BUCKET","org","INFLUX_DB_2_ORG","INFLUX_DB_2_USERNAME","INFLUX_DB_2_PASSWORD","edge28","EDGE_28_BASEURL","EDGE_28_PORT","apiVer","EDGE_28_API_VER","mqtt","MQTT_PROTOCOL","MQTT_HOST","MQTT_PORT","MQTT_USERNAME","MQTT_PASSWORD","RUBIX_VERSION","AbstractRegistry","lastIndexOf","node_name","onlyInsideContainer","headerColor","register","has","_registry","EDGES_PARENT_CONTAINER_TYPE","MODULES_PARENT_CONTAINER_TYPE","SERVICES_PARENT_CONTAINER_TYPE","EDGE_CONTAINER_TYPE","NETWORK_CONTAINER_TYPE","DEVICE_CONTAINER_TYPE","GROUP_CONTAINER_TYPE","POINT_NODE_TYPE","SERVICE_NODE_TYPE","MODULE_NODE_TYPE","IOT_TYPES","MODBUS_RTU_NETWORK","MODBUS_RTU_DEVICE","MODBUS_RTU_POINT","BACNET_NETWORK","BACNET_DEVICE","BACNET_POINT","EDGE_28_NETWORK","EDGE_28_INPUT","EDGE_28_OUTPUT","MQTT_NETWORK","MQTT_POINT_WRITE","MQTT_POINT_READ","require","BaseIdGenerator","cId","nId","shouldGenerateCid","v4","DefaultNodeDbHelper","AsyncDbHelper","oneArgs","listNodes","_id","$in","query","updateNode","$set","msg","threeArgs","addNode","batchInsertNodes","insertedNodes","batchDeleteNodes","total","twoArgs","removeNode","createNodeLink","targets","createBiNodeLink","DefaultBiNodeLink","nodeIOtoMsg","join","slimIOtoKey","io1","io2","_bySource","_byTarget","nodeLinks","nl","sKey","tKey","deserialize","target_node_id","target_slot","target_input_id","createLegacyLinkHandler","dbHelper","DefaultLinkHandler","targetNode","outputSlot","number","oId","iId","validator","nodeValidator","lenient","DefaultNodeLinkHandler","ContainerRegistryValidator","NodeRegistryValidator","globalStrict","bT","base","rT","references","len","direction","first","next","last","nodeLink","optimized","add","optimize","statement","doCreate","flatMap","bi","LinkResult","doDisconnectOutput","some","fromNode","toAnother","newOne","slimIO","doDisconnectInput","skipSourceLinks","validateSource","doConnect","prev","current","isUnlinkable","NotFoundError","hasInput","skip","targetIO","validateTarget","sourceIO","result","item","SerializedObject","ErrorCallbackHandler","UiNode","defaultTitle","uiElementType","titlePrefix","isDashboardNode","uiPanelValue","onNodeChangePanelOrTitle","changeTitle","newSettings","newName","onNodeRemoved","sendToDashboard","panelName","storeInDatabase","mess","Statistics","onInputUpdated","folder","applyTitle","onAdded","afterAdded","content","openContainer","NAME","allSettled","promises","all","status","reason","concat","y","xs","install","Green","argv","envFile","envFileAbsPath","isAbsolute","cwd","global","__rootdirname","__dirname","App","NODE_ENV","registerNodeTypes","Server","Dashboard","dashboardSocket","initRoot","connectDatabase","asyncLoadDatabase","onDatabaseReady","catch","onDatabaseError","dataBase","enable","useInternalDb","reject","Backend","configApp","noArgs","getNodes","NodeTree","NoChangeId","compute","flatten","registerNodes","loadFromDatabase","startBackend","run","NodeRegistryHelper","objects","errors","exit","editorSocket","app","logError","alert","propertyKey","descriptor","fn","errHandler","AsyncErrorHandler","PACK_UP_NODES","IMPORT_NODES","EXPORT_NODES","CLONE_NODES","REMOVE_NODES","CREATE_NODE","CREATE_LINK","REMOVE_LINK","MOVE_LINK","UPDATE_NODE_SETTING","ADD_NODE_INPUT","ADD_NODE_OUTPUT","REMOVE_NODE_INPUT","REMOVE_NODE_OUTPUT","nn","CryptoJS","CryptoUtils","encrypt","AES","decrypt","cipherText","enc","Utf8","os","si","pkg","OsUtils","command","options","exec","stdout","stderr","hostname","cpuTemperature","fsSize","valueObject","cpu","osInfo","system","systemInfo","model","mem","systemTime","hostName","getCurrentWiresVersion","dataPath","cleanUpInterval","dbPath","dbName","NeDBDataStore","persistence","setAutocompactionInterval","load","loadDatabase","Joi","string","required","mustExisted","ListValidator","PromiseActor","singleton","edgeApi","SEND_PAYLOAD_TO_CHILD","ADD_POINT","REMOVE_POINT","edgeIp","edgePort","edgeApiVer","funcName","createKey","enableDebug","itemName","itemNullable","RegistryItemExistedError","Icons","aiColour","uiMainIcon","uiMainColour","logicMainColour","logicAndIcon","logicOrIcon","logicNotIcon","compareGreaterIcon","mathMainColour","mathMainIcon","mathAddIcon","mathSubIcon","mathDivideIcon","mathTimesIcon","edgeNetwork","DefaultGlobalNodeRegistry","GlobalNodeRegistry","registerNode","results","accumulate","RegistryResult","standardize","unregisterNode","idGenerator","genContainerId","_parent","shouldGenerateNid","genNodeId","cNode","Mixin","entry","entryId","assign","entryFactory","namePrefix","createSettingForm","broadcastSettingsToClients","broadcastTitleToClients","settingFields","applyEntry","createEntry","displayError","deactivate","READONLY","isEqual","updateEntry","deleteEntry","getTakenIdentifiers","takenIdentifiers","identifier","makeIdentifier","globalSiblings","constructor","toUpperCase","FileUtils","dirname","__filename","dirPath","fs","readdir","files","file","fileName","existsSync","open","fd","writeFile","directoryPath","directory","normalize","code","mkdir","mkdirSync","filePath","readFile","buff","fileContent","Boolean","line","index","objStringify","json","appendFile","filepath","checkFileExists","unlink","ipDb","createFile","encoding","self","getNodeType","docs","deviceID","getPlatform","clientId","bsaClientConfig","cfg","auth","headers","Grey","childNode","createMessage","parentNode","pointType","pointId","priority","GET_BACNET_CLIENT","GET_NETWORK_NODE","GET_POINTS","GET_PRESENT_VALUE","SEND_POINT_VALUE","ADD_DEVICE","REMOVE_DEVICE","WRITE_PRESENT_VALUE","cbHandler","param","param1","param2","param3","DispatchNode","point","getPoint","pubSubSingleton","addPoint","getDisplayPointName","removePoint","renamePoint","getSelectedProtocol","getSelectedPoint","pointName","getSelectedPointName","connect","disconnect","names","getParentNode","reverse","UNKNOWN_POINT_NAME","NormalEntry","_nodeType","service_id","service_name","cRegistry","listByContainer","getNodesInContainer","exp","PSYCHROLIB_UNITS","PSYCHROLIB_TOLERANCE","IP","SI","SetUnitSystem","UnitSystem","GetUnitSystem","isIP","GetTRankineFromTFahrenheit","T_F","GetTFahrenheitFromTRankine","T_R","GetTKelvinFromTCelsius","T_C","GetTCelsiusFromTKelvin","T_K","GetTCelsiusFromTFahrenheit","GetTFahrenheitFromTCelsius","GetTRankineFromTCelsius","GetTKelvinFromTFahrenheit","GetTFahrenheitFromTKelvin","GetTRankineFromTKelvin","GetTCelsiusFromTRankine","GetTKelvinFromTRankine","GetTWetBulbFromTDewPoint","TDryBulb","TDewPoint","Pressure","HumRatio","GetHumRatioFromTDewPoint","GetTWetBulbFromHumRatio","GetTWetBulbFromRelHum","RelHum","GetHumRatioFromRelHum","GetRelHumFromTDewPoint","GetSatVapPres","GetRelHumFromTWetBulb","TWetBulb","GetHumRatioFromTWetBulb","GetRelHumFromHumRatio","GetTDewPointFromRelHum","VapPres","GetVapPresFromRelHum","GetTDewPointFromVapPres","GetTDewPointFromTWetBulb","GetTDewPointFromHumRatio","GetRelHumFromVapPres","dLnPws_","dLnPws","T","BOUNDS","TDewPoint_iter","lnVP_iter","lnVP","d_lnVP","GetVapPresFromTDewPoint","TWetBulbSup","TWetBulbInf","BoundedHumRatio","Wsstar","GetSatHumRatio","GetHumRatioFromVapPres","GetVapPresFromHumRatio","GetSpecificHumFromHumRatio","GetHumRatioFromSpecificHum","SpecificHum","GetDryAirEnthalpy","GetDryAirDensity","GetDryAirVolume","GetTDryBulbFromEnthalpyAndHumRatio","MoistAirEnthalpy","GetHumRatioFromEnthalpyAndTDryBulb","LnPws","SatVaporPres","GetSatAirEnthalpy","GetMoistAirEnthalpy","GetVaporPressureDeficit","GetDegreeOfSaturation","GetMoistAirVolume","GetTDryBulbFromMoistAirVolumeAndHumRatio","MoistAirVolume","GetMoistAirDensity","GetStandardAtmPressure","Altitude","GetStandardAtmTemperature","GetSeaLevelPressure","StnPressure","TColumn","H","GetStationPressure","SeaLevelPressure","CalcPsychrometricsFromTWetBulb","CalcPsychrometricsFromTDewPoint","CalcPsychrometricsFromRelHum","Influx","HistoryMode","DataBaseType","HistoryBase","alarmCount","tagCount","lastTrigger","GROUP","POSTGRES","addInputWithSettings","COV","PERIODIC","TRIGGER_ONLY","addHistoryConfiguration","historyFunctionsForAfterSettingsChange","assignInputsOutputs","tableNameInput","InfluxDB","pointNameInput","resetOutputs","doPeriodicHistoryFunctions","clearStoredHisInput","updateHistoryCountOutput","doNonPeriodicHistoryFunctions","timeoutFunc","histTriggerInput","histErrorOutput","storedHistCountOutput","lastHistExportOutput","valueInput","takeValueFromInput","setSettingsConfig","groups","conditions","period","weight","periodUnits","checkTriggered","storeLogEntry","checkCOV","trySendStoredData","points","tagList","fields","timestamp","valueOf","tags","errorFlag","clientIdFromPlat","deviceIdFromPlat","getClientIdDb","getDeviceIdDb","multiPointPost","deviceid","clientid","ts","toISOString","pgUrl","method","writeOptions","client","writePoints","configSettings","changeInputDynamically","changeAlarmsCount","renameAlarmInputs","changeTagsCount","persistProperties","storageLimit","minuteRound","nearestFutureMinutes","alarmNum","j","shift","trigger","threshold","isPeriodic","debugInfo","changeInputsCount","alarmsToAdd","insertIntoObjectAtPosition","tagsToAdd","networkNode","deviceNode","pointNode","BaseNodeLinkVisitor","DefaultLinkVisitor","ioKey","ios","nid","inputVisitor","outputVisitor","nodeVisitor","updateAsync","perNode","containerVisitor","TWEAK_POS","pos1","pos2","relative","p1","guard","p2","origin","bottomRight","positions","avg","eventPos","bottomRightPos","fallbackX","fallbackY","left","top","height","aLeft","aBottom","aRight","aTop","bLeft","bBottom","bRight","bTop","delta","x1","cos","acos","x2","PI","x3","cbrt","DispatcherRegistry","respKey","extractData","assignAllTo","factoryEntry","response","factory","ApiContainerNode","extra_node_types","childNodeType","movable","findFreeIdentifier","api","initAPI","old","onAfterSettingsChange","onCreated","nameSuffix","onRemoved","fetchChildren","children","childIds","childNodes","collectChildNodes","existingChildNodes","obsoleteChildNodes","is_protected","processNextChildEntry","onGetMessageToEditorSide","runWithEditor","remaining","pop","existingNode","find","syncWithBackend","persistConfiguration","nodeType","TopLevelApiContainerNode","ignore_remove","removable","schemaMiddleware","req","res","details","authMiddleware","isAuthenticated","resp","event","send","errorFunc","NodeCRUDService","NodeService","reg","CreationResult","metadata","findNodes","batchDeleteByIds","unregister","initETLResult","RemoveResult","ETLResult","containerId","genMessage","className","errMsg","dest","cleanupResult","rr","NodeETLService","atPos","nodeIds","doExport","doPackUp","doImport","CloneResult","ExportResult","ImportResult","exportIds","listByIds","CONTAINER_NODE_TYPE","createFolder","tree","batchInsert","pNodes","removeNodes","pr","PackResult","destCId","contextCId","containers","nodeMap","analyze","build","remain","mapContainers","remapNodes","buildBranch","NodeBranch","siblingIds","generateId","lookup","descendant","relativePos","computeRelativePositions","lr","ContainerValidator","NodeValidator","batchCreate","normalizeNode","branch","flattenBranch","allPos","avgPos","sub","linkResult","oldId","lookupNodeType","move","normalizeNodeInputs","normalizeNodeOutputs","getLinkByInput","getLinkByOutput","AbstractFolderIONode","isUnderContainer","correctParentIO","inputOrOutput","findParentIOById","ModbusByteOrder","TYPES","INT16","UINT16","INT32","UINT32","FLOAT32","INT64","UINT64","DOUBLE64","ENDIAN","LEB_BEW","LEB_LEW","BEB_LEW","BEB_BEW","readByteOrder","buffer","offset","endian","buf","swap16","swap32","swap64","readInt16LE","readUInt16LE","readInt32LE","readUInt32LE","readFloatLE","readDoubleLE","writeValue","alloc","writeInt16LE","writeUInt16LE","writeInt32LE","writeUInt32LE","writeFloatLE","writeDoubleLE","UuidUtils","dataArray","isUUID","createDirectory","create8DigId","createUUID","random","create12DigId","compareType","s1","s2","inputType","Equals","NotEquals","GreaterThanEqual","GreaterThan","LessThanEqual","LessThan","Includes","startsWith","endsWith","valueWithKey","findVal","after","before","newObj","insertAfter","matchBoth","foundFlag","prop","setProps","EdgeGPIOUtils","value_420","min_target","max_target","ui_value","min_range","max_range","scaleToGPIOValue","minOutput","maxOutput","minInput","maxInput","pinValue","scaleFromGPIOValue","uiAsDI","diInvert","LORA_DATA_TYPE_NAMES","LORA_DATA_TYPE_LENGTHS","LoRaRawTwoWayInput","payloadDefinition","updateOutputs","stringToDataTypes","substring","senderId","parseError","pointParsed","fill","readUInt8","type_length","INT8","readInt8","UINT8","FLOAT","outputsCount","network","cp","set_ip_address","ip","IpAddressUtils","get_interfaces_list","iface","upDown","newIP","netNetmask","newGateway","newNameserver","checkIP","isV4Format","checkNetMask","checkGateway","nameserver","execSync","setIpDHCP","ipAddress","subnetMask","gateway","setIP","interface1Eth","dhcp1Eth","eth1Ip","eth1Sub","eth1Gate","eth1NameServer","interface2Eth","dhcp2Eth","eth2Ip","eth2Sub","eth2Gate","eth2NameServer","msgFailToUpdate","interfaceEth1","dhcpEth1","ethIp1","ethSub1","ethGate1","ethNameServer1","interfaceEth2","dhcpEth2","ethIp2","ethSub2","ethGate2","ethNameServer2","checkIpValidEth1","checkIpValid","checkIpValidEth2","interfacesArray","eth1","interface","dhcp","eth2","subnetMaskLength","subnet","ip_address","prefix","nameservers","configure","setNodeState","backendSyncCfg","ensureParentContainers","refreshPeriodically","findOrCreateNode","EdgesParentContainerNode","edgesContainer","ModulesParentContainerNode","modulesContainer","ServicesParentContainerNode","servicesContainer","type_name","root","refreshParentContainers","_map","u","unMap","store","soft","listeners","updateProtocols","subscribe","storePoint","EdgeHelp","NetworkDesc","EdgeContainerNode","EdgeAPI","customer_code","side_code","firmware_version","data_version","NetworkContainerNode","NetworkAPI","protocols","DeviceContainerNode","edge_node","errorMessage","DeviceAPI","manufacturer","GroupContainerNode","PointNode","network_node","edge_id","FolderAPI","device_node","PointAPI","edge","kind","measure_unit","precision","backend","Point","fetchPointData","updatePointData","device_id","unit","Api","_objId","fetchMany","objId","fetchOne","patch","newEntry","Edge","post","Network","Device","Folder","put","ModuleNode","ModuleAPI","ServiceNode","ServiceAPI","BaseServiceNode","required_settings","service_type","published_by","deploy_id","deploy_location","created_at","modified_at","settingsHeaderComponent","template","areSettingsValid","displayMessage","broadcastPropertiesToClients","ApplicationAPI","Service","ApiNode","uiPanels","getUiPanels","panels","removeElementForNode","removeEmptyPanels","sendUiPanel","newPanelName","newTitle","uiElemet","newPanel","getUiPanel","subPanels","uiElements","updateUiPanel","addUiPanel","getUiPanelsList","changed","panel","every","pan","removeUiPanel","oldPanel","subPanel","expressValidator","workingDir","express","locals","middleware","routes","handleErrors","start_io","webServer","use","morgan","statusCode","bodyParser","limit","urlencoded","extended","cookieParser","publicFolder","static","apiEditorSetup","normalizePort","set","http","createServer","listen","on","syscall","addr","address","io_root","EditorServerSocket","DashboardServerSocket","wireNameSocket","WireNameServerSocket","pingPongSocket","PingPongServerSocket","of","cont","getSubNode","renameFunction","room","leave","checkContainerNodeValidity","sendSlotsValues","connectedSocket","connected","rooms","slotsValues","getNodesIOValues","subNodes","formatAndTrimValue","httpServer","socketServer","SocketIO","handshake","ApiEditorRouter","router","Router","nodeHandler","onList","onRemove","onCreate","onPackUp","onExport","onClone","onImport","linkHandler","onMove","activeNodesIds","updateActiveNodes","getDb","subcontainers","headersSent","legacySetup","_nodeHandler","ApiNodeHandler","_linkHandler","ApiLinkHandler","setup","ApiHandler","linkService","NodeLinkService","emitSuccess","emitError","another","handler","persist","fromLink","re","crudService","etlService","createNode","packUpNodes","cloneNodes","exportNodes","NodeArrayValidator","allowUnknown","importNodes","render","container_id","nodeEditor","redirect","wire","getWireName","changeWireName","wireName","authUserSchema","encryptTextSchema","route","encryptedText","authUser","addAuthUser","getAuthUser","deleteAuthUsers","getAuthToken","stringHtml","getHelpComment","changeHelpComment","platform","updatePlatform","AndNode","boolean","and","allInputs","getDefinedInputValues","areAllInputsTrue","OrNode","or","anyTrue","XorNode","xor","in1","in2","NotNode","not","emitTransformedInput","ToggleNode","toggle","toggleOnAny","inputUpdated","lastVal","OneShotNode","clearTimers","lastFireValue","lastResetValue","timeUnits","reset","fire","delay","delayMilli","remainingFunc","remainingUpdateMillis","remainingUpdateSize","clearTimeout","MinOnOffNode","minOn","timeMinOn","minOff","timeMinOff","timeOn","timeOff","minOnEnabled","minOffEnabled","minOnTime","minOffTime","lastValue","DelayOnNode","lastInput","lastReset","DelayOffNode","TickerNode","lastInterval","runState","ticker","EqualNode","compare","equal","GreaterNode","LessThanNode","BetweenNode","between","HysteresisNode","hysteresis","inMsg","risingEdge","fallingEdge","TypeCheckNode","updateTitle","ConnectionLocalTransmitterNode","connection","receivers","getReceivers","updateTransmitterTopics","isEnable","topic","ifNew","receiver","blockNull","ConnectionLocalReceiverNode","topicList","inputEnable","inputNumTopic","topicDropdown","setTopic","transmitterTopic","updateChannel","unitCategory","broadcastOutputsToClients","transmitters","transmitter","pushSettings","manualTopicOption","changeTopicsCount","renameInputs","triggerTransmitterNodeUpdate","HubNode","hub","inputValue","ContainerInputNode","hasItself","containerNode","recomputeInputLinks","FOLDER_INPUT","ContainerOutputNode","recomputeOutputLinks","FOLDER_OUTPUT","BitMaskSingle","conversion","BIT","BYTE","BitMaskMultiple","mask","updateMask","BIT_START","IntToBits","setNewOutputs","START","BYTES","outputIndex","outputsLen","BoolToIntNode","IntToBoolNode","StringToBool","BufferToHexString","BufferToNumNode","dataEndian","writeUInt16BE","out","UnitConversionNode","TREE_SELECT","ensureFromToConfig","createTreeSelectItems","asItem","convert","measures","unitType","possibilities","categoryName","units","HexStringToBuffer","IntToFourByteArrayNode","EventCounterNode","inputData","CounterNode","counter","lastUp","lastDown","up","down","setValue","TriggeredRamp","countUp","currentVal","IntervalRampNode","lastEnable","WaveformNode","waveform","intervalTime","periodTime","amplitude","startTime","lastTime","recalculate","signalType","invert","sin","sign","CSVMergeRowsNode","csv","outputCSV","addCSV","CSVMergeColumnsNode","originalColumnsArray","mergeColumnsArray","originalColumnsCount","mergeColumnsCount","BSACumulocityDeviceNode","cumulocity","createDevice","checkDeviceExists","deviceName","getDeviceName","managedObjects","c8y_IsDevice","com_cumulocity_model_Agent","BSACumulocityNode","measurementName","measurementType","seriesName","measurements","ALARM_TYPE","alarmConfig","WARNING","MINOR","MAJOR","CRITICAL","BSACumulocityAlarmNode","postAlarm","alarmInput","alarmName","severity","alarmID","BSACumulocityOperationNode","ENABLESLOT","TRIGGERSLOT","OUTPUTSTARTSLOT","restoreOperationValues","operationsCount","renameOutputs","checkOperationsExist","checkOperationsExecuting","storeOperationValues","ALLoperations","getDeviceOperations","oldOperationsArray","operationsArray","makeOperationsArray","setNewOperationsToNull","operationName","anyOperation","createOperation","deviceId","c8y_control","originalValue","assetName","changedValue","foundOperations","operationSuccess","operationType","readNextOperation","nextLink","operations","operationValues","changeOutputsCount","FunctionNode","BaseFunctionNode","function","mixinScriptSetting","executeConfiguredScript","getScriptInput","emitResult","variables","NodeVM","timeout","sandbox","defaultScript","CODE_AREA","UuidNode","uuid","out8","out12","out28","UiLabelNode","formatValue","setState","UiButtonNode","button","buttonText","sendIOValuesToEditor","UiSwitchNode","switch","getState","UiProgressNode","progress","UiSliderNode","slider","UiTextBoxNode","UiLogNode","messagesPerSec","updateMessPerSec","maxRecords","removeOldRecords","sendMessageToDashboardSide","rec","unshift","records","del","dropped","record","$push","$each","$slice","$unset","UiChartNode","chart","ConsoleNode","MAX_MESS_PER_SEC","timer","NotesNode","comments","nodeColour","INFO","WatchNode","dataUpdated","UPDATE_INTERVAL","watch","startSending","lastData","showValueOnInput","LinkErrorCheckNode","subContainers","searchThisContainer","searchSubContainers","checkLinksForInputOutputData","searchContainer","isTopRecursion","currentContainer","nodeList","numNodes","getNodeById","outputLinks","linkInfo","containerName","containerErrors","nodeName","nodeErrors","outputName","outputNum","inputNode","inputNodeName","inputNodeSlot","containerNum","OutputErrorCheckNode","checkForOutputsWithNoData","FiltersOnlyTrueNode","FiltersOnlyFalseNode","FiltersOnlyFromRangeNode","FiltersOnlyGreaterNode","FiltersOnlyLowerNode","FiltersOnlyEqualNode","jsonEqual","FiltersPreventNullNode","FiltersPreventEqualNode","FiltersPreventDuplicatesNode","AnyDataStoreNode","history","someMoment","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","dateTz","timeFormatedArray","tz","csvString","_d","formatOutputs","InfluxDBNode","inName","inJsonInput","outError","outLastExport","outMsg","user","authentication","createClient","broadcastNameToClients","hasMeasurement","hasMeasurementTags","hasMeasurementFields","HttpError","SetupAPI","InfluxDB2Node","inEnable","getWriteApi","useDefaultTags","location","tag","field","floatField","stringField","booleanField","writePoint","close","PointPersistence","preventDuplicates","DeadbandNode","hvac","deadband","setpoint","ThermostatNode","thermostat","clgMode","htgMode","clgSP","LeadLagStagingNode","ROTATESLOT","UPSLOT","DOWNSLOT","DELAYSLOT","MINONSLOT","FAULTSTARTSLOT","JSONSLOT","ORDERSLOT","STAGESLOT","updateCount","initializeOutputJSON","rotate","lastRotate","stageUP","stageDOWN","upDelay","minOnDelay","currentStage","stageChange","fault","faultArray","convertNumToLetter","setOutputs","resetController","setOutputJSON","updateOutputsCount","updateInputsCount","generateRotations","shiftVal","requiredFaultInputs","convertNumber","fromCharCode","enableInput","rotateInput","stageUpInput","stageDownInput","stageUpDelay","order","orderIndex","numUnits","stageArray","useFaultInputs","currentTime","stageStartTime","LeadLagSwitchNode","PACUnitControl","ZTSLOT","SPSLOT","CLGOFSTSLOT","HTGOFSTSLOT","STGUPSLOT","MDLYSLOT","ECONOASLOT","OATSLOT","ECONHISLOT","ECONLOSLOT","FSSLOT","CLGLOCKSLOT","HTGLOCKSLOT","CLGMSLOT","HTGMSLOT","COMPSTGSLOT","ECONOMSLOT","OADMPSLOT","RVSLOT","COMPSTARTSLOT","econoLow","econoHigh","updateStageCount","updateFSInput","fanStatus","fanStatusInput","disable","clgOffset","htgOffset","htgSP","clgLockout","htgLockout","offSPInterval","OATemp","checkEconoConditions","temp","OAD","econoDB","zoneTemp","modeChangeDelay","econoAllow","econoHighLimit","econoLowLimit","fanStatusActual","fanStatusEffective","fanStatusOffTime","compStage","econoMode","OADamper","RV","compArray","setpointMode","numCompressors","econoConditionsDB","requireFanStatus","fanStatusOffDelay","htgModeEnd","clgModeEnd","PID","PIDFunctionNode","lastResetVal","pid","minOut","maxOut","inP","inI","inD","setSampleTime","setOutputLimits","setMode","setOutput","setBias","getOutput","initialize","manual","processVariable","bias","setPoint","setTunings","setControllerDirection","setInput","calculatePidOutput","Input","Setpoint","Kp","Ki","Kd","ControllerDirection","mySetpoint","inAuto","SampleTime","millis","myBias","ITerm","myOutput","current_value","setDirection","ki","dInput","kp","kd","dispKp","dispKi","dispKd","SampleTimeInSec","NewSampleTime","ratio","Min","Max","Mode","newAuto","getKp","getKd","getKi","getMode","getDirection","controllerDirection","getInput","getSetPoint","getBias","ToggleDurationNode","runtime","offDelay","remainingMins","runtimeVal","startCountdown","onExecute","psychrolib","PsychrometricCalculationsNode","psychro","psychrometrics","setConversionFunction","onInputOrSettingsChange","input1","input2","input3","clearOutputs","outputArray","conversionFunction","in3","EnergyUnitConversionNode","PowerUnitConversionNode","VolumeUnitConversionNode","TempConvertNode","AtmosphericPressureNode","updateTitleAndFunction","altitude","pressure","PressureConvertNode","ActuatorSizingNode","updateTitles","outputm2","outputft2","KFactorNode","area","DP","airflow","kFactor","DPAirflowNode","KFactor","airflowCFM","airflowLS","ArrayBuilderNode","ArrayBuilderNumNode","ArrayCombineNode","merged","JSONBuilderNode","filterKeys","addInputs","getFilterKeys","dynamicOutputStartPosition","updateInputs","diffKeyFromPos","fromPos","JSONEnumBuilderNode","definition","JsonFilter","JsonObjFilter","JsonFilterCompare","jsonCheck","string2","JsonFilterMultiple","inInput","outJsonOutput","outputs_count","changeOutputsAndSettings","renameInputsOutputs","outputJson","changeMyOutputsCount","targetOutputCount","getOutputNumber","JsonCheckerNode","isJson","JsonParse","JsonPreventDuplicates","getChanges","oldArray","newArray","older","jsonata","JsonQueryNode","queryInput","evaluate","AnyLatchNode","latch","passOnly","lastLatchValue","BoolLatchNode","NumLatchNode","StringLatchNode","SetResetNode","lock","AddNode","math","settingOutput","MathSubNode","subtract","MathMultiplyNode","multiply","MathDivideNode","divide","div","MathAbsNode","absolute","MathModulusNode","modulus","MathPowNode","power","MathAcosNode","MathAsinNode","asin","MathAtanNode","atan","MathCbrtNode","MathCosNode","MathExpNode","MathLogarithmNode","log10","MathSinNode","MathSqrtNode","MathTanNode","tan","TriggerAddNode","MathTriggerSubNode","MathTriggerMultiplyNode","MathTriggerDivideNode","MathTriggerModulusNode","MathTriggerPowNode","geohash","GeoHashNode","miscellaneous","encode","decode","NumSeriesGenerator","factor","AddressHelperString","prepend","append","btoa","GetSchedulesNode","nube","setExecuteInterval","getDittoSchedules","dittoUrl","MathDecimalPlaceNode","MathFloorNode","floor","MathCeilNode","LimitNode","ScaleNode","scale","LinearShaperNode","inputCountBefore","renameInputsAndSettings","updateInputsLabels","pointFormatted","stepSize","stepIndex","valueAtPosition","positionInStep","startValueIndex","startValue","endValue","TimeFadeNode","updateInterval","fade","timerFinished","RateLimitNode","BoolConstantNode","NumConstantNode","StringConstantNode","JsonConstantNode","passNull","BoolPriorityNode","NumWritableNode","StringPriorityNode","GenericNode","addPrioritySettings","addHistorySettings","addPrioritySettingsConfig","addHistorySettingsConfig","priorityOnCreated","historyOnCreated","doPriorityFunctions","doHistoryFunctions","priorityFunctionsForAfterSettingsChange","HistoryConfig","isOutput","history_group","databaseType","useInterval","clientIDfromPlat","deviceIDfromPlat","foundDeviceID","foundClientID","inputVal","typeOfVal","valAsNum","setPeriodicLogging","isNumber","findMainContainer","PriorityConfig","input_group","inputName","inputNumber","highestPriorityIndex","initializePriorityArray","removeInputAtPosition","updatePriorityInputsFromSettings","addInputAtPosition","removeAll","startPosition","settingsArray","inputsArray","inputArrayatY","inputArrayatX","EmailNode","services","service","email","PASSWORD","pass","subject","nodemailer","createTransport","sendMail","HttpMethod","HttpClientNode","GET","isEnabled","methodsWithBody","PATCH","PUT","POST","getSanitizedUrl","getSanitizedMethod","input_data","validateMethod","request","Edge28ApiNode","pointNodes","inAlarmTrigger","inHistoryTrigger","outVal","outMessageJson","outAlarm","_ui","_di","UI_timeoutFunc","DI_timeoutFunc","startInputPolling","pollUIs","sendPayloadToPointNodesFunc","pollDIs","edgeReadUI_Store","fetchPointValue","edgeReadDI_Store","sendPayloadToChild","pointsDI","pointsUI","pollInputsAndSend","POINT_TYPE","POINT_TYPE_TEXT","Edge28InputPointNode","DIGITAL","UI_DIGITAL","_0_10DC","_0_20MA","_4_20MA","_10K_THERMISTOR","MATH_FUNC_TYPE","NA","ADD","SUBTRACT","MULTIPLY","DIVIDE","NUMBER_INVERT","isDigitalType","pointEnable","pointDebug","pointNumber","lowScale","highScale","mathFunc","mathValue","sendPointValue","pointValue","pointOffset","NORMAL","sendJson","pointTypeText","validateNumbers","mathSwitch","pointCalcs","limitValDc","limitValMaZero","limitValMaFour","scaleUI420ma","scale420maToRange","calc10kThermistor","uiType","MathUtils","mathFuncType","REMAINDER","EXP","BOOL_INVERT","ONE_TO_TRUE","oneToTrue","TRUE_TO_ONE","trueToOne","numInvert","Edge10kSensorUtils","raw10K","temps10K","OUTPUT_POINT_TYPE","OUTPUT_POINT_TYPE_TEXT","Edge28OutputPointNode","deviceContainerID","newSetting","resendTime","DO","UO_AS_DIGITAL","UO_AS_0_10DC","lastSendTime","inputChange","apiCall","nodeVal","writePointValue","Edge28LORAResetNode","resetLORAConnect","BACnetNetwork","bacnetClient","deviceNodes","inNetworkEnable","inDiscover","initializeBacnetClient","iAm","whoIs","networkNumber","networkNumberWhoIs","net","closeBacnetClient","Bacnet","apduTimeout","broadcastAddress","Poll","BACnetDevice","isFirst","isPolling","shouldPoll","delayBetweenDevice","delayBetweenPoint","setBacnetClient","setPayloadsToPointNodes","addDevice","updateNetworkSettings","requestPoll","removeDevice","getNetworkNode","persistSettings","pntList","currentPollValue","polling","STOP","outputMsg","scanDeviceFunc","getBacnetClient","deviceAddress","writeProperty","adr","requestArray","objectId","enum","ObjectType","DEVICE","PropertyIdentifier","OBJECT_LIST","readPropertyMultiple","readObject","OBJECT_IDENTIFIER","OBJECT_NAME","OBJECT_TYPE","DESCRIPTION","UNITS","PRESENT_VALUE","readProperty","errorClass","objectInfo","objectProperties","findValueById","presentValue","readObjectList","objectArray","readObjectFull","deviceObjects","mapToDeviceObject","readPresentValue","writePresentValue","pollingFuncOrTimeout","race","pollingFunc","selectPoint","manualPoint","objectType","objectInstance","BACnetPoint","pollCount","pollCountFail","inputInNum","outputOutNum","jsonOutNum","errorOutNum","logsOutNum","pointsList","getPoints","setPointsListItems","getPresentValue","objectTag","pointWriteEnable","setPointValue","bacnetPointName","setJsonOutput","matchMQTT","BACnetServerRest","inputFault","inputOneNum","inputTwoNum","inputThreeNum","outConnection","outNum","outJson","messageQueue","rateLimitMS","AUTOCOMPLETE","point_object","getObjectIdentifier","getPointObject","fetchPoints","selectedPoint","objectName","object_name","object_type","objectIdentifier","cleanObjectType","setAddress","setObjectType","setObjectIdentifier","pointValueIn1","pointValueIn10","pointValueIn16","doPointWrite","getPointUUID","getAddress","getObjectType","setEnable","setSelectedPoint","getEnable","disconnectFromBroker","connectToBroker","mqttMessage","getTopic","processMessage","end","SensorType","LoraSensorDecoderNode","watchdogDelay","nodeID","Droplet","MicroEdge","watchdog","microEdgeA1","microEdgeA2","microEdgeA3","sensorType","resetWatchdog","writeOutputs","dropletDecode","microEdgeDecode","watchdogTime","microEdgeOutputs","MicroEdgeAnalogs","analogInputs","Vref","V","R0","R","topicsBuilder","pulses","voltage","a1","a2","a3","rssi","snr","lastMessage","lastMessageTimeStamp","humidity","lux","movement","b1Sensor","b2_sensor","currentSensorType","LoRaRawTwoWayOutput","inputsUpdated","checkInputAndType","isOk","data_lengths","writeUInt8","writeInt8","LoRaRawPointsInput","addressPrefix","keyBuffer","nonce","outputOffset","updateSettings","encryptedBuffer","dataBuffer","loraRawCrypt","loraRawDecryptBuffer","LORA_RAW_ERROR","LRERR_NOERR","startPos","outputValues","pointCount","addrPrefix","LoRaRawPointsOutput","errorOutputIndex","nonceLen","encBuffer","loraRawEncryptBuffer","crypto","aesCmac","IV_DEFAULT","iv","LRERR_INVALID_KEY","LRERR_INVALID_IV","cipher","createCipheriv","setAutoPadding","final","cmacBlock","cmac","returnAsBuffer","LRERR_INVALID_PAYLOAD","LRERR_INVALID_CMAC","createDecipheriv","LoraSensorLegacyDecoderNode","keyHex","ModbusRTU","ModbusServerNode","tcpServer","createModbusServer","closeTcpServer","coils","registers","unitId","minAddress","maxInputAddress","maxAddress","bufferFactor","vector","getCoil","unitID","getInputRegister","readUInt16BE","getHoldingRegister","setCoil","setRegister","readDeviceIdentification","0","salveAddress","once","ServerTCP","MqttClientNode","topicsCount","useEnv","topics_count","publish","topics","processQueue","msgAsNum","toFixedNumber","outInd","setMQTTOutput","MqttClientSingleNode","inData","inTopic","qos","retain","MqttTopicPartsNode","MQTTTopicBuilderNode","SerialPort","SerialConnectorNode","baudRates","isConnected","baudRate","manualPortNum","closePort","connectToSerialPort","writePortData","listPorts","portName","manualPort","autoOpen","Readline","parsers","pipe","delimiter","readPortData","formattedExecutionTime","write","portList","ports","WeeklyScheduleNode","daysArray","schedule","guess","makeHoursDropdown","makeMinsDropdown","startHour","startMin","endHour","endMin","scheduleOutput","weekly","events","schedID","tzOffset","utcOffset","offsetHours","offsetMins","rolloverFlag","startHourUTC","startMinsUTC","endHourUTC","endMinsUTC","sundayIndex","saturdayIndex","daysOutput","colour","hoursArray","minsArray","ScheduleMergeNode","inputString","inputObject","weeklyOutput","eventOutput","weeklySched","eventSched","ScheduleChecker","nextStart","nextStop","schedulePayload","zone","weeklyScheduleOutput","sched","ScheduleUtils","checkWeeklySchedule","scheduleStatus","isBefore","eventsOutput","eventScheduleOutput","checkEventsSchedule","eventSchedule","nextOn","nextOff","scheduleValue","dates","dtUTC","startMoment","endMoment","isAfter","weeklySchedule","getISOday","startArray","part","endArray","startMomentArray","isoWeekday","endMomentArray","MinMaxAvgNode","statistics","getDefinedInputsOrSettingsValues","AvgNode","MinNode","MaxNode","SumNode","MedianNode","RangeNode","RankNode","rank","outputCount","AnyStatAllNode","NumbersAverageNode","streams","resetToNull","NumbersHighestNode","NumbersLowestNode","NumbersSumNode","StreamMergeNode","GateNode","gate","StackNode","QueueNode","queue","DelayNode","delayedValues","DelayMeterNode","TimeFrequencyMeterNode","countWas","FlatlineNode","StringCompareNode","string1","TextCutSubstringNode","StringJoinNode","TextStringLengthNode","StringIndexOfNode","searchFor","TextCharAtIndexNode","TextSplitStringsNode","currentIndex","lastStart","lastNext","splitNext","separator","splittedText","StringCaseChangeNode","toTitleCase","phrase","word","charAt","setTitleAndConversionFunction","TextASCIICodeNode","charCodeAt","TextASCIICharNode","StringBufferNode","useTrigger","bufferData","lastSend","lastClear","lastAdd","addTrigger","triggerInput","BoolSwitchNode","inA","inB","NumSwitchNode","StringSwitchNode","BoolSelectNode","NumSelectNode","StringSelectNode","BoolOutputSelectNode","active","NumOutputSelectNode","StringOutputSelectNode","HostInfo","systemMem","callSystemInfo","callInfo","PlatNode","haystackAbout","serverName","productVersion","SystemBeepNode","beep","SystemExecuteNode","FlowExport","UpdateIPEdge28","timeStamp","getTimeStamp","interfaceEth0","eth0Ip","messageOutput","errorOutput","msgOut","newIpEth0","netNetmaskEth0","newGatewayEth0","newNameServerEth0","getInterfaces","enableInterfaceEth0","enableNetwork","disableNetwork","interfaceTypeEth0","writeChanges","reboot","checkIpSettingsEth0","bbbGetInterfaceDetails","bbbSetIPDHCP","bbbSetIPFixed","nodeColourChange","getActiveNetworks","getInterfaceEth0","networkUpDown","UpdateIP","newIpEth1","netNetmaskEth1","newGatewayEth1","newNameServerEth1","enableInterfaceEth1","interfaceTypeEth1","checkIpSettingsEth1","eth0","getInterfaceEth1","WiresVersion","getNodeJsVersion","getNPMVersion","TimeConvertNode","TimeConvertPlusNode","TIME","EPOCH","NEW_TS","timeSelection","timeConvertPlus","TimezoneConvertNode","tsCategory","local","region","tsType","TimezoneUtils","africaZones","americaZones","antarcticaZones","asiaZones","atlanticZones","australiaZones","europeZones","indianZones","pacificZones","ClockNode","clock","addOutputs","advanced","DateNode","dayString","toLocaleDateString","TimeDiffNode","date1","date2","diffTime","diffTotals","years","months","StopwatchNode","lastRunVal","stopwatch","CronJob","construe","CronIntervalNode","job","jobCronExp","dayBetweenStart","dayBetweenEnd","cronSetting","nextJobs","cronType","cronExp","nextDates","jsonataQuery","CronWeeklyNode","cronValidator","CronExpressionNode","valid","isValidCron","TimestampGeneratorNode","unix","COVNode","RandomNode","TriggeredInjectNode","inject","InjectNode","TimeIteratorNode","complete","lastStop","reqInterval","reqIterations","iterator","iterations","ScheduleAfterhoursOffWidgetNode","currentMode","remainingRuntime","widget","AHRuntime","modeInput","startSchedule","startAfterhours","schedInput","AHDuration","SchedulePrestartFixedNode","condition1_range1","condition1_range2","condition1_time","condition2_range1","condition2_range2","condition2_time","condition3_range1","condition3_range2","condition3_time","condition4_range1","condition4_range2","condition4_time","condition5_range1","condition5_range2","condition5_time","condition6_range1","condition6_range2","condition6_time","condition7_range1","condition7_range2","condition7_time","condition8_range1","condition8_range2","condition8_time","condition9_range1","condition9_range2","condition9_time","condition10_range1","condition10_range2","condition10_time","fromRange","toRange","UnknownNode","unknown","NeDbDatabase","authUserDatabase","userDatabase","nodeDatabase","dashboardDatabase","scheduleDatabase","historianDatabase","CLEANUP_INTERVAL","addUser","addOrUpdateUser","getUsers","getUser","getAsyncUsers","updateUser","getUsersCount","removeUser","dropUsers","getNode","dropNodes","dropUiPanels","addSchedule","updateSchedule","removeSchedule","addHistory","updateHistory","removeHistory","jwt","AuthUserDataSource","AbstractDatabase","doc","findOne","multi","expiresIn","verify","decoded","DashboardDataSource","removed","HistorianDataSource","updatedCallback","removedCallback","NodeDataSource","ser_node","ScheduleDataSource","UserDataSource","usr"],"mappings":"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Bge,eAAel+C,GACxCkgC,EAAI9hB,OAAO,KAAKoiB,KAAK,cACrB,MAAOniC,GACP6hC,EAAI9hB,OAAO,KAAKoiB,KAAKniC,UAKzB87C,EAAOj0D,IAAI,yBAAyB,SAAgB+5C,EAAKC,G,yCACvD,IACoB,EAAAz4C,kBAAkBI,WAAWE,gBACrCS,GAAG83B,SAAS,CAACvnB,EAAKmzB,KACrBnzB,EAGHmnC,EAAI9hB,OAAO,KAFX8hB,EAAI1U,KAAK/3B,KAAK6B,UAAU42B,MAK5B,MAAO7tB,GACP6hC,EAAI9hB,OAAO,KAAKoiB,KAAKniC,UAKzB87C,EAAOj0D,IAAI,mBAAmB,SAAgB+5C,EAAKC,G,yCACjD,IACE,UAAQpc,SACL/5B,KAAK6B,IACJs0C,EAAI1U,KAAK/3B,KAAK6B,UAAU1J,MAEzBi0B,MAAM9mB,IACLmnC,EAAI9hB,OAAO,KAAKoiB,KAAKznC,KAEzB,MAAOsF,GACP6hC,EAAI9hB,OAAO,KAAKoiB,KAAKniC,UAIzBjZ,EAAOD,QAAUg1D,G,cC1DjB/0D,EAAOD,QAAUmxB,QAAQ,O,cCAzBlxB,EAAOD,QAAUmxB,QAAQ,sB,8ECGzB,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OAEA,OACA,OACA,OACA,OACA,OACA,MACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,MACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,Q,8ECrPA,aACA,OACA,OACA,OAEA,MAAM6nC,UAAgB,EAAApyC,aAEpB,cACEpkB,QACAS,KAAK+jB,sBAAuB,EAC5B/jB,KAAKqkB,kBAAoB,EAAAta,KAAKqB,QAC9BpL,KAAK+I,MAAQ,EAAA2C,UAAUsqD,QAAQC,IAAIltD,MACnC/I,KAAKkK,YAAc,EAAAwB,UAAUsqD,QAAQC,IAAI/rD,YACzClK,KAAKuS,UAAU,SAAU,EAAAxI,KAAKqB,SAC9BpL,KAAKuS,UAAU,UAAW,EAAAxI,KAAKqB,SAC/BpL,KAAKoP,cAAc,GAAG,GACtBpP,KAAKoP,cAAc,GAAG,GAGxB,UAEEpP,KAAKq1B,iBAIP,iBACE,MAAM6gC,EAAYl2D,KAAKm2D,wBACvB,GAAwB,GAApBD,EAAUvwD,OAGZ,OAFA3F,KAAKoP,cAAc,GAAG,GAAO,QAC7BpP,KAAKoP,cAAc,GAAG,GAAM,GAG9B,MAAMgnD,EAAmBF,EAAUhI,MAAMl/C,IAAW,IAANA,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A,GACf,GAAqB,iBAAVA,EACT,QAASA,EASb,cAAcA,GACZ,GAAqB,kBAAVA,EACT,OAAQA,EAcZ,kBAAkBotF,EAAsBp8E,EAAUk7E,GAChD,IAAItsB,EACJ,OAAQwtB,GACN,KAAKhC,EAAeC,GAClBzrB,EAAM,EACN,MACF,KAAKwrB,EAAeE,IAClB1rB,EAAM5uD,EAAMk7E,EACZ,MACF,KAAKd,EAAeG,SAClB3rB,EAAM5uD,EAAMk7E,EACZ,MACF,KAAKd,EAAeI,SAClB5rB,EAAM5uD,EAAMk7E,EACZ,MACF,KAAKd,EAAeK,OAClB7rB,EAAM5uD,EAAMk7E,EACZ,MACF,KAAKd,EAAeiC,UAGpB,KAAKjC,EAAekC,IAClB1tB,EAAM,EACN,MACF,KAAKwrB,EAAemC,YAClB3tB,EAAMutB,EAAUlrB,OAAOjxD,GACvB,MACF,KAAKo6E,EAAeoC,YAClB5tB,EAAMutB,EAAUM,UAAUz8E,GAC1B,MACF,KAAKo6E,EAAesC,YAClB9tB,EAAMutB,EAAUQ,UAAU38E,GAC1B,MACF,KAAKo6E,EAAeM,cAClB9rB,EAAMutB,EAAUS,UAAU58E,GAG9B,OAAO4uD,GA/GX,YAsES,EAAA6sB,gBAAkB,IAAIl4E,IACpBA,EAAOy7C,MAAMz9C,IAAMzD,MAAMyD,K,8ECrFpC,MAAqBs7E,GAArB,YAIS,EAAAZ,kBAAqBj8E,IAC1B,MAAM88E,EAAS,CACb,YACA,YACA,YACA,YACA,YACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,YACA,YACA,WACA,YACA,YACA,aACA,aACA,UACA,aACA,YACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,WACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,WACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,cAEIC,EAAW,EACd,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACD,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KAEF,IAAI/tF,EAAQgR,EACZ,IAAK,IAAIjS,EAAI,EAAGA,EAAI,IAAKA,IACvB,GAAIiB,GAAS8tF,EAAO/uF,IAAMiB,EAAQ8tF,EAAO/uF,EAAI,GAAI,CAC/CiB,EAAQ+tF,EAAShvF,EAAI,IAAMiB,EAAQ8tF,EAAO/uF,EAAI,KAAO+uF,EAAO/uF,GAAK+uF,EAAO/uF,EAAI,IAC5E,MAGJ,OAAOiB,I,8YC9YX,aACA,QACA,OACA,OACA,OACA,OACA,QACA,QACA,QACA,QAEA,IAAKguF,EAMAC,GANL,SAAKD,GACH,eACA,qCACA,mCAHF,CAAKA,MAAiB,KAMtB,SAAKC,GACH,UACA,gCACA,8BAHF,CAAKA,MAAsB,KAM3B,MAAMC,UAA8B,UAclC,cACE7sF,QAdF,KAAAgmE,KAAe,KACf,KAAA8mB,kBAA4B,KAC5B,KAAA5xB,MAAgB,KAChB,KAAA6xB,YAAa,EAGb,KAAAC,WAAa,KAGb,KAAAjQ,QAAkB,EAClB,KAAAmL,eAAyB,EACzB,KAAAC,iBAA2B,EAIzB1nF,KAAK+I,MAAQ,EAAA2C,UAAU,kBAAkB,kBAAkB3C,MAC3D/I,KAAKkK,YAAc,EAAAwB,UAAU,kBAAkB,kBAAkBxB,YAEjElK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKuB,KAC5BtL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKoB,QAC9BnL,KAAKuS,UAAU,cAAe,EAAAxI,KAAKsB,MACnCrL,KAAK+C,WAAqB,SAAI,KAG9B/C,KAAKmM,SAAsB,YAAI,EAAAlC,YAAY1L,OAAO,CAChD2L,YAAa,eACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAKmM,SAAoB,UAAI,EAAAlC,YAAY1L,OAAO,CAC9C2L,YAAa,aACbhM,MAAOguF,EAAkBM,GACzBnqF,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAOguF,EAAkBM,GAAIl5E,KAAM64E,EAAuBK,IAC5D,CAAEtuF,MAAOguF,EAAkBO,cAAen5E,KAAM64E,EAAuBM,eACvE,CAAEvuF,MAAOguF,EAAkBQ,aAAcp5E,KAAM64E,EAAuBO,kBAI5E1sF,KAAKmM,SAAoB,UAAI,EAAAlC,YAAY1L,OAAO,CAC9C2L,YAAa,aACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,OAAO,EAAMoV,KAAM,8BACrB,CAAEpV,OAAO,EAAOoV,KAAM,iCAI5BtT,KAAKmM,SAAsB,YAAI,EAAAlC,YAAY1L,OAAO,CAChD2L,YAAa,QACbhM,MAAO,MACPmE,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,MAAOoV,KAAM,OACtB,CAAEpV,MAAO,MAAOoV,KAAM,OACtB,CAAEpV,MAAO,MAAOoV,KAAM,OACtB,CAAEpV,MAAO,MAAOoV,KAAM,OACtB,CAAEpV,MAAO,MAAOoV,KAAM,OACtB,CAAEpV,MAAO,MAAOoV,KAAM,OACtB,CAAEpV,MAAO,MAAOoV,KAAM,OACtB,CAAEpV,MAAO,MAAOoV,KAAM,OACtB,CAAEpV,MAAO,MAAOoV,KAAM,OACtB,CAAEpV,MAAO,MAAOoV,KAAM,OACtB,CAAEpV,MAAO,MAAOoV,KAAM,OACtB,CAAEpV,MAAO,MAAOoV,KAAM,OACtB,CAAEpV,MAAO,KAAMoV,KAAM,MACrB,CAAEpV,MAAO,KAAMoV,KAAM,UAK3BtT,KAAKivC,kBAAkB,CACrBC,OAAQ,CACN,CAAE86C,YAAa,GAAItlD,UAAW,IAC9B,CAAEylD,SAAU,GAAIC,UAAW,KAE7Bj7C,WAAY,CACVi7C,UAAWr/E,IACT,MAAMmE,EAAMnE,EAAkB,SAAE7M,MAChC,OAAQ,CAAC,GAAI,GAAGwS,SAASxB,IAE3BixC,UAAWp1C,GACFA,EAAmB,UAAE7M,QAAUguF,EAAkBQ,gBAK9D1sF,KAAK4jF,2BAGP,UACErkF,MAAMi2B,UACNx1B,KAAKk6D,cACDl6D,KAAKqB,OAAS,EAAA+S,KAAKC,SACvBrU,KAAKuG,iBAAmB,IACxBvG,KAAK2sF,cAAe,IAAIrmF,MAAOypC,UAC/B/vC,KAAK84D,UAAY,KACjB94D,KAAK4sF,eAGD,Y,yCACA5sF,KAAKqB,OAAS,EAAA+S,KAAKC,SACnB,IAAI/N,MAAOypC,UAAY/vC,KAAKusF,WAAavsF,KAAK2sF,eAChD3sF,KAAK84D,UAAY,WACX94D,KAAKq1B,qBAIf,UAAUhzB,GACR,OAAQA,GACN,KAAK6pF,EAAkBM,GACrB,MAAO,KACT,KAAKN,EAAkBO,cAEvB,KAAKP,EAAkBQ,aACrB,MAAO,KACT,QACE1sF,KAAK2O,UAAU,2BAIrB,cAActM,GACZ,OAAQA,GACN,KAAK6pF,EAAkBM,GACrB,OAAOL,EAAuBK,GAChC,KAAKN,EAAkBO,cACrB,OAAON,EAAuBM,cAChC,KAAKP,EAAkBQ,aACrB,OAAOP,EAAuBO,aAChC,QACE1sF,KAAK2O,UAAU,2BAIf,iB,2HACE,EAAM0mB,eAAc,WAC1Br1B,KAAK4sF,iBAGP,YACErtF,MAAM+2C,YAGF,wB,yIACE,EAAMH,sBAAqB,WACjCn2C,KAAKk6D,cACLl6D,KAAKugC,6BACLvgC,KAAK4sF,iBAGP,cACE,GAAI5sF,KAAKqB,OAAS,EAAA+S,KAAKC,OAAQ,OAC/B,MAAMswE,EAAmB3kF,KAAKmP,aAAanP,KAAKs8E,SAC1B,MAAlBt8E,KAAK84D,WAAqB6rB,IAAa3kF,KAAK84D,WAAW94D,KAAK6sF,QAAQlI,GAG1E,cACE,MAAMqF,EAAchqF,KAAKmM,SAAsB,YAAEjO,MACjD,GAAI8B,KAAKmM,SAAoB,UAAEjO,OAASguF,EAAkBQ,aAAc,CACtE,MAAMvsC,EAAYngD,KAAKmM,SAAoB,UAAEjO,MAAQ,mBAAqB,kBAC1E8B,KAAK+I,MAAQ,oBAAoBihF,MAAgBhqF,KAAK0qF,cAAc1qF,KAAKmM,SAAoB,UAAEjO,WAAWiiD,UAEvGngD,KAAK+I,MAAQ,oBAAoBihF,MAAgBhqF,KAAK0qF,cAAc1qF,KAAKmM,SAAoB,UAAEjO,SACpG8B,KAAKwgC,0BAGP,WAEE,IAAI2f,EAAY,KAGhB,OAJuBngD,KAAKmM,SAAoB,UAAEjO,OAASguF,EAAkBQ,eAEzDvsC,EAAYngD,KAAKmM,SAAoB,UAAEjO,MAAQ,6BAA+B,6BAE3F,CACLV,KAAMwC,KAAKxC,KACX8sF,WAAYtqF,KAAK+C,WAAqB,SACtC60B,OAAQ53B,KAAKmM,SAAsB,YAAEjO,MACrCugE,MAAOz+D,KAAKmM,SAAgB,MAAEjO,MAC9B8rF,YAAahqF,KAAKmM,SAAsB,YAAEjO,MAC1CwmC,UAAW1kC,KAAKmM,SAAoB,UAAEjO,MACtCiiD,UAAWA,GAIf,QAAQwkC,GAEN,GADA3kF,KAAK84D,UAAY6rB,EACb3kF,KAAKqB,OAAS,EAAA+S,KAAKC,OAAQ,OAC/B,IAA2C,IAAvCrU,KAAKmM,SAAsB,YAAEjO,MAAiB,OAClD,MAAM8rF,EAAchqF,KAAKmM,SAAsB,YAAEjO,MACjD,IAAIypF,EAAiB,KACrB,MAAMmF,EAAUnI,EAChB,GAAIA,QAA6C,OAkDjD,GAhDI3kF,KAAKmM,SAAoB,UAAEjO,QAAUguF,EAAkBM,GAEjC,kBAAb7H,EACTgD,EAAShD,EAAW,EAAI,EACK,iBAAbA,EACC,MAAbA,GAAiC,SAAbA,EACtBgD,EAAS,EACa,MAAbhD,GAAiC,UAAbA,IAC7BgD,EAAS,GAEkB,iBAAbhD,EACZA,GAAY,EACdgD,EAAS,EACAhD,EAAW,IAAGgD,EAAS,GAC7B3nF,KAAK+xC,UAAU,qDACb/xC,KAAKmM,SAAoB,UAAEjO,QAAUguF,EAAkBO,cAGxC,kBAAb9H,EAEPgD,EADEhD,EACO,EACK,IACa,iBAAbA,EACC,MAAbA,GAAiC,SAAbA,EACtBgD,EAAS,EACa,MAAbhD,GAAiC,UAAbA,IAC7BgD,EAAS,KAEkB,iBAAbhD,EACZA,GAAY,EACdgD,EAAS,EACAhD,EAAW,IAAGgD,EAAS,KAC7B3nF,KAAK+xC,UAAU,qDACb/xC,KAAKmM,SAAoB,UAAEjO,QAAUguF,EAAkBQ,eAExC,iBAAb/H,GACJ3kF,KAAKmM,SAAoB,UAAEjO,QAAOymF,GAAsB,IACzDA,GAAY,IAAKgD,EAAS,UAAc7lC,iBAAiB,IAAK,EAAG,MAGnE6iC,GAAsB,MACtBgD,EAAS,UAAc7lC,iBAAiB6iC,EAAU,EAAG,OAE1B,iBAAbA,GAChB3kF,KAAK+xC,UAAU,uCAIf,EAAA5hC,OAAOw3E,GAAS,OACpB,MAAMjjD,EAAY1kC,KAAK0kC,UAAU1kC,KAAKmM,SAAoB,UAAEjO,OAC5D,UAAY6uF,gBAAgB,EAAAtvD,OAAQ,EAAAC,SAAU,EAAAC,WAAY+G,EAAWslD,EAAarC,EAAQ,IACvFhmF,KAAKsU,IACJjW,KAAK+C,WAAqB,SAAI+pF,EAC9B9sF,KAAKoP,cAAc,EAAG09E,GACtB9sF,KAAKoP,cAAc,EAAGpP,KAAKyqF,YAC3BzqF,KAAK2sF,cAAe,IAAIrmF,MAAOypC,YAEhCtY,MAAM9mB,IACL3Q,KAAK+xC,UAAU,mCAAmCrN,KAAa/zB,QAKvE,EAAA9N,UAAUmB,iBAAiB,EAAA8pB,eAAgBs+D,EAAuB,EAAAx+D,kB,2aC3RlE,cACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QAEA,MAAao/D,UAA4B,EAAA9gF,KAKvC,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAU,kBAAkB,sBAAsB3C,MAC/D/I,KAAKkK,YAAc,EAAAwB,UAAU,kBAAkB,sBAAsBxB,YACrElK,KAAK2tC,qBAAqB,iBAAkB,EAAA5jC,KAAKqB,SAAS,EAAO,yBACjEpL,KAAK2tC,qBAAqB,WAAY,EAAA5jC,KAAKoB,OAAQ,GAAI,YACvDnL,KAAKkR,SAAS,UAAW,EAAAnH,KAAKqB,SAC9BpL,KAAKuS,UAAU,aAEfvS,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,QACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,eAAgBoV,KAAM,gBAC/B,CAAEpV,MAAO,UAAWoV,KAAM,WAC1B,CAAEpV,MAAO,UAAWoV,KAAM,WAC1B,CAAEpV,MAAO,QAASoV,KAAM,WAG5BpV,MAAO,YAET8B,KAAKivC,kBAAkB,CACrBC,OAAQ,CAAC,CAAEtpC,SAAU,CAAEypC,OAAQ,GAAKhsB,KAAM,OAIxC,gBACJ/H,EACAC,EACAmQ,EACAgZ,EACAC,EACAz1B,EACA01B,G,yCAEA,MAAM/Z,EAAM,GAAG,UAAMxP,SAASC,EAAMC,UAAamQ,WAAgBgZ,KAAaC,KAAWz1B,KAAO01B,IAIhG,aAFyB,UAAM9mC,IAAI+sB,IAEjBljB,QAGpB,UAEE,GADA3H,KAAK4G,OAAO,GAAS,KAAI,eAAe5G,KAAKmM,SAAe,KAAEjO,SAC1D8B,KAAKqB,OAAS,EAAA+S,KAAKC,OAAQ,OAC/B,IAAIzO,EAAW5F,KAAKmP,aAAa,GACjCvJ,EAAW,UAAUmb,YAAYnb,EAAU5F,KAAKmM,SAAe,KAAEjO,OACjE8B,KAAKuG,iBAAmBX,EACxB,IACE,UAAYkgC,SAAS9lC,KAAKymC,gBAAiBzmC,MAC3C,MAAO8J,KAGX,YACM9J,KAAKqB,OAAS,EAAA+S,KAAKC,QAClBrU,KAAKmP,aAAa,IACvBnP,KAAKitF,mBAGP,iBACE,GAAIjtF,KAAKqB,OAAS,EAAA+S,KAAKC,OAAQ,OAC/B,IAAIzO,EAAW5F,KAAKmP,aAAa,GACjCvJ,EAAW,UAAUmb,YAAYnb,EAAU5F,KAAKmM,SAAe,KAAEjO,OACjE8B,KAAKuG,iBAAmBX,EACxB,IAAIgsC,EAAU5xC,KAAKmP,aAAa,GAE5ByiC,IAAY5xC,KAAKwtC,aAAaxtC,KAAKitF,mBACvCjtF,KAAKwtC,YAAcoE,EAGrB,mBACE,GAAI5xC,KAAKqB,OAAS,EAAA+S,KAAKC,OAAQ,OAG/BrU,KAAK+sF,gBAAgB,EAAAtvD,OAAQ,EAAAC,SAAU,EAAAC,WAFrB,KACE,KACuD,EAAG,IAC3Eh8B,KAAKsU,IACJjW,KAAKoP,cAAc,GAAG,IAAI9I,MAAOypC,WAAW,GAC5C/vC,KAAK0uC,YAAcrxB,WAAW,KAC5Brd,KAAK+sF,gBAAgB,EAAAtvD,OAAQ,EAAAC,SAAU,EAAAC,WAN3B,KACE,KAK6D,EAAG,KAC7E,OAEJlG,MAAM9mB,GAAO3Q,KAAK+xC,UAAU,+BAA+BphC,MAGhE,wBACE3Q,KAAK4G,OAAO,GAAS,KAAI,eAAe5G,KAAKmM,SAAe,KAAEjO,SAC1D8B,KAAKqB,OAAS,EAAA+S,KAAKC,QACvBrU,KAAKq1B,kBA7FT,wBAiGA,EAAAxyB,UAAUmB,iBAAiB,oCAAqCgpF,I,qGC5GhE,cACA,QACA,OACA,QAEA,OACA,OACA,OACA,QACA,QAEA,MAAaE,UAAsB,EAAA7kF,cAWjC,cACE9I,QAXF,KAAA4tF,aAAuB,KACvB,KAAAC,YAA2B,GAG3B,KAAAC,gBAA0B,EAC1B,KAAAC,WAAqB,EAGrB,KAAAthB,OAAiB,EAIfhsE,KAAK+I,MAAQ,EAAA2C,UAAU,oBAAoB,kBAAkB3C,MAC7D/I,KAAKkK,YAAc,EAAAwB,UAAU,oBAAoB,kBAAkBxB,YAEnElK,KAAK2tC,qBAAqB,SAAU,EAAA5jC,KAAKqB,SAAS,EAAO,kBAAkB,GAC3EpL,KAAKkR,SAAS,WAAY,EAAAnH,KAAKqB,SAC/BpL,KAAKuS,UAAU,MAAO,EAAAxI,KAAKmB,QAC3BlL,KAAKmM,SAAoB,UAAI,EAAAlC,YAAY1L,OAAO,CAC9C2L,YAAa,YACbhM,MAAO,UACPmE,KAAM,EAAA2H,YAAYkB,SAEpBlL,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,OACbhM,MAAO,MACPmE,KAAM,EAAA2H,YAAYmB,SAEpBnL,KAAKmM,SAA2B,iBAAI,EAAAlC,YAAY1L,OAAO,CACrD2L,YAAa,mBACbhM,MAAO,kBACPmE,KAAM,EAAA2H,YAAYkB,SAEpBlL,KAAKmM,SAAsB,YAAI,EAAAlC,YAAY1L,OAAO,CAChD2L,YAAa,qBACbhM,MAAO,IACPmE,KAAM,EAAA2H,YAAYmB,SAEpBnL,KAAKmM,SAAwB,cAAI,EAAAlC,YAAY1L,OAAO,CAClD2L,YAAa,+CACbhM,OAAQ,EACRmE,KAAM,EAAA2H,YAAYmB,SAEpBnL,KAAKmM,SAA6B,mBAAI,EAAAlC,YAAY1L,OAAO,CACvD2L,YAAa,qCACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,EAAGoV,KAAM,uBAClB,CAAEpV,MAAO,EAAGoV,KAAM,mBAClB,CAAEpV,MAAO,EAAGoV,KAAM,WAGtBpV,MAAO,IAET8B,KAAKmM,SAAwB,cAAI,EAAAlC,YAAY1L,OAAO,CAClD2L,YAAa,6BACbhM,MAAO,IACPmE,KAAM,EAAA2H,YAAYmB,SAItB,UACE5L,MAAMi2B,UAENx1B,KAAKutF,yBAGP,sBAAsBpgF,GACpB5N,MAAM42C,sBAAsBhpC,GACxBnN,KAAKqB,OAAS,EAAA+S,KAAKC,QACvBrU,KAAKutF,yBAGP,iBACMvtF,KAAK4G,OAAO5G,KAAKstF,YAAYzmF,UAC/B7G,KAAKwtF,MACLxtF,KAAKytF,SAEHztF,KAAK4G,OAAO5G,KAAKqtF,iBAAiBxmF,SACpC7G,KAAKutF,yBAIT,QACE,GAAIvtF,KAAKqB,OAAS,EAAA+S,KAAKC,OAAQ,OAC/B,MAAM0vC,EAAQ/jD,KAAKmM,SAAoB,UAAEjO,MACnCwvF,EAAgB1tF,KAAKmM,SAAwB,cAAEjO,MAC/CyvF,EAAqB3tF,KAAKmM,SAA6B,mBAAEjO,MAC3D8B,KAAKmtF,aACoB,IAAvBQ,GACF3tF,KAAKmtF,aAAaM,MAAM,CAAEG,IAAKF,EAAe5mC,UAAW/C,IACzD/jD,KAAKoP,cAAcpP,KAAKgsE,OAAQ,8BAA8B0hB,gBAA4B3pC,MAC1D,IAAvB4pC,GACT3tF,KAAKmtF,aAAaM,MAAM,CAAEG,IAAK,MAAQ9mC,UAAW/C,IAClD/jD,KAAKoP,cAAcpP,KAAKgsE,OAAQ,+CAAmDjoB,MACnD,IAAvB4pC,IACT3tF,KAAKmtF,aAAaM,MAAM,CAAE3mC,UAAW/C,IACrC/jD,KAAKoP,cAAcpP,KAAKgsE,OAAQ,+CAA+CjoB,MAE5E/jD,KAAKoP,cAAcpP,KAAKgsE,OAAQ,+BAGzC,MACMhsE,KAAKqB,OAAS,EAAA+S,KAAKC,SACvBrU,KAAKoP,cAAcpP,KAAKgsE,OAAQ,uBAChChsE,KAAKmtF,aAAan9B,GAAG,MAAO1mC,IAC1BtpB,KAAKoP,cAAcpP,KAAKgsE,OAAQ,oCAAoC1iD,EAAOpU,QAAQ0uD,eAIvF,WAAU,OAAE/7D,EAAM,QAAEqN,IAClB,OAAQrN,GACN,KAAK,EAAAq9B,WACHllC,KAAKotF,YAAYjoF,KAAK+P,GACtB,MACF,KAAK,EAAAiwB,cACHnlC,KAAKotF,YAAcptF,KAAKotF,YAAYz/E,OAAO2kC,GAAaA,EAAUvyC,KAAOmV,EAAQnV,IACjF,MACF,KAAK,EAAA8kC,kBACH,OAAO7kC,KAAKmtF,aACd,KAAK,EAAAroD,iBACH,OAAO9kC,KACT,QACEA,KAAK2O,UAAU,iCAIrB,YACEpP,MAAM+2C,YACNt2C,KAAK6tF,oBAGC,oBACF7tF,KAAKmtF,eACPntF,KAAKoP,cAAcpP,KAAKgsE,OAAQ,kCAChChsE,KAAKmtF,aAAa9f,SAItB,yBACE,GAAIrtE,KAAKqB,OAAS,EAAA+S,KAAKC,OAAvB,CACArU,KAAK6tF,oBACL7tF,KAAKoP,cAAcpP,KAAKgsE,OAAQ,gCAChChsE,KAAKmtF,aAAe,IAAIW,EAAO,CAC7BC,YAAa/tF,KAAKmM,SAAsB,YAAEjO,MAC1C4oD,UAAW9mD,KAAKmM,SAAoB,UAAEjO,MACtCqd,KAAMvb,KAAKmM,SAAe,KAAEjO,MAC5B8vF,iBAAkBhuF,KAAKmM,SAA2B,iBAAEjO,QAElD8B,KAAKmtF,aACPntF,KAAKoP,cAAcpP,KAAKgsE,OAAQ,iCAC3BhsE,KAAKoP,cAAcpP,KAAKgsE,OAAQ,4CAEvC,IAAK,IAAI35B,KAAcryC,KAAKotF,YAC1B,UAAY3E,mBAAmBp2C,EAAY,CACzC86C,aAAcntF,KAAKmtF,aACnB/6C,YAAapyC,SA9JrB,kBAmKA,EAAA6C,UAAUmB,iBAAiB,EAAAypB,eAAgBy/D,I,8YC9K3C,cACA,QACA,OACA,QAEA,OACA,OACA,OACA,OACA,QAUA,QAGA,IAAKe,GAAL,SAAKA,GACH,mBACA,qBAFF,CAAKA,MAAI,KAKT,MAAMC,UAAqB,EAAA7lF,cAYzB,cACE9I,QAZF,KAAA4tF,aAAuB,KACvB,KAAA/6C,YAA6B,KAC7B,KAAAzC,OAA8B,GAC9B,KAAA63C,WAA0B,GAC1B,KAAA2G,SAAmB,EACnB,KAAAC,WAAqB,EACrB,KAAAC,YAAsB,EACtB,KAAAC,mBAA6B,IAC7B,KAAAC,kBAA4B,GAE5B,KAAAb,cAAwB,KAGtB1tF,KAAK+I,MAAQ,EAAA2C,UAAU,oBAAoB,iBAAiB3C,MAC5D/I,KAAKkK,YAAc,EAAAwB,UAAU,oBAAoB,iBAAiBxB,YAClElK,KAAKkR,SAAS,iBAAkB,EAAAnH,KAAKqB,SACrCpL,KAAKuS,UAAU,MAAO,EAAAxI,KAAKmB,QAC3BlL,KAAKuS,UAAU,UAAW,EAAAxI,KAAKmB,QAC/BlL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKmB,QAC7BlL,KAAKuS,UAAU,oBAAqB,EAAAxI,KAAKmB,QACzClL,KAAKuS,UAAU,iBAAkB,EAAAxI,KAAKmB,QACtClL,KAAK+C,WAAuB,WAAI,KAChC/C,KAAKmM,SAAuB,aAAI,EAAAlC,YAAY1L,OAAO,CACjD2L,YAAa,gBACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAIpBpL,KAAKmM,SAAa,GAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,KAAMhM,MAAO,gBAAiBmE,KAAM,EAAA2H,YAAYkB,SACxGlL,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,WAAYhM,MAAO,KAAMmE,KAAM,EAAA2H,YAAYmB,SACzGnL,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,OAAQhM,MAAO,MAAOmE,KAAM,EAAA2H,YAAYmB,SAGlGnL,KAAKmM,SAAyB,eAAI,EAAAlC,YAAY1L,OAAO,CACnD2L,YAAa,sBACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAGpBpL,KAAKmM,SAAqB,WAAI,EAAAlC,YAAY1L,OAAO,CAC/C2L,YAAa,qBACbhM,MAAO,EACPmE,KAAM,EAAA2H,YAAYmB,SAGpBnL,KAAKmM,SAAwB,cAAI,EAAAlC,YAAY1L,OAAO,CAClD2L,YAAa,yBAEb7H,KAAM,EAAA2H,YAAY82B,WAIhB,U,uGACJ,EAAMtL,QAAO,iBAEP,UAAMrY,MAAM,KAClBnd,KAAKwuF,kBACLxuF,KAAKyuF,0BACDzuF,KAAKqB,OAAS,EAAA+S,KAAKC,SACvB,UAAYq6E,UAAU1uF,KAAKymC,gBAAiBzmC,MAC5CA,KAAK2uF,8BACC3uF,KAAK4uF,kBAGb,sBAAsBzhF,GACpB5N,MAAM42C,sBAAsBhpC,GAC5BnN,KAAKyuF,0BACLzuF,KAAK4uF,cAAcjtF,OAGrB,YACEpC,MAAM+2C,YACNt2C,KAAKquF,YAAa,EAClB,UAAYQ,aAAa7uF,KAAKymC,gBAAiBzmC,MAGjD,wBACMA,KAAKqB,OAAS,EAAA+S,KAAKC,SACvBrU,KAAKoyC,YAAc,UAAY08C,eAAe9uF,KAAKymC,iBACnDzmC,KAAK0tF,cAAgB1tF,KAAKoyC,YAAYjmC,SAAwB,cAAEjO,MAChE8B,KAAKmM,SAAwB,cAAEjO,MAAQ8B,KAAK0tF,cAC5C1tF,KAAKugC,6BACLvgC,KAAK+uF,mBAGP,iBACE,IAAIC,EAAU,GACd,IAAK,IAAI18C,KAAatyC,KAAKwnF,WAAY,CACrC,MAAMr7E,EAAWmmC,EAAUnmC,SAI3B,IAAIlD,EAAI,CACNlJ,GAJSuyC,EAAUvyC,GAKnBoB,IAJUmxC,EAAUvyC,GAKpBvC,KAJW80C,EAAU90C,KAKrB2O,SAAUA,GAEZ6iF,EAAQ7pF,KAAK8D,GAEfjJ,KAAKoP,cAAc,EAAG/D,KAAK6B,UAAU8hF,IACrChvF,KAAKoP,cAAc,EAAG/D,KAAK6B,UAAUlN,KAAK2vC,SAGtC,c,yCACA3vC,KAAKivF,qBAAuBhB,EAAK9wB,OAAUn9D,KAAKouF,YAClDpuF,KAAKouF,WAAY,QACXpuF,KAAKkvF,cAKf,mBACE,OAAOlvF,KAAKmM,SAAuB,aAAEjO,OAAS8B,KAAKoyC,YAAYjjC,aAAanP,KAAKoyC,YAAYi7C,iBACzFY,EAAK9wB,MACL8wB,EAAKkB,KAGX,0BACMnvF,KAAKqB,OAAS,EAAA+S,KAAKC,SACvBrU,KAAKoP,cAAcpP,KAAKovF,UAAW,sBACnC,YACGxoE,QAA6B,IAAM5mB,KAAKqvF,kBACxC1tF,KAAKguC,IACJ3vC,KAAK2vC,OAASA,EACd3vC,KAAKooF,gCAET,YAAMxhE,QAAQ,IAAY,EAAD,gCAAC,aAAM,UAAMzJ,MAAMnd,KAAKsuF,wBAAqB3sF,QAIxE,8BACE,IAAK,IAAI2wC,KAAatyC,KAAKwnF,WACzB,UAAYiB,mBAAmBn2C,EAAW,CACxC3C,OAAQ3vC,KAAK2vC,OACbyC,YAAapyC,KAAKoyC,cAMxB,kBACMpyC,KAAKqB,OAAS,EAAA+S,KAAKC,SACvBrU,KAAKmtF,aAAe,UAAYmC,gBAAgBtvF,KAAKymC,kBAIvD,kBAAkB8oD,EAAeltF,EAAM5C,EAAUvB,EAAO0mC,EAAUmoC,GAC3D/sE,KAAKmtF,eACNntF,KAAKmM,SAAyB,eAAEjO,MAClC8B,KAAKmtF,aAAaqC,cAChB,CACEr/B,QAASo/B,EACT3B,IAAK5tF,KAAK0tF,cACV+B,IAAK,CAACzvF,KAAKmM,SAAqB,WAAEjO,QAEpC,CAAEmE,KAAMA,EAAM5C,SAAUA,GACxB,GACA,CAAC,CAAE4C,KAAM0qE,EAAK7uE,MAAOA,IACrB,CAAE0mC,SAAUA,GACZ,CAACj0B,EAAKzS,KACJulB,QAAQC,IAAI/S,EAAKzS,KAIrB8B,KAAKmtF,aAAaqC,cAChBD,EACA,CAAEltF,KAAMA,EAAM5C,SAAUA,GACxB,GACA,CAAC,CAAE4C,KAAM0qE,EAAK7uE,MAAOA,IACrB,CAAE0mC,SAAUA,GACZ,CAACj0B,EAAKzS,SAKZ,eAAeqxF,EAAe3rB,EAAU30D,GAEtC,MAAMygF,EAAe,CACnB,CACEC,SAAU,CAAEttF,KAAMyrF,EAAO8B,KAAKC,WAAWC,OAAQrwF,SAAUmkE,GAC3D7gE,WAAY,CAAC,CAAEhD,GAAI+tF,EAAO8B,KAAKG,mBAAmBC,gBAGjDhwF,KAAKmtF,eACNntF,KAAKmM,SAAyB,eAAEjO,MAClC8B,KAAKmtF,aAAa8C,qBAChB,CACE9/B,QAASo/B,EACT3B,IAAK5tF,KAAK0tF,cACV+B,IAAK,CAACzvF,KAAKmM,SAAqB,WAAEjO,QAEpCwxF,EACAA,EACAzgF,GAEGjP,KAAKmtF,aAAa8C,qBAAqBV,EAAeG,EAAczgF,IAG7E,eAAesgF,EAAeltF,GAC5B,OAAOrC,KAAKkwF,WAAWX,EAAeltF,EAAM,CAC1C,CAAEtC,GAAI+tF,EAAO8B,KAAKG,mBAAmBI,mBACrC,CAAEpwF,GAAI+tF,EAAO8B,KAAKG,mBAAmBK,aACrC,CAAErwF,GAAI+tF,EAAO8B,KAAKG,mBAAmBM,aACrC,CAAEtwF,GAAI+tF,EAAO8B,KAAKG,mBAAmBO,aACrC,CAAEvwF,GAAI+tF,EAAO8B,KAAKG,mBAAmBQ,OACrC,CAAExwF,GAAI+tF,EAAO8B,KAAKG,mBAAmBS,iBAMzC,WAAWjB,EAAe/rF,EAAKT,GAC7B,OAAO,IAAIvB,QAAQC,IACjB,MAAMiuF,EAAe,CACnB,CACEC,SAAU,CAAEttF,KAAMmB,EAAInB,KAAM5C,SAAU+D,EAAI/D,UAC1CsD,WAAYA,IAGX/C,KAAKmtF,eACNntF,KAAKmM,SAAyB,eAAEjO,MAClC8B,KAAKmtF,aAAa8C,qBAChB,CACE9/B,QAASo/B,EACT3B,IAAK5tF,KAAK0tF,cACV+B,IAAK,CAACzvF,KAAKmM,SAAqB,WAAEjO,QAEpCwxF,EACA,CAAC5lF,EAAO5L,KACNuD,EAAQ,CACNqI,MAAOA,EACP5L,MAAOA,MAKb8B,KAAKmtF,aAAa8C,qBAAqBV,EAAeG,EAAc,CAAC5lF,EAAO5L,KAC1EuD,EAAQ,CACNqI,MAAOA,EACP5L,MAAOA,SAQjB,aAAaqxF,EAAe/rF,GAC1B,OAAO,IAAIhC,QAAQC,IACbzB,KAAKmM,SAAyB,eAAEjO,MAClC8B,KAAKmtF,aAAasD,aAChB,CAAEtgC,QAASo/B,EAAe3B,IAAK5tF,KAAK0tF,cAAe+B,IAAK,CAACzvF,KAAKmM,SAAqB,WAAEjO,QACrF,CAAEmE,KAAMmB,EAAInB,KAAM5C,SAAU+D,EAAI/D,UAChCquF,EAAO8B,KAAKG,mBAAmBS,cAC/B,CAAC1mF,EAAO5L,KACNuD,EAAQ,CACNqI,MAAOA,EACP5L,MAAOA,MAKb8B,KAAKmtF,aAAasD,aAChBlB,EACA,CAAEltF,KAAMmB,EAAInB,KAAM5C,SAAU+D,EAAI/D,UAChCquF,EAAO8B,KAAKG,mBAAmBS,cAC/B,CAAC1mF,EAAO5L,KACNuD,EAAQ,CACNqI,MAAOA,EACP5L,MAAOA,QAQnB,iBAAiBsF,GACf,OAAOxD,KAAKywF,aAAazwF,KAAKmM,SAAa,GAAEjO,MAAOsF,GAGtD,cAAcT,EAAYhD,GACxB,MAAMnB,EAAWmE,EAAWs0C,MAAK,SAASl/B,GACxC,OAAOA,EAAQpY,KAAOA,KAExB,OAAInB,GAAYA,EAASV,OAASU,EAASV,MAAMyH,OAAS,EACpD/G,EAASV,MAAM,GAAGA,MAAMwyF,WACnB,KAEF9xF,EAASV,MAAM,GAAGA,MAElB,KAIX,kBAAkBS,GAChB,IAAKA,IAAWA,EAAO8T,OACrB,OAAO,KAET,MAAMk+E,EAAahyF,EAAO8T,OAAO,GAAGk9E,SAASlwF,SACvCmxF,EAAmBjyF,EAAO8T,OAAO,GAAGA,OAO1C,MAAO,CAAEk+E,aAAYnzF,KANRwC,KAAK6wF,cAAcD,EAAkB9C,EAAO8B,KAAKG,mBAAmBK,aAMtDlmF,YALPlK,KAAK6wF,cAAcD,EAAkB9C,EAAO8B,KAAKG,mBAAmBO,aAKhDjuF,KAJ3BrC,KAAK6wF,cAAcD,EAAkB9C,EAAO8B,KAAKG,mBAAmBM,aAInC5xB,MAHhCz+D,KAAK6wF,cAAcD,EAAkB9C,EAAO8B,KAAKG,mBAAmBQ,OAG7BO,aAFhC9wF,KAAK6wF,cAAcD,EAAkB9C,EAAO8B,KAAKG,mBAAmBS,gBAKrF,iB,yCACJ,MAAMlnE,EAAS,CACbs6C,SAAU5jE,KAAKmM,SAAmB,SAAEjO,MACpCiyD,QAASnwD,KAAKmM,SAAa,GAAEjO,OAI/B,OAFA8B,KAAKoP,cAAc,EAAG,yBAAyB/D,KAAK6B,UAAUoc,MAC9DtpB,KAAKoP,cAAc,EAAG,IACf,IAAI5N,QAAQ,CAACC,EAASq2B,KAC3B93B,KAAK+wF,eAAeznE,EAAO6mC,QAAS7mC,EAAOs6C,SAAU,CAAOjzD,EAAKsjB,IAAW,EAAD,gCACzE,GAAKtjB,EA4BH3Q,KAAKoP,cAAc,EAAG,IACtBpP,KAAKoP,cAAc,EAAG,kCAAkC/D,KAAK6B,UAAUyD,MACvEmnB,EAAOnnB,OA9BC,CACR,MAAMqgF,EAAc/8D,EAAOxhB,OAAO,GAAGA,OAAO,GAAGvU,MAE/C8B,KAAKoP,cAAc,EAAG,yBAAyB/D,KAAK6B,UAAUoc,MAC9DtpB,KAAKoP,cAAc,EAAG,IACtB,MAAMnI,EAAU,GAChB,IAAK,MAAMtI,KAAUqyF,EAAa,CAChC,IACE,MAAM9pF,QAAelH,KAAKixF,eAAe3nE,EAAO6mC,QAAS,CACvD9tD,KAAM1D,EAAOT,MAAMmE,KACnB5C,SAAUd,EAAOT,MAAMuB,WAEzBwH,EAAQ9B,KAAK+B,GACb,MAAO4C,GACP9J,KAAKoP,cAAc,EAAG,IACtBpP,KAAKoP,cAAc,EAAG,kCAAkC/D,KAAK6B,UAAUpD,MACvEguB,EAAOhuB,SAEH,UAAMqT,MAAMnd,KAAKsuF,oBAEzB,MACM4C,EADoBjqF,EAAQ0G,OAAOwK,IAAYA,EAAQrO,OACrBP,IAAI4O,GACnCnY,KAAKmxF,kBAAkBh5E,EAAQja,QAExC8B,KAAK+xC,UAAU,8CAA8C1mC,KAAK6B,UAAUgkF,MAC5ElxF,KAAKoP,cAAc,EAAG,yBAAyB/D,KAAK6B,UAAUgkF,MAC9DzvF,EAAQyvF,aAUhB,WAAU,OAAErpF,EAAM,QAAEqN,IAClB,OAAQrN,GACN,KAAK,EAAA01B,UACHv9B,KAAKwnF,WAAWriF,KAAK+P,GACrB,MACF,KAAK,EAAAsoB,aACHx9B,KAAKwnF,WAAaxnF,KAAKwnF,WAAW75E,OAAO2kC,GAAaA,EAAUvyC,KAAOmV,EAAQnV,IAC/E,MACF,KAAK,EAAA+kC,iBACH,OAAO,UAAYgqD,eAAe9uF,KAAKymC,iBACzC,KAAK,EAAA1B,WACH,OAAO/kC,KAAK2vC,OACd,KAAK,EAAA3K,kBACH,OAAOhlC,KAAKoxF,iBAAiBl8E,GAC/B,KAAK,EAAAooB,sBACHt9B,KAAKmtF,aAAej4E,EAAQi4E,aAC5BntF,KAAKoyC,YAAcl9B,EAAQk9B,YAC3BpyC,KAAK2uF,wBACA3uF,KAAKmuF,SAERnuF,KAAKyuF,0BAEPzuF,KAAKmuF,SAAU,EACfnuF,KAAK4uF,cAAcjtF,OACnB,MACF,KAAK,EAAAyjC,oBACHplC,KAAKqxF,kBAAkBrxF,KAAKmM,SAAa,GAAEjO,MAAOgX,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,GAAIA,EAAQ,IAE1G,MACF,QACElV,KAAK2O,UAAU,iCAIrB,kBACO3O,KAAKH,UAAUO,IACpBJ,KAAKH,UAAUO,GAAG2uB,WAAW/uB,KAAKD,GAAIC,KAAKH,UAAUE,GAAI,CACvDivB,KAAM,CACJ7iB,SAAUnM,KAAKmM,SACfpJ,WAAY/C,KAAK+C,cAKjB,U,yCACA/C,KAAKivF,qBAAuBhB,EAAK9wB,OAAUn9D,KAAKquF,kBAI9C,YAAMznE,QAAa,IAAM5mB,KAAKsxF,8BAC9B,YAAM1qE,QAAa,IAAY,EAAD,gCAAC,aAAM,UAAMzJ,MAAMnd,KAAKsuF,8BACtD,UAAMnxE,MAAMnd,KAAKoyC,YAAYjmC,SAAwB,cAAEjO,aACvD8B,KAAKkvF,WANTlvF,KAAKouF,WAAY,KAYrB,uBACE,MAAMroF,EAAO/F,KACb,OAAOwB,QAAQ+vF,KAAK,CAClBvxF,KAAKwxF,cACL,IAAIhwF,QAAQ,CAACQ,EAAG81B,IACdza,WAAW,IAAMya,EAAO,IAAItZ,MAAM,YAAaxe,KAAKoyC,YAAYjmC,SAAwB,cAAEjO,UAE3Fu5B,OAAM,SAAS9mB,GAChB5K,EAAKuB,SAAS,UAAUqJ,QAItB,c,yCACJ,IAAK,IAAI2hC,KAAatyC,KAAKwnF,WAAY,CACrC,IAAIiK,EAAcn/C,EAAUnmC,SAAqB,WAAEjO,MACnD,MAAMwzF,EAAcp/C,EAAUnmC,SAAsB,YAAEjO,MAChDyzF,EAAar/C,EAAUnmC,SAAqB,WAAEjO,MAC9C0zF,EAAiBt/C,EAAUnmC,SAAyB,eAAEjO,MAI5D,GAHIwzF,IACFD,EAAc,CAAEpvF,KAAMsvF,EAAYlyF,SAAUmyF,IAE1CH,EAAa,CACf,MAAMvzF,QAAc8B,KAAKoxF,iBAAiBK,GAC1CzxF,KAAK+xC,UAAU,yDAAyD1mC,KAAK6B,UAAUhP,MACvF,UAAYmsF,eAAe/3C,EAAWp0C,SAChC,UAAMif,MAAMnd,KAAKuuF,yBAK/B,EAAA1rF,UAAUmB,iBAAiB,EAAA0pB,cAAewgE,EAAc,EAAAzgE,iB,8YCzdxD,aACA,QACA,OACA,OACA,OACA,OACA,OACA,QACA,QAEA,QAGA,MAAMokE,UAAoB,UAgBxB,cACEtyF,QAfF,KAAAowC,OAA8B,GAE9B,KAAAmiD,UAAY,EACZ,KAAAC,cAAgB,EAGhB,KAAAC,WAAa,EAGb,KAAAC,aAAe,EACf,KAAAC,WAAa,EACb,KAAAC,YAAc,EACd,KAAAC,WAAa,EAIXpyF,KAAK+I,MAAQ,EAAA2C,UAAU,oBAAoB,gBAAgB3C,MAC3D/I,KAAKkK,YAAc,EAAAwB,UAAU,oBAAoB,gBAAgBxB,YACjElK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKuB,KAC5BtL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKmB,QAC9BlL,KAAKuS,UAAU,cAAe,EAAAxI,KAAKmB,QACnClL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKmB,QAC7BlL,KAAKuS,UAAU,OAAQ,EAAAxI,KAAKmB,QAC5BlL,KAAKmM,SAAsB,YAAI,EAAAlC,YAAY1L,OAAO,CAChD2L,YAAa,eACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAKmM,SAA2B,iBAAI,EAAAlC,YAAY1L,OAAO,CACrD2L,YAAa,qBACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAKmM,SAAsB,YAAI,EAAAlC,YAAY1L,OAAO,CAChD2L,YAAa,qBACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAGpBpL,KAAKmM,SAAqB,WAAI,EAAAlC,YAAY1L,OAAO,CAC/C2L,YAAa,iBACbhM,MAAO,KACPmE,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,MAGXxQ,KAAKmM,SAAqB,WAAI,EAAAlC,YAAY1L,OAAO,CAC/C2L,YAAa,cACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,EAAGoV,KAAM,gBAClB,CAAEpV,MAAO,EAAGoV,KAAM,iBAClB,CAAEpV,MAAO,EAAGoV,KAAM,gBAClB,CAAEpV,MAAO,EAAGoV,KAAM,gBAClB,CAAEpV,MAAO,EAAGoV,KAAM,iBAClB,CAAEpV,MAAO,EAAGoV,KAAM,gBAClB,CAAEpV,MAAO,GAAIoV,KAAM,qBACnB,CAAEpV,MAAO,GAAIoV,KAAM,sBACnB,CAAEpV,MAAO,GAAIoV,KAAM,uBAGvBpV,MAAO,IAGT8B,KAAKmM,SAAoB,UAAI,EAAAlC,YAAY1L,OAAO,CAC9C2L,YAAa,gCACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,EAAGoV,KAAM,WAClB,CAAEpV,MAAO,EAAGoV,KAAM,cAClB,CAAEpV,MAAO,EAAGoV,KAAM,uBAClB,CAAEpV,MAAO,EAAGoV,KAAM,qBAClB,CAAEpV,MAAO,EAAGoV,KAAM,WAClB,CAAEpV,MAAO,EAAGoV,KAAM,aAClB,CAAEpV,MAAO,EAAGoV,KAAM,mBAClB,CAAEpV,MAAO,EAAGoV,KAAM,uBAClB,CAAEpV,MAAO,EAAGoV,KAAM,iBAClB,CAAEpV,MAAO,EAAGoV,KAAM,iBAClB,CAAEpV,MAAO,GAAIoV,KAAM,YACnB,CAAEpV,MAAO,GAAIoV,KAAM,YACnB,CAAEpV,MAAO,GAAIoV,KAAM,0BAGvBpV,MAAO,IAGT8B,KAAKmM,SAAyB,eAAI,EAAAlC,YAAY1L,OAAO,CACnD2L,YAAa,WACbhM,MAAO,EACPmE,KAAM,EAAA2H,YAAYmB,SAGpBnL,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,kBACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYmB,SAEpBnL,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,6BACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAKivC,kBAAkB,CACrBE,WAAY,CACVkjD,WAAYtnF,IACFA,EAAqB,YAAE7M,MAEjCyzF,WAAY5mF,GACHA,EAAqB,YAAE7M,SAIpC8B,KAAK4jF,yBAAyB,GAAG,GAG7B,U,uGACJ,EAAMpuD,QAAO,WAETx1B,KAAKqB,OAAS,EAAA+S,KAAKC,eACjB,UAAM8I,MAAM,KAClBnd,KAAK2vC,OAAS,UAAY2iD,UAAUtyF,KAAKymC,iBACzCzmC,KAAKuyF,qBACLvyF,KAAKwyF,kBACL,UAAY1sD,SAAS9lC,KAAKymC,gBAAiBzmC,UAGvC,iB,qHAGJ,SADM,EAAMq1B,eAAc,WACtBr1B,KAAKqB,OAAS,EAAA+S,KAAKC,OAAQ,OAC/B,IAAIs9E,EACAC,EACJ,MAAM1zF,EAAQ8B,KAAKmP,aAAa,GAC1By1B,EAAW5kC,KAAKmM,SAAmB,SAAEjO,MACrCwzF,EAAc1xF,KAAKmM,SAAsB,YAAEjO,MAC3CuzF,EAAczxF,KAAKmM,SAAqB,WAAEjO,MAC1Cu0F,EAAYzyF,KAAKmM,SAAoB,UAAEjO,MAC7C,IAAIw0F,EAAmB1yF,KAAKmM,SAA2B,iBAAEjO,MACrDwzF,IACFC,EAAa3xF,KAAKmM,SAAqB,WAAEjO,MACzC0zF,EAAiB5xF,KAAKmM,SAAyB,eAAEjO,OAE/CuzF,IACFE,EAAaF,EAAYpvF,KACzBuvF,EAAiBH,EAAYhyF,UAE3B,EAAA0Q,OAAOjS,KACc,IAArBw0F,GAEJ,UAAYrB,kBAAkBrxF,KAAKymC,gBAAiB,CAACkrD,EAAYC,EAAgB1zF,EAAO0mC,EAAU6tD,OAG9F,wB,qJACE,EAAMt8C,sBAAqB,WACjCn2C,KAAKwyF,kBACL,MAAMpgD,EAA6B,UAAY08C,eAAe9uF,KAAKymC,kBAC5B,QAAvC,EAAwB,QAAxB,EAAI2L,EAAYjmC,gBAAQ,eAAEuhF,qBAAa,eAAExvF,SACvC8B,KAAK0tF,cAAmD,QAAtC,EAAuB,QAAvB,EAAGt7C,EAAYjmC,gBAAQ,eAAEuhF,qBAAa,eAAExvF,UAI9D,YACEqB,MAAM+2C,YACN,UAAYtQ,YAAYhmC,KAAKymC,gBAAiBzmC,MAGhD,kBACE,GAAIA,KAAKqB,OAAS,EAAA+S,KAAKC,OAAQ,OAC/B,IAAIo9E,EAAczxF,KAAKmM,SAAqB,WAAEjO,MAC9C,MAAMwzF,EAAc1xF,KAAKmM,SAAsB,YAAEjO,MAC3CyzF,EAAa3xF,KAAKmM,SAAqB,WAAEjO,MACzC0zF,EAAiB5xF,KAAKmM,SAAyB,eAAEjO,MACnDwzF,IACFD,EAAc,CAAEpvF,KAAMsvF,EAAYlyF,SAAUmyF,IAE1CH,GACF,UAAYe,gBAAgBxyF,KAAKymC,gBAAiBgrD,GAAa9vF,KAAKstB,IAClEjvB,KAAK2yF,cAAc1jE,KAKzB,cAAcA,G,UAMZ,GALajvB,KAAKmM,SAAe,KAAEjO,QAEjC8B,KAAKoP,cAAcpP,KAAKoyF,YAAY,GAAM,GAC1CpyF,KAAK+xC,UAAU,8CAA8C1mC,KAAK6B,UAAU+hB,YAEvCpf,KAAb,QAAtB,EAAkB,QAAlB,EAAU,QAAV,EAAAof,aAAG,EAAHA,EAAK/wB,aAAK,eAAEuU,cAAM,eAAG,UAAC,eAAGvU,OAG3B,OAFA8B,KAAKoP,cAAcpP,KAAKmyF,aAAa,GAAM,QAC3CnyF,KAAKsH,SAAS,8DAA8D+D,KAAK6B,UAAU+hB,MAG7F,IACI0iE,EACAC,EAFAtH,EAAar7D,EAAI/wB,MAAMuU,OAAO,GAAGvU,MAGjC4rF,EAAc9pF,KAAKmM,SAAsB,YAAEjO,MAC3Cw0F,EAAmB1yF,KAAKmM,SAA2B,iBAAEjO,MACzD,MAAM0mC,EAAW5kC,KAAKmM,SAAmB,SAAEjO,MACrCwzF,EAAc1xF,KAAKmM,SAAsB,YAAEjO,MAC3CuzF,EAAczxF,KAAKmM,SAAqB,WAAEjO,MAC1Cm0F,EAAaryF,KAAKmM,SAAqB,WAAEhJ,OAAOqN,MACtD,IAAIoiF,EAMJ,GAJIlB,IACFC,EAAa3xF,KAAKmM,SAAqB,WAAEjO,MACzC0zF,EAAiB5xF,KAAKmM,SAAyB,eAAEjO,OAE/CuzF,IACFE,EAAaF,EAAYpvF,KACzBuvF,EAAiBH,EAAYhyF,SAEzB4yF,GAAY,CACd,IAAI7uF,EAAM6uF,EACV,IAAK,IAAI7zF,KAAOgF,EAEZA,EAAI1E,eAAeN,IACnBgF,EAAIhF,GAAKN,MAAMmE,OAASovF,EAAYpvF,MACpCmB,EAAIhF,GAAKN,MAAMuB,WAAagyF,EAAYhyF,WAExCmzF,EAAkBpvF,EAAIhF,IAM9B,GAAIywB,EAAI/wB,MAAO,CACb8B,KAAK8xF,YACL,MAAM1uD,EAAO,CACX5lC,KAAMwC,KAAKxC,KACX8sF,WAAYA,EACZ1yD,OAAQkyD,EACR4I,iBAAkBA,EAClBf,WAAYA,EACZC,eAAgBA,EAChBhtD,SAAUA,EACVguD,gBAAiBA,EACjBd,UAAW9xF,KAAK8xF,UAChBC,cAAe/xF,KAAK+xF,eAEtB/xF,KAAKoP,cAAcpP,KAAKiyF,aAAc3H,GACtCtqF,KAAK6yF,cAAczvD,GACnBpjC,KAAKoP,cAAcpP,KAAKmyF,YAAa,MAAM,QAE3CnyF,KAAKoP,cAAcpP,KAAKiyF,aAAc,MAAM,GAC5CjyF,KAAK6yF,cAAc,MACf5jE,EAAInlB,QACN9J,KAAKoP,cAAcpP,KAAKmyF,YAAa,0BACrCnyF,KAAK+xF,iBAKX,cAAc3uD,GAEZ,OADApjC,KAAKoP,cAAcpP,KAAKkyF,WAAY9uD,GAC7BA,EAGT,qBACEpjC,KAAKmM,SAAqB,WAAEhJ,OAAOqN,MAAQxQ,KAAK2vC,OAAOpmC,IAAIo8B,IAClD,CACLznC,MAAO,CAAEmE,KAAMsjC,EAAMtjC,KAAM5C,SAAUkmC,EAAMgrD,YAC3Cr9E,KAAMqyB,EAAMnoC,QAGhBwC,KAAKu3C,uBACLv3C,KAAKugC,6BAGP,WAAU,OAAE14B,EAAM,QAAEqN,IAClB,OAAQrN,GACN,KAAK,EAAAy1B,sBACHt9B,KAAK2vC,OAASz6B,EAAQy6B,OACtB3vC,KAAKuyF,qBACL,MACF,KAAK,EAAAttD,iBACHjlC,KAAK2yF,cAAcz9E,GACnB,MACF,QACElV,KAAK2O,UAAU,kCAIvB,EAAA9L,UAAUmB,iBAAiB,EAAA2pB,aAAckkE,EAAa,EAAAnkE,gB,waC7StD,aACA,OACA,OACA,OACA,OACA,OACA,OACA,QACA,QACMolE,EAAY,EAAQ,IAC1B,QA8BA,MAAaC,UAAyB,EAAA7mF,KAoCpC,cACE3M,QAnCF,KAAAyzF,WAAa,EACb,KAAAC,YAAc,EACd,KAAAC,YAAc,EACd,KAAAC,cAAgB,EAGhB,KAAAC,cAAgB,EAChB,KAAAC,OAAS,EACT,KAAAC,QAAU,EAKV,KAAAC,aAAmC,GAEnC,KAAAC,YAAc,IASd,KAAA16B,UAAY,KAEZ,KAAAyzB,WAAa75E,KAAKgvE,MAAsB,GAAhBhvE,KAAKotC,UAAiB,EAG9C,KAAAxkC,KAAO,UACP,KAAAC,KAAO,KAEP,KAAAuiB,aAAc,EAIZ99B,KAAK+I,MAAQ,EAAA2C,UAAU,2BAA2B,qBAAqB3C,MACvE/I,KAAKkK,YAAc,EAAAwB,UAAU,2BAA2B,qBAAqBxB,YAC7ElK,KAAK+C,WAAwB,YAAI,KACjC/C,KAAKmM,SAAyB,eAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,kBAAmBhM,MAAO,GAAImE,KAAM,EAAA2H,YAAY82B,WACpH9gC,KAAKmM,SAA8B,oBAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,aAAchM,MAAO,GAAImE,KAAM,EAAA2H,YAAY82B,WACpH9gC,KAAKmM,SAAqB,WAAI,EAAAlC,YAAY1L,OAAO,CAC/C2L,YAAa,cACb7H,KAAM,EAAA2H,YAAYypF,aAClBtwF,OAAQ,CACNqN,MAAO,MAGXxQ,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,SAAUhM,OAAO,EAAMmE,KAAM,EAAA2H,YAAYoB,UACrGpL,KAAKkR,SAAS,QAAS,EAAAnH,KAAKqB,SAC5BpL,KAAKkR,SAAS,OAAQ,EAAAnH,KAAKoB,QAC3BnL,KAAKkR,SAAS,QAAS,EAAAnH,KAAKoB,QAC5BnL,KAAKkR,SAAS,QAAS,EAAAnH,KAAKoB,QAC5BnL,KAAKuS,UAAU,aAAc,EAAAxI,KAAKuB,KAClCtL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKuB,KAC9BtL,KAAKuS,UAAU,cAAe,EAAAxI,KAAKsB,MAG/B,W,yCACJ,MAAMqoF,EAAe1zF,KAAK2zF,sBAC1B3zF,KAAKy6D,MAAQ,2BAA2Bi5B,OAG1C,WACE,OAAO1zF,KAAKy6D,MAGd,eACC,MAAMj3D,EAAMxD,KAAK4zF,iBACjB,IAAI,EAAAzjF,OAAO3M,GACX,OAAOA,EAAI+hE,KAGN,Y,+CACEvlE,KAAK6zF,YAAY7zF,KAAKsb,KAAMtb,KAAKub,SAGnC,Y,yCACJvb,KAAK43B,OAAS53B,KAAKmM,SAAiB,OAAEjO,SAGxC,YACE,OAAO8B,KAAK43B,OAId,iBACE,OAAO53B,KAAK+C,WAAwB,YAGhC,mB,yCACJ,MAAM+wF,EAAgB9zF,KAAK4zF,iBAC3B,GAAI,EAAAzjF,OAAO2jF,GAAgB,OAC3B,MAAMC,EAAaD,EAAcE,YAC3BrC,EAAamC,EAAcG,YAC3B9jC,EAAU2jC,EAAc3jC,QACxB+jC,EAAmB,GAAGvC,EAAW9uC,UAAU,OAAOsN,IAClDgkC,EAAkB,GAAGxC,EAAW9uC,UAAU,MAChD7iD,KAAKo0F,WAAWjkC,GAChBnwD,KAAKq0F,cAAcF,GACnBn0F,KAAKs0F,oBAAoBJ,GACzBl0F,KAAKomC,UAAY,GAAG8tD,QAAuBH,IAC3C/zF,KAAKmM,SAA8B,oBAAEjO,MAAQ61F,EAC7C/zF,KAAKugC,gCAGP,aACE,OAAOvgC,KAAKmwD,QAGd,WAAWA,GACTnwD,KAAKmwD,QAAUA,EAGjB,gBACE,OAAOnwD,KAAK2xF,WAGd,cAAcA,GACZ3xF,KAAK2xF,WAAaA,EAIpB,mBACE,OAAO3xF,KAAK8zF,cAGd,oBAAoBI,GAClBl0F,KAAKmM,SAAyB,eAAEjO,MAAQg2F,EAI1C,sBACE,OAAOl0F,KAAKmM,SAAyB,eAAEjO,MAIzC,cACE8B,KAAK+I,MAAQ,kBAAkB/I,KAAKomC,YACpCpmC,KAAKwgC,0BAIN,YACC,GAAIxgC,KAAKqB,OAAS,EAAA+S,KAAKC,OAAQ,OAC/B,MAAMkgF,EAAwBv0F,KAAKmP,aAAanP,KAAKizF,aAC/CuB,EAAiBx0F,KAAKmP,aAAanP,KAAKkzF,aACxCuB,EAAiBz0F,KAAKmP,aAAanP,KAAKmzF,eAC9CnzF,KAAK00F,aAAaH,EAAeC,EAAgBC,GAKnD,cACE,GAAIz0F,KAAKqB,OAAS,EAAA+S,KAAKC,OAAQ,OAC/B,MAAMkgF,EAAwBv0F,KAAKmP,aAAanP,KAAKizF,aAC/CuB,EAAiBx0F,KAAKmP,aAAanP,KAAKkzF,aACxCuB,EAAiBz0F,KAAKmP,aAAanP,KAAKmzF,eAC9C,GAAsB,MAAlBnzF,KAAK84D,WAAqB27B,IAAmBz0F,KAAK84D,UAAU,CAC9D,MAAMyM,EAAOvlE,KAAK20F,eAClB,GAAG,EAAAxkF,OAAOo1D,GAAM,OAChBvlE,KAAK00F,aAAaH,EAAeC,EAAgBC,IAKrD,aAAaF,EAAeC,EAAgBC,GAC1C,MAAMn5E,EAAQtb,KAAKsb,KACbC,EAAOvb,KAAKub,KAEZ40C,EAAUnwD,KAAK40F,aACfjD,EAAa3xF,KAAK60F,gBACpB70F,KAAK89B,aAAa99B,KAAK+xC,UAAU,oCAAoC,CAACz2B,EAAMC,EAAMo2E,EAAYxhC,EAASokC,EAAeC,EAAgBC,MACvI,EAAAtkF,OAAOggD,IACP,EAAAhgD,OAAOwhF,IACV3xF,KAAK+sF,gBAAgBzxE,EAAMC,EAAMo2E,EAAYxhC,EAASokC,EAAeC,EAAgBC,GAAgB9yF,KAAKsU,IACpGjW,KAAK89B,aAAa99B,KAAK+xC,UAAU,kDAAkD97B,OACtFwhB,MAAM9mB,IACH3Q,KAAK89B,aAAa99B,KAAK+xC,UAAU,kEAAkEphC,OAM3G,iBACE3Q,KAAK4sF,cAIP,kBACO5sF,KAAKH,UAAUO,IACpBJ,KAAKH,UAAUO,GAAG2uB,WAAW/uB,KAAKD,GAAIC,KAAKH,UAAUE,GAAI,CACvDivB,KAAM,CACJ7iB,SAAUnM,KAAKmM,SACfpJ,WAAY/C,KAAK+C,cAKlB,wB,yCACH,MAAMsvF,EAAaryF,KAAKmM,SAAqB,WAAEjO,YACzC8B,KAAK80F,YACX90F,KAAK+C,WAAwB,YAAIsvF,QAC3BryF,KAAK+0F,yBACL/0F,KAAKk7D,WACX,MAAMtjC,EAAS53B,KAAKg1F,YAChBh1F,KAAKqB,MAAQ,EAAA+S,KAAKC,SACpBrU,KAAKi1F,uBACDr9D,IACF53B,KAAKk1F,kBACDl1F,KAAK89B,aAAa99B,KAAK+xC,UAAU,yDAGzC/xC,KAAKsyF,YACLtyF,KAAKk6D,cACLl6D,KAAK4sF,iBAGP,YACE5sF,KAAKi1F,uBAGD,YAAY35E,EAAcC,G,yCAC9B,GAAIvb,KAAKqB,OAAS,EAAA+S,KAAKC,OAAQ,OAC/B,MAAMwW,EAAM,GAAG,UAAMxP,SAASC,EAAMC,uBAGpC,MAAMo0B,SAFiB,UAAM7xC,IAAI+sB,IACdljB,KAAKgoC,OACLpmC,IAAIo8B,IACd,CAAEznC,MAAOynC,EAAOryB,KAAMqyB,EAAMquD,eAErCh0F,KAAKmM,SAAqB,WAAEhJ,OAAOqN,MAAQm/B,EACxC,EAAAx/B,OAAOw/B,IACV3vC,KAAKugC,gCAKD,gBAAgBjlB,EAAcC,EAAco2E,EAAoBxhC,EAAiBokC,EAAsBC,EAAuBC,G,yCAClI,GAAIz0F,KAAKqB,OAAS,EAAA+S,KAAKC,OAAQ,OAC/B,MAAMwW,EAAM,GAAG,UAAMxP,SAASC,EAAMC,4BAA+Bo2E,KAAcxhC,IACjFnwD,KAAK84D,UAAYy7B,EACjB,MAAM38E,EAAO,CACX,qBAAwB,CAGtB,IAAO68E,IASX,OANIz0F,KAAK89B,aAAa99B,KAAK+xC,UAAU,6CAA6ClnB,UAAYjT,UAAa0D,UAAaC,eAAkBvb,KAAK84D,mBACzI,UAAM1N,MAAMvgC,EAAKjT,EAAM,CAC3BysB,QAAS,CACP,eAAgB,sBAGb,QAIT,UAEE,GADArkC,KAAKm2C,wBACDn2C,KAAKqB,OAAS,EAAA+S,KAAKC,OAAQ,OAC/B,MAAMgP,EAA0B,IAAlBrjB,KAAKusF,WAAqB,IACxCvsF,KAAKuG,iBAAmB8c,EAI1B,eAAe8xE,GAEb,MAAMjhD,EAAMl0C,KAAKy6D,MACbq4B,EAAU5+C,EAAKihD,EAAY16B,SAC7Bz6D,KAAKoP,cAAcpP,KAAKqzF,OAAQ8B,EAAYzrF,SAC5C1J,KAAKoP,cAAcpP,KAAKszF,QAAS6B,IAKrC,kBACE,IAAI,KAAE75E,EAAI,KAAEC,EAAI,SAAEgN,EAAQ,SAAEE,GAAa,UAAOmD,KAC5CwP,EAAe,GAEf,EAAAjrB,OAAOmL,IACP,EAAAnL,OAAOoL,IACP,EAAApL,OAAOnQ,KAAKo1F,cACS,IAArBp1F,KAAKg1F,cACT55D,EAAQ9f,KAAOA,EACf8f,EAAQ7f,KAAOA,EAEfvb,KAAKi1F,uBACLj1F,KAAK8wC,OAASllB,EAAK0a,QAAQlL,GAC3Bp7B,KAAK8wC,OAAOkf,GAAG,UAAW,KACpBhwD,KAAK89B,aAAa99B,KAAK+xC,UAAU,2DAA2D1mC,KAAK6B,UAAUkuB,MAC/Gp7B,KAAKoP,cAAcpP,KAAKozF,eAAe,GAAM,GAC7C,IAAI34B,EAAQz6D,KAAKo1F,WAEZ,EAAAjlF,OAAOsqD,KACNz6D,KAAK89B,aAAa99B,KAAK+xC,UAAU,sDAAsD0oB,KAC3Fz6D,KAAK8wC,OAAO8X,UAAU6R,MAI1Bz6D,KAAK8wC,OAAOkf,GAAG,QAAS,KAClBhwD,KAAK89B,aAAa99B,KAAK+xC,UAAU,qDACrC/xC,KAAKoP,cAAcpP,KAAKozF,eAAe,GAAO,KAGhDpzF,KAAK8wC,OAAOkf,GAAG,QAASlmD,IACtB9J,KAAK2O,UAAU7E,KAEjB9J,KAAK8wC,OAAOkf,GAAG,UAAW,CAACyK,EAAO/wD,KAChC,IAAIlG,EAAmB,CAAEi3D,MAAOA,EAAO/wD,QAASA,EAAQwN,YACpDlX,KAAK89B,aAAa99B,KAAK+xC,UAAU,iDAAiD1mC,KAAK6B,UAAU1J,MACrGxD,KAAKq1F,eAAe7xF,MAIxB,uBACMxD,KAAK8wC,QAAQ9wC,KAAK8wC,OAAOwkD,OA9TjC,qBAoUA,EAAAzyF,UAAUmB,iBAAiB,4CAA6C+uF,I,6GC5WxE,aACA,OACA,OACA,OACA,OA6BA,IAAKwC,GAAL,SAAKA,GACH,oBACA,wBAFF,CAAKA,MAAU,KAKf,MAAaC,UAA8B,EAAAtpF,KAMzC,cACE3M,QANF,KAAAk2F,cAAgB,KAChB,KAAAC,OAAS,GAMP11F,KAAK+I,MAAQ,EAAA2C,UAAU,sBAAsB,uBAAuB3C,MACpE/I,KAAKkK,YAAc,EAAAwB,UAAU,sBAAsB,uBAAuBxB,YAC1ElK,KAAKmM,SAAqB,WAAI,EAAAlC,YAAY1L,OAAO,CAC/C2L,YAAa,mBACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAOq3F,EAAWI,QAASriF,KAAMiiF,EAAWI,SAC9C,CAAEz3F,MAAOq3F,EAAWK,UAAWtiF,KAAMiiF,EAAWK,aAGpD13F,MAAOq3F,EAAWI,UAEpB31F,KAAKkR,SAAS,WAAY,EAAAnH,KAAKmB,QAC/BlL,KAAK2tC,qBAAqB,SAAU,EAAA5jC,KAAKmB,OAAQ,GAAI,UACrDlL,KAAK2tC,qBAAqB,QAAS,EAAA5jC,KAAKmB,OAAQ,GAAI,wCACpDlL,KAAKuS,UAAU,OAAQ,EAAAxI,KAAKmB,QAC5BlL,KAAKuS,UAAU,KAAM,EAAAxI,KAAKmB,QAC1BlL,KAAKuS,UAAU,UAAW,EAAAxI,KAAKoB,QAC/BnL,KAAKuS,UAAU,OAAQ,EAAAxI,KAAKoB,QAC5BnL,KAAKuS,UAAU,gBAAiB,EAAAxI,KAAKqB,SACrCpL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKqB,SAChCpL,KAAKuS,UAAU,cAAe,EAAAxI,KAAKoB,QACnCnL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKoB,QAChCnL,KAAKuS,UAAU,MAAO,EAAAxI,KAAKoB,QAC3BnL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKoB,QAChCnL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKqB,SAChCpL,KAAKmM,SAAsB,YAAI,EAAAlC,YAAY1L,OAAO,CAChD2L,YAAa,0BACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,MAAOoV,KAAM,kBACtB,CAAEpV,MAAO,QAASoV,KAAM,WACxB,CAAEpV,MAAO,UAAWoV,KAAM,aAG9BpV,MAAO,UAET8B,KAAKmM,SAAsB,YAAI,EAAAlC,YAAY1L,OAAO,CAChD2L,YAAa,0BACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,MAAOoV,KAAM,kBACtB,CAAEpV,MAAO,QAASoV,KAAM,WACxB,CAAEpV,MAAO,UAAWoV,KAAM,aAG9BpV,MAAO,UAET8B,KAAKmM,SAAsB,YAAI,EAAAlC,YAAY1L,OAAO,CAChD2L,YAAa,0BACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,MAAOoV,KAAM,kBACtB,CAAEpV,MAAO,QAASoV,KAAM,WACxB,CAAEpV,MAAO,UAAWoV,KAAM,aAG9BpV,MAAO,UAET8B,KAAKmM,SAAS,gBAAkB,EAAAlC,YAAY1L,OAAO,CACjD2L,YAAa,8BACbhM,MAAO,IACPmE,KAAM,EAAA2H,YAAYmB,SAEpBnL,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,sCACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYmB,SAEpBnL,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,OACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,eAAgBoV,KAAM,gBAC/B,CAAEpV,MAAO,UAAWoV,KAAM,WAC1B,CAAEpV,MAAO,UAAWoV,KAAM,WAC1B,CAAEpV,MAAO,QAASoV,KAAM,WAG5BpV,MAAO,YAET8B,KAAKivC,kBAAkB,CACrBC,OAAQ,CAAC,CAAE7rB,KAAM,GAAIwyE,SAAU,CAAExmD,OAAQ,KACzCF,WAAY,CACV2mD,YAAa/qF,GACJA,EAAoB,WAAE7M,QAAUq3F,EAAWK,UAEpDG,YAAahrF,GACJA,EAAoB,WAAE7M,QAAUq3F,EAAWK,UAEpDI,YAAajrF,GACJA,EAAoB,WAAE7M,QAAUq3F,EAAWK,aAM1D,UACE51F,KAAKi2F,WAAaj2F,KAAKmM,SAAqB,WAAEjO,MAC1C8B,KAAKi2F,aAAeV,EAAWK,WASjC51F,KAAKwS,aAAa,IAEpBxS,KAAKw5E,eACL,IAAIkc,EAAS11F,KAAKmP,aAAa,GAAGqyB,eAAiB,GAC/Ck0D,GAAU11F,KAAK01F,SACjB11F,KAAK01F,OAASA,GAEhB11F,KAAKk6D,cAGP,iBACE,MAAM+7B,EAAaj2F,KAAKmM,SAAqB,WAAEjO,MAC/C,IAAIw3F,EAAS11F,KAAKmP,aAAa,GAAGqyB,eAAiB,GAC/Ck0D,GAAU11F,KAAK01F,SACjB11F,KAAK01F,OAASA,EACd11F,KAAKk6D,cACLl6D,KAAKwgC,0BACLxgC,KAAKw5E,eACLx5E,KAAKk2F,iBAEP,IAAIvuF,EAAe3H,KAAKmP,aAAa,IAAM,GACtCxH,IACIA,EAAKhC,OAAS,GAAM,GAAgC,OAA1BgC,EAAKA,EAAKhC,OAAS,IAAyC,OAA1BgC,EAAKA,EAAKhC,OAAS,GAE5B,SAAjDgC,EAAKk7C,UAAUl7C,EAAKhC,OAAS,EAAGgC,EAAKhC,UAC9CgC,EAAOA,EAAKk7C,UAAU,EAAGl7C,EAAKhC,OAAS,IAFvCgC,EAAOA,EAAKk7C,UAAU,EAAGl7C,EAAKhC,OAAS,GAMvB,KAAhBgC,EAAKhC,QACW,KAAhBgC,EAAKhC,QACoB,OAAzBgC,EAAKk7C,UAAU,EAAG,IACO,OAAzBl7C,EAAKk7C,UAAU,EAAG,IACO,OAAzBl7C,EAAKk7C,UAAU,EAAG,IACO,OAAzBl7C,EAAKk7C,UAAU,EAAG,IAKhB6yC,GAAU/tF,EAAKk7C,UAAU,EAAG,IAAgB,IAAV6yC,IAElCO,IAAeV,EAAWK,WACD,OAAzBjuF,EAAKk7C,UAAU,EAAG,IACD,KAAhBl7C,EAAKhC,QAAiC,KAAhBgC,EAAKhC,OAK5BswF,IAAeV,EAAWI,SACD,MAAzBhuF,EAAKk7C,UAAU,EAAG,IACD,KAAhBl7C,EAAKhC,QAAiC,KAAhBgC,EAAKhC,SAExB3F,KAAK4G,OAAO,GAAGC,SAAS7G,KAAKk2F,gBACjCl2F,KAAKm2F,aAAan2F,KAAKo2F,cAAczuF,MARjC3H,KAAK4G,OAAO,GAAGC,SAAS7G,KAAKk2F,gBACjCl2F,KAAKm2F,aAAan2F,KAAKq2F,gBAAgB1uF,OAY7C,wBACE,IAAI2uF,EAAet2F,KAAKmM,SAAmB,SAAEjO,MAC7Co4F,EAAe,UAAUv1E,YAAYu1E,EAAct2F,KAAKmM,SAAe,KAAEjO,OACrE8B,KAAKy1F,eAAiBa,GACxBt2F,KAAKk2F,gBAEPl2F,KAAKwvE,aACLxvE,KAAK+R,mBACL/R,KAAKq1B,iBAGC,aAAanuB,GACnB,OAAQlH,KAAKmM,SAAqB,WAAEjO,OAClC,KAAKq3F,EAAWI,QACd31F,KAAKoP,cAAc,EAAG/D,KAAK6B,UAAUhG,IACrClH,KAAKoP,cAAc,EAAmB,MAAhBlI,EAAW,GAAY,KAAOA,EAAW,IAC/DlH,KAAKoP,cAAc,EAAwB,MAArBlI,EAAgB,QAAY,KAAOA,EAAgB,SACzElH,KAAKoP,cAAc,EAAqB,MAAlBlI,EAAa,KAAY,KAAOA,EAAa,MACnElH,KAAKoP,cAAc,EAAGlI,EAAgB,QAAIlH,KAAKmM,SAAS,gBAAgBjO,OACxE8B,KAAKoP,cAAc,EAAqB,MAAlBlI,EAAa,KAAY,KAAOA,EAAa,MACnElH,KAAKoP,cAAc,EAAyB,MAAtBlI,EAAiB,SAAY,KAAOA,EAAiB,UAC3ElH,KAAKoP,cAAc,EAAoB,MAAjBlI,EAAY,IAAY,KAAOA,EAAY,KACjElH,KAAKoP,cAAc,EAAyB,MAAtBlI,EAAiB,SAAY,KAAOA,EAAiB,UAC3ElH,KAAKoP,cAAc,GAA0B,MAAtBlI,EAAiB,SAAY,KAAOA,EAAiB,UAC5E,MAEF,KAAKquF,EAAWK,UACd51F,KAAKoP,cAAc,EAAG/D,KAAK6B,UAAUhG,IACrClH,KAAKoP,cAAc,EAAmB,MAAhBlI,EAAW,GAAY,KAAOA,EAAW,IAC/DlH,KAAKoP,cAAc,EAAwB,MAArBlI,EAAgB,QAAY,KAAOA,EAAgB,SACzElH,KAAKoP,cAAc,EAAqB,MAAlBlI,EAAa,KAAY,KAAOA,EAAa,MACnElH,KAAKoP,cAAc,EAAGlI,EAAgB,QAAIlH,KAAKmM,SAAS,gBAAgBjO,OACxE8B,KAAKoP,cAAc,EAAuB,MAApBlI,EAAe,OAAY,KAAOA,EAAe,QACvE,MAAMqvF,EAAmBv2F,KAAKw2F,iBAAiB,CAACtvF,EAAW,GAAGA,EAAW,GAAGA,EAAW,KACvFlH,KAAKoP,cAAc,EAA0B,MAAvBmnF,EAAiB,GAAa,KAAOA,EAAiB,IAC5Ev2F,KAAKoP,cAAc,EAA0B,MAAvBmnF,EAAiB,GAAa,KAAOA,EAAiB,IAC5Ev2F,KAAKoP,cAAc,EAA0B,MAAvBmnF,EAAiB,GAAa,KAAOA,EAAiB,KAK1E,iBAAiBE,GACvB,IAAIvvF,EAAS,GACb,IAAK,IAAIjK,EAAI,EAAGA,EAAI,EAAGA,IACrB,GAA8B,iBAAnBw5F,EAAax5F,GACtB,OAAQ+C,KAAKmM,SAAS,aAAalP,EAAI,KAAKiB,OAC1C,IAAK,MACH,MAAMw4F,EAAO,KACPC,EAAKF,EAAax5F,GAAK,KAAQy5F,EAC/BE,EAAK,IACLC,EAAKD,EAAKD,GAAMD,EAAOC,GAIvBxjB,EADI,GAAK,EAFJ,IAEc,EADf,KACwBzgE,KAAKgR,IAAImzE,EAAID,IAC9B,OACjB1vF,EAAO/B,KAAKuN,KAAKjI,MAAa,IAAP0oE,GAAc,KACrC,MAEF,IAAK,QACHjsE,EAAO/B,KAAMsxF,EAAax5F,GAAK,KAAQ,IACvC,MAEF,IAAK,eACqB4S,IAApB4mF,EAAax5F,IAAoBw5F,EAAax5F,IAAM,IACtDiK,EAAO/B,MAAK,GAEZ+B,EAAO/B,MAAK,QAIb+B,EAAO/B,KAAK,MAErB,OAAO+B,EAGT,uBACE,OAAQ,IAAIZ,KAGd,gBAAgBqB,GACd,MAAM8yD,EAAQz6D,KAAKmP,aAAa,GAC1B2nF,EAAgB,CACpB/2F,GAAK06D,EAAM,MACXs8B,OAAQt8B,EAAM,UACdu8B,QAASv8B,EAAM,WACfw8B,GAAIx8B,EAAM,MACVy8B,GAAIz8B,EAAM,MACV08B,GAAI18B,EAAM,MACV28B,KAAM38B,EAAM,QACZ48B,IAAK58B,EAAM,QAEb,IAAI68B,EAAc,KAElB,OADAA,EAAct3F,KAAKu3F,uBACZ,CACLx3F,GAAI4H,EAAKk7C,UAAU,EAAG,GACtBk0C,OAAQj6E,SAASnV,EAAKk7C,UAAU,EAAG,IAAK,IACxCm0C,QAASl6E,SAASnV,EAAKk7C,UAAU,GAAI,IAAK,IAAM,GAChDo0C,GAAIn6E,SAASnV,EAAKk7C,UAAU,GAAI,IAAK,IACrCq0C,GAAIp6E,SAASnV,EAAKk7C,UAAU,GAAI,IAAK,IACrCs0C,GAAIr6E,SAASnV,EAAKk7C,UAAU,GAAI,IAAK,IACrCu0C,MAAwE,EAAlEt6E,SAASnV,EAAKk7C,UAAUl7C,EAAKhC,OAAS,EAAGgC,EAAKhC,OAAS,GAAI,IACjE0xF,IAAKv6E,SAASnV,EAAKk7C,UAAUl7C,EAAKhC,OAAS,EAAGgC,EAAKhC,QAAS,IAAM,GAClE8jE,SAAUzpE,KAAKxC,KACfi9D,MAAOq8B,EACPQ,YAAaA,GAIjB,cAAc3vF,GACZ,MAAM8yD,EAAQz6D,KAAKmP,aAAa,GAC1B2nF,EAAgB,CACpB/2F,GAAK06D,EAAM,MACX0Y,KAAM1Y,EAAM,QACZ0f,SAAU1f,EAAM,YAChB+8B,SAAU/8B,EAAM,YAChBg9B,IAAKh9B,EAAM,OACXi9B,SAAUj9B,EAAM,YAChBu8B,QAASv8B,EAAM,WACf28B,KAAM38B,EAAM,QACZ48B,IAAK58B,EAAM,QAEb,IAAI68B,EAAc,KAClBA,EAAct3F,KAAKu3F,uBAEnB,IAAIrwF,EAAmB,CACrBnH,GAAI4H,EAAKk7C,UAAU,EAAG,GACtBswB,KAAMr2D,SAASnV,EAAKk7C,UAAU,GAAI,IAAMl7C,EAAKk7C,UAAU,EAAG,IAAK,IAAM,IACrEs3B,SAAUr9D,SAASnV,EAAKk7C,UAAU,GAAI,IAAMl7C,EAAKk7C,UAAU,GAAI,IAAK,IAAM,GAC1E20C,SAAU16E,SAASnV,EAAKk7C,UAAU,GAAI,IAAK,IAAM,IACjDm0C,QAASl6E,SAASnV,EAAKk7C,UAAU,GAAI,IAAK,IAAM,GAChDu0C,MAAwE,EAAlEt6E,SAASnV,EAAKk7C,UAAUl7C,EAAKhC,OAAS,EAAGgC,EAAKhC,OAAS,GAAI,IACjE0xF,IAAKv6E,SAASnV,EAAKk7C,UAAUl7C,EAAKhC,OAAS,EAAGgC,EAAKhC,QAAS,IAAM,GAClE8jE,SAAUzpE,KAAKxC,KACfi9D,MAAOq8B,EACPQ,YAAaA,GAEf,GAA6B,OAAzB3vF,EAAKk7C,UAAU,EAAG,IAAwC,OAAzBl7C,EAAKk7C,UAAU,EAAG,GAAa,CAClE,MAAM80C,EAAqBzwF,EAG3B,GAFAywF,EAASF,IAAM36E,SAASnV,EAAKk7C,UAAU,GAAI,IAAMl7C,EAAKk7C,UAAU,GAAI,IAAK,IACzE37C,EAASywF,EACmB,MAAxBhwF,EAAKk7C,UAAU,EAAG,GAAY,CAChC,MAAM+0C,EAAsBD,EAC5BC,EAAUF,SAAW56E,SAASnV,EAAKk7C,UAAU,GAAI,IAAK,IAAM,IAC5D37C,EAAS0wF,GAGb,OAAO1wF,EAGT,gBACElH,KAAKoP,cAAc,GAAG,GAAO,GAC7BrK,cAAc/E,KAAK0uC,aACnB,IAAI4nD,EAAet2F,KAAKmM,SAAmB,SAAEjO,MAC7Co4F,EAAe,UAAUv1E,YAAYu1E,EAAct2F,KAAKmM,SAAe,KAAEjO,OACzE8B,KAAKy1F,cAAgBa,EACrBt2F,KAAK0uC,YAAcrxB,WAAW,KAC5Brd,KAAKoP,cAAc,GAAG,GAAM,IAC3BknF,GAGL,aACE,MAAMuB,EAAoB73F,KAAKmM,SAAqB,WAAEjO,MACtD,GAAI8B,KAAKi2F,YAAc4B,EACrB,OAAQA,GACN,KAAKtC,EAAWI,QACd31F,KAAKwS,aAAa,GAClBxS,KAAKwS,aAAa,GAClBxS,KAAKwS,aAAa,GAClBxS,KAAKwS,aAAa,GACdxS,KAAKiH,QAAQ,KAAKjH,KAAKwS,aAAa,IACxCxS,KAAKuS,UAAU,cAAe,EAAAxI,KAAKoB,QACnCnL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKoB,QAChCnL,KAAKuS,UAAU,MAAO,EAAAxI,KAAKoB,QAC3BnL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKoB,QAChCnL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKqB,SAChCpL,KAAKw5E,eACL,MAEF,KAAK+b,EAAWK,UACd51F,KAAKwS,aAAa,GAClBxS,KAAKwS,aAAa,GAClBxS,KAAKwS,aAAa,GAClBxS,KAAKwS,aAAa,GAClBxS,KAAKwS,aAAa,IACdxS,KAAKiH,QAAQ,KAAKjH,KAAKwS,aAAa,IACxCxS,KAAKuS,UAAU,SAAU,EAAAxI,KAAKoB,QAC9BnL,KAAKuS,UAAU,KAAM,EAAAxI,KAAKoB,QAC1BnL,KAAKuS,UAAU,KAAM,EAAAxI,KAAKoB,QAC1BnL,KAAKuS,UAAU,KAAM,EAAAxI,KAAKoB,QAC1BnL,KAAKw5E,eAIPqe,GAAqBtC,EAAWK,YAClC51F,KAAKiH,QAAQ,GAAGzJ,KAAO,OAAOwC,KAAKmM,SAAsB,YAAEjO,SAC3D8B,KAAKiH,QAAQ,GAAGzJ,KAAO,OAAOwC,KAAKmM,SAAsB,YAAEjO,SAC3D8B,KAAKiH,QAAQ,GAAGzJ,KAAO,OAAOwC,KAAKmM,SAAsB,YAAEjO,UAE7D8B,KAAKi2F,WAAa4B,EAClB73F,KAAKk6D,cAGP,cACMl6D,KAAK01F,OAAQ11F,KAAK+I,MAAQ,wBAAwB/I,KAAKi2F,gBAAgBj2F,KAAK01F,UAC3E11F,KAAK+I,MAAQ,wBAAwB/I,KAAKi2F,oBAGjD,eACEj2F,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MAClBpP,KAAKmM,SAAqB,WAAEjO,QAAUq3F,EAAWI,SAAS31F,KAAKoP,cAAc,GAAI,OA7YzF,0BAgZA,EAAAvM,UAAUmB,iBAAiB,yCAA0CwxF,I,2GCtbrE,aACA,OACA,OACA,OACA,QAEA,MAAasC,UAA4B,EAAA5rF,KAIvC,cACE3M,QAJF,KAAAmjD,kBAAiD,GACjD,KAAAq1C,cAAgC,GAI9B/3F,KAAK+I,MAAQ,EAAA2C,UAAU,sBAAsB,wBAAwB3C,MACrE/I,KAAKkK,YAAc,EAAAwB,UAAU,sBAAsB,wBAAwBxB,YAC3ElK,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAC3C2L,YAAa,SACb7H,KAAM,EAAA2H,YAAYoB,QAClBlN,OAAO,IAET8B,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,YACb7H,KAAM,EAAA2H,YAAYmB,OAClBjN,MAAO,IAET8B,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,cACb7H,KAAM,EAAA2H,YAAYmB,OAClBjN,MAAO,IAOT8B,KAAKmM,SAAgB,MAAI,EAAAlC,YAAY1L,OAAO,CAC1C2L,YAAa,QACb7H,KAAM,EAAA2H,YAAY82B,SAClB5iC,MAAO,8BAGT8B,KAAKmM,SAAqB,WAAI,EAAAlC,YAAY1L,OAAO,CAC/C2L,YAAa,4BACb7H,KAAM,EAAA2H,YAAYkB,OAClBhN,MAAO,KAET8B,KAAKkR,SAAS,UAAW,EAAAnH,KAAKqB,SAC9BpL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKmB,QAC7BlL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKuB,KAGhC,OACEtL,KAAK2iD,gBAGP,UACE3iD,KAAK0iD,kBAAoB1iD,KAAK4iD,kBAAkB5iD,KAAKmM,SAAqB,WAAEjO,OAC5E8B,KAAK+3F,cAAgB,IAAIn+E,MAAe5Z,KAAK0iD,kBAAkB/8C,QAC/D3F,KAAK+3F,cAAc90C,MAAK,GAG1B,iBACE,IAAK,IAAIhmD,EAAI,EAAGA,EAAI+C,KAAKqR,iBAAkBpU,IACrC+C,KAAK4G,OAAO3J,GAAG4J,UACjB7G,KAAK+3F,cAAc96F,EAAI,IAAK,GAGhC,IAAsC,IAAlC+C,KAAKmM,SAAiB,OAAEjO,MAAiB,OAC7C,IAAK8B,KAAK4G,OAAO,GAAGC,UAAoC,IAAzB7G,KAAKmP,aAAa,GAC/C,OAIF,MAAM4zC,EAAa9zB,IACjBjvB,KAAKoP,cAAc,EAAG,gBAAkB6f,IAGpC+oE,EAAoB,CAAC95F,EAAOmE,KAChC,IAAI41F,GAAO,EACX,OAAQ51F,GACN,KAAK,EAAAkgD,qBAAqBa,KACxB60C,EAAO/5F,IAAU,KAAOA,GAAS,IACjC,MAEF,KAAK,EAAAqkD,qBAAqBe,MACxB20C,EAAO/5F,GAAS,GAAKA,GAAS,IAC9B,MAEF,KAAK,EAAAqkD,qBAAqBlF,MACxB46C,EAAO/5F,IAAU,OAASA,GAAS,MACnC,MAEF,KAAK,EAAAqkD,qBAAqBjF,OACxB26C,EAAO/5F,GAAS,GAAKA,GAAS,MAC9B,MAEF,KAAK,EAAAqkD,qBAAqBhF,MACxB06C,EAAO/5F,IAAU,YAAcA,GAAS,WACxC,MAEF,KAAK,EAAAqkD,qBAAqB/E,OACxBy6C,EAAO/5F,GAAS,GAAKA,GAAS,WAGlC,OAAO+5F,GAMTj4F,KAAK+3F,cAAc90C,MAAK,GACxB,IAAIi1C,EAAe,EACnB,IAAK,IAAIj7F,EAAI,EAAGA,EAAI+C,KAAK0iD,kBAAkB/8C,OAAQ1I,IAC7C+C,KAAK+3F,cAAc96F,KACrBi7F,GAAgB,EAAA11C,uBAAuBxiD,KAAK0iD,kBAAkBzlD,IAAM,GAGxE,GAAqB,IAAjBi7F,EAEF,YADAn1C,EAAW,oBAGb,IAAI5E,EAASrkC,OAAOmlC,MAAMi5C,EAAe,GAEzC/5C,EAAOg6C,WAAWn4F,KAAKmM,SAAmB,SAAEjO,MAAO,GACnDigD,EAAOg6C,WAAWn4F,KAAKmM,SAAe,KAAEjO,MAAO,GAE/C,IAAIynC,EAAQ,EACZ,IAAK,IAAI1oC,EAAI,EAAGA,EAAIkhD,EAAOx4C,QAAU,CACnC,IAAK3F,KAAK+3F,cAAcpyD,GAAQ,CAC9BA,IACA,SAEF,IAAItjC,EAAOrC,KAAK0iD,kBAAkB/c,GAC9BznC,EAAQ8B,KAAKmP,aAAaw2B,EAAQ,GAEtC,IAAKqyD,EAAkB95F,EAAOmE,GAE5B,YADA0gD,EAAW,uBAAyBpd,GAMtC,OAFAwY,EAAOg6C,WAAWxyD,EAAO1oC,KAEjBoF,GACN,KAAK,EAAAkgD,qBAAqBa,KACxBjF,EAAOi6C,UAAUl6F,EAAOjB,GACxB,MAEF,KAAK,EAAAslD,qBAAqBe,MACxBnF,EAAOg6C,WAAWj6F,EAAOjB,GACzB,MAEF,KAAK,EAAAslD,qBAAqBlF,MACxBc,EAAOe,aAAahhD,EAAOjB,GAC3B,MAEF,KAAK,EAAAslD,qBAAqBjF,OACxBa,EAAOgB,cAAcjhD,EAAOjB,GAC5B,MAEF,KAAK,EAAAslD,qBAAqBhF,MACxBY,EAAOiB,aAAalhD,EAAOjB,GAC3B,MAEF,KAAK,EAAAslD,qBAAqB/E,OACxBW,EAAOkB,cAAcnhD,EAAOjB,GAC5B,MAEF,KAAK,EAAAslD,qBAAqBgB,MACxBpF,EAAOmB,aAAaphD,EAAOjB,GAI/BA,GAAK,EAAAulD,uBAAuBngD,GAC5BsjC,IAGF3lC,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG+uC,GAEtBn+C,KAAK+3F,cAAc90C,MAAK,GAG1B,wBACEjjD,KAAK0iD,kBAAoB1iD,KAAK2iD,gBAC9B3iD,KAAKoP,cAAc,EAAG,MACtBpP,KAAKq1B,iBAGC,gBACN,MAAM1tB,EAAO3H,KAAK4iD,kBAAkB5iD,KAAKmM,SAAqB,WAAEjO,OAChE,GAAI8B,KAAK0iD,kBAAkB/8C,SAAWgC,EAAKhC,OAAQ,CACjD,MAAMyL,EAAcpR,KAAKqR,iBACzB,IAAK,IAAIpU,EAAI,EAAGA,EAAImU,EAAanU,IAC/B+C,KAAKqS,YAAYpV,GAGnB+C,KAAK+3F,cAAgB,IAAIn+E,MAAejS,EAAKhC,QAC7C,IAAK,IAAI1I,EAAI,EAAGA,EAAI0K,EAAKhC,OAAQ1I,IAC/B+C,KAAKkR,SAASjU,EAAEia,WAAY,EAAAnN,KAAKoB,QACjCnL,KAAK+3F,cAAc96F,IAAK,EAG5B,OAAO0K,EAGT,kBAAkBuW,GAChB,MAAMvW,EAAOuW,EACVsjB,cACAvjB,QAAQ,KAAM,IACdhB,MAAM,KACNtP,OAAO8C,GAAW,KAANA,GAEf,GAAI9I,GAAQA,EAAKhC,OACf,IAAK,IAAI1I,EAAI,EAAGA,EAAI0K,EAAKhC,OAAQ1I,IAAK,CACpC,QAAsC4S,IAAlC,EAAA0yC,qBAAqB56C,EAAK1K,IAE5B,YADA+C,KAAKoP,cAAc,EAAG,wBAGxBzH,EAAK1K,GAAK,EAAAslD,qBAAqB56C,EAAK1K,IAGxC,OAAO0K,GAtNX,wBAyNA,EAAA9E,UAAUmB,iBAAiB,0CAA2C8zF,I,gIC/NtE,aACA,OACA,OACA,OACA,SAEA,IAAKv1C,GAAL,SAAKA,GACH,mBACA,qBACA,qBACA,uBACA,qBACA,uBACA,qBAPF,CAAKA,MAAoB,KAUzB,MAAMC,EAAyB,CAC7B,EACA,EACA,EACA,EACA,EACA,EACA,GAGF,MAAa61C,UAA2B,EAAAnsF,KAQtC,cACE3M,QARF,KAAAmjD,kBAAiD,GACjD,KAAA41C,cAAwB,SACxB,KAAAnoC,QAAkB,GAClB,KAAAooC,UAAoB,KACpB,KAAAC,MAAQ,EACR,KAAAC,aAAe,EAIbz4F,KAAK+I,MAAQ,yBACb/I,KAAKkK,YAAc,sDACnBlK,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAC3C2L,YAAa,SACb7H,KAAM,EAAA2H,YAAYoB,QAClBlN,OAAO,IAET8B,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,oBACb7H,KAAM,EAAA2H,YAAYmB,OAClBjN,MAAO,IAET8B,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,sBACb7H,KAAM,EAAA2H,YAAYmB,OAClBjN,MAAO,IAET8B,KAAKmM,SAAgB,MAAI,EAAAlC,YAAY1L,OAAO,CAC1C2L,YAAa,wBACb7H,KAAM,EAAA2H,YAAY82B,SAElB5iC,MAAO,uBAET8B,KAAKmM,SAAqB,WAAI,EAAAlC,YAAY1L,OAAO,CAC/C2L,YAAa,qCACb7H,KAAM,EAAA2H,YAAYkB,OAClBhN,MAAO,KAET8B,KAAKmM,SAAc,IAAI,EAAAlC,YAAY1L,OAAO,CACxC2L,YAAa,uBACb7H,KAAM,EAAA2H,YAAYkB,OAClBhN,MAAO,KAET8B,KAAKmM,SAAsB,YAAI,EAAAlC,YAAY1L,OAAO,CAChD2L,YAAa,WACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYyjC,QAEpBztC,KAAKmM,SAAqB,WAAI,EAAAlC,YAAY1L,OAAO,CAC/C2L,YAAa,qBACb7H,KAAM,EAAA2H,YAAYkB,OAClBhN,MAAO,WAET8B,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,eACb7H,KAAM,EAAA2H,YAAYmB,OAClBjN,MAAO,IAET8B,KAAKmM,SAA8B,oBAAI,EAAAlC,YAAY1L,OAAO,CACxD2L,YAAa,2BACb7H,KAAM,EAAA2H,YAAYoB,QAClBlN,OAAO,IAGT8B,KAAKkR,SAAS,WAAY,EAAAnH,KAAKmB,QAC/BlL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKmB,QAC7BlL,KAAKuS,UAAU,OAAQ,EAAAxI,KAAKoB,QAC5BnL,KAAKuS,UAAU,MAAO,EAAAxI,KAAKoB,QAG7B,OACEnL,KAAK04F,iBACL14F,KAAK2iD,cAAc3iD,KAAK0iD,mBAG1B,UACE1iD,KAAK04F,iBAGP,iBACE,GAAuB,OAAnB14F,KAAKu4F,UACP,OAEF,IAAI5wF,EAAe3H,KAAKmP,aAAa,IAAM,GAC3C,IAAsC,IAAlCnP,KAAKmM,SAAiB,OAAEjO,MAAiB,OAC7C,IAAKyJ,GAAQA,EAAKhC,OAAS,IAAYgC,EAAKk7C,UAAU,EAAG,GAAGrhB,gBAAkBxhC,KAAKmwD,QACjF,OAImD,SAAjDxoD,EAAKk7C,UAAUl7C,EAAKhC,OAAS,EAAGgC,EAAKhC,QACvCgC,EAAOA,EAAKk7C,UAAU,EAAGl7C,EAAKhC,OAAS,GAC9BgC,EAAKhC,OAAS,GAAM,GAAgC,OAA1BgC,EAAKA,EAAKhC,OAAS,IAAyC,OAA1BgC,EAAKA,EAAKhC,OAAS,KACxFgC,EAAOA,EAAKk7C,UAAU,EAAGl7C,EAAKhC,OAAS,IAKzC,IAAIgzF,EAAkB7+E,OAAO+E,KAAKlX,EAAM,QACnCixF,EAAYjoF,GAAOkoF,EAAaC,qBAAqBH,EAAgBz7E,MAAM,EAAG,GAAIy7E,EAAgBz7E,MAAM,EAAGy7E,EAAgBhzF,OAAS,GAAI3F,KAAKu4F,WAClJ,GAAI5nF,IAAQkoF,EAAaE,eAAeC,YAEtC,YADAh5F,KAAKoP,cAAc,EAAG,sBAAwBuB,GAGhD,IAAIymF,EAAOuB,EAAgBt1C,SAASs1C,EAAgBhzF,OAAS,GACzD0xF,EAAMsB,EAAgBz1C,UAAUy1C,EAAgBhzF,OAAS,GAGzDszF,EAAWj5F,KAAKmM,SAAmB,SAAEjO,MAEzC,GADa06F,EAAWK,KACXj5F,KAAKmM,SAAe,KAAEjO,MACjC,OAKF,MAAM6kD,EAAa9zB,IACjBjvB,KAAKoP,cAAc,EAAG,gBAAkB6f,IAI1C,IAAIkvB,EAASy6C,EAAW17E,MAAM+7E,EAAW,GACrCC,EAAe,IAAIt/E,MAAc5Z,KAAK0iD,kBAAkB/8C,QACxDq9C,EAAc,IAAIppC,MAAe5Z,KAAK0iD,kBAAkB/8C,QAC5Dq9C,EAAYC,MAAK,GAEjB,IAAIhmD,EAAI,EACR,IAAK,IAAIk8F,EAAa,EAAGA,EAAan5F,KAAK0iD,kBAAkB/8C,OAAQwzF,IAAc,CACjF,IAAIxzD,EAAQwY,EAAO+E,UAAUjmD,KACzBkmD,EAAc,EAElB,GAAIxd,GAAS3lC,KAAK0iD,kBAAkB/8C,OAElC,YADAo9C,EAAW,iBAAmBpd,GAGhC,GAAIqd,EAAYrd,GAEd,YADAod,EAAW,sCAAwCpd,GAMrD,GAFAwd,EAAcX,EAAuBxiD,KAAK0iD,kBAAkB/c,IAExDwY,EAAOx4C,OAAS1I,EAAIkmD,EAEtB,YADAJ,EAAW,kBAIb,OAAQ/iD,KAAK0iD,kBAAkB/c,IAC7B,KAAK4c,EAAqBa,KACxB81C,EAAavzD,GAASwY,EAAOkF,SAASpmD,GACtC,MAEF,KAAKslD,EAAqBe,MACxB41C,EAAavzD,GAASwY,EAAO+E,UAAUjmD,GACvC,MAEF,KAAKslD,EAAqBlF,MACxB67C,EAAavzD,GAASwY,EAAOO,YAAYzhD,GACzC,MAEF,KAAKslD,EAAqBjF,OACxB47C,EAAavzD,GAASwY,EAAOQ,aAAa1hD,GAC1C,MAEF,KAAKslD,EAAqBhF,MACxB27C,EAAavzD,GAASwY,EAAOS,YAAY3hD,GACzC,MAEF,KAAKslD,EAAqB/E,OACxB07C,EAAavzD,GAASwY,EAAOU,aAAa5hD,GAC1C,MAEF,KAAKslD,EAAqBgB,MACxB21C,EAAavzD,GAASwY,EAAOW,YAAY7hD,GAG7C+lD,EAAYrd,IAAS,EACrB1oC,GAAKkmD,EAGP,IAAK,IAAIlmD,EAAI,EAAGA,EAAIi8F,EAAavzF,OAAQ1I,IACvC+C,KAAKoP,cAAcnS,EAAI+C,KAAKy4F,aAAcS,EAAaj8F,IAEzD+C,KAAKoP,cAAc,EAAGgoF,GACtBp3F,KAAKoP,cAAc,EAAGioF,GACtBr3F,KAAKoP,cAAc,EAAG,MAGxB,wBACOpP,KAAK04F,mBAGV14F,KAAK2iD,cAAc3iD,KAAK0iD,mBACxB1iD,KAAKq1B,kBAGC,iBACNr1B,KAAKmM,SAAmB,SAAEjO,MAAQ,UAAM0d,MAAM5b,KAAKmM,SAAmB,SAAEjO,MAAO,EAAG,KAClF8B,KAAKmM,SAAe,KAAEjO,MAAQ,UAAM0d,MAAM5b,KAAKmM,SAAe,KAAEjO,MAAO,EAAG,KAC1E8B,KAAKmM,SAAmB,SAAEjO,MAAQ,UAAM0d,MAAM5b,KAAKmM,SAAmB,SAAEjO,MAAO,EAAG,GAClF8B,KAAK0iD,kBAAoB1iD,KAAK4iD,kBAAkB5iD,KAAKmM,SAAqB,WAAEjO,OAC5E,IAAIk7F,EAAap5F,KAAKmM,SAAqB,WAAEjO,MAI7C,OAHA8B,KAAKs4F,cAAgBc,GAAoC,IAAtBA,EAAWzzF,OAAeyzF,EAAa,SAC1Ep5F,KAAKmwD,QAAUnwD,KAAKs4F,eAAiB,IAAMt4F,KAAKmM,SAAmB,SAAEjO,MAAMgZ,SAAS,KAAKI,QAAQ,GACjGtX,KAAKmwD,QAAUnwD,KAAKmwD,QAAQ3uB,cACc,KAAtCxhC,KAAKmM,SAAc,IAAEjO,MAAMyH,QAC7B3F,KAAKoP,cAAc,EAAG,eACtBpP,KAAKu4F,UAAY,MACV,IAETv4F,KAAKu4F,UAAYz+E,OAAO+E,KAAK7e,KAAKmM,SAAc,IAAEjO,MAAO,OACzD8B,KAAKoP,cAAc,EAAG,OACf,GAGD,cAAczH,GACpB,GAAI3H,KAAKsS,kBAAoBtS,KAAKy4F,eAAiB9wF,EAAKhC,OAAQ,CAC9D,MAAM69C,EAAexjD,KAAKsS,kBAC1B,IAAK,IAAIrV,EAAI+C,KAAKy4F,aAAcx7F,EAAIumD,EAAcvmD,IAChD+C,KAAKwS,aAAavV,GAEpB,IAAK,IAAIA,EAAI,EAAGA,EAAI0K,EAAKhC,OAAQ1I,IAC/B+C,KAAKuS,UAAUtV,EAAEia,WAAY,EAAAnN,KAAKoB,QAEpCnL,KAAK+R,oBAID,kBAAkBmM,GACxB,MAAMvW,EAAOuW,EACVsjB,cACAvjB,QAAQ,KAAM,IACdhB,MAAM,KACNtP,OAAO8C,GAAW,KAANA,GAEf,GAAI9I,GAAQA,EAAKhC,OACf,IAAK,IAAI1I,EAAI,EAAGA,EAAI0K,EAAKhC,OAAQ1I,IAAK,CACpC,QAAsC4S,IAAlC0yC,EAAqB56C,EAAK1K,IAE5B,YADA+C,KAAKoP,cAAc,EAAG,wBAGxBzH,EAAK1K,GAAKslD,EAAqB56C,EAAK1K,IAGxC,OAAO0K,GApPX,uBAuPA,EAAA9E,UAAUmB,iBAAiB,2CAA4Cq0F,GAQvE,MAAagB,UAA4B,EAAAntF,KAUvC,cACE3M,QAVF,KAAAmjD,kBAAiD,GACjD,KAAA41C,cAAwB,SACxB,KAAAnoC,QAAkB,KAClB,KAAAooC,UAAoB,KACpB,KAAAC,MAAQ,EAGR,KAAAc,iBAA2B,EAIzBt5F,KAAK+I,MAAQ,0BACb/I,KAAKkK,YAAc,0DACnBlK,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAC3C2L,YAAa,SACb7H,KAAM,EAAA2H,YAAYoB,QAClBlN,OAAO,IAOT8B,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAC3C2L,YAAa,SACb7H,KAAM,EAAA2H,YAAYoB,QAClBlN,OAAO,IAET8B,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,oBACb7H,KAAM,EAAA2H,YAAYmB,OAClBjN,MAAO,IAET8B,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,sBACb7H,KAAM,EAAA2H,YAAYmB,OAClBjN,MAAO,IAET8B,KAAKmM,SAAgB,MAAI,EAAAlC,YAAY1L,OAAO,CAC1C2L,YAAa,4BACb7H,KAAM,EAAA2H,YAAY82B,SAElB5iC,MAAO,uBAET8B,KAAKmM,SAAqB,WAAI,EAAAlC,YAAY1L,OAAO,CAC/C2L,YAAa,qCACb7H,KAAM,EAAA2H,YAAYkB,OAClBhN,MAAO,KAET8B,KAAKmM,SAAc,IAAI,EAAAlC,YAAY1L,OAAO,CACxC2L,YAAa,uBACb7H,KAAM,EAAA2H,YAAYkB,OAClBhN,MAAO,KAET8B,KAAKmM,SAAsB,YAAI,EAAAlC,YAAY1L,OAAO,CAChD2L,YAAa,WACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYyjC,QAEpBztC,KAAKmM,SAAqB,WAAI,EAAAlC,YAAY1L,OAAO,CAC/C2L,YAAa,qBACb7H,KAAM,EAAA2H,YAAYkB,OAClBhN,MAAO,WAET8B,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,eACb7H,KAAM,EAAA2H,YAAYmB,OAClBjN,MAAO,IAET8B,KAAKmM,SAA8B,oBAAI,EAAAlC,YAAY1L,OAAO,CACxD2L,YAAa,2BACb7H,KAAM,EAAA2H,YAAYoB,QAClBlN,OAAO,IAGT8B,KAAKkR,SAAS,UAAW,EAAAnH,KAAKqB,SAC9BpL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKuB,KAC9BtL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKmB,QAG/B,OACElL,KAAK04F,iBACL14F,KAAK27E,aAAa37E,KAAK0iD,mBAGzB,UACE1iD,KAAK04F,iBAKP,iBAME,IAAsC,IAAlC14F,KAAKmM,SAAiB,OAAEjO,MAAiB,OAC7C,IAAK8B,KAAK4G,OAAO,GAAGC,UAAoC,IAAzB7G,KAAKmP,aAAa,GAC/C,OAIF,MAAM4zC,EAAa9zB,IACjBjvB,KAAKoP,cAAcpP,KAAKs5F,iBAAkB,gBAAkBrqE,IAGxD+oE,EAAoB,CAAC95F,EAAOmE,KAChC,IAAI41F,GAAO,EACX,OAAQ51F,GACN,KAAKkgD,EAAqBa,KACxB60C,EAAO/5F,IAAU,KAAOA,GAAS,IACjC,MAEF,KAAKqkD,EAAqBe,MACxB20C,EAAO/5F,GAAS,GAAKA,GAAS,IAC9B,MAEF,KAAKqkD,EAAqBlF,MACxB46C,EAAO/5F,IAAU,OAASA,GAAS,MACnC,MAEF,KAAKqkD,EAAqBjF,OACxB26C,EAAO/5F,GAAS,GAAKA,GAAS,MAC9B,MAEF,KAAKqkD,EAAqBhF,MACxB06C,EAAO/5F,IAAU,YAAcA,GAAS,WACxC,MAEF,KAAKqkD,EAAqB/E,OACxBy6C,EAAO/5F,GAAS,GAAKA,GAAS,WAGlC,OAAO+5F,GAOT,IAAIC,EAAe,EACnB,IAAK,IAAIj7F,EAAI,EAAGA,EAAI+C,KAAK0iD,kBAAkB/8C,OAAQ1I,IAEjDi7F,GAAgB11C,EAAuBxiD,KAAK0iD,kBAAkBzlD,IAAM,EAGtE,GAAqB,IAAjBi7F,EAEF,YADAn1C,EAAW,oBAIb,IAAI5E,EAASrkC,OAAOmlC,MAAMi5C,EAAel4F,KAAKmM,SAAmB,SAAEjO,MAAQ,GAE3E,MAAMq7F,EAAWv5F,KAAKmM,SAAmB,SAAEjO,MAC1B,IAAbq7F,GACFp7C,EAAOg6C,WAAWn4F,KAAKw4F,MAAO,GAC9Bx4F,KAAKw4F,MAASx4F,KAAKw4F,MAAQ,EAAK,KAEZ,IAAbe,GACPp7C,EAAOgB,cAAcn/C,KAAKw4F,MAAO,GACjCx4F,KAAKw4F,MAASx4F,KAAKw4F,MAAQ,EAAK,OAEZ,IAAbe,IACPp7C,EAAOkB,cAAcr/C,KAAKw4F,MAAO,GACjCx4F,KAAKw4F,MAASx4F,KAAKw4F,MAAQ,EAAK,YAElCr6C,EAAOg6C,WAAWn4F,KAAKmM,SAAe,KAAEjO,MAAOq7F,GAE/C,IAAI5zD,EAAQ,EACZ,IAAK,IAAI1oC,EAAIs8F,EAAW,EAAGt8F,EAAIkhD,EAAOx4C,QAAS,CAK7C,IAAItD,EAAOrC,KAAK0iD,kBAAkB/c,GAC9BznC,EAAQ8B,KAAKmP,aAAaw2B,EAAQ,GAEtC,IAAKqyD,EAAkB95F,EAAOmE,GAE5B,YADA0gD,EAAW,uBAAyBpd,GAMtC,OAFAwY,EAAOg6C,WAAWxyD,EAAO1oC,KAEjBoF,GACN,KAAKkgD,EAAqBa,KACxBjF,EAAOi6C,UAAUl6F,EAAOjB,GACxB,MAEF,KAAKslD,EAAqBe,MACxBnF,EAAOg6C,WAAWj6F,EAAOjB,GACzB,MAEF,KAAKslD,EAAqBlF,MACxBc,EAAOe,aAAahhD,EAAOjB,GAC3B,MAEF,KAAKslD,EAAqBjF,OACxBa,EAAOgB,cAAcjhD,EAAOjB,GAC5B,MAEF,KAAKslD,EAAqBhF,MACxBY,EAAOiB,aAAalhD,EAAOjB,GAC3B,MAEF,KAAKslD,EAAqB/E,OACxBW,EAAOkB,cAAcnhD,EAAOjB,GAC5B,MAEF,KAAKslD,EAAqBgB,MACxBpF,EAAOmB,aAAaphD,EAAOjB,GAI/BA,GAAKulD,EAAuBngD,GAC5BsjC,IAGF,IAAK6zD,EAAW7oF,GAAOkoF,EAAaY,qBAAqBz5F,KAAKmwD,QAAShS,EAAQn+C,KAAKu4F,WAChF5nF,IAAQkoF,EAAaE,eAAeC,aAIxC76C,EAASrkC,OAAOoc,OAAO,CAACl2B,KAAKmwD,QAASqpC,IAEtCx5F,KAAKoP,cAAcpP,KAAKs5F,iBAAkB,MAC1Ct5F,KAAKoP,cAAc,EAAG+uC,IANpBn+C,KAAKoP,cAAcpP,KAAKs5F,iBAAkB,sBAAwB3oF,GAWtE,wBACO3Q,KAAK04F,mBAGV14F,KAAK27E,aAAa37E,KAAK0iD,mBACvB1iD,KAAKoP,cAAcpP,KAAKs5F,iBAAkB,MAC1Ct5F,KAAKq1B,kBAGC,iBAKN,GAJAr1B,KAAKmM,SAAmB,SAAEjO,MAAQ,UAAM0d,MAAM5b,KAAKmM,SAAmB,SAAEjO,MAAO,EAAG,KAClF8B,KAAKmM,SAAe,KAAEjO,MAAQ,UAAM0d,MAAM5b,KAAKmM,SAAe,KAAEjO,MAAO,EAAG,KAC1E8B,KAAKmM,SAAmB,SAAEjO,MAAQ,UAAM0d,MAAM5b,KAAKmM,SAAmB,SAAEjO,MAAO,EAAG,GAClF8B,KAAK0iD,kBAAoB1iD,KAAK4iD,kBAAkB5iD,KAAKmM,SAAqB,WAAEjO,OAClC,KAAtC8B,KAAKmM,SAAc,IAAEjO,MAAMyH,OAG7B,OAFA3F,KAAKoP,cAAcpP,KAAKs5F,iBAAkB,eAC1Ct5F,KAAKu4F,UAAY,MACV,EAETv4F,KAAKu4F,UAAYz+E,OAAO+E,KAAK7e,KAAKmM,SAAc,IAAEjO,MAAO,OACzD,IAAIk7F,EAAap5F,KAAKmM,SAAqB,WAAEjO,MAI7C,OAHA8B,KAAKs4F,cAAgBc,GAAoC,IAAtBA,EAAWzzF,OAAeyzF,EAAW53D,cAAgB,SACxFxhC,KAAKmwD,QAAUr2C,OAAO+E,KAAK7e,KAAKs4F,eAAiB,IAAMt4F,KAAKmM,SAAmB,SAAEjO,MAAMgZ,SAAS,KAAKI,QAAQ,GAAI,OACjHtX,KAAKoP,cAAcpP,KAAKs5F,iBAAkB,OACnC,EAGD,aAAa3xF,GACnB,GAAI3H,KAAKqR,iBAAmB,IAAM1J,EAAKhC,OAAQ,CAC7C,MAAMyL,EAAcpR,KAAKqR,iBACzB,IAAK,IAAIpU,EAAI,EAAGA,EAAImU,EAAanU,IAC/B+C,KAAKqS,YAAYpV,GAInB,IAAK,IAAIA,EAAI,EAAGA,EAAI0K,EAAKhC,OAAQ1I,IAC/B+C,KAAKkR,SAASjU,EAAEia,WAAY,EAAAnN,KAAKoB,QAGnCnL,KAAK+R,oBAID,kBAAkBmM,GACxB,MAAMvW,EAAOuW,EACVsjB,cACAvjB,QAAQ,KAAM,IACdhB,MAAM,KACNtP,OAAO8C,GAAW,KAANA,GAEf,GAAI9I,GAAQA,EAAKhC,OACf,IAAK,IAAI1I,EAAI,EAAGA,EAAI0K,EAAKhC,OAAQ1I,IAAK,CACpC,QAAsC4S,IAAlC0yC,EAAqB56C,EAAK1K,IAE5B,YADA+C,KAAKoP,cAAcpP,KAAKs5F,iBAAkB,wBAG5C3xF,EAAK1K,GAAKslD,EAAqB56C,EAAK1K,IAGxC,OAAO0K,GApSX,wBAuSA,EAAA9E,UAAUmB,iBAAiB,4CAA6Cq1F,I,oJChkBxE,IAAIK,EAAS,EAAQ,IACrB,MAAMC,EAAU,EAAQ,KAAiBA,QAEnCC,EAAa9/E,OAAOmlC,MAAM,GAAI,GAEpC,IAAY85C,GAAZ,SAAYA,GACV,iCACA,6CACA,2CACA,qDACA,+CALF,CAAYA,EAAA,EAAAA,iBAAA,EAAAA,eAAc,KAqB1B,gCAAqC5oC,EAASj7C,EAAS1W,EAAKq7F,EAAKD,GAC/D,GAAmB,KAAfp7F,EAAImH,OACN,MAAO,CAAC,KAAMozF,EAAee,mBAE/B,GAAkB,KAAdD,EAAGl0F,OACL,MAAO,CAAC,KAAMozF,EAAegB,kBAG/B,IAAIC,EAASN,EAAOO,eAAe,cAAez7F,EAAKq7F,GACpDK,gBAAe,GAEdhlF,EAAQvP,OAAS,KACnBuP,EAAU4E,OAAOoc,OAAO,CAAChhB,EAAS4E,OAAOmlC,MAAM,GAAM/pC,EAAQvP,OAAS,GAAK,MAE7EuP,EAAU8kF,EAAO3qF,OAAO6F,GACxBA,EAAU4E,OAAOoc,OAAO,CAAChhB,EAAS8kF,EAAOG,UAEzC,IAAIC,EAAYtgF,OAAOoc,OAAO,CAACi6B,EAASj7C,EAAQgI,MAAM,EAAG,KAAM,IAC/Dk9E,EAAYtgF,OAAOoc,OAAO,CAACkkE,EAAWllF,GAAU,GAAKA,EAAQvP,QAC7D,IAAI00F,EAAOV,EAAQn7F,EAAK47F,EAAW,CAAEE,gBAAgB,IAGrD,MAAO,CADPplF,EAAU4E,OAAOoc,OAAO,CAAChhB,EAASmlF,EAAKn9E,MAAM,EAAG,IAAKhI,EAAQvP,OAAS,GACrDozF,EAAeC,cAelC,gCAAqC7oC,EAASj7C,EAAS1W,EAAKq7F,EAAKD,GAC/D,GAAmB,KAAfp7F,EAAImH,OACN,MAAO,CAAC,KAAMozF,EAAee,mBAE/B,GAAkB,KAAdD,EAAGl0F,OACL,MAAO,CAAC,KAAMozF,EAAegB,kBAG/B,GAAI7kF,EAAQvP,OAAS,IAAO,EAC1B,MAAO,CAAC,KAAMozF,EAAewB,uBAG/B,IAAIH,EAAYtgF,OAAOoc,OAAO,CAACi6B,EAASj7C,GAAU,IAGlD,GAFAklF,EAAYtgF,OAAOoc,OAAO,CAACkkE,EAAWllF,GAAU,GAAKA,EAAQvP,SAClDg0F,EAAQn7F,EAAK47F,EAAW,CAAEE,gBAAgB,IAAQp9E,MAAM,EAAG,GAC5Do8C,QAAQpkD,EAASA,EAAQvP,OAAS,GAC1C,MAAO,CAAC,KAAMozF,EAAeyB,oBAG/B,IAAIR,EAASN,EAAOe,iBAAiB,cAAej8F,EAAKq7F,GACtDK,gBAAe,GAKlB,OAHAhlF,EAAU8kF,EAAO3qF,OAAO6F,EAAQgI,MAAM,EAAGhI,EAAQvP,OAAS,IAGnD,CAFPuP,EAAU4E,OAAOoc,OAAO,CAAChhB,EAAS8kF,EAAOG,UAExBpB,EAAeC,e,cCxFlCh8F,EAAOD,QAAUmxB,QAAQ,kB,mHCAzB,aACA,OACA,OACA,OAEMwrE,EAAS,EAAQ,IAEjBE,EAAa9/E,OAAOmlC,MAAM,GAAI,GA6BpC,IAAKs2C,GAAL,SAAKA,GACH,oBACA,wBAFF,CAAKA,MAAU,KAKf,MAAamF,UAAoC,EAAAxuF,KAO/C,cACE3M,QAPF,KAAAk2F,cAAgB,KAChB,KAAAC,OAAS,GAGT,KAAA6C,UAAoB,KAIlBv4F,KAAK+I,MAAQ,+CACb/I,KAAKkK,YACH,q8BAaFlK,KAAKmM,SAAqB,WAAI,EAAAlC,YAAY1L,OAAO,CAC/C2L,YAAa,mBACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAOq3F,EAAWI,QAASriF,KAAMiiF,EAAWI,SAC9C,CAAEz3F,MAAOq3F,EAAWK,UAAWtiF,KAAMiiF,EAAWK,aAGpD13F,MAAO,YAET8B,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAC3C2L,YAAa,uBACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYkB,SAEpBlL,KAAKkR,SAAS,WAAY,EAAAnH,KAAKmB,QAC/BlL,KAAK2tC,qBAAqB,SAAU,EAAA5jC,KAAKmB,OAAQ,GAAI,UACrDlL,KAAK2tC,qBAAqB,QAAS,EAAA5jC,KAAKmB,OAAQ,GAAI,wCACpDlL,KAAKuS,UAAU,OAAQ,EAAAxI,KAAKmB,QAC5BlL,KAAKuS,UAAU,KAAM,EAAAxI,KAAKmB,QAC1BlL,KAAKuS,UAAU,UAAW,EAAAxI,KAAKoB,QAC/BnL,KAAKuS,UAAU,OAAQ,EAAAxI,KAAKoB,QAC5BnL,KAAKuS,UAAU,gBAAiB,EAAAxI,KAAKqB,SACrCpL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKqB,SAChCpL,KAAKuS,UAAU,cAAe,EAAAxI,KAAKoB,QACnCnL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKoB,QAChCnL,KAAKuS,UAAU,MAAO,EAAAxI,KAAKoB,QAC3BnL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKoB,QAChCnL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKqB,SAChCpL,KAAKmM,SAAsB,YAAI,EAAAlC,YAAY1L,OAAO,CAChD2L,YAAa,0BACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,MAAOoV,KAAM,kBACtB,CAAEpV,MAAO,QAASoV,KAAM,WACxB,CAAEpV,MAAO,UAAWoV,KAAM,aAG9BpV,MAAO,UAET8B,KAAKmM,SAAsB,YAAI,EAAAlC,YAAY1L,OAAO,CAChD2L,YAAa,0BACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,MAAOoV,KAAM,kBACtB,CAAEpV,MAAO,QAASoV,KAAM,WACxB,CAAEpV,MAAO,UAAWoV,KAAM,aAG9BpV,MAAO,UAET8B,KAAKmM,SAAsB,YAAI,EAAAlC,YAAY1L,OAAO,CAChD2L,YAAa,0BACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,MAAOoV,KAAM,kBACtB,CAAEpV,MAAO,QAASoV,KAAM,WACxB,CAAEpV,MAAO,UAAWoV,KAAM,aAG9BpV,MAAO,UAET8B,KAAKmM,SAAS,gBAAkB,EAAAlC,YAAY1L,OAAO,CACjD2L,YAAa,8BACbhM,MAAO,IACPmE,KAAM,EAAA2H,YAAYmB,SAEpBnL,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,sCACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYmB,SAEpBnL,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,OACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,eAAgBoV,KAAM,gBAC/B,CAAEpV,MAAO,UAAWoV,KAAM,WAC1B,CAAEpV,MAAO,UAAWoV,KAAM,WAC1B,CAAEpV,MAAO,QAASoV,KAAM,WAG5BpV,MAAO,YAET8B,KAAKivC,kBAAkB,CACrBC,OAAQ,CAAC,CAAE7rB,KAAM,GAAIwyE,SAAU,CAAExmD,OAAQ,KACzCF,WAAY,CACV2mD,YAAa/qF,GACJA,EAAoB,WAAE7M,QAAUq3F,EAAWK,UAEpDG,YAAahrF,GACJA,EAAoB,WAAE7M,QAAUq3F,EAAWK,UAEpDI,YAAajrF,GACJA,EAAoB,WAAE7M,QAAUq3F,EAAWK,aAM1D,UACE51F,KAAKi2F,WAAaj2F,KAAKmM,SAAqB,WAAEjO,MAC9C,IAAIy8F,EAAS36F,KAAKmM,SAAiB,OAAEjO,MACrC8B,KAAKu4F,UAAYoC,GAA4B,KAAlBA,EAAOh1F,OAAgBmU,OAAO+E,KAAK87E,EAAQ,OAAS,KAC3E36F,KAAKi2F,aAAeV,EAAWK,WASjC51F,KAAKwS,aAAa,IAEpBxS,KAAKw5E,eACLx5E,KAAKk6D,cAGP,iBAEE,MAAM+7B,EAAaj2F,KAAKmM,SAAqB,WAAEjO,MAC/C,IAAIw3F,EAAS11F,KAAKmP,aAAa,GAAGqyB,eAAiB,GASnD,GARIk0D,GAAU11F,KAAK01F,SACjB11F,KAAK01F,OAASA,EACd11F,KAAKk6D,cACLl6D,KAAKwgC,0BACLxgC,KAAKw5E,eACLx5E,KAAKk2F,iBAGgB,OAAnBl2F,KAAKu4F,UACP,OAEF,IAAI5wF,EAAe3H,KAAKmP,aAAa,IAAM,GAC3C,IAAKxH,EAAM,OAMX,GALSA,EAAKhC,OAAS,GAAM,GAAgC,OAA1BgC,EAAKA,EAAKhC,OAAS,IAAyC,OAA1BgC,EAAKA,EAAKhC,OAAS,GAE5B,SAAjDgC,EAAKk7C,UAAUl7C,EAAKhC,OAAS,EAAGgC,EAAKhC,UAC9CgC,EAAOA,EAAKk7C,UAAU,EAAGl7C,EAAKhC,OAAS,IAFvCgC,EAAOA,EAAKk7C,UAAU,EAAGl7C,EAAKhC,OAAS,GAIrB,KAAhBgC,EAAKhC,QAAiC,KAAhBgC,EAAKhC,OAC7B,OAGF,IAAIw4C,EAASrkC,OAAO+E,KAAKlX,EAAK2P,OAAO,EAAG,IAAK,OAG7C6mC,EAFeu7C,EAAOe,iBAAiB,cAAez6F,KAAKu4F,UAAWqB,GACnEM,gBAAe,GACA7qF,OAAO8uC,GACzBx2C,EAAOw2C,EAAOjnC,SAAS,OAAOsqB,cAAgB75B,EAAKk7C,UAAU,IAG3C,KAAhBl7C,EAAKhC,QACW,KAAhBgC,EAAKhC,QACoB,OAAzBgC,EAAKk7C,UAAU,EAAG,IACO,OAAzBl7C,EAAKk7C,UAAU,EAAG,IACO,OAAzBl7C,EAAKk7C,UAAU,EAAG,IACO,OAAzBl7C,EAAKk7C,UAAU,EAAG,IAKhB6yC,GAAU/tF,EAAKk7C,UAAU,EAAG,IAAgB,IAAV6yC,IAElCO,IAAeV,EAAWK,WACD,OAAzBjuF,EAAKk7C,UAAU,EAAG,IACD,KAAhBl7C,EAAKhC,QAAiC,KAAhBgC,EAAKhC,OAK5BswF,IAAeV,EAAWI,SACD,MAAzBhuF,EAAKk7C,UAAU,EAAG,IACD,KAAhBl7C,EAAKhC,QAAiC,KAAhBgC,EAAKhC,SAExB3F,KAAK4G,OAAO,GAAGC,SAAS7G,KAAKk2F,gBACjCl2F,KAAKm2F,aAAan2F,KAAKo2F,cAAczuF,MARjC3H,KAAK4G,OAAO,GAAGC,SAAS7G,KAAKk2F,gBACjCl2F,KAAKm2F,aAAan2F,KAAKq2F,gBAAgB1uF,MAY7C,wBACE,IAAIgzF,EAAS36F,KAAKmM,SAAiB,OAAEjO,MACrC8B,KAAKu4F,UAAYoC,GAA4B,KAAlBA,EAAOh1F,OAAgBmU,OAAO+E,KAAK87E,EAAQ,OAAS,KAC/E,IAAIrE,EAAet2F,KAAKmM,SAAmB,SAAEjO,MAC7Co4F,EAAe,UAAUv1E,YAAYu1E,EAAct2F,KAAKmM,SAAe,KAAEjO,OACrE8B,KAAKy1F,eAAiBa,GACxBt2F,KAAKk2F,gBAEPl2F,KAAKwvE,aACLxvE,KAAK+R,mBACL/R,KAAKq1B,iBAGC,aAAanuB,GACnB,OAAQlH,KAAKmM,SAAqB,WAAEjO,OAClC,KAAKq3F,EAAWI,QACd31F,KAAKoP,cAAc,EAAG/D,KAAK6B,UAAUhG,IACrClH,KAAKoP,cAAc,EAAmB,MAAhBlI,EAAW,GAAY,KAAOA,EAAW,IAC/DlH,KAAKoP,cAAc,EAAwB,MAArBlI,EAAgB,QAAY,KAAOA,EAAgB,SACzElH,KAAKoP,cAAc,EAAqB,MAAlBlI,EAAa,KAAY,KAAOA,EAAa,MACnElH,KAAKoP,cAAc,EAAGlI,EAAgB,QAAIlH,KAAKmM,SAAS,gBAAgBjO,OACxE8B,KAAKoP,cAAc,EAAqB,MAAlBlI,EAAa,KAAY,KAAOA,EAAa,MACnElH,KAAKoP,cAAc,EAAyB,MAAtBlI,EAAiB,SAAY,KAAOA,EAAiB,UAC3ElH,KAAKoP,cAAc,EAAoB,MAAjBlI,EAAY,IAAY,KAAOA,EAAY,KACjElH,KAAKoP,cAAc,EAAyB,MAAtBlI,EAAiB,SAAY,KAAOA,EAAiB,UAC3ElH,KAAKoP,cAAc,GAA0B,MAAtBlI,EAAiB,SAAY,KAAOA,EAAiB,UAC5E,MAEF,KAAKquF,EAAWK,UACd51F,KAAKoP,cAAc,EAAG/D,KAAK6B,UAAUhG,IACrClH,KAAKoP,cAAc,EAAmB,MAAhBlI,EAAW,GAAY,KAAOA,EAAW,IAC/DlH,KAAKoP,cAAc,EAAwB,MAArBlI,EAAgB,QAAY,KAAOA,EAAgB,SACzElH,KAAKoP,cAAc,EAAqB,MAAlBlI,EAAa,KAAY,KAAOA,EAAa,MACnElH,KAAKoP,cAAc,EAAGlI,EAAgB,QAAIlH,KAAKmM,SAAS,gBAAgBjO,OACxE8B,KAAKoP,cAAc,EAAuB,MAApBlI,EAAe,OAAY,KAAOA,EAAe,QACvE,MAAMqvF,EAAmBv2F,KAAKw2F,iBAAiB,CAACtvF,EAAW,GAAGA,EAAW,GAAGA,EAAW,KACvFlH,KAAKoP,cAAc,EAA0B,MAAvBmnF,EAAiB,GAAa,KAAOA,EAAiB,IAC5Ev2F,KAAKoP,cAAc,EAA0B,MAAvBmnF,EAAiB,GAAa,KAAOA,EAAiB,IAC5Ev2F,KAAKoP,cAAc,EAA0B,MAAvBmnF,EAAiB,GAAa,KAAOA,EAAiB,KAK1E,iBAAiBE,GACvB,IAAIvvF,EAAS,GACb,IAAK,IAAIjK,EAAI,EAAGA,EAAI,EAAGA,IACrB,GAA8B,iBAAnBw5F,EAAax5F,GACtB,OAAQ+C,KAAKmM,SAAS,aAAalP,EAAI,KAAKiB,OAC1C,IAAK,MACH,MAAMw4F,EAAO,KACPC,EAAKF,EAAax5F,GAAK,KAAQy5F,EAC/BE,EAAK,IACLC,EAAKD,EAAKD,GAAMD,EAAOC,GAIvBxjB,EADI,GAAK,EAFJ,IAEc,EADf,KACwBzgE,KAAKgR,IAAImzE,EAAID,IAC9B,OACjB1vF,EAAO/B,KAAKuN,KAAKjI,MAAa,IAAP0oE,GAAc,KACrC,MAEF,IAAK,QACHjsE,EAAO/B,KAAMsxF,EAAax5F,GAAK,KAAQ,IACvC,MAEF,IAAK,eACqB4S,IAApB4mF,EAAax5F,IAAoBw5F,EAAax5F,IAAM,IACtDiK,EAAO/B,MAAK,GAEZ+B,EAAO/B,MAAK,QAIb+B,EAAO/B,KAAK,MAErB,OAAO+B,EAGT,uBACE,OAAO,IAAIZ,KAGb,gBAAgBqB,GACd,MAAM8yD,EAAQz6D,KAAKmP,aAAa,GAC1B2nF,EAAgB,CACpB/2F,GAAI06D,EAAQ,MACZs8B,OAAQt8B,EAAQ,UAChBu8B,QAASv8B,EAAQ,WACjBw8B,GAAIx8B,EAAQ,MACZy8B,GAAIz8B,EAAQ,MACZ08B,GAAI18B,EAAQ,MACZ28B,KAAM38B,EAAQ,QACd48B,IAAK58B,EAAQ,QAEf,IAAI68B,EAAc,KAElB,OADAA,EAAct3F,KAAKu3F,uBACZ,CACLx3F,GAAI4H,EAAKk7C,UAAU,EAAG,GACtBk0C,OAAQj6E,SAASnV,EAAKk7C,UAAU,EAAG,IAAK,IACxCm0C,QAASl6E,SAASnV,EAAKk7C,UAAU,GAAI,IAAK,IAAM,GAChDo0C,GAAIn6E,SAASnV,EAAKk7C,UAAU,GAAI,IAAK,IACrCq0C,GAAIp6E,SAASnV,EAAKk7C,UAAU,GAAI,IAAK,IACrCs0C,GAAIr6E,SAASnV,EAAKk7C,UAAU,GAAI,IAAK,IACrCu0C,KAAMt9E,OAAO+E,KAAKlX,EAAKk7C,UAAUl7C,EAAKhC,OAAS,EAAGgC,EAAKhC,OAAS,GAAI,OAAO09C,SAAS,GAEpFg0C,IAAKv6E,SAASnV,EAAKk7C,UAAUl7C,EAAKhC,OAAS,EAAGgC,EAAKhC,QAAS,IAAM,GAClE8jE,SAAUzpE,KAAKxC,KACfi9D,MAAOq8B,EACPQ,YAAaA,GAIjB,cAAc3vF,GACZ,MAAM8yD,EAAQz6D,KAAKmP,aAAa,GAC1B2nF,EAAgB,CACpB/2F,GAAI06D,EAAQ,MACZ0Y,KAAM1Y,EAAQ,QACd0f,SAAU1f,EAAQ,YAClB+8B,SAAU/8B,EAAQ,YAClBg9B,IAAKh9B,EAAQ,OACbi9B,SAAUj9B,EAAQ,YAClBu8B,QAASv8B,EAAQ,WACjB28B,KAAM38B,EAAQ,QACd48B,IAAK58B,EAAQ,QAEf,IAAI68B,EAAc,KAClBA,EAAct3F,KAAKu3F,uBAEnB,IAAIrwF,EAAmB,CACrBnH,GAAI4H,EAAKk7C,UAAU,EAAG,GACtBswB,KAAMr2D,SAASnV,EAAKk7C,UAAU,GAAI,IAAMl7C,EAAKk7C,UAAU,EAAG,IAAK,IAAM,IACrEs3B,SAAUr9D,SAASnV,EAAKk7C,UAAU,GAAI,IAAMl7C,EAAKk7C,UAAU,GAAI,IAAK,IAAM,GAC1E20C,SAAU16E,SAASnV,EAAKk7C,UAAU,GAAI,IAAK,IAAM,IACjDm0C,QAASl6E,SAASnV,EAAKk7C,UAAU,GAAI,IAAK,IAAM,GAChDu0C,KAAMt9E,OAAO+E,KAAKlX,EAAKk7C,UAAUl7C,EAAKhC,OAAS,EAAGgC,EAAKhC,OAAS,GAAI,OAAO09C,SAAS,GAEpFg0C,IAAKv6E,SAASnV,EAAKk7C,UAAUl7C,EAAKhC,OAAS,EAAGgC,EAAKhC,QAAS,IAAM,GAClE8jE,SAAUzpE,KAAKxC,KACfi9D,MAAOq8B,EACPQ,YAAaA,GAEf,GAA6B,OAAzB3vF,EAAKk7C,UAAU,EAAG,IAAwC,OAAzBl7C,EAAKk7C,UAAU,EAAG,GAAa,CAClE,MAAM80C,EAAqBzwF,EAG3B,GAFAywF,EAASF,IAAM36E,SAASnV,EAAKk7C,UAAU,GAAI,IAAMl7C,EAAKk7C,UAAU,GAAI,IAAK,IACzE37C,EAASywF,EACmB,MAAxBhwF,EAAKk7C,UAAU,EAAG,GAAY,CAChC,MAAM+0C,EAAsBD,EAC5BC,EAAUF,SAAW56E,SAASnV,EAAKk7C,UAAU,GAAI,IAAK,IAAM,IAC5D37C,EAAS0wF,GAGb,OAAO1wF,EAGT,gBACElH,KAAKoP,cAAc,GAAG,GAAO,GAC7BrK,cAAc/E,KAAK0uC,aACnB,IAAI4nD,EAAet2F,KAAKmM,SAAmB,SAAEjO,MAC7Co4F,EAAe,UAAUv1E,YAAYu1E,EAAct2F,KAAKmM,SAAe,KAAEjO,OACzE8B,KAAKy1F,cAAgBa,EACrBt2F,KAAK0uC,YAAcrxB,WAAW,KAC5Brd,KAAKoP,cAAc,GAAG,GAAM,IAC3BknF,GAGL,aACE,MAAMuB,EAAoB73F,KAAKmM,SAAqB,WAAEjO,MACtD,GAAI8B,KAAKi2F,YAAc4B,EACrB,OAAQA,GACN,KAAKtC,EAAWI,QACd31F,KAAKwS,aAAa,GAClBxS,KAAKwS,aAAa,GAClBxS,KAAKwS,aAAa,GAClBxS,KAAKwS,aAAa,GACdxS,KAAKiH,QAAQ,KAAKjH,KAAKwS,aAAa,IACxCxS,KAAKuS,UAAU,cAAe,EAAAxI,KAAKoB,QACnCnL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKoB,QAChCnL,KAAKuS,UAAU,MAAO,EAAAxI,KAAKoB,QAC3BnL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKoB,QAChCnL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKqB,SAChCpL,KAAKw5E,eACL,MAEF,KAAK+b,EAAWK,UACd51F,KAAKwS,aAAa,GAClBxS,KAAKwS,aAAa,GAClBxS,KAAKwS,aAAa,GAClBxS,KAAKwS,aAAa,GAClBxS,KAAKwS,aAAa,IACdxS,KAAKiH,QAAQ,KAAKjH,KAAKwS,aAAa,IACxCxS,KAAKuS,UAAU,SAAU,EAAAxI,KAAKoB,QAC9BnL,KAAKuS,UAAU,KAAM,EAAAxI,KAAKoB,QAC1BnL,KAAKuS,UAAU,KAAM,EAAAxI,KAAKoB,QAC1BnL,KAAKuS,UAAU,KAAM,EAAAxI,KAAKoB,QAC1BnL,KAAKw5E,eAIPqe,GAAqBtC,EAAWK,YAClC51F,KAAKiH,QAAQ,GAAGzJ,KAAO,OAAOwC,KAAKmM,SAAsB,YAAEjO,SAC3D8B,KAAKiH,QAAQ,GAAGzJ,KAAO,OAAOwC,KAAKmM,SAAsB,YAAEjO,SAC3D8B,KAAKiH,QAAQ,GAAGzJ,KAAO,OAAOwC,KAAKmM,SAAsB,YAAEjO,UAE7D8B,KAAKi2F,WAAa4B,EAClB73F,KAAKk6D,cAGP,cACMl6D,KAAK01F,OAAQ11F,KAAK+I,MAAQ,wBAAwB/I,KAAKi2F,gBAAgBj2F,KAAK01F,UAC3E11F,KAAK+I,MAAQ,wBAAwB/I,KAAKi2F,oBAGjD,eACEj2F,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MAClBpP,KAAKmM,SAAqB,WAAEjO,QAAUq3F,EAAWI,SAAS31F,KAAKoP,cAAc,GAAI,OAhbzF,gCAmbA,EAAAvM,UAAUmB,iBAAiB,uDAAwD02F,I,8EC5dnF,aACA,OACA,OACA,OACA,OAEA,IAAIE,EAAY,EAAQ,KAKxB,MAAMC,UAAyB,EAAA3uF,KAG7B,cACE3M,QAHF,KAAAu7F,UAAY,KAIV96F,KAAK+I,MAAQ,EAAA2C,UAAU,oBAAoB,iBAAiB3C,MAC5D/I,KAAKkK,YACH,oBACA,EAAAwB,UAAU,oBAAoB,iBAAiBxB,YAAc,2mBAwB/DlK,KAAKkR,SAAS,UAAW,EAAAnH,KAAKqB,SAC9BpL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKqB,SAC9BpL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKmB,QAC7BlL,KAAKuS,UAAU,UAAW,EAAAxI,KAAKmB,QAC/BlL,KAAKmM,SAAuB,aAAI,EAAAlC,YAAY1L,OAAO,CACjD2L,YAAa,gBACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,OAAQhM,MAAO,KAAMmE,KAAM,EAAA2H,YAAYmB,SACjGnL,KAAKmM,SAAkB,QAAI,EAAAlC,YAAY1L,OAAO,CAC5C2L,YAAa,iBACbhM,MAAO,EACPmE,KAAM,EAAA2H,YAAYmB,SAItB,UACEnL,KAAK+6F,qBAGP,iBACE/6F,KAAK+6F,qBAGP,wBACE/6F,KAAK+6F,qBAGP,YACE/6F,KAAKg7F,iBAGC,qBACN,GAAIh7F,KAAKqB,OAAS,EAAA+S,KAAKC,SACvBrU,KAAKg7F,iBACLh7F,KAAK+kE,YAAW,GAAO,EAAO,oBAE1B/kE,KAAKmM,SAAuB,aAAEjO,OAAO,CAEvC,MAAM+8F,EAAQnhF,OAAOmlC,MAAM,OAAQ,GAC7Bi8C,EAAYphF,OAAOmlC,MAAM,OAAQ,GAEvC,IAAIk8C,EAASn7F,KAAKmM,SAAkB,QAAEjO,MACtCi9F,EAASr+E,SAASq+E,GAClB,MAAMC,EAAa,EACbC,EAAkB,MAClBC,EAAa,MACbC,EAAe,EAOfC,EAAS,CACbC,QAAS,SAASvrC,EAAMwrC,GACtB,GAAIA,IAAWP,GAAUjrC,GAAQkrC,GAAclrC,EAAOorC,EAEpD,OAAOL,EAAM/3C,UAAUgN,EAAOqrC,IAGlCI,iBAAkB,SAASzrC,EAAMwrC,GAC/B,GAAIA,IAAWP,GAAUjrC,GAAQkrC,GAAclrC,EAAOmrC,EAGpD,OAAOH,EAAUU,aAAa1rC,EAAOqrC,IAGzCM,mBAAoB,SAAS3rC,EAAMwrC,GACjC,GAAIA,IAAWP,GAAUjrC,GAAQmrC,GAAmBnrC,EAAOorC,EAGzD,OAAOJ,EAAUU,aAAa1rC,EAAOqrC,IAGzCO,QAAS,SAAS5rC,EAAMhyD,EAAOw9F,GACzBA,IAAWP,GAAUjrC,GAAQkrC,GAAclrC,EAAOorC,GAEpDL,EAAM9C,WAAWj6F,EAAOgyD,EAAOqrC,IAGnCQ,YAAa,SAAS7rC,EAAMhyD,EAAOw9F,GAC7BA,IAAWP,GAAUjrC,GAAQkrC,GAAclrC,EAAOorC,GAEpDJ,EAAUr9B,cAAc3/D,EAAOgyD,EAAOqrC,IAG1CS,yBAA0B,SAASN,GACjC,OAAO,IAAIl6F,SAAQ,SAASC,GAC1B4b,YAAW,WACT5b,EAAQ,CACNw6F,EAAM,UACN,EAAM,eACN,EAAM,IACN,EAAM,mBAEP,SAMT,IACI5nF,EADM,EAAQ,KACDy7C,eACjB,IAAIv0C,EAAOvb,KAAKmM,SAAe,KAAEjO,MAC7Bg+F,EAAel8F,KAAKmM,SAAkB,QAAEjO,MAExCqd,EAAKrE,WAAWvR,QAAU,GAC5B0O,EAAO8nF,KAAK,QAASxrF,IACF,eAAbA,EAAI8xB,OACNziC,KAAK+kE,YAAW,GAAO,EAAO,eAC9B1wD,EAAOg5D,WAIXh5D,EAAO8nF,KAAK,YAAa,KAEvBn8F,KAAK86F,UAAY,IAAIF,EAAUwB,UAAUZ,EAAQ,CAC/ClgF,KAAM,UACNC,KAAMA,EACN3R,OAAO,EACP8xF,OAAQ5+E,SAASo/E,KAGnBl8F,KAAK86F,UAAU9qC,GAAG,cAAer/C,IAC/B3Q,KAAK+kE,YAAW,EAAOp0D,EAAK,kBAG9B3Q,KAAK86F,UAAU9qC,GAAG,cAAe,KAC/BhwD,KAAK+kE,YAAW,GAAM,EAAO,iBAG/B1wD,EAAOg5D,UAGTh5D,EAAO07C,OAAOx0C,IACLA,EAAKrE,WAAWvR,OAAS,GAClC3F,KAAK+kE,WAAW,MAAM,EAAO,oBAK3B,iBACN/kE,KAAK86F,WACH96F,KAAK86F,UAAUztB,MAAM,KACnBrtE,KAAK+kE,YAAW,GAAO,EAAO,YAIpC,WAAWjH,EAAKntD,EAAKse,GACnBjvB,KAAKoP,cAAc,EAAG0uD,GACtB99D,KAAKoP,cAAc,EAAGuB,GACtB3Q,KAAKoP,cAAc,EAAG6f,IAG1B,EAAApsB,UAAUmB,iBAAiB,iCAAkC62F,I,cCvM7D79F,EAAOD,QAAUmxB,QAAQ,kB,cCAzBlxB,EAAOD,QAAUmxB,QAAQ,Q,8ECAzB,cACA,QACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,QAGM4kE,EAAY,EAAQ,IAI1B,MAAMuJ,UAAuB,EAAAnwF,KAK3B,cACE3M,QAJF,KAAA+8F,YAAc,EACd,KAAA/I,aAAmC,GAIjCvzF,KAAK+I,MAAQ,EAAA2C,UAAU,kBAAkBolC,OAAO/nC,MAChD/I,KAAKkK,YAAc,EAAAwB,UAAU,kBAAkBolC,OAAO5mC,YAEtDlK,KAAKkR,SAAS,WAAY,EAAAnH,KAAKqB,SAC/BpL,KAAKuS,UAAU,YAAa,EAAAxI,KAAKqB,SACjCpL,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,SAAUhM,OAAO,EAAOmE,KAAM,EAAA2H,YAAYoB,UACtGpL,KAAKmM,SAAuB,aAAI,EAAAlC,YAAY1L,OAAO,CACjD2L,YAAa,kBACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYyjC,QAEpBztC,KAAKmM,SAAuB,aAAI,EAAAlC,YAAY1L,OAAO,CACjD2L,YAAa,kBACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYyjC,QAEpBztC,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,wBAAyBhM,OAAO,EAAOmE,KAAM,EAAA2H,YAAYoB,UACrHpL,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,aAAchM,MAAO,UAAWmE,KAAM,EAAA2H,YAAYkB,SAC9GlL,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,cAAehM,MAAO,OAAQmE,KAAM,EAAA2H,YAAYkB,SAC1GlL,KAAKmM,SAAyB,eAAI,EAAAlC,YAAY1L,OAAO,CACnD2L,YAAa,qBACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,YAAahM,MAAO,GAAImE,KAAM,EAAA2H,YAAYkB,SACxGlL,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,WAAYhM,MAAO,GAAImE,KAAM,EAAA2H,YAAYo8E,WACvGpmF,KAAKmM,SAAuB,aAAI,EAAAlC,YAAY1L,OAAO,CACjD2L,YAAa,iBACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYyjC,QAEpBztC,KAAKmM,SAAuB,aAAI,EAAAlC,YAAY1L,OAAO,CACjD2L,YAAa,mBACbhM,MAAO,EACPmE,KAAM,EAAA2H,YAAYmB,SAEpBnL,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,4BACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,EAAGoV,KAAM,KAClB,CAAEpV,MAAO,EAAGoV,KAAM,KAClB,CAAEpV,MAAO,EAAGoV,KAAM,KAClB,CAAEpV,MAAO,EAAGoV,KAAM,KAClB,CAAEpV,MAAO,EAAGoV,KAAM,KAClB,CAAEpV,MAAO,EAAGoV,KAAM,KAClB,CAAEpV,MAAO,EAAGoV,KAAM,KAClB,CAAEpV,MAAO,EAAGoV,KAAM,KAClB,CAAEpV,MAAO,EAAGoV,KAAM,KAClB,CAAEpV,MAAO,EAAGoV,KAAM,KAClB,CAAEpV,MAAO,GAAIoV,KAAM,QAGvBpV,MAAO,IAGT8B,KAAKivC,kBAAkB,CACrBC,OAAQ,CACN,CAAE76B,OAAQ,CAAEg7B,OAAQ,GAAK9zB,KAAM,CAAE8zB,OAAQ,IACzC,CAAEktD,OAAQ,GAAIrwB,eAAgB,IAC9B,CAAE3jD,SAAU,GAAIE,SAAU,IAC1B,CAAE+zE,aAAc,GAAI3vF,SAAU,KAEhCsiC,WAAY,CACV96B,OAAQtJ,KACGA,EAAgB,OAAE7M,MAE7Bqd,KAAMxQ,KACKA,EAAgB,OAAE7M,MAE7BguE,eAAgBnhE,KACLA,EAAgB,OAAE7M,MAE7BqqB,SAAUxd,KACCA,EAAwB,eAAE7M,MAErCuqB,SAAU1d,KACCA,EAAwB,eAAE7M,SAM3C,OACE8B,KAAK27D,kBAAkB37D,KAAKmM,SAAuB,aAAEjO,OAGvD,YACE8B,KAAK08E,sBAGP,UACE18E,KAAKuG,iBAAmB,IAExBvG,KAAKs8F,YAAct8F,KAAKmM,SAAuB,aAAEjO,MAC7C8B,KAAKqB,MAAQ,EAAA+S,KAAKC,SACpBrU,KAAKoP,cAAc,GAAG,IAElBpP,KAAKmM,SAAiB,OAAEjO,OAAiC,MAAvB8B,KAAK4G,OAAO,GAAGQ,MAAuC,GAAvBpH,KAAK4G,OAAO,GAAGe,MAClF3H,KAAKk1F,mBAKX,kBACE,IAAI,KAAE55E,EAAI,KAAEC,EAAI,SAAEgN,EAAQ,SAAEE,GAAa,UAAOmD,KAC5CwP,EAAe,GAEnB,GAAIp7B,KAAKmM,SAAiB,OAAEjO,MAEW,MAAjC8B,KAAKmM,SAAiB,OAAEjO,OAAkD,IAAjC8B,KAAKmM,SAAiB,OAAEjO,QACnEk9B,EAAQ9f,KAAOtb,KAAKmM,SAAiB,OAAEjO,OAEN,MAA/B8B,KAAKmM,SAAe,KAAEjO,OAAgD,IAA/B8B,KAAKmM,SAAe,KAAEjO,QAC/Dk9B,EAAQ7f,KAAOvb,KAAKmM,SAAe,KAAEjO,OAEA,MAAnC8B,KAAKmM,SAAmB,SAAEjO,OAAoD,IAAnC8B,KAAKmM,SAAmB,SAAEjO,QACvEk9B,EAAQ7S,SAAWvoB,KAAKmM,SAAmB,SAAEjO,OAER,MAAnC8B,KAAKmM,SAAmB,SAAEjO,OAAoD,IAAnC8B,KAAKmM,SAAmB,SAAEjO,QACvEk9B,EAAQ3S,SAAW,UAAYkS,QAAQ36B,KAAKmM,SAAmB,SAAEjO,YAC9D,CAEL,GAAI,EAAAiS,OAAOmL,GAAO,OAClB,GAAI,EAAAnL,OAAOoL,GAAO,OAClB6f,EAAQ9f,KAAOA,EACf8f,EAAQ7f,KAAOA,GAC+B,IAA1Cvb,KAAKmM,SAAyB,eAAEjO,QAC7B,EAAAiS,OAAOirB,EAAQ7S,YAClB6S,EAAQ7S,SAAWA,GAEhB,EAAApY,OAAOirB,EAAQ3S,YAClB2S,EAAQ3S,SAAW,UAAYkS,QAAQlS,KAK7CzoB,KAAKi1F,uBACLj1F,KAAK8wC,OAASllB,EAAK0a,QAAQlL,GAC3Bp7B,KAAK8wC,OAAOkf,GAAG,UAAW,KACxBhwD,KAAKoP,cAAc,GAAG,GAEtB,IAAK,IAAInS,EAAI,EAAGA,GAAK+C,KAAKs8F,YAAar/F,IAAK,CAC1C,IAAIw9D,EAAQz6D,KAAKmM,SAAS,QAAUlP,GAAGiB,MACnCu8D,GAAkB,IAATA,GACXz6D,KAAK8wC,OAAO8X,UAAU6R,MAK5Bz6D,KAAK8wC,OAAOkf,GAAG,QAAS,KACtBhwD,KAAKoP,cAAc,GAAG,GAAO,GAC7BpP,KAAKoP,cAAc,EAAG,MAAM,KAG9BpP,KAAK8wC,OAAOkf,GAAG,QAASlmD,IACtB9J,KAAK2O,UAAU7E,KAGjB9J,KAAK8wC,OAAOkf,GAAG,UAAW,CAACyK,EAAO/wD,KAChC,IAAIlG,EAAmB,CAAEi3D,MAAOA,EAAO/wD,QAASA,EAAQwN,YACxDlX,KAAKuzF,aAAapuF,KAAK3B,KAI3B,uBACMxD,KAAK8wC,QAAQ9wC,KAAK8wC,OAAOwkD,MAG/B,iBAUE,GARIt1F,KAAK4G,OAAO,GAAGC,UACU,GAAvB7G,KAAK4G,OAAO,GAAGe,KAAe3H,KAAKi1F,wBAE9Bj1F,KAAKmM,SAAiB,OAAEjO,OAAiC,MAAvB8B,KAAK4G,OAAO,GAAGQ,MAAuC,GAAvBpH,KAAK4G,OAAO,GAAGe,MACvF3H,KAAKk1F,mBAILl1F,KAAKmM,SAAiB,OAAEjO,OAAS8B,KAAK8wC,QAAU9wC,KAAK8wC,OAAOsgB,UAC9D,IAAK,IAAIn0D,EAAI,EAAGA,EAAI+C,KAAKqR,iBAAkBpU,IAAK,CAC9C,IAAI0K,EAAO3H,KAAK4G,OAAO3J,GAAG0K,KAC1B,GAAIA,GAAQ3H,KAAK4G,OAAO3J,GAAG4J,QAAS,CAClC,IAOI4zD,EAPA/8C,GAAS,EACb,IACE/V,EAAO0D,KAAKuL,MAAMjP,GAClB,SACA8b,QAAQC,IAAI,oBACZhG,GAAS,EAGX,IAAIxI,EAAkB,GAGpBwI,GACA/V,EAAK7I,eAAe,iBACb6I,EAAK8yD,QAAU,EAAA1wD,KAAKmB,QAC3BvD,EAAK7I,eAAe,YAEpBoW,EAAU7J,KAAK6B,UAAUvF,EAAKuN,SAC9BlV,KAAK8wC,OAAO2rD,QAAQ90F,EAAK8yD,MAAO,GAAKvlD,KAErCulD,EAAQz6D,KAAKmM,SAAS,QAAUlP,GAAGiB,MACvBgX,EAARwI,EAAkBrS,KAAK6B,UAAUvF,GACtBiW,OAAOjW,GACtB3H,KAAK8wC,OAAO2rD,QAAQhiC,EAAO,GAAKvlD,MAO1C,wBACE,IAAIwnF,EAAS18F,KAAKmM,SAAuB,aAAEjO,MAC3Cw+F,EAAS,UAAM9gF,MAAM8gF,EAAQ,EAAG,KAChC18F,KAAKmM,SAAuB,aAAEjO,MAAQw+F,EAElC18F,KAAKs8F,aAAeI,GAAQ18F,KAAK27D,kBAAkB+gC,GAEvD18F,KAAK08E,sBAED18E,KAAKH,UAAUO,IACjBJ,KAAKH,UAAUO,GAAG2uB,WAAW/uB,KAAKD,GAAIC,KAAKH,UAAUE,GAAI,CACvDivB,KAAM,CAAEpoB,OAAQ5G,KAAK4G,OAAQK,QAASjH,KAAKiH,QAASkF,SAAUnM,KAAKmM,YAGnEnM,KAAKqB,MAAQ,EAAA+S,KAAKC,SACpBrU,KAAKi1F,uBAEDj1F,KAAKmM,SAAiB,OAAEjO,OAAO8B,KAAKk1F,mBAI5C,YACEl1F,KAAKi1F,uBAGP,kBAAkB9iF,GAChB,IAAIC,EAAOD,EAAenS,KAAKs8F,YAC/B,GAAY,GAARlqF,EAAJ,CAOA,GAJApS,KAAKgyC,kBAAkB7/B,EAAe,EAAG,EAAApI,KAAKmB,QAC9ClL,KAAKwkE,mBAAmBryD,EAAe,EAAG,EAAApI,KAAKmB,QAG3CkH,EAAO,EACT,IAAK,IAAInV,EAAI+C,KAAKs8F,YAAc,EAAGr/F,GAAKkV,EAAclV,IAAK,CACzD+C,KAAKmM,SAAS,aAAelP,GAAK,EAAAgN,YAAY1L,OAAO,CACnD2L,YAAa,cACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,OAAO,EAAOoV,KAAM,WACtB,CAAEpV,OAAO,EAAMoV,KAAM,UAGzBpV,OAAO,IAET8B,KAAKmM,SAAS,QAAUlP,GAAK,EAAAgN,YAAY1L,OAAO,CAC9C2L,YAAa,SAAWjN,EACxBiB,MAAO,GACPmE,KAAM,EAAA2H,YAAYkB,SAEpB,IAAK,IAAIjO,EAAI+C,KAAKs8F,YAAc,EAAGr/F,GAAKkV,EAAclV,IACpD+C,KAAKsM,eAAe4iC,OAAO/pC,KAAK,CAC9B,CAAC,aAAalI,KAAM,CAAEoyC,OAAQ,GAC9B,CAAC,QAAQpyC,KAAM,CAAEoyC,OAAQ,UAI1B,GAAIj9B,EAAO,EAChB,IAAK,IAAInV,EAAI+C,KAAKs8F,YAAar/F,EAAIkV,EAAclV,WACxC+C,KAAKmM,SAAS,QAAUlP,GAC/B+C,KAAKsM,eAAe4iC,OAAOiI,MAI/Bn3C,KAAKs8F,YAAcnqF,GAGrB,sBACE,IAAK,IAAIlV,EAAI,EAAGA,GAAK+C,KAAKs8F,YAAar/F,IAAK,CAE1C,IAAIw9D,EAAQz6D,KAAKmM,SAAS,QAAUlP,GAAGiB,MACnCu8D,EAAM90D,OAAS,KAAI80D,EAAQ,MAAQA,EAAMnjD,OAAOmjD,EAAM90D,OAAS,GAAI,KACvE3F,KAAK4G,OAAO3J,GAAGO,KAAYP,EAAI,MAAQw9D,EACvCz6D,KAAKiH,QAAQhK,GAAGO,KAAOi9D,EAAQ,MAAQx9D,EAGzC,GAAI+C,KAAKqB,MAAQ,EAAA+S,KAAK9K,OAAQ,CAC5B,IAAK,IAAIrM,EAAI,EAAGA,GAAK+C,KAAKs8F,YAAar/F,IACrC+C,KAAK4G,OAAO3J,GAAGsN,MAAQvK,KAAK4G,OAAO3J,GAAGO,KACtCwC,KAAKiH,QAAQhK,GAAGsN,MAAQvK,KAAKiH,QAAQhK,GAAGO,KAE1CwC,KAAKuF,gBAAe,GAAM,IAK9B,YACMvF,KAAKuzF,cAAgBvzF,KAAKuzF,aAAa5tF,OAAS,GAClD3F,KAAK28F,aAAa38F,KAAKuzF,aAAa5hD,SAIxC,cAAcwjD,EAA0BvrB,GACtC,GAAI5pE,KAAKmM,SAAS,aAAey9D,GAAW1rE,MAC1C8B,KAAKoP,cAAcw6D,EAAW,CAAEnP,MAAO06B,EAAY16B,MAAOvlD,QAASigF,EAAYzrF,UAAW,OAErF,CACL,IAAIkzF,EAAW7vF,OAAOooF,EAAYzrF,SAClC,GAAIsD,MAAM4vF,GAER,YADA58F,KAAKoP,cAAcw6D,EAAWurB,EAAYzrF,SAG5C1J,KAAKoP,cAAcw6D,EAAW,UAAMizB,cAAcD,EAAU58F,KAAKmM,SAAmB,SAAEjO,OAAOgZ,YAAY,IAI7G,aAAai+E,GAEX,IAAK,IAAI2H,EAAS,EAAGA,GAAU98F,KAAKs8F,YAAaQ,IAC3ChK,EAAU9yF,KAAKmM,SAAS,QAAU2wF,GAAQ5+F,MAAOi3F,EAAY16B,QAAQz6D,KAAK+8F,cAAc5H,EAAa2H,IAI/G,EAAAj6F,UAAUmB,iBAAiB,wBAAyBq4F,I,8EC/VpD,cACA,QACA,OACA,OACA,OACA,OACA,OACA,OACA,QAGMvJ,EAAY,EAAQ,IAE1B,MAAMkK,UAA6B,EAAA9wF,KASjC,cACE3M,QANF,KAAAqsE,OAAS,EACT,KAAAe,SAAW,EACX,KAAAswB,OAAS,EACT,KAAAC,QAAU,EAIRl9F,KAAK+I,MAAQ,EAAA2C,UAAU,kBAAkB,iBAAiB3C,MAC1D/I,KAAKkK,YACH,oBACA,EAAAwB,UAAU,kBAAkB,iBAAiBxB,YAAc,gqBAiB7DlK,KAAKkR,SAAS,SAAU,EAAAnH,KAAKmB,QAC7BlL,KAAK2tC,qBAAqB,SAAU,EAAA5jC,KAAKqB,SAAS,EAAO,iBACzDpL,KAAK2tC,qBAAqB,QAAS,EAAA5jC,KAAKmB,OAAQ,GAAI,6BACpDlL,KAAK2tC,qBAAqB,QAAS,EAAA5jC,KAAKmB,OAAQ,GAAI,sCACpDlL,KAAKuS,UAAU,YAAa,EAAAxI,KAAKqB,SACjCpL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKuB,KAC9BtL,KAAKuS,UAAU,cAAe,EAAAxI,KAAKsB,MACnCrL,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,4BAA6BhM,OAAO,EAAMmE,KAAM,EAAA2H,YAAYoB,UACxHpL,KAAKmM,SAAsB,YAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,gBAAiBhM,OAAO,EAAOmE,KAAM,EAAA2H,YAAYoB,UAClHpL,KAAKmM,SAAsB,YAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,6CAA8ChM,OAAO,EAAOmE,KAAM,EAAA2H,YAAYoB,UAC/IpL,KAAKmM,SAAc,IAAI,EAAAlC,YAAY1L,OAAO,CACxC2L,YAAa,gCACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,OAAQ,EAAGoV,KAAM,MACnB,CAAEpV,MAAO,EAAGoV,KAAM,SAClB,CAAEpV,MAAO,EAAGoV,KAAM,SAClB,CAAEpV,MAAO,EAAGoV,KAAM,WAGtBpV,MAAO,IAET8B,KAAKmM,SAAuB,aAAI,EAAAlC,YAAY1L,OAAO,CACjD2L,YAAa,kBACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYyjC,QAEpBztC,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,wBAAyBhM,OAAO,EAAOmE,KAAM,EAAA2H,YAAYoB,UACrHpL,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,aAAchM,MAAO,UAAWmE,KAAM,EAAA2H,YAAYkB,SAC9GlL,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,cAAehM,MAAO,OAAQmE,KAAM,EAAA2H,YAAYkB,SAC1GlL,KAAKmM,SAAyB,eAAI,EAAAlC,YAAY1L,OAAO,CACnD2L,YAAa,qBACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,YAAahM,MAAO,GAAImE,KAAM,EAAA2H,YAAYkB,SACxGlL,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,WAAYhM,MAAO,GAAImE,KAAM,EAAA2H,YAAYo8E,WACvGpmF,KAAKivC,kBAAkB,CACrBC,OAAQ,CACN,CAAE76B,OAAQ,CAAEg7B,OAAQ,GAAK9zB,KAAM,CAAE8zB,OAAQ,IACzC,CAAE9mB,SAAU,GAAIE,SAAU,KAE5B0mB,WAAY,CACV96B,OAAQtJ,KACGA,EAAgB,OAAE7M,MAE7Bqd,KAAMxQ,KACKA,EAAgB,OAAE7M,MAE7BguE,eAAgBnhE,KACLA,EAAgB,OAAE7M,MAE7BqqB,SAAUxd,KACCA,EAAwB,eAAE7M,MAErCuqB,SAAU1d,KACCA,EAAwB,eAAE7M,SAM3C,UACE8B,KAAKuG,iBAAmB,IACpBvG,KAAKqB,MAAQ,EAAA+S,KAAKC,SACpBrU,KAAKoP,cAAc,GAAG,IACmB,IAArCpP,KAAKmP,aAAanP,KAAK2sE,YACzB3sE,KAAKk1F,kBACLl1F,KAAK89B,YAAc99B,KAAKmM,SAAsB,YAAEjO,MAC5C8B,KAAK89B,aAAa99B,KAAK+xC,UAAU,gDAK3C,kBACE,IAAI,KAAEz2B,EAAI,KAAEC,EAAI,SAAEgN,EAAQ,SAAEE,GAAa,UAAOmD,KAC5CwP,EAAe,GACnB,MAAM+hE,EAAMn9F,KAAKmM,SAAc,IAAEjO,MAIjC,IAHa,IAATi/F,IACF/hE,EAAQ+hE,IAAMA,GAEZn9F,KAAKmM,SAAiB,OAAEjO,MAEW,MAAjC8B,KAAKmM,SAAiB,OAAEjO,OAAkD,IAAjC8B,KAAKmM,SAAiB,OAAEjO,QACnEk9B,EAAQ9f,KAAOtb,KAAKmM,SAAiB,OAAEjO,OACN,MAA/B8B,KAAKmM,SAAe,KAAEjO,OAAgD,IAA/B8B,KAAKmM,SAAe,KAAEjO,QAC/Dk9B,EAAQ7f,KAAOvb,KAAKmM,SAAe,KAAEjO,OACA,MAAnC8B,KAAKmM,SAAmB,SAAEjO,OAAoD,IAAnC8B,KAAKmM,SAAmB,SAAEjO,QACvEk9B,EAAQ7S,SAAWvoB,KAAKmM,SAAmB,SAAEjO,OACR,MAAnC8B,KAAKmM,SAAmB,SAAEjO,OAAoD,IAAnC8B,KAAKmM,SAAmB,SAAEjO,QACvEk9B,EAAQ3S,SAAW,UAAYkS,QAAQ36B,KAAKmM,SAAmB,SAAEjO,YAC9D,CAEL,GAAI,EAAAiS,OAAOmL,GAAO,OAClB,GAAI,EAAAnL,OAAOoL,GAAO,OAClB6f,EAAQ9f,KAAOA,EACf8f,EAAQ7f,KAAOA,GAC+B,IAA1Cvb,KAAKmM,SAAyB,eAAEjO,QAC7B,EAAAiS,OAAOirB,EAAQ7S,YAClB6S,EAAQ7S,SAAWA,GAEhB,EAAApY,OAAOirB,EAAQ3S,YAClB2S,EAAQ3S,SAAW,UAAYkS,QAAQlS,KAI7CzoB,KAAKi1F,uBACLj1F,KAAK8wC,OAASllB,EAAK0a,QAAQlL,GAC3Bp7B,KAAK8wC,OAAOkf,GAAG,UAAW,KACpBhwD,KAAK89B,aAAa99B,KAAK+xC,UAAU,gEAAgE1mC,KAAK6B,UAAUkuB,MACpHp7B,KAAKoP,cAAc,GAAG,GACtB,IAAIzH,EAAO3H,KAAKmP,aAAanP,KAAKi9F,QAC9BxiC,EAAQz6D,KAAKmP,aAAanP,KAAKk9F,SACnC,GAAIv1F,GAAQ8yD,EAAO,CACjB,IAAI/8C,GAAS,EACb,IACE/V,EAAO0D,KAAKuL,MAAMjP,GAClB,SACI3H,KAAK89B,aAAa99B,KAAK+xC,UAAU,6CACrCr0B,GAAS,EAEPA,GAAU/V,EAAK7I,eAAe,iBAAmB6I,EAAK8yD,QAAU,EAAA1wD,KAAKmB,OACrD,IAAdvD,EAAK8yD,QACPz6D,KAAK8wC,OAAO8X,UAAUjhD,EAAK8yD,OACvBz6D,KAAK89B,aAAa99B,KAAK+xC,UAAU,qDAAqDpqC,EAAK8yD,UAI/E,IAAd9yD,EAAK8yD,QACHz6D,KAAK89B,aAAa99B,KAAK+xC,UAAU,2DAA2D0oB,KAChGz6D,KAAK8wC,OAAO8X,UAAU6R,OAK9Bz6D,KAAK8wC,OAAOkf,GAAG,QAAS,KACtBhwD,KAAKoP,cAAc,GAAG,GAAO,KAG/BpP,KAAK8wC,OAAOkf,GAAG,QAASlmD,IACtB9J,KAAK2O,UAAU7E,KAEjB9J,KAAK8wC,OAAOkf,GAAG,UAAW,CAACyK,EAAO/wD,KAChC,IAAIlG,EAAmB,CAAEi3D,MAAOA,EAAO/wD,QAASA,EAAQwN,YACpDlX,KAAK89B,aAAa99B,KAAK+xC,UAAU,sDAAsD1mC,KAAK6B,UAAU1J,MAC1GxD,KAAKq1F,eAAe7xF,KAIxB,uBACMxD,KAAK8wC,QAAQ9wC,KAAK8wC,OAAOwkD,MAG/B,iBAgBE,GAdIt1F,KAAK4G,OAAO5G,KAAK2sE,UAAU9lE,WACY,IAArC7G,KAAKmP,aAAanP,KAAK2sE,WACzB3sE,KAAKk1F,kBACDl1F,KAAK89B,aAAa99B,KAAK+xC,UAAU,gDACS,IAArC/xC,KAAKmP,aAAanP,KAAK2sE,WAChC3sE,KAAKi1F,uBACDj1F,KAAK89B,aAAa99B,KAAK+xC,UAAU,oDAC5B,EAAA5hC,OAAOnQ,KAAKmP,aAAanP,KAAK2sE,aACvC3sE,KAAKm2C,wBACDn2C,KAAK89B,aAAa99B,KAAK+xC,UAAU,gEAKrC/xC,KAAK4G,OAAO5G,KAAK4rE,QAAQ/kE,QAAS,CACpC,IAAI4iE,EAAWzpE,KAAKmP,aAAanP,KAAK4rE,QACjC,EAAAz7D,OAAOs5D,KACVzpE,KAAKxC,KAAOisE,EACZzpE,KAAKosE,0BAWT,GANIpsE,KAAKmP,aAAanP,KAAK2sE,WAAa3sE,KAAK4G,OAAO5G,KAAKk9F,SAASr2F,UAChE7G,KAAKk1F,kBACDl1F,KAAK89B,aAAa99B,KAAK+xC,UAAU,sDAInC/xC,KAAKmP,aAAanP,KAAK2sE,WAAa3sE,KAAK8wC,QAAU9wC,KAAK8wC,OAAOsgB,UAAW,CAC5E,IAAIzpD,EAAO3H,KAAKmP,aAAanP,KAAKi9F,QAClC,GAAIt1F,GAAQ3H,KAAK4G,OAAO5G,KAAKi9F,QAAQp2F,QAAS,CAC5C,IAOI4zD,EAPA/8C,GAAS,EACb,IACE/V,EAAO0D,KAAKuL,MAAMjP,GAClB,SACI3H,KAAK89B,aAAa99B,KAAK+xC,UAAU,6CACrCr0B,GAAS,EAGX,IAAIxI,EAAkB,GACtB,GACEwI,GACA/V,EAAK7I,eAAe,iBACb6I,EAAK8yD,QAAU,EAAA1wD,KAAKmB,QAC3BvD,EAAK7I,eAAe,YAAc6I,EAAK7I,eAAe,UACtD,CAMA,GALI6I,EAAK7I,eAAe,WACtBoW,EAAU7J,KAAK6B,UAAUvF,EAAKuN,SACrBvN,EAAK7I,eAAe,YAC7BoW,EAAU7J,KAAK6B,UAAUvF,EAAKkoC,OAAO3xC,QAErB,IAAdyJ,EAAK8yD,MACP,OAEFz6D,KAAKy8F,QAAQ90F,EAAK8yD,MAAOvlD,OACpB,CAIL,GAHAulD,EAAQz6D,KAAKmP,aAAanP,KAAKk9F,SACnBhoF,EAARwI,EAAkBrS,KAAK6B,UAAUvF,GACtBiW,OAAOjW,GACT,IAAT8yD,EACF,OAEFz6D,KAAKy8F,QAAQhiC,EAAOvlD,MAM5B,QAAQulD,EAAOvlD,GACb,MAAMkoF,EAASp9F,KAAKmM,SAAiB,OAAEjO,MAEvC,GADoB8B,KAAKmM,SAAsB,YAAEjO,MAChC,CACf,IAAI4/D,EAAMzyD,KAAK6B,UAAU,CAAEhP,MAAOgX,IAClClV,KAAK8wC,OAAO2rD,QAAQhiC,EAAO,GAAKqD,EAAK,CAAEs/B,OAAQA,IAC3Cp9F,KAAK89B,aAAa99B,KAAK+xC,UAAU,6DAA6D0oB,WAAeqD,UAEjH99D,KAAK8wC,OAAO2rD,QAAQhiC,EAAO,GAAKvlD,EAAS,CAAEkoF,OAAQA,IAC/Cp9F,KAAK89B,aAAa99B,KAAK+xC,UAAU,mEAAmE0oB,WAAevlD,KAI3H,wBAEMlV,KAAKH,UAAUO,IACjBJ,KAAKH,UAAUO,GAAG2uB,WAAW/uB,KAAKD,GAAIC,KAAKH,UAAUE,GAAI,CACvDivB,KAAM,CAAEpoB,OAAQ5G,KAAK4G,OAAQK,QAASjH,KAAKiH,QAASkF,SAAUnM,KAAKmM,YAGnEnM,KAAKqB,MAAQ,EAAA+S,KAAKC,SACpBrU,KAAKi1F,uBACDj1F,KAAKmP,aAAanP,KAAK2sE,YACzB3sE,KAAKk1F,kBACDl1F,KAAK89B,aAAa99B,KAAK+xC,UAAU,8DAK3C,YACE/xC,KAAKi1F,uBAGP,eAAeE,GAEb,IAAI16B,EAAQz6D,KAAKmP,aAAanP,KAAKk9F,SAC/BpK,EAAUr4B,EAAO06B,EAAY16B,SAC/Bz6D,KAAKoP,cAAc,EAAG+lF,EAAYzrF,SAClC1J,KAAKoP,cAAc,EAAG+lF,KAI5B,EAAAtyF,UAAUmB,iBAAiB,+BAAgCg5F,I,8ECvT3D,aACA,OACA,OACA,OAEA,MAAMK,UAA2B,EAAAnxF,KAC/B,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAU,kBAAkB,wBAAwB3C,MACjE/I,KAAKkK,YACH,oBACA,EAAAwB,UAAU,kBAAkB,wBAAyB,0kBAUvD1L,KAAKkR,SAAS,QAAS,EAAAnH,KAAKmB,QAC5BlL,KAAK2tC,qBAAqB,QAAS,EAAA5jC,KAAKoB,OAAQ,EAAG,SAAS,GAC5DnL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKmB,QAC9BlL,KAAKuS,UAAU,aAAc,EAAAxI,KAAKsB,MAGpC,UACErL,KAAKq1B,iBAGP,iBACE,MAAM/hB,EAAOtT,KAAKmP,aAAa,GACzB+zB,EAAQljC,KAAKmP,aAAa,GAChC,GAAY,MAARmE,GAAyB,MAAT4vB,EAAe,CACjC,MAAMu3B,EAAQnnD,EAAK2J,MAAM,KACzBjd,KAAKoP,cAAc,EAAGqrD,EAAMv3B,IAAQ,GACpCljC,KAAKoP,cAAc,EAAGqrD,GAAO,QAE7Bz6D,KAAKoP,cAAc,EAAG,MAAM,GAC5BpP,KAAKoP,cAAc,EAAG,MAAM,GAIhC,wBACEpP,KAAKq1B,kBAIT,EAAAxyB,UAAUmB,iBAAiB,sCAAuCq5F,I,8ECjDlE,aACA,OACA,OACA,OAEA,MAAMC,UAA6B,EAAA35E,aACjC,cACEpkB,QACAS,KAAKqkB,kBAAoB,EAAAta,KAAKmB,OAC9B3L,MAAM4kB,uBAAyB,SAC/BnkB,KAAK+I,MAAQ,EAAA2C,UAAU,kBAAkB,iBAAiB3C,MAE1D/I,KAAKkK,YAAc,EAAAwB,UAAU,kBAAkB,iBAAiBxB,YAEhElK,KAAKuS,UAAU,SAAU,EAAAxI,KAAKmB,QAC9BlL,KAAKoP,cAAc,EAAG,MAGxB,UACEpP,KAAKsN,KAAOtN,KAAKyN,cACjBzN,KAAKq1B,iBAGP,iBACE,MAAMzuB,EAAS5G,KAAKqR,iBACpB,IAAInK,EAAS,GACb,IAAK,IAAIjK,EAAI+C,KAAKkkB,0BAA2BjnB,EAAI2J,EAAQ3J,IAAK,CAC5D,MAAMiB,GAAS8B,KAAKmP,aAAalS,IAAM,IAAIia,WAC9B,IAAThZ,IACW,IAAVgJ,IAAcA,EAASA,EAAOgvB,OAAO,MACxChvB,EAASA,EAAOgvB,OAAOh4B,IAI3B8B,KAAKoP,cAAc,EAAGlI,GAAQ,GAGhC,wBACE3H,MAAM42C,wBACNn2C,KAAKq1B,kBAIT,EAAAxyB,UAAUmB,iBAAiB,+BAAgCs5F,I,8EC3C3D,aACA,OACA,OACA,OACA,OACA,OACA,SAEMC,EAAa,EAAQ,IAE3B,MAAMC,UAA4B,EAAAtxF,KAKhC,cACE3M,QALF,KAAAk+F,UAAY,CAAC,IAAK,IAAK,IAAK,KAAM,KAAM,KAAM,KAAM,MAAO,MAAO,MAAO,MAAO,OAAQ,MAAQ,OAChG,KAAAC,aAAc,EACd,KAAAniF,KAAO,KAILvb,KAAK+I,MAAQ,EAAA2C,UAAU,kBAAkB,oBAAoB3C,MAC7D/I,KAAKkK,YACH,oBACA,EAAAwB,UAAU,kBAAkB,oBAAoBxB,YAAc,gGAIhElK,KAAKkR,SAAS,aAAc,EAAAnH,KAAKmB,QACjClL,KAAKkR,SAAS,SAAU,EAAAnH,KAAKqB,SAC7BpL,KAAKkR,SAAS,aAAc,EAAAnH,KAAKqB,SAEjCpL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKmB,QAC9BlL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKmB,QAC7BlL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKqB,SAC9BpL,KAAKuS,UAAU,eAAgB,EAAAxI,KAAKmB,QACpClL,KAAKuS,UAAU,eAAgB,EAAAxI,KAAKqB,SACpCpL,KAAKmM,SAAqB,WAAI,EAAAlC,YAAY1L,OAAO,CAC/C2L,YAAa,sBACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,cACbhM,MAAO,eACPmE,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,eAAgBoV,KAAM,0BAC/B,CAAEpV,MAAO,eAAgBoV,KAAM,0BAC/B,CAAEpV,MAAO,eAAgBoV,KAAM,yBAC/B,CAAEpV,MAAO,eAAgBoV,KAAM,yBAC/B,CAAEpV,MAAO,eAAgBoV,KAAM,yBAC/B,CAAEpV,MAAO,eAAgBoV,KAAM,2BAC/B,CAAEpV,MAAO,aAAcoV,KAAM,qCAInCtT,KAAKmM,SAAwB,cAAI,EAAAlC,YAAY1L,OAAO,CAClD2L,YAAa,oBACbhM,MAAO,eACPmE,KAAM,EAAA2H,YAAYkB,SAEpBlL,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,YACbhM,MAAO8B,KAAKy9F,UAAU,GACtBp7F,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAOxQ,KAAKy9F,UAAUl0F,IAAIo0F,IACjB,CAAEz/F,MAAOy/F,EAAUrqF,KAAMqqF,QAItC39F,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,GAAG,GACtBpP,KAAKoP,cAAc,EAAG,MAEtBpP,KAAKivC,kBAAkB,CACrBE,WAAY,CACVyuD,cAAe7yF,GACNA,EAAoB,WAAE7M,MAE/Bqd,KAAMxQ,IACIA,EAAoB,WAAE7M,SAOtC,iBACE,GAAK8B,KAAK09F,aAEH,GAAI19F,KAAK09F,cAAgB19F,KAAKmP,aAAa,GAIhD,OAHAnP,KAAK09F,aAAc,EACnB19F,KAAKw5E,oBACLx5E,KAAK69F,iBAJL79F,KAAK89F,sBAQP99F,KAAK+9F,cAAc/9F,KAAKmP,aAAa,KAER,IAAzBnP,KAAKmP,aAAa,IACpBnP,KAAKg+F,YAIT,wBACEh+F,KAAK89F,sBAGP,YACE99F,KAAK69F,YAGP,sBACE,GAAI79F,KAAKqB,OAAS,EAAA+S,KAAKC,OAAQ,OAK/B,GAHArU,KAAKw5E,eACLx5E,KAAK69F,aAEA79F,KAAKmP,aAAa,GAAI,OAC3B,IAAI8uF,EAAWj+F,KAAKmM,SAAe,KAAEjO,MACrC,MAAMggG,EAAal+F,KAAKmM,SAAqB,WAAEjO,MACzC0/F,EAAgB59F,KAAKmM,SAAwB,cAAEjO,MAEjDggG,IAEAD,EADEC,IAAe,EAAA/tF,OACN8tF,EACKL,GAGpB,IAAID,EAAW39F,KAAKmM,SAAmB,SAAEjO,MAEzC,IAAK+/F,EAGH,OAFAj+F,KAAKsH,SAAS,kCACdtH,KAAKoP,cAAc,EAAG,6BAIxBpP,KAAKub,KAAO,IAAIgiF,EAAWU,EAAU,CAAEN,SAAUA,EAAUQ,UAAU,IAErEn+F,KAAKub,KAAKy0C,GAAG,OAAQ,KACnBhwD,KAAK09F,aAAc,EACnB19F,KAAKoP,cAAc,EAAGpP,KAAK09F,aAC3B19F,KAAK+xC,UAAU,oBAGjB/xC,KAAKub,KAAKy0C,GAAG,QAASr/C,IACpB3Q,KAAKub,KAAO,KACZvb,KAAK09F,aAAc,EACnB19F,KAAKoP,cAAc,EAAGuB,EAAIjH,SAC1B1J,KAAKoP,cAAc,EAAGpP,KAAK09F,aAC3B19F,KAAKsH,SAASqJ,EAAIjH,WAGpB1J,KAAKub,KAAKy0C,GAAG,QAAS,KACpBhwD,KAAK+xC,UAAU/xC,KAAK09F,YAAc,qCAAuC,eACzE19F,KAAK09F,aAAc,EACnB19F,KAAKoP,cAAc,EAAGpP,KAAK09F,eAG7B19F,KAAKub,KAAKy0C,GAAG,aAAc,KACzBhwD,KAAK09F,aAAc,EACnB19F,KAAKoP,cAAc,EAAGpP,KAAK09F,aAC3B19F,KAAK+xC,UAAU,kBAGjB,MAAMqsD,EAAWb,EAAWc,QAAQD,SACrBp+F,KAAKub,KAAK+iF,KAAK,IAAIF,EAAS,CAAEG,UAAW,QACjDvuC,GAAG,OAAQroD,GAAQ3H,KAAKw+F,aAAa72F,IAE5C3H,KAAK+xC,UAAU,iBAAmBksD,EAAW,OAASN,EAAW,OACjE39F,KAAKub,KAAK4mB,OAGJ,eACNniC,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,GAAG,GAGhB,YACN,UAAY4uF,YACTr8F,KAAKsU,IACJjW,KAAKoP,cAAc,EAAG6G,KAEvBwhB,MAAM9mB,IACL3Q,KAAKoP,cAAc,EAAGuB,KAIpB,YACF3Q,KAAKub,MACPvb,KAAKub,KAAK8xD,QAEZrtE,KAAKub,KAAO,KAGN,aAAa5T,GACnB3H,KAAKoP,cAAc,EAAGzH,GACtB3H,KAAKoP,cAAc,EAAGpP,KAAKy+F,0BAGrB,cAAc/0F,GACpB,GAAIA,EAAS,CAKX,IACEA,EAAUoQ,OAAO+E,KAAKxT,KAAKuL,MAAMlN,IACjC,MAAOuM,IAET,IACEjW,KAAKub,KAAKmjF,MAAMh1F,GAChB,MAAOuM,GACPjW,KAAKoP,cAAc,EAAG6G,EAAEvM,YAMhC,EAAA7G,UAAUmB,iBAAiB,kCAAmCw5F,I,8EC3N9D,MAAMD,EAAa,EAAQ,IAE3B,gBAME,mBACE,OAAO,IAAI/7F,QAAoB,CAACC,EAASq2B,KACvC,IACE,IAAI6mE,EAAW,GACfpB,EAAWr5F,OAAOvC,KAAKi9F,IACrBA,EAAMr2F,QAAQgT,IACZojF,EAASx5F,KAAKoW,KAEhB9Z,EAAQk9F,KAEV,MAAOhuF,GACPmnB,EAAOnnB,S,8ECnBf,cACA,OACA,OACA,OACA,OACA,QAEA,MAAMkuF,UAA2B,EAAA3yF,KAG/B,cACE3M,QAHF,KAAAu/F,UAAY,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YAI7E9+F,KAAK+I,MAAQ,EAAA2C,UAAUqzF,SAAS,mBAAmBh2F,MACnD/I,KAAKkK,YAAc,EAAAwB,UAAUqzF,SAAS,mBAAmB70F,YAEzDlK,KAAKuS,UAAU,SAAU,EAAAxI,KAAKqB,SAE9BpL,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAC3C2L,YAAa,kBACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAGpBpL,KAAKmM,SAA6B,mBAAI,EAAAlC,YAAY1L,OAAO,CAEvD2L,YAAa,gBACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYkB,SAGpBlL,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,+BACbhM,MAAOwX,EAAO61D,GAAGyzB,QACjB38F,KAAM,EAAA2H,YAAYkB,SAGpBlL,KAAKmM,SAAoB,UAAI,EAAAlC,YAAY1L,OAAO,CAC9C2L,YAAa,aACbhM,MAAO,EACPmE,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAOxQ,KAAKi/F,uBAGhBj/F,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,GACbhM,MAAO,EACPmE,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAOxQ,KAAKk/F,sBAIhBl/F,KAAKmM,SAAkB,QAAI,EAAAlC,YAAY1L,OAAO,CAC5C2L,YAAa,WACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAOxQ,KAAKi/F,uBAGhBj/F,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAC3C2L,YAAa,GACbhM,MAAO,EACPmE,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAOxQ,KAAKk/F,sBAIhBl/F,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAC3C2L,YAAa,SACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAC3C2L,YAAa,SACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAKmM,SAAkB,QAAI,EAAAlC,YAAY1L,OAAO,CAC5C2L,YAAa,UACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAKmM,SAAoB,UAAI,EAAAlC,YAAY1L,OAAO,CAC9C2L,YAAa,YACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,WACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAC3C2L,YAAa,SACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,WACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAGpBpL,KAAKmM,SAAkB,QAAI,EAAAlC,YAAY1L,OAAO,CAC5C2L,YAAa,mBACbhM,MAAO,EACPmE,KAAM,EAAA2H,YAAYmB,SAGpBnL,KAAKivC,kBAAkB,CACrBC,OAAQ,CACN,CAAEiwD,UAAW,GAAIC,SAAU,IAC3B,CAAEC,QAAS,GAAIC,OAAQ,OAK7B,UACEt/F,KAAKm2C,wBAGP,wBACE,IAAIopD,EAAiB,CAAEC,OAAQ,GAAIC,OAAQ,IAC3C,IAAKz/F,KAAKmM,SAAiB,OAAEjO,MAAO,OAAOqhG,EAC3C,MAAMG,EAAU,UAAU7/C,aACpB8/C,EAAWjqF,EAAO61D,GAAGvrE,KAAKmM,SAAmB,SAAEjO,OAAO0hG,YACtDC,EAAcntF,KAAKgvE,MAAMie,EAAW,IACpCG,EAAaH,EAAW,GAC9B,IAAII,EAAe,EACfC,EAAehgG,KAAKmM,SAAoB,UAAEjO,MAAQ2hG,EAClDG,EAAe,GACjBD,GAAgB,EAChBC,GAA8B,IACrBA,EAAe,KACxBD,EAAe,EACfC,GAA8B,IAEhC,IAAIC,EAAejgG,KAAKmM,SAAmB,SAAEjO,MAAQ4hG,EACjDG,EAAe,EAAGA,GAA8B,GAC3CA,GAAgB,KAAIA,GAA8B,IAC3D,IAAIC,EAAalgG,KAAKmM,SAAkB,QAAEjO,MAAQ2hG,EAC9CK,EAAa,EACfA,GAA0B,GACjBA,EAAa,KACtBA,GAA0B,IAE5B,IAAIC,EAAangG,KAAKmM,SAAiB,OAAEjO,MAAQ4hG,EAC7CK,EAAa,EAAGA,GAA0B,GACrCA,GAAc,KAAIA,GAA0B,IAErD,MAAMC,EAAcpgG,KAAKmM,SAAiB,OAAEjO,QAA0B,GAAjB6hG,EAAqB,EAAI,EACxEM,EAAgBrgG,KAAKmM,SAAmB,SAAEjO,OAAyB,GAAhB6hG,GAAqB,EAAI,EAClF,IAAIO,EAAa,GACjBtgG,KAAKmM,SAAiB,OAAEjO,OAAQoiG,EAAWn7F,KAAKnF,KAAK8+F,UAAUsB,EAAcL,IAC7E//F,KAAKmM,SAAiB,OAAEjO,OAAQoiG,EAAWn7F,KAAKnF,KAAK8+F,UAAU,EAAIiB,IACnE//F,KAAKmM,SAAkB,QAAEjO,OAAQoiG,EAAWn7F,KAAKnF,KAAK8+F,UAAU,EAAIiB,IACpE//F,KAAKmM,SAAoB,UAAEjO,OAAQoiG,EAAWn7F,KAAKnF,KAAK8+F,UAAU,EAAIiB,IACtE//F,KAAKmM,SAAmB,SAAEjO,OAAQoiG,EAAWn7F,KAAKnF,KAAK8+F,UAAU,EAAIiB,IACrE//F,KAAKmM,SAAiB,OAAEjO,OAAQoiG,EAAWn7F,KAAKnF,KAAK8+F,UAAU,EAAIiB,IACnE//F,KAAKmM,SAAmB,SAAEjO,OAAQoiG,EAAWn7F,KAAKnF,KAAK8+F,UAAUuB,EAAgBN,IAEjFR,EAAeC,OAAS,CACtB,CAACE,GAAU,CACTa,OAAQ,UACR/iG,KAAMwC,KAAKmM,SAA6B,mBAAEjO,OAAS,kBACnDiI,MAAO,GAAGyX,OAAOoiF,GAAc1+E,SAAS,EAAG,QAAQ1D,OAAOqiF,GAAc3+E,SAAS,EAAG,OACpFg0E,IAAK,GAAG13E,OAAOsiF,GAAY5+E,SAAS,EAAG,QAAQ1D,OAAOuiF,GAAY7+E,SAAS,EAAG,OAC9EL,KAAMq/E,EACNpiG,MAAO8B,KAAKmM,SAAkB,QAAEjO,MAChC6B,GAAI2/F,IAGR1/F,KAAKoP,cAAc,EAAGmwF,GAGxB,oBAEE,IADA,IAAIiB,EAAa,GACR3jF,EAAI,EAAGA,EAAI,GAAIA,IACtB2jF,EAAWr7F,KAAK,CAAEjH,MAAO2e,EAAGvJ,KAAMsK,OAAOf,GAAGyE,SAAS,EAAG,OAE1D,OAAOk/E,EAGT,mBAEE,IADA,IAAIC,EAAY,GACPpjG,EAAI,EAAGA,EAAI,GAAIA,IACtBojG,EAAUt7F,KAAK,CAAEjH,MAAOb,EAAGiW,KAAMsK,OAAOvgB,GAAGikB,SAAS,EAAG,OAEzD,OAAOm/E,GAIX,EAAA59F,UAAUmB,iBAAiB,2BAA4B66F,I,8ECnMvD,aACA,OACA,OACA,OAEA,MAAM6B,UAA0B,EAAA/8E,aAC9B,cACEpkB,QACAS,KAAK+jB,sBAAuB,EAC5B/jB,KAAKqkB,kBAAoB,EAAAta,KAAKmB,OAC9BlL,KAAK+I,MAAQ,EAAA2C,UAAUqzF,SAAS,kBAAkBh2F,MAClD/I,KAAKkK,YAAc,EAAAwB,UAAUqzF,SAAS,kBAAkB70F,YAExDlK,KAAKuS,UAAU,SAAU,EAAAxI,KAAKqB,SAC9BpL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKmB,QAG/B,UACElL,KAAKm2C,wBAGP,iBAKE,IAJA,IAEIwqD,EACAC,EAHAC,EAAe,GACfC,EAAc,GAGT7jG,EAAI,EAAGA,EAAI+C,KAAKqR,iBAAkBpU,IAEzC,GADA0jG,EAAc3gG,KAAKmP,aAAalS,GAEhC,IAEE,IAAK,IAAI8jG,KADTH,EAAcv1F,KAAKuL,MAAM+pF,IACWnB,OAClCqB,EAAaE,GAAeH,EAAYpB,OAAOuB,GAEjD,IAAK,IAAIC,KAAcJ,EAAYnB,OACjCoB,EAAaG,GAAcJ,EAAYnB,OAAOuB,GAEhDhhG,KAAKoP,cAAc,EAAG,CAAEowF,OAAQqB,EAAcpB,OAAQqB,IACtD,MAAO7qF,GACPjW,KAAKoP,cAAc,EAAG6G,IAK5B,wBACE1W,MAAM42C,wBACNn2C,KAAKq1B,kBAIT,EAAAxyB,UAAUmB,iBAAiB,0BAA2B08F,I,uaCjDtD,cACA,OACA,OACA,OACA,OACA,OACA,OACA,SAOA,MAAaO,UAAwB,EAAA/0F,KAInC,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUqzF,SAAS,oBAAoBh2F,MACpD/I,KAAKkK,YAAc,EAAAwB,UAAUqzF,SAAS,oBAAoB70F,YAE1DlK,KAAK2tC,qBAAqB,SAAU,EAAA5jC,KAAKqB,SAAS,EAAM,UAAU,GAClEpL,KAAKkR,SAAS,YAAa,EAAAnH,KAAKsB,MAChCrL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKqB,SAC9BpL,KAAKuS,UAAU,UAAW,EAAAxI,KAAKqB,SAC/BpL,KAAKuS,UAAU,YAAa,EAAAxI,KAAKmB,QACjClL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKmB,QAChClL,KAAKuS,UAAU,YAAa,EAAAxI,KAAKmB,QACjClL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKmB,QAiB7BlL,KAAKmM,SAA6B,mBAAI,EAAAlC,YAAY1L,OAAO,CAEvD2L,YAAa,gBACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYkB,SAGpBlL,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,+BACbhM,MAAOwX,EAAO61D,GAAGyzB,QACjB38F,KAAM,EAAA2H,YAAYkB,SAGpBlL,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,+CACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYmB,SAGpBnL,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,QACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,eAAgBoV,KAAM,gBAC/B,CAAEpV,MAAO,UAAWoV,KAAM,WAC1B,CAAEpV,MAAO,UAAWoV,KAAM,WAC1B,CAAEpV,MAAO,QAASoV,KAAM,WAG5BpV,MAAO,YAET8B,KAAKivC,kBAAkB,CACrBC,OAAQ,CAAC,CAAEtpC,SAAU,CAAEypC,OAAQ,GAAKhsB,KAAM,OAG5CrjB,KAAKmM,SAA4B,kBAAI,EAAAlC,YAAY1L,OAAO,CACtD2L,YAAa,0BACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,OAAO,EAAOoV,KAAM,yBACtB,CAAEpV,OAAO,EAAMoV,KAAM,kCAGzBpV,OAAO,IAGT8B,KAAKkhG,UAAY,KACjBlhG,KAAKmhG,SAAW,KAChBnhG,KAAKohG,gBAAkB,KACvBphG,KAAKuG,iBAAmB,IAGpB,U,+CACEvG,KAAKk6D,oBACLl6D,KAAKq1B,oBAGP,iB,yCACJ,GAAIr1B,KAAKqB,OAAS,EAAA+S,KAAKC,OAAQ,OAC/B,IAAI1H,EAAQ3M,KAAKmP,aAAa,IAAM,CAAEqwF,OAAQ,GAAIC,OAAQ,UA0DpDz/F,KAAKs1E,UAAU3oE,MAGjB,Y,+CACE3M,KAAKs1E,eAGP,c,yCAE2C,MAA7Ct1E,KAAKmM,SAA6B,mBAAEjO,OACS,IAA7C8B,KAAKmM,SAA6B,mBAAEjO,MAEpC8B,KAAK+I,MAAQ,qBAAqB/I,KAAKmM,SAA6B,mBAAEjO,SACjE8B,KAAK+I,MAAQ,kCACpB/I,KAAKwgC,6BAGD,wB,+CACExgC,KAAKk6D,cACX,IAAIt0D,EAAW5F,KAAKmM,SAAmB,SAAEjO,MACzC0H,EAAW,UAAUmb,YAAYnb,EAAU5F,KAAKmM,SAAe,KAAEjO,OACjE8B,KAAKuG,iBAAmBmM,KAAKC,IAAI/M,EAAU,WACrC5F,KAAKq1B,oBAGC,UAAU1oB,EAAQ,M,yCAC9B3M,KAAKkhG,UAAY,KACjBlhG,KAAKmhG,SAAW,KAChBnhG,KAAKohG,gBAAkB,KAClBz0F,IAAOA,EAAQ3M,KAAKmP,aAAa,IAAM,CAAEqwF,OAAQ,GAAIC,OAAQ,KAKlE,MAAMjhG,EAAMwB,KAAKmM,SAA6B,mBAAEjO,MAEhD,GAAW,MAAPM,GAAuB,KAARA,EAOjB,OANAwB,KAAKoP,cAAc,GAAG,GAAO,GAC7BpP,KAAKoP,cAAc,EAAG,MAAM,GAC5BpP,KAAKoP,cAAc,EAAG,MAAM,GAC5BpP,KAAKoP,cAAc,EAAG,MAAM,GAC5BpP,KAAKoP,cAAc,EAAGsG,EAAO1V,KAAKwG,iBAAiBmP,OAAO,wBAAwB,QAClF3V,KAAKoP,cAAc,EAAG,qDAAqD,GAK7E,IAAIg8D,EAAWprE,KAAKmM,SAAmB,SAAEjO,MACpCwX,EAAO61D,GAAG81B,KAAKj2B,KAClBA,EAAW11D,EAAO61D,GAAGyzB,SAEvB,MAAM34F,EAAMqP,EAAO61D,GAAGH,GAQhByb,EAAY7mF,KAAKmP,aAAa,GACpC,GAAIxC,GAASnO,GAAOqoF,EAAW,CAC7B,IAAIga,GAAe,EACfS,EAAuB,KAC3B,IAAK,IAAIC,KAAS50F,EAAc,OAC1BA,EAAc,OAAE40F,GAAa,OAAM/iG,IACrC8iG,EAAuB,EAAAE,cAAcC,oBAAoB90F,EAAc,OAAE40F,GAAQl7F,GACjFw6F,EAAeS,EAAqBI,gBAAkBb,EACtD7gG,KAAKohG,gBAAkBE,EAAqBpjG,OAAS8B,KAAKohG,gBACrB,MAAjCE,EAAqBH,WACF,MAAjBnhG,KAAKmhG,UAAoBG,EAAqBH,SAASQ,SAAS3hG,KAAKmhG,aACvEnhG,KAAKmhG,SAAWG,EAAqBH,UAGJ,MAAlCG,EAAqBJ,YACA,MAAlBlhG,KAAKkhG,WAAqBI,EAAqBJ,UAAUS,SAAS3hG,KAAKkhG,cACzElhG,KAAKkhG,UAAYI,EAAqBJ,YAM9C,IAAIU,GAAe,EACfC,EAAsB,KAC1B,IAAK,IAAIN,KAAS50F,EAAc,OAC1BA,EAAc,OAAE40F,GAAa,OAAM/iG,IACrCqjG,EAAsB,EAAAL,cAAcM,oBAAoBn1F,EAAc,OAAE40F,GAAQl7F,GAChFu7F,EAAeC,EAAoBH,gBAAkBE,EACrD5hG,KAAKohG,gBAAkBS,EAAoB3jG,OAAS8B,KAAKohG,gBACrB,MAAhCS,EAAoBV,WAClBU,EAAoBV,SAASQ,SAAS3hG,KAAKmhG,WAA8B,MAAjBnhG,KAAKmhG,YAC/DnhG,KAAKmhG,SAAWU,EAAoBV,UAEH,MAAjCU,EAAoBX,YAClBW,EAAoBX,UAAUS,SAAS3hG,KAAKkhG,YAAgC,MAAlBlhG,KAAKkhG,aACjElhG,KAAKkhG,UAAYW,EAAoBX,YAI7C,MAAMh6F,EAAS25F,GAAgBe,EAE/B5hG,KAAKoP,cAAc,EAAGlI,GAAQ,GAC9BlH,KAAKoP,cAAc,EAAGpP,KAAKohG,iBAAiB,GACtB,MAAlBphG,KAAKkhG,UACFlhG,KAAKmM,SAA4B,kBAAEjO,MAEnC8B,KAAKoP,cAAc,EAAGpP,KAAKkhG,UAAUnxD,WAAW,GADnD/vC,KAAKoP,cAAc,EAAGpP,KAAKkhG,UAAU31B,GAAGH,GAAUz1D,UAAU,GAEzD3V,KAAKoP,cAAc,EAAG,MAAM,GAEd,MAAjBpP,KAAKmhG,SACFnhG,KAAKmM,SAA4B,kBAAEjO,MAEnC8B,KAAKoP,cAAc,EAAGpP,KAAKmhG,SAASpxD,WAAW,GADlD/vC,KAAKoP,cAAc,EAAGpP,KAAKmhG,SAAS51B,GAAGH,GAAUz1D,UAAU,GAExD3V,KAAKoP,cAAc,EAAG,MAAM,QAEnCpP,KAAKoP,cAAc,GAAG,GAAO,GAC7BpP,KAAKoP,cAAc,EAAG,MAAM,GAC5BpP,KAAKoP,cAAc,EAAG,MAAM,GAC5BpP,KAAKoP,cAAc,EAAG,MAAM,GAEzBpP,KAAKmM,SAA4B,kBAAEjO,MAOjC8B,KAAKoP,cAAc,EAAGsG,EAAO1V,KAAKwG,iBAAiBupC,WANxD/vC,KAAKoP,cACH,EACAsG,EAAO1V,KAAKwG,iBACT+kE,GAAGH,GACHz1D,UAGP3V,KAAKoP,cAAc,GAAG,OAvR1B,oBA0RA,EAAAvM,UAAUmB,iBAAiB,4BAA6Bi9F,I,qGCzSxD,cACA,OAEA,sBAKE,2BAA2Bc,EAAe//E,GACxC,GAAI+/E,GAAiBpkG,OAAOkB,UAAUC,eAAe1B,KAAK2kG,EAAe,SAAU,CACjF,IAAIjB,GAAc,EACdkB,EAAS,KACTC,EAAU,KACVC,EAAgB,KACpB,IAAK,IAAIjlG,EAAI,EAAGA,EAAI8kG,EAAcI,MAAMx8F,OAAQ1I,IAAK,CACnD,MAAMmlG,EAAQpgF,EAAGtB,QAAQ6qD,GAAG,WACtB82B,EAAc3sF,EAAO61D,GAAGw2B,EAAcI,MAAMllG,GAAGkJ,MAAO,WACtDm8F,EAAY5sF,EAAO61D,GAAGw2B,EAAcI,MAAMllG,GAAGq4F,IAAK,WAIpD8M,EAAMG,QAAQF,IAAgBD,EAAMT,SAASW,IAE/CxB,GAAc,EACViB,GAAiBpkG,OAAOkB,UAAUC,eAAe1B,KAAK2kG,EAAe,WACvEG,EAAgBH,EAAc7jG,QACjB,MAAX+jG,GAAmBK,EAAUX,SAASM,MACxCA,EAAUK,IAEHF,EAAMT,SAASU,IAAgBD,EAAMT,SAASW,MAEzC,MAAVN,GAAkBK,EAAYV,SAASK,MACzCA,EAASK,IAEI,MAAXJ,GAAmBK,EAAUX,SAASM,MACxCA,EAAUK,IAKhB,MAAO,CACLZ,eAAgBZ,EAChBI,UAAWc,EACXb,SAAUc,EACV/jG,MAAOgkG,GAIX,MAAO,CAAER,gBAAgB,EAAOR,UAAW,KAAMC,SAAU,KAAMjjG,MAAO,MAO1E,2BAA2BskG,EAAgBxgF,GACzC,IAAI6+E,GAAe,EACfmB,EAAS,KACTC,EAAU,KACVC,EAAgB,KAEpB,GAAIM,EAAgB,CAGlB,MAAMJ,EAAQpgF,EAAGtB,QAAQ6qD,GAAG,WAI5B,IAAIuzB,EAAY0D,EAAevhF,KAAK1X,IAAIiP,GAC/B,UAAMiqF,UAAUjqF,IAIrBkqF,EAAaF,EAAer8F,MAAM8W,MAAM,KAAK1T,IAAIo5F,GAC5C51F,OAAO41F,IAEZC,EAAWJ,EAAelN,IAAIr4E,MAAM,KAAK1T,IAAIo5F,GACxC51F,OAAO41F,IAGZ5C,EAAe,EACf2C,EAAW,GAAKE,EAAS,KAE3B7C,EAAe,GAIjB,MAAMr9E,EAAO0/E,EAAMzsF,OAAO,cAG1B,IAAIktF,EAAmB/D,EAAUv1F,IAAIiP,GAC5B9C,EAAO61D,GAAG,GAAG7oD,KAAQ8/E,EAAer8F,gBAAiB,WAAW28F,WAAWtqF,IAIhFuqF,EAAiBjE,EAAUv1F,IAAIiP,GAC1B9C,EACJ61D,GAAG,GAAG7oD,KAAQ8/E,EAAelN,cAAe,WAC5CwN,WAAWtqF,EAAMunF,IAOtB,GAAIA,EACF,IAAK,IAAI9iG,EAAI,EAAGA,EAAI8lG,EAAep9F,OAAQ1I,IACzC,GACEmlG,EACG1hF,QACA6R,IAAI,EAAG,SACPovE,SAASoB,EAAe9lG,IAC3B,CAEA8lG,EAAe9lG,GAAGuhF,SAAS,EAAG,SAE9BqkB,EAAiB5lG,GAAGuhF,SAAS,EAAG,SAIhC,MAMN,GACEqkB,EAAiB30C,MAAM/nD,GACdA,EAAMw7F,SAASS,KAExBW,EAAe70C,MAAMonC,GACZA,EAAIqM,SAASS,IAKtBS,EAAiBt5F,IAAIpD,GACZA,EAAMosB,IAAI,EAAG,UAGtBwwE,EAAex5F,IAAI+rF,GACVA,EAAI/iE,IAAI,EAAG,eAQjB,GACHswE,EAAiB30C,MAAM/nD,GACdA,EAAMw7F,SAASS,IAGxB,IAAK,IAAI1wD,EAAI,EAAGA,EAAIqxD,EAAep9F,OAAQ+rC,IACrCqxD,EAAerxD,GAAGiwD,SAASS,KAC7BW,EAAerxD,GAAGnf,IAAI,EAAG,SACzBswE,EAAiBnxD,GAAGnf,IAAI,EAAG,UAMjC,IAAK,IAAI9hB,EAAI,EAAGA,EAAIoyF,EAAiBl9F,OAAQ8K,IAIvCoyF,EAAiBpyF,GAAGkxF,SAASS,IAAUW,EAAetyF,GAAG8xF,QAAQH,IACnEvB,GAAe,EACX2B,GAAkB7kG,OAAOkB,UAAUC,eAAe1B,KAAKolG,EAAgB,WACzEN,EAAgBM,EAAetkG,OACjC+jG,EAAUc,EAAetyF,GACzBuxF,EAASa,EAAiBpyF,GAAG8hB,IAAI,EAAG,UAEpCswE,EAAiBpyF,GAAG8xF,QAAQH,KACjB,MAAVJ,GAAkBa,EAAiBpyF,GAAGkxF,SAASK,MAEhDA,EAASa,EAAiBpyF,IAG1BsyF,EAAetyF,GAAG8xF,QAAQH,KACd,MAAXH,GAAmBc,EAAetyF,GAAGkxF,SAASM,MAE/CA,EAAUc,EAAetyF,IAQ/B,MAAO,CACLixF,eAAgBb,EAChBK,UAAWc,EACXb,SAAUc,EACV/jG,MAAOgkG,M,8ECnMb,aACA,OACA,OACA,QACA,OAEA,MAAMc,UAAsB,UAC1B,cACEzjG,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUu3F,WAAW,eAAel6F,MACjD/I,KAAKkK,YAAc,EAAAwB,UAAUu3F,WAAW,eAAe/4F,YACvDlK,KAAKuS,UAAU,MAAO,EAAAxI,KAAKoB,QAC3BnL,KAAKuS,UAAU,MAAO,EAAAxI,KAAKoB,QAC3BnL,KAAKuS,UAAU,MAAO,EAAAxI,KAAKoB,QAG7B,iBACE,MAAMxD,EAAO3H,KAAKkjG,mCACZ9oF,EAAM1H,KAAK0H,IAAIrS,MAAM2K,KAAM/K,GAC3BgL,EAAMD,KAAKC,IAAI5K,MAAM2K,KAAM/K,GAC3Bod,EAAQpd,EAAKhC,OAEbiuC,EADM,UAAMr5B,IAAI5S,GACJod,EAElB/kB,KAAKoP,cAAc,EAAGgL,GACtBpa,KAAKoP,cAAc,EAAGuD,GACtB3S,KAAKoP,cAAc,EAAGwkC,GAGxB,wBACEr0C,MAAM42C,wBACNn2C,KAAKq1B,kBAIT,EAAAxyB,UAAUmB,iBAAiB,yBAA0Bg/F,I,8ECnCrD,aACA,OACA,OACA,QACA,OAEA,MAAMG,UAAgB,UACpB,cACE5jG,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUu3F,WAAWrvD,IAAI7qC,MACtC/I,KAAKkK,YAAc,EAAAwB,UAAUu3F,WAAWrvD,IAAI1pC,YAC5ClK,KAAKuS,UAAU,MAAO,EAAAxI,KAAKoB,QAC3BnL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKmB,QAC7BlL,KAAKuS,UAAU,MAAO,EAAAxI,KAAKmB,QAG7B,iBACE,MAAMvD,EAAO3H,KAAKkjG,mCACZn+E,EAAQpd,EAAKhC,OACb4U,EAAM,UAAMA,IAAI5S,GACtB,IAAIisC,EAAM,EACI,IAAV7uB,IACF6uB,EAAMr5B,EAAMwK,GAGd/kB,KAAKoP,cAAc,EAAGwkC,GACtB5zC,KAAKoP,cAAc,EAAG2V,GACtB/kB,KAAKoP,cAAc,EAAGmL,GAGxB,wBACEhb,MAAM42C,wBACNn2C,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,iBAAkBm/F,I,8ECnC7C,aACA,OACA,OACA,QACA,OAEA,MAAMC,UAAgB,UACpB,cACE7jG,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUu3F,WAAW7oF,IAAIrR,MACtC/I,KAAKkK,YAAc,EAAAwB,UAAUu3F,WAAW7oF,IAAIlQ,YAC5ClK,KAAKuS,UAAU,MAAO,EAAAxI,KAAKoB,QAG7B,iBACE,MAAMxD,EAAO3H,KAAKkjG,mCACZ9oF,EAAM,UAAMF,KAAKE,IAAIzS,GAC3B3H,KAAKoP,cAAc,EAAGgL,GAGxB,wBACE7a,MAAM42C,wBACNn2C,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,iBAAkBo/F,I,8ECzB7C,aACA,OACA,OACA,QACA,OAEA,MAAMC,UAAgB,UACpB,cACE9jG,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUu3F,WAAWtwF,IAAI5J,MACtC/I,KAAKkK,YAAc,EAAAwB,UAAUu3F,WAAWtwF,IAAIzI,YAC5ClK,KAAKuS,UAAU,MAAO,EAAAxI,KAAKoB,QAG7B,iBACE,MAAMxD,EAAO3H,KAAKkjG,mCACZvwF,EAAM,UAAMuH,KAAKvH,IAAIhL,GAC3B3H,KAAKoP,cAAc,EAAGuD,GAGxB,wBACEpT,MAAM42C,wBACNn2C,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,iBAAkBq/F,I,8ECzB7C,aACA,OACA,OACA,QACA,OAEA,MAAMC,UAAgB,UACpB,cACE/jG,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUu3F,WAAW1oF,IAAIxR,MACtC/I,KAAKkK,YAAc,EAAAwB,UAAUu3F,WAAW1oF,IAAIrQ,YAC5ClK,KAAKuS,UAAU,MAAO,EAAAxI,KAAKoB,QAG7B,iBACE,MAAMxD,EAAO3H,KAAKkjG,mCACZ3oF,EAAM,UAAML,KAAKK,IAAI5S,GAC3B3H,KAAKoP,cAAc,EAAGmL,GAGxB,wBACEhb,MAAM42C,wBACNn2C,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,iBAAkBs/F,I,8ECzB7C,aACA,OACA,OACA,QACA,OAEA,MAAMC,UAAmB,UACvB,cACEhkG,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUu3F,WAAWvoF,OAAO3R,MACzC/I,KAAKkK,YAAc,EAAAwB,UAAUu3F,WAAWvoF,OAAOxQ,YAC/ClK,KAAKuS,UAAU,SAAU,EAAAxI,KAAKoB,QAGhC,iBACE,MAAMxD,EAAO3H,KAAKkjG,mCACZxoF,EAAS,UAAMR,KAAKQ,OAAO/S,GACjC3H,KAAKoP,cAAc,EAAGsL,GAGxB,wBACEnb,MAAM42C,wBACNn2C,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,oBAAqBu/F,I,8ECzBhD,aACA,OACA,OACA,QACA,OAEA,MAAMC,UAAkB,UACtB,cACEjkG,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUu3F,WAAW5oF,MAAMtR,MACxC/I,KAAKkK,YAAc,EAAAwB,UAAUu3F,WAAW5oF,MAAMnQ,YAC9ClK,KAAKuS,UAAU,QAAS,EAAAxI,KAAKoB,QAG/B,iBACE,MAAMxD,EAAO3H,KAAKkjG,mCACZ7oF,EAAQ,UAAMH,KAAKG,MAAM1S,GAC/B3H,KAAKoP,cAAc,EAAGiL,GAGxB,wBACE9a,MAAM42C,wBACNn2C,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,mBAAoBw/F,I,8ECzB/C,aACA,OACA,OACA,OAEA,MAAMC,UAAiB,EAAA9/E,aACrB,cACEpkB,QACAS,KAAK8jB,qBAAsB,EAC3B9jB,KAAK+jB,sBAAuB,EAC5B/jB,KAAKqkB,kBAAoB,EAAAta,KAAKoB,OAC9B5L,MAAM+kB,mBAAqB,EAAAva,KAAKoB,OAChCnL,KAAK2kB,qBAAuB,EAC5B3kB,KAAK4kB,sBAAwB,EAC7B5kB,KAAK+I,MAAQ,EAAA2C,UAAUu3F,WAAWS,KAAK36F,MACvC/I,KAAKkK,YAAc,EAAAwB,UAAUu3F,WAAWS,KAAKx5F,YAC7ClK,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,oBACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,MAAOoV,KAAM,gBACtB,CAAEpV,MAAO,SAAUoV,KAAM,iBAG7BpV,MAAO,QAIX,UACE8B,KAAKk6D,cACLl6D,KAAKq1B,iBAGP,iBACE,IAAI1tB,EAAO3H,KAAKm2D,wBAChBxuD,EAAOA,EAAKqB,KAAK,CAACC,EAAGC,IAAMD,EAAIC,GAC/B,MAAMy6F,EAAc3jG,KAAKsS,kBACzB,GAAoC,WAAhCtS,KAAKmM,SAAe,KAAEjO,MACxB,IAAK,IAAIjB,EAAI,EAAGA,EAAI0mG,EAAa1mG,IAC/B+C,KAAKoP,cAAcnS,EAAG0K,EAAK1K,SAG7B,IAAK,IAAIA,EAAI,EAAGA,EAAI0mG,EAAa1mG,IAC/B+C,KAAKoP,cAAcnS,EAAG0K,EAAKA,EAAKhC,QAAU1I,EAAI,KAKpD,wBACM8P,OAAO/M,KAAKmM,SAAkB,QAAEjO,OAAS6O,OAAO/M,KAAKmM,SAAiB,OAAEjO,SAC1E8B,KAAKmM,SAAkB,QAAEjO,MAAQ6O,OAAO/M,KAAKmM,SAAiB,OAAEjO,QAElEqB,MAAM42C,wBACNn2C,KAAKq1B,iBACLr1B,KAAKk6D,cAGC,cAC8B,QAAhCl6D,KAAKmM,SAAe,KAAEjO,MAAiB8B,KAAK+I,MAAQ,iBACf,WAAhC/I,KAAKmM,SAAe,KAAEjO,QAAoB8B,KAAK+I,MAAQ,kBAGpE,EAAAlG,UAAUmB,iBAAiB,kBAAmBy/F,I,8EC/D9C,aACA,OACA,OACA,QACA,OAEA,MAAMG,UAAuB,UAC3B,cACErkG,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUu3F,WAAW,aAAal6F,MAC/C/I,KAAKkK,YAAc,EAAAwB,UAAUu3F,WAAW,aAAa/4F,YACrDlK,KAAKuS,UAAU,MAAO,EAAAxI,KAAKoB,QAC3BnL,KAAKuS,UAAU,MAAO,EAAAxI,KAAKoB,QAC3BnL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKoB,QAC7BnL,KAAKuS,UAAU,MAAO,EAAAxI,KAAKoB,QAC3BnL,KAAKuS,UAAU,OAAQ,EAAAxI,KAAKoB,QAC5BnL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKoB,QAC9BnL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKoB,QAC7BnL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKoB,QAChCnL,KAAKuS,UAAU,oBAAqB,EAAAxI,KAAKoB,QACzCnL,KAAKuS,UAAU,wBAAyB,EAAAxI,KAAKoB,QAC7CnL,KAAKuS,UAAU,UAAW,EAAAxI,KAAKoB,QAGjC,iBACE,MAAMlC,EAAIjJ,KAAKkjG,mCACfljG,KAAKoP,cAAc,EAAG,UAAM8K,KAAKvH,IAAI1J,IACrCjJ,KAAKoP,cAAc,EAAG,UAAM8K,KAAKE,IAAInR,IACrCjJ,KAAKoP,cAAc,EAAG,UAAM8K,KAAKG,MAAMpR,IACvCjJ,KAAKoP,cAAc,EAAG,UAAM8K,KAAKK,IAAItR,IACrCjJ,KAAKoP,cAAc,EAAG,UAAM8K,KAAKO,KAAKxR,IACtCjJ,KAAKoP,cAAc,EAAG,UAAM8K,KAAKQ,OAAOzR,IACxCjJ,KAAKoP,cAAc,EAAG,UAAM8K,KAAKU,MAAM3R,IACvCjJ,KAAKoP,cAAc,EAAG,UAAM8K,KAAKa,SAAS9R,IAC1CjJ,KAAKoP,cAAc,EAAG,UAAM8K,KAAKc,kBAAkB/R,IACnDjJ,KAAKoP,cAAc,EAAG,UAAM8K,KAAKgB,sBAAsBjS,IACvDjJ,KAAKoP,cAAc,GAAI,UAAM8K,KAAKkB,QAAQnS,IAG5C,wBACE1J,MAAM42C,wBACNn2C,KAAKq1B,kBAIT,EAAAxyB,UAAUmB,iBAAiB,uBAAwB4/F,I,8EC7CnD,aACA,OACA,OACA,OAEA,MAAMC,UAA2B,EAAA33F,KAI/B,cACE3M,QAJF,KAAAkT,OAAS,GAKPzS,KAAK+I,MAAQ,EAAA2C,UAAUo4F,QAAQ,kBAAkB/6F,MACjD/I,KAAKkK,YACH,oBACA,EAAAwB,UAAUo4F,QAAQ,kBAAkB55F,YAAc,yOAGpDlK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKoB,QAC5BnL,KAAKkR,SAAS,QAAS,EAAAnH,KAAKqB,SAC5BpL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKoB,QAC9BnL,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,gBACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAK+4D,WAAY,EAGnB,iBACE,MAAMtB,EAAQz3D,KAAKmP,aAAa,GAChC,IAAID,EAAMlP,KAAKmP,aAAa,GAC5B,MAAM40F,EAAc/jG,KAAKmM,SAAe,KAAEjO,MAC1C,GAAIu5D,IAAUz3D,KAAK+4D,UAUjB,YATIgrC,GACF/jG,KAAKoP,cAAc,EAAG,MACtBpP,KAAKyS,OAAS,GACdzS,KAAK+4D,UAAYtB,IAEjBz3D,KAAKyS,OAAS,GACdzS,KAAKoP,cAAc,EAAGpP,KAAK4zC,KAC3B5zC,KAAK+4D,UAAYtB,IAGd,IAAKA,GAASz3D,KAAK+4D,UAExB,YADA/4D,KAAK+4D,UAAYtB,GAGnB,GAAW,MAAPvoD,EAAa,OACjBlP,KAAKyS,OAAOtN,KAAK+J,GACjB,IAGI0kC,EAHM5zC,KAAKyS,OAAOgJ,QAAO,SAAUxS,EAAGC,GACxC,OAAOD,EAAIC,KAEGlJ,KAAKyS,OAAO9M,OAC5B3F,KAAK4zC,IAAMA,EACX5zC,KAAKoP,cAAc,EAAGpP,KAAK4zC,MAG/B,EAAA/wC,UAAUmB,iBAAiB,yBAA0B6/F,I,8ECzDrD,aACA,OACA,OACA,OAEA,MAAMG,UAA2B,EAAA93F,KAG/B,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUo4F,QAAQ,kBAAkB/6F,MACjD/I,KAAKkK,YAAc,EAAAwB,UAAUo4F,QAAQ,kBAAkB55F,YACvDlK,KAAKkK,YACH,oBACA,EAAAwB,UAAUo4F,QAAQ,kBAAkB55F,YAAc,yOAIpDlK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKoB,QAC5BnL,KAAKkR,SAAS,QAAS,EAAAnH,KAAKqB,SAC5BpL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKoB,QAC9BnL,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,gBACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAK+4D,WAAY,EACjB/4D,KAAKkP,IAAM,KAGb,iBACE,MAAMuoD,EAAQz3D,KAAKmP,aAAa,GAC1B40F,EAAc/jG,KAAKmM,SAAe,KAAEjO,MAC1C,GAAIu5D,IAAUz3D,KAAK+4D,UAUjB,YATIgrC,GACF/jG,KAAKoP,cAAc,EAAG,MACtBpP,KAAKkP,IAAM,KACXlP,KAAK+4D,UAAYtB,IAEjBz3D,KAAKoP,cAAc,EAAGpP,KAAKkP,KAC3BlP,KAAKkP,IAAM,KACXlP,KAAK+4D,UAAYtB,IAGd,IAAKA,GAASz3D,KAAK+4D,UAExB,YADA/4D,KAAK+4D,UAAYtB,GAInB,IAAIktB,EAAW3kF,KAAKmP,aAAa,GACjB,MAAZw1E,IAEY,MAAZ3kF,KAAKkP,KAAelP,KAAKkP,IAAMy1E,KACjC3kF,KAAKkP,IAAMy1E,EACX3kF,KAAKoP,cAAc,EAAGpP,KAAKkP,OAIjC,EAAArM,UAAUmB,iBAAiB,yBAA0BggG,I,8EC1DrD,aACA,OACA,OACA,OAEA,MAAMC,UAA0B,EAAA/3F,KAI9B,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUo4F,QAAQlzF,MAAM7H,MACrC/I,KAAKkK,YACH,oBACA,EAAAwB,UAAUo4F,QAAQlzF,MAAM1G,YAAc,yOAIxClK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKoB,QAC5BnL,KAAKkR,SAAS,QAAS,EAAAnH,KAAKqB,SAC5BpL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKoB,QAC9BnL,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,gBACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAKkP,IAAM,KACXlP,KAAK+4D,WAAY,EAGnB,iBACE,MAAMtB,EAAQz3D,KAAKmP,aAAa,GAC1B40F,EAAc/jG,KAAKmM,SAAe,KAAEjO,MAC1C,GAAIu5D,IAAUz3D,KAAK+4D,UAUjB,YATIgrC,GACF/jG,KAAKoP,cAAc,EAAG,MACtBpP,KAAKkP,IAAM,KACXlP,KAAK+4D,UAAYtB,IAEjBz3D,KAAKoP,cAAc,EAAGpP,KAAKkP,KAC3BlP,KAAKkP,IAAM,KACXlP,KAAK+4D,UAAYtB,IAGd,IAAKA,GAASz3D,KAAK+4D,UAExB,YADA/4D,KAAK+4D,UAAYtB,GAInB,IAAIktB,EAAW3kF,KAAKmP,aAAa,GACjB,MAAZw1E,IAEY,MAAZ3kF,KAAKkP,KAAelP,KAAKkP,IAAMy1E,KACjC3kF,KAAKkP,IAAMy1E,EACX3kF,KAAKoP,cAAc,EAAGpP,KAAKkP,OAIjC,EAAArM,UAAUmB,iBAAiB,wBAAyBigG,I,8EC1DpD,aACA,OACA,OACA,OAEA,MAAMC,UAAuB,EAAAh4F,KAG3B,cACE3M,QAHF,KAAA2P,IAAM,EAIJlP,KAAK+I,MAAQ,EAAA2C,UAAUo4F,QAAQ,cAAc/6F,MAC7C/I,KAAKkK,YACH,oBACA,EAAAwB,UAAUo4F,QAAQ,cAAc55F,YAAc,yOAGhDlK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKoB,QAC5BnL,KAAKkR,SAAS,QAAS,EAAAnH,KAAKqB,SAC5BpL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKoB,QAC9BnL,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,gBACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAK+4D,WAAY,EAGnB,iBACE,MAAMtB,EAAQz3D,KAAKmP,aAAa,GAC1B40F,EAAc/jG,KAAKmM,SAAe,KAAEjO,OACtCu5D,GAAUz3D,KAAK+4D,UAWPtB,IAASz3D,KAAK+4D,WAItB/4D,KAAK4G,OAAO,GAAGC,SAAkC,MAAvB7G,KAAK4G,OAAO,GAAGe,OAAc3H,KAAKkP,KAAOlP,KAAK4G,OAAO,GAAGe,MACtF3H,KAAKoP,cAAc,EAAGpP,KAAKkP,KAAK,IAJ9BlP,KAAK+4D,UAAYtB,EAXbssC,GACF/jG,KAAKoP,cAAc,EAAG,MACtBpP,KAAKkP,IAAM,KACXlP,KAAK+4D,UAAYtB,IAEjBz3D,KAAKoP,cAAc,EAAGpP,KAAKkP,KAC3BlP,KAAKkP,IAAM,EACXlP,KAAK+4D,UAAYtB,IAWzB,EAAA50D,UAAUmB,iBAAiB,qBAAsBkgG,I,8ECjDjD,aACA,OACA,OACA,OACA,OAEA,MAAMC,UAAwB,EAAAxgF,aAI5B,cACEpkB,QACAS,KAAK+jB,sBAAuB,EAC5B/jB,KAAKqkB,kBAAoB,EAAAta,KAAKuB,IAC9BtL,KAAK+I,MAAQ,EAAA2C,UAAUo4F,QAAQ,gBAAgB/6F,MAC/C/I,KAAKkK,YAAc,EAAAwB,UAAUo4F,QAAQ,gBAAgB55F,YACrDlK,KAAKuS,UAAU,SAAU,EAAAxI,KAAKuB,KAGhC,UACEtL,KAAKq1B,iBACLr1B,KAAKsN,KAAOtN,KAAKyN,cAGnB,iBACE,MAAM7G,EAAS5G,KAAKqR,iBACpB,IAAK,IAAIpU,EAAI+C,KAAKkkB,0BAA2BjnB,EAAI2J,EAAQ3J,IAAK,CAC5D,IAAI++D,EAAah8D,KAAKmP,aAAalS,GACnC,GAAI,UAAM22B,SAASooC,IACbh8D,KAAK4G,OAAO3J,GAAG4J,QAEjB,YADA7G,KAAKoP,cAAc,EAAGpP,KAAK4G,OAAO3J,GAAG0K,OAO7C,wBACEpI,MAAM42C,wBACNn2C,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,uBAAwBmgG,I,8EC1CnD,aACA,OACA,OACA,OAEA,MAAMC,UAAiB,EAAAl4F,KACrB,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUo4F,QAAQO,KAAKt7F,MACpC/I,KAAKkK,YAAc,EAAAwB,UAAUo4F,QAAQO,KAAKn6F,YAC1ClK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKmB,QAC5BlL,KAAKkR,SAAS,OAAQ,EAAAnH,KAAKqB,SAC3BpL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKmB,QAC9BlL,KAAKmM,SAAS,aAAe,EAAAlC,YAAY1L,OAAO,CAC9C2L,YAAa,wBACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAItB,iBACYpL,KAAKmP,aAAa,GAEnBnP,KAAKoP,cAAc,EAAGpP,KAAKmP,aAAa,IACxCnP,KAAKmM,SAAS,aAAajO,OAAiC,MAAxB8B,KAAKiH,QAAQ,GAAGU,MAC3D3H,KAAKoP,cAAc,EAAG,MAG1B,wBACEpP,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,eAAgBogG,I,8EChC3C,aACA,OACA,OACA,OAEA,MAAME,UAAkB,EAAAp4F,KAItB,cACE3M,QAJF,KAAAoI,KAAO,GAKL3H,KAAK+I,MAAQ,EAAA2C,UAAUo4F,QAAQlzF,MAAM7H,MACrC/I,KAAKkK,YAAc,EAAAwB,UAAUo4F,QAAQlzF,MAAM1G,YAC3ClK,KAAKkR,SAAS,SACdlR,KAAKkR,SAAS,UAAW,EAAAnH,KAAKqB,SAC9BpL,KAAKkR,SAAS,QAAS,EAAAnH,KAAKqB,SAC5BpL,KAAKuS,UAAU,UACfvS,KAAKuS,UAAU,QAAS,EAAAxI,KAAKoB,QAC7BnL,KAAK+4D,WAAY,EAGnB,iBACE,MAAMtB,EAAQz3D,KAAKmP,aAAa,GAChC,GAAIsoD,IAAUz3D,KAAK+4D,UAKjB,OAJA/4D,KAAK2H,KAAO,GACZ3H,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,QACtBpP,KAAK+4D,UAAYtB,GAEZ,GAAKA,IAASz3D,KAAK+4D,WAU1B,GALI/4D,KAAK4G,OAAO,GAAGC,SAAkC,MAAvB7G,KAAK4G,OAAO,GAAGe,OAC3C3H,KAAK2H,KAAKxC,KAAKnF,KAAK4G,OAAO,GAAGe,MAC9B3H,KAAKoP,cAAc,EAAGpP,KAAK2H,KAAKhC,SAG9B3F,KAAK4G,OAAO,GAAGC,SAAkC,GAAvB7G,KAAK4G,OAAO,GAAGe,KAAc,CACzD,IAAIuH,EAAMlP,KAAK2H,KAAKhC,OAAS,EAAI3F,KAAK2H,KAAKwvC,MAAQ,KACnDn3C,KAAKoP,cAAc,EAAGF,GACtBlP,KAAKoP,cAAc,EAAGpP,KAAK2H,KAAKhC,cAZhC3F,KAAK+4D,UAAYtB,GAgBvB,EAAA50D,UAAUmB,iBAAiB,gBAAiBsgG,I,8EC9C5C,aACA,OACA,OACA,OAEA,MAAMC,UAAkB,EAAAr4F,KAItB,cACE3M,QAJF,KAAAoI,KAAO,GAKL3H,KAAK+I,MAAQ,EAAA2C,UAAUo4F,QAAQU,MAAMz7F,MACrC/I,KAAKkK,YAAc,EAAAwB,UAAUo4F,QAAQU,MAAMt6F,YAC3ClK,KAAKkR,SAAS,SACdlR,KAAKkR,SAAS,UAAW,EAAAnH,KAAKqB,SAC9BpL,KAAKkR,SAAS,QAAS,EAAAnH,KAAKqB,SAC5BpL,KAAKuS,UAAU,UACfvS,KAAKuS,UAAU,QAAS,EAAAxI,KAAKoB,QAC7BnL,KAAK+4D,WAAY,EAGnB,iBACE,MAAMtB,EAAQz3D,KAAKmP,aAAa,GAChC,GAAIsoD,IAAUz3D,KAAK+4D,UAKjB,OAJA/4D,KAAK2H,KAAO,GACZ3H,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,QACtBpP,KAAK+4D,UAAYtB,GAEZ,GAAKA,IAASz3D,KAAK+4D,WAU1B,GALI/4D,KAAK4G,OAAO,GAAGC,SAAkC,MAAvB7G,KAAK4G,OAAO,GAAGe,OAC3C3H,KAAK2H,KAAKs/D,QAAQjnE,KAAK4G,OAAO,GAAGe,MACjC3H,KAAKoP,cAAc,EAAGpP,KAAK2H,KAAKhC,SAG9B3F,KAAK4G,OAAO,GAAGC,SAAkC,GAAvB7G,KAAK4G,OAAO,GAAGe,KAAc,CACzD,IAAIuH,EAAMlP,KAAK2H,KAAKhC,OAAS,EAAI3F,KAAK2H,KAAKwvC,MAAQ,KACnDn3C,KAAKoP,cAAc,EAAGF,GACtBlP,KAAKoP,cAAc,EAAGpP,KAAK2H,KAAKhC,cAZhC3F,KAAK+4D,UAAYtB,GAgBvB,EAAA50D,UAAUmB,iBAAiB,gBAAiBugG,I,8EC9C5C,aACA,OACA,OACA,OACA,OAEA,MAAME,UAAkB,EAAAv4F,KAGtB,cACE3M,QAHF,KAAAmlG,cAAgB,GAId1kG,KAAK+I,MAAQ,EAAA2C,UAAUo4F,QAAQ,gBAAgB/6F,MAC/C/I,KAAKkK,YAAc,EAAAwB,UAAUo4F,QAAQ,gBAAgB55F,YACrDlK,KAAKkR,SAAS,SACdlR,KAAK2tC,qBAAqB,QAAS,EAAA5jC,KAAKoB,OAAQ,IAAM,kBAAkB,GACxEnL,KAAKuS,UAAU,UAEfvS,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,QACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,eAAgBoV,KAAM,gBAC/B,CAAEpV,MAAO,UAAWoV,KAAM,WAC1B,CAAEpV,MAAO,UAAWoV,KAAM,WAC1B,CAAEpV,MAAO,QAASoV,KAAM,WAG5BpV,MAAO,YAET8B,KAAKivC,kBAAkB,CACrBC,OAAQ,CAAC,CAAEyoB,MAAO,CAAEtoB,OAAQ,GAAKhsB,KAAM,OAI3C,UACErjB,KAAK4G,OAAO,GAAS,KAAI,YAAY5G,KAAKmM,SAAe,KAAEjO,SAG7D,wBACE8B,KAAK4G,OAAO,GAAS,KAAI,YAAY5G,KAAKmM,SAAe,KAAEjO,SAG7D,iBACM8B,KAAK4G,OAAO,GAAGC,SACjB7G,KAAK0kG,cAAcv/F,KAAK,CACtB+J,IAAKlP,KAAK4G,OAAO,GAAGe,KACpB0b,KAAM/c,KAAKD,QAIjB,YACE,GAAiC,GAA7BrG,KAAK0kG,cAAc/+F,OAAa,OACpC,IAAIgyD,EAAQ33D,KAAKmP,aAAa,GAC9BwoD,EAAQ,UAAU52C,YAAY42C,EAAO33D,KAAKmM,SAAe,KAAEjO,OAC3D,MAAMgR,EAAMlP,KAAK0kG,cAAc,GAC/B,OAAIp+F,KAAKD,MAAQ6I,EAAImU,MAAQs0C,GAC3B33D,KAAK0kG,cAAc/yD,aACnB3xC,KAAKoP,cAAc,EAAGF,EAAIA,WAF5B,GAOJ,EAAArM,UAAUmB,iBAAiB,uBAAwBygG,I,8EC/DnD,aACA,OACA,OACA,OAEA,MAAME,UAAuB,EAAAz4F,KAI3B,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUo4F,QAAQ,sBAAsB/6F,MACrD/I,KAAKkK,YAAc,EAAAwB,UAAUo4F,QAAQ,sBAAsB55F,YAC3DlK,KAAKkR,SAAS,SACdlR,KAAKkR,SAAS,QAAS,EAAAnH,KAAKqB,SAC5BpL,KAAKuS,UAAU,KAAM,EAAAxI,KAAKoB,QAC1BnL,KAAK+4D,WAAY,EAGnB,iBACE,MAAMtB,EAAQz3D,KAAKmP,aAAa,GAChC,GAAIsoD,IAAUz3D,KAAK+4D,UAIjB,OAHA/4D,KAAKggE,SAAW,KAChBhgE,KAAKoP,cAAc,EAAG,WACtBpP,KAAK+4D,UAAYtB,GAEZ,GAAKA,IAASz3D,KAAK+4D,WAK1B,GAAI/4D,KAAK4G,OAAO,GAAGC,SAAkC,MAAvB7G,KAAK4G,OAAO,GAAGe,KAAc,CACzD,GAAqB,MAAjB3H,KAAKggE,SAAkB,CACzB,IAAIrI,EAAQrxD,KAAKD,MAAQrG,KAAKggE,SAC9BhgE,KAAKoP,cAAc,EAAGuoD,GAGxB33D,KAAKggE,SAAW15D,KAAKD,YAVrBrG,KAAK+4D,UAAYtB,GAcvB,EAAA50D,UAAUmB,iBAAiB,6BAA8B2gG,I,8ECzCzD,aACA,OACA,OACA,OAEA,MAAMC,UAA+B,EAAA14F,KAKnC,cACE3M,QALF,KAAAwlB,MAAQ,EACR,KAAA8/E,SAAW,EAKT7kG,KAAK+I,MAAQ,EAAA2C,UAAUo4F,QAAQ,mBAAmB/6F,MAClD/I,KAAKkK,YAAc,EAAAwB,UAAUo4F,QAAQ,mBAAmB55F,YACxDlK,KAAKkR,SAAS,SACdlR,KAAKkR,SAAS,QAAS,EAAAnH,KAAKqB,SAC5BpL,KAAKuS,UAAU,aAAc,EAAAxI,KAAKoB,YAAQ0E,EAAW,CAAElI,KAAM,IAC7D3H,KAAK+4D,WAAY,EAEjB/yD,YAAY,KACNhG,KAAK+kB,OAAS/kB,KAAK6kG,UACrB7kG,KAAKoP,cAAc,EAAGpP,KAAK+kB,OAE7B/kB,KAAK6kG,SAAW7kG,KAAK+kB,MACrB/kB,KAAK+kB,MAAQ,GACZ,KAGL,iBACE,MAAM0yC,EAAQz3D,KAAKmP,aAAa,GAChC,GAAIsoD,IAAUz3D,KAAK+4D,UAKjB,OAJA/4D,KAAK+kB,MAAQ,EACb/kB,KAAK6kG,SAAW,EAChB7kG,KAAKoP,cAAc,EAAG,WACtBpP,KAAK+4D,UAAYtB,GAEPA,IAASz3D,KAAK+4D,UAK1B/4D,KAAK+kB,QAJH/kB,KAAK+4D,UAAYtB,GAOvB,EAAA50D,UAAUmB,iBAAiB,0BAA2B4gG,I,8EC5CtD,cACA,OACA,OACA,OACA,OAEA,MAAME,UAAqB,EAAA54F,KAIzB,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUo4F,QAAkB,SAAE/6F,MAC3C/I,KAAKkK,YAAc,EAAAwB,UAAUo4F,QAAkB,SAAE55F,YACjDlK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKuB,KAC5BtL,KAAK2tC,qBAAqB,WAAY,EAAA5jC,KAAKoB,OAAQ,GAAI,YACvDnL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKqB,SAC9BpL,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,QACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,EAAA2hB,UAAUQ,aAAc/M,KAAM,gBACvC,CAAEpV,MAAO,EAAA2hB,UAAUO,QAAS9M,KAAM,WAClC,CAAEpV,MAAO,EAAA2hB,UAAUM,QAAS7M,KAAM,WAClC,CAAEpV,MAAO,EAAA2hB,UAAUK,MAAO5M,KAAM,WAGpCpV,MAAO,EAAA2hB,UAAUM,UAEnBngB,KAAKivC,kBAAkB,CACrBC,OAAQ,CAAC,CAAEtpC,SAAU,CAAEypC,OAAQ,GAAKhsB,KAAM,OAI9C,UACErjB,KAAKoP,cAAc,GAAG,GACtBpP,KAAK4G,OAAO,GAAS,KAAI,eAAe5G,KAAKmM,SAAe,KAAEjO,SAC9D8B,KAAKq1B,iBAKP,iBACE,MAAM1oB,EAAQ3M,KAAKmP,aAAa,GAChC,GAAInP,KAAK4G,OAAO,GAAGC,SAAW8F,IAAU3M,KAAK44D,UAAW,CACtD54D,KAAK44D,UAAYjsD,EACjB3M,KAAKoP,cAAc,GAAG,GACtB,MAAMxJ,EAAW,UAAUmb,YAAY/gB,KAAKmP,aAAa,GAAInP,KAAKmM,SAAe,KAAEjO,OAC/E8B,KAAK0uC,aAAaspB,aAAah4D,KAAK0uC,aACxC1uC,KAAK0uC,YAAcrxB,WAAW,KAC5Brd,KAAKoP,cAAc,GAAG,IACrBxJ,IAIP,wBACE5F,KAAK4G,OAAO,GAAS,KAAI,eAAe5G,KAAKmM,SAAe,KAAEjO,SAC9D8B,KAAKoP,cAAc,GAAG,GACtB,MAAMxJ,EAAW,UAAUmb,YAAY/gB,KAAKmP,aAAa,GAAInP,KAAKmM,SAAe,KAAEjO,OAC/E8B,KAAK0uC,aAAaspB,aAAah4D,KAAK0uC,aACxC1uC,KAAK0uC,YAAcrxB,WAAW,KAC5Brd,KAAKoP,cAAc,GAAG,IACrBxJ,IAGP,EAAA7B,iBAAiBC,iBAAiB,mBAAoB8gG,I,8EClEtD,aACA,OACA,OACA,OACA,QACA,OAEA,IAAK9kD,GAAL,SAAKA,GACH,kBACA,wBACA,wCACA,6BACA,kCACA,uBACA,sBACA,2BACA,uBATF,CAAKA,MAAW,KAWhB,MAAM+kD,UAA0B,EAAA74F,KAC9B,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUqxB,OAAO,kBAAkBh0B,MAChD/I,KAAKkK,YAAc,EAAAwB,UAAUqxB,OAAO,kBAAkB7yB,YACtDlK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKmB,QAC5BlL,KAAK2tC,qBAAqB,gBAAiB,EAAA5jC,KAAKmB,OAAQ,GAAI,oBAC5DlL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKqB,SAC7BpL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKqB,SAC9BpL,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,kBACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO8hD,EAAYI,OAAQ9sC,KAAM0sC,EAAYI,QAC/C,CAAEliD,MAAO8hD,EAAYK,UAAW/sC,KAAM0sC,EAAYK,WAClD,CAAEniD,MAAO8hD,EAAYM,iBAAkBhtC,KAAM0sC,EAAYM,kBACzD,CAAEpiD,MAAO8hD,EAAYO,YAAajtC,KAAM0sC,EAAYO,aACpD,CAAEriD,MAAO8hD,EAAYQ,cAAeltC,KAAM0sC,EAAYQ,eACtD,CAAEtiD,MAAO8hD,EAAYS,SAAUntC,KAAM0sC,EAAYS,UACjD,CAAEviD,MAAO8hD,EAAYU,SAAUptC,KAAM0sC,EAAYU,UACjD,CAAExiD,MAAO8hD,EAAYW,WAAYrtC,KAAM0sC,EAAYW,YACnD,CAAEziD,MAAO8hD,EAAYY,SAAUttC,KAAM0sC,EAAYY,YAGrD1iD,MAAO8hD,EAAYI,SAErBpgD,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,+BACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,2BACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAEpBpL,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,+BACbhM,OAAO,EACPmE,KAAM,EAAA2H,YAAYoB,UAItB,UACEpL,KAAKq1B,iBAGP,iBACE,MAAM2vE,EAAUhlG,KAAKmP,aAAa,GAC5BitE,EAAUp8E,KAAKmP,aAAa,GAC5B40F,EAAc/jG,KAAKmM,SAAe,KAAEjO,MACrC,UAAM01B,SAASoxE,IAIJ,OAAZA,GAAqBjB,KAGb,UAAkBzqC,QAAQt5D,KAAMglG,EAAS5oB,IAEnDp8E,KAAKoP,cAAc,GAAG,GACtBpP,KAAKoP,cAAc,EAAG41F,KACuB,IAApChlG,KAAKmM,SAAmB,SAAEjO,OACnC8B,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,QAEtBpP,KAAKoP,cAAc,GAAG,GACtBpP,KAAKoP,cAAc,EAAG41F,KAftBhlG,KAAKoP,cAAc,EAAG,MAoB1B,wBACE,MAAM+wC,EAAYngD,KAAKmM,SAAmB,SAAEjO,MAE5C8B,KAAK+I,MAAQ,8BAAqBo3C,KAClCngD,KAAKwgC,0BACLxgC,KAAKq1B,kBAKT,EAAAxyB,UAAUmB,iBAAiB,wBAAyB+gG,I,8ECvGpD,aACA,OACA,OACA,OAEA,MAAME,UAA6B,EAAA/4F,KACjC,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUqxB,OAAO,iBAAiBh0B,MAC/C/I,KAAKkK,YAAc,EAAAwB,UAAUqxB,OAAO,iBAAiB7yB,YACrDlK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKmB,QAC5BlL,KAAK2tC,qBAAqB,QAAS,EAAA5jC,KAAKoB,OAAQ,EAAG,SAAS,GAC5DnL,KAAK2tC,qBAAqB,SAAU,EAAA5jC,KAAKoB,OAAQ,EAAG,UAAU,GAC9DnL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKmB,QAGhC,UACElL,KAAKq1B,iBAGP,iBACE,MAAM/hB,EAAOtT,KAAKmP,aAAa,GACzBhJ,EAAQnG,KAAKmP,aAAa,GAC1BxJ,EAAS3F,KAAKmP,aAAa,GACrB,MAARmE,GAAyB,MAATnN,GAA2B,MAAVR,EACnC3F,KAAKoP,cAAc,EAAGkE,EAAKgE,OAAOnR,EAAOR,IACpC3F,KAAKoP,cAAc,EAAG,MAG/B,wBACEpP,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,uBAAwBihG,I,8ECjCnD,aACA,OACA,OACA,OAEA,MAAMC,UAAuB,EAAAvhF,aAC3B,cACEpkB,QACAS,KAAKqkB,kBAAoB,EAAAta,KAAKmB,OAC9B3L,MAAM4kB,uBAAyB,SAC/BnkB,KAAK+I,MAAQ,EAAA2C,UAAUqxB,OAAO,eAAeh0B,MAC7C/I,KAAKkK,YAAc,EAAAwB,UAAUqxB,OAAO,eAAe7yB,YACnDlK,KAAKuS,UAAU,SAAU,EAAAxI,KAAKmB,QAC9BlL,KAAKoP,cAAc,EAAG,MAGxB,UACEpP,KAAKsN,KAAOtN,KAAKyN,cACjBzN,KAAKq1B,iBAGP,iBACE,MAAMzuB,EAAS5G,KAAKqR,iBACpB,IAAInK,EAAS,GACb,IAAK,IAAIjK,EAAI+C,KAAKkkB,0BAA2BjnB,EAAI2J,EAAQ3J,IACvDiK,EAASA,EAAOgvB,OAAOl2B,KAAKmP,aAAalS,IAE3C+C,KAAKoP,cAAc,EAAGlI,GAAQ,GAGhC,wBACE3H,MAAM42C,wBACNn2C,KAAKq1B,kBAIT,EAAAxyB,UAAUmB,iBAAiB,qBAAsBkhG,I,8ECpCjD,aACA,OACA,OACA,OAEA,MAAMC,UAA6B,EAAAj5F,KACjC,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUqxB,OAAO,iBAAiBh0B,MAC/C/I,KAAKkK,YAAc,EAAAwB,UAAUqxB,OAAO,iBAAiB7yB,YACrDlK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKmB,QAC5BlL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKoB,QAGhC,UACEnL,KAAKq1B,iBAGP,iBACE,IAAInmB,EAAMlP,KAAKmP,aAAa,GACjB,MAAPD,EAAalP,KAAKoP,cAAc,EAAGF,EAAIvJ,QACtC3F,KAAKoP,cAAc,EAAG,OAG/B,EAAAvM,UAAUmB,iBAAiB,uBAAwBmhG,I,8ECxBnD,aACA,OACA,OACA,OACA,OAEA,MAAMC,UAA0B,EAAAl5F,KAC9B,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUqxB,OAAO,mBAAmBh0B,MACjD/I,KAAKkK,YAAc,EAAAwB,UAAUqxB,OAAO,mBAAmB7yB,YACvDlK,KAAK2tC,qBAAqB,QAAS,EAAA5jC,KAAKmB,OAAQ,GAAI,eAAe,GACnElL,KAAK2tC,qBAAqB,YAAa,EAAA5jC,KAAKmB,OAAQ,GAAI,oBAAoB,GAC5ElL,KAAKuS,UAAU,aAAc,EAAAxI,KAAKoB,QAClCnL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKoB,QAChCnL,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKmM,SAAgB,MAAI,EAAAlC,YAAY1L,OAAO,CAC1C2L,YAAa,gBACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYkB,SAEpBlL,KAAKmM,SAAoB,UAAI,EAAAlC,YAAY1L,OAAO,CAC9C2L,YAAa,mBACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYkB,SAItB,UACElL,KAAKq1B,iBAGP,iBACE,MAAM1oB,EAAQ3M,KAAKmP,aAAa,GAC1Bk2F,EAAYrlG,KAAKmP,aAAa,GAC9B+zB,EAAQv2B,EAAMlH,QAAQ4/F,GACtB1/F,EAAS0/F,EAAU1/F,OACrBu9B,EAAQ,GACVljC,KAAKoP,cAAc,EAAG,MAAM,GAC5BpP,KAAKoP,cAAc,EAAG,MAAM,KAE5BpP,KAAKoP,cAAc,EAAG8zB,GAAO,GAC7BljC,KAAKoP,cAAc,EAAG8zB,EAAQv9B,GAAQ,IAI1C,wBACM3F,KAAKqB,OAAS,EAAA+S,KAAKC,QACvBrU,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,yBAA0BohG,I,8ECpDrD,aACA,OACA,OACA,OAEA,MAAME,UAA4B,EAAAp5F,KAChC,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUqxB,OAAO,iBAAiBh0B,MAC/C/I,KAAKkK,YAAc,EAAAwB,UAAUqxB,OAAO,iBAAiB7yB,YACrDlK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKmB,QAC5BlL,KAAK2tC,qBAAqB,QAAS,EAAA5jC,KAAKoB,OAAQ,EAAG,SAAS,GAC5DnL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKmB,QAGhC,UACElL,KAAKq1B,iBAGP,iBACE,MAAM/hB,EAAOtT,KAAKmP,aAAa,GACzB+zB,EAAQljC,KAAKmP,aAAa,GACpB,MAARmE,GAAyB,MAAT4vB,GACH,IAAXA,EAAcljC,KAAKoP,cAAc,EAAGkE,EAAK4J,OAAO,IAC/Cld,KAAKoP,cAAc,EAAGkE,EAAK4J,MAAMgmB,EAAOA,EAAQ,IAChDljC,KAAKoP,cAAc,EAAG,MAG/B,wBACEpP,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,uBAAwBshG,I,8EChCnD,aACA,OACA,OACA,OAEA,MAAMC,UAA6B,EAAAr5F,KAKjC,cACE3M,QALF,KAAAimG,aAAe,EAMbxlG,KAAK+I,MAAQ,EAAA2C,UAAUqxB,OAAO,gBAAgBh0B,MAC9C/I,KAAKkK,YAAc,EAAAwB,UAAUqxB,OAAO,gBAAgB7yB,YACpDlK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKmB,QAC5BlL,KAAK2tC,qBAAqB,YAAa,EAAA5jC,KAAKmB,OAAQ,GAAI,mBAAmB,GAC3ElL,KAAKkR,SAAS,QAAS,EAAAnH,KAAKqB,SAC5BpL,KAAKkR,SAAS,OAAQ,EAAAnH,KAAKqB,SAC3BpL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKmB,QAC9BlL,KAAKuS,UAAU,OAAQ,EAAAxI,KAAKoB,QAC5BnL,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,GAGxB,YACEpP,KAAKylG,WAAY,EACjBzlG,KAAK0lG,UAAW,EAGlB,UACE1lG,KAAKq1B,iBAGP,iBACE,MAAMlvB,EAAQnG,KAAKmP,aAAa,KAAM,EAChCgjB,EAAOnyB,KAAKmP,aAAa,KAAM,EAEjCnP,KAAK4G,OAAO,GAAGC,SAAWV,IAAUnG,KAAKylG,YAC3CzlG,KAAKwlG,aAAe,EACpBxlG,KAAK2lG,aAEP3lG,KAAKylG,UAAYt/F,EAEbnG,KAAK4G,OAAO,GAAGC,SAAWsrB,IAASnyB,KAAK0lG,UAAU1lG,KAAK2lG,YAC3D3lG,KAAK0lG,SAAWvzE,EAGlB,wBACEnyB,KAAKq1B,iBAGP,YACE,MAAM/hB,EAAOtT,KAAKmP,aAAa,GACzBy2F,EAAY5lG,KAAKmP,aAAa,GACpC,GAAY,MAARmE,GAA6B,MAAbsyF,EAAmB,OAEvC,MAAMC,EAAevyF,EAAK2J,MAAM2oF,GAC5B5lG,KAAKwlG,cAAgBK,EAAalgG,SAEtC3F,KAAKoP,cAAc,EAAGy2F,EAAa7lG,KAAKwlG,eACxCxlG,KAAKoP,cAAc,EAAGy2F,EAAalgG,OAAS3F,KAAKwlG,aAAe,GAEhExlG,KAAKwlG,iBAGT,EAAA3iG,UAAUmB,iBAAiB,sBAAuBuhG,I,8ECjElD,aACA,OACA,OACA,OACA,OACA,OAEA,MAAMO,UAA6B,EAAA55F,KAEjC,cACE3M,QAyBF,KAAAwmG,YAAeC,GACT,EAAAroF,SAASqoF,KAAY,EAAA71F,OAAO61F,GACvBA,EACJ59F,cACA6U,MAAM,KACN1T,IAAI08F,GAAQA,EAAKC,OAAO,GAAG1kE,cAAgBykE,EAAK/oF,MAAM,IACtD6S,KAAK,KACI,KA/Bd/vB,KAAK+I,MAAQ,EAAA2C,UAAUqxB,OAAO,eAAeh0B,MAC7C/I,KAAKkK,YAAc,EAAAwB,UAAUqxB,OAAO,eAAe7yB,YACnDlK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKmB,QAC5BlL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKmB,QAC9BlL,KAAKoP,cAAc,EAAG,MACtBpP,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,cACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,QAASoV,KAAM,cACxB,CAAEpV,MAAO,QAASoV,KAAM,cACxB,CAAEpV,MAAO,cAAeoV,KAAM,oCAGlCpV,MAAO,UAIX,UACE8B,KAAKmmG,gCACLnmG,KAAKq1B,iBAaP,iBACE,MAAM1oB,EAAQ3M,KAAKmP,aAAa,GAC3B,UAAMykB,SAASjnB,GAIpB3M,KAAKoP,cAAc,EAAGpP,KAAK05E,mBAAmB/sE,IAAQ,GAHpD3M,KAAKoP,cAAc,EAAG,MAAM,GAMhC,wBACEpP,KAAKmmG,gCACLnmG,KAAKq1B,iBAGP,gCAEE,OADkBr1B,KAAKmM,SAAmB,SAAEjO,OAE1C,IAAK,cACH8B,KAAK+I,MAAQ,yCACb/I,KAAK05E,mBAAqBz5B,GACjBjgD,KAAK+lG,YAAY9lD,GAE1B,MACF,IAAK,QACHjgD,KAAK+I,MAAQ,sBACb/I,KAAK05E,mBAAqBz5B,GACjBA,EAAG73C,cAEZ,MACF,IAAK,QACHpI,KAAK+I,MAAQ,sBACb/I,KAAK05E,mBAAqBz5B,GACjBA,EAAGze,cAEZ,MACF,QACExhC,KAAK+I,MAAQ,sBACb/I,KAAK05E,mBAAqBz5B,GACjBA,EAAG73C,gBAKpB,EAAAvF,UAAUmB,iBAAiB,qBAAsB8hG,I,8ECxFjD,aACA,OACA,OACA,OAEA,MAAMM,UAA0B,EAAAl6F,KAC9B,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUqxB,OAAO,iBAAiBh0B,MAC/C/I,KAAKkK,YAAc,EAAAwB,UAAUqxB,OAAO,iBAAiB7yB,YACrDlK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKmB,QAC5BlL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKoB,QAGhC,UACEnL,KAAKq1B,iBAGP,iBACE,IAAInmB,EAAMlP,KAAKmP,aAAa,GAEjB,MAAPD,EAAalP,KAAKoP,cAAc,EAAGF,EAAIm3F,WAAW,IACjDrmG,KAAKoP,cAAc,EAAG,OAG/B,EAAAvM,UAAUmB,iBAAiB,uBAAwBoiG,I,8ECzBnD,aACA,OACA,OACA,OAEA,MAAME,UAA0B,EAAAp6F,KAC9B,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUqxB,OAAO,iBAAiBh0B,MAC/C/I,KAAKkK,YAAc,EAAAwB,UAAUqxB,OAAO,iBAAiB7yB,YACrDlK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKoB,QAC5BnL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKmB,QAGhC,UACElL,KAAKq1B,iBAGP,iBACE,IAAInmB,EAAMlP,KAAKmP,aAAa,GAEjB,MAAPD,EAAalP,KAAKoP,cAAc,EAAGwO,OAAOqyD,aAAa/gE,IACtDlP,KAAKoP,cAAc,EAAG,OAG/B,EAAAvM,UAAUmB,iBAAiB,uBAAwBsiG,I,8ECzBnD,aACA,OACA,OACA,OAEA,MAAMC,UAAyB,EAAAr6F,KAQ7B,cACE3M,QAEAS,KAAK+I,MAAQ,EAAA2C,UAAUqxB,OAAO,iBAAiBh0B,MAC/C/I,KAAKkK,YAAc,EAAAwB,UAAUqxB,OAAO,iBAAiB7yB,YAErDlK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKmB,QAC5BlL,KAAKkR,SAAS,aAAc,EAAAnH,KAAKqB,SACjCpL,KAAKkR,SAAS,cAAe,EAAAnH,KAAKqB,SAClCpL,KAAKkR,SAAS,cAAe,EAAAnH,KAAKqB,SAClCpL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKmB,QAC9BlL,KAAKuS,UAAU,gBAAiB,EAAAxI,KAAKmB,QAErClL,KAAKmM,SAAqB,WAAI,EAAAlC,YAAY1L,OAAO,CAC/C2L,YAAa,+BACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,OAAO,EAAMoV,KAAM,sCACrB,CAAEpV,OAAO,EAAOoV,KAAM,6CAG1BpV,OAAO,IAET8B,KAAKwmG,YAAa,EAClBxmG,KAAKymG,WAAa,GAGpB,YACEzmG,KAAK0mG,UAAW,EAChB1mG,KAAK2mG,WAAY,EACjB3mG,KAAK4mG,SAAU,EAGjB,UACE5mG,KAAKq1B,iBAGP,iBACE,MAAM+iB,EAAOp4C,KAAKmP,aAAa,KAAM,EAC/B5L,EAAQvD,KAAKmP,aAAa,KAAM,EACtC,IAAI03F,GAAa,EAYjB,GAXI7mG,KAAKwmG,aAAYK,EAAa7mG,KAAKmP,aAAa,KAAM,GAEtDnP,KAAK4G,OAAO,GAAGC,SAAWuxC,IAASp4C,KAAK0mG,WAC1C1mG,KAAKoP,cAAc,EAAGpP,KAAKymG,YAC3BzmG,KAAKymG,WAAa,IAEpBzmG,KAAK0mG,SAAWtuD,EAEZp4C,KAAK4G,OAAO,GAAGC,SAAWtD,IAAUvD,KAAK2mG,YAAW3mG,KAAKymG,WAAa,IAC1EzmG,KAAK2mG,UAAYpjG,GAGbvD,KAAKwmG,YAAcxmG,KAAK4G,OAAO,GAAGC,SACnC7G,KAAKwmG,YAAcxmG,KAAK4G,OAAO,GAAGC,SAAWggG,IAAe7mG,KAAK4mG,QAClE,CACA,MAAMj6F,EAAQ3M,KAAKmP,aAAa,GAChC,GAAa,MAATxC,EAAe,OACnB3M,KAAKymG,YAAc7oF,OAAOjR,GAE5B3M,KAAK4mG,QAAUC,EAEf7mG,KAAKoP,cAAc,EAAGpP,KAAKymG,YAG7B,wBACE,MAAMK,EAAe9mG,KAAKmM,SAAqB,WAAEjO,MAC7C4oG,IAAiB9mG,KAAKwmG,aACpBM,EAAc9mG,KAAKkR,SAAS,cAAe,EAAAnH,KAAKqB,SAC/CpL,KAAKqS,YAAY,IAExBrS,KAAKwmG,WAAaM,EAClB9mG,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,uBAAwBuiG,I,8ECzFnD,aACA,OACA,OACA,OACA,OAEA,MAAMQ,UAAuB,EAAA76F,KAE3B,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUy6D,OAAO,eAAep9D,MAC7C/I,KAAKkK,YAAc,EAAAwB,UAAUy6D,OAAO,eAAej8D,YACnDlK,KAAKkR,SAAS,SAAU,EAAAnH,KAAKqB,SAC7BpL,KAAKkR,SAAS,WAAY,EAAAnH,KAAKqB,SAC/BpL,KAAKkR,SAAS,YAAa,EAAAnH,KAAKqB,SAChCpL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKqB,SAC9BpL,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAC3C2L,YAAa,aACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,OAAO,EAAOoV,KAAM,SACtB,CAAEpV,OAAO,EAAMoV,KAAM,QACrB,CAAEpV,MAAO,KAAMoV,KAAM,UAGzBpV,MAAO,OAET8B,KAAKmM,SAAkB,QAAI,EAAAlC,YAAY1L,OAAO,CAC5C2L,YAAa,cACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,OAAO,EAAOoV,KAAM,SACtB,CAAEpV,OAAO,EAAMoV,KAAM,QACrB,CAAEpV,MAAO,KAAMoV,KAAM,UAGzBpV,MAAO,OAIX,UAEE8B,KAAKq1B,iBAKP,iBACE,IAAIvd,EAAS9X,KAAKmP,aAAa,GAC/B,IAAK,UAAMykB,SAAS9b,GAElB,YADA9X,KAAKoP,cAAc,EAAG,MAGxB,IAAI43F,EAAMhnG,KAAKmP,aAAa,GACvB,UAAMykB,SAASozE,KAAMA,EAAMhnG,KAAKmM,SAAiB,OAAEjO,OACxD,IAAI+oG,EAAMjnG,KAAKmP,aAAa,GACvB,UAAMykB,SAASqzE,KAAMA,EAAMjnG,KAAKmM,SAAkB,QAAEjO,OAErD4Z,EAAQ9X,KAAKoP,cAAc,EAAG43F,GAAK,GAClChnG,KAAKoP,cAAc,EAAG63F,GAAK,GAElC,wBACEjnG,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,qBAAsB+iG,I,8ECnEjD,aACA,OACA,OACA,OACA,OAEA,MAAMG,UAAsB,EAAAh7F,KAE1B,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUy6D,OAAO,cAAcp9D,MAC5C/I,KAAKkK,YAAc,EAAAwB,UAAUy6D,OAAO,cAAcj8D,YAClDlK,KAAKkR,SAAS,SAAU,EAAAnH,KAAKqB,SAC7BpL,KAAK2tC,qBAAqB,SAAU,EAAA5jC,KAAKoB,OAAQ,KAAM,cACvDnL,KAAK2tC,qBAAqB,UAAW,EAAA5jC,KAAKoB,OAAQ,KAAM,eACxDnL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKoB,QAGhC,UAEEnL,KAAKq1B,iBAKP,iBACE,IAAIvd,EAAS9X,KAAKmP,aAAa,GAC/B,IAAK,UAAMykB,SAAS9b,GAElB,YADA9X,KAAKoP,cAAc,EAAG,MAAM,GAG9B,MAAM43F,EAAMhnG,KAAKmP,aAAa,GACxB83F,EAAMjnG,KAAKmP,aAAa,GAC1B2I,EAAQ9X,KAAKoP,cAAc,EAAG43F,GAAK,GAClChnG,KAAKoP,cAAc,EAAG63F,GAAK,GAGlC,wBACEjnG,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,oBAAqBkjG,I,8ECzChD,aACA,OACA,OACA,OACA,OAEA,MAAMC,UAAyB,EAAAj7F,KAE7B,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUy6D,OAAO,iBAAiBp9D,MAC/C/I,KAAKkK,YAAc,EAAAwB,UAAUy6D,OAAO,iBAAiBj8D,YACrDlK,KAAKkR,SAAS,SAAU,EAAAnH,KAAKqB,SAC7BpL,KAAK2tC,qBAAqB,SAAU,EAAA5jC,KAAKmB,OAAQ,GAAI,cACrDlL,KAAK2tC,qBAAqB,UAAW,EAAA5jC,KAAKmB,OAAQ,GAAI,eACtDlL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKoB,QAGhC,UAEEnL,KAAKq1B,iBAKP,iBACE,IAAIvd,EAAS9X,KAAKmP,aAAa,GAC/B,IAAK,UAAMykB,SAAS9b,GAElB,YADA9X,KAAKoP,cAAc,EAAG,MAGxB,MAAM43F,EAAMhnG,KAAKmP,aAAa,GACxB83F,EAAMjnG,KAAKmP,aAAa,GAC1B2I,EAAQ9X,KAAKoP,cAAc,EAAG43F,GAC7BhnG,KAAKoP,cAAc,EAAG63F,GAG7B,wBACEjnG,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,uBAAwBmjG,I,8ECzCnD,aACA,OACA,OACA,OACA,OAEA,MAAMC,UAAuB,EAAAzjF,aAE3B,cACEpkB,QACAS,KAAKqkB,kBAAoB,EAAAta,KAAKqB,QAC9B7L,MAAM2kB,0BAA4B,EAClClkB,KAAK+I,MAAQ,EAAA2C,UAAUy6D,OAAO,eAAep9D,MAC7C/I,KAAKkK,YAAc,EAAAwB,UAAUy6D,OAAO,eAAej8D,YACnDlK,KAAKkR,SAAS,SAAU,EAAAnH,KAAKoB,QAC7BnL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKqB,SAGhC,UAEEpL,KAAKsN,KAAOtN,KAAKyN,cACjBzN,KAAKq1B,iBAKP,iBACE,MAAMvd,EAAS9X,KAAKmP,aAAa,IAE9B,UAAMykB,SAAS9b,IAChBA,EAAS9X,KAAKkkB,2BACdpM,EAAS9X,KAAKqR,iBAAmBrR,KAAKkkB,0BAEtClkB,KAAKoP,cAAc,EAAG,MAAM,GAG9BpP,KAAKoP,cAAc,EAAGpP,KAAKmP,aAAa2I,IAAS,GAGnD,wBACEvY,MAAM42C,wBACNn2C,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,qBAAsBojG,I,8EC5CjD,aACA,OACA,OACA,OACA,OAEA,MAAMC,UAAsB,EAAA1jF,aAE1B,cACEpkB,QACAS,KAAKqkB,kBAAoB,EAAAta,KAAKoB,OAC9B5L,MAAM2kB,0BAA4B,EAClClkB,KAAK+I,MAAQ,EAAA2C,UAAUy6D,OAAO,cAAcp9D,MAC5C/I,KAAKkK,YAAc,EAAAwB,UAAUy6D,OAAO,cAAcj8D,YAClDlK,KAAKkR,SAAS,SAAU,EAAAnH,KAAKoB,QAC7BnL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKoB,QAGhC,UAEEnL,KAAKsN,KAAOtN,KAAKyN,cACjBzN,KAAKq1B,iBAKP,iBACE,MAAMvd,EAAS9X,KAAKmP,aAAa,IAE9B,UAAMykB,SAAS9b,IAChBA,EAAS9X,KAAKkkB,2BACdpM,EAAS9X,KAAKqR,iBAAmBrR,KAAKkkB,0BAEtClkB,KAAKoP,cAAc,EAAG,MAAM,GAG9BpP,KAAKoP,cAAc,EAAGpP,KAAKmP,aAAa2I,IAAS,GAGnD,wBACEvY,MAAM42C,wBACNn2C,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,oBAAqBqjG,I,8EC5ChD,aACA,OACA,OACA,OACA,OAEA,MAAMC,UAAyB,EAAA3jF,aAE7B,cACEpkB,QACAS,KAAKqkB,kBAAoB,EAAAta,KAAKmB,OAC9B3L,MAAM2kB,0BAA4B,EAClClkB,KAAK+I,MAAQ,EAAA2C,UAAUy6D,OAAO,iBAAiBp9D,MAC/C/I,KAAKkK,YAAc,EAAAwB,UAAUy6D,OAAO,iBAAiBj8D,YACrDlK,KAAKkR,SAAS,SAAU,EAAAnH,KAAKoB,QAC7BnL,KAAKuS,UAAU,SAAU,EAAAxI,KAAKmB,QAGhC,UAEElL,KAAKsN,KAAOtN,KAAKyN,cACjBzN,KAAKq1B,iBAKP,iBACE,MAAMvd,EAAS9X,KAAKmP,aAAa,IAE9B,UAAMykB,SAAS9b,IAChBA,EAAS9X,KAAKkkB,2BACdpM,EAAS9X,KAAKqR,iBAAmBrR,KAAKkkB,0BAEtClkB,KAAKoP,cAAc,EAAG,MAAM,GAG9BpP,KAAKoP,cAAc,EAAGpP,KAAKmP,aAAa2I,IAG1C,wBACEvY,MAAM42C,wBACNn2C,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,uBAAwBsjG,I,4GC5CnD,aACA,OACA,OACA,OAEA,MAAaC,UAA6B,EAAA5jF,aACxC,cACEpkB,QACAS,KAAK8jB,qBAAsB,EAC3B9jB,KAAK6jB,oBAAqB,EAC1B7jB,KAAK+jB,sBAAuB,EAC5BxkB,MAAM+kB,mBAAqB,EAAAva,KAAKqB,QAChCpL,KAAK+I,MAAQ,EAAA2C,UAAUy6D,OAAO,sBAAsBp9D,MACpD/I,KAAKkK,YAAc,EAAAwB,UAAUy6D,OAAO,sBAAsBj8D,YAC1DlK,KAAKkR,SAAS,SAAU,EAAAnH,KAAKoB,QAC7BnL,KAAKkR,SAAS,QAAS,EAAAnH,KAAKqB,SAG9B,iBACE,IAAIo8F,EAASxnG,KAAKmP,aAAa,GAC3BD,EAAMlP,KAAKmP,aAAa,GAExBq4F,EAAS,GAAKA,GAAUxnG,KAAKsS,kBAC/BtS,KAAK2O,UAAU,wCAIjB3O,KAAKoP,cAAco4F,EAAQt4F,IAtB/B,yBAyBA,EAAArM,UAAUmB,iBAAiB,4BAA6BujG,I,2GC9BxD,aACA,OACA,OACA,OAEA,MAAaE,UAA4B,EAAA9jF,aACvC,cACEpkB,QACAS,KAAK8jB,qBAAsB,EAC3B9jB,KAAK6jB,oBAAqB,EAC1B7jB,KAAK+jB,sBAAuB,EAC5BxkB,MAAM+kB,mBAAqB,EAAAva,KAAKoB,OAChCnL,KAAK+I,MAAQ,EAAA2C,UAAUy6D,OAAO,qBAAqBp9D,MACnD/I,KAAKkK,YAAc,EAAAwB,UAAUy6D,OAAO,qBAAqBj8D,YACxDlK,KAAKkR,SAAS,SAAU,EAAAnH,KAAKoB,QAC9BnL,KAAKkR,SAAS,QAAS,EAAAnH,KAAKoB,QAG9B,iBACE,IAAIq8F,EAASxnG,KAAKmP,aAAa,GAC3BD,EAAMlP,KAAKmP,aAAa,GAExBq4F,EAAS,GAAKA,GAAUxnG,KAAKsS,kBAC/BtS,KAAK2O,UAAU,wCAIjB3O,KAAKoP,cAAco4F,EAAQt4F,IAtB/B,wBAyBA,EAAArM,UAAUmB,iBAAiB,2BAA4ByjG,I,8GC9BvD,aACA,OACA,OACA,OAEA,MAAaC,UAA+B,EAAA/jF,aAC1C,cACEpkB,QACAS,KAAK8jB,qBAAsB,EAC3B9jB,KAAK6jB,oBAAqB,EAC1B7jB,KAAK+jB,sBAAuB,EAC5BxkB,MAAM+kB,mBAAqB,EAAAva,KAAKmB,OAChClL,KAAK+I,MAAQ,EAAA2C,UAAUy6D,OAAO,wBAAwBp9D,MACtD/I,KAAKkK,YAAc,EAAAwB,UAAUy6D,OAAO,wBAAwBj8D,YAC5DlK,KAAKkR,SAAS,SAAU,EAAAnH,KAAKoB,QAC7BnL,KAAKkR,SAAS,QAAS,EAAAnH,KAAKmB,QAG9B,iBACE,IAAIs8F,EAASxnG,KAAKmP,aAAa,GAC3BD,EAAMlP,KAAKmP,aAAa,GAExBq4F,EAAS,GAAKA,GAAUxnG,KAAKsS,kBAC/BtS,KAAK2O,UAAU,wCAGjB3O,KAAKoP,cAAco4F,EAAQt4F,IArB/B,2BAwBA,EAAArM,UAAUmB,iBAAiB,8BAA+B0jG,I,8EC7B1D,aACA,OACA,OACA,OACA,OACA,QAEA,MAAMC,UAAiB,EAAAz7F,KACrB,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUowB,OAAO,aAAa/yB,MAC3C/I,KAAKkK,YACH,oBACA,EAAAwB,UAAUowB,OAAO,aAAa5xB,YAAc,qaAW9ClK,KAAKkR,SAAS,UAAW,EAAAnH,KAAKqB,SAC9BpL,KAAKuS,UAAU,cAAe,EAAAxI,KAAKsB,MACnCrL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKsB,MAChCrL,KAAKuS,UAAU,aAAc,EAAAxI,KAAKsB,MAClCrL,KAAKuS,UAAU,cAAe,EAAAxI,KAAKsB,MACnCrL,KAAKuS,UAAU,gBAAiB,EAAAxI,KAAKsB,MACrCrL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKmB,QAG/B,YACElL,KAAKm2C,wBAGP,iBACE,UAAQpa,aACLp6B,KAAKsU,GAAKjW,KAAKoP,cAAc,EAAG6G,IAChCwhB,MAAM9mB,GAAO3Q,KAAKoP,cAAc,EAAGuB,IAGxC,WACE,UAAQ8qB,iBACL95B,KAAKsU,GAAKjW,KAAKoP,cAAc,EAAG6G,IAChCwhB,MAAM9mB,GAAO3Q,KAAKoP,cAAc,EAAGuB,IACtC,UAAQ+qB,SACL/5B,KAAKsU,GAAKjW,KAAKoP,cAAc,EAAG6G,IAChCwhB,MAAM9mB,GAAO3Q,KAAKoP,cAAc,EAAGuB,IACtC,UAAQurB,aACLv6B,KAAKsU,GAAKjW,KAAKoP,cAAc,EAAG6G,IAChCwhB,MAAM9mB,GAAO3Q,KAAKoP,cAAc,EAAGuB,IACtC,UAAQi3F,YACLjmG,KAAKsU,GAAKjW,KAAKoP,cAAc,EAAG6G,IAChCwhB,MAAM9mB,GAAO3Q,KAAKoP,cAAc,EAAGuB,IAGxC,wBACM3Q,KAAKqB,OAAS,EAAA+S,KAAKC,QACvBrU,KAAK6nG,iBAGP,iBACM7nG,KAAKqB,OAAS,EAAA+S,KAAKC,QACvBrU,KAAK8nG,YAGT,EAAAjlG,UAAUmB,iBAAiB,mBAAoB2jG,I,8YCpE/C,cACA,OACA,OACA,OACA,OACA,OACA,QAEA,MAAMI,UAAiB,EAAA77F,KAKrB,cACE3M,QALF,KAAAyoG,cAAgB,CACdC,WAAY,UAAQ9rE,WACpB+rE,eAAgB,UAAQ9rE,0BAIxBp8B,KAAK+I,MAAQ,EAAA2C,UAAUowB,OAAO+5B,SAAS9sD,MACvC/I,KAAKkK,YAAc,EAAAwB,UAAUowB,OAAO+5B,SAAS3rD,YAC7ClK,KAAKkR,SAAS,UAAW,EAAAnH,KAAKqB,SAC9BpL,KAAKuS,UAAU,gBAAiB,EAAAxI,KAAKmB,QACrClL,KAAKuS,UAAU,cAAe,EAAAxI,KAAKsB,MACnCrL,KAAKmM,SAAqB,WAAI,EAAAlC,YAAY1L,OAAO,CAC/C2L,YAAa,aACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAY82B,WAEpB9gC,KAAKmM,SAAyB,eAAI,EAAAlC,YAAY1L,OAAO,CACnD2L,YAAa,iBACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAY82B,WAMhB,U,+CACE9gC,KAAKgoG,cAAcC,WAAWtmG,KAAKsU,IACvCjW,KAAKmM,SAAqB,WAAEjO,MAAQ+X,EACpCjW,KAAKugC,+BACJ9I,MAAM9mB,IACP3Q,KAAK+xC,UAAU,8CAA8CphC,aAEzD3Q,KAAKgoG,cAAcE,eAAevmG,KAAKsU,IAC3CjW,KAAKmM,SAAyB,eAAEjO,MAAQ+X,EACxCjW,KAAKugC,6BACLvgC,KAAKoP,cAAc,EAAG6G,KACrBwhB,MAAM9mB,IACP3Q,KAAK+xC,UAAU,kDAAkDphC,OAGnE3Q,KAAKm2C,2BAGP,iBACEn2C,KAAKm2C,wBAGP,wBACMn2C,KAAKqB,OAAS,EAAA+S,KAAKC,QACvB,UAAmB2vB,cAAcriC,KAAKsU,IACpCjW,KAAKoP,cAAc,EAAG6G,KACrBwhB,MAAM9mB,IACP3Q,KAAK+xC,UAAU,+CAA+CphC,QAMpE,EAAA9N,UAAUmB,iBAAiB,kBAAmB+jG,I,8ECnE9C,aACA,OACA,OACA,OAEA,MAAMI,UAAuB,EAAAj8F,KAC3B,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUowB,OAAOssE,KAAKr/F,MACnC/I,KAAKkK,YAAc,EAAAwB,UAAUowB,OAAOssE,KAAKl+F,YACzClK,KAAKkR,SAAS,UAAW,EAAAnH,KAAKqB,SAC9BpL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKmB,QAG/B,iBACE,IAC8B,GAAxBlL,KAAKmP,aAAa,IAAYyX,QAAQ2U,OAAOmjE,MAAM,KACvD1+F,KAAKoP,cAAc,GAAG,GACtB,MAAO6G,GACPjW,KAAKoP,cAAc,GAAG,KAI5B,EAAAvM,UAAUmB,iBAAiB,cAAemkG,I,8ECvB1C,cACA,OACA,OACA,OACA,OACA,OAEA,MAAME,UAA0B,EAAAn8F,KAG9B,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUowB,OAAO,eAAe/yB,MAC7C/I,KAAKkK,YAAc,EAAAwB,UAAUowB,OAAO,eAAe5xB,YACnDlK,KAAK2tC,qBAAqB,UAAW,EAAA5jC,KAAKmB,OAAQ,MAAO,iBAAiB,GAC1ElL,KAAKkR,SAAS,UAAW,EAAAnH,KAAKqB,SAC9BpL,KAAKuS,UAAU,aAAc,EAAAxI,KAAKmB,QAClClL,KAAKuS,UAAU,UAAW,EAAAxI,KAAKmB,QAC/BlL,KAAKuS,UAAU,aAAc,EAAAxI,KAAKmB,QAClClL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKmB,QAG/B,YACElL,KAAKwtC,aAAc,EAIrB,iBACE,MAAMoE,EAAU5xC,KAAKmP,aAAa,KAAM,EACxC,GAAInP,KAAK4G,OAAO,GAAGC,SAAW+qC,IAAY5xC,KAAKwtC,YAAa,CAC1D,MAAMrS,EAAUn7B,KAAKmP,aAAa,GAClC,GAAG,EAAAgB,OAAOgrB,GAAS,OAEnB,IACE,EAAAE,KAAKF,EAAS,CAACxqB,EAAK2qB,EAAQC,KACtBD,IAEFt7B,KAAKoP,cAAc,EAAGksB,GACtBt7B,KAAKoP,cAAc,GAAG,IAEpBuB,IAGF3Q,KAAKoP,cAAc,EAAGuB,GACtB3Q,KAAKoP,cAAc,GAAG,IAEpBmsB,IACFv7B,KAAKoP,cAAc,EAAGmsB,GACtBv7B,KAAKoP,cAAc,GAAG,MAG1B,MAAO6G,GACPjW,KAAKoP,cAAc,GAAG,IAG1BpP,KAAKwtC,YAAcoE,GAGvB,EAAA/uC,UAAUmB,iBAAiB,qBAAsBqkG,I,8EC1DjD,aACA,OACA,OACA,OACA,OAEA,MAAMC,UAAmB,EAAAp8F,KACvB,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUowB,OAAO,eAAe/yB,MAC7C/I,KAAKkK,YAAc,EAAAwB,UAAUowB,OAAO,eAAe5xB,YACnDlK,KAAKuS,UAAU,SAAU,EAAAxI,KAAKmB,QAC9BlL,KAAKkR,SAAS,UAAW,EAAAnH,KAAKqB,SAGhC,OACOpL,KAAK+C,aACR/C,KAAK+C,WAAwB,aAAI,GAIrC,iBACE,GAAI/C,KAAKqB,MAAQ,EAAA+S,KAAKC,OAAQ,OAC9B,MAAM1H,EAAiB3M,KAAKmP,aAAa,GACzC,GAAInP,KAAK+C,WAAwB,cAAM4J,GAASA,EAAO,CACnC,EAAAtN,kBAAkBI,WAAWE,gBACrCS,GAAG83B,SAAS,CAACvnB,EAAKmzB,KACrBnzB,EAGH3Q,KAAKsH,SAAS,cAActH,KAAKmB,OAAOnB,KAAKD,mBAAmB4Q,EAAIjH,YAFpE1J,KAAKoP,cAAc,EAAG/D,KAAK6B,UAAU42B,MAM3C9jC,KAAK+C,WAAwB,YAAI4J,EACjC3M,KAAKqxC,mBAAkB,GAAO,IAGlC,EAAAxuC,UAAUmB,iBAAiB,qBAAsBskG,I,8ECtCjD,cACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,QAEA,MAAMC,UAAuB,EAAAr8F,KAS3B,cACE3M,QATF,KAAAipG,UAAY,UAAMC,eAClB,KAAAC,cAAgB,OAGhB,KAAAC,OAAS,EACT,KAAAC,cAAgB,EAChB,KAAAC,YAAc,EAgNd,KAAAC,OAAS,CAACtuF,EAAayU,KACrBjvB,KAAKoP,cAAcoL,EAAKyU,IA7MxBjvB,KAAK+I,MAAQ,8BACb/I,KAAKkK,YACH,kZACFlK,KAAKkR,SAAS,wBAAyB,EAAAnH,KAAKqB,SAC5CpL,KAAKkR,SAAS,eAAgB,EAAAnH,KAAKqB,SACnCpL,KAAKuS,UAAU,UAAW,EAAAxI,KAAKmB,QAC/BlL,KAAKuS,UAAU,UAAW,EAAAxI,KAAKmB,QAC/BlL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKmB,QAE7BlL,KAAKmM,SAAuB,aAAI,EAAAlC,YAAY1L,OAAO,CACjD2L,YAAa,uBACb7H,KAAM,EAAA2H,YAAYoB,QAClBlN,OAAO,IAGT8B,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAC3C2L,YAAa,uDACb7H,KAAM,EAAA2H,YAAYoB,QAClBlN,OAAO,IAGT8B,KAAKmM,SAAqB,WAAI,EAAAlC,YAAY1L,OAAO,CAC/C2L,YAAa,aACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYyjC,QAGpBztC,KAAKmM,SAA4B,kBAAI,EAAAlC,YAAY1L,OAAO,CACtD2L,YAAa,sBACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,EAAGoV,KAAM,QAClB,CAAEpV,MAAO,EAAGoV,KAAM,YAGtBpV,MAAO,IAET8B,KAAKmM,SAAoB,UAAI,EAAAlC,YAAY1L,OAAO,CAC9C2L,YAAa,KACbhM,MAAO,eACPmE,KAAM,EAAA2H,YAAYkB,SAGpBlL,KAAKmM,SAAyB,eAAI,EAAAlC,YAAY1L,OAAO,CACnD2L,YAAa,eACbhM,MAAO,gBACPmE,KAAM,EAAA2H,YAAYkB,SAEpBlL,KAAKmM,SAAyB,eAAI,EAAAlC,YAAY1L,OAAO,CACnD2L,YAAa,UACbhM,MAAO,cACPmE,KAAM,EAAA2H,YAAYkB,SAGpBlL,KAAKmM,SAA4B,kBAAI,EAAAlC,YAAY1L,OAAO,CACtD2L,YAAa,oBACbhM,MAAO,UACPmE,KAAM,EAAA2H,YAAYkB,SAGpBlL,KAAKivC,kBAAkB,CACrBC,OAAQ,CACN,CAAE65D,UAAW,GAAIC,eAAgB,IACjC,CAAEC,eAAgB,GAAIC,kBAAmB,KAE3C/5D,WAAY,CACV45D,UAAWh+F,IACT,MAAMmE,EAAMnE,EAA2B,kBAAE7M,MACzC,OAAQ,CAAC,GAAGwS,SAASxB,IAEvB85F,eAAgBj+F,IACd,MAAMmE,EAAMnE,EAA2B,kBAAE7M,MACzC,OAAQ,CAAC,GAAGwS,SAASxB,IAEvB+5F,eAAgBl+F,IACd,MAAMmE,EAAMnE,EAA2B,kBAAE7M,MACzC,OAAQ,CAAC,GAAGwS,SAASxB,IAEvBg6F,kBAAmBn+F,IACjB,MAAMmE,EAAMnE,EAA2B,kBAAE7M,MACzC,OAAQ,CAAC,GAAGwS,SAASxB,OAM7B,UACEmO,WAAW,KACTrd,KAAKmpG,iBACJ,KAGL,iBACE,IAAIC,EAAsBppG,KAAKmP,aAAa,GAGxCnP,KAAK4G,OAAO,GAAGC,UACjB7G,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,wBAA+B5oG,KAAKwoG,WACpEnrF,WAAW,KACTrd,KAAKmpG,iBACJ,MAGDnpG,KAAK4G,OAAO,GAAGC,WACW,IAAxBuiG,GACFppG,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,2BAAkC5oG,KAAKwoG,WACvExoG,KAAKqpG,cAAcrpG,KAAK0oG,iBACS,IAAxBU,IACTppG,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,6BAAoC5oG,KAAKwoG,WACzExoG,KAAKspG,eAAetpG,KAAK0oG,iBAK/B,wBACE,GAAI1oG,KAAKqB,OAAS,EAAA+S,KAAKC,OAAQ,OAC/B,MAAM00F,EAAY/oG,KAAKmM,SAAoB,UAAEjO,MACvC8qG,EAAiBhpG,KAAKmM,SAAyB,eAAEjO,MACjD+qG,EAAiBjpG,KAAKmM,SAAyB,eAAEjO,MACjDgrG,EAAoBlpG,KAAKmM,SAA4B,kBAAEjO,MACvDqrG,EAAoBvpG,KAAKmM,SAA4B,kBAAEjO,MACvDsrG,EAAexpG,KAAKmM,SAAuB,aAAEjO,MAC7CurG,EAASzpG,KAAKmM,SAAiB,OAAEjO,MAEjCwrG,EAAsB,UAAehjD,aACzCqiD,EACAC,EACAC,EACAC,GAIEO,IACFzpG,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,4CAAmD5oG,KAAKwoG,WAExFxoG,KAAKmM,SAAiB,OAAEjO,OAAQ,EAChC8B,KAAKugC,6BAELljB,WAAW,KACTrd,KAAK+X,YAAY,gBAChB,MAGL,UAAQgkB,aACLp6B,KAAKsU,IACmB,2CAAnBA,EAAE6lB,OAAOE,MACP0tE,GAAuBF,EAEA,GAArBD,GAEFvpG,KAAK+I,MAAQ,iBACb,UAAe4gG,yBACZhoG,KAAKsU,IACJjW,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,2BAA2B3yF,KAC3D,UAAe2zF,aAAa3zF,GACzBtU,KAAKsU,IACJjW,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,yBAAyB3yF,OAE1DwhB,MAAM9mB,IACL3Q,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,4BAA4Bj4F,SAGjE8mB,MAAM9mB,IACL3Q,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,4BAA4Bj4F,QAElC,GAArB44F,IAETvpG,KAAK+I,MAAQ,mBACb,UAAe4gG,yBACZhoG,KAAKoiD,IAEJ,UAAe8lD,cAAc9lD,EAAOglD,EAAWC,EAAgBC,GAC5DtnG,KAAKsU,IACJjW,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,6BAA6B3yF,OAE9DwhB,MAAM9mB,IACL3Q,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,gCAAgCj4F,SAGrE8mB,MAAM9mB,IACL3Q,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,gCAAgCj4F,QAItE3Q,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,wBAIlC,UAAYkB,iBAAiB9pG,KAAM,EAAAiM,UAAUiK,OAC7ClW,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,iCAAiC3yF,EAAE6lB,OAAOE,YAE3EvE,MAAM9mB,GAAO3Q,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,kCAAkCj4F,MAE/E64F,IAEHxpG,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,iBAAwB5oG,KAAKwoG,WAC7DxoG,KAAK8oG,OAAO9oG,KAAK6oG,aAAa,IAWlC,YAAY1tE,GACV,GAAIn7B,KAAKqB,OAAS,EAAA+S,KAAKC,OACvB,IACE,EAAAgnB,KAAKF,EAAS,CAACxqB,EAAK2qB,EAAQC,KAC1Bv7B,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,kBAAyBztE,EAAU,IAAMn7B,KAAKwoG,WAC1EltE,IACFt7B,KAAK8oG,OAAO9oG,KAAK4oG,cAAettE,EAAS,IAAMt7B,KAAKwoG,WACpDxoG,KAAK8oG,OAAO9oG,KAAK6oG,aAAa,IAE5Bl4F,IACF3Q,KAAK8oG,OAAO9oG,KAAK4oG,cAAej4F,EAAM,IAAM3Q,KAAKwoG,WACjDxoG,KAAK8oG,OAAO9oG,KAAK6oG,aAAa,IAE5BttE,IACFv7B,KAAK8oG,OAAO9oG,KAAK4oG,cAAertE,EAAS,IAAMv7B,KAAKwoG,WACpDxoG,KAAK8oG,OAAO9oG,KAAK6oG,aAAa,MAGlC,MAAO5yF,GACPjW,KAAK8oG,OAAO9oG,KAAK4oG,cAAe3yF,EAAI,IAAMjW,KAAKwoG,WAC/CxoG,KAAK8oG,OAAO9oG,KAAK6oG,aAAa,IAKlC,gBACE,UAAekB,oBACZpoG,KAAKuC,IAEJ,MAAM8lG,EAAmB9lG,EAAKyJ,OAAOsI,GAC5BA,EAAEzY,MAAQwC,KAAK0oG,eAExB1oG,KAAK8oG,OAAO9oG,KAAK2oG,OAAQqB,EAAiB,GAAG7iD,YAC7CnnD,KAAK8oG,OAAO9oG,KAAK6oG,aAAa,KAE/BpxE,MAAM9mB,IACL3Q,KAAK8oG,OAAO9oG,KAAK4oG,cAAej4F,GAChC3Q,KAAK8oG,OAAO9oG,KAAK6oG,aAAa,KAIpC,cAAc9kD,GACZ,IACE,UAAekmD,cAAclmD,EAAO,MACjCpiD,KAAK5D,IACJ0lB,QAAQC,IAAI3lB,GACZsf,WAAW,KACTrd,KAAKmpG,iBACJ,OAEJ1xE,MAAMxhB,GAAKwN,QAAQC,IAAIzN,IAC1B,MAAOtF,GACP8S,QAAQC,IAAI/S,IAIhB,eAAeozC,GACb,IACE,UAAekmD,cAAclmD,EAAO,QACjCpiD,KAAK5D,IACJ0lB,QAAQC,IAAI3lB,KAEb05B,MAAM9mB,GAAO8S,QAAQC,IAAI/S,IAC5B,MAAOA,GACP8S,QAAQC,IAAI/S,KAIlB,EAAA9N,UAAUmB,iBAAiB,mCAAoCukG,I,cCzS/DvrG,EAAOD,QAAUmxB,QAAQ,Y,8ECAzB,cACA,OACA,OACA,OACA,OACA,OACA,QACA,QACA,QAEMy1B,EAAiB,EAAQ,IACzBC,EAAK,EAAQ,IAEnB,MAAMsmD,UAAiB,EAAAh+F,KAYrB,cACE3M,QAZF,KAAAipG,UAAY,UAAMC,eAElB,KAAAC,cAAgB,OAChB,KAAA7iD,cAAgB,OAGhB,KAAA8iD,OAAS,EACT,KAAAzjD,OAAS,EACT,KAAA0jD,cAAgB,EAChB,KAAAC,YAAc,EAkTd,KAAAC,OAAS,CAACtuF,EAAayU,KACrBjvB,KAAKoP,cAAcoL,EAAKyU,IA/SxBjvB,KAAK+I,MAAQ,qBACb/I,KAAKkK,YACH,yYACFlK,KAAKkR,SAAS,wBAAyB,EAAAnH,KAAKqB,SAC5CpL,KAAKkR,SAAS,eAAgB,EAAAnH,KAAKqB,SACnCpL,KAAKkR,SAAS,eAAgB,EAAAnH,KAAKqB,SACnCpL,KAAKuS,UAAU,UAAW,EAAAxI,KAAKmB,QAC/BlL,KAAKuS,UAAU,UAAW,EAAAxI,KAAKmB,QAC/BlL,KAAKuS,UAAU,UAAW,EAAAxI,KAAKmB,QAC/BlL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKmB,QAE7BlL,KAAKmM,SAAuB,aAAI,EAAAlC,YAAY1L,OAAO,CACjD2L,YAAa,uBACb7H,KAAM,EAAA2H,YAAYoB,QAClBlN,OAAO,IAGT8B,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAC3C2L,YAAa,8CACb7H,KAAM,EAAA2H,YAAYoB,QAClBlN,OAAO,IAGT8B,KAAKmM,SAAqB,WAAI,EAAAlC,YAAY1L,OAAO,CAC/C2L,YAAa,QACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYyjC,QAGpBztC,KAAKmM,SAA4B,kBAAI,EAAAlC,YAAY1L,OAAO,CACtD2L,YAAa,sBACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,EAAGoV,KAAM,QAClB,CAAEpV,MAAO,EAAGoV,KAAM,YAGtBpV,MAAO,IAET8B,KAAKmM,SAAoB,UAAI,EAAAlC,YAAY1L,OAAO,CAC9C2L,YAAa,KACbhM,MAAO,eACPmE,KAAM,EAAA2H,YAAYkB,SAGpBlL,KAAKmM,SAAyB,eAAI,EAAAlC,YAAY1L,OAAO,CACnD2L,YAAa,eACbhM,MAAO,gBACPmE,KAAM,EAAA2H,YAAYkB,SAEpBlL,KAAKmM,SAAyB,eAAI,EAAAlC,YAAY1L,OAAO,CACnD2L,YAAa,UACbhM,MAAO,cACPmE,KAAM,EAAA2H,YAAYkB,SAGpBlL,KAAKmM,SAA4B,kBAAI,EAAAlC,YAAY1L,OAAO,CACtD2L,YAAa,oBACbhM,MAAO,UACPmE,KAAM,EAAA2H,YAAYkB,SAGpBlL,KAAKmM,SAAqB,WAAI,EAAAlC,YAAY1L,OAAO,CAC/C2L,YAAa,QACbhM,MAAO,GACPmE,KAAM,EAAA2H,YAAYyjC,QAGpBztC,KAAKmM,SAA4B,kBAAI,EAAAlC,YAAY1L,OAAO,CACtD2L,YAAa,sBACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,EAAGoV,KAAM,QAClB,CAAEpV,MAAO,EAAGoV,KAAM,YAGtBpV,MAAO,IAET8B,KAAKmM,SAAoB,UAAI,EAAAlC,YAAY1L,OAAO,CAC9C2L,YAAa,KACbhM,MAAO,eACPmE,KAAM,EAAA2H,YAAYkB,SAGpBlL,KAAKmM,SAAyB,eAAI,EAAAlC,YAAY1L,OAAO,CACnD2L,YAAa,eACbhM,MAAO,gBACPmE,KAAM,EAAA2H,YAAYkB,SAEpBlL,KAAKmM,SAAyB,eAAI,EAAAlC,YAAY1L,OAAO,CACnD2L,YAAa,UACbhM,MAAO,cACPmE,KAAM,EAAA2H,YAAYkB,SAGpBlL,KAAKmM,SAA4B,kBAAI,EAAAlC,YAAY1L,OAAO,CACtD2L,YAAa,oBACbhM,MAAO,UACPmE,KAAM,EAAA2H,YAAYkB,SAGpBlL,KAAKivC,kBAAkB,CACrBC,OAAQ,CACN,CAAE65D,UAAW,GAAIC,eAAgB,IACjC,CAAEC,eAAgB,GAAIC,kBAAmB,IACzC,CAAEiB,UAAW,GAAIC,eAAgB,IACjC,CAAEC,eAAgB,GAAIC,kBAAmB,KAE3Cn7D,WAAY,CACV45D,UAAWh+F,IACT,MAAMmE,EAAMnE,EAA2B,kBAAE7M,MACzC,OAAQ,CAAC,GAAGwS,SAASxB,IAEvB85F,eAAgBj+F,IACd,MAAMmE,EAAMnE,EAA2B,kBAAE7M,MACzC,OAAQ,CAAC,GAAGwS,SAASxB,IAEvB+5F,eAAgBl+F,IACd,MAAMmE,EAAMnE,EAA2B,kBAAE7M,MACzC,OAAQ,CAAC,GAAGwS,SAASxB,IAEvBg6F,kBAAmBn+F,IACjB,MAAMmE,EAAMnE,EAA2B,kBAAE7M,MACzC,OAAQ,CAAC,GAAGwS,SAASxB,IAEvBi7F,UAAWp/F,IACT,MAAMmE,EAAMnE,EAA2B,kBAAE7M,MACzC,OAAQ,CAAC,GAAGwS,SAASxB,IAEvBk7F,eAAgBr/F,IACd,MAAMmE,EAAMnE,EAA2B,kBAAE7M,MACzC,OAAQ,CAAC,GAAGwS,SAASxB,IAEvBm7F,eAAgBt/F,IACd,MAAMmE,EAAMnE,EAA2B,kBAAE7M,MACzC,OAAQ,CAAC,GAAGwS,SAASxB,IAEvBo7F,kBAAmBv/F,IACjB,MAAMmE,EAAMnE,EAA2B,kBAAE7M,MACzC,OAAQ,CAAC,GAAGwS,SAASxB,OAM7B,UACEmO,WAAW,KACTrd,KAAKmpG,iBACJ,KAGL,iBACE,IAAIC,EAAsBppG,KAAKmP,aAAa,GACxCo7F,EAAsBvqG,KAAKmP,aAAa,GAGxCnP,KAAK4G,OAAO,GAAGC,UACjB7G,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,wBAA+B5oG,KAAKwoG,WACpEnrF,WAAW,KACTrd,KAAKmpG,iBACJ,MAGDnpG,KAAK4G,OAAO,GAAGC,WACW,IAAxBuiG,GACFppG,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,4BAAmC5oG,KAAKwoG,WACxExoG,KAAKqpG,cAAcrpG,KAAK0oG,iBACS,IAAxBU,IACTppG,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,8BAAqC5oG,KAAKwoG,WAC1ExoG,KAAKspG,eAAetpG,KAAK0oG,iBAIzB1oG,KAAK4G,OAAO,GAAGC,WACW,IAAxB0jG,GACFvqG,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,4BAAmC5oG,KAAKwoG,WACxExoG,KAAKqpG,cAAcrpG,KAAK6lD,iBACS,IAAxB0kD,IACTvqG,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,8BAAqC5oG,KAAKwoG,WAC1ExoG,KAAKspG,eAAetpG,KAAK6lD,iBAK/B,wBACE,GAAI7lD,KAAKqB,OAAS,EAAA+S,KAAKC,OAAQ,OAC/B,MAAM00F,EAAY/oG,KAAKmM,SAAoB,UAAEjO,MACvC8qG,EAAiBhpG,KAAKmM,SAAyB,eAAEjO,MACjD+qG,EAAiBjpG,KAAKmM,SAAyB,eAAEjO,MACjDgrG,EAAoBlpG,KAAKmM,SAA4B,kBAAEjO,MACvDqrG,EAAoBvpG,KAAKmM,SAA4B,kBAAEjO,MAEvDisG,EAAYnqG,KAAKmM,SAAoB,UAAEjO,MACvCksG,EAAiBpqG,KAAKmM,SAAyB,eAAEjO,MACjDmsG,EAAiBrqG,KAAKmM,SAAyB,eAAEjO,MACjDosG,EAAoBtqG,KAAKmM,SAA4B,kBAAEjO,MACvDssG,EAAoBxqG,KAAKmM,SAA4B,kBAAEjO,MAEvDsrG,EAAexpG,KAAKmM,SAAuB,aAAEjO,MAC7CurG,EAASzpG,KAAKmM,SAAiB,OAAEjO,MAEjCwrG,EAAsB,UAAehjD,aACzCqiD,EACAC,EACAC,EACAC,GAEIuB,EAAsB,UAAe/jD,aACzCyjD,EACAC,EACAC,EACAC,GAGEb,IACFzpG,KAAK8oG,OACH9oG,KAAK4oG,cACL,4CAAmD5oG,KAAKwoG,WAG1DxoG,KAAKmM,SAAiB,OAAEjO,OAAQ,EAChC8B,KAAKugC,6BAELljB,WAAW,KACTrd,KAAK+X,YAAY,gBAChB,MAIL,UAAQgkB,aACLp6B,KAAKsU,IACJ,GAAuB,YAAnBA,EAAE6lB,OAAOE,MACX,GAAI0tE,GAAuBe,GAAuBjB,EAAc,CAE9D,IAAI5iD,EAAkB,GACtB,GAAyB,GAArB2iD,EAAwB,CAE1BvpG,KAAK+I,MAAQ,iBACb,IAAI2hG,EAAO,CACT5jD,UAAW9mD,KAAK0oG,cAChB3hD,MAAM,GAERH,EAAgBzhD,KAAKulG,GAEvB,GAAyB,GAArBnB,EAAwB,CAE1BvpG,KAAK+I,MAAQ,mBACb,IAAIk+C,EAAmBrD,EAAGsD,OAAO6hD,EAAWC,GACxC0B,EAAO,CACT5jD,UAAW9mD,KAAK0oG,cAChBvhD,WAAY4hD,EACZ3hD,OAAQH,EAAiBA,iBACzBnC,QAASmkD,EACT5hD,YAAa,CAAC6hD,IAEhBtiD,EAAgBzhD,KAAKulG,GAGvB,GAAyB,GAArBF,EAAwB,CAE1BxqG,KAAK+I,MAAQ,iBACb,IAAI89C,EAAO,CACTC,UAAW9mD,KAAK6lD,cAChBkB,MAAM,GAERH,EAAgBzhD,KAAK0hD,GAGvB,GAAyB,GAArB2jD,EAAwB,CAE1BxqG,KAAK+I,MAAQ,mBACb,IAAIk+C,EAAmBrD,EAAGsD,OAAOijD,EAAWC,GACxCvjD,EAAO,CACTC,UAAW9mD,KAAK6lD,cAChBsB,WAAYgjD,EACZ/iD,OAAQH,EAAiBA,iBACzBnC,QAASulD,EACThjD,YAAa,CAACijD,IAEhB1jD,EAAgBzhD,KAAK0hD,GAEvBlD,EAAe2D,UAAUV,GAAiBjlD,KAAK,KAC7C3B,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,WAAkB5oG,KAAKwoG,WACvDxoG,KAAK8oG,OAAO9oG,KAAK6oG,aAAa,UAE3B7oG,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,4BAGvC,UAAYkB,iBAAiB9pG,KAAM,EAAAiM,UAAUiK,OAC7ClW,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,iCAAiC3yF,EAAE6lB,OAAOE,WAE3EvE,MAAM9mB,GAAO3Q,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,kCAAkCj4F,MAE/E64F,IAEHxpG,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,iBAAwB5oG,KAAKwoG,WAC7DxoG,KAAK8oG,OAAO9oG,KAAK6oG,aAAa,IAQlC,YAAY1tE,GACV,GAAIn7B,KAAKqB,OAAS,EAAA+S,KAAKC,OACvB,IACE,EAAAgnB,KAAKF,EAAS,CAACxqB,EAAK2qB,EAAQC,KAC1Bv7B,KAAK8oG,OAAO9oG,KAAK4oG,cAAe,kBAAyBztE,EAAU,IAAMn7B,KAAKwoG,WAC1EltE,IACFt7B,KAAK8oG,OAAO9oG,KAAK4oG,cAAettE,EAAS,IAAMt7B,KAAKwoG,WACpDxoG,KAAK8oG,OAAO9oG,KAAK6oG,aAAa,IAE5Bl4F,IACF3Q,KAAK8oG,OAAO9oG,KAAK4oG,cAAej4F,EAAM,IAAM3Q,KAAKwoG,WACjDxoG,KAAK8oG,OAAO9oG,KAAK6oG,aAAa,IAE5BttE,IACFv7B,KAAK8oG,OAAO9oG,KAAK4oG,cAAertE,EAAS,IAAMv7B,KAAKwoG,WACpDxoG,KAAK8oG,OAAO9oG,KAAK6oG,aAAa,MAGlC,MAAO5yF,GACPjW,KAAK8oG,OAAO9oG,KAAK4oG,cAAe3yF,EAAI,IAAMjW,KAAKwoG,WAC/CxoG,KAAK8oG,OAAO9oG,KAAK6oG,aAAa,IAKlC,gBACE,UAAekB,oBACZpoG,KAAKuC,IAEJ,MAAM8lG,EAAmB9lG,EAAKyJ,OAAOsI,GAC5BA,EAAEzY,MAAQwC,KAAK0oG,eAExB1oG,KAAK8oG,OAAO9oG,KAAK2oG,OAAQqB,EAAiB,GAAG7iD,YAC7CnnD,KAAK8oG,OAAO9oG,KAAK6oG,aAAa,GAG9B,MAAM8B,EAAmBzmG,EAAKyJ,OAAOsI,GAC5BA,EAAEzY,MAAQwC,KAAK6lD,eAExB7lD,KAAK8oG,OAAO9oG,KAAKklD,OAAQylD,EAAiB,GAAGxjD,YAC7CnnD,KAAK8oG,OAAO9oG,KAAK6oG,aAAa,KAE/BpxE,MAAM9mB,IACL3Q,KAAK8oG,OAAO9oG,KAAK4oG,cAAej4F,GAChC3Q,KAAK8oG,OAAO9oG,KAAK6oG,aAAa,KAIpC,cAAc9kD,GACZ,IACE,UAAekmD,cAAclmD,EAAO,MACjCpiD,KAAK5D,IACJ0lB,QAAQC,IAAI3lB,GACZsf,WAAW,KACTrd,KAAKmpG,iBACJ,OAEJ1xE,MAAMxhB,GAAKwN,QAAQC,IAAIzN,IAC1B,MAAOtF,GACP8S,QAAQC,IAAI/S,IAIhB,eAAeozC,GACb,IACE,UAAekmD,cAAclmD,EAAO,QACjCpiD,KAAK5D,IACJ0lB,QAAQC,IAAI3lB,KAEb05B,MAAM9mB,GAAO8S,QAAQC,IAAI/S,IAC5B,MAAOA,GACP8S,QAAQC,IAAI/S,KAIlB,EAAA9N,UAAUmB,iBAAiB,4BAA6BkmG,I,8ECxZxD,cACA,OACA,OACA,OACA,OAEMjvE,EAAM,EAAQ,IAEpB,MAAM2vE,UAAqB,EAAA1+F,KACzB,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAUowB,OAAO,wBAAwB/yB,MACtD/I,KAAKkK,YAAc,EAAAwB,UAAUowB,OAAO,wBAAwB5xB,YAC5DlK,KAAKkR,SAAS,MAAO,EAAAnH,KAAKmB,QAC1BlL,KAAKuS,UAAU,gBAAiB,EAAAxI,KAAKmB,QACrClL,KAAKuS,UAAU,iBAAkB,EAAAxI,KAAKmB,QACtClL,KAAKuS,UAAU,cAAe,EAAAxI,KAAKmB,QACnClL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKmB,QAChClL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKmB,QAG/B,yBACE,OAAO,IAAI1J,SAAQ,SAASC,GAC1B,OAAOA,EAAQ,CACbqlB,QAASmU,EAAInU,aAKnB,mBACE,OAAO,IAAItlB,QAAQ,CAACC,EAASq2B,KAC3B,EAAAuD,KAAK,UAAW,CAAC1qB,EAAK2qB,EAAQC,KACxB5qB,EACFmnB,EAAOnnB,GAGPlP,EAAQ,CACN65B,eAOV,gBACE,OAAO,IAAI95B,QAAQ,CAACC,EAASq2B,KAC3B,EAAAuD,KAAK,SAAU,CAAC1qB,EAAK2qB,EAAQC,KACvB5qB,EACFmnB,EAAOnnB,GAGPlP,EAAQ,CACN65B,eAOV,iBACE,IAAI9b,EAAM,GAGVxf,KAAKo8B,yBACFz6B,KAAK5D,IACJA,EAAIsN,KAAK6B,UAAUnP,GAChBkgB,QAAQ,OAAQ,IAChBhB,MAAM,WACN8S,KAAK,iBACRvQ,EAAIra,KAAKpH,GACTiC,KAAKoP,cAAc,EAAGrR,KAEvB05B,MAAMxhB,IACLjW,KAAKoP,cAAc,EAAG6G,KAG1BjW,KAAK6qG,mBACFlpG,KAAK5D,IACJA,EAAIsN,KAAK6B,UAAUnP,GAChBkgB,QAAQ,OAAQ,IAChBhB,MAAM,UACN8S,KAAK,kBACRvQ,EAAIra,KAAKpH,GACTiC,KAAKoP,cAAc,EAAGrR,KAEvB05B,MAAMxhB,IACLjW,KAAKoP,cAAc,EAAG6G,KAG1BjW,KAAK8qG,gBACFnpG,KAAK5D,IACJA,EAAIsN,KAAK6B,UAAUnP,GAChBkgB,QAAQ,OAAQ,IAChBhB,MAAM,UACN8S,KAAK,eACRvQ,EAAIra,KAAKpH,GACTiC,KAAKoP,cAAc,EAAGoQ,GACtBxf,KAAKoP,cAAc,EAAGrR,KAEvB05B,MAAMxhB,IACLjW,KAAKoP,cAAc,EAAG6G,KAI5B,wBACEjW,KAAKq1B,kBAGT,EAAAxyB,UAAUmB,iBAAiB,8BAA+B4mG,I,uGC5G1D,aACA,OACA,OACA,OACA,OAEA,MAAaG,UAAwB,EAAA7+F,KAEnC,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAU2X,KAAKq5C,WAAW3zD,MACvC/I,KAAKkK,YAAc,EAAAwB,UAAU2X,KAAKq5C,WAAWxyD,YAC7ClK,KAAKkR,SAAS,MAAO,EAAAnH,KAAKoB,QAC1BnL,KAAKuS,UAAU,MAAO,EAAAxI,KAAKoB,QAC3BnL,KAAKuS,UAAU,OAAQ,EAAAxI,KAAKoB,QAC5BnL,KAAKuS,UAAU,MAAO,EAAAxI,KAAKoB,QAC3BnL,KAAKuS,UAAU,QAAS,EAAAxI,KAAKoB,QAC7BnL,KAAKmM,SAAoB,UAAI,EAAAlC,YAAY1L,OAAO,CAC9C2L,YAAa,aACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO,MAAOoV,KAAM,cACtB,CAAEpV,MAAO,OAAQoV,KAAM,gBACvB,CAAEpV,MAAO,MAAOoV,KAAM,iBACtB,CAAEpV,MAAO,MAAOoV,KAAM,iBACtB,CAAEpV,MAAO,QAASoV,KAAM,yBAG5BpV,MAAO,QAET8B,KAAKmM,SAAoB,UAAI,EAAAlC,YAAY1L,OAAO,CAAE2L,YAAa,YAAa7H,KAAM,EAAA2H,YAAYmB,OAAQjN,MAAO,MAC7G8B,KAAK05E,mBAAqB/sE,IACxB,IAAI8sE,EAAwB,CAAC,KAAM,KAAM,KAAM,MAK/C,OAJAA,EAAY,GAAa,UAAR9sE,EACjB8sE,EAAY,GAAa,WAAR9sE,EACjB8sE,EAAY,GAAa,GAAR9sE,EACjB8sE,EAAY,GAAa,IAAR9sE,EACV8sE,GAIX,UACEz5E,KAAKm5E,wBACLn5E,KAAKm2C,wBAGP,iBACEn2C,KAAKo5E,0BAGP,wBACEp5E,KAAKm5E,wBACLn5E,KAAKo5E,0BAGC,0BACN,MAAMzsE,EAAQ3M,KAAKmP,aAAa,GAChC,IAAK,UAAMykB,SAASjnB,GAMlB,OALA3M,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,MACtBpP,KAAKoP,cAAc,EAAG,WACtBpP,KAAKoP,cAAc,EAAG,MAGxB,MAAMlI,EAASlH,KAAK05E,mBAAmB/sE,GACjC69C,EAAY93C,KAAKyI,IAAInb,KAAKmM,SAAoB,UAAEjO,OACtD8B,KAAKoP,cAAc,EAAGrC,OAAO7F,EAAO,IAAI+F,QAAQu9C,IAChDxqD,KAAKoP,cAAc,EAAGrC,OAAO7F,EAAO,IAAI+F,QAAQu9C,IAChDxqD,KAAKoP,cAAc,EAAGrC,OAAO7F,EAAO,IAAI+F,QAAQu9C,IAChDxqD,KAAKoP,cAAc,EAAGrC,OAAO7F,EAAO,IAAI+F,QAAQu9C,IAChDxqD,KAAKoP,cAAc,EAAGrC,OAAO7F,EAAO,IAAI+F,QAAQu9C,IAGlD,wBAEE,OADkBxqD,KAAKmM,SAAoB,UAAEjO,OAE3C,IAAK,MACH8B,KAAK+I,MAAQ,wBACb/I,KAAK4G,OAAO,GAAGpJ,KAAO,MACtBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,MACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,OACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,MACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,QACvBwC,KAAK05E,mBAAqB/sE,IACxB,IAAI8sE,EAAwB,CAAC,KAAM,KAAM,KAAM,MAK/C,OAJAA,EAAY,GAAa,UAAR9sE,EACjB8sE,EAAY,GAAa,WAAR9sE,EACjB8sE,EAAY,GAAa,GAAR9sE,EACjB8sE,EAAY,GAAa,IAAR9sE,EACV8sE,GAET,MACF,IAAK,MACHz5E,KAAK+I,MAAQ,wBACb/I,KAAK4G,OAAO,GAAGpJ,KAAO,MACtBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,MACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,OACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,MACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,QACvBwC,KAAK05E,mBAAqB/sE,IACxB,IAAI8sE,EAAwB,CAAC,KAAM,KAAM,KAAM,MAK/C,OAJAA,EAAY,GAAa,SAAR9sE,EACjB8sE,EAAY,GAAa,UAAR9sE,EACjB8sE,EAAY,GAAa,WAAR9sE,EACjB8sE,EAAY,GAAa,IAAR9sE,EACV8sE,GAET,MACF,IAAK,QACHz5E,KAAK+I,MAAQ,0BACb/I,KAAK4G,OAAO,GAAGpJ,KAAO,QACtBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,MACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,OACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,MACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,MACvBwC,KAAK05E,mBAAqB/sE,IACxB,IAAI8sE,EAAwB,CAAC,KAAM,KAAM,KAAM,MAK/C,OAJAA,EAAY,GAAa,UAAR9sE,EACjB8sE,EAAY,GAAa,UAAR9sE,EACjB8sE,EAAY,GAAa,SAAR9sE,EACjB8sE,EAAY,GAAa,UAAR9sE,EACV8sE,GAET,MACF,IAAK,MACHz5E,KAAK+I,MAAQ,wBACb/I,KAAK4G,OAAO,GAAGpJ,KAAO,MACtBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,OACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,MACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,MACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,QACvBwC,KAAK05E,mBAAqB/sE,IACxB,IAAI8sE,EAAwB,CAAC,KAAM,KAAM,KAAM,MAK/C,OAJAA,EAAY,GAAa,GAAR9sE,EACjB8sE,EAAY,GAAa,KAAR9sE,EACjB8sE,EAAY,GAAa,MAAR9sE,EACjB8sE,EAAY,GAAa,MAAR9sE,EACV8sE,GAET,MACF,IAAK,OACHz5E,KAAK+I,MAAQ,yBACb/I,KAAK4G,OAAO,GAAGpJ,KAAO,OACtBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,MACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,MACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,MACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,QACvBwC,KAAK05E,mBAAqB/sE,IACxB,IAAI8sE,EAAwB,CAAC,KAAM,KAAM,KAAM,MAK/C,OAJAA,EAAY,GAAa,SAAR9sE,EACjB8sE,EAAY,GAAa,GAAR9sE,EACjB8sE,EAAY,GAAa,KAAR9sE,EACjB8sE,EAAY,GAAa,KAAR9sE,EACV8sE,GAET,MACF,QACEz5E,KAAK+I,MAAQ,wBACb/I,KAAK4G,OAAO,GAAGpJ,KAAO,MACtBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,MACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,OACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,MACvBwC,KAAKiH,QAAQ,GAAGzJ,KAAO,QACvBwC,KAAK05E,mBAAqB/sE,IACxB,IAAI8sE,EAAwB,CAAC,KAAM,KAAM,KAAM,MAK/C,OAJAA,EAAY,GAAa,UAAR9sE,EACjB8sE,EAAY,GAAa,WAAR9sE,EACjB8sE,EAAY,GAAa,GAAR9sE,EACjB8sE,EAAY,GAAa,IAAR9sE,EACV8sE,KArKjB,oBA0KA,EAAA52E,UAAUmB,iBAAiB,kBAAmB+mG,I,2GChL9C,aACA,OACA,OACA,OACA,OAEA,IAAKlrF,GAAL,SAAKA,GACH,8BACA,8BACA,oBAHF,CAAKA,MAAS,KAMd,MAAamrF,UAA4B,EAAA9+F,KAEvC,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAU2X,KAAK,mBAAmBta,MAC/C/I,KAAKkK,YACH,oBACA,EAAAwB,UAAU2X,KAAK,mBAAmBnZ,YAAa,+ZAIjDlK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKuB,KAC5BtL,KAAKuS,UAAU,WAAY,EAAAxI,KAAKsB,MAChCrL,KAAKmM,SAAe,KAAI,EAAAlC,YAAY1L,OAAO,CACzC2L,YAAa,OACb7H,KAAM,EAAA2H,YAAYyB,SAClBtI,OAAQ,CACNqN,MAAO,CACL,CAAEtS,MAAO2hB,EAAUorF,KAAM33F,KAAMuM,EAAUorF,MACzC,CAAE/sG,MAAO2hB,EAAUqrF,MAAO53F,KAAMuM,EAAUqrF,OAC1C,CAAEhtG,MAAO2hB,EAAUsrF,OAAQ73F,KAAMuM,EAAUsrF,UAG/CjtG,MAAO2hB,EAAUorF,OAKrB,iBACE,MAAMt+F,EAAQ3M,KAAKmP,aAAa,GAC1B8kB,EAASj0B,KAAKorG,cAAcz+F,GAC5BmxD,EAAM,UAAUutC,gBAAgBp3E,GACtCj0B,KAAKoP,cAAc,EAAG0uD,GAGxB,wBACE99D,KAAKq1B,iBAIP,cAAc1oB,GACZ,MAAMqT,EAAWhgB,KAAKmM,SAAe,KAAEjO,MACvC,IAAIktG,EAAgB,KAQpB,OAPIprF,IAAaH,EAAUorF,KACzBG,EAAgB,IAAI9kG,KAAKqG,GAChBqT,IAAaH,EAAUqrF,MAChCE,EAAgB,IAAI9kG,KAAKwW,SAASnQ,IACzBqT,IAAaH,EAAUsrF,SAChCC,EAAgB,IAAI9kG,MAEf8kG,GAlDX,wBAsDA,EAAAvoG,UAAUmB,iBAAiB,uBAAwBgnG,I,2GClEnD,cACA,OACA,OACA,OACA,OACA,SAEA,MAAaM,UAA4B,EAAAp/F,KAEvC,cACE3M,QACAS,KAAK+I,MAAQ,EAAA2C,UAAU2X,KAAK,uBAAuBta,MACnD/I,KAAKkK,YAAc,EAAAwB,UAAU2X,KAAK,uBAAuBnZ,YAEzDlK,KAAKkR,SAAS,QAAS,EAAAnH,KAAKuB,KAC5BtL,KAAKuS,UAAU,qBAAsB,EAAAxI,KAAKuB,KAC1CtL,KAAKuS,UAAU,sBAAuB,EAAAxI,KAAKuB,KAE3CtL,KAAKmM,SAAiB,OAAI,EAAAlC,YAAY1L,OAAO,CAC3C2L,YAAa,gBACb7H,KAAM,EAAA2H,YAAYypF,aAClBtwF,OAAQ,CACNqN,MAAO,UAAc+6F,cAGzBvrG,KAAKmM,SAAmB,SAAI,EAAAlC,YAAY1L,OAAO,CAC7C2L,YAAa,wCACbhM,MAAO,mBACPmE,KAAM,EAAA2H,YAAYyB,WAItB,UACEzL,KAAKm2C,wBAGP,iBACE,MAAMxpC,EAAQ3M,KAAKmP,aAAa,GAChC,IACE,MAAM9R,EAAIqY,EAAO61D,GAAG5+D,EAAO3M,KAAKmM,SAAmB,SAAEjO,OAC/CstG,EAAQ91F,EAAO/I,GACrB3M,KAAKoP,cAAc,EAAG/R,EAAEsY,UACxB3V,KAAKoP,cAAc,EAAGo8F,EAAM71F,UAC5B,MAAOM,GACPjW,KAAK2O,UAAU,sCAAsCsH,MAKzD,wBACE,MAAMw1F,EAASzrG,KAAKmM,SAAiB,OAAEjO,MACvC8B,KAAKmM,SAAmB,SAAEhJ,OAAS,CACjCqN,MAAO,UAAck7F,OAAOD,IAE9BzrG,KAAKugC,6BACLvgC,KAAKq1B,kBAhDT,wBAuDA,EAAAxyB,UAAUmB,iBAAiB,2BAA4BsnG,I,6BC9DvD,IAAKzrF,E,iDAAL,SAAKA,GACD,uBACA,yBACA,+BACA,mBACA,2BACA,6BACA,uBACA,uBACA,yBATJ,CAAKA,MAAS,KAYd,MAAqB8rF,EAOjB,cAActpG,GACV,OAAQA,GACJ,KAAKwd,EAAU+rF,YACX,OAAOjuG,OAAO8U,OAAOzS,KAAK4rG,aAC9B,KAAK/rF,EAAUgsF,aACX,OAAOluG,OAAO8U,OAAOzS,KAAK6rG,cAC9B,KAAKhsF,EAAUisF,gBACX,OAAOnuG,OAAO8U,OAAOzS,KAAK8rG,iBAC9B,KAAKjsF,EAAUksF,UACX,OAAOpuG,OAAO8U,OAAOzS,KAAK+rG,WAC9B,KAAKlsF,EAAUmsF,cACX,OAAOruG,OAAO8U,OAAOzS,KAAKgsG,eAC9B,KAAKnsF,EAAUosF,eACX,OAAOtuG,OAAO8U,OAAOzS,KAAKisG,gBAC9B,KAAKpsF,EAAUqsF,YACX,OAAOvuG,OAAO8U,OAAOzS,KAAKksG,aAC9B,KAAKrsF,EAAUssF,YACX,OAAOxuG,OAAO8U,OAAOzS,KAAKmsG,aAC9B,KAAKtsF,EAAUusF,aACX,OAAOzuG,OAAO8U,OAAOzS,KAAKosG,gBA1B1C,YACW,EAAAb,WAAa,CAAC1rF,EAAU+rF,YAAa/rF,EAAUgsF,aAAchsF,EAAUisF,gBAAiBjsF,EAAUksF,UAAWlsF,EAAUmsF,cAAensF,EAAUosF,eAAgBpsF,EAAUqsF,YAAarsF,EAAUssF,YAAatsF,EAAUusF,cAAc7iG,IACzOo8B,IACW,CAAEznC,MAAOynC,EAAOryB,KAAMqyB,KA2B9B,EAAAumE,YAAc,CACjB,mBACA,iBACA,mBACA,gBACA,kBACA,gBACA,kBACA,mBACA,kBACA,kBACA,oBACA,gBACA,mBACA,kBACA,kBACA,qBACA,cACA,eACA,gBACA,gBACA,oBACA,gBACA,eACA,eACA,gBACA,gBACA,cACA,eACA,gBACA,cACA,cACA,gBACA,iBACA,oBACA,eACA,mBACA,iBACA,gBACA,mBACA,kBACA,gBACA,iBACA,mBACA,gBACA,oBACA,iBAGG,EAAAN,YAAc,CACjB,iBACA,eACA,iBACA,gBACA,eACA,oBACA,eACA,kBACA,sBACA,cACA,kBACA,eACA,gBACA,kBACA,iBACA,kBACA,kBACA,iBACA,eACA,mBAGG,EAAAG,UAAY,CACf,cACA,aACA,cACA,aACA,cACA,gBACA,cACA,eACA,YACA,eACA,eACA,cACA,eACA,cACA,aACA,kBACA,eACA,gBACA,aACA,YACA,aACA,gBACA,iBACA,YACA,cACA,mBACA,iBACA,YACA,eACA,eACA,gBACA,iBACA,aACA,iBACA,eACA,iBACA,gBACA,eACA,mBACA,oBACA,eACA,aACA,eACA,gBACA,cACA,eACA,oBACA,mBACA,YACA,YACA,iBACA,iBACA,aACA,gBACA,iBACA,cACA,gBACA,iBACA,aACA,gBACA,iBACA,qBACA,cACA,gBACA,eACA,cACA,eACA,aACA,aACA,mBACA,cACA,gBACA,mBACA,eACA,cACA,qBACA,gBAGG,EAAAD,gBAAkB,CACrB,mBACA,mBACA,4BACA,uBACA,oBACA,oBACA,qBACA,mBACA,mBACA,qBAGG,EAAAD,aAAe,CAClB,eACA,oBACA,oBACA,iCACA,8BACA,4BACA,0BACA,6BACA,4BACA,iCACA,0BACA,6BACA,6BACA,4BACA,4BACA,mBACA,mBACA,gBACA,yBACA,mBACA,gBACA,iBACA,uBACA,oBACA,iBACA,gBACA,wBACA,uBACA,iBACA,kBACA,kBACA,kBACA,oBACA,qBACA,kBACA,iBACA,kBACA,uBACA,iBACA,uBACA,iBACA,kBACA,mBACA,mBACA,sBACA,sBACA,oBACA,oBACA,kBACA,oBACA,qBACA,oBACA,oBACA,iBACA,kBACA,iBACA,qBACA,+BACA,uBACA,0BACA,6BACA,4BACA,wBACA,4BACA,0BACA,iBACA,kBACA,kBACA,iBACA,8BACA,8BACA,iBACA,eACA,sBACA,iBACA,kBACA,iBACA,qBACA,oBACA,mBACA,oBACA,iBACA,qBACA,sBACA,mBACA,kBACA,oBACA,qBACA,iBACA,mBACA,kBACA,eACA,kBACA,8BACA,8BACA,iCACA,kBACA,iBACA,sBACA,qBACA,kBACA,yBACA,wBACA,sBACA,sBACA,uBACA,sBACA,uBACA,iBACA,iBACA,mBACA,qBACA,mBACA,mBACA,wBACA,oBAC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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 96);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 04.07.2016.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\nimport { get } from 'lodash';\nimport { Colors, create } from 'logplease';\nimport { Renderer } from '../client/editor/renderer';\nimport { Database } from '../database/database';\nimport { Dashboard } from '../server/dashboard';\nimport { ErrorHandler } from '../utils/decorators';\nimport { RegistryError } from '../utils/errors';\nimport { IdGenerator } from '../utils/id-generator';\nimport { ContainerNode } from './container-node';\nimport { Node } from './node';\nimport { createNodeDbHelper } from './node-db-helper';\nimport { NodeFactory } from './node-factory';\nimport { NodeHookHelper } from './node-hook';\nimport {\n  ContainerRegistryMetadata,\n  GlobalNodeRegistryMetadata,\n  IContainer,\n  IFolderNode,\n  isFolderNode,\n  isNode,\n  SerializedContainer,\n  SerializedNode,\n  Side,\n} from './node-interface';\nimport { DefaultContainerRegistry, DefaultSubNodeRegistry } from './node-registry';\nimport { NodeTypeRegistry } from './node-type-registry';\nimport { SerializableHelper } from './serializable';\nimport Utils from './utils';\nimport Namespace = SocketIO.Namespace;\n\nconst logger = create('container', { color: Colors.Magenta });\n\nexport class ContainerRegistry extends DefaultContainerRegistry<Container> {\n\n  private static _instance: ContainerRegistry;\n\n  private constructor() {\n    super(IdGenerator.instance());\n  }\n\n  public static instance(): ContainerRegistry {\n    if (!ContainerRegistry._instance) {\n      ContainerRegistry._instance = new ContainerRegistry();\n    }\n\n    return ContainerRegistry._instance;\n  }\n\n  rootContainer(): Container {\n    return <Container>super.rootContainer();\n  }\n\n  @ErrorHandler\n  protected optimizeBeforeRegister(c: Container, force: boolean): Container {\n    const container = super.optimizeBeforeRegister(c, force);\n    if (container.id + '' !== '0') {\n      let rootContainer = this.rootContainer();\n      if (rootContainer.server_dashboard_socket) container.server_dashboard_socket = rootContainer.server_dashboard_socket;\n      if (rootContainer.server_editor_socket) container.server_editor_socket = rootContainer.server_editor_socket;\n      if (rootContainer.client_socket) container.client_socket = rootContainer.client_socket;\n      if (rootContainer.db) container.db = rootContainer.db;\n      if (rootContainer.dashboard) container.dashboard = rootContainer.dashboard;\n    }\n    return container;\n  }\n}\n\nexport class NodeInContainerRegistry extends DefaultSubNodeRegistry<Node> {\n\n  constructor(parent: Container, containerRegistry?: ContainerRegistryMetadata,\n              globalNodeRegistry?: GlobalNodeRegistryMetadata) {\n    super(<IContainer><unknown>parent, containerRegistry, globalNodeRegistry);\n  }\n\n  parent(): Container {\n    return <Container>super.parent();\n  }\n\n  remove(node: Node | number | string, isCaching?: boolean): Promise<Node> {\n    const sNode = NodeFactory.toSimpleNode(node['cid'] ?? this.parent().id, node['id'] ?? node);\n    const nodeId = IdGenerator.createNodeId(sNode.cid, sNode.id);\n    this.parent().logInfo(`Removing node '${nodeId}' on ${this.parent().side}...`);\n    if (isFolderNode(node)) {\n      sNode['sub_container'] = (<ContainerNode>node).sub_container;\n    }\n    return Promise.resolve(isNode(node) ? <Node>node : sNode)\n                  .then(n => this.globalNodeRegistry.get(n) ?? n)\n                  .then(n => NodeHookHelper.execute(<Node>n, 'onRemoved') ?? n)\n                  .then(n => NodeHookHelper.execute(<Node>n, 'beforeRemoveNode') ?? n)\n                  .then(n => isCaching ? n : createNodeDbHelper().delete(this.parent().db, sNode).then(_ => n))\n                  .then(n => super.remove(<Node>n, isCaching))\n                  .then(n => NodeHookHelper.execute(n, 'afterRemoveNode') ?? n)\n                  .then(n => {\n                    this.parent().logInfo(`Node '${nodeId}' is removed on ${this.parent().side}`);\n                    return n;\n                  });\n  }\n\n  protected validate(node: Node, force: boolean, key: string): Node {\n    const n = super.validate(node, force, key);\n    if (this.parent().nodeItself() && this.parent().nodeItself().shouldRejectNodeType(n?.type)) {\n      throw new RegistryError(`Trying to create non-compatible child node '${n.getReadableId()}' with type ` +\n                              `'${n.type}' in container '${this.parent().id}'...`, n);\n    }\n    return n;\n  }\n\n  protected doRegister(k: string | number, node: Node, force: boolean = false, isCaching?: boolean): Promise<Node> {\n    this.parent().logInfo(`Creating new node '${node.getReadableId()}' on ${this.parent().side}...`);\n    return Promise.resolve(node)\n                  .then(n => NodeHookHelper.execute(n, 'onCreated') ?? n)\n                  .then(n => isCaching ? n : createNodeDbHelper().insert(this.parent().db, n).then(_ => n))\n                  .then(n => super.doRegister(k, n, force, isCaching))\n                  .then(n => NodeHookHelper.execute(n, 'onAdded') ?? n)\n                  .then(n => NodeHookHelper.execute(n, 'afterAdded') ?? n)\n                  .then(n => {\n                    this.parent().logInfo(`New node '${node.getReadableId()}' is created on ${this.parent().side}`);\n                    return n;\n                  });\n  }\n}\n\nexport const reassignContainer = <T extends IFolderNode>(node: T, container: SerializedContainer | IContainer,\n                                                         containerRegistry?: ContainerRegistryMetadata,\n                                                         globalRegistry?: GlobalNodeRegistryMetadata): T => {\n  node.sub_container = Container.create(node.side, container, node, containerRegistry, globalRegistry);\n  return node;\n};\n\nexport class Container implements IContainer {\n  id: string | number;\n  name?: string;\n  serializedNodes?: SerializedNode[];\n  config: {\n    links_ontop?: boolean;\n  };\n  side: Side;\n  client_socket: SocketIOClient.Socket; //SocketIOClient.Socket|SocketIO.Server;\n  server_dashboard_socket: Namespace;\n  server_editor_socket: Namespace;\n  db: Database;\n  dashboard: Dashboard;\n  renderers: Array<Renderer>;\n  isRunning: boolean;\n  iteration: number;\n  tag?: string;\n  globaltime: number;\n  runningtime: number;\n  fixedtime: number;\n  fixedtime_lapse: number;\n  elapsed_time: number;\n  starttime: number;\n  execution_timer_id: number | any;\n  onStopEvent: Function;\n  onExecuteStep: Function;\n  onAfterExecute: Function;\n  onPlayEvent: Function;\n  frame: number;\n  private readonly _itself: IFolderNode;\n  private readonly _nodeRegistry: NodeInContainerRegistry;\n\n  protected constructor(side: Side, id?: string | number, folderNode?: IFolderNode, properties?: any,\n                        containerRegistry?: ContainerRegistryMetadata,\n                        globalNodeRegistry?: GlobalNodeRegistryMetadata) {\n    this.renderers = null;\n    this.side = side;\n    this.id = id ?? folderNode?.id ?? IdGenerator.UNINITIALIZED;\n    this.name = this.id === IdGenerator.ROOT ? 'Main' : properties?.name ?? '';\n    this.config = Utils.cloneObject(properties?.config);\n    this._itself = folderNode;\n    this._nodeRegistry = new NodeInContainerRegistry(this, containerRegistry, globalNodeRegistry);\n    this.clear();\n  }\n\n  static initRoot(side: Side, containerRegistry?: ContainerRegistryMetadata,\n                  globalNodeRegistry?: GlobalNodeRegistryMetadata) {\n    return new Container(side, IdGenerator.ROOT, null, null, containerRegistry, globalNodeRegistry);\n  }\n\n  static create(side: Side,\n                obj?: { id: string | number; name?: string; config?: any; serializedNodes?: any[] },\n                folderNode?: IFolderNode,\n                containerRegistry?: ContainerRegistryMetadata,\n                globalNodeRegistry?: GlobalNodeRegistryMetadata): Container {\n    let container = new Container(side, obj?.id, folderNode, obj, containerRegistry, globalNodeRegistry);\n    container.serializedNodes = obj?.serializedNodes;\n    return container;\n  }\n\n  /**\n   * @deprecated Use {@link NodeTypeRegistry#registerNodeType}\n   */\n  static registerNodeType(\n    type: string,\n    node_class: any,\n    parentContainerNodeType: string = null,\n    show_in_menu: boolean           = true,\n    recursive: boolean              = false,\n    alwaysInsideContainer: boolean  = false,\n  ): void {\n    NodeTypeRegistry.registerNodeType(type, node_class, parentContainerNodeType, show_in_menu, recursive,\n                                      alwaysInsideContainer);\n  }\n\n  nodeItself(): ContainerNode {\n    return this.id === IdGenerator.ROOT ? null : <ContainerNode>this._itself;\n  }\n\n  nodeRegistry(): NodeInContainerRegistry {\n    return this._nodeRegistry;\n  }\n\n  /**\n   * @deprecated Use {@link #nodeRegistry()}\n   * @return {Node[]}\n   */\n  subNodes() {\n    return this.nodeRegistry().list();\n  }\n\n  /**\n   * @deprecated Use {@link #nodeRegistry()}\n   * @param {string | number | Node} node\n   * @return {Node}\n   */\n  getSubNode(node: string | number | Node): Node {\n    return this.nodeRegistry().get(node);\n  }\n\n  /**\n   * Removes all nodes from this container\n   */\n  clear(): void {\n    this.stop();\n    this.isRunning = false;\n\n    //nodes\n    this.nodeRegistry().clear();\n\n    //iterations\n    this.iteration = 0;\n\n    this.config = {};\n\n    //timing\n    this.globaltime = 0;\n    this.runningtime = 0;\n    this.fixedtime = 0;\n    this.fixedtime_lapse = 0.01;\n    this.elapsed_time = 0.01;\n    this.starttime = 0;\n\n    this.sendActionToRenderer('clear');\n  }\n\n  /**\n   * Stops the execution loop of the container\n   */\n  stop(): void {\n    if (!this.isRunning) return;\n\n    this.isRunning = false;\n\n    if (this.onStopEvent) this.onStopEvent();\n\n    if (this.execution_timer_id != null) clearInterval(this.execution_timer_id);\n    this.execution_timer_id = null;\n\n    for (let node of this.nodeRegistry().list()) {\n      if (node['onStopContainer']) node['onStopContainer']();\n    }\n  }\n\n  /**\n   * Attach renderer to this container\n   * @param renderer\n   */\n  attachRenderer(renderer: Renderer): void {\n    if (renderer.container && renderer.container != this) {\n      renderer.deselectAllNodes();\n      renderer.container.detachRenderer(renderer);\n    }\n\n    renderer.container = this;\n    if (!this.renderers) this.renderers = [];\n    this.renderers.push(renderer);\n\n    //reset active nodes\n    for (let node of renderer.container.nodeRegistry().list()) {\n      node.boxcolor = renderer.theme.NODE_DEFAULT_BOXCOLOR;\n      node.setDirtyCanvas(true, true);\n    }\n  }\n\n  /**\n   * Detach renderer from this container\n   * @param renderer\n   */\n  detachRenderer(renderer: Renderer): void {\n    if (!this.renderers) return;\n\n    let pos = this.renderers.indexOf(renderer);\n    if (pos == -1) return;\n\n    renderer.container = null;\n\n    this.renderers.splice(pos, 1);\n    if (this.renderers.length == 0) delete this.renderers;\n  }\n\n  /**\n   * Starts running this container every interval milliseconds.\n   * @param interval amount of milliseconds between executions\n   */\n  //STARTS from here\n  run(interval: number = 1): void {\n    if (this.isRunning) return;\n\n    this.isRunning = true;\n\n    if (this.onPlayEvent) this.onPlayEvent();\n\n    for (let node of this.nodeRegistry().list()) {\n      if (node['onRunContainer']) node['onRunContainer']();\n    }\n\n    //launch\n    this.starttime = Utils.getTime();\n    let that = this;\n\n    //on each loop interval this runStep gets calls for 1 time, currently the inter == 100ms\n    this.execution_timer_id = setInterval(() => that.runStep(1), interval);\n  }\n\n  /**\n   * Run N steps (cycles) of the container\n   * @param steps number of steps to run, default is 1\n   */\n  // THIS block gets called on LOOP_INTERVAL, CURRENTLY this is 100ms on .env and whatever comes in this 100ms inside, those outputs gets ignored, coz we only read value on 100ms\n  runStep(steps: number = 1): void {\n    let start = Utils.getTime();\n    this.globaltime = 0.001 * (start - this.starttime);\n\n    for (let i = 0; i < steps; i++) {\n      this.transferDataBetweenNodes(); // this one is the main block where we are doing all operation to see whether our in/out got changed or not //main block to calculate whether our in/out got changed or not\n\n      let now = Date.now();\n\n      for (let node of this.nodeRegistry().list()) {\n        // on each 100ms we are looping on this block, and we are seeing whether that interval is exceeded to EXECUTE_INTERVAL or not, if exceeded then call onExecute, so this block is only useful for the operation\n        // which should be greater than 100ms to perform some kind of action\n        if (\n          !node.EXECUTE_INTERVAL ||\n          (node.EXECUTE_INTERVAL && !node.executeLastTime) ||\n          (node.executeLastTime && now - node.executeLastTime >= node.EXECUTE_INTERVAL)\n        ) {\n          if (node['onExecute']) node['onExecute']();\n\n          if (node.EXECUTE_INTERVAL) node.executeLastTime = now;\n        }\n\n        // this updated is came from transferDataBetweenNodes\n        // these UPDATE_INPUTS_INTERVAL is also plays roles as Debounce, normally we don't have value on the node for this variable, so it directly enters into the block\n        if (node.isUpdated) {\n          if (\n            !node.UPDATE_INPUTS_INTERVAL ||\n            (node.UPDATE_INPUTS_INTERVAL && !node.updateInputsLastTime) ||\n            (node.updateInputsLastTime && now - node.updateInputsLastTime >= node.UPDATE_INPUTS_INTERVAL)\n          ) {\n            if (node['onInputUpdated']) node['onInputUpdated']();//here we get called our onInputUpdated\n\n            node.isUpdated = false;\n\n            for (let i in node.inputs) if (node.inputs[i].updated) node.inputs[i].updated = false;\n\n            if (node.UPDATE_INPUTS_INTERVAL) node.updateInputsLastTime = now; //this is for restricting multiple values on that interval and to act like Debounce\n          }\n        }\n      }\n\n      this.fixedtime += this.fixedtime_lapse;\n\n      if (this.onExecuteStep) this.onExecuteStep();\n    }\n\n    if (this.onAfterExecute) this.onAfterExecute();\n\n    let elapsed = Utils.getTime() - start;\n    if (elapsed == 0) elapsed = 1;\n    this.elapsed_time = 0.001 * elapsed;\n    this.globaltime += 0.001 * elapsed;\n    this.iteration += 1;\n  }\n\n  transferDataBetweenNodes() {\n    // it runs on each 100ms interval so\n    //all nodes\n    for (let node of this.nodeRegistry().list()) {\n      if (!node.outputs) continue;\n\n      //all outputs\n      for (let o in node.outputs) {\n        let output = node.outputs[o];\n        if (!output.updated) continue;// when updated is true from output of each node we dont break the loop and it will go down\n\n        output.updated = false; // make update false, hence we will not get as updated=true on next loop\n\n        if (output.links == null) continue;//if links is not no need to do any operation\n\n        //all output links\n        for (let link of output.links) { //loop on all links\n          let target_node = this.nodeRegistry().get(link.nodeId); // this is where we had an issue, coz node was deleted but link wasn't\n          if (!target_node) {\n            this.debugErr(`Can't transfer data from node ${node.getReadableId()}. Target node not found`);\n            continue;\n          }\n\n          let target_id = link.ioId ?? link.slot;\n          let target_input = target_node.inputs[target_id];\n\n          if (!target_input) return;\n          target_input.data = Utils.parseValue(output.data, target_input.type); // Now change the input of target node, which is connected wit the output\n\n          target_node.isUpdated = true; //now we made the target node also updated as like on setOutputData, so that target node will perform same operation for it's targeted nodes\n          target_input.updated = true; // plays important role for onInputUpdated()\n        }\n      }\n    }\n  }\n\n  /**\n   * Returns the amount of time the container has been running in milliseconds\n   * @method getTime\n   * @returns number of milliseconds the container has been running\n   */\n  getTime(): number {\n    return this.globaltime;\n  }\n\n  /**\n   * Sends action to renderer\n   * @param action\n   * @param params\n   */\n  sendActionToRenderer(action: string, params?: Array<any>): void {\n    if (!this.renderers) return;\n\n    for (let i = 0; i < this.renderers.length; ++i) {\n      let c = this.renderers[i];\n      if (c[action]) c[action].apply(c, params);\n    }\n  }\n\n  /**\n   * Get nodes\n   */\n  getNodes(includeSubContainers = false): Array<Node> {\n    let nodes = [];\n\n    addNodes(this.nodeRegistry().list());\n\n    function addNodes(_nodes: Node[]) {\n      for (let n of _nodes) {\n        nodes.push(n);\n\n        if (includeSubContainers && isFolderNode(n)) {\n          addNodes((<ContainerNode>n).sub_container.nodeRegistry().list());\n        }\n      }\n    }\n\n    return nodes;\n  }\n\n  /**\n   * Returns a list of nodes that matches a type\n   * @param type the name of the node type\n   * @param includeSubContainers\n   * @returns a list with all the nodes of this type\n   */\n  getNodesByType(type: string, includeSubContainers = false): Array<Node> {\n    type = type.toLowerCase();\n    let r = [];\n    //TODO: performance, refactor it\n    for (let node of this.nodeRegistry().list()) {\n      if (node.type.toLowerCase() == type) r.push(node);\n    }\n\n    if (includeSubContainers) {\n      for (let node of this.nodeRegistry().list()) {\n        if (node instanceof ContainerNode) {\n          let nodes = (<ContainerNode>node).sub_container.getNodesByType(type, true);\n          nodes.forEach(n => r.push(n));\n        }\n      }\n    }\n\n    return r;\n  }\n\n  /**\n   * Returns a list of nodes that are an instance of the provided node-class (or one of its subclasses)\n   * @returns a list with all the nodes of this type\n   * @param nodeClass\n   * @param includeSubContainers\n   */\n  getNodesByClass(nodeClass: Function, includeSubContainers = false): Array<Node> {\n    let r = [];\n    //TODO: performance, refactor it\n    for (let node of this.nodeRegistry().list()) {\n      if (node instanceof nodeClass) r.push(node);\n    }\n\n    if (includeSubContainers) {\n      for (let node of this.nodeRegistry().list()) {\n        if (node instanceof ContainerNode) {\n          let nodes = (<ContainerNode>node).sub_container.getNodesByClass(nodeClass, true);\n          nodes.forEach(n => r.push(n));\n        }\n      }\n    }\n\n    return r;\n  }\n\n  getAllNodes(parent?: Node[],\n              parentId: string | number = 0): Array<{ id: string; name: string; isContainer: boolean; list?: Array<{ id: string; name: string }>; }> {\n    let list = [];\n    let nodes = parent ?? this.nodeRegistry().list();\n    nodes.forEach(node => {\n      if (node instanceof ContainerNode) {\n        list.push({\n                    id: node.sub_container.id,\n                    name: node.sub_container.name,\n                    parentId,\n                    list: this.getAllNodes(node.sub_container.nodeRegistry().list(), node.sub_container.id),\n                    isContainer: true,\n                    iconImageUrl: node.iconImageUrl,\n                    icon: node.icon,\n                  });\n      } else {\n        list.push({\n                    id: node.id,\n                    parentId,\n                    name: node.name ? `${node.name}: ${node.title}` : node.title,\n                    isContainer: false,\n                    iconImageUrl: node.iconImageUrl,\n                    icon: node.icon,\n                  });\n      }\n    });\n    return list.sort((a, b) => {\n      if (a.isContainer && b.isContainer) {\n        return a.id - b.id;\n      } else if (a.isContainer && !b.isContainer) {\n        return -1;\n      } else {\n        return 1;\n      }\n    });\n  }\n\n  /**\n   * Set canvas to dirty for update\n   * @param foreground\n   * @param background\n   */\n  setDirtyCanvas(foreground?: boolean, background?: boolean): void {\n    this.sendActionToRenderer('setDirty', [foreground, background]);\n  }\n\n  /**\n   * Executes a callback with the editor instance if available\n   */\n  runWithEditor(f: (Editor) => void) {\n    const editor = get(this, 'renderers[0].editor');\n    if (editor) f(editor);\n  }\n\n  /**\n   * @returns serialized container\n   */\n  serialize(): SerializedContainer {\n    return {\n      id: this.id,\n      name: this.name,\n      config: this.config,\n      serializedNodes: this.nodeRegistry().list().map(node => SerializableHelper.serialize(node)),\n    };\n  }\n\n  logInfo(message: string): void {\n    logger.info(`[${this.id}] ${message}`);\n  }\n\n  /**\n   * Print debug message to console\n   * @param message\n   */\n  debug(message: string): void {\n    logger.debug(`[${this.id}] ${message}`);\n  }\n\n  /**\n   * Print error message to console\n   * @param message\n   */\n  debugWarn(message: string): void {\n    logger.warn(`[${this.id}] ${message}`);\n  }\n\n  /**\n   * Print error message to console\n   * @param message\n   */\n  debugErr(message: string): void {\n    logger.error(`[${this.id}] ${message}`);\n  }\n\n}\n","import { isEmpty } from '../utils/helper';\nimport { Link } from './node-link';\nimport { Deserializable, Serializable, SerializableHelper } from './serializable';\nimport Validation from './validation/Validation';\n\nexport enum Type {\n  STRING   = 'string',\n  NUMBER   = 'number',\n  BOOLEAN  = 'boolean',\n  ANY      = 'any',\n  JSON     = 'json',\n  DROPDOWN = 'dropdown', // it is same as `ANY`, but when it has setting as pair it checks for validity\n}\n\nexport type IOType = 'input' | 'output';\n\nexport interface SerializedNodeIO {\n  name: string;\n  type: Type;\n  label?: string;\n  locked?: boolean;\n  pos?: number;\n  round?: boolean;\n  subNodeId?: number | string;\n}\n\nexport interface SerializedNodeInput extends SerializedNodeIO {\n  link?: Link;\n  isOptional?: boolean;\n  setting: InputSetting;\n}\n\nexport interface SerializedNodeOutput extends SerializedNodeIO {\n  links?: Array<Link>;\n}\n\nexport interface NodeIO extends SerializedNodeIO, Serializable<SerializedNodeIO> {\n  data?: any;\n  updated?: boolean;\n}\n\nexport interface SerializedNodeSetting {\n\n  description: string;\n  type?: SettingType;\n  value?: any;\n  config?: any;\n}\n\nexport class NodeSetting implements SerializedNodeSetting, Serializable<SerializedNodeSetting>,\n                                    Deserializable<SerializedNodeSetting> {\n\n  description: string;\n  type?: SettingType;\n  value?: any;\n  config?: any;\n  validation?: Validation;\n  toJSON?: Function; // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#toJSON_behavior\n\n  constructor(description: string, type?: SettingType, value?: any, config?: any, validation?: Validation,\n              toJSON?: Function) {\n    this.description = description;\n    this.type = type;\n    this.value = value;\n    this.config = config;\n    this.validation = validation;\n    this.toJSON = toJSON;\n  }\n\n  static create(object: {\n    description: string, type?: SettingType, value?: any, config?: any, validation?: Validation, toJSON?: Function\n  }): NodeSetting {\n    return new NodeSetting(object.description, object.type, object.value, object.config, object.validation,\n                           object.toJSON);\n  };\n\n  serialize(): SerializedNodeSetting {\n    return {\n      description: this.description,\n      type: this.type,\n      config: SerializableHelper.serialize<object>(this.config),\n      value: SerializableHelper.serialize<object>(this.value),\n    };\n  }\n\n  deserialize(serializedObj: SerializedNodeSetting): NodeSetting {\n    return NodeSetting.create(serializedObj);\n  }\n}\n\nabstract class AbstractNodeIO implements NodeIO {\n\n  name: string;\n  type: Type;\n  label?: string;\n  locked?: boolean;\n  pos?: number;\n  round?: boolean;\n  subNodeId?: number | string;\n  data?: any;\n  updated?: boolean;\n\n  protected constructor(name: string, type: Type, label?: string, locked?: boolean, pos?: number,\n                        round?: boolean, data?: any, updated?: boolean, subNodeId?: number | string) {\n    this.name = name;\n    this.type = type;\n    this.label = label;\n    this.locked = locked;\n    this.pos = pos;\n    this.round = round;\n    this.subNodeId = subNodeId;\n    this.data = data;\n    this.updated = updated;\n  }\n\n  serialize(): SerializedNodeIO {\n    return {\n      name: this.name,\n      type: this.type,\n      label: this.label,\n      locked: this.locked,\n      pos: this.pos,\n      round: this.round,\n      subNodeId: this.subNodeId,\n    } as SerializedNodeIO;\n  }\n\n}\n\nexport class NodeOutput extends AbstractNodeIO\n  implements NodeIO, SerializedNodeOutput, Serializable<SerializedNodeOutput>, Deserializable<SerializedNodeOutput> {\n\n  links?: Link[];\n\n  constructor(name: string, type: Type, links?: Array<Link>, label?: string, locked?: boolean, pos?: number,\n              round?: boolean, data?: any, updated?: boolean, subNodeId?: number | string) {\n    super(name, type, label, locked, pos, round, data, updated, subNodeId);\n    this.links = isEmpty(links) ? [] : links.map(l => Link.create(l));\n  }\n\n  static create(object: {\n    name: string, type: Type, links?: Array<Link>, label?: string, locked?: boolean,\n    pos?: number, round?: boolean, data?: any, updated?: boolean, subNodeId?: number | string\n  }) {\n    return new NodeOutput(object.name, object.type, object.links, object.label, object.locked, object.pos, object.round,\n                          object.data, object.updated, object.subNodeId);\n  }\n\n  serialize(): SerializedNodeOutput {\n    return { ...super.serialize(), links: this.links?.map(l => SerializableHelper.serialize(l)) };\n  }\n\n  deserialize(serializedObj: SerializedNodeOutput): NodeOutput {\n    return NodeOutput.create({ ...serializedObj });\n  }\n\n}\n\nexport interface InputSetting {\n  exist: boolean; // bind setting exist or not\n  nullable: boolean; // whether null value is acceptable or not\n  hidden: boolean;\n}\n\nexport class NodeInput extends AbstractNodeIO\n  implements NodeIO, SerializedNodeInput, Serializable<SerializedNodeInput>, Deserializable<SerializedNodeInput> {\n\n  link?: Link;\n  isOptional?: boolean;\n  setting: InputSetting;\n\n  constructor(name: string, type: Type, setting: InputSetting, link?: Link, isOptional?: boolean, label?: string,\n              locked?: boolean, pos?: number, round?: boolean, data?: any, updated?: boolean,\n              subNodeId?: number | string) {\n    super(name, type, label, locked, pos, round, data, updated, subNodeId);\n    this.link = Link.create(link);\n    this.isOptional = isOptional;\n    this.setting = setting;\n  }\n\n  static create(object: {\n    name: string, type: Type, setting: InputSetting, link?: Link, isOptional?: boolean, label?: string,\n    locked?: boolean, pos?: number, round?: boolean, data?: any, updated?: boolean, subNodeId?: number | string\n  }) {\n    return new NodeInput(object.name, object.type, object.setting, object.link, object.isOptional, object.label,\n                         object.locked, object.pos, object.round, object.data, object.updated, object.subNodeId);\n  }\n\n  serialize(): SerializedNodeInput {\n    return {\n      ...super.serialize(),\n      link: SerializableHelper.serialize(this.link),\n      setting: SerializableHelper.serialize(this.setting),\n      isOptional: this.isOptional,\n    } as SerializedNodeInput;\n  }\n\n  deserialize(serializedObj: SerializedNodeInput): NodeInput {\n    return NodeInput.create({ ...serializedObj });\n  }\n}\n\nexport interface IInputInfo {\n  input: NodeInput;\n  slot: number;\n  link_pos: [number, number];\n  locked: boolean;\n}\n\nexport interface IOutputInfo {\n  output: NodeOutput;\n  slot: number;\n  link_pos: [number, number];\n  locked: boolean;\n}\n\nexport const convertStringToType = (type: string): Type => {\n  switch (type) {\n    case Type.STRING:\n      return Type.STRING;\n    case Type.NUMBER:\n      return Type.NUMBER;\n    case Type.BOOLEAN:\n      return Type.BOOLEAN;\n    case Type.JSON:\n      return Type.JSON;\n  }\n  return Type.ANY;\n};\n\nexport enum SettingType {\n  STRING      = 'string',\n  NUMBER      = 'number',\n  BOOLEAN     = 'boolean',\n  READONLY    = 'readonly',\n  DROPDOWN    = 'dropdown',\n  TREE_SELECT = 'treeselect',\n  AUTOCOMPLETE = 'autocomplete',\n  CODE_AREA   = 'codearea',\n  PASSWORD    = 'password',\n  GROUP       = 'group',\n}\n\nexport const convertSettingType = (type: SettingType): Type => {\n  switch (type) {\n    case SettingType.STRING:\n      return Type.STRING;\n    case SettingType.NUMBER:\n      return Type.NUMBER;\n    case SettingType.BOOLEAN:\n      return Type.BOOLEAN;\n  }\n  return Type.ANY;\n};\n\nexport const convertType = (type: Type): SettingType => {\n  switch (type) {\n    case Type.STRING:\n      return SettingType.STRING;\n    case Type.NUMBER:\n      return SettingType.NUMBER;\n    case Type.BOOLEAN:\n      return SettingType.BOOLEAN;\n    case Type.DROPDOWN:\n      return SettingType.DROPDOWN;\n  }\n  return SettingType.STRING;\n};\n","import Icons from \"./node-icons\";\nimport EdgeHelp from \"./utils/help/protocols/edge-28\";\n\n\n\nexport const NODE_INFO = {\n    'boolean': {\n        'and': { title: 'AND', description: \"Performs a logical 'AND' operation (output 'true' when ALL inputs are 'true'). You can specify the number of inputs in the node settings.\" },\n        'min-on-off': { title: 'Min On Off', description: \"‘output’ matches ‘input’ but is delayed by the 'minOn' and 'minOff' durations. ‘output’ will remain 'true' for 'minOn' duration then match the ‘input’ value. ‘output’ will remain 'false' for 'minOff' duration then match the ‘input’ value. 'minOn' and 'minOff' delays are cancelled when 'reset' transitions from 'false' to 'true. ‘minOn active’ is ‘true’ during ‘minOn’ periods. ‘minOff active’ is ‘true’ during ‘minOff’ periods.  'minOn' and 'minOff' units can be configured from settings. Maximum ‘minOn’ and ‘'minOff'’ setting is 587 hours.   (See Figure A.)\" },\n        'not': { title: 'NOT', description: \"Performs a logical 'NOT' operation (output will be the inverse of the input).\" },\n        'off-delay': { title: 'Off Delay', description: \"‘output’ matches ‘input’, but ‘output’ transitions from 'true' to 'false' are delayed by 'delay' duration. The delay is cancelled when 'reset' transitions from 'false' to 'true. ‘offDelay active’ is ‘true’ during ‘offDelay’ periods. 'delay' units can be configured from settings.  Maximum ‘delay’ setting is 587 hours. (See Figure A.)\" },\n        'on-delay': { title: 'On Delay', description: \"‘output’ matches ‘input’, but ‘output’ transitions from 'false' to 'true' are delayed by 'delay' duration. The delay is cancelled when 'reset' transitions from 'false' to 'true. ‘onDelay active’ is ‘true’ during ‘onDelay’ periods. 'delay' units can be configured from settings. Maximum ‘delay’ setting is 587 hours.  (See Figure A.)\" },\n        'one-shot': { title: 'One Shot', description: \"Triggers output to 'true' for 'interval' duration when 'trigger' input transitions from 'false' to 'true.  Output is reset to 'false' when 'reset' transitions from 'false' to 'true. 'interval' units can be configured from settings. Maximum ‘interval’ setting is 587 hours. (See Figure A.).  If 'Retrigger While Output Is 'true'' setting is false, then 'fire' input transitions will have an effect when output is 'false'.\" },\n        'or': { title: 'OR', description: \"Performs a logical 'OR' operation (output 'true' when ANY input is 'true'). You can specify the number of inputs in the node settings.\" },\n        'ticker': { title: 'Ticker', description: \"While 'enable' is 'true', ‘output’ will change to 'true' at every 'interval' period. If 'Generate False' setting is set to ‘true’, ‘output’ will be 'false' for the second half of the 'interval' period. When 'enable' is 'false', ‘output’ will be 'false'. 'interval' units can be configured from settings.  Maximum ‘interval’ setting is 587 hours.  (See Figure A.)\" },\n        'toggle': { title: 'Toggle', description: \"When the 'input' transitions from 'false' to 'true', 'output' will switch between 'false'/'true'.   (See Figure A.)\" },\n        'xor': { title: 'XOR', description: \"Performs a logical 'XOR' operation (output 'true' when EITHER input is 'true', but not both). Limited to only 2 inputs.\" },\n    },\n    \"cumulocity\": {\n        \"cumulocity-device\": { title: 'Cumulocity Device', description: \"see https://cumulocity.com/guides/concepts/introduction/\" },\n        \"cumulocity-point\": { title: 'Cumulocity Point (History)', description: \"see https://cumulocity.com/guides/concepts/introduction/\" },\n        \"cumulocity-alarm\": { title: 'Cumulocity Alarm', description: \"see https://cumulocity.com/guides/concepts/introduction/\" },\n        \"cumulocity-operation\": { title: 'Cumulocity Operation', description: \"see https://cumulocity.com/guides/concepts/introduction/\" },\n    },\n    'compare': {\n        'between': { title: 'Between', description: \"'output' is 'true' when 'in 1' is within the numeric range between 'from' value and 'to' value (exclusive), otherwise 'output' is 'false'.  'output' will be 'false' if either input is undefined. 'outp not' is always the opposite of 'output'.\" },\n        'equal': { title: 'Equal', description: \"'output equal' is 'true' when 'in 1' and 'in 2' are identical, otherwise 'output equal' is 'false'.  Can be used to compare boolean, numeric, and string values; it can also be used to compare 'null' values. 'output not equal' is always the opposite of 'out equal'.\" },\n        'greater-than': { title: 'Greater than', description: \"'out >' is 'true' when 'in 1' is greater than 'in 2', otherwise 'out >' is 'false'. 'out >=' is 'true' when 'in 1' is greater than or equal to 'in 2', otherwise 'out>=' is 'false'.  Both Outputs will be 'false' if either input is undefined.\" },\n        'hysteresis': { title: 'Hysteresis', description: \"Boolean 'output' based on 'input' in relation to 'risingEdge' and 'fallingEdge' setpoints.  There are 2 cases: 'risingEdge' greater than 'fallingEdge', and 'risingEdge' less than 'fallingEdge'. [For 'risingEdge' > 'fallingEdge'] => 'output' is 'true' when 'input' is greater than 'risingEdge'.  'output' is  'false' when 'input' is less than 'fallingEdge'. [For 'fallingEdge' < 'fallingEdge'] => 'output' is 'false' when 'input' is greater than 'risingEdge'.  'output' is 'true' when 'input' is less than 'fallingEdge'.  In both cases, when 'input' is between 'risingEdge' and 'fallingEdge', 'output' will remain in its current state.\" },\n        'less-than': { title: 'Less than', description: \"'out <' is 'true' when 'in 1' is less than 'in 2', otherwise 'out <' is 'false'.  'out <=' is 'true' when 'in 1' is less than or equal to 'in 2', otherwise 'out <=' is 'false'.  Both outputs will be 'false' if either input is undefined.\" },\n        'type-check': { title: 'Type Check (string)', description: \"'output' is 'true' when 'input' type matches 'Type to check' setting.  'isType' outputs the type of the 'input' value.\" },\n    },\n    \"connection\": {\n        \"dispatch-listener\": { title: \"Dispatch Listener\", description: \"Listens dispatch values\", iconImageUrl: Icons.aiIcon },\n        \"link-transmitter-single\": { title: \"Link Transmitter Single\", description: \"This node works in conjunction with link-receiver node, and provides a connection of nodes without the graphical wires. ‘in #’ inputs will be sent to the corresponding ‘out #’ output on link-receiver nodes with matching ‘Channel Number’ settings. The number of inputs is configurable from settings.\", iconImageUrl: Icons.aiIcon },\n        \"link-receiver-single\": { title: 'Link Receiver Single', description: \"This node works in conjunction with link-transmitter node and provides a connection of nodes without the graphical wires. ‘out #’ outputs will match the corresponding ‘in #’ input from link-transmitter nodes with matching ‘Channel Number’ settings. The number of outputs is configurable from settings.\", iconImageUrl: Icons.aiIcon },\n        \"link-transmitter\": { title: 'Link Transmitter', description: \"This node works in conjunction with link-receiver node, and provides a connection of nodes without the graphical wires. ‘in #’ inputs will be sent to the corresponding ‘out #’ output on link-receiver nodes with matching ‘Channel Number’ settings. The number of inputs is configurable from settings.\" },\n        \"link-receiver\": { title: 'Link Receiver ', description: \"This node works in conjunction with link-transmitter node and provides a connection of nodes without the graphical wires. ‘out #’ outputs will match the corresponding ‘in #’ input from link-transmitter nodes with matching ‘Channel Number’ settings. The number of outputs is configurable from settings.\" },\n        'hub': { title: 'Hub', description: \"This node merges multiple inputs into a single stream/output.  Any new 'input' ('in #') value will be passed to 'output'.  The number of inputs can be modified from settings.\" },\n    },\n    'container': {\n        'folder': { title: 'Folder', description: \"Contains other nodes\" },\n        'folder-input': { title: 'Folder Input', description: \"Input of the container\", iconImageUrl: Icons.aiIcon },\n        'folder-output': { title: 'Folder Output', description: \"Output of the container\", iconImageUrl: Icons.aiIcon },\n    },\n    'conversion': {\n        'bit-mask-single': { title: 'Bit Mask Single', description: \"A node to mask a single bit of a byte\" },\n        'bit-mask-multiple': { title: 'Bit Mask Multiple', description: \"A node to mask certain bits of a byte\" },\n        'int-to-bits': { title: 'Bit Split', description: \"A node to split an Int (or Int array) into all individual bits\\nAssuming all Ints are 8 bits (UINT8)\" },\n        'bool-to-int': { title: 'Bool-to-Int Conversion', description: \"This node converts a Boolean to a Number.\" },\n        'int-to-bool': { title: 'Int-to-Bool Conversion', description: \"This node converts a Number to a Boolean.\" },\n        'string-to-bool': { title: 'String-to-Bool Conversion', description: \"This node converts a String to a Boolean.\" },\n        'buffer-to-hex-string': { title: 'Buffer to hex string', description: \"\" },\n        'buffer-to-num': { title: 'Buffer To Num', description: \"A node to convert byte array (string or json array) (8bit words or 16bit words) to a num with Big-endian And Little-endian format. Example [16691, 34079] = 11.22 (BEB_BEW, FLOAT32)\" },\n        'convert-units': { title: 'Unit converter', description: \"This node converts units.\" },\n        'hex-string-to-buffer': { title: 'Hex string to Buffer', description: \"\" },\n        'int-to-buffer': { title: 'Int to Buffer', description: \"A node to convert an int to a buffer array to an int with Big-endian And Little-endian format. This node is used for testing data types\" },\n    },\n    'count': {\n        'any-event-counter': { title: 'Any Event Counter', description: \"‘count' increases by 1 every time an event occurs at 'input'. Any incoming value, including null, will be taken. 'count' will be reset to 0 when 'reset' transitions from 'false' to 'true.  ‘toggle’ will alternate between ‘true’ and ‘false’, changing each time count increases.\" },\n        'counter': { title: 'Counter', description: \"'count' increases by 1 every time 'countUp' transitions from 'false' to 'true.  'count' decreases by 1 every time 'countDown' transitions from 'false' to 'true.  'count' will be set to 'set value' when 'reset' transitions from 'false' to 'true.\" },\n        'interval-ramp': { title: 'Interval Ramp', description: \"‘output' changes at every 'interval' period, while 'enable' is set to 'true'. 'output' will change by the 'step' value on each change (if a full 'step' would cause the output to be greater than 'max', or less than 'min' it will be limited by 'max' or 'min' respectively). 'output' will first ramp up to 'max' then it will change directions and ramp down to 'min'. 'output' will be reset to 'min' when 'reset' transitions from 'false' to 'true. If ‘Ramp Up Only’ setting is ticked, the ramp down stage will be bypassed and ‘output’ will be reset back to ‘min’ value when it reaches the ‘max’ value. 'interval’ units can be configured from settings.  Maximum ‘interval’ setting is 587 hours.\" },\n        'triggered-ramp': { title: 'Triggered Ramp', description: \"'output' changes on every time 'trigger' transitions from 'false' to 'true'. If 'count on true->false?' setting is enabled, 'output' will also change on 'false' to 'true' transition.   'output' will change by the 'step' value on each change (if a full 'step' would cause the output to be greater than 'max', or less than 'min' it will be limited by 'max' or 'min' respectively).  'output' will first ramp up to 'max' then it will change directions and ramp down to 'min'.  'output' will be reset to 'min' when 'reset' transitions from 'false' to 'true.\" },\n        'waveform': { title: 'Waveform', description: \"This node generates a sequence of numbers based on the selected settings; these sequences (waveforms) are of the form 'Ramp', 'Sine', 'Square', 'Triangle', and 'Sawtooth'. While 'enable' is 'true', 'output' will produce the next number in the sequence after every 'interval' duration. The period (how often the waveform pattern repeats) is defined by 'period'. The amplitude of the waveform is defined by 'amplitude'. The waveform can be inverted by setting 'Invert Output' to 'true' in settings. The waveform will reset to its starting position if 'reset' transitions from 'false' to 'true'.  'interval' and ‘period’ units can be configured from settings.  Maximum 'interval' and ‘period’ setting is 587 hours.\" },\n    },\n    'csv': {\n        'csv-merge-columns': { title: 'CSV Merge Columns', description: \"This node merges the columns of properly formatted CSV strings.  ‘merge’ CSV string will be joined with the ‘original’ CSV string.  The ‘merge’ CSV columns will be added to the right of the ‘original’ CSV columns.  ‘null’ will be added to rows where no value exists for that column.  No error checking.\" },\n        'csv-merge-rows': { title: 'CSV Merge Rows', description: \"This node merges the rows of properly formatted CSV strings.  ‘merge’ CSV string will be joined with the ‘original’ CSV string.  The ‘merge’ CSV rows will be added below the ‘original’ CSV rows.  Only the ‘original’ header titles will be kept.  No error checking.\" },\n    },\n    'custom-function': {\n        'fan-out-function': { title: 'Fan-Out Function', description: 'Evaluates a code block upon message reception, and sends results to multiple outputs. The incoming value is accessible through the variable named \"message\". Values can be emitted by using emit(index, value), where the index specifies the outlet. Emit can be called multiple times.' },\n        'merge-function': { title: 'Merge Function', description: 'Evaluates a code block upon message reception. The incoming values is accessible by index in the array named \"messages\". The \"return\" value will be emitted through the outlet, unless that value is null. The script runs every time any inlet receives a value.' },\n        'function': { title: 'Function', description: \"Evaluates a code block upon message reception. The incoming value is accessible through the variable named “message”. The “return” value will be emitted through the outlet. Null values are ignored.\" },\n        'uuid': { title: 'UUID', description: \"A node function to create a UUID identifier. A universally unique identifier (UUID) is an identifier standard used in software construction. A UUID is simply a 128-bit value. The meaning of each bit is defined by any of several variants. For human-readable display, many systems use a canonical format using hexadecimal text with inserted hyphen characters. For example : de305d54-75b4-431b-adb2-eb6b9e546014\" },\n    },\n    'dashboard': {\n        'button': { title: 'Button', description: \"Dashboard node which displays a push button on the dashboard.  When clicked it will send 'true' from the node 'output'.\" },\n        'label': { title: 'Label', description: \"Dashboard node which displays inputed values on the dashboard.\" },\n        'log': { title: 'Log', description: \"Dashboard node which displays a log of the values wired into 'input', these log entries have timestamps attached.  There is an option in settings to save the log entries to the Wires Database (DB).\" },\n        'progress': { title: 'Progress', description: \"Dashboard node which displays 'input' value from 0-100 on a progress bar on the dashboard.\" },\n        'slider': { title: 'Slider', description: \"Dashboard node which displays an input slider bar on the dashboard.  The user can move the slider bar knob to adjust the output between 0 and 100.  The slider can be overridden by wiring a Numeric into the node 'input'.\" },\n        'switch': { title: 'Switch', description: \"Dashboard node which displays a toggle switchon the dashboard.  When clicked it will switch the node 'output' between 'true' and 'false'.  The button text can be edited in settings.  The button can be overridden by wiring a Boolean into the node 'input'.\" },\n        'text-box': { title: 'Text-Box', description: \"Dashboard node which provides a user input text box on the dashboard.  The entered string is sent from the node 'output'.  The text-box can be overridden by wiring a String into the node 'input'.\" },\n        'chart': { title: 'Chart', description: \"Dashboard node which displays a chart of the values wired into 'input'.  Chart properties and types can be modified in settings.  There is an option in settings to save the chart entries to the Wires Database (DB).\" },\n    },\n    'debug': {\n        'console': { title: 'Console', description: \"Show value inside the console\" },\n        'comments': { title: 'Comments', description: \"This node is simply for adding some code comments\" },\n        'watch': { title: 'Watch', description: \"Show value of input\" },\n    },\n    'error': {\n        'link-check': { title: 'Link Error Check', description: \"This node is designed to check that links have the same value on both ends\" },\n        'output-check': { title: 'Output Error Check', description: \"This node is designed to check that outputs have a 'data' value\" },\n    },\n    'filter': {\n        'only-true': { title: 'Only True', description: \"This node filters ‘input’ values. Only ‘true’ values are passed to ‘output’.\" },\n        'only-false': { title: 'Only False', description: \"This node filters ‘input’ values. Only ‘false’ values are passed to ‘output’.\" },\n        'only-between': { title: 'Only Between', description: \"This node filters ‘input’ values. Only Numeric ‘input’ values between ‘min’ and ‘max’ are passed to ‘output’.\" },\n        'only-greater': { title: 'Only Greater', description: \"This node filters ‘input’ values. Only Numeric ‘input’ values greater than ‘threshold’ are passed to ‘output’.\" },\n        'only-lower': { title: 'Only Lower', description: \"This node filters ‘input’ values. Only Numeric ‘input’ values less than ‘threshold’ are passed to ‘output’.\" },\n        'only-equal': { title: 'Only Equal', description: \"This node filters ‘input’ values. Only ‘input’ values equal to ‘match’ are passed to ‘output’.\" },\n        'prevent-null': { title: 'Prevent Null', description: \"This node filters ‘input’ values. All ‘input’ values are passed to ‘output’ EXCEPT ‘null’.\" },\n        'prevent-equal': { title: 'Prevent Equal', description: \"This node filters ‘input’ values. All ‘input’ values are passed to ‘output’ EXCEPT ‘input’ values which are equal to ‘match’.\" },\n        'prevent-duplicates': { title: 'Prevent Duplicates', description: \"This node filters ‘input’ values. All ‘input’ values are passed to ‘output’ EXCEPT ‘input’ values which are equal to the previous ‘input’ value.\" },\n        'reduce-duplicates': { title: 'Reduce Duplicates', description: 'This node reduces the number of duplicated transmitted values. When the value on the input is changed, the node sends it to the output and stops receiving the same value at a specified time interval. The values that come at this time and that are the same are simply ignored, but the last value will be stored if it is enabled in the settings. When the interval passes, the last value is sent to the output. This reduces the number of events, if they are sent too often, but ensures that the node will always send the last actual value. You can disable the sending of the last value in the settings of the node. This may be necessary if you do not want to receive messages late, but then it is not guaranteed that the nodes connected to this node will have the last actual value. If you activate Reset pin, the node will reset the timer and send the last value, if it is enabled in the settings.' },\n        'reduce-events': { title: 'Reduce Events', description: 'This node reduces the number of transmitted values. When the value on the input is changed, the node sends it to the output and stops receiving at a specified time interval. The values that come at this time are simply ignored, but the last value will be stored if it is enabled in the settings. When the interval passes, the last value is sent to the output. This reduces the number of events, if they are sent too often, but ensures that the node will always send the last actual value. You can disable the sending of the last value in the settings of the node. This may be necessary if you do not want to receive messages late, but then it is not guaranteed that the nodes connected to this node will have the last actual value. If you activate Reset pin, the node will reset the timer and send the last value, if it is enabled in the settings.' }\n\n\n    },\n    'history': {\n        'data-store': { title: 'Data Store', description: \"The data-store node is used to store history log data locally. The data-store node has limited memory so the capacity is limited to 50 log entries; beware of using too many data-store nodes as it could affect the operation of Wires. The history logs can be configured to log in UTC or local timezone, and the output format can be set to ‘Array’, ‘CSV’, or ‘JSON’. If ‘Round up in increments of’ setting is used (not zero), then the timestamp will be rounded up to the nearest increment value step.\" },\n        'influx-db': { title: 'Influx-DB', description: \"A node for sending data to influxDB\" },\n        'influx-db-2': { title: 'Influx-DB-2', description: \"A node for sending data to influxDB v2\" },\n        'persistence': { title: 'Point Persistance', description: \"This node is used when you want to store the node output on a restart and also to not pass to the output any null values. While ‘enable’ is ‘true’, ‘output’ will send ‘input’ value at every ‘interval’ period. When ‘enable’ is ‘false’, ‘output’ will be ‘null’. ‘interval’ units can be configured from settings. Maximum ‘interval’ setting is 587 hours. On a trigger input the output will be sent even if the enable is set to false\" },\n        \n\n    },\n    \"hvac\": {\n        \"deadband\": { title: \"Deadband\", description: \"This node applies a Hysteresis function (see hysteresis node), with a deadband centered at ‘setpoint’. The ON direction can be reversed from settings.\" },\n        \"thermostat\": { title: \"Heat/Cool Thermostat\", description: \"This node functions as a Heat/Cool thermostat. While ‘enable’ is set to ‘true’, the node will function as follows: ‘CLG Mode’ will be set to ‘true’ if ‘input’ is greater than ‘setpoint’ + ‘CLG offset’, ‘CLG Mode’ will be set to ‘false’ if ‘input’ is less than ‘setpoint’. ‘HTG Mode’ will be set to ‘true’ if ‘input’ is less than ‘setpoint’ - ‘HTG offset’, ‘HTG Mode’ will be set to ‘false’ if ‘input’ is greater than ‘setpoint’. If ‘enable’ is ‘false’, ‘CLG Mode’ and ‘HTG Mode’ will both be set to ‘false’.\" },\n        \"pac-unit-control\": { title: \"PAC Unit Control\", description: \"This node functions as a Heat/Cool thermostat. While ‘enable’ is set to ‘true’, the node will function as follows: ‘CLG Mode’ will be set to ‘true’ if ‘input’ is greater than ‘setpoint’ + ‘CLG offset’, ‘CLG Mode’ will be set to ‘false’ if ‘input’ is less than ‘setpoint’. ‘HTG Mode’ will be set to ‘true’ if ‘input’ is less than ‘setpoint’ - ‘HTG offset’, ‘HTG Mode’ will be set to ‘false’ if ‘input’ is greater than ‘setpoint’. If ‘enable’ is ‘false’, ‘CLG Mode’ and ‘HTG Mode’ will both be set to ‘false’.\" },\n        \"PID\": { title: \"PID\", description: \"This node generates a PID ‘output’ based on input parameter settings. Inputs: Enable, Setpoint, Process Variable, inP (Proportional), inI (Integral), inD (Derivative), Direction, Interval, MaxOut, MinOut, Manual, and Bias. If ‘direction’ is ‘true’ the PID will be a Direct loop (‘output’ increases when ‘processVariable’ > ‘setpoint’), if ‘direction’ is ‘false’ the PID will be a Reverse loop (‘output’ increases when ‘processVariable’ < ‘setpoint’). ‘interval’ is the period that the PID output is re-calculated. ‘bias’ value is added to ‘output’. ‘manual’ will be the ‘output’ value when ‘enable’ is ‘false’. PID integral factor will be reset to 0 when ‘reset’ transitions from ‘false’ to ‘true’. 'interval’ units can be configured from settings. Maximum ‘interval’ setting is 587 hours.\" },\n        \"toggle-duration\": { title: \"Toggle Duration\", description: \"This node accepts a ‘pushButton’ input which triggers ‘output’ to ‘true’ for the ‘runtime’, or until ‘pushButton’ transitions from ‘false’ to ‘true’ within the ‘runtime’ period\" },\n        \"psychrometrics\": { title: \"Psychrometric Calcs (Metric/SI)\", description: \"This node provides psychrometric calculations based on a selection of: Dry Bulb Temp, Wet Bulb Temp, Dew Point, Relative Humidity, and Pressure. Inputs and Outputs as follows: (i) Dry bulb temperature in °F [IP] or °C [SI]; (i) Wet bulb temperature in °F [IP] or °C [SI]; (i) Atmospheric pressure in Psi [IP] or Pa [SI]; (o) Humidity ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]; (o) Dew point temperature in °F [IP] or °C [SI]; (o) Relative humidity [0-1]; (o) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]; (o) Moist air enthalpy in Btu lb⁻¹ [IP] or J kg⁻¹ [SI]; (o) Specific volume ft³ lb⁻¹ [IP] or in m³ kg⁻¹ [SI]. Input types can be selected from settings. Outputs will change based on selected input type. Unit system can be set from settings to be in: Metric/SI or Imperial/IP.\" },\n        \"energy-conversion\": { title: \"Energy Conversion (W·h)\", description: \"This node converts between Energy units watt-hour (W·h), kilowatt-hour (kW·h), British Thermal Unit (Btu), calorie (cal), joule(J), and joule(kJ). Input type can be selected from settings. Outputs will change based on selected input type.\" },\n        \"power-conversion\": { title: \"Power Conversion (kW)\", description: \"This node converts between Power units kilowatt (kW), Tons of Refrigeration (tons), British Thermal Unit per hour (Btu/h), and Electrical Horsepower (hp). Input type can be selected from settings. Outputs will change based on selected input type.\" },\n        \"volume-conversion\": { title: \"Volume Conversion (L)\", description: \"This node converts between Volume units Litre (L), Cubic Metre (m³), Cubic Foot (ft³), and Gallon (gal). Input type can be selected from settings. Outputs will change based on selected input type.\" },\n        \"temperature-conversion\": { title: \"Temperature Conversion (C-> F)\", description: \"This node converts between Temperature units: Celsius, Fahrenheit, Kelvin, and Rankine . Input type can be selected from settings. Outputs will change based on selected input type.\" },\n        \"atmospheric-pressure\": { title: \"Atmospheric Pressure (Meters-> Pa)\", description: \"This node converts ‘altitude’ to Atmospheric Pressure in various units: Pascal (Pa), Standard Atmosphere (atm), Bar (bar), and Pound-force per square inch (lbf/in2) . ‘altitude’ units can be set from settings to be in: Metric/SI (Meters-> Pa), or Imperial/IP (Feet-> Psi).\" },\n        \"pressure-conversion\": { title: \"Pressure Conversion (Pa)\", description: \"This node converts between Pressure units: Pascal (Pa), Standard Atmosphere (atm), Bar (bar), and Pound-force per square inch (lbf/in2) . Input type can be selected from settings. Outputs will change based on selected input type.\" },\n        \"actuator-sizing\": { title: \"Actuator Sizing\", description: \"This node provides a calculation for sizing of damper actuators based on cross sectional area.\" },\n        \"k-factor\": { title: \"K Factor\", description: \"This node computes the K Factor (Airflow Multiplier) based on Airflow(air hood), Differential Pressure, and Duct Area. This is frequenty used in VAV applications.\" },\n        \"dp-airflow\": { title: \"DP Airflow\", description: \"This node computes the Airflow based on a Differential Pressure, Duct Area, and a K-Factor. This is frequenty used in VAV applications.\" },\n        \"lead-lag-staging\": { title: \"Lead Lag Staging\", description: \"This node provides enable signals to equipment in a Lead-Lag configuration.\" },\n        \"lead-lag-switch\": { title: \"Lead Lag Switch\", description: \"This node rotates the lead unit between A and B when 'rotate' is toggled.\" },\n\n\n    },\n    \"json\": {\n        \"array-builder\": { title: 'Array Builder', description: \"Outputs an array of values based on the input values\" },\n        \"array-builder-number\": { title: 'Array Builder Number', description: \"Outputs an array of values based on the input values as numbers\" },\n        \"array-combine\": { title: 'Array Combine', description: \"This node will combine two array into one array\" },\n        \"json-builder\": { title: 'JSON builder', description: \"JSON builder\" },\n        \"json-enum-builder\": { title: 'JSON enum builder', description: \"JSON enum builder\" },\n        \"json-filter\": { title: 'Json Filter', description: \"Filter a json object Example: msg.myKey\" },\n        \"json-obj-filter\": { title: 'Json Array Of Object Filter', description: \"Filter a json object Example: msg.myKey\" },\n        \"json-prevent-duplicates\": { title: 'Json Prevent Duplicates', description: \"This node takes a json input and will return the json input if a value has changed\" }, \n        \"json-filter-compare\": { title: 'Json Comparison Compare (Equals)', description: \"This node provides several functions to compare a JSON object input, with a Boolean ‘output’. Available comparison functions are: Equals, Includes, Starts With, and Ends With. The comparison function is selected from settings.\" },\n        \"json-filter-multiple\": { title: 'Json Filter Multiple', description: \"Filter a json object to multiple outputs. There are two Output Update options for whether you want to update all keys or not (ALL: update as `null` when the key value will not be on the JSON, FOUND: don't update values and leave as is when key key value doesn't exist\" },\n        \"json-checker\": { title: 'JSON Checker', description: \"Checks ‘input’ for valid JSON format string.\" },\n        \"json-parse\": { title: 'Json Parse', description: \"Return JSON.stringify or a JSON.parse\" },\n        \"json-query\": { title: 'Json Query (JSONata)', description: \"Filter a json data using JSONata http://docs.jsonata.org/overview\" },\n        \"json-forEach-functions\": { title: 'Json ForEach functions', description: \"Return json object values.\" },\n        \"json-keys\": { title: 'Json Keys', description: \"Return json object values. Example: Object.keys(in)\" },\n    },\n    \"latch\": {\n        \"any-latch\": { title: 'Any data type Latch', description: \"The ‘input’ value (Input value can be any data type) is passed to ‘output’ when ‘latch’ transitions from ‘false’ to ‘true’; The ‘output’ value is maintained until the next ‘false’ to ‘true’ transition.\" },\n        \"bool-latch\": { title: 'Boolean Latch', description: \"The Boolean ‘input’ value is passed to ‘output’ when ‘latch’ transitions from ‘false’ to ‘true’; The ‘output’ value is maintained until the next ‘false’ to ‘true’ transition.\" },\n        \"num-latch\": { title: 'Numeric Latch', description: \"The Numeric ‘input’ value is passed to ‘output’ when ‘latch’ transitions from ‘false’ to ‘true’; The ‘output’ value is maintained until the next ‘false’ to ‘true’ transition.\" },\n        \"string-latch\": { title: 'String Latch', description: \"The String ‘input’ value is passed to ‘output’ when ‘latch’ transitions from ‘false’ to ‘true’; The ‘output’ value is maintained until the next ‘false’ to ‘true’ transition.\" },\n        \"set-reset\": { title: 'Set Reset', description: \"‘output’ will change to ‘true’ when ‘set’ is ‘true’, and ‘reset’ is ‘false’. There are 2 cases when ‘output’ will change to ‘false’: 1) ‘reset’ is ‘true’, and 'set is ‘false’. 2) If the ‘Reset when set=true’ setting is turned ON (Default), and ‘reset’ and ‘set’ are both ‘true’ . If this setting is turned OFF, ‘output’ will only change to ‘false’ under Case 1) conditions.\" },\n    },\n    \"math\": {\n        \"add\": { title: 'Add', description: \"(‘output’ = ‘in 1’ + ‘in 2’ + …) ‘output’ is the result of adding of all Numeric inputs. Input values can be set from settings. The number of inputs is configurable from settings.\" },\n        \"subtract\": { title: 'Subtract', description: \"(‘output’ = ‘in 1’ - ‘in 2’ - …) ‘output’ is the result of subtracting each Numeric input in order. Input values can be set from settings. The number of inputs is configurable from settings.\" },\n        \"multiply\": { title: 'Multiply', description: \"(‘output’ = ‘in 1’ * ‘in 2’ * …) ‘output’ is the result of multiplying each Numeric input in order. Input values can be set from settings. The number of inputs is configurable from settings.\" },\n        \"divide\": { title: 'Divide', description: \"(‘output’ = ‘in 1’ / ‘in 2’ / …) ‘output’ is the result of dividing each Numeric input in order. Input values can be set from settings. The number of inputs is configurable from settings.\" },\n        \"absolute\": { title: 'Absolute', description: \"(‘output’ = |‘in 1’|) ‘output’ is the absolute value (positive) of the Numeric input.\" },\n        \"modulus\": { title: 'Modulus', description: \"(‘output’ = ‘in 1’ % ‘in 2’) ‘output’ is the modulus of the Numeric inputs. Input values can be set from settings.\" },\n        \"power\": { title: 'Power', description: \"(‘output’ = ‘in 1’ ^ ‘in 2’) ‘output’ is the result of ‘in 1’ to the power of ‘in 2’. Input values can be set from settings.\" },\n        \"flexible-math\": { title: \"Flexible Math\", description: \"\" },\n\n    },\n    \"math-advanced\": {\n        \"acos\": { title: 'Acos', description: \"‘acos(x)’ is the result of arccos(‘x’). The Inverse Cosine function of input ‘x’.\" },\n        \"asin\": { title: 'Asin', description: \"‘asin(x)’ is the result of arcsin(‘x’). The Inverse Sine function of input ‘x’.\" },\n        \"atan\": { title: 'Atan', description: \"‘atan(x)’ is the result of arctan(‘x’). The Inverse Tangent function of input ‘x’.\" },\n        \"cbrt\": { title: 'Cbrt', description: \"‘cbrt(x)’ is the Cubic Root of input ‘x’.\" },\n        \"cos\": { title: 'Cos', description: \"‘cos(x)’ is the result of cos(‘x’). The Cosine function of input ‘x’.\" },\n        \"exp\": { title: 'Exp', description: \"(‘exp(x)’ = E^‘x’) ‘exp(x)’ is the result of raising E (Euler’s Number 2.71828) to the power of ‘x’. The Natural Exponential function.\" },\n        \"log\": { title: 'Logarithm (Base E)', description: \"‘log(x)’ is the result of log(‘x’) with base E (Euler’s Number 2.71828). The Natural Logarithmic function of input ‘x’.\" },\n        \"log10\": { title: 'Logarithm (Base 10)', description: \"‘log10(x)’ is the result of log(‘x’) with base 10.\" },\n        \"sin\": { title: 'Sin', description: \"‘sin(x)’ is the result of sin(‘x’). The Sine function of input ‘x’.\" },\n        \"sqrt\": { title: 'Sqrt', description: \"‘sqrt(x)’ is the Square Root of input ‘x’.\" },\n        \"tan\": { title: 'Tan', description: \"‘tan(x)’ is the result of tan(‘x’). The Tangent function of input ‘x’.\" },\n    },\n    \"math-trigger\": {\n        \"trigger-add\": { title: 'Trigger Add', description: \"When ‘trigger’ transitions from ‘false’ to ‘true’, ‘output’ is updated with the result of the addition of all inputs (‘in 1’ + ‘in 2’ + …). Input values can be set from settings. The number of inputs is configurable from settings.\" },\n        \"trigger-subtract\": { title: 'Trigger Subtract', description: \"When ‘trigger’ transitions from ‘false’ to ‘true’, ‘output’ is updated with the result of the subtraction of all inputs (‘in 1’ - ‘in 2’ - …). Input values can be set from settings. The number of inputs is configurable from settings.\" },\n        \"trigger-multiply\": { title: 'Trigger Multiply', description: \"When ‘trigger’ transitions from ‘false’ to ‘true’, ‘output’ is updated with the result of the multiplication of all inputs (‘in 1’ * ‘in 2’ * …). Input values can be set from settings. The number of inputs is configurable from settings.\" },\n        \"trigger-divide\": { title: 'Trigger Divide', description: \"When ‘trigger’ transitions from ‘false’ to ‘true’, ‘output’ is updated with the result of the division of all inputs (‘in 1’ / ‘in 2’ / …). Input values can be set from settings. The number of inputs is configurable from settings.\" },\n        \"trigger-modulus\": { title: 'Trigger Modulus', description: \"When ‘trigger’ transitions from ‘false’ to ‘true’, ‘output’ is updated with the result of the modulus of the inputs (‘in 1’ % ‘in 2’). Input values can be set from settings.\" },\n        \"trigger-power\": { title: 'Trigger Power', description: \"When ‘trigger’ transitions from ‘false’ to ‘true’, ‘output’ is updated with the result of ‘in1’ to the power of ‘in2’ (‘in 1’ ^ ‘in 2’). Input values can be set from settings.\" },\n    },\n    \"miscellaneous\": {\n        \"geo-hash\": { title: 'Geohash decode/encode', description: \"A function that encodes lat,lon to and from a geo-hash\" },\n        \"num-series-generator\": { title: 'Numeric Series Generator', description: \"\" },\n        \"append-to-strings\": { title: 'Append To Strings', description: \"\" },\n    },\n    \"nube\": {\n        \"get-schedules\": { title: 'Get-Schedules', description: \"This node is used to fetch schedules from the Nube dashboard. The ‘Get-Schedules’ node will output all schedules from the device; Specific schedule selection is done on the ‘Schedule-Checker’ node. ‘Interval’ (set from settings) is how often the node will re-check for schedule changes (minimum 10 seconds). In order for the ‘get-schedules’ node to work, there must be a `system/platform’ node in the main container (default editor pane) and there must be a ‘deviceID’ in the ‘system/platform’ node settings, It is recommended that the API-Schedule node is used in conjunction with a filter/prevent-null node to maintain the last successful schedule read in the case that the API-Login node becomes disconnected. 'interval’ units can be configured from settings. Maximum ‘interval’ setting is 587 hours.\" },\n    },\n    \"num-transform\": {\n        \"round\": { title: 'Round (Decimal Place)', description: \"‘output’ is the ‘input’ value rounded to the configured number of decimal places. The number of decimal places can be configured from settings (limited to 5 decimal places).\" },\n        \"floor\": { title: 'Floor', description: \"‘output’ is the ‘input’ value rounded DOWN to the nearest integer.\" },\n        \"ceil\": { title: 'Ceil', description: \"‘output’ is the ‘input’ value rounded UP to the nearest integer.\" },\n        \"limit\": { title: 'Limit', description: \"‘output’ follows the ‘input’ value when it is between the ‘min’ and ‘max’ values. If ‘input’ is greater than the ‘max’ value, ‘output’ will be the ‘max’ value. If ‘input’ is less than the ‘min’ value, ‘output’ will be the ‘min’ value. ‘max’ and ‘min’ values can be configured from settings.\" },\n        \"scale\": { title: 'Scale', description: \"Performs a linear interpolation of the ‘input’ value based configured settings. When ‘input’ value is between ‘in-min’ and ‘in-max’ it is linearly interpolated between ‘out-min’ and ‘out-max’. If ‘input’ is greater than the ‘in-max’ value, ‘output’ will be the ‘out-max’ value. If ‘input’ is less than the ‘in-min’ value, ‘output’ will be the ‘out-min’ value. ‘in-max’, ‘in-min’, ‘out-max’, and ‘out-min’ values can be configured from settings.\" },\n        \"linear-shaper\": { title: 'Linear shaper', description: \"Performs a linear interpolation of the ‘input’ value between configured inflection points. The number of inflection points can be configured in settings. The inflection points will be evenly distributed from 0-100. Values for each inflection point can be wired in, or set from settings. When the ‘input’ value is between 0 and 100 the ‘output’ value will be the linear interpolation of the ‘input’ value between the surrounding inflection point values.\" },\n        \"fade\": { title: 'Fade', description: \"This node makes a smooth transition from ‘from’ to ‘to’ over the ‘interval’ period when ‘enable’ transitions from ‘false’ to ‘true’; after this ‘interval’ period ‘output’ will match the ‘to’ value while ‘enable’ is ‘true’. During the ‘interval’ period, the rate of ‘output’ change cannot be changed. Once the ‘interval’ period is complete ‘out=to’ becomes ‘true’ until ‘enable’ becomes ‘false’ again.\" },\n        \"rate-limit\": { title: 'Rate-Limit', description: \"This node makes a rate limited transition from its current output value to the ‘input’ value. When ‘enable’ is ‘true’, ‘output’ is permitted to change towards the ‘input’ value based on settings values. ‘output’ can change by ‘step’ size every ‘interval’ period. ‘output’ will be ‘null’ when ‘enable’ is ‘false’.\" },\n    },\n    \"point\": {\n        \"bool-constant\": { title: 'Boolean Constant', description: \"Outputs a Boolean value set from settings. Can also output null.\" },\n        \"num-constant\": { title: 'Numeric Constant', description: \"Outputs a Numeric value set from settings. Can also output null by leaving the settings field blank.\" },\n        \"string-constant\": { title: 'String Constant', description: \"Outputs a String value set from settings. Can also output null by leaving the settings field blank.\" },\n        \"json-constant\": { title: 'Json Constant', description: \"Outputs a JSON value set from settings. Can also output null by leaving the settings field blank. Example {“name”:“John Hill”, “age”:31} or [1,2,3,4]\" },\n        \"bool-writable\": { title: 'Boolean Writable (Priority)', description: \"Outputs the highest priority, non-null, Boolean input. Highest priority is ‘in 1’ then ‘in 2’ and so on. Input values can also be wired in, or set from settings. The number of inputs can be modified from settings.\" },\n        \"num-writable\": { title: 'Numeric Writable (Priority)', description: \"Outputs the highest priority, non-null, Numeric input. Highest priority is ‘in 1’ then ‘in 2’ and so on. Input values can also be wired in, or set from settings. The number of inputs can be modified from settings.\" },\n        \"string-writable\": { title: 'String Writable (Priority)', description: \"Outputs the highest priority, non-null, String input. Highest priority is ‘in 1’ then ‘in 2’ and so on. Input values can also be wired in, or set from settings. The number of inputs can be modified from settings.\" },\n        \"generic-point\": { title: 'Generic Point', description: \"This node is to test the generic point input types\" },\n    },\n    \"protocols/misc\": {\n        \"email\": { title: 'Email', description: \"Once configured (in settings) with the sender email server details (‘email’ and ‘password’) for Gmail, Hotmail, Outlook365, or Yahoo accounts: This node will attempt to send a new email when ‘trigger’ transitions from ‘false’ to ‘true’. The String ‘recipient’ value will be the to: email address; The String ‘subject’ value will be the email subject; and the String ‘message’ value will be the email body. The ‘response’ output will be ‘true’ if the email is sent successfully. The ‘error’ output will be an error message String if there is an error sending the email.\" },\n        \"serial-connector\": { title: 'Serial Connector', description: \"This node reads/writes serial data from/to the onboard serial ports.  These ports can be RS485 ports, or Rubix Compute wireless interface ports.  Once the Port and Baud Rate settings are configured, when enabled, the ‘output’ will be raw messages received over the configured serial port.  Any values written to the ‘writeValue’ input will be sent on the configured serial port\" },\n    },\n    \"protocols/http\": {\n        \"dynamic-http-client\": { title: \"Dynamic HTTP client\", description: 'Sends a HTTP(S) request by executing a \"axios\" configuration JSON object. The request will be triggered when a configuration object is received on the inlet. The configuration object must be the \"config\" object of the \"axios\" library. For a list of all possible options, see here: https://github.com/axios/axios#request-config' },\n        \"http-client\": { title: \"HTTP client\", description: 'Sends a HTTP(S) request to the specified URL, using the specified request method. The request will be triggered when data is received on the inlet. For PUT/POST/PATCH requests, the received data string will be submitted as the request body.' }\n    },\n    \"protocols/nube\": {\n        \"edge-28-network\": { title: 'Edge 28 Network', description: \"The is node is used for reading and writing values to the edge-io-28. This node uses an internal rest-api to talk to the edge-io-28. No details need to be set\", iconImageUrl: Icons.frog},\n        \"edge-28-lora-reset\": { title: 'Edge IO 28 LORA Map Reset', description: \"The is node is used in conjunction with the edge-io-28 when using the lora-Connect. This node uses an internal rest-api to rest a LORA Map gateway connected to an edge-io-28 controller. The reason for this nodes is to give the user more control over the nube hardware. When a trigger is activated on the node input or the interval timer is triggered the lora-modules will be reset. The reboot of the module only takes 1000ms to restart \" },\n        \"edge-28-input\": { title: \"Edge IO 28 Input\", description: EdgeHelp.inputsDesc },\n        \"edge-28-output\": { title: \"Edge IO 28 Output\", description: EdgeHelp.outputsDesc }\n    },\n    \"protocols/bacnet\": {\n        \"bacnet-network\": { title: 'BACnet Network', description: \"This node acts as a container for bacnet-device nodes. All bacnet-device nodes should be added within the bacnet-network container. IP configuration for the BACnet network connection are set from settings. The bacnet-network node can also be used to perform a BACnet Discover (WhoIs).\" },\n        \"bacnet-device\": { title: 'BACnet Device', description: \"This node acts as a container for bacnet-point nodes. All bacnet-device nodes should be added within the bacnet-network container.  All bacnet-point nodes should be added within a bacnet-device container node.  Configuration of BACnet device connections are set from settings.  Both IP and MSTP BACnet devices can be configured from the bacnet-device settings.\" },\n        \"bacnet-point\": { title: 'BACnet Point', description: \"All bacnet-point nodes should be added within the bacnet-device container node. Configuration of BACnet points are set from settings.  If the bacnet-network, and bacnet-device are configured correctly, the BACnet points will be available to select from the ‘Select a point’ setting; otherwise the point can be set manually. For information on History settings, see History/History node. Configuration is the same for bacnet-point histories.\" },\n    },\n    \"protocols/bacnet-server\": {\n        \"bacnet-server-api\": { title: 'BACnet Server', description: \"A BACnet server is used to host BACnet points to be read/written by other BACnet devices. The bacnet-server node acts as a container for bacnet-server-point nodes. All bacnet-server-point nodes should be added within the bacnet-server container. IP configurations for the BACnet server connection are set from settings.\" },\n    },\n    \"protocols/lora-raw\": {\n        \"lora-sensor-decoder\": { title: 'Lora Sensor Decoder (Droplet | ALL)', description: \"This node is used to decode raw serial input messages to LORA sensor values. It should be used in conjunction with the protocols/serial-connector node. If a ‘nodeID’ is set, only messages from matching LORA sensors will be output; if no ‘nodeID’ is set, all valid LORA sensor messages will be output. Outputs that are not present in the raw serial input message will be ‘null’. ‘lowBatteryAlm’ output will be ‘true’ if the LORA sensor has a battery ‘voltage’ value less than the ‘Low battery warning voltage’ setting; otherwise it will be ‘false’. ‘watchdog’ output will be ‘true’ if there has been no valid message from the ‘nodeID’ LORA sensor for the ‘Watchdog Delay’; otherwise ‘watchdog’ output will be false. Maximum ‘Watchdog Delay’ setting is 587 hours. This node can be used for decoding Nube Droplet sensors, and Nube MicroEdge sensors. The sensor type can be selected from settings.\" },\n        \"lora-raw-two-way-in\": { title: 'Nube LoRaRAW Two Way In', description: \"This node parses Nubes LoRa Two Way protocol\" },\n        \"lora-raw-two-way-out\": { title: 'Nube LoRaRAW Two Way Out', description: \"This node compiles points to Nubes LoRa Two Way protocol\" },\n        \"lora-raw-filter\": { title: 'Nube LoRaRAW Filter', description: \"This node filters differe nube lora protocols\" },\n        \"lora-raw-two-way-test\": { title: 'Nube LoRaRAW Two Way Test Node', description: \"Acts as the transport layer for testing only\" },\n    },\n    \"protocols/lora-raw-v2\": {\n        \"lora-raw-points-in\": { title: 'Nube LoRaRAW Points In', description: \"This node parses Nubes LoRa Points protocol payload\" },\n        \"lora-raw-points-out\": { title: 'Nube LoRaRAW Points Out', description: \"This node compiles points to Nubes LoRa Points protocol\" },\n        \"lora-raw-sensor-decoder-legacy\": { title: 'Lora Sensor Decoder (Droplet | ALL)', description: \"LEGACY DECODER. PROVIDES DECRYPTION AS NEW FIRMWARE DOESNT. This node is used to decode raw serial input messages to LORA sensor values. It should be used in conjunction with the protocols/serial-connector node. If a ‘nodeID’ is set, only messages from matching LORA sensors will be output. If no ‘nodeID’ is set, all valid LORA sensor messages will be output. Outputs that are not present in the raw serial input message will be ‘null’. ‘lowBatteryAlm’ output will be ‘true’ if the LORA sensor has a battery ‘voltage’ value less than the ‘Low battery warning voltage’ setting otherwise it will be ‘false’. ‘watchdog’ output will be ‘true’ if there has been no valid message from the ‘nodeID’ LORA sensor for the ‘Watchdog Delay’ otherwise ‘watchdog’ output will be false. Maximum ‘Watchdog Delay’ setting is 587 hours. This node can be used for decoding Nube Droplet sensors, and Nube MicroEdge sensors. The sensor type can be selected from settings.\" },\n    },\n    \"protocols/modbus\": {\n        \"modbus-server\": { title: 'Modbus Server', description: \"This node is used to create a modbus server. Once the Port and Modbus Address settings are configured, when enabled, this node will create a Local Modbus TCP/IP Server. The points on this created Modbus Server can be written to and read from with other Modbus Nodes, or from another device.\" },\n    },\n    \"protocols/mqtt\": {\n        \"client\": { title: 'MQTT client', description: \"This node connects to an MQTT Broker, subscribes to topics, and can publish values to topics. Once configured (in settings) with a valid ‘Broker URL’, ‘Broker Port’, and ‘Authentication’ (if required), this node will read and write to MQTT topics when ‘enable’ is ‘true’. Number of topics, and the topic names can be configured from settings. Each topic will have a corresponding input and output.\" },\n        \"client-single\": { title: 'MQTT Single Topic client', description: \"This node connects to an MQTT Broker, subscribes to topics, and can publish values to topics. Once configured (in settings) with a valid ‘Broker URL’, ‘Broker Port’, and ‘Authentication’ (if required), this node will read and write to MQTT topics when ‘enable’ is ‘true’. Each topic will have a corresponding input and output.\" },\n        \"mqtt-topic-extractor\": { title: 'MQTT topic extractor', description: \"The is node is used to extract sections out of an MQTT topic\" },\n        \"topic-builder\": { title: 'MQTT Topic Builder', description: \"This node takes String inputs and concatenates/joins them with ‘/’ to produce an MQTT Topic ‘output’. The number of inputs can be modified from settings.\" },\n    },\n    \"protocols/social\": {\n        \"sms-twilio\": { title: \"Twilio SMS\", description: \"Send a sms without the need of a sim card using twilio\" },\n    },\n    \"protocols/websocket\": {\n        \"websocket\": { title: \"WebSocket\", description: \"WebSocket Client for request/listen output\" },\n    },\n    \"schedule\": {\n        \"weekly-schedule\": { title: 'Weekly Schedule', description: \"Weekly Schedule\" },\n        \"event-schedule\": { title: 'Event Schedule Node', description: \"Event Schedule Node\" },\n        \"schedule-merge\": { title: 'Merge Schedule', description: \"Merge Schedule\" },\n        \"schedule-checker\": { title: 'Schedule Checker (unconfigured)', description: \"This node checks the API-Schedule output string for active schedules that match the selected ‘Schedule Name’ setting. ‘output’ will be ‘true’ when the matching schedule is active and ‘enable’ is ‘true’; otherwise ‘output’ will be ‘false’. ‘nextStart’ is the timestamp output of the next scheduled start time. ‘nextStop’ is the timestamp output of the next scheduled stop time. ‘lastCheck’ is the timestamp output of the last time a schedule check was run. ‘error’ output will be ‘true’ if there is an error while checking the schedule input string; otherwise ‘error’ will be false. The frequency that schedules are checked can be modified with the ‘Schedule Check Interval’ setting (set in millis). The ‘Timestamp Output Format’ setting can be adjusted to output timestamps as strings or as Epoch Timestamps. String timestamps will be displayed in the timezone specified by the ‘Timezone’ setting.\" },\n    },\n    \"statistics\": {\n        \"min-max-avg\": { title: 'Min-Max-Avg', description: \"Outputs the Minimum, Maximum, and Average values of all the (non null) Numeric inputs. The number of inputs and their values can be modified from settings.\" },\n        \"avg\": { title: 'Average', description: \"Outputs the Average, Count, and Sum values of all the (non null) Numeric inputs. The number of inputs and their values can be modified from settings.\" },\n        \"min\": { title: 'Min', description: \"Outputs the Minimum value of all the (non null) Numeric inputs. The number of inputs and their values can be modified from settings.\" },\n        \"max\": { title: 'Max', description: \"Outputs the Maximum value of all the (non null) Numeric inputs. The number of inputs and their values can be modified from settings.\" },\n        \"sum\": { title: 'Sum', description: \"Outputs the Sum of all the (non null) Numeric inputs. The number of inputs and their values can be modified from settings.\" },\n        \"median\": { title: 'Median', description: \"Outputs the Median value of all the (non null) Numeric inputs. The number of inputs and their values can be modified from settings.\" },\n        \"range\": { title: 'Range', description: \"Outputs the Range value (max-min) of all the (non null) Numeric inputs. The number of inputs and their values can be modified from settings.\" },\n        \"rank\": { title: 'Rank (Highest)', description: \"Outputs the ranked highest (max to min), or ranked lowest (min to max) of all the (non null) Numeric inputs. The number of inputs and the number of outputs can be modified from settings.\" },\n        \"stats-all\": { title: 'All Stats', description: \"Outputs the Maximum, Minimum, Range, Sum, Mean, Median, Modes, Variance, Standard Deviation, Mean Absolute Deviation, and Z Score values of all the (non null) Numeric inputs. The number of inputs and their values can be modified from settings.\" },\n    },\n    \"streams\": {\n        \"stream-average\": { title: 'Stream Average', description: \"'output' is the average of all received Numeric 'input' value.  'output' is reset when 'reset' transitions from 'false' to 'true'.\" },\n        \"stream-highest\": { title: 'Stream Highest', description: \"‘output’ is the highest received Numeric ‘input’ value. ‘output’ is reset when ‘reset’ transitions from ‘false’ to ‘true’.\" },\n        \"stream-lowest\": { title: 'Stream Lowest', description: \"'output' is the lowest received Numeric 'input' value.  'output' is reset when 'reset' transitions from 'false' to 'true'.\" },\n        \"stream-sum\": { title: 'Stream Sum', description: \"output’ is the sum of all received Numeric ‘input’ value. ‘output’ is reset to 0 when ‘reset’ transitions from ‘false’ to ‘true’.\" },\n        \"stream-merge\": { title: 'Stream Merge', description: \"This node merges multiple inputs into a single stream/output. Any new ‘input’ (‘in #’) value will be passed to ‘output’. The number of inputs can be modified from settings.\" },\n        \"gate\": { title: 'Message Gate', description: \"This node can allow(gate open) or block(gate close) the transfer of the ‘input’ to ‘output’. When ‘open’ is ‘true’, ‘input’ is passed to ‘output’. When ‘open’ is ‘false’, ‘output’ will maintain its last value. If ‘Send null when closed’ setting is ticked, ‘output’ will be ‘null’ when ‘open’ is ‘false’.\" },\n        \"stack\": { title: 'Stack', description: \"‘input’ values are stored in a list. Stored ‘input’ values are passed to ‘output’ one by one each time ‘trigger’ transitions from ‘false’ to ‘true’. ‘input’ values are passed to ‘output’ in a last-in, first-out order. Stored ‘input’ values are deleted when ‘clear’ transitions from ‘false’ to ‘true’. ‘count’ is the number of stored ‘input’ values.\" },\n        \"queue\": { title: 'Queue', description: \"‘input’ values are stored in a list. Stored ‘input’ values are passed to ‘output’ one by one each time ‘trigger’ transitions from ‘false’ to ‘true’. ‘input’ values are passed to ‘output’ in a first-in, first-out order. Stored ‘input’ values are deleted when ‘clear’ transitions from ‘false’ to ‘true’. ‘count’ is the number of stored ‘input’ values.\" },\n        \"stream-delay\": { title: 'Stream Delay', description: \"‘input’ values are passed to ‘output’ after a ‘delay’ period. Each ‘input’ value is delayed by the same ‘delay’ period. ‘delay’ units can be configured from settings. Maximum ‘delay’ setting is 587 hours.\" },\n        \"stream-delay-meter\": { title: 'Stream Delay meter', description: \"This node measures the delay between the incoming events. Any value sent to ‘input’ (excluding null) will be accepted. ‘ms’ output is the time between the lastest ‘input’, and the previous ‘input’. ‘ms’ is reset when ‘reset’ transitions from ‘false’ to ‘true’. ‘ms’ output is in millis.\" },\n        \"frequency-meter\": { title: 'Frequency meter', description: \"This node measures the frequency of the incoming ‘input’ events. Any value sent to ‘input’ (excluding null) will be accepted. ‘events/sec’ output is the average rate received ‘input’ values. ‘events/sec’ is reset when ‘reset’ transitions from ‘false’ to ‘true’.\" },\n        \"flatline\": { title: 'Flatline', description: \"This node checks to see if the input has not changed for the 'interval' period.\" },\n\n    },\n    \"string\": {\n        \"string-acronyms\": { title: 'String Case Acronyms', description: \"This node will upper case any common HVAC Acronyms, For example it will Upper Fcu to FCU\" },\n        \"string-compare\": { title: 'String Compare', description: \"This node provides several functions to compare 2 String inputs, with a Boolean ‘output’. Available comparison functions are: Equals, Includes, Starts With, and Ends With. The comparison function is selected from settings.\" },\n        \"cut-substring\": { title: 'Substring Cut', description: \"This node outputs a portion of a String ‘input’ defined by the Numeric ‘start’ and ‘length’ parameters. String ‘output’ is the portion of ‘input’ starting at index (position) ‘start’ and continating the next ‘length’ value of characters. ‘start’ value of 0 is the beggining of the string. If a negative ‘start’ value is given, the substring will be selected from the end of the ‘input’ string (eg. -1 is the end of the ‘input’; -2 is the second to last character of the ‘input’, …).\" },\n        \"string-join\": { title: 'String Join', description: \"This node takes String inputs and concatenates/joins them to produce a String ‘output’. The number of inputs can be modified from settings.\" },\n        \"string-length\": { title: 'String Length', description: \"‘output’ is the number of characters in the given String ‘input’ value.\" },\n        \"string-index-of\": { title: 'String Index Of', description: \"This node takes String ‘input’ and ‘searchFor’; Numeric ‘output’ is the index(position) of the first instance of ‘searchFor’ in ‘input’. Index of 0 is the begginning of the ‘input’ string.\" },\n        \"char-at-index\": { title: 'Char at Index', description: \"‘output’ is the character at the Numeric ‘index’ (position) of String ‘input’. The first character of the String ‘input’ is ‘index’ 0. If ‘index’ is negative, characters will be selected from the end of the ‘input’ string (eg. -1 is the last character; -2 is the second to last character). ‘output’ will be ‘null’ on an invalid ‘index’.\" },\n        \"string-split\": { title: 'String Split', description: \"Portions of the String ‘input’ are sent to the String ‘output’ sequentially when ‘next’ trasitions from ‘false’ to ‘true’; these ‘output’ strings are portions of the ‘input’ string split by the String ‘separator’ value. The Numeric ‘left’ outputs the number of ‘output’ strings remaining to be sent. When ‘start’ transitions from ‘false’ to ‘true’, the ‘output’ string will go back to the first portion of the ‘input’ string.\" },\n        \"string-case\": { title: 'String Case (Lower)', description: \"‘output’ is the ‘input’ string with all characters changed to either upper or lower case. Upper or Lower case can be selected from settings.\" },\n        \"char-to-ascii\": { title: 'Char to ASCII Code', description: \"‘output’ is the ASCII code of the first character of a given String ‘input’ value.\" },\n        \"ascii-to-char\": { title: 'ASCII Code to Char', description: \"‘output’ is the character of the given Numeric ASCII code ‘input’ value.\" },\n        \"string-buffer\": { title: 'String Buffer', description: \"\" },\n    },\n    \"switch\": {\n        \"bool-switch\": { title: 'Boolean Switch', description: \"Boolean ‘switch’ passes corresponding Boolean input to ‘output’. If ‘switch’ is ‘true’, Boolean ‘inTrue’ value will be passed to ‘output’ ‘inTrue’ and ‘inFalse’ values can be set in settings.\" },\n        \"num-switch\": { title: 'Numeric Switch', description: \"Boolean ‘switch’ passes corresponding Numeric input to ‘output’. If ‘switch’ is ‘true’, Numeric ‘inTrue’ value will be passed to ‘output’ ‘inTrue’ and ‘inFalse’ values can be set in settings.\" },\n        \"string-switch\": { title: 'String Switch', description: \"Boolean ‘switch’ passes corresponding String input to ‘output’. If ‘switch’ is ‘true’, String ‘inTrue’ value will be passed to ‘output’ ‘inTrue’ and ‘inFalse’ values can be set in settings.\" },\n        \"bool-select\": { title: 'Boolean Select', description: \"Numeric integer ‘select’ passes corresponding Boolean input to ‘output’. If ‘select’ is 2, ‘in 2’ will be passed to ‘output’ (likewise for other integer ‘select’ values). If the ‘select’ value does not have a corresponding ‘in #’ value, ‘output’ value will be ‘null’. The number of inputs and their values can be modified from settings.\" },\n        \"num-select\": { title: 'Numeric Select', description: \"Numeric integer ‘select’ passes corresponding Numeric input to ‘output’. If ‘select’ is 2, ‘in 2’ will be passed to ‘output’ (likewise for other integer ‘select’ values). If the ‘select’ value does not have a corresponding ‘in #’ value, ‘output’ value will be ‘null’. The number of inputs and their values can be modified from settings.\" },\n        \"string-select\": { title: 'String Select', description: \"Numeric integer ‘select’ passes corresponding String input to ‘output’. If ‘select’ is 2, ‘in 2’ will be passed to ‘output’ (likewise for other integer ‘select’ values). If the ‘select’ value does not have a corresponding ‘in #’ value, ‘output’ value will be ‘null’. The number of inputs and their values can be modified from settings.\" },\n        \"bool-output-select\": { title: 'Boolean Output Select', description: \"Numeric integer ‘select’ passes Boolean ‘input’ to the corresponding Boolean ‘output’. If ‘select’ is 2, ‘input’ will be passed to ‘out 2’ (likewise for other integer ‘select’ values). If the ‘select’ value does not have a corresponding ‘out #’ value, no values will be passed. The number of outputs can be modified from settings.\" },\n        \"num-output-select\": { title: 'Numeric Output Select', description: \"Numeric integer ‘select’ passes Numeric ‘input’ to the corresponding Numeric ‘output’. If ‘select’ is 2, ‘input’ will be passed to ‘out 2’ (likewise for other integer ‘select’ values). If the ‘select’ value does not have a corresponding ‘out #’ value, no values will be passed. The number of outputs can be modified from settings.\" },\n        \"string-output-select\": { title: 'String Output Select', description: \"Numeric integer ‘select’ passes String ‘input’ to the corresponding String ‘output’. If ‘select’ is 2, ‘input’ will be passed to ‘out 2’ (likewise for other integer ‘select’ values). If the ‘select’ value does not have a corresponding ‘out #’ value, no values will be passed. The number of outputs can be modified from settings.\" },\n    },\n    \"system\": {\n        \"host-info\": { title: 'Host Info', description: \"This node outputs various linux system information. More Info: https://docs.nube-iiot.com/en/nodes/home#host-info\" },\n        \"platform\": { title: 'Platform', description: \"This node provides a node to read the settings for the Wires instance.\" },\n        \"system-info\": { title: 'System Info ', description: \"This node outputs various linux system information. Once a system property has been selected from settings, a ‘false’ to ‘true’ transition on the ‘trigger’ input will update the ‘output’. ‘error’ will display error information if the request is not successful.\" },\n        \"beep\": { title: 'Beep', description: \"This node plays a default system sound on the server (not in the browser) when ‘trigger’ transitions from ‘false’ to ‘true’.\" },\n        \"execute-cmd\": { title: 'Execute Command', description: \"This node triggers commands to be run on the linux host. The string input ‘command input’ will be run when ‘trigger’ transitions from ‘false’ to ‘true’. NOTE: ONLY USE THIS NODE IF YOU KNOW EXACTLY WHAT YOU ARE DOING. SYSTEM COMMANDS CAN CHANGE SYSTEM CONFIGURATION WHICH CANNOT BE FIXED FROM WITHIN WIRES. YOU COULD BREAK WIRES, THE CONTROLLER, OR YOUR PC.\" },\n        \"flow-export\": { title: 'Flow Export', description: \"A node to export the wires flow to JSON when trigger values gets changed to true from different state\" },\n        \"network-interface-edge-28\": { title: 'Network Interface EdgeIO-28', description: \"This node is used to configure the network (IP) interface for edge28 controllers. Changes made to settings will only be saved if ‘Save changes on save’ is toggled ON. In some cases a reboot will be required to save the changes, if ‘Reboot’ is toggled ON, then clicking ‘save’ will reboot the controller. NOTE: Making changes on a remote device could cause the device to become inaccessible.\" },\n        \"network-interfaces\": { title: 'Network Interfaces', description: \"This node is used to configure the network (IP) interfaces for the device. Changes made to settings will only be saved if ‘Save changes on save’ is toggled ON. In some cases a reboot will be required to save the changes, if ‘Reboot’ is toggled ON, then clicking ‘save’ will reboot the controller. NOTE: Making changes on a remote device could cause the device to become inaccessible.\" },\n        \"system-build-version\": { title: 'Build Versions', description: \"A node for return the build versions of wires and nodejs\" },\n        \"file\": { title: \"File\", description: \"This node can read and write any file on the disk. Send the file name to the input named File Name. The path can be omitted. With logic inputs named Read, Write, Clear you can perform the requested operation. The input named Text set a text value to be written to the file. The contents of the file will be sent to the output.\" },\n        \"json-file\": { title: \"Json File\", description: \"This node can read and write Json file on the disk. Send the file name To the input named File Name. The path can be omitted. With logic inputs named Read, Write, Delete File you can perform the requested operation. Specify the key that you want to read/write. The value that you want to write, send to Value input. Read value will be sent to the output.\" },\n    },\n    \"time\": {\n        \"conversion\": { title: 'Time Conversion (min)', description: \"This node converts between Time units Days(‘day’), Hours(‘hour’), Minutes(‘min’), Seconds(‘sec’), and Milliseconds(‘milli’). Input type can be selected from settings. Outputs will change based on selected input type. The number of decimal places that output values have can be set from the ‘Precision’ setting.\" },\n        \"conversion-plus\": { title: 'Time Conversion Json', description: \"This node will let you convert a timestamp or unix (epoch) timestamp into date and time parts\" },\n        \"timezone-conversion\": { title: 'Timezone Conversion', description: \"The is node is used to convert two timestamps\" },\n        \"clock\": { title: 'Clock', description: \"Outputs the System Time in various forms. Standard outputs are: Time(‘timeString’) Hours(‘hour’), Minutes(‘min’), and Seconds(‘sec’). There are also Advanced outputs which can be enabled from settings. The Advanced outputs are: Milliseconds(millis), Time String including timezone (‘longString’), Timezone Offset from UTC(‘TZOffset’), and Unix Timestamp (‘epoch’). ‘interval’ is the output update frequency. ‘interval’ units can be configured from settings. Maximum ‘interval’ setting is 587 hours.\" },\n        \"date\": { title: 'Date', description: \"Outputs various date information based on the system time. String ‘dateString’ is the current date. String ‘dayString’ is the current day of the week. Numeric ‘dayOfWeek’ is an integer between 0 and 6 corresponding to Sunday(0) through Saturday(6). Numeric ‘date’ is and integer of the current date. Numeric ‘month’ is an integer of the current month Jan(0) - Dec(12). Numeric ‘year’ is an integer of the current year.\" },\n        \"date-difference\": { title: 'Date Difference', description: \"The is node is used to compare the difference between two timestamps\" },\n        \"stopwatch\": { title: 'Stopwatch', description: \"This node converts between Time units Days(‘day’), Hours(‘hour’), Minutes(‘min’), Seconds(‘sec’), and Milliseconds(‘milli’). Input type can be selected from settings. Outputs will change based on selected input type. The number of decimal places that output values have can be set from the ‘Precision’ setting. ‘interval’ units can be configured from settings. Maximum ‘interval’ setting is 587 hours.\" },\n        \"cron-interval\": { title: 'Cron Interval', description: \"This node triggers ‘output’ to transition from ‘false’ to ‘true’ for 500 milliseconds at a selected times/intervals, configured in settings. ‘info’ will show information about the status of the node. ‘cronExpression’ represents the configured scheduled timings in Cron notation. ‘cronDescription’ represents the configured scheduled timings in plain english. ‘nextExecution’ is a String output representing the datetime that the next ‘message’ will be sent from ‘output’. For more information on Cron Expressions see: (https://www.freeformatter.com/cron-expression-generator-quartz.html)\" },\n        \"cron-weekly\": { title: 'Cron Weekly', description: \"This node triggers ‘output’ to transition from ‘false’ to ‘true’ for 500 milliseconds at a configured time on each selected day. Days and Times are set in settings. ‘info’ will show information about the status of the node. ‘cronExpression’ represents the configured scheduled timings in Cron notation. ‘cronDescription’ represents the configured scheduled timings in plain english. ‘nextExecution’ is a String output representing the datetime that the next ‘message’ will be sent from ‘output’. For more information on Cron Expressions see: (https://www.freeformatter.com/cron-expression-generator-quartz.html)\" },\n        \"cron-expression\": { title: 'Cron Expression', description: \"This node triggers ‘output’ to transition from ‘false’ to ‘true’ for 500 milliseconds at times triggered by the ‘input’ CRON expression. ‘info’ will show information about the status of the node. ‘cronDescription’ represents the configured scheduled timings in plain english. ‘nextExecution’ is a String output representing the datetime that the next ‘message’ will be sent from ‘output’. For more information on Cron Expressions see: (https://www.freeformatter.com/cron-expression-generator-quartz.html)\" },\n        \"timestamp-generator\": { title: 'Timestamp Generator', description: \"The is node is used to generate a timestamps\" },\n        \"rate-limit\": { title: \"Rate Limit\", description: \"\" },\n    },\n    \"trigger\": {\n        \"change-of-value\": { title: 'Change Of Value', description: \"when ‘input’ changes value, output becomes ‘true’ for ‘interval’ duration, then ‘output’ changes back to ‘false’. For Numeric ‘input’ values, the change of value must be greater than the ‘threshold’ value to trigger the output.\" },\n        \"random\": { title: 'Random', description: \"When ‘trigger’ transitions from ‘false’ to ‘true’, a random number between ‘min’ and ‘max’ values is produced at ‘output’. The number of decimal places that ‘output’ values have can be set from settings.\" },\n        \"inject\": { title: 'Inject', description: \"While ‘enable’ is ‘true’, ‘output’ will send ‘message’ value when ‘trigger’ transitions from ‘false’ to 'true\" },\n        \"interval-inject\": { title: 'Interval Inject', description: \"While ‘enable’ is ‘true’, ‘output’ will send ‘message’ value at every ‘interval’ period. When ‘enable’ is ‘false’, ‘output’ will be ‘null’. ‘interval’ units can be configured from settings. Maximum ‘interval’ setting is 587 hours.\" },\n        \"iterator\": { title: 'Iterator', description: \"This node generates a sequence of ‘true’ messages at ‘output’. If the ‘Generate False’ setting is ticked (default), then a ‘false’ message will be sent between each ‘true’ at ‘output’. The number of ‘true’ messages sent will be equal to ‘iterations’ value; these values are sent over the ‘interval’ duration (unless interrupted by ‘stop’ inputs). For example, if ‘interval’ is set to 5 (seconds) and ‘iterations’ is set to 5, a ‘true’ message will be sent from ‘output’ every 1000 millis. If 'stop’ input is ‘true’ then the next ‘true’ value will not be sent from ‘output’ until ‘stop’ is ‘false’ again. ‘interval’ units can be configured from settings. Maximum ‘interval’ setting is 587 hours.\" },\n    },\n    \"widget\": {\n        \"schedule-afterhours-off\": { title: 'Schedule-Afterhours-Off Widget', description: 'This node works with a multi-select cloud dashboard widget to perform the logic to output ‘enable’ and ‘remaining runtime’. Widget Example: {“new”:false,“widgetType”:“MultiSwitch”,“dataSource”:“Ditto”,“tableSelectionMode”:“Tabular”,“cellWidthAuto”:true,“numCharts”:1,“timeSeriesData”:true,“valuePrecision”:3,“trimTableHeaders”:0,“enableTooltip”:true,“enableLegend”:true,“enableZoomSlider”:true,“syncTime”:60,“chartSettings”:[{“xAxisSplits”:3,“yAxisSplits”:5}],“graphType”:“LineChart”,“fontSize”:35,“statusImageName”:“Light”,“trueStatus”:1,“falseStatus”:0,“priority”:16,“sliderMin”:10,“sliderMax”:30,“sliderStep”:0.1,“min”:0,“max”:100,“gaugeSplits”:6,“maximum”:0,“unit”:“°C”,“steps”:0,“reverseGradient”:true,“lowerBound”:0,“upperBound”:100,“cellWidth”:150,“tickCount”:100,“theme”:“nube”,“titleColor”:\"#333333\",“gateway”:\"/api/ditto\",“query”:\"/api/2/things/com.nubeio:97768707-4a17-4d36-baa5-e1f95cbd74d4/features/points/properties/CHAPEL_Mode\",“units”:\"%\",“title”:“AC Control”,“containerHeight”:150,“icon”:“None”,“topicIcon”:“None”,“subTopicIcon”:“None”,“layouts”:{“lg”:{“w”:6,“h”:4,“x”:0,“y”:7,“moved”:false,“static”:false},“md”:{“x”:0,“y”:144,“w”:6,“h”:8},“sm”:{“x”:0,“y”:104,“w”:6,“h”:8},“xs”:{“x”:0,“y”:8,“w”:4,“h”:8},“xxs”:{“x”:0,“y”:8,“w”:2,“h”:8}},“numButtons”:3,“buttonSettings”:[{“name”:“SCHEDULE”,“value”:“SCHEDULE”},{“name”:“AFTERHOURS”,“value”:“AFTERHOURS”},{“name”:“OFF”,“value”:“OFF”}],“dataType”:“Global”,“enableBackground”:false,“isSelect”:false,“fontWeight”:“bold”,“fontColor”:\"\",“overriddenFields”:[],“isTransparent”:false,“isSelectedDitto”:true,“showValue”:true,“dataEditorCode”:\"\"}' },\n        \"schedule-prestart-fixed\": { title: 'Schedule Prestart Fixed', description: \"This node provides a pre-start function based on fixed settings. Conditions are evaluated every 30 seconds.\" },\n    },\n    \"unknown\": {\n        \"unknown\" : {title: \"Unknown\", description: \"Fallback node, this node need to be replace by another node\"}\n    },\n};\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 04.07.2016.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\nimport { get, merge } from 'lodash';\nimport { Colors, create } from 'logplease';\nimport * as moment from 'moment';\nimport { BackendLinkVisitor } from '../shared/link-result-visitor';\nimport { ERROR, NODE_IO_VALUES, NOTIFICATION } from '../shared/websocket-events';\nimport { ErrorHandler } from '../utils/decorators';\nimport { isEmpty, isNotNull, isNull, mapToObjectSameKey } from '../utils/helper';\nimport { IdGenerator } from '../utils/id-generator';\nimport { UNKNOWN_NODE } from './constants';\nimport { Container } from './container';\nimport { createNodeDbHelper } from './node-db-helper';\nimport { NodeHookHelper } from './node-hook';\nimport { IContainer, IFolderNode, INode, SerializedNode, Side } from './node-interface';\nimport { convertType, InputSetting, NodeInput, NodeOutput, NodeSetting, Type } from './node-io';\nimport { compareNodeIO, createLinkHandler, Link } from './node-link';\nimport { Shape2D } from './node-presenter';\nimport { NodeTypeRegistry } from './node-type-registry';\nimport { Deserializable, SerializableHelper } from './serializable';\nimport Utils from './utils';\n\nconst logger = create('node', { color: Colors.Magenta });\nconst doNothing = () => {\n};\n\nexport interface ContextMenuOption {\n  title: string;\n\n  onClick();\n}\n\nexport enum BROADCAST {\n  UPDATE_SETTINGS,\n  UPDATE_OUTPUTS,\n  UPDATE_TITLE,\n  UPDATE_VALUE,\n  UPDATE_STATE,\n  UPDATE_NAME,\n  UPDATE_PROPERTIES,\n}\n\nexport enum NodeState {\n  NORMAL   = 'normal', // the node default colour\n  INFO     = 'info',\n  WARNING  = 'warning',\n  ERROR    = 'error', // when user added something that they shouldn't have\n  DISABLED = 'disabled', // when a network is disabled\n  ONLINE   = 'online', // when a device is online\n  OFFLINE  = 'offline', // when a device is offline\n}\n\nexport interface NodeSettingConfig {\n  groups?: Array<{\n    [name: string]: {\n      weight?: number;\n    };\n  }>;\n  conditions?: {\n    [name: string]: (setting: any) => boolean;\n  };\n}\n\nexport class Node implements INode, Deserializable<SerializedNode> {\n\n  id: string | number;\n  cid: string | number;\n  name: string;\n  type: string;\n  pos: [number, number] = [100, 100];\n  size: [number, number];\n  inputs: { [id: number]: NodeInput };\n  outputs: { [id: number]: NodeOutput };\n  settings: { [name: string]: NodeSetting } = {};\n  properties?: any = {};\n  flags: {\n    skip_title_render?: true;\n    unsafe_execution?: false;\n    collapsed?: boolean;\n    clip_area?: boolean;\n  } = {};\n\n  container: Container;\n  side: Side;\n  title: string;\n  category: string;\n  description: string;\n  data?: any;\n  MIN_WIDTH = 100;\n  settingConfigs: NodeSettingConfig = {};\n  contextMenu: { [name: string]: ContextMenuOption } = {};\n  settingsHeaderComponent?: any; // vue.js component definition\n  ignore_remove: boolean;\n  removable: boolean;\n  movable: boolean;\n  clonable: boolean = true;\n\n  mouseOver: boolean;\n  selected: boolean;\n\n  color: string;\n  bgcolor: string;\n  boxcolor: string;\n  headerColor: string;\n  shape: string;\n  onSerialize: Function;\n  bgImage: HTMLImageElement;\n  bgImageUrl: string;\n\n  isUpdated: boolean;\n  isRecentlyActive: boolean;\n\n  isDashboardNode?: boolean;\n\n  //you can set this setting for prevent input flooding!\n  UPDATE_INPUTS_INTERVAL?: number;\n  updateInputsLastTime?: number;\n\n  //you can set this setting for prevent execute flooding!\n  EXECUTE_INTERVAL?: number;\n  executeLastTime?: number;\n\n  showIcon: boolean = true;\n  iconImage: HTMLImageElement;\n  iconImageUrl: string;\n  icon: string;\n\n  nodeState: NodeState;\n\n  // Lifecycle Hooks: TODO write somewhere on README\n  // ===============================================\n  // setup()            : gets invoked when new node will be created, before setting up any settings and properties\n  //                      for writing your own custom logic for node creation\n  // init(properties)   : gets invoked when new node will be created after `setup` for doing modifying node dynamically,\n  //                      static settings and properties fields gets inserted before this method\n  // onCreated()        : gets invoked when new node will be created after `init(properties)`,\n  //                      after `init(properties)` we save the re-sets the settings values\n  // onAdded()          : gets invoked every time when node added to container (created or restored from the database)\n  // onRemoved()        : Invoked when node removed from container, it can be both Promise return or normal return\n  // onDbReaded()       : Invoked when db read and all nodes added to containers (after all nodes onAdded invoked)\n\n  // onDrawBackground\n  // onDrawForeground\n  //\n  // //if returns false the incoming connection will be canceled\n  // onConnectInput\n  // onInputAdded\n  // onOutputAdded\n  // onGetInputs\n  // onGetOutputs\n  // onInputRemoved\n  // onOutputRemoved\n  // getValueFromSettings(slot, labelFromData)\n  // getInputToSettingsMap\n  //\n  // onMouseDown\n  // onMouseUp\n  // onMouseEnter\n  // onMouseMove\n  // onMouseLeave\n  // onDblClick\n  // onDropFile\n  // onDropItem\n  // onKeyDown\n  // onKeyUp\n  //\n  // onSelected\n  // onDeselected\n  //\n  // onGetMessageToServerSide\n  // onGetMessageToEditorSide\n  //\n  // onRunContainer\n  // onStopContainer\n  // onExecute\n  // onInputUpdated\n  //\n  // onBeforeSettingsChange(newSettings, newName)\n  // onAfterSettingsChange(oldSettings, oldName)\n\n  // getMenuOptions\n  // getExtraMenuOptions\n\n  //onDashboardGetRequest\n  //onDashboardPostRequest\n  //onEditorApiGetRequest\n  //onEditorApiPostRequest\n\n  constructor() {\n    this.type = '';//trick to use isNode isContainerNode\n    this.id = IdGenerator.UNINITIALIZED;\n    this.cid = IdGenerator.UNINITIALIZED;\n  }\n\n  onAfterSettingsChange(oldSettings, oldName, oldIcon?) {\n  }\n\n  onAdded() {\n  }\n\n  afterAdded() {\n    this.size = Shape2D.isDisplayable(this.size) ? this.size : this.computeSize();\n  }\n\n  onRemoved() {\n  }\n\n  beforeRemoveNode() {\n    Object.entries(this.inputs ?? {})\n          .filter(([_, input]) => isNotNull(input.link))\n          .forEach(([i, _]) => this.disconnectInputLink(+i));\n    Object.entries(this.outputs ?? {})\n          .filter(([_, output]) => isEmpty(output.links))\n          .forEach(([o, _]) => this.disconnectOutputLinks(+o));\n  }\n\n  afterRemoveNode() {\n    // remove from renderer\n    if (this.container?.renderers) {\n      for (let i = 0; i < this.container.renderers.length; ++i) {\n        let renderer = this.container.renderers[i];\n        if (renderer.selected_nodes[this.id]) delete renderer.selected_nodes[this.id];\n        if (renderer.node_dragged == this) renderer.node_dragged = null;\n      }\n    }\n  }\n\n  serialize(): SerializedNode {\n    let n: SerializedNode = {\n      cid: this.container?.id ?? this.cid,\n      id: this.id,\n      type: this.type,\n      pos: this.pos,\n      name: this.name,\n      size: this.size,\n      icon: this.icon,\n      inputs: SerializableHelper.serialize(this.inputs),\n      outputs: SerializableHelper.serialize(this.outputs),\n      settings: SerializableHelper.serialize(this.settings),\n      properties: SerializableHelper.serialize<object>(this.properties),\n      flags: SerializableHelper.serialize<object>(this.flags),\n    };\n    if (this.onSerialize) this.onSerialize(n);\n    return n;\n  }\n\n  @ErrorHandler\n  deserialize(serializedNode: SerializedNode, isNew?: boolean): Node {\n    function doMerge<T>(o1: { [p: string]: T }, o2: { [p: string]: T }, shouldMerge: boolean): { [p: string]: T } {\n      const serialized = mapToObjectSameKey(o1, (_, i) => SerializableHelper.serialize<T>(i));\n      return shouldMerge ? merge({}, serialized, o2) : serialized;\n    }\n\n    let node_class = NodeTypeRegistry.instance().get(serializedNode.type);\n    if (!node_class) {\n      this.debugWarn(`Node class of type [${serializedNode.type}] is not registered. Fallback to 'unknown'`);\n      node_class = NodeTypeRegistry.instance().get(UNKNOWN_NODE);\n    }\n    let node: Node = new node_class();\n    node.category = node_class.category;\n    NodeHookHelper.execute(node, 'setup');\n    NodeHookHelper.execute(node, 'init', node);\n    node.id = serializedNode.id ?? node.id;\n    node.cid = serializedNode.cid ?? node.cid;\n    node.type = serializedNode.type ?? node.type;\n    node.name = serializedNode.name;\n    node.pos = serializedNode.pos;\n    node.icon = serializedNode.icon ?? node.icon;\n    node.flags = !isNew ? merge(node.flags, serializedNode.flags) : node.flags;\n    node.inputs = mapToObjectSameKey(doMerge(node.inputs, serializedNode.inputs, !isNew),\n                                     (_, i) => NodeInput.create(i));\n    node.outputs = mapToObjectSameKey(doMerge(node.outputs, serializedNode.outputs, !isNew),\n                                      (_, o) => NodeOutput.create(o));\n    node.settings = mapToObjectSameKey(doMerge(node.settings, serializedNode.settings, !isNew), (k, s) => {\n      const setting = node.settings[k];\n      return NodeSetting.create({ ...s, validation: setting?.validation, toJSON: setting?.toJSON });\n    });\n    node.properties = !isNew ? merge(node.properties, serializedNode.properties) : node.properties;\n    node.size = serializedNode.size ?? this.computeSize(true);\n    return node;\n  }\n\n  getParent(): IContainer {\n    return this.container;\n  }\n\n  getParentNode(): IFolderNode {\n    return this.getParent()?.nodeItself();\n  }\n\n  /**\n   * Serialize and stringify\n   * @returns {string} json\n   */\n  toString(): string {\n    return JSON.stringify(this.serialize());\n  }\n\n  /**\n   * Get the title string\n   */\n  getTitle(): string {\n    return this.title;\n  }\n\n  getName(): string {\n    return this.name;\n  }\n\n  /***\n   * Gets array of all input values, but omitting undefined/null values\n   */\n  getDefinedInputValues() {\n    return Object.keys(this.inputs)\n                 .map(key => this.inputs[key].data)\n                 .filter(v => v != null);\n  }\n\n  /**\n   * Sets the output data according to the transform function\n   * @param callback function\n   */\n  emitTransformedInput(callback) {\n    let val = this.getInputData(0);\n    if (val != null) {\n      this.setOutputData(0, callback(val));\n    } else {\n      this.setOutputData(0, null);\n    }\n  }\n\n  /**\n   * @deprecated Use {@link NodeDbHelper#update} via {@link createNodeDbHelper}\n   */\n  updateNodeInput() {\n    createNodeDbHelper().update(this, ['inputs']);\n  }\n\n  /**\n   * @deprecated Use {@link NodeDbHelper#update} via {@link createNodeDbHelper}\n   */\n  updateNodeOutput() {\n    createNodeDbHelper().update(this, ['outputs']);\n  }\n\n  /**\n   * @deprecated Use {@link NodeDbHelper#update} via {@link createNodeDbHelper}\n   */\n  persistProperties(saveSettings = false, saveProperties = false, saveInputs = false, saveOutputs = false) {\n    const p = { 'settings': saveSettings, 'properties': saveProperties, 'inputs': saveInputs, 'outputs': saveOutputs };\n    let props = Object.entries(p)\n                      .filter(([_, v]) => v === true).map(([k, _]) => k);\n    createNodeDbHelper().update(this, props);\n  }\n\n  /**\n   * @deprecated Use {@link NodeDbHelper#update} via {@link createNodeDbHelper}\n   */\n  persistConfiguration(callback: () => void = doNothing) {\n    createNodeDbHelper().update(this, ['settings', 'properties']);\n  }\n\n  /**\n   * @deprecated Use {@link NodeDbHelper#update} via {@link createNodeDbHelper}\n   */\n  updateNodeInputOutput() {\n    createNodeDbHelper().update(this, ['inputs', 'outputs']);\n  }\n\n  /**\n   * Sets the output data\n   * @param output_id slotId id\n   * @param data slotId data\n   * @param only_if_new\n   */\n  setOutputData(output_id: number, data: any, only_if_new = false): void {\n    if (!this.outputs[output_id]) return;\n\n    if (data === undefined) return;\n    if (only_if_new && this.outputs[output_id].data === data) return;\n\n    this.outputs[output_id].updated = true; // it makes our update flag  is true // so when we want to make onInputUpdated() to trigger, we need to set this one as true\n    //so there will be two cases when out onInputUpdated() doesn't get triggered:\n    // 1. Falls multiple values in between 100ms so we will get only the last on value\n    // 2. If only_if_new = true and we want to trigger onInputUpdated() even when we have no change value\n    if (!this.isRecentlyActive) this.isRecentlyActive = true;\n\n    this.dispatch(output_id, data);\n    this.outputs[output_id].data = data;\n  }\n\n  /**\n   * Retrieves the input data (data traveling through the connection) from one slotId\n   * @param slotId slot id for input\n   * @returns data or if it is not connected returns undefined\n   */\n  getInputData(slotId: number | string): any {\n    try {\n      const input = this.inputs[slotId];\n      const iSetting = input?.setting;\n      let data = input?.data;\n      if (iSetting?.exist &&\n          (isNull(input.link) || !Utils.hasValidInput(data, iSetting?.nullable) || input.type === Type.DROPDOWN)) {\n        // It removes extracts the ${name} from: `[${name$}] (${value})`;\n        const settingName: string = this.inputs[slotId].name.match(/\\[(.*?)\\]/)[1];\n        const setting: NodeSetting = this.settings[settingName];\n        if (input.type === Type.DROPDOWN) {\n          // input as default setting value if input doesn't match\n          if (!setting.config.items.map(x => x.value).includes(data)) data = setting.value;\n        } else {\n          data = Utils.parseValue(setting.value, input.type);\n        }\n      }\n      return data;\n    } catch (err) {\n      this.debugErr(`Get input data! Error: ${err.stack ?? err}`);\n    }\n  }\n\n  /**\n   * Returns info about an input connection (which node, type, etc)\n   * @param slot slot id\n   * @returns {Object} object or null\n   */\n  getInputInfo(slot: number): any {\n    if (!this.inputs) return null;\n\n    return this.inputs[slot];\n  }\n\n  /**\n   * Add a new output slot to use in this node\n   * @param name\n   * @param type string defining the output type (\"vec3\",\"number\",...)\n   * @param id {number} output id number if you want to enter manual id\n   * @param extra_info this can be used to have special properties of an output (label, special color, position, etc)\n   */\n\n  addOutput(name?: string, type?: Type, id: number = undefined, extra_info?: any): number {\n    id = this.getFreeOutputId(id);\n    name = name || 'out ' + (id + 1);\n\n    let output: NodeOutput = NodeOutput.create({ name: name, type: type, links: null });\n    if (extra_info) for (let i in extra_info) output[i] = extra_info[i];\n\n    if (!this.outputs) this.outputs = {};\n\n    this.outputs[id] = output;\n    if (this['onOutputAdded']) this['onOutputAdded'](output);\n    this.size = this.computeSize();\n\n    return id;\n  }\n\n  getFreeOutputId(id = undefined): number {\n    if (!this.outputs) {\n      this.outputs = {};\n    }\n    if (id !== undefined && !this.outputs[id]) {\n      return id;\n    }\n\n    for (let i = 0; i < 1000; i++) {\n      if (!this.outputs[i]) return i;\n    }\n  }\n\n  /**\n   * Remove an existing output slot\n   * @param id slot id\n   */\n  removeOutput(id: number): void {\n    this.disconnectOutputLinks(id);\n    delete this.outputs[id];\n    this.size = this.computeSize();\n    if (this['onOutputRemoved']) this['onOutputRemoved'](id);\n  }\n\n  /**\n   * Add a new input slot to use in this node\n   * @param name {string}\n   * @param type {Type} defining the input type (\"vec3\",\"number\",...), it its a generic one use 0\n   * @param setting {InputSetting} set setting exist or not and whether to ignore null data or not from the connected slot\n   * @param id {number} input id number if you want to enter manual id\n   * @param extra_info {any} this can be used to have special properties of an input (label, color, position, etc)\n   */\n  addInput(\n    name?: string,\n    type?: Type,\n    setting: InputSetting = { exist: false, nullable: false, hidden: false },\n    id: number            = undefined,\n    extra_info?: any,\n  ): number {\n    id = this.getFreeInputId(id);\n    name = name || 'in ' + (id + 1);\n    let input: NodeInput = NodeInput.create({ name, type, setting, ...extra_info });\n    // if (extra_info) {\n    //   input = { ...input, ...extra_info };\n    // }\n\n    if (!this.inputs) this.inputs = {};\n    this.inputs[id] = input;\n    this.size = this.computeSize();\n    if (this['onInputAdded']) this['onInputAdded'](input);\n    return id;\n  }\n\n  /**\n   * @param name {string} name of the input and setting which will be bind each other input: [name], setting: name\n   * @param type {InputType} type of input\n   * @param defaultValue {string} default value for the setting\n   * @param description {string} description for the setting\n   * @param nullable {boolean} whether we need to include null input or not?\n   * If nullable === false, and input === null: it will search value form setting\n   * @param config {object} when TYPE = DROPDOWN, it's needed\n   * @param extra_info {any} anything we want to add on input\n   */\n  addInputWithSettings(\n    name: string,\n    type: Type,\n    defaultValue: any,\n    description: string = name,\n    nullable: boolean   = true,\n    config?: object,\n    extra_info?: any,\n  ): void {\n    const setting: InputSetting = { exist: true, nullable, hidden: false };\n    this.addInput(`[${name}]`, type, setting, extra_info);\n    this.settings[name] = NodeSetting.create({ description, value: defaultValue, type: convertType(type), config });\n  }\n\n  addInputAtPosition(\n    position: number,\n    name?: string,\n    type?: Type,\n    setting: InputSetting = { exist: false, nullable: false, hidden: false },\n    extra_info: any       = {},\n  ): number {\n    if (!this.inputs) this.inputs = {};\n    const inputsCount = this.getInputsCount();\n    if (position >= inputsCount) {\n      return this.addInput(name, type, setting, extra_info);\n    }\n    const myID = this.id;\n    for (let i = inputsCount; i > position; i--) {\n      this.inputs[i] = this.inputs[i - 1];\n      const source = Link.create(this.inputs[i].link);\n      if (source) {\n        const target = Link.create({ nodeId: myID, slot: i - 1 });\n        const outputNode: Node = this.container.nodeRegistry().get(source.nodeId);\n        const linksArray = outputNode.outputs[source.ioId].links;\n        const replaceLinkIndex = linksArray.map(l => Link.create(l)).findIndex(io => compareNodeIO(io, target));\n        if (replaceLinkIndex != -1) linksArray.splice(replaceLinkIndex, 1, target);\n        outputNode.updateNodeOutput();\n      }\n    }\n    let input: NodeInput = { name, type, setting, ...extra_info };\n    this.inputs[position] = input;\n    this.size = this.computeSize();\n    if (this['onInputAdded']) this['onInputAdded'](input);\n    return position;\n  }\n\n  getFreeInputId(id = undefined): number {\n    if (!this.inputs) {\n      this.inputs = {};\n    }\n    if (id !== undefined && !this.inputs[id]) {\n      return id;\n    }\n\n    for (let i = 0; i < 1000; i++) {\n      if (!this.inputs[i]) return i;\n    }\n  }\n\n  hideInput(immediateDirtyCanvas: boolean = true, ...ids: (number | string)[]): void {\n    for (let id of ids) {\n      this.disconnectInputLink(null, id);\n      this.inputs[id].setting.hidden = true;\n    }\n    this.redrawNode(immediateDirtyCanvas);\n  }\n\n  showInput(immediateDirtyCanvas: boolean = true, ...ids: (number | string)[]): void {\n    for (let id of ids) {\n      this.inputs[id].setting.hidden = false;\n    }\n    this.redrawNode(immediateDirtyCanvas);\n  }\n\n  redrawNode(immediateDirtyCanvas: boolean = true) {\n    if (immediateDirtyCanvas) {\n      this.size = this.computeSize();\n      this.setDirtyCanvas(true, true);\n    }\n  }\n\n  /**\n   * Remove an existing input slot\n   * @method removeInput\n   * @param id\n   */\n  removeInput(id: number): void {\n    this.disconnectInputLink(id);\n    delete this.inputs[id];\n    this.size = this.computeSize();\n    if (this['onInputRemoved']) this['onInputRemoved'](id);\n  }\n\n  /**\n   * Remove an existing input slot and moves other inputs and links to maintain input numbering\n   * @method removeInput\n   * @param slot Input slot\n   */\n  removeInputAtPosition(slot: number): void {\n    this.disconnectInputLink(slot);\n    const inputsCount = this.getInputsCount();\n    //console.log('THIS.ID', this.id)\n    //console.log('THIS.INPUTS BEFORE', this.inputs)\n    const myID = this.id;\n    for (let i = slot; i < inputsCount - 1; i++) {\n      this.inputs[i] = this.inputs[i + 1];\n      //console.log('THIS.INPUTS MID', this.inputs)\n      const target = Link.create({ nodeId: myID, slot: i + 1 });\n      const source = Link.create(this.inputs[i].link);\n      if (source) {\n        const outputNode: Node = this.container.nodeRegistry().get(source.nodeId);\n        const linksArray = outputNode.outputs[source.ioId].links;\n        //console.log('linksArray', linksArray)\n        const replaceLinkIndex = linksArray.map(l => Link.create(l)).findIndex(link => compareNodeIO(link, target));\n        if (replaceLinkIndex != -1) linksArray.splice(replaceLinkIndex, 1, target);\n        outputNode.updateNodeOutput();\n        //console.log('linksArray AFTER', linksArray)\n        //console.log('THIS.INPUTS AFTER', outputNode.outputs[`${this.inputs[i].link.target_slot}`].links)\n      }\n    }\n    delete this.inputs[inputsCount - 1];\n    this.size = this.computeSize();\n    if (this['onInputRemoved']) this['onInputRemoved'](slot);\n  }\n\n  getInputsCount(): number {\n    return this.inputs ? Object.keys(this.inputs).length : 0;\n  }\n\n  getOutputsCount(): number {\n    return this.outputs ? Object.keys(this.outputs).length : 0;\n  }\n\n  /*\n  addInputAtPosition(\n    position: number,\n    name?: string,\n    type?: Type,\n    setting: InputSetting = { exist: false, nullable: false },\n    extra_info: any = {},\n  ): number {\n    if (!this.inputs) this.inputs = {};\n    const inputsCount = this.getInputsCount();\n    if (position >= inputsCount) return this.addInput(name, type, setting, extra_info);\n    else {\n      const myID = this.id;\n      for (let i = inputsCount; i > position; i--) {\n        this.inputs[i] = this.inputs[i - 1];\n        if (this.inputs[i].hasOwnProperty('link')) {\n          const outputNode: Node = this.container._nodes[`${this.inputs[i].link.target_node_id}`];\n          let linksArray = outputNode.outputs[`${this.inputs[i].link.target_slot}`].links;\n          const replaceLinkIndex = linksArray.findIndex(link => {\n            return link.target_node_id == myID && link.target_slot == i - 1;\n          });\n          if (replaceLinkIndex != -1) linksArray.splice(replaceLinkIndex, 1, { target_node_id: myID, target_slot: i });\n          outputNode.updateNodeOutput();\n        }\n      }\n      let input: NodeInput = { name, type, setting, ...extra_info };\n      this.inputs[position] = input;\n      this.size = this.computeSize();\n      if (this['onInputAdded']) this['onInputAdded'](input);\n      return position;\n    }\n    this.updateNodeInput();\n  }\n  */\n\n  // TODO: Edit nodes which is using these functions\n  changeInputsCount(target_count: number, type?: Type) {\n    let current_count = this.getInputsCount();\n    let diff = target_count - current_count;\n\n    //add\n    if (diff > 0) for (let i = 0; i < diff; i++) this.addInput(null, type);\n\n    //remove\n    if (diff < 0) {\n      let ids = Object.keys(this.inputs);\n      for (let i = 0; i > diff; i--) {\n        let id = ids[ids.length + i - 1];\n        this.removeInput(+id);\n      }\n    }\n  }\n\n  changeOutputsCount(target_count: number, type?: Type) {\n    let current_count = this.getOutputsCount();\n    let diff = target_count - current_count;\n\n    //add\n    if (diff > 0) for (let i = 0; i < diff; i++) this.addOutput(null, type);\n\n    //remove\n    if (diff < 0) {\n      let ids = Object.keys(this.outputs);\n      for (let i = 0; i > diff; i--) {\n        let id = ids[ids.length + i - 1];\n        this.removeOutput(+id);\n      }\n    }\n  }\n\n  getLastInputIndex(): number {\n    return this.inputs ? Object.values(this.inputs).filter(value => !value.setting?.hidden).length : 0;\n  }\n\n  getLastOutputIndex(): number {\n    return this.outputs ? Object.values(this.outputs).length : 0;\n  }\n\n  computeHeight(): number {\n    let rows = Math.max(this.getLastInputIndex() + this.getLastOutputIndex(), 1);\n    // MAGIC number `15` and `6`\n    return rows * 15 + 6;\n  }\n\n  /**\n   * Computes the size of a node according to its inputs and output slots\n   * @param changeWidth If true will compute width based on title, max width of names and max width of lables\n   * @returns {[number, number]} the total size\n   */\n  computeSize(changeWidth = false): [number, number] {\n    let size: [number, number] = [0, 0];\n    size[1] = this.computeHeight();\n\n    if (!changeWidth && this.size != undefined) {\n      size[0] = this.size[0];\n      return size;\n    }\n\n    let font_size = 14;\n    let title_width = compute_text_size(this.title);\n    let maxLabelWidth = 0;\n    let maxNameWidth = 0;\n\n    if (this.inputs) {\n      for (let i in this.inputs) {\n        let input = this.inputs[i];\n        let label = input.label ?? '';\n        let name = input.name ?? '';\n        let labelWidth = compute_text_size(label);\n        let nameWidth = compute_text_size(name);\n        if (maxLabelWidth < labelWidth) maxLabelWidth = labelWidth;\n        if (maxNameWidth < nameWidth) maxNameWidth = nameWidth;\n      }\n    }\n\n    if (this.outputs) {\n      for (let o in this.outputs) {\n        let output = this.outputs[o];\n        let label = output.label ?? '';\n        let name = output.name ?? '';\n        let labelWidth = compute_text_size(label);\n        let nameWidth = compute_text_size(name);\n        if (maxLabelWidth < labelWidth) maxLabelWidth = labelWidth;\n        if (maxNameWidth < nameWidth) maxNameWidth = nameWidth;\n      }\n    }\n\n    if (maxLabelWidth == 0) maxLabelWidth = maxNameWidth;\n    size[0] = Math.max(maxLabelWidth + maxNameWidth + 10, title_width);\n    size[0] = Math.max(size[0], this.MIN_WIDTH);\n\n    function compute_text_size(text) {\n      if (!text) return 0;\n      return font_size * text.length * 0.6;\n    }\n\n    return size;\n  }\n\n  calculateMinWidth(...width: Array<number>): number {\n    return Math.max(this.MIN_WIDTH, ...width);\n  }\n\n  /**\n   * Disconnect output slot connect nodes links\n   * @param {number} slot whose links should be disconnected\n   * @returns {boolean} true if disconnected successfully\n   */\n  disconnectOutputLinks(slot: number | string) {\n    const nodeIO = Link.create({ nodeId: this.id, slot: +slot });\n    const registry = this.getParent().nodeRegistry().containerRegistry;\n    return new BackendLinkVisitor(registry).visit(createLinkHandler(registry).disconnectOutput(this.cid, nodeIO));\n  }\n\n  /**\n   * Disconnect input slot connected node link\n   * @param {number} input_slot current input slot\n   * @param {number} input_id whose link should be disconnected\n   * @returns {boolean} true if disconnected successfully\n   */\n  disconnectInputLink(input_slot: number, input_id?: number | string) {\n    const nodeIO = Link.create({ nodeId: this.id, ioId: input_id, slot: input_slot });\n    const registry = this.getParent().nodeRegistry().containerRegistry;\n    return new BackendLinkVisitor(registry).visit(createLinkHandler(registry).disconnectInput(this.cid, nodeIO));\n  }\n\n  /* Forces to redraw or the main renderer (Node) or the bg renderer (links) */\n  setDirtyCanvas(dirty_foreground: boolean, dirty_background?: boolean): void {\n    if (!this.container) return;\n    this.container.sendActionToRenderer('setDirty', [dirty_foreground, dirty_background]);\n  }\n\n  /**\n   * Collapse the node to make it smaller on the renderer\n   **/\n  collapse(): void {\n    this.flags.collapsed = !this.flags?.collapsed;\n    this.setDirtyCanvas(true, true);\n  }\n\n  /**\n   * Print debug message to console\n   * @param message\n   */\n  debug(message: any): void {\n    logger.debug(this.getReadableId() + ' ' + message);\n  }\n\n  /**\n   * Print debug message to console\n   * @param message\n   */\n  debugInfo(message: any): void {\n    logger.info(this.getReadableId() + ' ' + message);\n  }\n\n  /**\n   * Print error message to console\n   * @param message\n   * @param module\n   */\n  debugWarn(message: any, module?: string): void {\n    logger.warn(this.getReadableId() + ' ' + message);\n  }\n\n  /**\n   * Print error message to console\n   * @param message\n   * @param module\n   */\n  debugErr(message: any, module?: string): void {\n    logger.error(this.getReadableId() + ' ' + message);\n  }\n\n  getReadableId(): string {\n    if (this.container) {\n      return `[${this.type}][${this.container.id}/${this.id}]`;\n    } else {\n      return `[${this.type}][-/${this.id}]`;\n    }\n  }\n\n  sendMessageToServerSide(message: any) {\n    if (this.side === Side.server) {\n      logger.warn(`Node ${this.getReadableId()} is trying to send message from server side to server side`);\n    } else {\n      this.container.client_socket.emit('nodeMessageToServerSide', {\n        id: this.id,\n        cid: this.container.id,\n        message: message,\n      });\n    }\n  }\n\n  sendMessageToEditorSide(message: any, onlyConnectedUsers = true) {\n    let m = { id: this.id, cid: this.container.id, message };\n\n    if (this.side == Side.editor) {\n      logger.warn(`Node ${this.getReadableId()} is trying to send message from editor side to editor side`);\n    } else if (this.side === Side.server) {\n      let socket = this.container.server_editor_socket;\n\n      if (onlyConnectedUsers) {\n        socket.in('' + this.container.id).emit('nodeMessageToEditorSide', m);\n      } else {\n        socket.emit('nodeMessageToEditorSide', m);\n      }\n    } else {\n      this.container.client_socket.emit('nodeMessageToEditorSide', m);\n    }\n  }\n\n  sendAddInputToEditorSide(name?: string, type?: string, extra_info?: any) {\n    let m = {\n      id: this.id,\n      cid: this.container.id,\n      input: {\n        name: name,\n        type: type,\n        extra_info: extra_info,\n      },\n    };\n\n    if (this.side === Side.editor) {\n      logger.warn('Node ' + this.getReadableId() + ' is trying to send message from editor side to editor side');\n    } else if (this.side === Side.server) {\n      let socket = this.container.server_editor_socket;\n      socket.emit('node-add-input', m);\n    } else {\n      this.container.client_socket.emit('node-add-input', m);\n    }\n  }\n\n  sendAddOutputToEditorSide(name?: string, type?: string, extra_info?: any) {\n    let m = {\n      id: this.id,\n      cid: this.container.id,\n      output: {\n        name: name,\n        type: type,\n        extra_info: extra_info,\n      },\n    };\n\n    if (this.side === Side.editor) {\n      logger.warn('Node ' + this.getReadableId() + ' is trying to send message from editor side to editor side');\n    } else if (this.side === Side.server) {\n      let socket = this.container.server_editor_socket;\n      socket.emit('node-add-output', m);\n    } else {\n      this.container.client_socket.emit('node-add-output', m);\n    }\n  }\n\n  sendRemoveInputToEditorSide(id: number) {\n    let m = {\n      id: this.id,\n      cid: this.container.id,\n      input: id,\n    };\n\n    if (this.side === Side.editor) {\n      logger.warn('Node ' + this.getReadableId() + ' is trying to send message from editor side to editor side');\n    } else if (this.side === Side.server) {\n      let socket = this.container.server_editor_socket;\n      socket.emit('node-remove-input', m);\n    } else {\n      this.container.client_socket.emit('node-remove-input', m);\n    }\n  }\n\n  sendRemoveOutputToEditorSide(id: number) {\n    let m = {\n      id: this.id,\n      cid: this.container.id,\n      output: id,\n    };\n\n    if (this.side === Side.editor) {\n      logger.warn('Node ' + this.getReadableId() + ' is trying to send message from editor side to editor side');\n    } else if (this.side === Side.server) {\n      let socket = this.container.server_editor_socket;\n      socket.emit('node-remove-output', m);\n    } else {\n      this.container.client_socket.emit('node-remove-output', m);\n    }\n  }\n\n  sendIOValuesToEditor() {\n    let inputs_values = [];\n    let outputs_values = [];\n\n    if (this.inputs) {\n      for (let i in this.inputs) {\n        const data = this.inputs[i].data;\n        inputs_values.push({ nodeId: this.id, inputId: i, data: data });\n      }\n    }\n\n    if (this.outputs) {\n      for (let o in this.outputs) {\n        const data = this.outputs[o].data;\n        outputs_values.push({ nodeId: this.id, outputId: o, data: data });\n      }\n    }\n\n    const slots_values = { cid: this.container.id, inputs: inputs_values, outputs: outputs_values };\n\n    this.container.server_editor_socket.in('' + this.container.id).emit(NODE_IO_VALUES, slots_values);\n  }\n\n  updateInputsLabels() {\n    if (this.inputs) {\n      for (let i in this.inputs) {\n        let input = this.inputs[i];\n        input.label = '';\n      }\n      this.setDirtyCanvas(true, true);\n    }\n  }\n\n  updateOutputsLabels() {\n    if (this.outputs) {\n      for (let o in this.outputs) {\n        let output = this.outputs[o];\n        output.label = '';\n      }\n      this.setDirtyCanvas(true, true);\n    }\n  }\n\n  broadcastSettingsToClients(onlyConnectedUsers = true) {\n    this.sendMessageToEditorSide({ action: BROADCAST.UPDATE_SETTINGS, payload: this.settings }, onlyConnectedUsers);\n  }\n\n  broadcastPropertiesToClients(onlyConnectedUsers = true) {\n    this.sendMessageToEditorSide({ action: BROADCAST.UPDATE_PROPERTIES, payload: this.properties }, onlyConnectedUsers);\n  }\n\n  broadcastOutputsToClients(onlyConnectedUsers = true) {\n    this.sendMessageToEditorSide({ action: BROADCAST.UPDATE_OUTPUTS, payload: this.outputs }, onlyConnectedUsers);\n  }\n\n  broadcastNodeStateToClients(onlyConnectedUsers = true) {\n    this.sendMessageToEditorSide({ action: BROADCAST.UPDATE_STATE, payload: this.nodeState }, onlyConnectedUsers);\n  }\n\n  broadcastTitleToClients(onlyConnectedUsers = true) {\n    this.sendMessageToEditorSide({ action: BROADCAST.UPDATE_TITLE, payload: this.title }, onlyConnectedUsers);\n  }\n\n  broadcastNameToClients(onlyConnectedUsers = true) {\n    this.sendMessageToEditorSide({ action: BROADCAST.UPDATE_NAME, payload: this.name }, onlyConnectedUsers);\n  }\n\n  broadcastValToClients(key: string, val: any, onlyConnectedUsers = true) {\n    this.sendMessageToEditorSide({ action: BROADCAST.UPDATE_VALUE, key: key, payload: val }, onlyConnectedUsers);\n  }\n\n  onGetMessageToEditorSide({ action, payload, key }) {\n    switch (action) {\n      case BROADCAST.UPDATE_VALUE:\n        this.settings[key].value = payload;\n        return;\n      case BROADCAST.UPDATE_SETTINGS:\n        this.settings = payload;\n        return;\n      case BROADCAST.UPDATE_PROPERTIES:\n        this.properties = payload;\n        return;\n      case BROADCAST.UPDATE_OUTPUTS:\n        this.outputs = payload;\n        break;\n      case BROADCAST.UPDATE_TITLE:\n        this.title = payload;\n        this.size = this.computeSize();\n        break;\n      case BROADCAST.UPDATE_STATE:\n        this.nodeState = payload;\n        break;\n      case BROADCAST.UPDATE_NAME:\n        this.name = payload;\n        break;\n      default:\n        this.debugErr(`Received unknown editor action ${action} with payload ${JSON.stringify(payload)}`);\n        break;\n    }\n  }\n\n  setSettingsConfig(config: NodeSettingConfig) {\n    this.settingConfigs = config;\n  }\n\n  formattedExecutionTime(): string {\n    return moment(this.executeLastTime).format('YYYY-MM-DDTHH:MM:ss');\n  }\n\n  setNodeState(state: NodeState) {\n    this.nodeState = state;\n    if (this.side == Side.server) {\n      this.broadcastNodeStateToClients();\n    }\n  }\n\n  /**\n   * Replaces setting with old setting and restores validations.\n   *\n   * @param inputSettings Updated settings that should replace existing\n   */\n  settingsWithValidation(inputSettings: { [name: string]: NodeSetting }) {\n    const outputSettings = inputSettings;\n\n    // repopulate validation\n    let node_class = NodeTypeRegistry.instance().get(this.type);\n    let tempNode: Node = new node_class(this.container, this.id, this.properties);\n\n    const settings = { ...tempNode.settings };\n\n    Object.keys(outputSettings).forEach(key => {\n      outputSettings[key].validation = settings[key] ? settings[key].validation : null;\n    });\n    return outputSettings;\n  }\n\n  displayError(e: any, message: string = '') {\n    this.container.server_editor_socket.emit(ERROR, `${message} ${this.extractErrorMessage(e)}`);\n  }\n\n  displayMessage(message: string) {\n    this.container.server_editor_socket.emit(NOTIFICATION, message);\n  }\n\n  convertInput = (input: any, dataType: Type, decimals: number = 3) => {\n    const inputDataType = typeof input;\n    if (dataType === Type.NUMBER) {\n      input = Number((isNaN(input) ? 0 : Number(input)).toFixed(decimals));\n    } else if (dataType === Type.BOOLEAN) {\n      if (inputDataType === 'boolean') {\n        input = Number(input);\n      } else {\n        input = input === 1 || input === 'true' ? 1 : 0;\n      }\n    } else if (dataType === Type.STRING && inputDataType !== 'string') {\n      input = JSON.stringify(input);\n    }\n    return input;\n  };\n\n  private dispatch(output_id: number, data: any) {\n    if (output_id === 0) {\n      const { PubSubHelpers } = require('../pub-sub/PubSubHelpers');\n      PubSubHelpers.dispatch(this, data);\n    }\n  }\n\n  private extractErrorMessage(e: any) {\n    return get(e, 'response.data.message', get(e, 'message', e));\n  }\n}\n","\nimport { isNull } from '../utils/helper';\n\nexport default class Utils {\n  static operatorsBoolName = [\n    '==',\n    '!=',\n    '<',\n    '<=',\n    '>',\n    '>=',\n    // 'between',\n    // 'contains',\n    // 'is true',\n    // 'is false',\n    // 'null',\n    // 'not null',\n  ];\n\n  static operatorsMathName = ['+', '-', '/', '*', 'min', 'max'];\n\n  static operatorsBool = {\n    eq: function(a, b) {\n      return a == b;\n    },\n    neq: function(a, b) {\n      return a != b;\n    },\n    lt: function(a, b) {\n      return a < b;\n    },\n    lte: function(a, b) {\n      return a <= b;\n    },\n    gt: function(a, b) {\n      return a > b;\n    },\n    gte: function(a, b) {\n      return a >= b;\n    },\n    btwn: function(a, b, c) {\n      return (a >= b && a <= c) || (a <= b && a >= c);\n    },\n    contains: function(a, b) {\n      return (a + '').indexOf(b) != -1;\n    },\n    regex: function(a, b, c, d) {\n      return (a + '').match(new RegExp(b, d ? 'i' : ''));\n    },\n    true: function(a) {\n      return a === true;\n    },\n    false: function(a) {\n      return a === false;\n    },\n    null: function(a) {\n      return typeof a == 'undefined' || a === null;\n    },\n    notNull: function(a) {\n      return typeof a != 'undefined' && a !== null;\n    },\n    empty: function(a) {\n      if (typeof a === 'string' || Array.isArray(a) || Buffer.isBuffer(a)) {\n        return a.length === 0;\n      } else if (typeof a === 'object' && a !== null) {\n        return Object.keys(a).length === 0;\n      }\n      return false;\n    },\n    notEmpty: function(a) {\n      if (typeof a === 'string' || Array.isArray(a) || Buffer.isBuffer(a)) {\n        return a.length !== 0;\n      } else if (typeof a === 'object' && a !== null) {\n        return Object.keys(a).length !== 0;\n      }\n      return false;\n    },\n  };\n\n  static operatorsStatName = [\n    'max',\n    'min',\n    'range',\n    'midRange',\n    'sum',\n    'mean',\n    'median',\n    'variance',\n    'standardDeviation',\n    'meanAbsoluteDeviation',\n  ];\n\n  static stat = {\n    max: function(array) {\n      return Math.max.apply(null, array);\n    },\n\n    min: function(array) {\n      return Math.min.apply(null, array);\n    },\n\n    range: function(array) {\n      return Utils.stat.max(array) - Utils.stat.min(array);\n    },\n\n    midRange: function(array) {\n      return Utils.stat.range(array) / 2;\n    },\n\n    sum: function(array) {\n      let num = 0;\n      for (let i = 0, l = array.length; i < l; i++) num += array[i];\n      return num;\n    },\n\n    mean: function(array) {\n      return Utils.stat.sum(array) / array.length;\n    },\n\n    median: function(array) {\n      array.sort(function(a, b) {\n        return a - b;\n      });\n      const mid = array.length / 2;\n      return mid % 1 ? array[mid - 0.5] : (array[mid - 1] + array[mid]) / 2;\n    },\n\n    modes: function(array) {\n      if (!array.length) return [];\n      let modeMap = {},\n        maxCount = 0,\n        modes = [];\n\n      array.forEach(function(val) {\n        if (!modeMap[val]) modeMap[val] = 1;\n        else modeMap[val]++;\n\n        if (modeMap[val] > maxCount) {\n          modes = [val];\n          maxCount = modeMap[val];\n        } else if (modeMap[val] === maxCount) {\n          modes.push(val);\n          maxCount = modeMap[val];\n        }\n      });\n      return modes;\n    },\n\n    variance: function(array) {\n      const mean = Utils.stat.mean(array);\n      return Utils.stat.mean(\n        array.map(function(num) {\n          return Math.pow(num - mean, 2);\n        }),\n      );\n    },\n\n    standardDeviation: function(array) {\n      return Math.sqrt(Utils.stat.variance(array));\n    },\n\n    meanAbsoluteDeviation: function(array) {\n      const mean = Utils.stat.mean(array);\n      return Utils.stat.mean(\n        array.map(function(num) {\n          return Math.abs(num - mean);\n        }),\n      );\n    },\n\n    zScores: function(array) {\n      const mean = Utils.stat.mean(array);\n      const standardDeviation = Utils.stat.standardDeviation(array);\n      return array.map(function(num) {\n        return (num - mean) / standardDeviation;\n      });\n    },\n  };\n\n  /**\n   * @param schema {string} http or https\n   * @param host {string}\n   * @param port {number}\n   * @returns {string}\n   */\n  static buildUrl = (host: string, port: number, schema: string = 'http') => {\n    return `${schema}://${host}${port ? `:${port}` : ''}`;\n  };\n\n  //makes a timestamp\n  static getTimeStamp() {\n    const now = new Date();\n    return (\n      now.getFullYear() +\n      '-' +\n      (now.getMonth() + 1) +\n      '-' +\n      now.getDate() +\n      ' ' +\n      now.getHours() +\n      ':' +\n      (now.getMinutes() < 10 ? '0' + now.getMinutes() : now.getMinutes() + ':' + '00')\n    );\n  }\n\n  /***\n   * Builds node input data into an array\n   * @param array\n   */\n  static sum = array => array.reduce((cv, pv) => cv + pv, 0);\n\n  /**\n   * Creates a copy of the provided value, excluding non-serializable values\n   */\n  static onlySerializable(value: any): any {\n    return JSON.parse(JSON.stringify(value));\n  }\n\n  /***\n   * Clone object\n   * @param obj\n   * @param target\n   * @returns {any}\n   */\n  static cloneObject(obj: any, target?: any): any {\n    if (obj == null) return null;\n    let r = JSON.parse(JSON.stringify(obj));\n    if (!target) return r;\n\n    for (let i in r) target[i] = r[i];\n    return target;\n  }\n\n\n  /**\n   * @param val {any} value to be parsed\n   * @param type {string} type need to parsed\n   * Three state:\n   * 1. undefined: when we don't value input connected\n   * 2. null: connected but have no value (for text-box '' is treated as null)\n   * 3. Real value\n   */\n  static parseValue(val: any, type: string): any {\n    const typeofVal: string = typeof val;\n\n    if (val === null && type === 'string' && typeofVal !== 'string') return '';\n    if (val == null) return val; // undefined or null\n\n    if (type === 'number' && typeofVal !== 'number') {\n      if (typeofVal === 'boolean') return val ? 1 : 0;\n      return isNaN(parseFloat(val)) ? null : parseFloat(val); // non-parsable val as null\n    } else if (type === 'string' && typeofVal !== 'string') {\n      return JSON.stringify(val);\n    } else if (type === 'boolean' && typeofVal !== 'boolean') {\n      return isNull(val) || val === '' ? null : /true|1/gi.test(val);\n    } else if (type === 'json') {\n      const originalVal = val;\n      val = {};\n      if (typeofVal === 'string') {\n        try {\n          val = JSON.parse(originalVal);\n        } catch (e) {}\n      } else if (typeofVal === 'object') {\n        try {\n          val = JSON.parse(JSON.stringify(originalVal));\n        } catch (e) {}\n      }\n    }\n    return val;\n  }\n\n  static formatValue(val: any): string {\n    if (val == null) return '';\n    return this.formatAsPerValueType(val);\n  }\n\n  static formatNodeInOut(val: any): string {\n    if (val === null) return 'null';\n    if (val === '') return 'null'; // display '' as 'null' since we are treating text-box '' as null\n    if (val === undefined) return undefined;\n    return this.formatAsPerValueType(val);\n  }\n\n  private static formatAsPerValueType(val: any): string {\n    if (typeof val === 'boolean') {\n      val = val ? 'true' : 'false';\n    } else if (typeof val === 'number') {\n      val = parseFloat(val.toFixed(3)).toString();\n    } else if (typeof val === 'object') {\n      try {\n        JSON.parse(JSON.stringify(val));\n      } catch (e) {\n        return '[object]';\n      }\n      val = JSON.stringify(val);\n    }\n    return val;\n  }\n\n  static hasInput(data): boolean {\n    return data !== undefined;\n  }\n\n  static hasValidInput(data, nullable): boolean {\n    if (nullable) {\n      return data !== undefined;\n    }\n    return data != null && data !== ''; // `null`, `undefined` and string null i.ie `''` are needed to be checked\n  }\n\n  /**\n   * Get current time\n   * @returns {number}\n   */\n  static getTime(): number {\n    return typeof performance != 'undefined' ? performance.now() : Date.now();\n  }\n\n  static toFixedNumber(value: number, digits: number) {\n    let pow = Math.pow(10, digits);\n    return +(Math.round(value * pow) / pow);\n  }\n\n  /**\n   * @Deprecated: Use MathUtils::clamp\n   */\n  static clamp = function(value: number, min: number, max: number): number {\n    return Math.min(Math.max(value, min), max);\n  };\n\n  static remap = function(value: number, inMin: number, inMax: number, outMin: number, outMax: number): number {\n    value = Number(value);\n    inMin = Number(inMin);\n    inMax = Number(inMax);\n    outMin = Number(outMin);\n    outMax = Number(outMax);\n    if (value > inMax) value = inMax;\n    else if (value < inMin) value = inMin;\n    return ((value - inMin) / (inMax - inMin)) * (outMax - outMin) + outMin;\n  };\n\n  static renameKey = (old_key: string, new_key: string) => (instance: object) => {\n    if (old_key === new_key) return instance;\n    const cloned = {\n      ...instance,\n      [new_key]: instance[old_key],\n    };\n    delete cloned[old_key];\n    return cloned;\n  };\n\n  // Shade, Blend and Convert a Web Color\n  static pSBC = (percentageChange, fromColor, toColor: string = undefined, useLinear = false) => {\n    let r,\n      g,\n      b,\n      a,\n      P,\n      f,\n      t,\n      h,\n      i = parseInt,\n      m = Math.round,\n      isToColorString = typeof toColor == 'string';\n    if (\n      typeof percentageChange != 'number' ||\n      percentageChange < -1 ||\n      percentageChange > 1 ||\n      typeof fromColor != 'string' ||\n      (fromColor[0] != 'r' && fromColor[0] != '#') ||\n      (toColor && !isToColorString)\n    )\n      return null;\n    const pSBCr = d => {\n      let n = d.length,\n        x = { r: 0, g: 0, b: 0, a: 0 };\n      if (n > 9) {\n        ([r, g, b, a] = d = d.split(',')), (n = d.length);\n        if (n < 3 || n > 4) return null;\n        (x.r = i(r[3] == 'a' ? r.slice(5) : r.slice(4))), (x.g = i(g)), (x.b = i(b)), (x.a = a ? parseFloat(a) : -1);\n      } else {\n        if (n == 8 || n == 6 || n < 4) return null;\n        if (n < 6) d = '#' + d[1] + d[1] + d[2] + d[2] + d[3] + d[3] + (n > 4 ? d[4] + d[4] : '');\n        d = i(d.slice(1), 16);\n        if (n == 9 || n == 5)\n          (x.r = (d >> 24) & 255), (x.g = (d >> 16) & 255), (x.b = (d >> 8) & 255), (x.a = m((d & 255) / 0.255) / 1000);\n        else (x.r = d >> 16), (x.g = (d >> 8) & 255), (x.b = d & 255), (x.a = -1);\n      }\n      return x;\n    };\n    (h = fromColor.length > 9),\n      (h = isToColorString ? (toColor.length > 9 ? true : toColor == 'c' ? !h : false) : h),\n      (f = pSBCr(fromColor)),\n      (P = percentageChange < 0),\n      (t =\n        toColor && toColor != 'c'\n          ? pSBCr(toColor)\n          : P\n          ? { r: 0, g: 0, b: 0, a: -1 }\n          : { r: 255, g: 255, b: 255, a: -1 }),\n      (percentageChange = P ? percentageChange * -1 : percentageChange),\n      (P = 1 - percentageChange);\n    if (!f || !t) return null;\n    if (useLinear)\n      (r = m(P * f.r + percentageChange * t.r)),\n        (g = m(P * f.g + percentageChange * t.g)),\n        (b = m(P * f.b + percentageChange * t.b));\n    else\n      (r = m((P * f.r ** 2 + percentageChange * t.r ** 2) ** 0.5)),\n        (g = m((P * f.g ** 2 + percentageChange * t.g ** 2) ** 0.5)),\n        (b = m((P * f.b ** 2 + percentageChange * t.b ** 2) ** 0.5));\n    (a = f.a), (t = t.a), (f = a >= 0 || t >= 0), (a = f ? (a < 0 ? t : t < 0 ? a : a * P + t * percentageChange) : 0);\n    if (h) return 'rgb' + (f ? 'a(' : '(') + r + ',' + g + ',' + b + (f ? ',' + m(a * 1000) / 1000 : '') + ')';\n    else\n      return (\n        '#' +\n        (4294967296 + r * 16777216 + g * 65536 + b * 256 + (f ? m(a * 255) : 0))\n          .toString(16)\n          .slice(1, f ? undefined : -2)\n      );\n  };\n\n  static formatAndTrimValue(val: any): string {\n    const typeofVal = typeof val;\n    if (val != null && (typeofVal === 'string' || typeofVal === 'object')) {\n      if (typeofVal === 'object') {\n        val = JSON.stringify(val);\n      }\n      if (val.length > 30) val = val.substr(0, 30) + '...';\n      return val;\n    }\n    return val;\n  }\n\n  static copyToClipboard(text): boolean {\n    const textarea = document.createElement('textarea');\n    textarea.textContent = text;\n    textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      return document.execCommand('copy'); // Security exception may be thrown by some browsers.\n    } catch (ex) {\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n\n  static download(filename, text) {\n    const element = document.createElement('a');\n    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n    element.setAttribute('download', filename);\n\n    element.style.display = 'none';\n    document.body.appendChild(element);\n\n    element.click();\n\n    document.body.removeChild(element);\n  }\n\n  static WEEKDAYS = [null, 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];\n\n  static getISOday(day: string) {\n    return Utils.WEEKDAYS.indexOf(day.toLowerCase());\n  }\n\n  static sleep = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));\n}\n","import { Enumify } from 'enumify';\nimport { isFunction, isNotNull } from '../utils/helper';\nimport { BaseIdGenerator } from '../utils/id-generator';\nimport { NodeIO, SerializedNodeInput, SerializedNodeOutput, SerializedNodeSetting } from './node-io';\nimport { Registry } from './registry';\nimport { Serializable } from './serializable';\n\nexport class Side extends Enumify {\n\n  static server = new Side('SERVER');\n  static editor = new Side('EDITOR');\n  static dashboard = new Side('DASHBOARD');\n  static _ = Side.closeEnum();\n\n  private readonly name: string;\n\n  private constructor(name: string) {\n    super();\n    this.name = name;\n  }\n\n  toString(): string {\n    return this.name;\n  }\n}\n\n/**\n * Represents node in serialized mode to persist in database or json data in import/export\n */\nexport interface SerializedNode {\n  id: string | number;\n  cid: string | number;\n  name: string;\n  type: string;\n  pos: [number, number];\n  size?: [number, number];\n  inputs?: { [id: number]: SerializedNodeInput };\n  outputs?: { [id: number]: SerializedNodeOutput };\n  properties?: any;\n  settings?: { [name: string]: SerializedNodeSetting };\n  flags?: any;\n  icon?: string;\n\n}\n\nexport interface INode extends SerializedNode, Serializable<SerializedNode> {\n  /**\n   * Parent container\n   */\n  //TODO: rename to `parent`\n  container: IContainer;\n  side: Side;\n  title: string;\n  category: string;\n  inputs?: { [id: number]: SerializedNodeInput & NodeIO };\n  outputs?: { [id: number]: SerializedNodeOutput & NodeIO };\n\n  isUpdated?: boolean;\n\n  /**\n   * Gets parent container\n   * @see INode#container\n   * @return {IContainer} parent container\n   */\n  getParent(): IContainer;\n\n  /**\n   * Gets node that represents to {@link INode#container}\n   * @see IContainer#nodeItself\n   * @return {IFolderNode} `null` if parent container is root container, otherwise folder node that represents itself\n   */\n  getParentNode(): IFolderNode;\n}\n\n/**\n * Represents folder node in serialized mode to persist in database or json data in import/export\n */\nexport interface SerializedFolderNode extends SerializedNode {\n\n  /**\n   * Represents itself container that contains other nodes\n   */\n  sub_container: SerializedContainer;\n\n}\n\nexport interface IFolderNode extends SerializedFolderNode, INode, Serializable<SerializedFolderNode> {\n\n  /**\n   * @see SerializedFolderNode#sub_container\n   */\n  sub_container: IContainer;\n  inputs?: { [id: number]: SerializedNodeInput & NodeIO };\n  outputs?: { [id: number]: SerializedNodeOutput & NodeIO };\n\n  serialize(): SerializedFolderNode;\n}\n\n/**\n * Represents container in serialized mode to persist in database or json data in import/export\n */\nexport interface SerializedContainer {\n  id: string | number;\n  name?: string;\n  config?: any;\n  serializedNodes?: SerializedNode[];\n}\n\nexport interface IContainer extends SerializedContainer, Serializable<SerializedContainer> {\n\n  side: Side;\n\n  /**\n   * Gets a node that represents itself.\n   * @return {IFolderNode} `null` if this container is root container, otherwise folder node that represents itself\n   */\n  nodeItself(): IFolderNode;\n\n  nodeRegistry(): SubNodeRegistryMetadata;\n}\n\nexport const isNode = (node: any): boolean => {\n  return isNotNull(node) && typeof node === 'object' && 'id' in node && 'cid' in node && 'type' in node;\n};\n\nexport const isFolderNode = (node: any): boolean => {\n  return isNode(node) && 'sub_container' in node;\n};\n\nexport const isSerializedContainer = (container: any): boolean => {\n  return isNotNull(container) && !isNode(container) && typeof container === 'object' && 'id' in container;\n};\n\nexport const isContainer = (container: any): boolean => {\n  return isSerializedContainer(container) && isFunction(container['nodeRegistry']);\n};\n\nexport interface GeneratedKeyRegistry<T> extends Registry<T> {\n\n  readonly idGenerator: BaseIdGenerator;\n\n}\n\nexport interface ContainerRegistryMetadata extends GeneratedKeyRegistry<IContainer> {\n\n  /**\n   * Register new container\n   * @param {IContainer} container\n   * @param force if `false` and container id is already existed, new container id will be generated then reassigned\n   * to given container\n   * @return {IContainer} the registered container, never null\n   * @throws RegistryError if given container is null\n   */\n  register(container: IContainer, force?: boolean): IContainer;\n\n  /**\n   * Get container\n   * @param {number | string} id\n   * @returns {SerializedContainer} `null|undefined` if not found\n   */\n  get(id: number | string): IContainer;\n\n  has(id: number | string): boolean;\n\n  remove(id: number | string): IContainer;\n\n  rootContainer(): IContainer;\n}\n\nexport interface GlobalNodeRegistryMetadata extends Registry<INode> {\n\n  register(container: INode, force?: boolean): INode;\n\n  remove(id: number | string | INode): INode;\n\n}\n\n/**\n * Represents sub node registry in each container\n */\nexport interface SubNodeRegistryMetadata extends GeneratedKeyRegistry<INode> {\n\n  globalNodeRegistry: GlobalNodeRegistryMetadata;\n  containerRegistry: ContainerRegistryMetadata;\n\n  parent(): IContainer;\n\n  /**\n   * Returns a sub node by given id\n   * @param node\n   * @return {INode} sub node or null if not found\n   */\n  get(node: number | string | INode): INode;\n\n  /**\n   *\n   * @param {INode} node\n   * @param {boolean} force? Force register\n   * @param {string} key? node key\n   * @param {boolean} isCaching? only caching without calling to backend or database\n   * @return {Promise<INode>}\n   */\n  register(node: INode, force?: boolean, key?: string, isCaching?: boolean): Promise<INode>;\n\n  /**\n   * Removes a node from the container\n   * @param node the instance of the node or node id\n   * @param {boolean} isCaching? only caching without calling to backend or database\n   */\n  remove(node: INode | number | string, isCaching?: boolean): Promise<INode>;\n\n}\n\n","export type Constructor<T = {}> = new (...args: any[]) => T;\n\n// export class EnumHelper {\n//   private constructor() {\n//   }\n//\n//   static toOpts = <E extends typeof Enumify>(enumType: E, convert: (e: E) => string): { text: string; value: any; }[] => {\n//     return enumType.enumKeys.map(k => {\n//       return { text: convert(enumType.enumValueOf(k) as E), value: k };\n//     });\n//   };\n//\n// }\n\nexport const isNull = (value: any): boolean => value == null; // undefined or null\n\nexport const isNotNull = (value: any): boolean => !isNull(value);\n\nexport const isJSON = (value: any): boolean => isNotNull(value) && (typeof value === 'object' || Array.isArray(value));\n\nexport const isString = (value: any): boolean => {\n  return typeof value === 'string' || value instanceof String;\n};\n\nexport const isGreaterThanZero = (v: any): boolean => {\n  return isNumeric(v) && +v > 0;\n};\n\nexport const isEmpty = (value: any): boolean => {\n  if (isNull(value)) {\n    return true;\n  }\n  if (value instanceof Array) {\n    return value.length === 0;\n  }\n  if (value instanceof Object) {\n    return Object.keys(value).length === 0;\n  }\n  if (value instanceof String) {\n    return value.trim() === '';\n  }\n  return value.toString().trim() === '';\n};\n\nexport const toLowerSnakeCase = (label: string): string => {\n  return isNull(label)\n         ? null\n         : label\n           .toString()\n           .toLowerCase()\n           .replace(/-+\\s+/g, '_');\n};\n\nexport function parseBool(str) {\n  if (str.length == null) {\n    return str == 1;\n  } else {\n    return str == 'true';\n  }\n}\n\nexport const isFunction = (func: any): boolean => func && {}.toString.call(func) === '[object Function]';\n\nexport const isNumeric = (n): boolean => !isNaN(parseFloat(n)) && isFinite(n);\n\nexport const convertToNumber = (value: any, strict: boolean = false): number => {\n  if (isNull(value)) {\n    return null;\n  }\n  let inString = value.toString();\n  let n = +inString;\n  if (isNumeric(n) && !/^\\s*$/.test(inString)) {\n    return n;\n  }\n  if (strict) {\n    throw new Error('Invalid number');\n  }\n  return null;\n};\n\nexport const Generator = {\n  map: (generator, mapper: Function) =>\n    function* (...args) {\n      for (const x of generator(...args)) yield mapper(x);\n    },\n  filter: (generator, filter: Function) =>\n    function* (...args) {\n      for (const x of generator(...args)) if (filter(x)) yield x;\n    },\n};\n\nexport const range = function* (from: number, to: number, step: number = 1) {\n  let i      = 0,\n      length = ~~((to - from) / step) + 1;\n  while (i < length) yield from + i++ * step;\n};\n\nexport const union = (...collections): Set<any> => collections.reduce((c, l) => new Set([...c, ...l]), new Set());\n\nexport const unionToArray = (...collections): Array<any> => [...union(...collections)];\n\nexport const mapToObject = <V1, V2>(obj: { [key: string]: V1 }, keyMapper: (k, v: V1) => any,\n                                    valMapper: (k, v: V1) => V2): { [key: string]: V2 } => {\n  return obj ? Object.keys(obj).reduce((r, k) => ({ ...r, ['' + keyMapper(k, obj[k])]: valMapper(k, obj[k]) }), {})\n             : {};\n};\n\nexport const mapToObjectSameKey = <V1, V2>(obj: { [key: string]: V1 },\n                                           valMapper: (k, v: V1) => V2): { [key: string]: V2 } => {\n  return mapToObject(obj, (k, _) => k, valMapper);\n};\n\nexport const arrayToObject = <T, V>(arr: Array<T>, keyMapper: (o: T, idx?: number) => any,\n                                    valMapper: (o: T, idx?: number) => V): { [k: string]: V } => {\n  return arr.reduce((obj, o, idx) => ((obj['' + keyMapper(o, idx)] = valMapper(o, idx)), obj), {});\n};\n\nexport const groupBy = <T, V>(arr: Array<T>, keyMapper: (o: T, idx?: number) => any,\n                              accumulator: (o: T, key?: string, idx?: number) => V[]): { [key: string]: V[] } => {\n  return arr.reduce((obj: { [key: string]: V[] }, o, idx) => {\n    const key = '' + keyMapper(o, idx);\n    obj[key] = [...(obj[key] ?? []), ...accumulator(o, key, idx)];\n    return obj;\n  }, {});\n};\n\nexport const objectOf = <V>(k: string | number, v: V): {} => {\n  const o = {};\n  o[k] = v;\n  return o;\n};\n","import * as moment from 'moment-timezone';\n\nexport enum TIME_TYPE {\n  DAYS = 'days',\n  HOURS = 'hours',\n  MINUTES = 'minutes',\n  SECONDS = 'seconds',\n  MILLISECONDS = 'milliseconds',\n}\n\nexport default class TimeUtils {\n  /**\n   * convert ms to days, hours, min, sec, ms\n   * @returns {number}\n   * @param timeType\n   * @param timeOut\n   */\n  static timeConvert(timeOut: number, timeType: string): number {\n    // calculate time in milliseconds\n    switch (timeType) {\n      case TIME_TYPE.DAYS:\n        return timeOut * 24 * 60 * 60 * 1000;\n      case TIME_TYPE.HOURS:\n        return timeOut * 60 * 60 * 1000;\n      case TIME_TYPE.MINUTES:\n        return timeOut * 60 * 1000;\n      case TIME_TYPE.SECONDS:\n        return timeOut * 1000;\n      case TIME_TYPE.MILLISECONDS:\n        return timeOut;\n      default:\n        return -1;\n    }\n  }\n\n  /**\n   * Round the time to the nearest min\n   * For example if interval is 15min then it will convert value on pattern 1:00, 1:15, 1:30\n   * @param interval\n   * @param momentValue\n   */\n  static nearestFutureMinutes(interval, momentValue: moment.Moment): moment.Moment {\n    const roundedMinutes = Math.ceil(momentValue.minute() / interval) * interval;\n    return momentValue\n      .clone()\n      .minute(roundedMinutes)\n      .second(0)\n      .millisecond(0);\n  }\n\n  /**\n   * Converts time duration into a human readable string formats\n   * @param timeInMs {number} a valid numeric number\n   * @param format {number} formats are as follows:\n   * Case 1: ${DD}:${HH}:${mm}:${ss}:${sss} with pad start 0\n   * Case 2: DD${DD}:HH${HH}:MM${mm}:SS${ss}:MS${sss} no pad start\n   * Case 3: DD${DD}:HH${HH}:MM${mm}:SS${ss}:MS${sss} with pad start 0\n   * Case 4: D${DD}:H${HH}:M${mm}:S${ss}:MS${sss} no pad start\n   * Case 5: D${DD}:H${HH}:M${mm}:S${ss}:MS${sss} with pad start 0\n   * Default: ${DD}:${HH}:${mm}:${s}:${sss}\n   * @param timeType {string} Options: days, hours, minutes, seconds, milliseconds\n   * @returns {string}\n   */\n\n  static timeDisplay(timeInMs: number, format: number = 5, timeType?: string) {\n    let duration = timeInMs;\n    if (timeType && timeType != 'milliseconds') duration = TimeUtils.timeConvert(duration, timeType);\n    const mm = moment.duration(duration);\n\n    switch (format) {\n      case 0:\n        return (\n          mm.days().toString() + ':' + mm.hours() + ':' + mm.minutes() + ':' + mm.seconds() + ':' + mm.milliseconds()\n        );\n      case 1:\n        return (\n          'DD:HH:MM:SS:MS ' +\n          mm.days() +\n          ':' +\n          mm.hours() +\n          ':' +\n          mm.minutes() +\n          ':' +\n          mm.seconds() +\n          ':' +\n          mm.milliseconds()\n        );\n      case 2:\n        return (\n          'DD' +\n          mm.days() +\n          ':' +\n          'HH' +\n          mm.hours() +\n          ':' +\n          'MM' +\n          mm.minutes() +\n          ':' +\n          'SS' +\n          mm.seconds() +\n          ':' +\n          'MS' +\n          mm.milliseconds()\n        );\n      case 3:\n        return (\n          'DD' +\n          mm\n            .days()\n            .toString()\n            .padStart(2, '0') +\n          ':' +\n          'HH' +\n          mm\n            .hours()\n            .toString()\n            .padStart(2, '0') +\n          ':' +\n          'MM' +\n          mm\n            .minutes()\n            .toString()\n            .padStart(2, '0') +\n          ':' +\n          'SS' +\n          mm\n            .seconds()\n            .toString()\n            .padStart(2, '0') +\n          ':' +\n          'MS' +\n          mm\n            .milliseconds()\n            .toString()\n            .padStart(3, '0')\n        );\n      case 4:\n        return (\n          'D' +\n          mm.days() +\n          ':' +\n          'H' +\n          mm.hours() +\n          ':' +\n          'M' +\n          mm.minutes() +\n          ':' +\n          'S' +\n          mm.seconds() +\n          ':' +\n          'MS' +\n          mm.milliseconds()\n        );\n      case 5:\n        return (\n          'D' +\n          mm\n            .days()\n            .toString()\n            .padStart(2, '0') +\n          ':' +\n          'H' +\n          mm\n            .hours()\n            .toString()\n            .padStart(2, '0') +\n          ':' +\n          'M' +\n          mm\n            .minutes()\n            .toString()\n            .padStart(2, '0') +\n          ':' +\n          'S' +\n          mm\n            .seconds()\n            .toString()\n            .padStart(2, '0') +\n          ':' +\n          'MS' +\n          mm\n            .milliseconds()\n            .toString()\n            .padStart(3, '0')\n        );\n      default:\n        return (\n          mm.days().toString() + ':' + mm.hours() + ':' + mm.minutes() + ':' + mm.seconds() + ':' + mm.milliseconds()\n        );\n    }\n  }\n  static timeConvertPlus(d?: any) {\n    try {\n      const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n      const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n      let dts = d.toDateString();\n      let e = d.getTime();\n      let mnu = this.pad(d.getMonth() + 1, 2);\n      let mnt = d.getMonth();\n      let mn = monthNames[mnt];\n      let dy = dayNames[d.getDay()];\n      let dt = this.pad(d.getDate(), 2);\n      let yr = d.getFullYear();\n      let hr = d.getHours();\n      let mi = d.getMinutes();\n      let ny = Math.ceil((d - <any>new Date(d.getFullYear(), 0, 1)) / 86400000);\n      let h = this.pad(hr, 2);\n      let m = this.pad(mi, 2);\n      let s = this.pad(d.getSeconds(), 2);\n      let mil = this.pad(d.getMilliseconds(), 3);\n\n      // Get hour in 12hr format\n      let thr = null;\n      if (hr === 0) {\n        thr = 12;\n      } else if (hr > 12) {\n        thr = hr - 12;\n      } else {\n        thr = hr;\n      }\n      thr = '' + thr;\n\n      // Calculate if AM or PM\n      let amp = hr * 60 + mi;\n      if (amp < 720) {\n        amp = 'AM';\n      } else {\n        amp = 'PM';\n      }\n      let hm = h + ':' + m;\n      let hms = h + ':' + m + ':' + s;\n      let ms = m + ':' + s;\n      let date = dts;\n      let yearMonthDay = '' + yr + '-' + mnu + '-' + dt;\n      let year = '' + yr;\n      let month = mn;\n      let monthAsNumber = mnu;\n      let dayAsNumber = dt;\n      let dayOfYearNumber = '' + ny;\n      let day = dy;\n      let hourAsAmPm = thr;\n      let hour = h;\n      let timeHourMin = hm;\n      let time = hms;\n      let minute = m;\n      let minutesSeconds = ms;\n      let seconds = s;\n      let milliseconds = mil;\n      let epoch = '' + e;\n      let rawDate = d;\n      let pmOrAm = amp;\n\n      return {\n        date: date,\n        yearMonthDay: yearMonthDay,\n        year: year,\n        month: month,\n        monthAsNumber: monthAsNumber,\n        dayAsNumber: dayAsNumber,\n        dayOfYearNumber: dayOfYearNumber,\n        day: day,\n        pmOrAm: pmOrAm,\n        hourAsAmPm: hourAsAmPm,\n        hour: hour,\n        timeHourMin: timeHourMin,\n        time: time,\n        minute: minute,\n        minutesSeconds: minutesSeconds,\n        seconds: seconds,\n        milliseconds: milliseconds,\n        epoch: epoch,\n        rawDate: rawDate,\n      };\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  private static pad(num: string, size: number) {\n    let s = num + '';\n    while (s.length < size) s = '0' + s;\n    return s;\n  }\n}\n","import { Node} from './node';\nimport { convertType, InputSetting, NodeInput, NodeOutput, NodeSetting, SettingType, Type } from './node-io';\nimport Utils from './utils';\n\nexport class FlexibleNode extends Node {\n  nullableInputs: boolean = true;\n  dynamicInputsExist: boolean = true;\n  dynamicOutputsExist: boolean = false;\n  dynamicSettingsExist: boolean = true;\n  /**\n   * You can override this field if you have different setting name than `inputs` for reading inputs counts\n   * @returns {string} field name\n   */\n  dynamicInputsField: string = 'inputs';\n  /**\n   * You can override this field if you have different setting name than `outputs` for reading inputs counts\n   * @returns {string} field name\n   */\n  dynamicOutputsField: string = 'outputs';\n  /**\n   * For name convention on output\n   * Example:\n   * 0 for in1, in2, ...\n   * 1 for select, in1, in2, ...\n   * 2 for select, enable, in1, in2, ...\n   */\n  dynamicInputStartPosition: number = 0;\n  /**\n   * Dynamic input start name\n   * Example (for in):\n   * `[in 1]`, `[in 2]` will be inputs name\n   * `in1`, `in2` will be settings keys and `in 1` and `in 2` will be settings description\n   */\n  dynamicInputsStartName: string = 'in';\n  dynamicOutputsStartName: string = 'out';\n  dynamicInputsType: Type = Type.ANY;\n  dynamicOutputsType: Type = Type.ANY;\n  dynamicMinInputs: number = 2;\n  dynamicMaxInputs: number = 100;\n  dynamicMinOutputs: number = 2;\n  dynamicMaxOutputs: number = 100;\n  dynamicDefaultInputs: number = 2;\n  dynamicDefaultOutputs: number = 2;\n\n  constructor() {\n    super();\n  }\n\n  setup() {\n    if (this.dynamicInputsExist) {\n      this.settings['inputs'] = NodeSetting.create({\n        description: 'Inputs count',\n        value: this.dynamicDefaultInputs,\n        type: SettingType.NUMBER,\n      });\n    }\n    if (this.dynamicOutputsExist) {\n      this.settings['outputs'] = NodeSetting.create({\n        description: 'Outputs count',\n        value: this.dynamicDefaultOutputs,\n        type: SettingType.NUMBER,\n      });\n    }\n  }\n\n  /**\n   * It invokes right after finishing the constructor call\n   */\n  init() {\n    if (this.dynamicInputsExist) {\n      this.changeDynamicInputsAndSettings(false);\n    }\n    if (this.dynamicOutputsExist) {\n      this.addDynamicOutputsOnRange(false);\n    }\n  }\n\n  onAfterSettingsChange() {\n    if (this.dynamicInputsExist) {\n      this.changeDynamicInputsAndSettings();\n    }\n    if (this.dynamicOutputsExist) {\n      this.addDynamicOutputsOnRange();\n    }\n  }\n\n  /**\n   * Adds inputs dynamically as per the settings['inputs'] value\n   */\n  addDynamicInputsOnRange = (save: boolean = true): void => {\n    const count = this.dynamicInputsCount();\n    const targetCount = Utils.clamp(count, this.dynamicMinInputs, this.dynamicMaxInputs);\n    const currentCount = this.getInputsCount() - this.dynamicInputStartPosition;\n    const addedInputsCount = targetCount - currentCount;\n\n    if (addedInputsCount > 0) {\n      // add\n      for (let i = 0; i < addedInputsCount; i++) this.addInputWithName();\n    } else if (addedInputsCount < 0) {\n      // remove\n      const inputCount = this.getInputsCount();\n      for (let i = inputCount; i > inputCount + addedInputsCount; i--) {\n        this.removeInput(i - 1);\n      }\n    }\n    save && this.updateNodeInput();\n  };\n\n  /**\n   * Adds outputs dynamically as per the settings['outputs'] value\n   */\n  addDynamicOutputsOnRange = (save: boolean = true): void => {\n    const count = this.dynamicOutputsCount();\n    const targetCount = Utils.clamp(count, this.dynamicMinOutputs, this.dynamicMaxOutputs);\n    const currentCount = this.getOutputsCount();\n    const addedOutputsCount = targetCount - currentCount;\n\n    if (addedOutputsCount > 0) {\n      // add\n      for (let i = 0; i < addedOutputsCount; i++) this.addOutputWithName();\n    } else if (addedOutputsCount < 0) {\n      // remove\n      const inputCount = this.getOutputsCount();\n      for (let i = inputCount; i > inputCount + addedOutputsCount; i--) {\n        this.removeOutput(i - 1);\n      }\n    }\n    save && this.updateNodeOutput();\n  };\n\n  settingWiseDynamicInputsAndSettingsUpdate = (save: boolean = true) => {\n    const startingCount = this.getInputsCount();\n    this.addDynamicInputsOnRange(save);\n    const targetCount = this.getInputsCount();\n    this.addDynamicSettings(startingCount, targetCount);\n  };\n\n  settingWiseDynamicInputsAndSettingsUpdateForBoolean = (save: boolean = true) => {\n    this.dynamicInputsType = Type.BOOLEAN; // if not assigned\n    const startingCount = this.getInputsCount();\n    this.addDynamicInputsOnRange(save);\n    const targetCount = this.getInputsCount();\n    const name = this.dynamicInputsStartName;\n    for (let i = startingCount; i < targetCount; i++) {\n      if (!this.settings[`${name} ${this.dynamicIndex(i)}`]) {\n        this.settings[`${name} ${this.dynamicIndex(i)}`] = NodeSetting.create({\n          description: `${name} ${this.dynamicIndex(i)}`,\n          type: SettingType.DROPDOWN,\n          config: {\n            items: [\n              { value: false, text: 'false' },\n              { value: true, text: 'true' },\n              { value: null, text: 'null' },\n            ],\n          },\n          value: null,\n        });\n      }\n    }\n    for (let i = targetCount; i < startingCount; i++) {\n      delete this.settings[`${name} ${this.dynamicIndex(i)}`];\n    }\n  };\n\n  private changeDynamicInputsAndSettings(save: boolean = true) {\n    if (this.dynamicSettingsExist) {\n      if (this.dynamicInputsType === Type.BOOLEAN) {\n        this.settingWiseDynamicInputsAndSettingsUpdateForBoolean(save);\n      } else {\n        this.settingWiseDynamicInputsAndSettingsUpdate(save);\n      }\n    } else {\n      this.addDynamicInputsOnRange(save);\n    }\n  }\n\n  /**\n   * To read total number of inputs for dynamic input update\n   * @returns {number} total dynamic input count\n   */\n  public dynamicInputsCount = (): number => this.settings[this.dynamicInputsField].value;\n\n  public dynamicOutputsCount = (): number => this.settings[this.dynamicOutputsField].value;\n\n  private getInputSetting() {\n    return {\n      exist: this.dynamicSettingsExist,\n      nullable: this.nullableInputs,\n      hidden: false,\n    };\n  }\n\n  private addInputWithName = (): void => {\n    let id = this.getFreeInputId();\n    let setting: InputSetting = this.getInputSetting();\n    let name = `${this.dynamicInputsStartName} ${id + 1 - this.dynamicInputStartPosition}`;\n    if (this.dynamicSettingsExist) {\n      name = `[${name}]`;\n    }\n    let input: NodeInput = NodeInput.create({ name, type: this.dynamicInputsType, setting });\n    if (!this.inputs) this.inputs = {};\n    this.inputs[id] = input;\n    if (this['onInputAdded']) this['onInputAdded'](input);\n  };\n\n  private addOutputWithName = (): void => {\n    let id = this.getFreeOutputId();\n    let name = `${this.dynamicOutputsStartName} ${id + 1}`;\n    let output: NodeOutput = NodeOutput.create({ name: name, type: this.dynamicOutputsType });\n    if (!this.outputs) this.outputs = {};\n    this.outputs[id] = output;\n    if (this['onOutputAdded']) this['onOutputAdded'](output);\n  };\n\n  /**\n   * Adds settings text fields dynamically as per starting count\n   */\n  private addDynamicSettings = (startingCount, targetCount) => {\n    // We are treating '' as null, if we store null value on string type it will create issue on everywhere.\n    // For example: null + 'ability' = 'ability'\n    const value = SettingType.STRING ? '' : null;\n    const name: string = this.dynamicInputsStartName;\n    const type: SettingType = convertType(this.dynamicInputsType);\n    for (let i = startingCount; i < targetCount; i++) {\n      if (!this.settings[`${name} ${this.dynamicIndex(i)}`]) {\n        this.settings[`${name} ${this.dynamicIndex(i)}`] = NodeSetting.create({\n          description: `${name} ${this.dynamicIndex(i)}`,\n          value,\n          type: type,\n        });\n      }\n    }\n    for (let i = targetCount; i < startingCount; i++) {\n      delete this.settings[`${name} ${this.dynamicIndex(i)}`];\n    }\n  };\n\n  private dynamicIndex = (id): number => id + 1 - this.dynamicInputStartPosition;\n}\n","import { Colors, create } from 'logplease';\n\nexport const db_logger = create('database', { color: Colors.Blue });\nexport const registry_logger = create('registry', { color: Colors.Blue });\nexport const reliability_logger = create('reliability', { color: Colors.Red });\nexport const node_service_logger = create('node-service', { color: Colors.Cyan });\nexport const server_logger = create('server', { color: Colors.Yellow });\nexport const heartbeat_logger = create('heartbeat', { color: Colors.Yellow });\n","const env = process?.env;\n\nconst config = {\n  rubix: {\n    version: '1.8.3-6835b65',\n    buildNb: '',\n  },\n  secretKey: env?.SECRET_KEY || '',\n  port: parseInt(env?.PORT ?? '1313'),\n  dataDir: env?.DATA_DIR,\n  loopInterval: parseInt(env?.LOOP_INTERVAL ?? '100'),\n  backendSync: {\n    enabled: /true|1/i.test(env?.BACKEND_ENABLED ?? 'false'),\n    baseUrl: env?.BACKEND_API ?? '',\n    nodeRefreshIntervalSeconds: parseInt(env?.NODE_DISTANCE ?? '60'),\n    pointRefreshIntervalSeconds: parseInt(env?.NODE_REFRESH_INTERVAL_SEC ?? '60'),\n    nodeDistance: parseInt(env?.POINT_REFRESH_INTERVAL_SEC ?? '60'),\n  },\n  database: {\n    compactionInterval: 30,\n  },\n  bsa         : {\n    baseURL : env?.BSA_BASEURL ?? '',\n    username: env?.BSA_USERNAME ?? '',\n    password: env?.BSA_PASSWORD ?? '',\n    paths   : {\n      measurement: {\n        path  : env?.BSA_PATHS_MEASUREMENT_PATH ?? '',\n        accept: env?.BSA_PATHS_MEASUREMENT_ACCEPT ?? '',\n      },\n      alarm      : {\n        path       : env?.BSA_PATHS_ALARM_PATH ?? '',\n        accept     : env?.BSA_PATHS_ALARM_ACCEPT ?? '',\n        contentType: env?.BSA_PATHS_ALARM_CONTENTTYPE ?? '',\n      },\n      device     : {\n        path: env?.BSA_PATHS_DEVICE_PATH ?? '',\n      },\n      operation      : {\n        path       : env?.BSA_PATHS_OPERATION_PATH ?? '',\n        accept     : env?.BSA_PATHS_OPERATION_ACCEPT ?? '',\n        contentType: env?.BSA_PATHS_OPERATION_CONTENTTYPE ?? '',\n      },\n    },\n  },\n  ditto: {\n    baseURL: env?.DITTO_BASEURL ?? '',\n    username: env?.DITTO_USERNAME ?? '',\n    password: env?.DITTO_PASSWORD ?? '',\n  },\n  pg: {\n    baseURL: env?.PG_BASEURL ?? '',\n  },\n  influxDb: {\n    protocol: env?.INFLUX_DB_PROTOCOL ?? 'http',\n    host: env?.INFLUX_DB_HOST ?? '',\n    port: env?.INFLUX_DB_PORT ?? '',\n    databaseName: env?.INFLUX_DB_DB_NAME ?? '',\n    username: env?.INFLUX_DB_USERNAME ?? '',\n    password: env?.INFLUX_DB_PASSWORD ?? '',\n  },\n  influxDb2: {\n    protocol: env?.INFLUX_DB_2_PROTOCOL ?? 'http',\n    url: env?.INFLUX_DB_2_URL ?? '',\n    token: env?.INFLUX_DB_2_TOKEN ?? '',\n    bucket: env?.INFLUX_DB_2_BUCKET ?? '',\n    org: env?.INFLUX_DB_2_ORG ?? '',\n    username: env?.INFLUX_DB_2_USERNAME ?? '',\n    password: env?.INFLUX_DB_2_PASSWORD ?? '',\n  },\n  edge28: {\n    baseURL: env?.EDGE_28_BASEURL ?? '',\n    port: parseInt(env?.EDGE_28_PORT ?? '5000'),\n    apiVer: env?.EDGE_28_API_VER ?? '',\n  },\n  mqtt: {\n    protocol: env?.MQTT_PROTOCOL ?? 'mqtt',\n    host: env?.MQTT_HOST ?? '',\n    port: parseInt(env?.MQTT_PORT ?? '1883'),\n    username: env?.MQTT_USERNAME ?? '',\n    password: env?.MQTT_PASSWORD ?? '',\n  },\n};\n\nexport const RUBIX_VERSION: string = `v${config.rubix.version}${config.rubix.buildNb && `-${config.rubix.buildNb}`}`;\nexport default config;\n","import { unionToArray } from '../utils/helper';\nimport { UNKNOWN_NODE } from './constants';\nimport { Node } from './node';\nimport { AbstractRegistry } from './registry';\n\nexport class NodeTypeRegistry extends AbstractRegistry<any> {\n  private static _instance: NodeTypeRegistry;\n\n  private constructor() {\n    super();\n  }\n\n  public static instance(): NodeTypeRegistry {\n    if (!NodeTypeRegistry._instance) {\n      NodeTypeRegistry._instance = new NodeTypeRegistry();\n    }\n    return NodeTypeRegistry._instance;\n  }\n\n  /**\n   * Register a node class so it can be listed when the user wants to create a new one\n   * @param type name of the node and path\n   * @param node_class class containing the structure of a node\n   * @param parentContainerNodeType some menus should be shown only if parentContainerNodeType is there\n   * @param show_in_menu\n   * @param recursive same container node inside the parent container node\n   * @param alwaysInsideContainer\n   */\n  static registerNodeType(type: string, node_class: any, parentContainerNodeType: string = null,\n                          show_in_menu: boolean                                          = true,\n                          recursive: boolean                                             = false,\n                          alwaysInsideContainer: boolean                                 = false): void {\n    if (!(node_class.prototype instanceof Node)) {\n      throw `Can't register node of type [${type}]. Class must inherit Node base class!`;\n    }\n    node_class.type = type;\n    node_class.category = type.substr(0, type.lastIndexOf('/'));\n    node_class.node_name = type.substr(type.lastIndexOf('/') + 1, type.length);\n    node_class.show_in_menu = show_in_menu;\n    node_class.parentContainerNodeType = parentContainerNodeType;\n    node_class.recursive = recursive;\n    node_class.onlyInsideContainer = alwaysInsideContainer;\n    //TODO should make node_type object\n    let node: Node = new node_class();\n    node_class.icon = node.iconImageUrl;\n    node_class.color = node.headerColor;\n    node_class.title = node.title || node.type;\n    NodeTypeRegistry.instance().register(node_class, true, type);\n  }\n\n  /**\n   * Verify node type in registry. If it is not existed, then fallback to {@link UNKNOWN_NODE}\n   *\n   * @returns {string} Node Type id, never null\n   */\n  lookupNodeType(type: string): string {\n    return this.has(type) ? type : UNKNOWN_NODE;\n  }\n\n  /**\n   * Returns a list of node types matching one category\n   * @param category category name\n   * @returns {Array} array with all the node classes\n   */\n  getNodeTypesInCategory(category: string): Array<any> {\n    return Object.values(this._registry).filter(n => n.category == (category || null));\n  }\n\n  nodeIsInCategory(category: string) {\n    return n => n.category == (category || null);\n  }\n\n  /**\n   * Returns a list with all the node type categories\n   * @returns {Array} array with all the names of the categories\n   */\n  getNodeTypesCategories(): Array<any> {\n    return unionToArray(Object.values(this._registry)\n                              .filter(n => !!n.category && n.show_in_menu)\n                              .map(n => n.category));\n  }\n\n  protected enableDebug(): boolean {\n    return false;\n  }\n\n  protected createKey(obj: any): string | number {\n    return undefined;\n  }\n}\n","export const EDGES_PARENT_CONTAINER_TYPE = 'IoT/edges-container';\nexport const MODULES_PARENT_CONTAINER_TYPE = 'IoT/modules-container';\nexport const SERVICES_PARENT_CONTAINER_TYPE = 'IoT/services-container';\nexport const EDGE_CONTAINER_TYPE = 'IoT/edge';\nexport const NETWORK_CONTAINER_TYPE = 'IoT/network';\nexport const DEVICE_CONTAINER_TYPE = 'IoT/device';\nexport const GROUP_CONTAINER_TYPE = 'IoT/group';\nexport const POINT_NODE_TYPE = 'IoT/point';\nexport const SERVICE_NODE_TYPE = 'IoT/service';\nexport const MODULE_NODE_TYPE = 'IoT/module';\n\nexport const IOT_TYPES = [\n  EDGES_PARENT_CONTAINER_TYPE,\n  MODULES_PARENT_CONTAINER_TYPE,\n  SERVICES_PARENT_CONTAINER_TYPE,\n  EDGE_CONTAINER_TYPE,\n  NETWORK_CONTAINER_TYPE,\n  DEVICE_CONTAINER_TYPE,\n  GROUP_CONTAINER_TYPE,\n  POINT_NODE_TYPE,\n  SERVICE_NODE_TYPE,\n  MODULE_NODE_TYPE,\n];\n\nexport const MODBUS_RTU_NETWORK = 'protocols/modbus/modbus-rtu-network';\nexport const MODBUS_RTU_DEVICE = 'protocols/modbus/modbus-rtu-device';\nexport const MODBUS_RTU_POINT = 'protocols/modbus/modbus-rtu-point';\nexport const BACNET_NETWORK = 'protocols/bacnet/bacnet-network';\nexport const BACNET_DEVICE = 'protocols/bacnet/bacnet-device';\nexport const BACNET_POINT = 'protocols/bacnet/bacnet-point';\nexport const EDGE_28_NETWORK = 'protocols/nube/edge-28-network';\nexport const EDGE_28_INPUT = 'protocols/nube/edge-28-input';\nexport const EDGE_28_OUTPUT = 'protocols/nube/edge-28-output';\n\nexport const MQTT_NETWORK = 'protocols/mqtt/mqtt-network';\nexport const MQTT_POINT_WRITE = 'protocols/mqtt/mqtt-point-write';\nexport const MQTT_POINT_READ = 'protocols/mqtt/mqtt-point-read';\nexport const UNKNOWN_NODE = 'unknown/unknown';\n","module.exports = require(\"logplease\");","module.exports = require(\"moment-timezone\");","module.exports = require(\"axios\");","import { v4 } from 'slugid';\nimport { isNotNull, isNumeric } from './helper';\n\nexport abstract class BaseIdGenerator {\n  static readonly UNINITIALIZED = -1;\n  static readonly ROOT = 0;\n\n  static createNodeId(cId: number | string, nId: any) {\n    if (isNotNull(cId)) {\n      if (isNumeric(nId)) {\n        return `c${cId}n${nId}`;\n      } else {\n        return nId;\n      }\n    }\n    return null;\n  }\n\n  abstract genNodeId(cid?: string | number, id?: string | number);\n\n  abstract genContainerId(cid?: string | number);\n\n  shouldGenerateCid(id: string | number): boolean {\n    return id === BaseIdGenerator.ROOT || id === BaseIdGenerator.UNINITIALIZED;\n  }\n\n  shouldGenerateNid(cid: string | number, id: string | number): boolean {\n    return this.shouldGenerateCid(id);\n  }\n}\n\nexport class NoChangeId extends BaseIdGenerator {\n\n  genContainerId(cid?: string | number) {\n    return cid ?? BaseIdGenerator.UNINITIALIZED;\n  }\n\n  genNodeId(cid?: string | number, id?: string | number) {\n    return id ?? BaseIdGenerator.UNINITIALIZED;\n  }\n\n}\n\n/**\n * ID generator\n */\nexport class IdGenerator extends BaseIdGenerator {\n\n  private static _instance: IdGenerator;\n\n  private constructor() {\n    super();\n  }\n\n  public static instance(): IdGenerator {\n    if (!IdGenerator._instance) {\n      IdGenerator._instance = new IdGenerator();\n    }\n\n    return IdGenerator._instance;\n  }\n\n  genContainerId(cid?: string | number) {\n    return v4();\n  }\n\n  genNodeId(cid?: string | number, id?: string | number) {\n    return v4();\n  }\n\n}\n","module.exports = require(\"lodash\");","import { AsyncDbHelper, Database } from '../database/database';\nimport { isEmpty, isNumeric } from '../utils/helper';\nimport { IdGenerator } from '../utils/id-generator';\nimport { db_logger as logger } from '../utils/loggers';\nimport { Node } from './node';\nimport { INode, SerializedNode, Side } from './node-interface';\nimport { SerializableHelper } from './serializable';\n\nexport interface NodeDbHelper {\n\n  listByIds(database: Database, ids: string[]): Promise<SerializedNode[]>;\n\n  /**\n   * Query Nodes in container by container id\n   * @param {Database} database\n   * @param {number} cid Container id\n   * @return {Promise<SerializedNode[]>}\n   */\n  listByContainer(database: Database, cid: string | number): Promise<SerializedNode[]>;\n\n  /**\n   * Async update node properties\n   * @param {Database} database\n   * @param {SerializedNode | INode | Node} node\n   * @param {string} props node properties, If not provided, whole node will be serialized then updated\n   * @return {Promise<void>}\n   */\n  updateAsync(database: Database, node: SerializedNode | INode | Node, ...props: string[]): Promise<void>;\n\n  /**\n   * Persist node in database by UPDATE operation based on properties\n   * @deprecated should use {@link NodeDbHelper#updateAsync}\n   * @param {Node} node\n   * @param {string[]} props node properties, If not provided, whole node will be serialized then updated\n   */\n  update(node: Node, props: string[]): void;\n\n  /**\n   * Insert new node\n   * @param {Database} database\n   * @param {SerializedNode} node\n   * @return {Promise<SerializedNode>}\n   */\n  insert(database: Database, node: SerializedNode | INode | Node): Promise<SerializedNode>;\n\n  delete(database: Database, node: SerializedNode): Promise<void>;\n\n  batchInsert(database: Database, nodes: (SerializedNode | INode | Node)[]): Promise<SerializedNode[]>;\n\n  batchDeleteByIds(database: Database, ids: string[]): Promise<number>;\n\n}\n\nexport const createNodeDbHelper = (): NodeDbHelper => {\n  return new DefaultNodeDbHelper();\n};\n\nclass DefaultNodeDbHelper implements NodeDbHelper {\n\n  listByIds(database: Database, ids: string[]): Promise<SerializedNode[]> {\n    logger.debug(`Query nodes by ids: [${ids}]...`);\n    if (database) {\n      return AsyncDbHelper.oneArgs(database, database.listNodes, { _id: { $in: ids } });\n    }\n    return Promise.resolve([]);\n  }\n\n  listByContainer(database: Database, cid: string | number): Promise<SerializedNode[]> {\n    if (database) {\n      logger.debug(`Query nodes in container id '${cid}'...`);\n      const query = isNumeric(cid) ? { $in: [+cid, cid + ''] } : cid;\n      return AsyncDbHelper.oneArgs(database, database.listNodes, { cid: query });\n    }\n    return Promise.resolve([]);\n  }\n\n  /**\n   * Persist node in database by UPDATE operation based on properties\n   * @param {Node} node\n   * @param props node properties, If not provided, whole node will be serialized then updated\n   */\n  update(node: Node, props: string[]): void {\n    if (node.side === Side.server && node.container.db) {\n      let data = isEmpty(props) ? node.serialize()\n                                : props.reduce((o, p) => ((o[p] = SerializableHelper.serialize(node[p])), o), {});\n      node.container.db.updateNode(node.id, node.container.id, { $set: data });\n    }\n  }\n\n  updateAsync(database: Database, node: SerializedNode | INode | Node, ...props: string[]): Promise<void> {\n    if (database) {\n      const msg = isEmpty(props) ? `whole node` : `[${props}] of node`;\n      logger.debug(`Updating ${msg} '${IdGenerator.createNodeId(node.cid, node.id)}'...`);\n      const data = isEmpty(props) ? SerializableHelper.serialize(node)\n                                  : props.reduce((o, p) => ((o[p] = SerializableHelper.serialize(node[p])), o), {});\n      return AsyncDbHelper.threeArgs(database, database.updateNode, node.id, node.cid, { $set: data });\n    }\n    return Promise.resolve();\n  }\n\n  insert(database: Database, node: SerializedNode): Promise<SerializedNode> {\n    if (database) {\n      logger.debug(`Inserting node '${IdGenerator.createNodeId(node.cid, node.id)}' into database...`);\n      return AsyncDbHelper.oneArgs(database, database.addNode, SerializableHelper.serialize(node));\n    }\n    return Promise.resolve(node);\n  }\n\n  batchInsert(database: Database, nodes: (SerializedNode | INode | Node)[]): Promise<SerializedNode[]> {\n    if (database) {\n      logger.debug(`Inserting ${nodes.length} nodes into database...`);\n      return AsyncDbHelper.oneArgs<SerializedNode[]>(database, database.batchInsertNodes,\n                                                     nodes.map(n => SerializableHelper.serialize(n)))\n                          .then(insertedNodes => {\n                            logger.debug(`Inserted ${insertedNodes.length} nodes in database`);\n                            return insertedNodes;\n                          });\n    }\n    return Promise.resolve(nodes);\n  }\n\n  batchDeleteByIds(database: Database, ids: string[]): Promise<number> {\n    if (database) {\n      logger.debug(`Deleting node ids: [${ids}] in database...`);\n      return AsyncDbHelper.oneArgs<number>(database, database.batchDeleteNodes, { _id: { $in: ids } })\n                          .then(total => {\n                            logger.debug(`Deleted ${total} nodes in database`);\n                            return total;\n                          });\n    }\n    return Promise.resolve(0);\n  }\n\n  delete(database: Database, node: SerializedNode): Promise<void> {\n    if (database) {\n      logger.debug(`Deleting node '${IdGenerator.createNodeId(node.cid, node.id)}' in database...`);\n      return AsyncDbHelper.twoArgs(database, database.removeNode, node.id, node.cid);\n    }\n    return Promise.resolve();\n  }\n}\n\n","import { Colors, create } from 'logplease';\nimport { LinkResult } from '../shared/link-result';\nimport {\n  ContainerRegistryValidator,\n  IContainerRegistryValidator,\n  INodeRegistryValidator,\n  NodeRegistryValidator,\n} from '../shared/validator';\nimport { NotFoundError } from '../utils/errors';\nimport { groupBy, isEmpty, isNull } from '../utils/helper';\nimport { IdGenerator } from '../utils/id-generator';\nimport { Node } from './node';\nimport { createNodeDbHelper, NodeDbHelper } from './node-db-helper';\nimport { ContainerRegistryMetadata, IContainer, INode } from './node-interface';\nimport { IOType } from './node-io';\nimport { Deserializable, Serializable } from './serializable';\n\nconst logger = create('node-link', { color: Colors.Magenta });\n\ntype LinkAction = 'Connecting' | 'Connected' | 'Disconnecting' | 'Disconnected' | 'Moving' | 'Moved';\n\n/**\n * Represents simplest node io information\n */\nexport interface SlimNodeIO {\n  nodeId: string | number;\n  slot: number;\n  ioId?: string | number;\n}\n\nexport interface NodeLink {\n  /**\n   * Current container id\n   */\n  readonly cid: string;\n  /**\n   * Represents to a specific node output.\n   * @see SlimNodeIO\n   */\n  readonly source: SlimNodeIO;\n  /**\n   * Represents to one or many node inputs\n   * @see SlimNodeIO\n   */\n  targets: SlimNodeIO[];\n\n}\n\n/**\n * Represents for the bidirectional node link that guards for per input is connecting to only one another node output\n */\nexport interface BiNodeLink {\n  /**\n   * Current container id\n   */\n  readonly cid: string;\n\n  add(...nodeLinks: NodeLink[]): BiNodeLink;\n\n  optimize(): NodeLink[];\n}\n\nexport const createNodeLink = (cid: string | number, source: SlimNodeIO, ...targets: SlimNodeIO[]): NodeLink => {\n  return { cid: cid + '', source, targets };\n};\n\nexport const createBiNodeLink = (cid: string | number): BiNodeLink => {\n  return new DefaultBiNodeLink(cid + '');\n};\n\nexport const nodeIOtoMsg = (type: IOType, cid: string | number, ...nodeIO: SlimNodeIO[]): string => {\n  const msg = nodeIO.map(io => `node '${IdGenerator.createNodeId(cid, io.nodeId)}'-${type} '${io.ioId}'`).join(',');\n  return isEmpty(msg) ? msg : `[${msg}]`;\n};\n\nexport const slimIOtoKey = (io: SlimNodeIO): string => {\n  return io.nodeId + '/' + (io.ioId ?? io.slot);\n};\n\nexport const compareNodeIO = (io1: SlimNodeIO, io2: SlimNodeIO): boolean => {\n  if (isNull(io1) || isNull(io2)) {\n    return false;\n  }\n  return slimIOtoKey(io1) === slimIOtoKey(io2);\n};\n\nclass DefaultBiNodeLink implements BiNodeLink {\n  readonly cid: string;\n  private readonly _bySource: { [sKey: string]: { source: SlimNodeIO, targets: { [tKey: string]: SlimNodeIO } } };\n  private readonly _byTarget: { [tKey: string]: string };\n\n  constructor(cid: string) {\n    this.cid = cid;\n    this._bySource = {};\n    this._byTarget = {};\n  }\n\n  add(...nodeLinks: NodeLink[]): BiNodeLink {\n    nodeLinks.filter(nl => nl.cid + '' === this.cid)\n             .forEach(nl => {\n               const sKey = slimIOtoKey(nl.source);\n               this._bySource[sKey] = this._bySource[sKey] ?? { source: nl.source, targets: {} };\n               nl.targets.forEach(io => {\n                 const tKey = slimIOtoKey(io);\n                 if (isNull(this._byTarget[tKey])) {\n                   this._bySource[sKey].targets[tKey] = io;\n                   this._byTarget[tKey] = sKey;\n                 }\n               });\n             });\n    return this;\n  }\n\n  optimize(): NodeLink[] {\n    return Object.values(this._bySource)\n                 .map(v => createNodeLink(this.cid, v.source, ...Object.values(v.targets)));\n  }\n\n}\n\n/**\n * It is for legacy code. Should migrate later\n */\nexport interface LegacyLink {\n  target_node_id: string | number;\n  target_slot: number;\n  target_input_id?: string | number;\n}\n\nexport class Link implements SlimNodeIO, Serializable<SlimNodeIO>, Deserializable<LegacyLink | SlimNodeIO> {\n\n  nodeId: string;\n  slot: number;\n  ioId?: string;\n\n  constructor();\n  constructor(nodeId: string | number, slot: number);\n  constructor(nodeId: string | number, slot: number, ioId: string | number);\n  constructor(nodeId?: string | number, slot?: number, ioId?: string | number) {\n    this.nodeId = nodeId + '';\n    this.slot = slot;\n    this.ioId = (ioId ?? slot) + '';\n  }\n\n  static create(object: SlimNodeIO | Link | LegacyLink | { target_node_id: string | number, target_slot: number, target_input_id?: number }): Link {\n    if (isNull(object)) {\n      return null;\n    }\n    return new Link().deserialize(object);\n  }\n\n  serialize(): SlimNodeIO {\n    return { ...this };\n  }\n\n  deserialize(obj: LegacyLink | SlimNodeIO): Link {\n    return new Link((<SlimNodeIO>obj).nodeId ?? (<LegacyLink>obj).target_node_id,\n                    (<SlimNodeIO>obj).slot ?? (<LegacyLink>obj).target_slot,\n                    (<SlimNodeIO>obj).ioId ?? (<LegacyLink>obj).target_input_id);\n  }\n}\n\nexport interface NodeLinkHandler {\n\n  /**\n   * Create new link between source node to one or many nodes\n   * @param {NodeLink} nodeLink\n   * @return {LinkResult}\n   */\n  create(nodeLink: NodeLink): LinkResult;\n\n  /**\n   * Create new link between source node to one or many nodes\n   * @param {NodeLink} nodeLink\n   * @param {boolean} lenient if true, if node link targets has any invalid, it will skip to create link. Otherwise,\n   * error will be thrown\n   * @return {LinkResult}\n   */\n  create(nodeLink: NodeLink, lenient?: boolean): LinkResult;\n\n  /**\n   * Batch create multiple links between source node to one or many nodes.\n   *\n   * This method will optimize node-link to ensure each input node will have only one link to another one.\n   *\n   * @param {NodeLink} nodeLinks given node links\n   * @return {LinkResult}\n   */\n  batchCreate(...nodeLinks: NodeLink[]): LinkResult;\n\n  remove(nodeLink: NodeLink): LinkResult;\n\n  remove(nodeLink: NodeLink, lenient?: boolean): LinkResult;\n\n  move(type: IOType, fromNodeLink: NodeLink, toAnother: SlimNodeIO): LinkResult;\n\n  disconnectInput(cid: string | number, slimIO: SlimNodeIO): LinkResult;\n\n  disconnectOutput(cid: string | number, slimIO: SlimNodeIO): LinkResult;\n\n}\n\n/**\n * @deprecated Use {@link NodeLinkHandler}\n */\nexport interface LegacyLinkHandler {\n  readonly node: Node;\n\n  /**\n   * Recompute Input links\n   * @param {INode} node\n   */\n  recomputeInputLinks(node?: INode);\n\n  /**\n   * Recompute Output links\n   * @param {INode} node?\n   */\n  recomputeOutputLinks(node?: INode);\n\n}\n\n/**\n * @deprecated Use {@link createLinkHandler}\n */\nexport const createLegacyLinkHandler = (node: Node, dbHelper?: NodeDbHelper): LegacyLinkHandler => {\n  return new DefaultLinkHandler(node, dbHelper ?? createNodeDbHelper());\n};\n\nclass DefaultLinkHandler implements LegacyLinkHandler {\n  readonly node: Node;\n  private readonly dbHelper: NodeDbHelper;\n\n  constructor(node: Node, dbHelper: NodeDbHelper) {\n    this.node = node;\n    this.dbHelper = dbHelper;\n  }\n\n  recomputeInputLinks(n?: INode) {\n    let node = n ?? this.node;\n    let slot = -1;\n    for (const [inputId, input] of Object.entries(node.inputs)) {\n      if (input.setting.hidden) {\n        continue;\n      }\n      slot++;\n      if (isNull(input.link)) {\n        continue;\n      }\n      let link = input.link;\n      let targetNode = node.container.nodeRegistry().get(link.nodeId);\n      if (isNull(targetNode)) {\n        continue;\n      }\n      let outputId = link.ioId;\n      let outputSlot = link.slot;\n      let output = targetNode.outputs[outputId ?? outputSlot];\n      if (isNull(output) || isNull(output.links)) {\n        continue;\n      }\n      let number = output.links.findIndex(l => compareNodeIO(l, { nodeId: node.id, ioId: +inputId, slot }));\n      if (number === -1) {\n        continue;\n      }\n      output.links.splice(number, 1, new Link(node.id, slot, inputId));\n      this.dbHelper.update(<Node>targetNode, ['outputs']);\n    }\n    this.dbHelper.update(<Node>node, ['inputs']);\n  }\n\n  recomputeOutputLinks(n?: INode) {\n    let node = n ?? this.node;\n    let slot = -1;\n    Object.entries(node.outputs).forEach(([oId, output]) => {\n      slot++;\n      if (isEmpty(output.links)) {\n        return;\n      }\n      output.links.forEach(link => {\n        let target = node.container.nodeRegistry().get(link.nodeId);\n        const iId = link.ioId ?? link.slot;\n        if (isNull(target) || isNull(target.inputs[iId])) {\n          return;\n        }\n        target.inputs[iId].link = new Link(node.id, slot, oId);\n        this.dbHelper.update(<Node>target, ['inputs']);\n      });\n    });\n    this.dbHelper.update(<Node>node, ['outputs']);\n  }\n\n}\n\nexport const createLinkHandler = (registry: ContainerRegistryMetadata, validator?: IContainerRegistryValidator,\n                                  nodeValidator?: INodeRegistryValidator, lenient?: boolean): NodeLinkHandler => {\n  return new DefaultNodeLinkHandler(registry, validator, nodeValidator, lenient);\n};\n\nclass DefaultNodeLinkHandler implements NodeLinkHandler {\n\n  protected readonly validator: IContainerRegistryValidator;\n  protected readonly nodeValidator: INodeRegistryValidator;\n  protected readonly globalStrict: boolean;\n\n  constructor(registry: ContainerRegistryMetadata, validator?: IContainerRegistryValidator,\n              nodeValidator?: INodeRegistryValidator, lenient: boolean = false) {\n    this.validator = validator ?? new ContainerRegistryValidator(registry);\n    this.nodeValidator = nodeValidator ?? new NodeRegistryValidator();\n    this.globalStrict = !lenient;\n  }\n\n  private static msg(cId: number | string, bT: IOType, base: SlimNodeIO, rT?: IOType,\n                     ...references: SlimNodeIO[]): [string, string] {\n    return [nodeIOtoMsg(bT, cId, base), nodeIOtoMsg(rT, cId, ...references)];\n  }\n\n  private static statement(action: LinkAction, len: number | 'all', msg: [string, string],\n                           direction: 'from' | 'to' = 'from') {\n    const first = direction === 'from' ? `from ${msg[0]}` : `to ${msg[0]}`;\n    const next = isEmpty(msg[1]) ? '' : `${direction === 'from' ? 'to' : 'from'} ${msg[1]}`;\n    const last = action.includes('ing') ? '...' : '';\n    return `${action} ${len} link(s) ${first} ${next}${last}`;\n  }\n\n  create(nodeLink: NodeLink, lenient?: boolean): LinkResult {\n    const optimized = createBiNodeLink(nodeLink.cid).add(nodeLink).optimize()[0];\n    const msg = DefaultNodeLinkHandler.msg(nodeLink.cid, 'output', optimized.source, 'input', ...optimized.targets);\n    logger.info(DefaultNodeLinkHandler.statement('Connecting', optimized.targets.length, msg));\n    const r = this.doCreate(optimized, lenient);\n    r.message = DefaultNodeLinkHandler.statement('Connected', optimized.targets.length, msg);\n    return r;\n  }\n\n  batchCreate(...nodeLinks: NodeLink[]): LinkResult {\n    return Object.entries(groupBy(nodeLinks, nl => nl.cid, nl => [nl]))\n                 .map(([k, v]) => createBiNodeLink(k).add(...v))\n                 .flatMap(bi => bi.optimize())\n                 .reduce((r, nl) => r.merge(this.doCreate(nl, true)), new LinkResult());\n  }\n\n  remove(nodeLink: NodeLink, lenient?: boolean): LinkResult {\n    const container = this.validator.validate(nodeLink.cid);\n    const optimized = createBiNodeLink(nodeLink.cid).add(nodeLink).optimize()[0];\n    const msg = DefaultNodeLinkHandler.msg(optimized.cid, 'output', optimized.source, 'input', ...optimized.targets);\n    logger.info(DefaultNodeLinkHandler.statement('Disconnecting', optimized.targets.length, msg));\n    const r = this.doDisconnectOutput(container, optimized.source, !lenient,\n                                      io => optimized.targets.some(v => compareNodeIO(v, io)));\n    r.message = DefaultNodeLinkHandler.statement('Disconnected', optimized.targets.length, msg);\n    return r;\n  }\n\n  move(type: IOType, fromNode: NodeLink, toAnother: SlimNodeIO): LinkResult {\n    let newOne: NodeLink, base: SlimNodeIO;\n    const optimized = createBiNodeLink(fromNode.cid).add(fromNode).optimize()[0];\n    if (type === 'input') {\n      if (optimized.targets.length != 1) {\n        throw new Error(`Cannot move empty or more than one input's link to another node`);\n      }\n      newOne = createNodeLink(optimized.cid, optimized.source, toAnother);\n      base = optimized.targets[0];\n    } else {\n      newOne = createNodeLink(optimized.cid, toAnother, ...optimized.targets);\n      base = optimized.source;\n    }\n    const msg = DefaultNodeLinkHandler.msg(optimized.cid, type, base, type, toAnother);\n    logger.info(DefaultNodeLinkHandler.statement('Moving', optimized.targets.length, msg));\n    const r = this.remove(optimized, true).merge(this.doCreate(newOne, true, ...optimized.targets));\n    r.message = DefaultNodeLinkHandler.statement('Moved', optimized.targets.length, msg);\n    return r;\n  }\n\n  disconnectInput(cid: string | number, slimIO: SlimNodeIO): LinkResult {\n    const msg = DefaultNodeLinkHandler.msg(cid, 'input', slimIO);\n    logger.info(DefaultNodeLinkHandler.statement('Disconnecting', 'all', msg, 'to'));\n    return this.doDisconnectInput(this.validator.validate(cid), slimIO, false);\n  }\n\n  disconnectOutput(cid: string | number, slimIO: SlimNodeIO): LinkResult {\n    const msg = DefaultNodeLinkHandler.msg(cid, 'output', slimIO);\n    logger.info(DefaultNodeLinkHandler.statement('Disconnecting', 'all', msg));\n    return this.doDisconnectOutput(this.validator.validate(cid), slimIO, false);\n  }\n\n  protected doCreate(nodeLink: NodeLink, lenient?: boolean, ...skipSourceLinks: SlimNodeIO[]): LinkResult {\n    const container = this.validator.validate(nodeLink.cid);\n    const source = this.validateSource(container, nodeLink.source, this.globalStrict);\n    if (isNull(source.io)) {\n      return new LinkResult();\n    }\n    return nodeLink.targets\n                   .map(target => this.doConnect(container, source, target, !lenient, skipSourceLinks))\n                   .reduce((prev, current) => prev.merge(current), new LinkResult());\n  }\n\n  protected validateTarget(container: IContainer, current: SlimNodeIO,\n                           strict: boolean): { io: SlimNodeIO, link: SlimNodeIO } {\n    const n = this.nodeValidator.validate(current.nodeId, container, strict);\n    const inputId = current.ioId ?? current.slot;\n    const input = isNull(n) ? null : n.inputs[inputId];\n    const isUnlinkable = isNull(input) || input.setting.hidden;\n    if (strict && isUnlinkable) {\n      throw new NotFoundError(`Not found input id ${inputId} in ` +\n                              `node ${IdGenerator.createNodeId(container.id, current.nodeId)}`);\n    }\n    return { io: isUnlinkable ? null : current, link: isUnlinkable ? null : Link.create(input.link) };\n  }\n\n  protected validateSource(container: IContainer, current: SlimNodeIO,\n                           strict: boolean): { io: SlimNodeIO, links: SlimNodeIO[] } {\n    const n = this.nodeValidator.validate(current.nodeId, container, strict);\n    const outputId = current.ioId ?? current.slot;\n    const output = isNull(n) ? null : n.outputs[outputId];\n    if (strict && isNull(output)) {\n      throw new NotFoundError(`Not found output id ${outputId} in ` +\n                              `node ${IdGenerator.createNodeId(container.id, current.nodeId)}`);\n    }\n    return { io: isNull(output) ? null : current, links: (output?.links ?? []).map(link => Link.create(link)) };\n  }\n\n  private doConnect(container: IContainer, source: { io: SlimNodeIO; links: SlimNodeIO[] }, target: SlimNodeIO,\n                    strict: boolean, skipSourceLinks: SlimNodeIO[]): LinkResult {\n    const msg = DefaultNodeLinkHandler.msg(container.id, 'output', source.io, 'input', target);\n    logger.debug(DefaultNodeLinkHandler.statement('Connecting', 1, msg));\n    const r = this.doDisconnectInput(container, target, strict, skipSourceLinks);\n    if (r.hasInput(container.id, target.nodeId, target.ioId)) {\n      logger.debug(DefaultNodeLinkHandler.statement('Connected', 1, msg));\n      const skip = isEmpty(skipSourceLinks) ? [target] : [...skipSourceLinks, target];\n      const links = source.links.filter(io1 => !skip.some(io2 => compareNodeIO(io1, io2)));\n      return r.push(container.id, target.nodeId, 'input', target.ioId, source.io)\n              .push(container.id, source.io.nodeId, 'output', source.io.ioId, ...[...links, target]);\n    }\n    return r;\n  }\n\n  private doDisconnectInput(container: IContainer, target: SlimNodeIO, strict: boolean,\n                            skipSourceLinks?: SlimNodeIO[]): LinkResult {\n    const targetIO = this.validateTarget(container, target, strict);\n    if (isNull(targetIO.io)) {\n      return new LinkResult();\n    }\n    const r = new LinkResult().push(container.id, target.nodeId, 'input', target.ioId);\n    if (isNull(targetIO.link)) {\n      return r;\n    }\n    const updated = this.validateSource(container, targetIO.link, false).links\n                        .filter(link => !compareNodeIO(link, target));\n    const links = isEmpty(skipSourceLinks) ? updated :\n                  updated.filter(io1 => !skipSourceLinks.some(io2 => compareNodeIO(io1, io2)));\n    logger.debug(DefaultNodeLinkHandler.statement('Disconnected', links.length,\n                                                  DefaultNodeLinkHandler.msg(container.id, 'input', target), 'to'));\n    return r.push(container.id, targetIO.link.nodeId, 'output', targetIO.link.ioId, ...links);\n  }\n\n  private doDisconnectOutput(container: IContainer, source: SlimNodeIO, strict: boolean,\n                             filter: (io: SlimNodeIO) => boolean = _ => true): LinkResult {\n    const sourceIO = this.validateSource(container, source, strict);\n    const result = new LinkResult().push(container.id, source.nodeId, 'output', source.ioId);\n    sourceIO.links\n            .filter(io => compareNodeIO(this.validateTarget(container, io, false).link, source))\n            .forEach(io => {\n              if (filter(io)) {\n                result.push(container.id, io.nodeId, 'input', io.ioId);\n              } else {\n                result.push(container.id, source.nodeId, 'output', source.ioId, io);\n              }\n            });\n    logger.debug(DefaultNodeLinkHandler.statement('Disconnected', sourceIO.links.length,\n                                                  DefaultNodeLinkHandler.msg(container.id, 'output', source)));\n    return result;\n  }\n}\n","module.exports = require(\"express\");","export class NotFoundError extends Error {\n}\n\nexport class RegistryError<T> extends Error {\n  item: T;\n\n  constructor(message: string, item?: T) {\n    super(message);\n    this.item = item;\n  }\n\n  // toString() {\n  //   return `${this.message}`;\n  // }\n}\n\nexport class RegistryItemExistedError<T> extends RegistryError<T> {\n\n}\n","/**\n * <b>Serializable</b> is a marker interface for translating a data structure or object state into a format that can be\n * stored * or transmitted and reconstructed later.\n */\nimport { ErrorCallbackHandler } from '../utils/decorators';\nimport { isFunction, isNull, mapToObjectSameKey } from '../utils/helper';\n\nexport interface Serializable<T> {\n\n  serialize(): T;\n\n}\n\nexport interface IDeserializable<T, R> {\n\n  deserialize(serializedObj: T): R;\n\n}\n\nexport interface Deserializable<T> extends IDeserializable<T, Deserializable<T>> {\n  /**\n   * Deserialize from serialized object\n   * @param {T} serializedObj serialized object\n   * @return {Deserializable<T>} new instance object\n   */\n  deserialize(serializedObj: T): Deserializable<T>;\n}\n\nexport class SerializableHelper {\n  static serialize<T>(obj: Serializable<T> | any): T {\n    if (isNull(obj)) {\n      return null;\n    }\n    return isFunction(obj['serialize']) ? obj.serialize() : new SerializedObject(obj).serialize();\n  }\n}\n\nclass SerializedObject implements Serializable<object> {\n  obj: any;\n\n  constructor(obj: any) {\n    this.obj = obj;\n  }\n\n  @ErrorCallbackHandler(_ => null)\n  serialize(): object {\n    if (this.obj instanceof Array) {\n      return this.obj.map(o => SerializableHelper.serialize(o));\n    }\n    if (this.obj instanceof Object) {\n      return mapToObjectSameKey(this.obj, (_, v) => SerializableHelper.serialize(v));\n    }\n    return JSON.parse(JSON.stringify(this.obj));\n  }\n}\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 02.03.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport Debounce from 'lodash-decorators/debounce';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType } from '../../node-io';\n\nexport class UiNode extends Node {\n  titlePrefix: string; // title on ui panel\n  defaultTitle: string;\n  template: string;\n  uiElementType: string;\n  uiPanelValue;\n\n  // onGetMessageToDashboardSide\n  // onDashboardElementGetNodeState - this will override default logic in dashboard-server-socket\n  // onDashboardElementSetNodeState - this will override default logic in dashboard-server-socket\n\n  constructor(defaultTitle: string, uiElementType: string, properties: any) {\n    super();\n    this.name = properties && properties.name;\n    this.titlePrefix = defaultTitle;\n    this.defaultTitle = defaultTitle;\n    this.uiElementType = uiElementType;\n    this.isDashboardNode = true;\n    this.settings['title'] = NodeSetting.create({\n      description: 'Title',\n      value: this.titlePrefix,\n      type: SettingType.STRING,\n    });\n    this.settings['ui-panel'] = NodeSetting.create({ description: 'Ui Panel Name', type: SettingType.STRING });\n  }\n\n  init() {\n    if (this.settings['ui-panel']) {\n      this.uiPanelValue = this.settings['ui-panel'] && this.settings['ui-panel'].value;\n    }\n  }\n\n  onCreated() {\n    this.settings['ui-panel'].value = this.uiPanelValue || this.container.name;\n    if (this.side == Side.server) {\n      this.container.dashboard.onNodeChangePanelOrTitle(\n        this,\n        this.settings['ui-panel'].value,\n        this.settings['title'].value,\n      );\n    }\n  }\n\n  onAdded() {\n    this.changeTitle(this.settings['title'].value);\n  }\n\n  onBeforeSettingsChange(newSettings, newName) {\n    if (this.side == Side.server) {\n      this.name = newName;\n      this.container.dashboard.onNodeChangePanelOrTitle(\n        this,\n        newSettings['ui-panel'].value,\n        newSettings['title'].value,\n      );\n    }\n    this.changeTitle(newSettings['title'].value);\n  }\n\n  changeTitle(title: string) {\n    if (this.defaultTitle === title) this.title = title;\n    else this.title = this.defaultTitle + ': ' + title;\n  }\n\n  onRemoved() {\n    if (this.side == Side.server) this.container.dashboard.onNodeRemoved(this);\n  }\n\n  setState(state: any, sendToDashboard = true) {\n    this.properties['state'] = state;\n\n    // if called from constructor\n    if (this.container == null) return;\n\n    if (sendToDashboard) {\n      let m = { id: this.id, cid: this.container.id, state: state };\n      if (this.side == Side.server) {\n        // send state to all clients in the room\n        let socket = this.container.server_dashboard_socket;\n        let panelName = this.settings['ui-panel'].value;\n        socket.in('' + panelName).emit('dashboardElementGetNodeState', m);\n      }\n    }\n\n    this.storeInDatabase();\n  }\n\n  @Debounce(1000)\n  storeInDatabase() {\n    if (this.container && this.container.db) {\n      this.container.db.updateNode(this.id, this.container.id, {\n        $set: { properties: this.properties },\n      });\n    }\n  }\n\n  sendMessageToDashboardSide(mess: any) {\n    let m = { id: this.id, cid: this.container.id, message: mess };\n    if (this.side == Side.server) {\n      let socket = this.container.server_dashboard_socket;\n      let panelName = this.settings['ui-panel'].value;\n      socket.in('' + panelName).emit('nodeMessageToDashboardSide', m);\n    } else {\n      this.container.client_socket.emit('nodeMessageToDashboardSide', m);\n    }\n  }\n\n  getState() {\n    return this.properties['state'];\n  }\n}\n","import { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\n\nexport default abstract class Statistics extends FlexibleNode {\n  protected constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {}\n\n  /**\n   * Get array of all input values or setting values where values are defined\n   */\n  getDefinedInputsOrSettingsValues() {\n    const output = [];\n    for (let i = 0; i < this.getInputsCount(); i++) {\n      const input = this.getInputData(i);\n      if (input != null) {\n        output.push(input);\n      }\n    }\n    return output;\n  }\n}\n","import { ErrorHandler } from '../utils/decorators';\nimport { IOT_TYPES } from './constants';\nimport { Container, reassignContainer } from './container';\nimport { Node } from './node';\nimport { NODE_INFO } from './node-info';\nimport {\n  ContainerRegistryMetadata,\n  GlobalNodeRegistryMetadata,\n  IFolderNode,\n  SerializedFolderNode,\n} from './node-interface';\nimport { NodeSetting, SettingType } from './node-io';\nimport { Deserializable } from './serializable';\n\n/**\n * Container: special node that contains a container of other nodes\n */\nexport class ContainerNode extends Node implements IFolderNode, Deserializable<SerializedFolderNode> {\n\n  private static NAME: string = 'Folder';\n  sub_container: Container;\n  /**\n   * List of node type identifiers that can be created in specifically in this container node, but are not normally\n   * listed in the menu\n   */\n  extra_node_types: string[];\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.container.folder.title;\n    this.description = NODE_INFO.container.folder.description;\n    this.settings['name'] = NodeSetting.create({ description: 'Folder name', type: SettingType.STRING });\n    this.sub_container = <Container>{};\n  }\n\n  static create(folderNode: SerializedFolderNode, isNew: boolean, containerRegistry?: ContainerRegistryMetadata,\n                globalRegistry?: GlobalNodeRegistryMetadata) {\n    return new ContainerNode().deserialize(folderNode, isNew, containerRegistry, globalRegistry);\n  }\n\n  shouldRejectNodeType(type: string): boolean {\n    return IOT_TYPES.includes(type); // IoT nodes can only be created in special container nodes\n  }\n\n  onCreated() {\n  }\n\n  onAdded() {\n    this.applyTitle();\n    super.onAdded();\n  }\n\n  afterAdded() {\n    super.afterAdded();\n  }\n\n  onAfterSettingsChange(oldSettings, oldName?: any) {\n    this.applyTitle();\n  }\n\n  onRemoved() {\n  }\n\n  serialize(): SerializedFolderNode {\n    return { ...super.serialize(), sub_container: this.sub_container?.serialize() };\n  }\n\n  @ErrorHandler\n  deserialize(serializedObj: SerializedFolderNode, isNew?: boolean, containerRegistry?: ContainerRegistryMetadata,\n              globalRegistry?: GlobalNodeRegistryMetadata): ContainerNode {\n    return reassignContainer(<ContainerNode>super.deserialize(serializedObj, isNew), serializedObj.sub_container,\n                             containerRegistry, globalRegistry);\n  }\n\n  getExtraMenuOptions(renderer, editor) {\n    let that = this;\n    return [\n      {\n        content: 'Open',\n        callback: function () {\n          editor.openContainer(that.sub_container.id);\n        },\n      },\n      null, //null for horizontal line\n    ];\n  }\n\n  onExecute() {\n    if (this.isUpdated) this.isRecentlyActive = true;\n    this.sub_container.runStep();\n  }\n\n  protected applyTitle() {\n    this.settings['name'].value = this.settings.name?.value ?? `${ContainerNode.NAME} ${this.sub_container.id}`;\n    this.title = this.title === ContainerNode.NAME ? this.settings['name'].value : this.title;\n    this.sub_container.name = this.title;\n  }\n\n}\n","module.exports = require(\"child_process\");","//FOR node before v12.9.0\nif (typeof Promise.allSettled !== 'function') {\n  //@ts-ignore\n  Promise.allSettled = function (promises) {\n    return Promise.all(promises.map(p => Promise.resolve(p)\n                                                .then(val => ({ status: 'fulfilled', value: val }),\n                                                      err => ({ status: 'rejected', reason: err }))));\n  };\n}\n\nif (Array.prototype.flatMap === undefined) {\n  const concat = (x, y) => x.concat(y);\n  const flatMap = (f, xs) => xs.map(f).reduce(concat, []);\n  Array.prototype.flatMap = function (f) {\n    return flatMap(f, this);\n  };\n}\n\n// source map for node typescript debug\nrequire('source-map-support').install();\nimport { Colors, create, Logger } from 'logplease';\n// @formatter:off\n//MUST UP\nconst logger = create('app', { color: Colors.Green });\nconst path = require('path');\nconst process = require('process');\nconst argv = require('minimist')(process.argv.slice(2));\nconst dataDir = process.env['DATA_DIR'] || argv['datadir'] || './db';\nconst envFile = argv['envFile'] || '.env';\nconst envFileAbsPath = path.isAbsolute(envFile) ? envFile : path.resolve(process.cwd(), envFile);\nprocess.env['DATA_DIR'] = path.isAbsolute(dataDir) ? dataDir : path.resolve(process.cwd(), dataDir);\nrequire('dotenv').config({ path: envFileAbsPath });\n(<any>global).__rootdirname = path.resolve(__dirname);\n\n//---------------------------------------------\n\n//MUST DOWN\nimport { Backend } from './backend/backend';\nimport conf from './config';\nimport * as config from './config.json';\nimport { AsyncDbHelper, Database } from './database/database';\nimport { Container, ContainerRegistry } from './nodes/container';\nimport { Node } from './nodes/node';\nimport { NodeHookHelper } from './nodes/node-hook';\nimport { SerializedNode, Side } from './nodes/node-interface';\nimport { NodeRegistryHelper } from './nodes/node-registry';\nimport { NodeTypeRegistry } from './nodes/node-type-registry';\nimport { RegistryResult } from './nodes/registry';\nimport { Dashboard } from './server/dashboard';\nimport { Server } from './server/server';\nimport { NodeTree } from './server/service/NodeETLService';\nimport { isEmpty } from './utils/helper';\nimport { NoChangeId } from './utils/id-generator';\n// @formatter:on\n\n\nexport class App {\n  db: Database;\n  readonly dashboard: Dashboard;\n  readonly server: Server;\n  private readonly logger: Logger;\n\n  constructor() {\n    this.logger = create('app', { color: Colors.Green });\n    this.logger.info('----------------------------- Rubix Wires -----------------------------');\n    this.logger.info(`Process Dir       : '${process.cwd()}'`);\n    this.logger.info(`Working Dir       : '${(<any>global).__rootdirname}'`);\n    this.logger.info(`Data Dir          : '${process.env.DATA_DIR}'`);\n    this.logger.info(`Environment       : '${process.env.NODE_ENV || 'development'}'`);\n    this.logger.info(`Environment file  : '${envFileAbsPath}'`);\n    this.logger.info('-----------------------------------------------------------------------');\n    this.registerNodeTypes();\n    this.server = new Server((<any>global).__rootdirname, conf.port, conf.loopInterval);\n    this.dashboard = new Dashboard(this.server.dashboardSocket);\n    Promise.resolve(ContainerRegistry.instance().register(Container.initRoot(Side.server), true))\n           .then(rootContainer => this.start(rootContainer))\n           .then(_ => this.logger.info(`Rubix Wires is ready`));\n  }\n\n  private start(rootContainer: Container) {\n    return this.connectDatabase()\n               .then(db => (this.db = db))\n               .then(db => db.asyncLoadDatabase(conf.dataDir, conf.database.compactionInterval * 1000).then(_ => db))\n               .then(db => this.onDatabaseReady(rootContainer, db))\n               .catch(err => this.onDatabaseError(rootContainer, err));\n  }\n\n  private registerNodeTypes() {\n    require('./nodes/nodes/index');\n    this.logger.info(`Registered ${NodeTypeRegistry.instance().size()} nodes types`);\n  }\n\n  private connectDatabase(): Promise<Database> {\n    this.logger.info(`Loading database...`);\n    if (!config.dataBase.enable) {\n      return Promise.reject(new Error('Not enabled database'));\n    }\n    if (!config.dataBase.useInternalDb) {\n      return Promise.reject(new Error('Unsupported external database'));\n    }\n    return Promise.resolve(require('./database/neDbDatabase').db);\n\n  }\n\n  private startBackend() {\n    new Backend(this.db, conf.backendSync).start();\n  }\n\n  private onDatabaseReady(rootContainer: Container, db: Database): Promise<any> {\n    return Promise.resolve(this.configApp(rootContainer, this.server, this.dashboard, db))\n                  .then(_ => AsyncDbHelper.noArgs<SerializedNode[]>(db, db.getNodes))\n                  .then(nodes => new NodeTree(rootContainer.id, new NoChangeId()).compute(nodes).flatten())\n                  .then(nodes => this.registerNodes(rootContainer, nodes))\n                  .then(_ => this.dashboard.loadFromDatabase(db))\n                  .then(_ => this.startBackend())\n                  .then(_ => rootContainer.run(conf.loopInterval));\n  }\n\n  private registerNodes(rootContainer: Container, nodes: SerializedNode[]): Promise<RegistryResult<Node>> {\n    return NodeRegistryHelper.register(rootContainer, nodes, ContainerRegistry.instance(), true)\n                             .then(r => {\n                               logger.info(`Imported ${ContainerRegistry.instance().size() - 1} containers, ` +\n                                           `${r.objects.length}/${nodes.length} nodes successfully from database`);\n                               if (!isEmpty(r.errors)) {\n                                 logger.warn(`Import failed: [${r.errors.join('\\n')}]`);\n                               }\n                               return r;\n                             })\n                             .then(r => {\n                               r.objects.forEach(node => NodeHookHelper.execute(node, 'onDbReaded') ?? node);\n                               return r;\n                             });\n  }\n\n  private onDatabaseError(rootContainer: Container, err: Error) {\n    if (err.message === 'Not enabled database') {\n      //TODO is it need? Should remove it\n      this.logger.warn(`Database is not enabled, rubix-wires is running on memory...`);\n      rootContainer.run(conf.loopInterval);\n      return;\n    }\n    this.logger.error(`Unable to bootstrap application. Failed at: ${err.stack ?? err}`);\n    process.exit(99);\n  }\n\n  private configApp(rootContainer: Container, server: Server, dashboard: Dashboard, db: Database): Container {\n    this.logger.info(`Setup root container...`);\n    rootContainer.dashboard = dashboard;\n    rootContainer.server_editor_socket = server.editorSocket.io;\n    rootContainer.server_dashboard_socket = server.dashboardSocket.io;\n    rootContainer.db = db;\n    return rootContainer;\n  }\n}\n\nconst app = new App();\nexport default app;\n","import { isFunction } from './helper';\nimport { reliability_logger } from './loggers';\n\nconst logger = reliability_logger;\n\n//TODO: should be notify in frontend instead of using `alert`\nfunction logError(error, ...args: any[]) {\n  logger.error(error);\n  if (typeof alert !== 'undefined') {\n    alert(error.toString());\n  }\n}\n\nexport const ErrorHandler = (target: any, propertyKey: string, descriptor: any) => {\n  const fn = descriptor.value!;\n  descriptor.value = function DescriptorValue(...args: any[]) {\n    try {\n      return fn.apply(this, args);\n    } catch (error) {\n      logError(error, args);\n    }\n  };\n  return descriptor;\n};\n\nexport const ErrorCallbackHandler = (errHandler: Function) => {\n  return (target: any, propertyKey: string, descriptor: any) => {\n    const fn = descriptor.value!;\n    descriptor.value = function DescriptorValue(...args: any[]) {\n      try {\n        return fn.apply(this, args);\n      } catch (error) {\n        logError(error, args);\n        if (isFunction(errHandler)) {\n          return errHandler(error, args);\n        }\n      }\n    };\n    return descriptor;\n  };\n};\n\nexport const AsyncErrorHandler = {};\n","export const ERROR = 'error';\nexport const NOTIFICATION = 'notification';\nexport const PACK_UP_NODES = 'pack-up-nodes';\nexport const IMPORT_NODES = 'import-nodes';\nexport const EXPORT_NODES = 'export-nodes';\nexport const CLONE_NODES = 'clone-nodes';\nexport const REMOVE_NODES = 'remove-nodes';\nexport const CREATE_NODE = 'create-node';\nexport const CREATE_LINK = 'create-link';\nexport const REMOVE_LINK = 'remove-link';\nexport const MOVE_LINK = 'move-link';\nexport const UPDATE_NODE_SETTING = 'update-node-settings';\nexport const ADD_NODE_INPUT = 'add-node-input';\nexport const ADD_NODE_OUTPUT = 'add-node-output';\nexport const REMOVE_NODE_INPUT = 'remove-node-input';\nexport const REMOVE_NODE_OUTPUT = 'remove-node-output';\nexport const NODE_IO_VALUES = 'nodes-io-values';\n","import { reassignContainer } from './container';\nimport { Node } from './node';\nimport {\n  ContainerRegistryMetadata,\n  GlobalNodeRegistryMetadata,\n  IContainer,\n  IFolderNode,\n  INode,\n  isFolderNode,\n  isNode,\n  SerializedFolderNode,\n  SerializedNode,\n} from './node-interface';\nimport { NodeTypeRegistry } from './node-type-registry';\n\nexport class NodeFactory {\n\n  static create(serializedNode: SerializedNode, isNew: boolean = true, containerRegistry?: ContainerRegistryMetadata,\n                globalRegistry?: GlobalNodeRegistryMetadata): Node {\n    if (isFolderNode(serializedNode)) {\n      const { ContainerNode } = require('./container-node');\n      return ContainerNode.create(<SerializedFolderNode>serializedNode, isNew, containerRegistry, globalRegistry);\n    }\n    const node = new Node().deserialize(serializedNode, isNew);\n    if (isFolderNode(node)) {\n      return <Node><unknown>reassignContainer(<IFolderNode><unknown>node, (<IFolderNode>serializedNode).sub_container,\n                                              containerRegistry, globalRegistry);\n    }\n    return node;\n  }\n\n  static createTempNode(type: string, position: [number, number]): Node {\n    const node_class = NodeTypeRegistry.instance().get(type);\n    if (node_class) {\n      const node: Node = new node_class();\n      node.type = type;\n      node.pos = position;\n      node.size = node.computeSize(true);\n      return node;\n    } else {\n      throw `Can't create node of type [${type}]. Make sure it is registered through registerNodeType`;\n    }\n  }\n\n  static toSimpleNode<T extends SerializedNode>(cid: number | string, id: number | string): T {\n    return <T>{ id: id, cid: cid, type: '' };\n  }\n\n  static standardize(parent: IContainer, nodes: (number | string | SerializedNode | INode)[]): INode[] {\n    return nodes.map(n => {\n      const nn: INode = isNode(n) ? <INode>n : NodeFactory.toSimpleNode(parent.id, <string>n);\n      nn.container = nn.container ?? parent;\n      return nn;\n    });\n  }\n\n}\n","import config from '../../config';\n\nconst logger = require('logplease').create('cryto-utils', { color: 3 });\n\nconst CryptoJS = require('crypto-js');\n\nexport default class CryptoUtils {\n  static encrypt = text => {\n    if (text) {\n      return CryptoJS.AES.encrypt(text, config.secretKey).toString();\n    } else {\n      logger.error('Your text to encrypt is empty');\n    }\n  };\n\n  static decrypt = cipherText => {\n    if (cipherText) {\n      return CryptoJS.AES.decrypt(cipherText, config.secretKey).toString(CryptoJS.enc.Utf8);\n    } else {\n      logger.error('Your text to decrypt is empty');\n    }\n  };\n}\n","import { exec } from 'child_process';\nconst os = require('os');\nconst si = require('systeminformation');\nconst pkg = require('../../../package.json');\n\nexport default class OsUtils {\n  /**\n   * Runs a system command\n   * @param command {string} system command. Example 'sudo reboot'\n   * @param options {string} system command options\n   * @returns {Promise}\n   *\n   */\n\n  static execute(command, options) {\n    return new Promise((resolve, reject) => {\n      exec(command, options, (err, stdout, stderr) => {\n        if (err) {\n          reject(err);\n          return;\n        } else {\n          resolve({\n            stdout: stdout,\n            stderr: stderr,\n          });\n        }\n      });\n    });\n  }\n\n  /**\n   * Returns hostname\n   */\n  static hostName() {\n    return new Promise<any>((resolve, reject) => {\n      try {\n        resolve(os.hostname());\n      } catch (e) {\n        reject('Unknown');\n      }\n    });\n  }\n\n  /**\n   * Returns Current Wires Version\n   */\n  static getCurrentWiresVersion() {\n    return new Promise<any>((resolve, reject) => {\n      try {\n        resolve(pkg.version);\n      } catch (e) {\n        reject('Unknown');\n      }\n    });\n  }\n\n  /**\n   * Returns host cpu temp\n   * main: main temperature (avg)\n   * cores: array of temperatures\n   * max: max temperature\n   */\n  static cpuTemperature() {\n    return new Promise<any>((resolve, reject) => {\n      try {\n        resolve(si.cpuTemperature());\n      } catch (e) {\n        reject('Unknown');\n      }\n    });\n  }\n\n  /**\n    Returns File System and File System Stats\n    fs: name of file system\n    type: type of file system\n    size: sizes in bytes\n    used: used in bytes\n    use: used in %\n    mount: mount point\n   */\n  static fsSize() {\n    return new Promise<any>((resolve, reject) => {\n      try {\n        resolve(si.fsSize());\n      } catch (e) {\n        reject('Unknown');\n      }\n    });\n  }\n\n  /**\n    Returns host system info\n   */\n  static systemInfo() {\n    return new Promise<any>((resolve, reject) => {\n      try {\n        // define all values, you want to get back\n        const valueObject = {\n          cpu: '*',\n          osInfo: 'platform, release',\n          system: 'model, manufacturer',\n        };\n        resolve(si.get(valueObject));\n      } catch (e) {\n        reject('Unknown');\n      }\n    });\n  }\n\n\n  /**\n  Check if host is a BBBB\n */\n  static systemModelBBB() {\n    return new Promise<any>((resolve, reject) => {\n      let host = \"GENERIC AM33XX (FLATTENED DEVICE TREE)\"\n      OsUtils.systemInfo()\n        .then(e => {\n          if (e.system.model === host) {\n            resolve(true)\n          } else resolve(false)\n        }).catch(err => {\n          reject(false)\n        })\n    });\n  }\n\n  /**\n  Check if host is a Rubix Compute\n  */\n  static systemModelRubixCompute() {\n    return new Promise<any>((resolve, reject) => {\n      let host = \"BCM2835\"\n      OsUtils.systemInfo()\n        .then(e => {\n          if (e.system.model === host) {\n            resolve(true)\n          } else resolve(false)\n        }).catch(err => {\n          reject(false)\n        })\n    });\n  }\n\n  /**\n    Returns host time\n    current: local (server) time\n    uptime: uptime in number of seconds\n    timezone: e.g. GMT+0200\n    timezoneName: e.g. CEST\n   */\n  static systemTime() {\n    return new Promise<any>((resolve, reject) => {\n      try {\n        resolve(si.time());\n      } catch (e) {\n        reject('Unknown');\n      }\n    });\n  }\n\n  /**\n    Returns host memory\n    total: total memory in bytes\n    free: not used in bytes\n    used: used (incl. buffers/cache)\n    active: used actively (excl. buffers/cache)\n    available: potentially available (total - active)\n    buffers: used by buffers\n    cached: used by cache\n    slab: used by slab\n    buffcache: used by buffers+cache\n    swaptotal: swap total\n    swapused: swap used\n    swapfree: swap free\n   */\n  static systemMem() {\n    return new Promise<any>((resolve, reject) => {\n      try {\n        resolve(si.mem());\n      } catch (e) {\n        reject('Unknown');\n      }\n    });\n  }\n\n\n  static systemAll() {\n    return new Promise<any>(async (resolve, reject) => {\n      let all = []\n      await OsUtils.systemInfo().then(e => {\n        console.log(' systemInfo', e)\n        all.push({ systemInfo: e })\n      }).catch(err => {\n        console.log('ERROR systemInfo', err)\n      })\n      await OsUtils.systemTime().then(e => {\n        console.log(' systemTime', e)\n        all.push({ systemTime: e })\n      }).catch(err => {\n        console.log('ERROR systemTime', err)\n      })\n      await OsUtils.fsSize().then(e => {\n        console.log(' fsSize', e)\n        all.push({ fsSize: e })\n      }).catch(err => {\n        console.log('ERROR fsSize', err)\n      })\n      await OsUtils.cpuTemperature().then(e => {\n        console.log(' cpuTemperature', e)\n        all.push({ cpuTemperature: e })\n      }).catch(err => {\n        console.log('ERROR cpuTemperature', err)\n      })\n      await OsUtils.hostName().then(e => {\n        console.log(' hostName', e)\n        all.push({ hostName: e })\n      }).catch(err => {\n        console.log('ERROR hostName', err)\n      })\n      await OsUtils.getCurrentWiresVersion().then(e => {\n        console.log(' getCurrentWiresVersion', e)\n        all.push({ getCurrentWiresVersion: e })\n      }).catch(err => {\n        console.log('ERROR getCurrentWiresVersion', err)\n      })\n      resolve(all)\n\n    });\n  }\n\n\n}\n","import * as NeDBDataStore from 'nedb';\nimport { db_logger as logger } from '../../utils/loggers';\n\nexport default interface BaseDatabase {\n  asyncLoadDatabase(dataPath: string, cleanUpInterval?: any): Promise<any>;\n}\n\nexport abstract class AbstractDatabase implements BaseDatabase {\n\n  protected db: NeDBDataStore;\n\n  asyncLoadDatabase(dataPath: string, cleanUpInterval?: any): Promise<any> {\n    const dbPath = `${dataPath}/${this.dbName()}.db`;\n    logger.info(`Loading database '${this.dbName()}' from '${dbPath}'...`);\n    this.db = new NeDBDataStore({ filename: `${dbPath}` });\n    this.db.persistence.setAutocompactionInterval(cleanUpInterval);\n    return this.load();\n  };\n\n  protected abstract dbName(): string;\n\n  protected load(): Promise<any> {\n    return new Promise<any>((resolve, reject) => {\n      this.db.loadDatabase(err => {\n        if (err) {\n          logger.error(`Failed when loading database ${this.dbName()}: ${err.stack}`);\n          reject(err);\n        }\n        return resolve();\n      });\n    });\n  };\n}\n","module.exports = require(\"moment\");","import {\n  ContainerRegistryMetadata,\n  IContainer,\n  INode,\n  isSerializedContainer,\n  SerializedContainer,\n} from '../nodes/node-interface';\nimport { NotFoundError } from '../utils/errors';\nimport { isNull } from '../utils/helper';\n\nconst Joi = require('@hapi/joi');\n\nexport class NodeValidator {\n  static NodeArrayValidator() {\n    return Joi.array().items(Joi.object().keys({ type: Joi.string().required() }));\n  }\n}\n\nexport interface IContainerRegistryValidator {\n\n  validate(cid: number | string | SerializedContainer | IContainer, strict?: boolean): IContainer;\n\n}\n\nexport interface INodeRegistryValidator {\n\n  validate(node: number | string | INode, container: IContainer, strict?: boolean): INode;\n\n}\n\nexport class NodeRegistryValidator implements INodeRegistryValidator {\n\n  validate(node: number | string | INode, container: IContainer, strict: boolean = true): INode {\n    const n = container.nodeRegistry().get(node);\n    if (isNull(n) && strict) {\n      throw new NotFoundError(`Not found node id ${node} in container ${container.id}`);\n    }\n    return n;\n  }\n\n}\n\nexport class ContainerRegistryValidator implements IContainerRegistryValidator {\n\n  private readonly registry: ContainerRegistryMetadata;\n\n  constructor(registry: ContainerRegistryMetadata) {\n    this.registry = registry;\n  }\n\n  static mustExisted = (cid: number | string | SerializedContainer | IContainer,\n                        registry: ContainerRegistryMetadata): Promise<IContainer> => {\n    return Promise.resolve(() => new ContainerRegistryValidator(registry).validate(cid)).then(f => f());\n  };\n\n  validate(cid: number | string | SerializedContainer | IContainer, strict: boolean = true): IContainer {\n    const container = this.registry.get(isSerializedContainer(cid) ? (<SerializedContainer>cid).id : cid + '');\n    if (isNull(container) && strict) {\n      throw new NotFoundError(`Not found container id ${cid}`);\n    }\n    return container;\n  }\n\n}\n\nexport class ListValidator {\n\n  static notEmpty = <T>(items: T[], msg: string): Promise<T[]> => {\n    if (items.length > 0) {\n      return Promise.resolve(items);\n    }\n    return Promise.reject(msg);\n  };\n\n}\n","/**\n * Used to chain asynchronous executions and to coordinate them from various class instances while limiting parallelism.\n *\n * Example use case: Executing HTTP requests while limiting number of simultaneous request.\n */\nexport class PromiseActor {\n  private stack: Promise<any> = Promise.resolve(null);\n\n  /**\n   * Append an asynchronous computation to the stack. The computation function will be called when all previously chained\n   * computations have completed, and must this return a promise to indicate its completion. The next computation will\n   * only be executed once the promise completes.\n   *\n   * Returns a promise that will complete when the provided computation has been called and completed.\n   */\n  process<T>(f: () => Promise<T>): Promise<T> {\n    const callback = () => f(); // hide previous computation from f(x)\n    this.stack = this.stack.then(callback, error => {\n      console.log(error);\n      return callback(); // process next\n    });\n    return Promise.resolve(this.stack); // defensive copy of promise\n  }\n}\n\nexport const singleton = new PromiseActor();","import config from '../../../../config';\n\nconst edgeApi = config.edge28;\nexport const SEND_PAYLOAD_TO_CHILD = 'SEND_PAYLOAD_TO_CHILD';\nexport const ADD_POINT = 'ADD_POINT';\nexport const REMOVE_POINT = 'REMOVE_POINT';\n\nexport const edgeIp: string = edgeApi.baseURL;\nexport const edgePort: number = edgeApi.port;\nexport const edgeApiVer: string = edgeApi.apiVer;\n","import { ErrorHandler } from '../utils/decorators';\nimport { isFunction } from '../utils/helper';\nimport { Node } from './node';\n\n//TODO must remove by event lifecycle\nexport class NodeHookHelper {\n\n  @ErrorHandler\n  static execute(node: Node, funcName: string, ...args): Node {\n    if (isFunction(node[funcName])) {\n      node[funcName](args);\n    }\n    return node;\n  }\n}\n","import { RegistryError, RegistryItemExistedError } from '../utils/errors';\nimport { isNotNull, isNull } from '../utils/helper';\nimport { registry_logger } from '../utils/loggers';\n\nconst logger = registry_logger;\n\nexport interface Registry<T> {\n\n  register(obj: T, force?: boolean, key?: string): Promise<T> | T;\n\n  list(): T[];\n\n  size(): number;\n\n  get(key: any): T;\n\n  has(key: any): boolean;\n\n  remove(key: any): T | Promise<T>;\n\n  clear(): void;\n}\n\nexport abstract class AbstractRegistry<T> implements Registry<T> {\n\n  protected _registry: { [key: string]: T };\n\n  protected constructor() {\n    this._registry = {};\n  }\n\n  get(key: any): T {\n    return this._registry[key];\n  }\n\n  has(key: any): boolean {\n    return isNotNull(this.get(key));\n  }\n\n  list(): T[] {\n    return Object.values(this._registry);\n  }\n\n  register(obj: T, force?: boolean, key?: string): Promise<T> | T {\n    const o = this.optimizeBeforeRegister(this.validate(obj, force, key), force);\n    return this.doRegister(key ?? this.createKey(o), o, force);\n  }\n\n  remove(key: any): T | Promise<T> {\n    if (this.enableDebug()) {\n      logger.debug(`Removing ${this.itemName()} by key='${key}'...`);\n    }\n    let obj = this.get(key);\n    delete this._registry[key];\n    return obj;\n  }\n\n  size(): number {\n    return Object.keys(this._registry).length;\n  }\n\n  clear(): void {\n    this._registry = {};\n  }\n\n  protected abstract createKey(obj: T): string | number;\n\n  protected itemName(): string {\n    return 'Item';\n  }\n\n  protected enableDebug(): boolean {\n    return true;\n  }\n\n  protected itemNullable(): boolean {\n    return false;\n  }\n\n  protected optimizeBeforeRegister(obj: T, force: boolean): T {\n    return obj;\n  }\n\n  protected validate(obj: T, force: boolean, key: string): T {\n    if (isNull(obj) && !this.itemNullable()) {\n      throw new RegistryError(`Given ${this.itemName()} is null or undefined`);\n    }\n    return obj;\n  }\n\n  protected doRegister(k: string | number, o: T, force: boolean): Promise<T> | T {\n    if (!force && this.has(k)) {\n      throw new RegistryItemExistedError<T>(`${this.itemName()} with key ${k} is already existed`);\n    }\n    if (this.enableDebug()) {\n      logger.debug(`Registering ${this.itemName()} by key='${k}' and force=${force}...`);\n    }\n    this._registry[k] = o;\n    return o;\n  }\n}\n\nexport class RegistryResult<T> {\n  objects: T[];\n  errors: RegistryError<T>[];\n\n  constructor(objects?: T[], errors?: RegistryError<T>[]) {\n    this.objects = objects ?? [];\n    this.errors = errors ?? [];\n  }\n\n}\n","// colours\n// https://material.io/design/material-studies/rally.html#\n// https://storage.googleapis.com/spec-host/mio-staging%2Fmio-design%2F1576174064000%2Fassets%2F17gZmwIGdzlDr-Hl2jTu2SSgc_ATBGaPt%2Fcasestudies-rally-color-palettes.png\n\nlet purpleNum: string = '#262B2F';\nlet purpleLightNum: string = '#262B2F';\nlet greenLightBool: string = '#262B2F';\nlet greenBool: string = '#262B2F';\nlet greyString: string = '#262B2F';\nlet turquoiseFunction: string = '#262B2F';\nlet greyMath: string = '#262B2F';\nlet greyTime: string = '#262B2F';\n// let purpleNum :string = '#00B400'\n\nexport default class Icons {\n  //UI\n\n  //Point images/logos/nube-frog.png\n  static frog: string = '/images/logos/iot-lora-alliance-logo.png';\n  static aiIcon: string = '/images/node-editor/icons/points/ai.svg';\n  static aiColour: string = purpleNum;\n\n  // main\n  static uiMainIcon: string = '/images/node-editor/icons/logic-bool/and2.svg';\n  static uiMainColour: string = purpleNum;\n\n  // logic\n  static logicMainColour: string = greenLightBool;\n\n  static logicAndIcon: string = '/images/node-editor/icons/logic-bool/and2.svg';\n  static logicOrIcon: string = '/images/node-editor/icons/logic-bool/or.svg';\n  static logicNotIcon: string = '/images/node-editor/icons/logic-bool/not.svg';\n\n  static compareGreaterIcon: string = '/images/node-editor/icons/logic-compare/greater-than-equal-solid.svg';\n\n  // Numbers\n\n  // Math\n  static mathMainColour: string = purpleLightNum;\n  static mathMainIcon: string = '/images/node-editor/icons/math-arithmetic/plus-solid.svg';\n\n  static mathAddIcon: string = '/images/node-editor/icons/math-arithmetic/plus-solid.svg';\n  static mathSubIcon: string = '/images/node-editor/icons/math-arithmetic/minus-solid.svg';\n  static mathDivideIcon: string = '/images/node-editor/icons/math-arithmetic/divide-solid.svg';\n  static mathTimesIcon: string = '/images/node-editor/icons/math-arithmetic/times-solid.svg';\n\n  // Bool\n\n  // Time\n\n  // edge\n  // static logicNotIcon: string = '/images/node-editor/icons/logic-bool/not.svg';\n  static edgeNetwork: string = '/images/node-editor/icons/logic-bool/not.svg';\n\n}\n","import { RegistryError } from '../utils/errors';\nimport { isNull } from '../utils/helper';\nimport { BaseIdGenerator, IdGenerator } from '../utils/id-generator';\nimport { Container, ContainerRegistry } from './container';\nimport { Node } from './node';\nimport { NodeFactory } from './node-factory';\nimport {\n  ContainerRegistryMetadata,\n  GlobalNodeRegistryMetadata,\n  IContainer,\n  IFolderNode,\n  INode,\n  isFolderNode,\n  isNode,\n  SerializedNode,\n  SubNodeRegistryMetadata,\n} from './node-interface';\nimport { AbstractRegistry, RegistryResult } from './registry';\n\nexport class DefaultGlobalNodeRegistry<N extends INode> extends AbstractRegistry<N>\n  implements GlobalNodeRegistryMetadata {\n\n  protected constructor() {\n    super();\n  }\n\n  register(obj: N, force?: boolean, key?: string): N {\n    return <N>super.register(obj, force, key);\n  }\n\n  get(key: number | string | N): N {\n    return super.get(isNode(key) ? this.createKey(<N>key) : key);\n  }\n\n  remove(key: number | string | N): N {\n    return <N>super.remove(isNode(key) ? this.createKey(<N>key) : key);\n  }\n\n  protected createKey(node: N): string | number {\n    return IdGenerator.createNodeId(node.cid, node.id);\n  }\n\n  protected itemName(): string {\n    return 'Global Node';\n  }\n}\n\nexport class GlobalNodeRegistry extends DefaultGlobalNodeRegistry<Node> {\n  private static _instance: GlobalNodeRegistry;\n\n  private constructor() {\n    super();\n  }\n\n  public static instance(): GlobalNodeRegistry {\n    if (!GlobalNodeRegistry._instance) {\n      GlobalNodeRegistry._instance = new GlobalNodeRegistry();\n    }\n    return GlobalNodeRegistry._instance;\n  }\n\n}\n\nexport class NodeRegistryHelper {\n\n  static register(parent: IContainer, nodes: SerializedNode[], containerRegistry: ContainerRegistryMetadata,\n                  isCaching?: boolean): Promise<RegistryResult<Node>> {\n    return Promise.allSettled(nodes.map(n => NodeFactory.create(n, !isCaching, containerRegistry))\n                                   .map(n => NodeRegistryHelper.registerNode(containerRegistry, n, isCaching)))\n                  .then(results => results.reduce((r, i) => NodeRegistryHelper.accumulate(r, i),\n                                                  new RegistryResult<Node>()));\n  }\n\n  static unregister(parent: IContainer, nodes: (number | string | SerializedNode | INode)[],\n                    containerRegistry: ContainerRegistryMetadata,\n                    isCaching?: boolean): Promise<RegistryResult<Node>> {\n    return Promise.allSettled(NodeFactory.standardize(parent, nodes)\n                                         .map(n => NodeRegistryHelper.unregisterNode(containerRegistry, n, isCaching)))\n                  .then(results => results.reduce((r, i) => NodeRegistryHelper.accumulate(r, i),\n                                                  new RegistryResult<Node>()));\n  }\n\n  private static registerNode(registry: ContainerRegistryMetadata, node: Node, isCaching: boolean): Promise<Node> {\n    const parent = registry.get(node.cid);\n    if (isNull(parent)) {\n      const nodeId = IdGenerator.createNodeId(node.cid, node.id);\n      return Promise.reject(new RegistryError(`Not found parent container of node '${nodeId}'`, node));\n    }\n    if (isFolderNode(node)) {\n      registry.register((<IFolderNode><unknown>node).sub_container, true);\n    }\n    return <Promise<Node>>parent.nodeRegistry().register(node, true, null, isCaching);\n  }\n\n  private static unregisterNode(registry: ContainerRegistryMetadata, node: INode, isCaching: boolean): Promise<Node> {\n    const parent = registry.get(node.cid);\n    if (isNull(parent)) {\n      const nodeId = IdGenerator.createNodeId(node.cid, node.id);\n      return Promise.reject(new RegistryError(`Not found parent container of node '${nodeId}'`, node));\n    }\n    return <Promise<Node>>parent.nodeRegistry().remove(node, isCaching);\n  }\n\n  private static accumulate(result: RegistryResult<Node>,\n                            item: PromiseFulfilledResult<Node> | PromiseRejectedResult) {\n    if (item.status === 'rejected') {\n      if (item.reason instanceof RegistryError) {\n        result.errors.push(item.reason);\n      } else {\n        const err = new RegistryError<any>(item.reason instanceof Error ? item.reason.message : item.reason);\n        err.stack = item.reason instanceof Error ? item.reason.stack : null;\n        result.errors.push(err);\n      }\n      result.errors.push(item.reason instanceof RegistryError ? item.reason : new RegistryError(item.reason));\n    } else {\n      result.objects.push(item.value);\n    }\n    return result;\n  }\n\n}\n\nexport class DefaultContainerRegistry<T extends IContainer> extends AbstractRegistry<T>\n  implements ContainerRegistryMetadata {\n\n  readonly idGenerator: BaseIdGenerator;\n\n  protected constructor(idGenerator: BaseIdGenerator) {\n    super();\n    this.idGenerator = idGenerator;\n  }\n\n  register(container: T, force?: boolean): T {\n    const c = this.optimizeBeforeRegister(this.validate(container, force, null), force);\n    return <T>this.doRegister(this.createKey(c), c, force);\n  }\n\n  remove(id: number | string): T {\n    return <T>super.remove(id);\n  }\n\n  clear() {\n    super.clear();\n  }\n\n  rootContainer(): IContainer {\n    return this.get(IdGenerator.ROOT);\n  }\n\n  protected itemName(): string {\n    return 'Container';\n  }\n\n  protected optimizeBeforeRegister(container: T, force: boolean): T {\n    if ((this.rootContainer() && this.idGenerator.shouldGenerateCid(container.id)) ||\n        (this.has(container.id) && !force)) {\n      container.id = this.idGenerator.genContainerId(container.id);\n    }\n    if (this.rootContainer()) {\n      container.side = this.rootContainer().side;\n    }\n    return super.optimizeBeforeRegister(container, force);\n  }\n\n  protected createKey(container: T): string | number {\n    return container.id;\n  }\n}\n\nexport class DefaultSubNodeRegistry<T extends INode> extends AbstractRegistry<T> implements SubNodeRegistryMetadata {\n\n  readonly globalNodeRegistry: GlobalNodeRegistryMetadata;\n  readonly containerRegistry: ContainerRegistryMetadata;\n  readonly idGenerator: BaseIdGenerator;\n  protected readonly _parent: IContainer;\n\n  constructor(parent: IContainer, containerRegistry?: ContainerRegistryMetadata,\n              globalNodeRegistry?: GlobalNodeRegistryMetadata) {\n    super();\n    this._parent = parent;\n    this.globalNodeRegistry = globalNodeRegistry ?? GlobalNodeRegistry.instance();\n    this.containerRegistry = containerRegistry ?? ContainerRegistry.instance();\n    this.idGenerator = this.containerRegistry.idGenerator;\n  }\n\n  parent(): IContainer {\n    return this._parent;\n  }\n\n  register(node: T, force?: boolean, key?: string, isCaching?: boolean): Promise<T> {\n    return Promise.resolve(this.optimizeBeforeRegister(this.validate(node, force, key), force))\n                  .then(node => this.doRegister(this.createKey(node), node, force, isCaching));\n  }\n\n  remove(node: T | number | string, isCaching?: boolean): Promise<T> {\n    let n = this.globalNodeRegistry.remove(isNode(node) ? <INode>node : <string>node);\n    if (isFolderNode(n)) {\n      this.containerRegistry.remove((<IFolderNode>n).sub_container.id);\n    }\n    return <Promise<T>>Promise.resolve(super.remove(n.id));\n  }\n\n  get(id: number | string | T): T {\n    return super.get((<T>id)?.id ?? id);\n  }\n\n  protected itemName(): string {\n    return `Node in Container '${this._parent.id}'`;\n  }\n\n  protected optimizeBeforeRegister(node: T, force: boolean): T {\n    if (this.has(node.id) && !force || this.idGenerator.shouldGenerateNid(node.cid, node.id)) {\n      node.id = this.idGenerator.genNodeId(node.cid, node.id);\n    }\n    node.container = this.parent();\n    node.cid = this.parent().id;\n    node.side = this.parent().side;\n    node.title = node.title ?? node.type;\n    if (isFolderNode(node)) {\n      const cNode = <IFolderNode><unknown>node;\n      cNode.sub_container = this.containerRegistry.register(cNode.sub_container, force);\n    }\n    return super.optimizeBeforeRegister(node, force);\n  }\n\n  protected doRegister(k: string | number, node: T, force: boolean = false, isCaching?: boolean): Promise<T> {\n    this.globalNodeRegistry.register(<INode>node, force);\n    return Promise.resolve(super.doRegister(k, node, force));\n  }\n\n  protected createKey(node: T): string | number {\n    return node.id;\n  }\n}\n","import { isEqual, merge } from 'lodash';\nimport { Entry } from '../../../../backend/entry';\nimport { singleton as actor } from '../../../../promise-actor';\nimport { ContainerRegistry } from '../../../container';\nimport { Node } from '../../../node';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType } from '../../../node-io';\nimport EntryNode from './entry-node';\n\nexport default abstract class Mixin<T extends Entry> extends Node implements EntryNode<T> {\n  properties: {\n    entry: T;\n    is_protected: boolean;\n  };\n  settingFields: {};\n\n  abstract namePrefix(): string;\n\n  abstract updateEntry(body: T): Promise<any>;\n\n  abstract deleteEntry(): Promise<any>;\n\n  abstract createEntry(): Promise<T>;\n\n  abstract syncWithBackend(): void;\n\n  abstract entryFactory(): T;\n\n  entry() {\n    return this.properties.entry;\n  }\n\n  entryId() {\n    return this.entry() && this.entry().entryId();\n  }\n\n  applyEntry(entry: T) {\n    this.properties.entry = Object.assign(this.entryFactory(), entry); // ensures correct inheritance\n    this.title = this.namePrefix() + ' ' + this.properties.entry.label();\n    this.size = this.computeSize();\n    if (this.settings['name']) {\n      this.settings['name'].value = this.entryId();\n    }\n    merge(this.settings, this.createSettingForm(entry));\n    this.broadcastSettingsToClients();\n    this.broadcastTitleToClients();\n  }\n\n  createSettingForm(entry: T): { [name: string]: NodeSetting } {\n    return Object.keys(this.settingFields)\n                 .map(key => ({\n                   [key]: NodeSetting.create({\n                                               description: key,\n                                               value      : entry ? entry[key] : null,\n                                               type       : this.settingFields[key],\n                                             }),\n                 }))\n                 .reduce(merge);\n  }\n\n  deactivate() {\n    this.properties.entry = null;\n  }\n\n  onCreated() {\n    if (this.entry()) {\n      this.applyEntry(this.entry());\n    } else {\n      if (this.side !== Side.server) return;\n      actor.process(() =>\n                      this.createEntry()\n                          .then(entry => this.applyEntry(entry))\n                          .catch(e => {\n                            this.displayError(e, 'Entry not created.');\n                            console.log(e);\n                            // self-destruct\n                            this.deactivate();\n                            //TODO not yet send to client\n                            return this.container.nodeRegistry().remove(this);\n                          }),\n      );\n    }\n  }\n\n  onAdded() {\n    if (this.entry()) {\n      this.applyEntry(this.entry());\n    }\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return;\n    const update: T = <any>{};\n    const current: T = <any>{};\n    Object.keys(this.settingFields)\n          .filter(key => this.settingFields[key] !== SettingType.READONLY)\n          .forEach(key => {\n            update[key] = this.settings[key].value;\n            current[key] = this.entry() && this.entry()[key];\n          });\n    // update remotely if there are any changes\n    if (!isEqual(current, update)) {\n      actor.process(() =>\n                      this.updateEntry(update).catch(e => this.displayError(e, 'Unable to update entry remotely.')),\n      );\n    }\n  }\n\n  onRemoved() {\n    if (this.side !== Side.server || !this.entry()) return Promise.resolve();\n    return actor.process(() =>\n                           this.deleteEntry().catch(e => {\n                             this.displayError(e, 'Failed to remove entry from backend.');\n                             console.log(e);\n                           }),\n    );\n  }\n\n  findFreeIdentifier(): Promise<string> {\n    return this.getTakenIdentifiers().then(takenIdentifiers => {\n      for (let i = 1; ; i += 1) {\n        const identifier = this.makeIdentifier(i);\n        if (!takenIdentifiers.includes(identifier)) return identifier;\n      }\n    });\n  }\n\n  getTakenIdentifiers(): Promise<string[]> {\n    const globalSiblings = <EntryNode<T>[]>ContainerRegistry.instance().rootContainer().getNodesByClass(this.constructor, true);\n    return Promise.resolve(globalSiblings.filter(n => n.entry()).map(v => v.entry().identifier()));\n  }\n\n  makeIdentifier(n: number): string {\n    return `WIRES_${this.namePrefix().toUpperCase()}_${n}`;\n  }\n}\n","module.exports = require(\"fs\");","import * as fs from 'fs';\nimport * as path from 'path';\n\nexport default class FileUtils {\n  /**\n   * Runs a current dir\n   * @returns {string}\n   */\n  static getDir(): string {\n    return path.dirname(__filename);\n  }\n\n\n\n  /**\n   * Runs all files under a dir\n   * @param dirPath\n   * @returns {string}\n   */\n  static getAllFiles(dirPath): any {\n    if (dirPath === null) return;\n    return new Promise((resolve, reject) => {\n      fs.readdir(dirPath, (err, files) => {\n        if (err) {\n          reject(err);\n        }\n        let obj = [];\n        files.forEach(file => {\n          obj.push(file);\n        });\n        resolve(obj);\n        return obj;\n      });\n    });\n  }\n\n  /**\n   * Checks if a file exists\n   * @param fileName\n   * @returns {boolean}\n   */\n  static checkFileExists(fileName): boolean {\n    return fs.existsSync(fileName);\n  }\n\n\n  /**\n   * create file if doesn't exist\n   * @param fileName\n   * @returns {any}\n   */\n  // create file if doesn't exist\n  static createFile(fileName) {\n    return new Promise((resolve, reject) => {\n      fs.open(fileName, 'r', (err, fd) => {\n        if (err) {\n          fs.writeFile(fileName, '', err => {\n            if (err) {\n              reject(err);\n            }\n            let msg = 'The file was created!';\n            resolve(msg);\n          });\n        } else {\n          let msg = 'The file exists!';\n          resolve(msg);\n        }\n      });\n    });\n  }\n\n  /**\n   * create directory if doesn't exist\n   * @param directoryPath\n   * @returns {string}\n   */\n  static createDirectory(directoryPath) {\n    const directory = path.normalize(directoryPath);\n\n    return new Promise((resolve, reject) => {\n      fs.stat(directory, error => {\n        if (error) {\n          if (error.code === 'ENOENT') {\n            fs.mkdir(directory, error => {\n              if (error) {\n                reject(error);\n              } else {\n                resolve(directory);\n              }\n            });\n          } else {\n            reject(error);\n          }\n        } else {\n          resolve(directory);\n        }\n      });\n    });\n  }\n\n  /**\n   * create folder if doesn't exist\n   * @param dirPath\n   * @returns {any}\n   */\n  static ensureDirSync(dirPath) {\n    try {\n      return fs.mkdirSync(dirPath);\n    } catch (err) {\n      if (err.code !== 'EEXIST') throw err;\n    }\n  }\n\n  /**\n   * Read content from the filePath\n   * @param filePath {string}\n   */\n  static readFile(filePath: string): Promise<any> {\n    return new Promise((resolve, reject) => {\n      fs.readFile(filePath, (err, buff) => {\n        if (err) {\n          reject(err);\n        }\n        resolve(buff);\n      });\n    });\n  }\n\n  static async checkForOldDirectory(filePath): Promise<boolean> {\n    try {\n      const fileContent = await FileUtils.readFile(filePath);\n      if (fileContent) Boolean(fileContent.toString());\n      else return false;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  /**\n   * read text and return json out\n   * @param fileName\n   * @returns {any}\n   */\n  static async readFileReturnJson(fileName: string) {\n    //if (!this.checkFileExists(fileName)) return;\n    return new Promise((resolve, reject) => {\n      fs.readFile(fileName, (err, data) => {\n        let obj = [];\n        if (err) {\n          reject(err);\n        }\n        data\n          .toString()\n          .split('\\n')\n          .forEach(function (line, index, arr) {\n            if (line.length === 0) {\n              return;\n            }\n            obj.push(line);\n          });\n        let objStringify = JSON.stringify(obj);\n        let json = JSON.parse(objStringify);\n        resolve(json);\n      });\n    });\n  }\n\n  /**\n   * append File\n   * @param fileName\n   * @param input\n   * @returns {any}\n   */\n  static async appendFile(fileName: string, input: string) {\n    //if (!this.checkFileExists(fileName)) return;\n    return new Promise((resolve, reject) => {\n      let msg = 'The file ' + fileName + ' was saved!';\n      let errorMsg = 'Cant read file. File name is not defined';\n      fs.appendFile(fileName, input, err => {\n        if (err) {\n          reject(err);\n        }\n        resolve(msg);\n      });\n    });\n  }\n\n  /**\n   * writeFile\n   * @param fileName\n   * @param input\n   * @returns {any}\n   */\n  static async writeFile(fileName: string, input: string) {\n    //if (!this.checkFileExists(fileName)) return false;\n    return new Promise((resolve, reject) => {\n      let msg = 'The file ' + fileName + ' was saved!';\n      let errorMsg = 'Cant read file. File name is not defined';\n      fs.writeFile(fileName, input, err => {\n        if (err) {\n          reject(err);\n        }\n        resolve(msg);\n      });\n    });\n  }\n\n\n\n  /**\n   * delete multiple files !!! Not tested well\n   * @param files\n   * @param callback\n   * @returns {any}\n   */\n  static deleteFiles(files, callback) {\n    let i = files.length;\n    files.forEach(function (filepath) {\n      console.log(filepath)\n      if (FileUtils.checkFileExists(filepath)) {\n        fs.unlink(filepath, function (err) {\n          i--;\n          if (err) {\n            callback(err);\n            return;\n          } else if (i <= 0) {\n            callback(null);\n          }\n        });\n      } else {\n        callback(true);\n        console.log(11111)\n        console.log(filepath)\n      }\n    });\n  }\n\n\n}\n","import * as fs from 'fs';\nimport config from '../../config';\nimport FileUtils from '../../nodes/utils/file-utils';\nimport { db_logger as logger } from '../../utils/loggers';\n\nconst file = `${config.dataDir}/platform.db`;\nconst ipDb = `${config.dataDir}/ip.db`;\n\nexport default class PlatformDataSource {\n\n  static getPlatform(): Promise<any> {\n    return new Promise((resolve, reject) => {\n      FileUtils.createFile(file).then(() => {\n        fs.readFile(file, { encoding: 'utf-8' }, (err, data) => {\n          if (err) {\n            reject(err);\n            logger.error(err.message);\n          } else {\n            const obj = data ? JSON.parse(data) : {};\n            resolve(obj);\n          }\n        });\n      });\n    });\n  }\n\n  static updatePlatform(data: any): Promise<any> {\n    return new Promise((resolve, reject) => {\n      FileUtils.createFile(file).then(() => {\n        const json = JSON.stringify(data);\n        fs.writeFile(file, json, 'utf-8', err => {\n          if (err) {\n            reject(err);\n            logger.error(err.message);\n          } else {\n            resolve(json);\n          }\n        });\n      });\n    });\n  }\n\n  static getEth(): Promise<any> {\n    return new Promise((resolve, reject) => {\n      FileUtils.createFile(ipDb).then(() => {\n        fs.readFile(ipDb, { encoding: 'utf-8' }, (err, data) => {\n          if (err) {\n            reject(err);\n            logger.error(err.stack ?? err.message);\n          } else {\n            const obj = data ? JSON.parse(data) : {};\n            resolve(obj);\n          }\n        });\n      });\n    });\n  }\n\n  static updateEth(data: any): Promise<any> {\n    return new Promise((resolve, reject) => {\n      FileUtils.createFile(ipDb).then(() => {\n        let json = JSON.stringify(data);\n        fs.writeFile(ipDb, json, 'utf-8', err => {\n          if (err) {\n            reject(err);\n            logger.error(err.stack ?? err.message);\n          } else {\n            resolve(json);\n          }\n        });\n      });\n    });\n  }\n}\n\n","import PlatformDataSource from '../../../database/datasource/PlatformDataSource';\nexport default class SystemUtils {\n  static getDeviceID(self): Promise<string> {\n    return new Promise((resolve, reject) => {\n      if (self?.container?.db) {\n        self.container.db.getNodeType('system/platform', (err, docs) => {\n          if (!err) {\n            if (docs?.length && docs[0]?.properties?.deviceID) {\n              resolve(docs[0].properties.deviceID.trim());\n            } else {\n              reject('No deviceID');\n            }\n          } else {\n            console.log(err);\n            reject(err);\n          }\n        });\n      } else {\n        reject('No DB');\n      }\n    });\n  }\n\n  static getClientID(self): Promise<string> {\n    return new Promise((resolve, reject) => {\n      if (self?.container?.db) {\n        self.container.db.getNodeType('system/platform', (err, docs) => {\n          if (!err) {\n            if (docs?.length && docs[0]?.settings?.['client-id']?.value) {\n              resolve(docs[0].settings['client-id'].value.trim());\n            } else {\n              reject('No clientId');\n            }\n          } else {\n            console.log(err);\n            reject(err);\n          }\n        });\n      } else {\n        reject('No DB');\n      }\n    });\n  }\n\n  static getDeviceIdDb(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      PlatformDataSource.getPlatform().then(e => {\n        if(e){\n          resolve(e.deviceID); //deviceID\n        }\n      }).catch(err => {\n        reject('No deviceID');\n      })\n    });\n  }\n\n  static getClientIdDb(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      PlatformDataSource.getPlatform().then(e => {\n        if(e){\n          resolve(e.clientId); //clientId\n        }\n      }).catch(err => {\n        reject('No clientId');\n      })\n    });\n  }\n\n}\n","import config from '../../../config';\n\nexport const bsaClientConfig = path => {\n  let cfg = config.bsa.paths[path];\n  if (!cfg) {\n    return null;\n  }\n  return {\n    baseURL: config.bsa.baseURL,\n    auth: {\n      username: config.bsa.username,\n      password: config.bsa.password,\n    },\n    url: cfg.path,\n    headers: {\n      'Content-Type': cfg.contentType ?? 'application/json',\n      'Accept': cfg.accept ?? 'application/json',\n    },\n  };\n};\n","module.exports = require(\"jsonata\");","import axios from 'axios';\nimport { Colors, create } from 'logplease';\nimport Utils from '../../../utils';\nimport { ADD_POINT, REMOVE_POINT, SEND_PAYLOAD_TO_CHILD } from './edge-constant';\n\nconst logger = create('edge-utils', { color: Colors.Grey });\n\nexport default class Edge28Utils {\n  static sendPayloadToChild(childNode, payload) {\n    if (childNode && childNode['subscribe']) {\n      childNode['subscribe'](this.createMessage(SEND_PAYLOAD_TO_CHILD, payload));\n    } else {\n      logger.error('Child Node is not available on sendPayloadToChild');\n    }\n  }\n\n  static addPoint(parentNode, payload) {\n    if (parentNode && parentNode['subscribe']) {\n      parentNode['subscribe'](this.createMessage(ADD_POINT, payload));\n    } else {\n      logger.error('Parent Node is not available on addPoint');\n    }\n  }\n\n  static removePoint(parentNode, payload) {\n    if (parentNode && parentNode['subscribe']) {\n      parentNode['subscribe'](this.createMessage(REMOVE_POINT, payload));\n    } else {\n      logger.error('Parent Node is not available on removePoint');\n    }\n  }\n\n  private static createMessage(action, payload = null) {\n    return { action, payload };\n  }\n\n  static async writePointValue(\n    host: string,\n    port: number,\n    apiVer: string,\n    pointType: string,\n    pointId: string,\n    val: number,\n    priority: number,\n  ): Promise<any> {\n    const url = `${Utils.buildUrl(host, port)}/api/${apiVer}/write/${pointType}/${pointId}/${val}/${priority}`;\n    const pointValue = await axios.get(url);\n    return pointValue.data;\n  }\n}\n","export const GET_BACNET_CLIENT = 'GET_BACNET_CLIENT';\nexport const GET_NETWORK_NODE = 'GET_NETWORK_NODE';\nexport const GET_POINTS = 'GET_POINTS';\nexport const GET_PRESENT_VALUE = 'GET_PRESENT_VALUE';\nexport const SEND_PAYLOAD_TO_CHILD = 'SEND_PAYLOAD_TO_CHILD';\nexport const SEND_POINT_VALUE = 'SEND_POINT_VALUE';\nexport const ADD_POINT = 'ADD_POINT';\nexport const REMOVE_POINT = 'REMOVE_POINT';\nexport const ADD_DEVICE = 'ADD_DEVICE';\nexport const REMOVE_DEVICE = 'REMOVE_DEVICE'; \nexport const WRITE_PRESENT_VALUE = 'WRITE_PRESENT_VALUE'; \n","module.exports = require(\"path\");","/**\n * Created by Derwish (derwish.pro@gmail.com) on 16.02.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport AuthUserDatabase from './database/AuthUserDatabase';\nimport DashboardDatabase from './database/DashboardDatabase';\nimport HistorianDatabase from './database/HistorianDatabase';\nimport NodeDatabase from './database/NodeDatabase';\nimport ScheduleDatabase from './database/ScheduleDatabase';\nimport UserDatabase from './database/UserDatabase';\n\nexport interface Database extends AuthUserDatabase, DashboardDatabase, NodeDatabase, ScheduleDatabase,\n                                  HistorianDatabase, UserDatabase {\n}\n\nexport class AsyncDbHelper {\n\n  static noArgs<R>(db: Database, func: Function): Promise<R> {\n    return new Promise<R>((resolve, reject) => func.call(db, this.cbHandler(reject, resolve)));\n  }\n\n  static oneArgs<R>(db: Database, func: Function, param: any): Promise<R> {\n    return new Promise<R>((resolve, reject) => func.call(db, param, this.cbHandler(reject, resolve)));\n  }\n\n  static twoArgs<R>(db: Database, func: Function, param1: any, param2: any): Promise<R> {\n    return new Promise<R>((resolve, reject) => func.call(db, param1, param2, this.cbHandler(reject, resolve)));\n  }\n\n  static threeArgs<R>(db: Database, func: Function, param1: any, param2: any, param3: any): Promise<R> {\n    return new Promise<R>((resolve, reject) => func.call(db, param1, param2, param3, this.cbHandler(reject, resolve)));\n  }\n\n  private static cbHandler<R>(reject: (reason?: any) => void, resolve: (value?: (PromiseLike<R> | R)) => void) {\n    return (err?: Error, result?: R) => {\n      if (err) {\n        reject(err);\n      } else {\n        resolve(result);\n      }\n    };\n  }\n}\n","import { Node } from '../nodes/node';\nimport { Side } from '../nodes/node-interface';\nimport { DispatchNode } from './DispatchNode';\nimport { UNKNOWN_POINT_NAME } from './IPubSub';\nimport { pubSubSingleton } from './PubSub';\n\nexport class PubSubHelpers {\n  static logger = require('logplease').create('pub-sub', { color: 4 });\n\n  static map(that: Node) {\n    if (that.side === Side.server && !(that instanceof DispatchNode)) {\n      const point = PubSubHelpers.getPoint(that);\n      PubSubHelpers.logger.info(`Mapping protocol: ${that.category} having point: ${point}`);\n      pubSubSingleton.addPoint(that.category, point, PubSubHelpers.getDisplayPointName(that), false);\n    }\n  }\n\n  static unMap(that: Node) {\n    if (that.side === Side.server && !(that instanceof DispatchNode)) {\n      const point = PubSubHelpers.getPoint(that);\n      PubSubHelpers.logger.info(`Un-mapping protocol: ${that.category} having point: ${point}`);\n      pubSubSingleton.removePoint(that.category, point);\n    }\n  }\n\n  static renameFunction(that: Node) {\n    if (that.side === Side.server && !(that instanceof DispatchNode)) {\n      const point: string = PubSubHelpers.getPoint(that);\n      PubSubHelpers.logger.info(`Renaming protocol: ${that.category} having point: ${point}`);\n      pubSubSingleton.renamePoint(that.category, point, PubSubHelpers.getDisplayPointName(that));\n    }\n  }\n\n  static dispatch(that: Node, value: any) {\n    if (that.side === Side.server && !(that instanceof DispatchNode)) {\n      const point = PubSubHelpers.getPoint(that);\n      // logger.info(`Dispatching: ${that.protocol} having point: ${point}`);\n      pubSubSingleton.dispatch(that.category, point, value);\n    }\n  }\n\n  static connect(that: DispatchNode) {\n    if (that.side === Side.server && that instanceof DispatchNode) {\n      const protocol: string = that.getSelectedProtocol();\n      const point: string = that.getSelectedPoint();\n      const pointName: string = that.getSelectedPointName();\n      PubSubHelpers.logger.info(`Subscribing protocol: ${protocol} having point: ${point}`);\n      pubSubSingleton.connect(protocol, point, pointName, that);\n    }\n  }\n\n  static disconnect(that: DispatchNode) {\n    if (that.side === Side.server && that instanceof DispatchNode) {\n      const protocol: string = that.getSelectedProtocol();\n      const point: string = that.getSelectedPoint();\n      PubSubHelpers.logger.info(`Un-subscribing protocol: ${protocol} having point: ${point}`);\n      pubSubSingleton.disconnect(protocol, point, that);\n    }\n  }\n\n  static getPoint(that) {\n    const { cid, id } = that;\n    return `${cid}/${id}`;\n  }\n\n  private static getDisplayPointName(that: Node) {\n    let names: string[] = [];\n    let parentNode = that.getParentNode();\n    while (parentNode) {\n      names.push(parentNode.title);\n      parentNode = parentNode.getParentNode();\n    }\n    names = names.reverse();\n    names.push(that.name || that.title || UNKNOWN_POINT_NAME);\n    return names.join('/');\n  }\n}\n","import {\n  DEVICE_CONTAINER_TYPE,\n  EDGE_CONTAINER_TYPE,\n  GROUP_CONTAINER_TYPE,\n  MODULE_NODE_TYPE,\n  NETWORK_CONTAINER_TYPE,\n  POINT_NODE_TYPE,\n} from '../nodes/constants';\n\nexport interface Entry {\n  entryId(): string;\n\n  identifier(): string;\n\n  nodeType(): string;\n\n  label(): string;\n}\n\nabstract class NormalEntry implements Entry {\n  id: string;\n  code: string;\n  readonly _nodeType: string;\n\n  entryId(): string {\n    return this.id;\n  }\n\n  identifier(): string {\n    return this.code;\n  }\n\n  nodeType(): string {\n    return this._nodeType;\n  }\n\n  label(): string {\n    return this.identifier() || this.entryId();\n  }\n}\n\nexport class Edge extends NormalEntry {\n  customer_code: string;\n  side_code: string;\n  model: string;\n  firmware_version: string;\n  data_version: string;\n  readonly _nodeType = EDGE_CONTAINER_TYPE;\n}\n\nexport class Network extends NormalEntry {\n  protocol: string;\n  state: string;\n  readonly _nodeType = NETWORK_CONTAINER_TYPE;\n}\n\nexport class Device extends NormalEntry {\n  manufacturer: string;\n  protocol: string;\n  state: string;\n  type: string;\n  readonly _nodeType = DEVICE_CONTAINER_TYPE;\n}\n\nexport class Folder extends NormalEntry {\n  name: string;\n  readonly _nodeType = GROUP_CONTAINER_TYPE;\n\n  label(): string {\n    return this.name || super.label();\n  }\n}\n\nexport class Point extends NormalEntry {\n  edge: string;\n  enabled: boolean;\n  kind: string;\n  measure_unit: string;\n  network: string;\n  offset: number;\n  precision: number;\n  protocol: string;\n  type: string;\n  readonly _nodeType = POINT_NODE_TYPE;\n}\n\nexport class Service implements Entry {\n  service_id: string;\n  service_name: string;\n  service_type: string;\n  version: string;\n  published_by: string;\n  state: string;\n  readonly created_at: string;\n  readonly modified_at: string;\n  readonly deploy_id: string;\n  readonly deploy_location: string;\n  readonly _nodeType = MODULE_NODE_TYPE;\n\n  entryId(): string {\n    return this.service_id;\n  }\n\n  identifier(): string {\n    return this.service_name;\n  }\n\n  nodeType(): string {\n    return this._nodeType;\n  }\n\n  label(): string {\n    return `${this.identifier()} ${this.version}` || this.entryId();\n  }\n}\n\nexport class PointData {\n  priority: number;\n  value: number;\n  point: string;\n  priority_values: number[];\n}\n","import { Logger } from 'logplease';\nimport { Database } from '../../database/database';\nimport { ContainerRegistry } from '../../nodes/container';\nimport { createNodeDbHelper, NodeDbHelper } from '../../nodes/node-db-helper';\nimport {\n  ContainerRegistryMetadata,\n  isFolderNode,\n  SerializedFolderNode,\n  SerializedNode,\n} from '../../nodes/node-interface';\nimport { BaseIdGenerator } from '../../utils/id-generator';\nimport { node_service_logger } from '../../utils/loggers';\n\nexport abstract class NodeService {\n\n  protected readonly cRegistry: ContainerRegistryMetadata;\n  protected readonly dbHelper: NodeDbHelper;\n  protected readonly idGenerator: BaseIdGenerator;\n  protected readonly logger: Logger = node_service_logger;\n\n  constructor(cRegistry?: ContainerRegistryMetadata, dbHelper?: NodeDbHelper, idGenerator?: BaseIdGenerator) {\n    this.cRegistry = cRegistry ?? ContainerRegistry.instance();\n    this.idGenerator = idGenerator ?? this.cRegistry.idGenerator;\n    this.dbHelper = dbHelper ?? createNodeDbHelper();\n  }\n\n  protected getNodesInContainer(database: Database, nodes: SerializedNode[]): Promise<SerializedNode[]> {\n    const list = nodes.filter(n => isFolderNode(n))\n                      .map(n => <SerializedFolderNode>n)\n                      .map(n => this.dbHelper.listByContainer(database, n.sub_container.id)\n                                    .then(nodes => this.getNodesInContainer(database, nodes)));\n    return Promise.all([Promise.resolve(nodes), ...list]).then(r => r.flatMap(nodes => nodes));\n  }\n}\n","module.exports = require(\"influx\");","/*\n * PsychroLib (version 2.4.0) (https://github.com/psychrometrics/psychrolib).\n * Copyright (c) 2018-2020 The PsychroLib Contributors for the current library implementation.\n * Copyright (c) 2017 ASHRAE Handbook — Fundamentals for ASHRAE equations and coefficients.\n * Licensed under the MIT License.\n */\n\nvar psychrolib = function Psychrometrics() {\n  /**\n   * Module overview\n   *  Contains functions for calculating thermodynamic properties of gas-vapor mixtures\n   *  and standard atmosphere suitable for most engineering, physical and meteorological\n   *  applications.\n   *\n   *  Most of the functions are an implementation of the formulae found in the\n   *  2017 ASHRAE Handbook - Fundamentals, in both International System (SI),\n   *  and Imperial (IP) units. Please refer to the information included in\n   *  each function for their respective reference.\n   *\n   * Example (e.g. Node.JS)\n   *  // Import the PsychroLib\n   *  var psychrolib = require('psychrolib.js')\n   *  // Set unit system\n   *  psychrolib.SetUnitSystem(psychrolib.SI)\n   *  // Calculate the dew point temperature for a dry bulb temperature of 25 C and a relative humidity of 80%\n   *  var TDewPoint = psychrolib.GetTDewPointFromRelHum(25.0, 0.80);\n   *  console.log('TDewPoint: %d', TDewPoint);\n   * 21.3094\n   *\n   * Copyright\n   *  - For the current library implementation\n   *     Copyright (c) 2018-2020 The PsychroLib Contributors.\n   *  - For equations and coefficients published ASHRAE Handbook — Fundamentals, Chapter 1\n   *     Copyright (c) 2017 ASHRAE Handbook — Fundamentals (https://www.ashrae.org)\n   *\n   * License\n   *  MIT (https://github.com/psychrometrics/psychrolib/LICENSE.txt)\n   *\n   * Note from the Authors\n   *  We have made every effort to ensure that the code is adequate, however, we make no\n   *  representation with respect to its accuracy. Use at your own risk. Should you notice\n   *  an error, or if you have a suggestion, please notify us through GitHub at\n   *  https://github.com/psychrometrics/psychrolib/issues.\n   */\n\n  // Standard functions\n  var log = Math.log;\n  var exp = Math.exp;\n  var pow = Math.pow;\n  var min = Math.min;\n  var max = Math.max;\n  var abs = Math.abs;\n\n  /******************************************************************************************************\n   * Global constants\n   *****************************************************************************************************/\n\n  var ZERO_FAHRENHEIT_AS_RANKINE = 459.67; // Zero degree Fahrenheit (°F) expressed as degree Rankine (°R).\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 39.\n\n  var ZERO_CELSIUS_AS_KELVIN = 273.15; // Zero degree Celsius (°C) expressed as Kelvin (K).\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 39.\n\n  var R_DA_IP = 53.35; // Universal gas constant for dry air (IP version) in ft lb_Force lb_DryAir⁻¹ R⁻¹.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1.\n\n  var R_DA_SI = 287.042; // Universal gas constant for dry air (SI version) in J kg_DryAir⁻¹ K⁻¹.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1.\n\n  var INVALID = -99999; // Invalid value (dimensionless).\n\n  var MAX_ITER_COUNT = 100; // Maximum number of iterations before exiting while loops.\n\n  var MIN_HUM_RATIO = 1e-7; // Minimum acceptable humidity ratio used/returned by any functions.\n  // Any value above 0 or below the MIN_HUM_RATIO will be reset to this value.\n\n  var FREEZING_POINT_WATER_IP = 32.0; // Freezing point of water in Fahrenheit.\n\n  var FREEZING_POINT_WATER_SI = 0.0; // Freezing point of water in Celsius.\n\n  var TRIPLE_POINT_WATER_IP = 32.018; // Triple point of water in Fahrenheit.\n\n  var TRIPLE_POINT_WATER_SI = 0.01; // Triple point of water in Celsius.\n\n  /******************************************************************************************************\n   * Helper functions\n   *****************************************************************************************************/\n\n  // Systems of units (IP or SI)\n  var PSYCHROLIB_UNITS = undefined;\n  var PSYCHROLIB_TOLERANCE = undefined;\n\n  this.IP = 1;\n  this.SI = 2;\n\n  // Function to set the system of units\n  // Note: this function *HAS TO BE CALLED* before the library can be used\n  this.SetUnitSystem = function(UnitSystem) {\n    if (UnitSystem != this.IP && UnitSystem != this.SI) {\n      throw new Error('UnitSystem must be IP or SI');\n    }\n    PSYCHROLIB_UNITS = UnitSystem;\n    // Define tolerance of temperature calculations\n    // The tolerance is the same in IP and SI\n    if (PSYCHROLIB_UNITS == this.IP) PSYCHROLIB_TOLERANCE = (0.001 * 9) / 5;\n    else PSYCHROLIB_TOLERANCE = 0.001;\n  };\n\n  // Return system of units in use.\n  this.GetUnitSystem = function() {\n    return PSYCHROLIB_UNITS;\n  };\n\n  // Function to check if the current system of units is SI or IP\n  // The function exits in error if the system of units is undefined\n  this.isIP = function() {\n    if (PSYCHROLIB_UNITS == this.IP) return true;\n    else if (PSYCHROLIB_UNITS == this.SI) return false;\n    else throw new Error('Unit system is not defined');\n  };\n\n  /******************************************************************************************************\n   * Conversion between temperature units\n   *****************************************************************************************************/\n\n  // Utility function to convert temperature to degree Rankine (°R)\n  // given temperature in degree Fahrenheit (°F).\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 section 3\n  this.GetTRankineFromTFahrenheit = function(T_F) {\n    return T_F + ZERO_FAHRENHEIT_AS_RANKINE;\n  }; /* exact */\n\n  // Utility function to convert temperature to degree Fahrenheit (°F)\n  // given temperature in degree Rankine (°R).\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 section 3\n  this.GetTFahrenheitFromTRankine = function(T_R) {\n    return T_R - ZERO_FAHRENHEIT_AS_RANKINE;\n  }; /* exact */\n\n  // Utility function to convert temperature to Kelvin (K)\n  // given temperature in degree Celsius (°C).\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 section 3\n  this.GetTKelvinFromTCelsius = function(T_C) {\n    return T_C + ZERO_CELSIUS_AS_KELVIN;\n  }; /* exact */\n\n  // Utility function to convert temperature to degree Celsius (°C)\n  // given temperature in Kelvin (K).\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 section 3\n  this.GetTCelsiusFromTKelvin = function(T_K) {\n    return T_K - ZERO_CELSIUS_AS_KELVIN;\n  }; /* exact */\n\n  // Utility function to convert degree Fahrenheit (°F) to degree Celsius (°C)\n  this.GetTCelsiusFromTFahrenheit = function(T_F) {\n    return (T_F - 32) / 1.8;\n  };\n\n  // Utility function to convert degree Celsius (°C) to degree Fahrenheit  (°F)\n  this.GetTFahrenheitFromTCelsius = function(T_C) {\n    return T_C * 1.8 + 32;\n  };\n\n  this.GetTRankineFromTCelsius = function(T_C) {\n    var T_F = T_C * 1.8 + 32;\n    return T_F + ZERO_FAHRENHEIT_AS_RANKINE;\n  };\n\n  this.GetTKelvinFromTFahrenheit = function(T_F) {\n    var T_C = (T_F - 32) / 1.8;\n    return T_C + ZERO_CELSIUS_AS_KELVIN;\n  };\n\n  this.GetTFahrenheitFromTKelvin = function(T_K) {\n    var T_C = T_K - ZERO_CELSIUS_AS_KELVIN;\n    return T_C * 1.8 + 32;\n  };\n\n  this.GetTRankineFromTKelvin = function(T_K) {\n    var T_C = T_K - ZERO_CELSIUS_AS_KELVIN;\n    var T_F = T_C * 1.8 + 32;\n    return T_F + ZERO_FAHRENHEIT_AS_RANKINE;\n  };\n\n  this.GetTCelsiusFromTRankine = function(T_R) {\n    var T_F = T_R - ZERO_FAHRENHEIT_AS_RANKINE;\n    return (T_F - 32) / 1.8;\n  };\n\n  this.GetTKelvinFromTRankine = function(T_R) {\n    var T_F = T_R - ZERO_FAHRENHEIT_AS_RANKINE;\n    var T_C = (T_F - 32) / 1.8;\n    return T_C + ZERO_CELSIUS_AS_KELVIN;\n  };\n\n  /******************************************************************************************************\n   * Conversions between dew point, wet bulb, and relative humidity\n   *****************************************************************************************************/\n\n  // Return wet-bulb temperature given dry-bulb temperature, dew-point temperature, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetTWetBulbFromTDewPoint = function(\n    // (o) Wet bulb temperature in °F [IP] or °C [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    TDewPoint, // (i) Dew point temperature in °F [IP] or °C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var HumRatio;\n\n    if (!(TDewPoint <= TDryBulb))\n      throw new Error('Dew point temperature is above dry bulb temperature');\n\n    HumRatio = this.GetHumRatioFromTDewPoint(TDewPoint, Pressure);\n    return this.GetTWetBulbFromHumRatio(TDryBulb, HumRatio, Pressure);\n  };\n\n  // Return wet-bulb temperature given dry-bulb temperature, relative humidity, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetTWetBulbFromRelHum = function(\n    // (o) Wet bulb temperature in °F [IP] or °C [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    RelHum, // (i) Relative humidity [0-1]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var HumRatio;\n\n    if (!(RelHum >= 0 && RelHum <= 1)) throw new Error('Relative humidity is outside range [0,1]');\n\n    HumRatio = this.GetHumRatioFromRelHum(TDryBulb, RelHum, Pressure);\n    return this.GetTWetBulbFromHumRatio(TDryBulb, HumRatio, Pressure);\n  };\n\n  // Return relative humidity given dry-bulb temperature and dew-point temperature.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 22\n  this.GetRelHumFromTDewPoint = function(\n    // (o) Relative humidity [0-1]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    TDewPoint, // (i) Dew point temperature in °F [IP] or °C [SI]\n  ) {\n    var VapPres, SatVapPres;\n\n    if (!(TDewPoint <= TDryBulb))\n      throw new Error('Dew point temperature is above dry bulb temperature');\n\n    VapPres = this.GetSatVapPres(TDewPoint);\n    SatVapPres = this.GetSatVapPres(TDryBulb);\n    return VapPres / SatVapPres;\n  };\n\n  // Return relative humidity given dry-bulb temperature, wet bulb temperature and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetRelHumFromTWetBulb = function(\n    // (o) Relative humidity [0-1]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    TWetBulb, // (i) Wet bulb temperature in °F [IP] or °C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var HumRatio;\n\n    if (!(TWetBulb <= TDryBulb))\n      throw new Error('Wet bulb temperature is above dry bulb temperature');\n\n    HumRatio = this.GetHumRatioFromTWetBulb(TDryBulb, TWetBulb, Pressure);\n    return this.GetRelHumFromHumRatio(TDryBulb, HumRatio, Pressure);\n  };\n\n  // Return dew-point temperature given dry-bulb temperature and relative humidity.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetTDewPointFromRelHum = function(\n    // (o) Dew Point temperature in °F [IP] or °C [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    RelHum, // (i) Relative humidity [0-1]\n  ) {\n    var VapPres;\n\n    if (!(RelHum >= 0 && RelHum <= 1)) throw new Error('Relative humidity is outside range [0,1]');\n\n    VapPres = this.GetVapPresFromRelHum(TDryBulb, RelHum);\n    return this.GetTDewPointFromVapPres(TDryBulb, VapPres);\n  };\n\n  // Return dew-point temperature given dry-bulb temperature, wet-bulb temperature, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetTDewPointFromTWetBulb = function(\n    // (o) Dew Point temperature in °F [IP] or °C [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    TWetBulb, // (i) Wet bulb temperature in °F [IP] or °C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var HumRatio;\n\n    if (!(TWetBulb <= TDryBulb))\n      throw new Error('Wet bulb temperature is above dry bulb temperature');\n\n    HumRatio = this.GetHumRatioFromTWetBulb(TDryBulb, TWetBulb, Pressure);\n    return this.GetTDewPointFromHumRatio(TDryBulb, HumRatio, Pressure);\n  };\n\n  /******************************************************************************************************\n   * Conversions between dew point, or relative humidity and vapor pressure\n   *****************************************************************************************************/\n\n  // Return partial pressure of water vapor as a function of relative humidity and temperature.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 12, 22\n  this.GetVapPresFromRelHum = function(\n    // (o) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    RelHum, // (i) Relative humidity [0-1]\n  ) {\n    if (!(RelHum >= 0 && RelHum <= 1)) throw new Error('Relative humidity is outside range [0,1]');\n\n    return RelHum * this.GetSatVapPres(TDryBulb);\n  };\n\n  // Return relative humidity given dry-bulb temperature and vapor pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 12, 22\n  this.GetRelHumFromVapPres = function(\n    // (o) Relative humidity [0-1]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    VapPres, // (i) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n  ) {\n    if (!(VapPres >= 0))\n      throw new Error('Partial pressure of water vapor in moist air is negative');\n\n    return VapPres / this.GetSatVapPres(TDryBulb);\n  };\n\n  // Helper function returning the derivative of the natural log of the saturation vapor pressure\n  // as a function of dry-bulb temperature.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn. 5 & 6\n  this.dLnPws_ = function(\n    // (o)  Derivative of natural log of vapor pressure of saturated air in Psi [IP] or Pa [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n  ) {\n    var dLnPws, T;\n\n    if (this.isIP()) {\n      T = this.GetTRankineFromTFahrenheit(TDryBulb);\n\n      if (TDryBulb <= TRIPLE_POINT_WATER_IP)\n        dLnPws =\n          1.0214165e4 / pow(T, 2) -\n          5.3765794e-3 +\n          2 * 1.9202377e-7 * T +\n          3 * 3.5575832e-10 * pow(T, 2) -\n          4 * 9.0344688e-14 * pow(T, 3) +\n          4.1635019 / T;\n      else\n        dLnPws =\n          1.0440397e4 / pow(T, 2) -\n          2.7022355e-2 +\n          2 * 1.289036e-5 * T -\n          3 * 2.4780681e-9 * pow(T, 2) +\n          6.5459673 / T;\n    } else {\n      T = this.GetTKelvinFromTCelsius(TDryBulb);\n\n      if (TDryBulb <= TRIPLE_POINT_WATER_SI)\n        dLnPws =\n          5.6745359e3 / pow(T, 2) -\n          9.677843e-3 +\n          2 * 6.2215701e-7 * T +\n          3 * 2.0747825e-9 * pow(T, 2) -\n          4 * 9.484024e-13 * pow(T, 3) +\n          4.1635019 / T;\n      else\n        dLnPws =\n          5.8002206e3 / pow(T, 2) -\n          4.8640239e-2 +\n          2 * 4.1764768e-5 * T -\n          3 * 1.4452093e-8 * pow(T, 2) +\n          6.5459673 / T;\n    }\n\n    return dLnPws;\n  };\n\n  // Return dew-point temperature given dry-bulb temperature and vapor pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn. 5 and 6\n  // Notes: the dew point temperature is solved by inverting the equation giving water vapor pressure\n  // at saturation from temperature rather than using the regressions provided\n  // by ASHRAE (eqn. 37 and 38) which are much less accurate and have a\n  // narrower range of validity.\n  // The Newton-Raphson (NR) method is used on the logarithm of water vapour\n  // pressure as a function of temperature, which is a very smooth function\n  // Convergence is usually achieved in 3 to 5 iterations.\n  // TDryBulb is not really needed here, just used for convenience.\n  this.GetTDewPointFromVapPres = function(\n    // (o) Dew Point temperature in °F [IP] or °C [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    VapPres, // (i) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n  ) {\n    // Bounds function of the system of units\n    var BOUNDS; // Domain of validity of the equations\n\n    if (this.isIP()) {\n      BOUNDS = [-148, 392]; // Domain of validity of the equations\n    } else {\n      BOUNDS = [-100, 200]; // Domain of validity of the equations\n    }\n\n    // Bounds outside which a solution cannot be found\n    if (VapPres < this.GetSatVapPres(BOUNDS[0]) || VapPres > this.GetSatVapPres(BOUNDS[1]))\n      throw new Error('Partial pressure of water vapor is outside range of validity of equations');\n\n    // We use NR to approximate the solution.\n    // First guess\n    var TDewPoint = TDryBulb; // Calculated value of dew point temperatures, solved for iteratively in °F [IP] or °C [SI]\n    var lnVP = log(VapPres); // Natural logarithm of partial pressure of water vapor pressure in moist air\n\n    var TDewPoint_iter; // Value of TDewPoint used in NR calculation\n    var lnVP_iter; // Value of log of vapor water pressure used in NR calculation\n    var index = 1;\n    do {\n      // Current point\n      TDewPoint_iter = TDewPoint;\n      lnVP_iter = log(this.GetSatVapPres(TDewPoint_iter));\n\n      // Derivative of function, calculated analytically\n      var d_lnVP = this.dLnPws_(TDewPoint_iter);\n\n      // New estimate, bounded by domain of validity of eqn. 5 and 6\n      TDewPoint = TDewPoint_iter - (lnVP_iter - lnVP) / d_lnVP;\n      TDewPoint = max(TDewPoint, BOUNDS[0]);\n      TDewPoint = min(TDewPoint, BOUNDS[1]);\n\n      if (index > MAX_ITER_COUNT)\n        throw new Error('Convergence not reached in GetTDewPointFromVapPres. Stopping.');\n\n      index++;\n    } while (abs(TDewPoint - TDewPoint_iter) > PSYCHROLIB_TOLERANCE);\n    return min(TDewPoint, TDryBulb);\n  };\n\n  // Return vapor pressure given dew point temperature.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn. 36\n  this.GetVapPresFromTDewPoint = function(\n    // (o) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n    TDewPoint, // (i) Dew point temperature in °F [IP] or °C [SI]\n  ) {\n    return this.GetSatVapPres(TDewPoint);\n  };\n\n  /******************************************************************************************************\n   * Conversions from wet-bulb temperature, dew-point temperature, or relative humidity to humidity ratio\n   *****************************************************************************************************/\n\n  // Return wet-bulb temperature given dry-bulb temperature, humidity ratio, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 33 and 35 solved for Tstar\n  this.GetTWetBulbFromHumRatio = function(\n    // (o) Wet bulb temperature in °F [IP] or °C [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    HumRatio, // (i) Humidity ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    // Declarations\n    var Wstar;\n    var TDewPoint, TWetBulb, TWetBulbSup, TWetBulbInf, BoundedHumRatio;\n    var index = 1;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    TDewPoint = this.GetTDewPointFromHumRatio(TDryBulb, BoundedHumRatio, Pressure);\n\n    // Initial guesses\n    TWetBulbSup = TDryBulb;\n    TWetBulbInf = TDewPoint;\n    TWetBulb = (TWetBulbInf + TWetBulbSup) / 2;\n\n    // Bisection loop\n    while (TWetBulbSup - TWetBulbInf > PSYCHROLIB_TOLERANCE) {\n      // Compute humidity ratio at temperature Tstar\n      Wstar = this.GetHumRatioFromTWetBulb(TDryBulb, TWetBulb, Pressure);\n\n      // Get new bounds\n      if (Wstar > BoundedHumRatio) TWetBulbSup = TWetBulb;\n      else TWetBulbInf = TWetBulb;\n\n      // New guess of wet bulb temperature\n      TWetBulb = (TWetBulbSup + TWetBulbInf) / 2;\n\n      if (index > MAX_ITER_COUNT)\n        throw new Error('Convergence not reached in GetTWetBulbFromHumRatio. Stopping.');\n\n      index++;\n    }\n\n    return TWetBulb;\n  };\n\n  // Return humidity ratio given dry-bulb temperature, wet-bulb temperature, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 33 and 35\n  this.GetHumRatioFromTWetBulb = function(\n    // (o) Humidity Ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    TWetBulb, // (i) Wet bulb temperature in °F [IP] or °C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var Wsstar;\n    var HumRatio = INVALID;\n\n    if (!(TWetBulb <= TDryBulb))\n      throw new Error('Wet bulb temperature is above dry bulb temperature');\n\n    Wsstar = this.GetSatHumRatio(TWetBulb, Pressure);\n\n    if (this.isIP()) {\n      if (TWetBulb >= FREEZING_POINT_WATER_IP)\n        HumRatio =\n          ((1093 - 0.556 * TWetBulb) * Wsstar - 0.24 * (TDryBulb - TWetBulb)) /\n          (1093 + 0.444 * TDryBulb - TWetBulb);\n      else\n        HumRatio =\n          ((1220 - 0.04 * TWetBulb) * Wsstar - 0.24 * (TDryBulb - TWetBulb)) /\n          (1220 + 0.444 * TDryBulb - 0.48 * TWetBulb);\n    } else {\n      if (TWetBulb >= FREEZING_POINT_WATER_SI)\n        HumRatio =\n          ((2501 - 2.326 * TWetBulb) * Wsstar - 1.006 * (TDryBulb - TWetBulb)) /\n          (2501 + 1.86 * TDryBulb - 4.186 * TWetBulb);\n      else\n        HumRatio =\n          ((2830 - 0.24 * TWetBulb) * Wsstar - 1.006 * (TDryBulb - TWetBulb)) /\n          (2830 + 1.86 * TDryBulb - 2.1 * TWetBulb);\n    }\n    // Validity check.\n    return max(HumRatio, MIN_HUM_RATIO);\n  };\n\n  // Return humidity ratio given dry-bulb temperature, relative humidity, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetHumRatioFromRelHum = function(\n    // (o) Humidity Ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    RelHum, // (i) Relative humidity [0-1]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var VapPres;\n\n    if (!(RelHum >= 0 && RelHum <= 1)) throw new Error('Relative humidity is outside range [0,1]');\n\n    VapPres = this.GetVapPresFromRelHum(TDryBulb, RelHum);\n    return this.GetHumRatioFromVapPres(VapPres, Pressure);\n  };\n\n  // Return relative humidity given dry-bulb temperature, humidity ratio, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetRelHumFromHumRatio = function(\n    // (o) Relative humidity [0-1]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    HumRatio, // (i) Humidity ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var VapPres;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n\n    VapPres = this.GetVapPresFromHumRatio(HumRatio, Pressure);\n    return this.GetRelHumFromVapPres(TDryBulb, VapPres);\n  };\n\n  // Return humidity ratio given dew-point temperature and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetHumRatioFromTDewPoint = function(\n    // (o) Humidity Ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n    TDewPoint, // (i) Dew point temperature in °F [IP] or °C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var VapPres;\n\n    VapPres = this.GetSatVapPres(TDewPoint);\n    return this.GetHumRatioFromVapPres(VapPres, Pressure);\n  };\n\n  // Return dew-point temperature given dry-bulb temperature, humidity ratio, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetTDewPointFromHumRatio = function(\n    // (o) Dew Point temperature in °F [IP] or °C [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    HumRatio, // (i) Humidity ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var VapPres;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n\n    VapPres = this.GetVapPresFromHumRatio(HumRatio, Pressure);\n    return this.GetTDewPointFromVapPres(TDryBulb, VapPres);\n  };\n\n  /******************************************************************************************************\n   * Conversions between humidity ratio and vapor pressure\n   *****************************************************************************************************/\n\n  // Return humidity ratio given water vapor pressure and atmospheric pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 20\n  this.GetHumRatioFromVapPres = function(\n    // (o) Humidity Ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n    VapPres, // (i) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var HumRatio;\n\n    if (!(VapPres >= 0))\n      throw new Error('Partial pressure of water vapor in moist air is negative');\n\n    HumRatio = (0.621945 * VapPres) / (Pressure - VapPres);\n\n    // Validity check.\n    return max(HumRatio, MIN_HUM_RATIO);\n  };\n\n  // Return vapor pressure given humidity ratio and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 20 solved for pw\n  this.GetVapPresFromHumRatio = function(\n    // (o) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n    HumRatio, // (i) Humidity ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var VapPres, BoundedHumRatio;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    VapPres = (Pressure * BoundedHumRatio) / (0.621945 + BoundedHumRatio);\n    return VapPres;\n  };\n\n  /******************************************************************************************************\n   * Conversions between humidity ratio and specific humidity\n   *****************************************************************************************************/\n\n  // Return the specific humidity from humidity ratio (aka mixing ratio)\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 9b\n  this.GetSpecificHumFromHumRatio = function(\n    // (o) Specific humidity ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n    HumRatio, // (i) Humidity ratio in lb_H₂O lb_Dry_Air⁻¹ [IP] or kg_H₂O kg_Dry_Air⁻¹ [SI]\n  ) {\n    var BoundedHumRatio;\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    return BoundedHumRatio / (1.0 + BoundedHumRatio);\n  };\n\n  // Return the humidity ratio (aka mixing ratio) from specific humidity\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 9b (solved for humidity ratio)\n  this.GetHumRatioFromSpecificHum = function(\n    // (o) Humidity ratio in lb_H₂O lb_Dry_Air⁻¹ [IP] or kg_H₂O kg_Dry_Air⁻¹ [SI]\n    SpecificHum, // (i) Specific humidity ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n  ) {\n    var HumRatio;\n\n    if (!(SpecificHum >= 0.0 && SpecificHum < 1.0))\n      throw new Error('Specific humidity is outside range [0, 1[');\n\n    HumRatio = SpecificHum / (1.0 - SpecificHum);\n\n    // Validity check\n    return max(HumRatio, MIN_HUM_RATIO);\n  };\n\n  /******************************************************************************************************\n   * Dry Air Calculations\n   *****************************************************************************************************/\n\n  // Return dry-air enthalpy given dry-bulb temperature.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn. 28\n  this.GetDryAirEnthalpy = function(\n    // (o) Dry air enthalpy in Btu lb⁻¹ [IP] or J kg⁻¹ [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n  ) {\n    if (this.isIP()) return 0.24 * TDryBulb;\n    else return 1006 * TDryBulb;\n  };\n\n  // Return dry-air density given dry-bulb temperature and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  // Notes: eqn 14 for the perfect gas relationship for dry air.\n  // Eqn 1 for the universal gas constant.\n  // The factor 144 in IP is for the conversion of Psi = lb in⁻² to lb ft⁻².\n  this.GetDryAirDensity = function(\n    // (o) Dry air density in lb ft⁻³ [IP] or kg m⁻³ [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    if (this.isIP()) return (144 * Pressure) / R_DA_IP / this.GetTRankineFromTFahrenheit(TDryBulb);\n    else return Pressure / R_DA_SI / this.GetTKelvinFromTCelsius(TDryBulb);\n  };\n\n  // Return dry-air volume given dry-bulb temperature and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1.\n  // Notes: eqn 14 for the perfect gas relationship for dry air.\n  // Eqn 1 for the universal gas constant.\n  // The factor 144 in IP is for the conversion of Psi = lb in⁻² to lb ft⁻².\n  this.GetDryAirVolume = function(\n    // (o) Dry air volume ft³ lb⁻¹ [IP] or in m³ kg⁻¹ [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    if (this.isIP())\n      return (R_DA_IP * this.GetTRankineFromTFahrenheit(TDryBulb)) / (144 * Pressure);\n    else return (R_DA_SI * this.GetTKelvinFromTCelsius(TDryBulb)) / Pressure;\n  };\n\n  // Return dry bulb temperature from enthalpy and humidity ratio.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 30.\n  // Notes: based on the `GetMoistAirEnthalpy` function, rearranged for temperature.\n  this.GetTDryBulbFromEnthalpyAndHumRatio = function(\n    // (o) Dry-bulb temperature in °F [IP] or °C [SI]\n    MoistAirEnthalpy, // (i) Moist air enthalpy in Btu lb⁻¹ [IP] or J kg⁻¹\n    HumRatio, // (i) Humidity ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n  ) {\n    var BoundedHumRatio;\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    if (this.isIP())\n      return (MoistAirEnthalpy - 1061.0 * BoundedHumRatio) / (0.24 + 0.444 * BoundedHumRatio);\n    else\n      return (\n        (MoistAirEnthalpy / 1000.0 - 2501.0 * BoundedHumRatio) / (1.006 + 1.86 * BoundedHumRatio)\n      );\n  };\n\n  // Return humidity ratio from enthalpy and dry-bulb temperature.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 30.\n  // Notes: based on the `GetMoistAirEnthalpy` function, rearranged for humidity ratio.\n  this.GetHumRatioFromEnthalpyAndTDryBulb = function(\n    // (o) Humidity ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻\n    MoistAirEnthalpy, // (i) Moist air enthalpy in Btu lb⁻¹ [IP] or J kg⁻¹\n    TDryBulb, // (i) Dry-bulb temperature in °F [IP] or °C [SI]\n  ) {\n    var HumRatio;\n    if (this.isIP()) HumRatio = (MoistAirEnthalpy - 0.24 * TDryBulb) / (1061.0 + 0.444 * TDryBulb);\n    else HumRatio = (MoistAirEnthalpy / 1000.0 - 1.006 * TDryBulb) / (2501.0 + 1.86 * TDryBulb);\n\n    // Validity check.\n    return max(HumRatio, MIN_HUM_RATIO);\n  };\n\n  /******************************************************************************************************\n   * Saturated Air Calculations\n   *****************************************************************************************************/\n\n  // Return saturation vapor pressure given dry-bulb temperature.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn. 5 & 6\n  // Important note: the ASHRAE formulae are defined above and below the freezing point but have\n  // a discontinuity at the freezing point. This is a small inaccuracy on ASHRAE's part: the formulae\n  // should be defined above and below the triple point of water (not the feezing point) in which case\n  // the discontinuity vanishes. It is essential to use the triple point of water otherwise function\n  // GetTDewPointFromVapPres, which inverts the present function, does not converge properly around\n  // the freezing point.\n  this.GetSatVapPres = function(\n    // (o) Vapor Pressure of saturated air in Psi [IP] or Pa [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n  ) {\n    var LnPws, T;\n\n    if (this.isIP()) {\n      if (!(TDryBulb >= -148 && TDryBulb <= 392))\n        throw new Error('Dry bulb temperature is outside range [-148, 392]');\n\n      T = this.GetTRankineFromTFahrenheit(TDryBulb);\n      if (TDryBulb <= TRIPLE_POINT_WATER_IP)\n        LnPws =\n          -1.0214165e4 / T -\n          4.8932428 -\n          5.3765794e-3 * T +\n          1.9202377e-7 * T * T +\n          3.5575832e-10 * pow(T, 3) -\n          9.0344688e-14 * pow(T, 4) +\n          4.1635019 * log(T);\n      else\n        LnPws =\n          -1.0440397e4 / T -\n          1.129465e1 -\n          2.7022355e-2 * T +\n          1.289036e-5 * T * T -\n          2.4780681e-9 * pow(T, 3) +\n          6.5459673 * log(T);\n    } else {\n      if (!(TDryBulb >= -100 && TDryBulb <= 200))\n        throw new Error('Dry bulb temperature is outside range [-100, 200]');\n\n      T = this.GetTKelvinFromTCelsius(TDryBulb);\n      if (TDryBulb <= TRIPLE_POINT_WATER_SI)\n        LnPws =\n          -5.6745359e3 / T +\n          6.3925247 -\n          9.677843e-3 * T +\n          6.2215701e-7 * T * T +\n          2.0747825e-9 * pow(T, 3) -\n          9.484024e-13 * pow(T, 4) +\n          4.1635019 * log(T);\n      else\n        LnPws =\n          -5.8002206e3 / T +\n          1.3914993 -\n          4.8640239e-2 * T +\n          4.1764768e-5 * T * T -\n          1.4452093e-8 * pow(T, 3) +\n          6.5459673 * log(T);\n    }\n\n    return exp(LnPws);\n  };\n\n  // Return humidity ratio of saturated air given dry-bulb temperature and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 36, solved for W\n  this.GetSatHumRatio = function(\n    // (o) Humidity ratio of saturated air in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var SatVaporPres, SatHumRatio;\n\n    SatVaporPres = this.GetSatVapPres(TDryBulb);\n    SatHumRatio = (0.621945 * SatVaporPres) / (Pressure - SatVaporPres);\n\n    // Validity check.\n    return max(SatHumRatio, MIN_HUM_RATIO);\n  };\n\n  // Return saturated air enthalpy given dry-bulb temperature and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetSatAirEnthalpy = function(\n    // (o) Saturated air enthalpy in Btu lb⁻¹ [IP] or J kg⁻¹ [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    return this.GetMoistAirEnthalpy(TDryBulb, this.GetSatHumRatio(TDryBulb, Pressure));\n  };\n\n  /******************************************************************************************************\n   * Moist Air Calculations\n   *****************************************************************************************************/\n\n  // Return Vapor pressure deficit given dry-bulb temperature, humidity ratio, and pressure.\n  // Reference: see Oke (1987) eqn. 2.13a\n  this.GetVaporPressureDeficit = function(\n    // (o) Vapor pressure deficit in Psi [IP] or Pa [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    HumRatio, // (i) Humidity ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var RelHum;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n\n    RelHum = this.GetRelHumFromHumRatio(TDryBulb, HumRatio, Pressure);\n    return this.GetSatVapPres(TDryBulb) * (1 - RelHum);\n  };\n\n  // Return the degree of saturation (i.e humidity ratio of the air / humidity ratio of the air at saturation\n  // at the same temperature and pressure) given dry-bulb temperature, humidity ratio, and atmospheric pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2009) ch. 1 eqn. 12\n  // Notes: the definition is absent from the 2017 Handbook\n  this.GetDegreeOfSaturation = function(\n    // (o) Degree of saturation (unitless)\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    HumRatio, // (i) Humidity ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var BoundedHumRatio;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    return BoundedHumRatio / this.GetSatHumRatio(TDryBulb, Pressure);\n  };\n\n  // Return moist air enthalpy given dry-bulb temperature and humidity ratio.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn. 30\n  this.GetMoistAirEnthalpy = function(\n    // (o) Moist Air Enthalpy in Btu lb⁻¹ [IP] or J kg⁻¹ [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    HumRatio, // (i) Humidity ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n  ) {\n    var BoundedHumRatio;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    if (this.isIP()) return 0.24 * TDryBulb + BoundedHumRatio * (1061 + 0.444 * TDryBulb);\n    else return (1.006 * TDryBulb + BoundedHumRatio * (2501 + 1.86 * TDryBulb)) * 1000;\n  };\n\n  // Return moist air specific volume given dry-bulb temperature, humidity ratio, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn. 26\n  // Notes: in IP units, R_DA_IP / 144 equals 0.370486 which is the coefficient appearing in eqn 26.\n  // The factor 144 is for the conversion of Psi = lb in⁻² to lb ft⁻².\n  this.GetMoistAirVolume = function(\n    // (o) Specific Volume ft³ lb⁻¹ [IP] or in m³ kg⁻¹ [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    HumRatio, // (i) Humidity ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var BoundedHumRatio;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    if (this.isIP())\n      return (\n        (R_DA_IP * this.GetTRankineFromTFahrenheit(TDryBulb) * (1 + 1.607858 * BoundedHumRatio)) /\n        (144 * Pressure)\n      );\n    else\n      return (\n        (R_DA_SI * this.GetTKelvinFromTCelsius(TDryBulb) * (1 + 1.607858 * BoundedHumRatio)) /\n        Pressure\n      );\n  };\n\n  // Return dry-bulb temperature given moist air specific volume, humidity ratio, and pressure.\n  // Reference:\n  // ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 26\n  // Notes:\n  // In IP units, R_DA_IP / 144 equals 0.370486 which is the coefficient appearing in eqn 26\n  // The factor 144 is for the conversion of Psi = lb in⁻² to lb ft⁻².\n  // Based on the `GetMoistAirVolume` function, rearranged for dry-bulb temperature.\n  this.GetTDryBulbFromMoistAirVolumeAndHumRatio = function(\n    // (o) Dry-bulb temperature in °F [IP] or °C [SI]\n    MoistAirVolume, // (i) Specific volume of moist air in ft³ lb⁻¹ of dry air [IP] or in m³ kg⁻¹ of dry air [SI]\n    HumRatio, // (i) Humidity ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var BoundedHumRatio;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    if (this.isIP())\n      return this.GetTFahrenheitFromTRankine(\n        (MoistAirVolume * (144 * Pressure)) / (R_DA_IP * (1 + 1.607858 * BoundedHumRatio)),\n      );\n    else\n      return this.GetTCelsiusFromTKelvin(\n        (MoistAirVolume * Pressure) / (R_DA_SI * (1 + 1.607858 * BoundedHumRatio)),\n      );\n  };\n\n  // Return moist air density given humidity ratio, dry bulb temperature, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn. 11\n  this.GetMoistAirDensity = function(\n    // (o) Moist air density in lb ft⁻³ [IP] or kg m⁻³ [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    HumRatio, // (i) Humidity ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var BoundedHumRatio;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    return (1 + BoundedHumRatio) / this.GetMoistAirVolume(TDryBulb, BoundedHumRatio, Pressure);\n  };\n\n  /******************************************************************************************************\n   * Standard atmosphere\n   *****************************************************************************************************/\n\n  // Return standard atmosphere barometric pressure, given the elevation (altitude).\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 3\n  this.GetStandardAtmPressure = function(\n    // (o) Standard atmosphere barometric pressure in Psi [IP] or Pa [SI]\n    Altitude, // (i) Altitude in ft [IP] or m [SI]\n  ) {\n    var Pressure;\n\n    if (this.isIP()) Pressure = 14.696 * pow(1 - 6.8754e-6 * Altitude, 5.2559);\n    else Pressure = 101325 * pow(1 - 2.25577e-5 * Altitude, 5.2559);\n    return Pressure;\n  };\n\n  // Return standard atmosphere temperature, given the elevation (altitude).\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 4\n  this.GetStandardAtmTemperature = function(\n    // (o) Standard atmosphere dry bulb temperature in °F [IP] or °C [SI]\n    Altitude, // (i) Altitude in ft [IP] or m [SI]\n  ) {\n    var Temperature;\n    if (this.isIP()) Temperature = 59 - 0.0035662 * Altitude;\n    else Temperature = 15 - 0.0065 * Altitude;\n    return Temperature;\n  };\n\n  // Return sea level pressure given dry-bulb temperature, altitude above sea level and pressure.\n  // Reference: Hess SL, Introduction to theoretical meteorology, Holt Rinehart and Winston, NY 1959,\n  // ch. 6.5; Stull RB, Meteorology for scientists and engineers, 2nd edition,\n  // Brooks/Cole 2000, ch. 1.\n  // Notes: the standard procedure for the US is to use for TDryBulb the average\n  // of the current station temperature and the station temperature from 12 hours ago.\n  this.GetSeaLevelPressure = function(\n    // (o) Sea level barometric pressure in Psi [IP] or Pa [SI]\n    StnPressure, // (i) Observed station pressure in Psi [IP] or Pa [SI]\n    Altitude, // (i) Altitude above sea level in ft [IP] or m [SI]\n    TDryBulb, // (i) Dry bulb temperature ft³ lb⁻¹ [IP] or in m³ kg⁻¹ [SI]\n  ) {\n    var TColumn, H;\n    if (this.isIP()) {\n      // Calculate average temperature in column of air, assuming a lapse rate\n      // of 3.6 °F/1000ft\n      TColumn = TDryBulb + (0.0036 * Altitude) / 2;\n\n      // Determine the scale height\n      H = 53.351 * this.GetTRankineFromTFahrenheit(TColumn);\n    } else {\n      // Calculate average temperature in column of air, assuming a lapse rate\n      // of 6.5 °C/km\n      TColumn = TDryBulb + (0.0065 * Altitude) / 2;\n\n      // Determine the scale height\n      H = (287.055 * this.GetTKelvinFromTCelsius(TColumn)) / 9.807;\n    }\n\n    // Calculate the sea level pressure\n    var SeaLevelPressure = StnPressure * exp(Altitude / H);\n    return SeaLevelPressure;\n  };\n\n  // Return station pressure from sea level pressure\n  // Reference: see 'GetSeaLevelPressure'\n  // Notes: this function is just the inverse of 'GetSeaLevelPressure'.\n  this.GetStationPressure = function(\n    // (o) Station pressure in Psi [IP] or Pa [SI]\n    SeaLevelPressure, // (i) Sea level barometric pressure in Psi [IP] or Pa [SI]\n    Altitude, // (i) Altitude above sea level in ft [IP] or m [SI]\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n  ) {\n    return SeaLevelPressure / this.GetSeaLevelPressure(1, Altitude, TDryBulb);\n  };\n\n  /******************************************************************************************************\n   * Functions to set all psychrometric values\n   *****************************************************************************************************/\n\n  // Utility function to calculate humidity ratio, dew-point temperature, relative humidity,\n  // vapour pressure, moist air enthalpy, moist air volume, and degree of saturation of air given\n  // dry-bulb temperature, wet-bulb temperature, and pressure.\n  this.CalcPsychrometricsFromTWetBulb = function(\n    /**\n     * HumRatio            // (o) Humidity ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n     * TDewPoint           // (o) Dew point temperature in °F [IP] or °C [SI]\n     * RelHum              // (o) Relative humidity [0-1]\n     * VapPres             // (o) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n     * MoistAirEnthalpy    // (o) Moist air enthalpy in Btu lb⁻¹ [IP] or J kg⁻¹ [SI]\n     * MoistAirVolume      // (o) Specific volume ft³ lb⁻¹ [IP] or in m³ kg⁻¹ [SI]\n     * DegreeOfSaturation  // (o) Degree of saturation [unitless]\n     */\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    TWetBulb, // (i) Wet bulb temperature in °F [IP] or °C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var HumRatio = this.GetHumRatioFromTWetBulb(TDryBulb, TWetBulb, Pressure);\n    var TDewPoint = this.GetTDewPointFromHumRatio(TDryBulb, HumRatio, Pressure);\n    var RelHum = this.GetRelHumFromHumRatio(TDryBulb, HumRatio, Pressure);\n    var VapPres = this.GetVapPresFromHumRatio(HumRatio, Pressure);\n    var MoistAirEnthalpy = this.GetMoistAirEnthalpy(TDryBulb, HumRatio);\n    var MoistAirVolume = this.GetMoistAirVolume(TDryBulb, HumRatio, Pressure);\n    var DegreeOfSaturation = this.GetDegreeOfSaturation(TDryBulb, HumRatio, Pressure);\n    return [\n      HumRatio,\n      TDewPoint,\n      RelHum,\n      VapPres,\n      MoistAirEnthalpy,\n      MoistAirVolume,\n      DegreeOfSaturation,\n    ];\n  };\n\n  // Utility function to calculate humidity ratio, wet-bulb temperature, relative humidity,\n  // vapour pressure, moist air enthalpy, moist air volume, and degree of saturation of air given\n  // dry-bulb temperature, dew-point temperature, and pressure.\n  this.CalcPsychrometricsFromTDewPoint = function(\n    /**\n     * HumRatio            // (o) Humidity ratio in lb_H₂O lb_Air⁻¹ [IP] or kg_H₂O kg_Air⁻¹ [SI]\n     * TWetBulb            // (o) Wet bulb temperature in °F [IP] or °C [SI]\n     * RelHum              // (o) Relative humidity [0-1]\n     * VapPres             // (o) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n     * MoistAirEnthalpy    // (o) Moist air enthalpy in Btu lb⁻¹ [IP] or J kg⁻¹ [SI]\n     * MoistAirVolume      // (o) Specific volume ft³ lb⁻¹ [IP] or in m³ kg⁻¹ [SI]\n     * DegreeOfSaturation  // (o) Degree of saturation [unitless]\n     */\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    TDewPoint, // (i) Dew point temperature in °F [IP] or °C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var HumRatio = this.GetHumRatioFromTDewPoint(TDewPoint, Pressure);\n    var TWetBulb = this.GetTWetBulbFromHumRatio(TDryBulb, HumRatio, Pressure);\n    var RelHum = this.GetRelHumFromHumRatio(TDryBulb, HumRatio, Pressure);\n    var VapPres = this.GetVapPresFromHumRatio(HumRatio, Pressure);\n    var MoistAirEnthalpy = this.GetMoistAirEnthalpy(TDryBulb, HumRatio);\n    var MoistAirVolume = this.GetMoistAirVolume(TDryBulb, HumRatio, Pressure);\n    var DegreeOfSaturation = this.GetDegreeOfSaturation(TDryBulb, HumRatio, Pressure);\n    return [\n      HumRatio,\n      TWetBulb,\n      RelHum,\n      VapPres,\n      MoistAirEnthalpy,\n      MoistAirVolume,\n      DegreeOfSaturation,\n    ];\n  };\n\n  // Utility function to calculate humidity ratio, wet-bulb temperature, dew-point temperature,\n  // vapour pressure, moist air enthalpy, moist air volume, and degree of saturation of air given\n  // dry-bulb temperature, relative humidity and pressure.\n  this.CalcPsychrometricsFromRelHum = function(\n    /**\n     * HumRatio            // (o) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n     * TWetBulb            // (o) Wet bulb temperature in °F [IP] or °C [SI]\n     * TDewPoint           // (o) Dew point temperature in °F [IP] or °C [SI]\n     * VapPres             // (o) Partial pressure of water vapor in moist air [Psi]\n     * MoistAirEnthalpy    // (o) Moist air enthalpy in Btu lb⁻¹ [IP] or J kg⁻¹ [SI]\n     * MoistAirVolume      // (o) Specific volume ft³ lb⁻¹ [IP] or in m³ kg⁻¹ [SI]\n     * DegreeOfSaturation  // (o) Degree of saturation [unitless]\n     */\n    TDryBulb, // (i) Dry bulb temperature in °F [IP] or °C [SI]\n    RelHum, // (i) Relative humidity [0-1]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var HumRatio = this.GetHumRatioFromRelHum(TDryBulb, RelHum, Pressure);\n    var TWetBulb = this.GetTWetBulbFromHumRatio(TDryBulb, HumRatio, Pressure);\n    var TDewPoint = this.GetTDewPointFromHumRatio(TDryBulb, HumRatio, Pressure);\n    var VapPres = this.GetVapPresFromHumRatio(HumRatio, Pressure);\n    var MoistAirEnthalpy = this.GetMoistAirEnthalpy(TDryBulb, HumRatio);\n    var MoistAirVolume = this.GetMoistAirVolume(TDryBulb, HumRatio, Pressure);\n    var DegreeOfSaturation = this.GetDegreeOfSaturation(TDryBulb, HumRatio, Pressure);\n    return [\n      HumRatio,\n      TWetBulb,\n      TDewPoint,\n      VapPres,\n      MoistAirEnthalpy,\n      MoistAirVolume,\n      DegreeOfSaturation,\n    ];\n  };\n};\n\nmodule.exports = psychrolib;\n","import axios from 'axios';\nimport { IPoint } from 'influx';\nimport * as moment from 'moment-timezone';\nimport config from '../../../config';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport SettingUtils from '../../utils/setting-utils';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport SystemUtils from '../system/system-utils';\n\nconst Influx = require('influx');\n\nenum HistoryMode {\n  COV = 0,\n  PERIODIC = 1,\n  TRIGGER_ONLY = 2,\n}\n\nenum DataBaseType {\n  POSTGRES = 0,\n  InfluxDB = 1,\n}\n\nexport default class HistoryBase extends Node {\n  // dynamically calculate position when starting\n  histTriggerInput: number;\n  clearStoredHisInput: number;\n  tableNameInput: number;\n  pointNameInput: number;\n  histErrorOutput: number;\n  storedHistCountOutput: number;\n  lastHistExportOutput: number;\n  // configurable parameters from each extended node for extracting values to store on DB\n  valueInput: number;\n  takeValueFromInput: boolean;\n  // extra parameter for nodes\n  interval: number = -1;\n  timeoutFunc: any;\n  dynamicInputStartPosition: number = 2;\n  alarmCount: number = 0;\n  tagCount: number = 0;\n  lastTrigger: boolean = false;\n\n  addHistoryConfiguration() {\n    this.addInput('histTrigger', Type.BOOLEAN);\n    this.addInput('clearStoredHis', Type.BOOLEAN);\n    this.addOutput('histError', Type.ANY);\n    this.addOutput('storedHistCount', Type.NUMBER);\n    this.addOutput('lastHistExport', Type.STRING);\n\n    /**\n     * History settings\n     */\n    this.settings['history_group'] = NodeSetting.create({\n      description: 'History Settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['databaseType'] = NodeSetting.create({\n      description: 'Database Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: DataBaseType.POSTGRES, text: 'Postgres' },\n          // { value: DataBaseType.InfluxDB, text: 'InfluxDB' },\n        ],\n      },\n      value: DataBaseType.POSTGRES,\n    });\n    this.settings['enable'] = NodeSetting.create({\n      description: 'History Enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    // THESE SETTINGS FOR INFLUX HISTORY STORAGE -----------------\n    this.settings['tableName'] = NodeSetting.create({\n      description: 'Measurement Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n    // END OF INFLUX SPECIFIC SETTINGS ---------------------------\n\n    this.addInputWithSettings('pointName', Type.STRING, '', 'Point Name');\n    this.settings['historyMode'] = NodeSetting.create({\n      description: 'History Logging Mode',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: HistoryMode.COV, text: 'Change Of Value (COV)' },\n          { value: HistoryMode.PERIODIC, text: 'Periodic' },\n          { value: HistoryMode.TRIGGER_ONLY, text: 'Trigger Only' },\n        ],\n      },\n      value: HistoryMode.COV,\n    });\n    this.settings['dataType'] = NodeSetting.create({\n      description: 'Data type for storing',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: Type.NUMBER, text: 'Number' },\n          { value: Type.BOOLEAN, text: 'Boolean' },\n          { value: Type.STRING, text: 'String' },\n        ],\n      },\n      value: Type.NUMBER,\n    });\n    this.settings['threshold'] = NodeSetting.create({\n      description: 'COV Threshold',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.settings['period'] = NodeSetting.create({\n      description: 'Logging Interval',\n      value: 15,\n      type: SettingType.NUMBER,\n    });\n    this.settings['periodUnits'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.MILLISECONDS, text: 'Milliseconds' },\n          { value: TIME_TYPE.SECONDS, text: 'Seconds' },\n          { value: TIME_TYPE.MINUTES, text: 'Minutes' },\n          { value: TIME_TYPE.HOURS, text: 'Hours' },\n        ],\n      },\n      value: TIME_TYPE.MINUTES,\n    });\n    this.settings['storage-limit'] = NodeSetting.create({\n      description: 'Local Storage Limit (Max 50)',\n      value: 25,\n      type: SettingType.NUMBER,\n    });\n    this.settings['minuteRoundValue'] = NodeSetting.create({\n      description: 'Round minutes up in increments of',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.settings['decimals'] = NodeSetting.create({\n      description: 'Decimal Places (Limit 5)',\n      value: 3,\n      type: SettingType.NUMBER,\n    });\n    this.settings['timeAsString'] = NodeSetting.create({\n      description: 'Display Timestamp as',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: false, text: 'Numeric' },\n          { value: true, text: 'String' },\n        ],\n      },\n      value: true,\n    });\n\n    /**\n     * Alarm settings\n     */\n    this.settings['alarm_group'] = NodeSetting.create({\n      description: 'Alarm Settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['alarms_count'] = NodeSetting.create({\n      description: 'Alarms Count (Max 10)',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n\n    /**\n     * Tag settings\n     */\n    this.settings['tags_group'] = NodeSetting.create({\n      description: 'Tag Settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['tags_count'] = NodeSetting.create({\n      description: 'Tag Count (Max 10)',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.properties['obj'] = [];\n  }\n\n  setup() {\n    this.addHistoryConfiguration();\n  }\n\n  init(properties) {\n    this.historyFunctionsForAfterSettingsChange(properties['settings'], false);\n    this.lastTrigger = false;\n  }\n\n  /**\n   * When databaseType is selected as POSTGRES it needs to have an extra input tableName\n   * @param settings {object} settings configuration\n   */\n  private changeInputDynamically(settings) {\n    this.assignInputsOutputs();\n    if (this.tableNameInput === -1 && settings['databaseType'].value === DataBaseType.InfluxDB) {\n      if (this.pointNameInput) this.removeInput(this.pointNameInput);\n      this.addInput('[tableName]', Type.STRING, { exist: true, nullable: false, hidden: false });\n      this.addInput('[pointName]', Type.STRING, { exist: true, nullable: false, hidden: false });\n    } else if (this.tableNameInput !== -1 && settings['databaseType'].value === DataBaseType.POSTGRES) {\n      if (this.pointNameInput) this.removeInput(this.pointNameInput);\n      this.removeInput(this.tableNameInput);\n      this.addInput('[pointName]', Type.STRING, { exist: true, nullable: false, hidden: false });\n    }\n  }\n\n  onAdded() {\n    this.assignInputsOutputs();\n    this.resetOutputs();\n    this.doPeriodicHistoryFunctions();\n  }\n\n  async onInputUpdated() {\n    if (this.getInputData(this.clearStoredHisInput)) {\n      this.properties['obj'] = [];\n      this.updateHistoryCountOutput();\n    }\n    await this.doNonPeriodicHistoryFunctions();\n  }\n\n  async onAfterSettingsChange() {\n    this.historyFunctionsForAfterSettingsChange();\n    await this.doNonPeriodicHistoryFunctions();\n    this.doPeriodicHistoryFunctions();\n  }\n\n  onRemoved() {\n    clearInterval(this.timeoutFunc);\n  }\n\n  assignInputsOutputs() {\n    this.tableNameInput = -1;\n    this.pointNameInput = -1;\n    for (let input in this.inputs) {\n      if (this.inputs.hasOwnProperty(input)) {\n        if (this.inputs[input].name == 'histTrigger') this.histTriggerInput = Number(input);\n        if (this.inputs[input].name == 'clearStoredHis') this.clearStoredHisInput = Number(input);\n        if (this.inputs[input].name == '[tableName]') this.tableNameInput = Number(input);\n        if (this.inputs[input].name == '[pointName]') this.pointNameInput = Number(input);\n      }\n    }\n\n    for (let output in this.outputs) {\n      if (this.outputs.hasOwnProperty(output)) {\n        if (this.outputs[output].name == 'histError') this.histErrorOutput = Number(output);\n        else if (this.outputs[output].name == 'storedHistCount') this.storedHistCountOutput = Number(output);\n        else if (this.outputs[output].name == 'lastHistExport') this.lastHistExportOutput = Number(output);\n      }\n    }\n  }\n\n  addHistorySettingsConfig(valueInput: number = 0, takeValueFromInput: boolean = true) {\n    if (!this.settingConfigs.hasOwnProperty('groups') || !this.settingConfigs.hasOwnProperty('conditions')) {\n      this.setSettingsConfig({\n        groups: this.settingConfigs['groups'] || [],\n        conditions: this.settingConfigs['conditions'] || {},\n      });\n    }\n    this.settingConfigs.groups.push({ period: { weight: 2 }, periodUnits: {} });\n    this.settingConfigs.conditions['tableName'] = setting => {\n      return setting['databaseType'].value === DataBaseType.InfluxDB;\n    };\n    this.settingConfigs.conditions['threshold'] = setting => {\n      return setting['historyMode'].value === HistoryMode.COV;\n    };\n    this.settingConfigs.conditions['period'] = setting => {\n      return setting['historyMode'].value === HistoryMode.PERIODIC;\n    };\n    this.settingConfigs.conditions['periodUnits'] = setting => {\n      return setting['historyMode'].value === HistoryMode.PERIODIC;\n    };\n    this.settingConfigs.conditions['alarms_count'] = setting => {\n      return setting['databaseType'].value === DataBaseType.InfluxDB;\n    };\n    this.settingConfigs.conditions['tags_count'] = setting => {\n      return setting['databaseType'].value === DataBaseType.InfluxDB;\n    };\n\n    this.valueInput = valueInput;\n    this.takeValueFromInput = takeValueFromInput;\n  }\n\n  resetOutputs() {\n    this.updateHistoryCountOutput();\n  }\n\n  async doNonPeriodicHistoryFunctions() {\n    if (this.side !== Side.server) return;\n    if (!this.settings['enable'].value) return;\n    let input = null;\n    if (this.takeValueFromInput) {\n      input = this.getInputData(this.valueInput);\n    } else {\n      input = this.outputs[this.valueInput].data;\n    }\n\n    if (this.checkTriggered()) {\n      await this.storeLogEntry(input);\n    } else if (this.checkCOV(input)) {\n      await this.storeLogEntry(input);\n    }\n\n    if (this.properties['obj'].length > 0) await this.trySendStoredData();\n  }\n\n  async trySendStoredData() {\n    let decimals = this.settings['decimals'].value;\n    decimals = Utils.clamp(decimals, 0, 5);\n\n    const points: IPoint[] = [];\n    this.properties['obj'].forEach(log => {\n      const dataType = this.settings['dataType'].value;\n      log.payload = this.convertInput(log.payload, dataType, decimals);\n\n      const tagList = {};\n      tagList['point'] = this.getInputData(this.pointNameInput) || 'undefined';\n      Object.keys(log).map(key => {\n        if (key !== 'payload' && key !== 'timestamp' && key !== 'tags') {\n          tagList[key] = log[key];\n        }\n      });\n      for (let i = 0; i < 10; i++) {\n        tagList['tag' + (i + 1)] = log['tags'][i] || null;\n      }\n      points.push({\n        measurement: this.getInputData(this.tableNameInput),\n        fields: { val: log.payload },\n        timestamp: moment(log.timestamp).valueOf() * 1000000, // it only supports unix nano seconds dates\n        tags: tagList,\n      });\n    });\n\n    //////////////////////////////////////////////////////////////////////////\n    // This section should be replaced with the history storage mode of choice.\n    let errorFlag = false;\n    if (this.settings['databaseType'].value === DataBaseType.POSTGRES) {\n      // For Multiple points in 1 push\n      let clientIdFromPlat;\n      let deviceIdFromPlat;\n      try {\n        clientIdFromPlat = await SystemUtils.getClientIdDb();\n      } catch (e) {\n        clientIdFromPlat = 'unknownClientID';\n      }\n      try {\n        deviceIdFromPlat = await SystemUtils.getDeviceIdDb();\n      } catch (e) {\n        deviceIdFromPlat = 'unknownDeviceID';\n      }\n      const multiPointPost = points.map(point => ({\n        deviceid: deviceIdFromPlat,\n        clientid: clientIdFromPlat,\n        val: point.fields.val,\n        point: point.tags.point,\n        ts: moment(Number(point.timestamp) / 1000000).toISOString(), // we can do better than this\n      }));\n\n      const that = this;\n      const pgUrl = config.pg.baseURL;\n      try {\n        await axios({\n          method: 'post',\n          url: pgUrl,\n          data: multiPointPost,\n        });\n      } catch (error) {\n        this.setOutputData(that.histErrorOutput, String(error));\n        errorFlag = true;\n      }\n    } else if (DataBaseType.InfluxDB === DataBaseType.InfluxDB) {\n      const writeOptions = {};\n\n      const { protocol, host, port, databaseName, username, password } = config.influxDb;\n      const client = new Influx.InfluxDB({\n        host,\n        port,\n        protocol: protocol === 'https' ? 'https' : 'http',\n        database: databaseName,\n        username,\n        password,\n      });\n      try {\n        await client.writePoints(points, writeOptions);\n      } catch (err) {\n        this.setOutputData(this.histErrorOutput, String(err));\n        this.debugErr(err);\n        errorFlag = true;\n      }\n    }\n    /////////////////////////////////////////////////////////////\n\n    if (!errorFlag) {\n      this.properties['obj'] = [];\n      this.setOutputData(this.histErrorOutput, '');\n      this.settings['timeAsString'].value\n        ? this.setOutputData(this.lastHistExportOutput, moment().format(), true)\n        : this.setOutputData(this.lastHistExportOutput, moment().valueOf(), true);\n      this.updateHistoryCountOutput();\n    }\n  }\n\n  /**\n   * After settings changes this method needs to call\n   * @param configSettings {object}, if we want to set different settings name in input\n   * @param save {boolean}, need to persist the changes or not; when save = false, it needs to save later\n   */\n  historyFunctionsForAfterSettingsChange(configSettings = null, save: boolean = true) {\n    this.changeInputDynamically(configSettings || this.settings);\n    this.assignInputsOutputs();\n    if (this.settings['databaseType'].value === DataBaseType.POSTGRES) {\n      this.settings['alarms_count'].value = 0;\n      this.settings['tags_count'].value = 0;\n    }\n    this.dynamicInputStartPosition = this.pointNameInput + 1;\n    this.changeAlarmsCount(this.settings['alarms_count'].value);\n    this.renameAlarmInputs(configSettings);\n    this.changeTagsCount(this.settings['tags_count'].value);\n    if (save) {\n      this.persistProperties(true, false, true, false);\n    }\n  }\n\n  async storeLogEntry(input) {\n    if (input == null) return;\n    // cap the amount of data that can be stored\n    const storageLimit = Utils.clamp(this.settings['storage-limit'].value, 0, 50);\n    const minuteRound = Utils.clamp(this.settings['minuteRoundValue'].value, 0, 60);\n    const now = minuteRound ? TimeUtils.nearestFutureMinutes(minuteRound, moment()) : moment();\n    // object data\n    const msg = {\n      payload: input,\n      timestamp: now.toISOString(),\n    };\n    // add alarm values\n    for (let i = this.dynamicInputStartPosition; i < this.dynamicInputStartPosition + this.alarmCount; i++) {\n      let alarmNum = i - this.dynamicInputStartPosition + 1;\n      let alarmName = this.settings['alarm' + alarmNum].value || 'alarm' + alarmNum;\n      msg[alarmName] = this.getInputData(i) || 'null';\n    }\n    // add tags\n    const tags = [];\n    let j = 1;\n    while (j <= this.tagCount) {\n      if (this.settings['tag' + j].value) tags.push(this.settings['tag' + j].value);\n      j++;\n    }\n    msg['tags'] = tags;\n\n    // build an object\n    this.properties['obj'].push(msg);\n    while (this.properties['obj'].length > storageLimit) {\n      this.properties['obj'].shift();\n    }\n    this.properties['lastHistoryValue'] = input;\n    this.persistProperties(false, true, false, false);\n    this.updateHistoryCountOutput();\n  }\n\n  checkTriggered() {\n    const trigger = this.getInputData(this.histTriggerInput) || false;\n    const result = this.inputs[this.histTriggerInput].updated && trigger && !this.lastTrigger;\n    this.lastTrigger = trigger;\n    return result;\n  }\n\n  checkCOV(input) {\n    if (this.settings['historyMode'].value === HistoryMode.COV) {\n      const threshold = this.settings['threshold'].value;\n      if (!isNaN(input) && !isNaN(this.properties['lastHistoryValue'])) {\n        return Math.abs(Number(input) - Number(this.properties['lastHistoryValue'])) >= threshold;\n      } else {\n        return input !== this.properties['lastHistoryValue'];\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Sets values in periodic period when HistoryMode is `PERIODIC`\n   */\n  doPeriodicHistoryFunctions() {\n    if (this.side !== Side.server) return;\n    const enable = this.settings['enable'].value;\n    const isPeriodic = this.settings['historyMode'].value === HistoryMode.PERIODIC;\n    if (!enable || !isPeriodic) {\n      if (this.timeoutFunc) {\n        this.interval = -1;\n        clearInterval(this.timeoutFunc);\n        this.debugInfo('Clearing Periodic interval data insertion...');\n      }\n    }\n    if (enable && isPeriodic) {\n      const interval = TimeUtils.timeConvert(this.settings['period'].value, this.settings['periodUnits'].value);\n      if (this.interval !== interval) {\n        clearInterval(this.timeoutFunc);\n        this.timeoutFunc = setInterval(async () => {\n          let input = null;\n          if (this.takeValueFromInput) input = this.getInputData(this.valueInput);\n          else input = this.outputs[this.valueInput].data;\n          await this.storeLogEntry(input);\n          if (this.properties['obj'].length > 0) await this.trySendStoredData();\n        }, interval);\n        this.interval = interval;\n        this.debugInfo(`Setting Periodic Period of: ${interval} ms`);\n      }\n    }\n  }\n\n  changeAlarmsCount(targetCount) {\n    targetCount = Utils.clamp(targetCount, 0, 10);\n    this.settings['alarms_count'].value = targetCount;\n    let diff = targetCount - this.alarmCount;\n    if (diff == 0) return;\n\n    // add inputs\n    this.changeInputsCount(targetCount + this.dynamicInputStartPosition, Type.STRING);\n\n    // change settings for topics\n    const alarmsToAdd = {};\n    if (diff > 0) {\n      for (let i = this.alarmCount + 1; i <= targetCount; i++) {\n        alarmsToAdd['alarm' + i] = {\n          description: 'Alarm ' + i,\n          value: '',\n          type: SettingType.STRING,\n        };\n      }\n      // for making things consistent on UI settings side\n      this.settings = SettingUtils.insertIntoObjectAtPosition(\n        this.settings,\n        alarmsToAdd,\n        this.alarmCount == 0 ? 'alarms_count' : 'alarm' + this.alarmCount,\n      );\n    } else if (diff < 0) {\n      for (let i = this.alarmCount; i > targetCount; i--) {\n        delete this.settings['alarm' + i];\n      }\n    }\n    this.alarmCount = targetCount;\n  }\n\n  renameAlarmInputs(configSettings) {\n    for (let i = 1; i <= this.alarmCount; i++) {\n      let alarm = this.settings['alarm' + i].value;\n      if (!alarm && configSettings) {\n        alarm = (configSettings['alarm' + i] && configSettings['alarm' + i].value) || '';\n      }\n      if (alarm.length > 20) alarm = '...' + alarm.substr(alarm.length - 20, 20);\n      this.inputs[this.dynamicInputStartPosition + i - 1].name = 'alarm' + i + ' | ' + alarm;\n    }\n  }\n\n  changeTagsCount(targetCount) {\n    targetCount = Utils.clamp(targetCount, 0, 10);\n    this.settings['tags_count'].value = targetCount;\n    let diff = targetCount - this.tagCount;\n    if (diff == 0) return;\n\n    // change settings for topics\n    const tagsToAdd = {};\n    if (diff > 0) {\n      for (let i = this.tagCount + 1; i <= targetCount; i++) {\n        tagsToAdd['tag' + i] = {\n          description: 'Tag ' + i,\n          value: '',\n          type: SettingType.STRING,\n        };\n      }\n      // for making things consistent on UI settings side\n      this.settings = SettingUtils.insertIntoObjectAtPosition(\n        this.settings,\n        tagsToAdd,\n        this.tagCount === 0 ? 'tags_count' : 'tag' + this.tagCount,\n      );\n    } else if (diff < 0) {\n      for (let i = this.tagCount; i > targetCount; i--) {\n        delete this.settings['tag' + i];\n      }\n    }\n    this.tagCount = targetCount;\n  }\n\n  updateHistoryCountOutput() {\n    this.setOutputData(this.storedHistCountOutput, (this.properties['obj'] && this.properties['obj'].length) || 0);\n  }\n}\n","import { Colors, create } from 'logplease';\nimport * as Bacnet from 'node-bacnet';\nimport { PromiseActor } from '../../../../promise-actor';\nimport {\n  ADD_DEVICE,\n  ADD_POINT,\n  GET_BACNET_CLIENT,\n  GET_NETWORK_NODE,\n  GET_POINTS,\n  GET_PRESENT_VALUE,\n  REMOVE_DEVICE,\n  REMOVE_POINT,\n  SEND_PAYLOAD_TO_CHILD,\n  SEND_POINT_VALUE,\n  WRITE_PRESENT_VALUE,\n} from './bacnet-constant';\nimport { DeviceObject } from './interface';\n\nconst logger = create('bacnet-utils', { color: Colors.Grey });\n\nexport const singleton = new PromiseActor();\n\nexport default class BacnetUtils {\n  static getBacnetClient(networkNode): Bacnet {\n    if (networkNode && networkNode['subscribe']) {\n      return networkNode['subscribe'](this.createMessage(GET_BACNET_CLIENT));\n    } else {\n      logger.error('Network Node is not available on getBacnetClient');\n      return null;\n    }\n  }\n\n  static getPoints(deviceNode): Array<DeviceObject> {\n    if (deviceNode && deviceNode['subscribe']) {\n      return deviceNode['subscribe'](this.createMessage(GET_POINTS));\n    } else {\n      logger.error('Device Node is not available on getPoints');\n      return [];\n    }\n  }\n\n  static getPresentValue(deviceNode, payload): Promise<any> {\n    if (deviceNode && deviceNode['subscribe']) {\n      return deviceNode['subscribe'](this.createMessage(GET_PRESENT_VALUE, payload));\n    } else {\n      logger.error('Device Node is not available on getPresentValue');\n      return null;\n    }\n  }\n\n  static writePresentValue(deviceNode, payload) {\n    if (deviceNode && deviceNode['subscribe']) {\n      deviceNode['subscribe'](this.createMessage(WRITE_PRESENT_VALUE, payload));\n    } else {\n      logger.error('Device Node is not available on writePresentValue');\n    }\n  }\n\n  static getNetworkNode(parentNode): any {\n    if (parentNode && parentNode['subscribe']) {\n      return parentNode['subscribe'](this.createMessage(GET_NETWORK_NODE));\n    } else {\n      logger.error('Parent Node is not available on getNetworkNode');\n      return null;\n    }\n  }\n\n  static sendPayloadToChild(childNode, payload) {\n    if (childNode && childNode['subscribe']) {\n      childNode['subscribe'](this.createMessage(SEND_PAYLOAD_TO_CHILD, payload));\n    } else {\n      logger.error('Child Node is not available on sendPayloadToChild');\n    }\n  }\n\n  static sendPointValue(pointNode, payload) {\n    if (pointNode && pointNode['subscribe']) {\n      pointNode['subscribe'](this.createMessage(SEND_POINT_VALUE, payload));\n    } else {\n      logger.error('Point Node is not available on sendPointValue');\n    }\n  }\n\n  static addDevice(networkNode, payload) {\n    if (networkNode && networkNode['subscribe']) {\n      networkNode['subscribe'](this.createMessage(ADD_DEVICE, payload));\n    } else {\n      logger.error('Network Node is not available on addDevice');\n    }\n  }\n\n  static removeDevice(networkNode, payload) {\n    if (networkNode && networkNode['subscribe']) {\n      networkNode['subscribe'](this.createMessage(REMOVE_DEVICE, payload));\n    } else {\n      logger.error('Network Node is not available on removeDevice');\n    }\n  }\n\n  static addPoint(deviceNode, payload) {\n    if (deviceNode && deviceNode['subscribe']) {\n      deviceNode['subscribe'](this.createMessage(ADD_POINT, payload));\n    } else {\n      logger.error('Device Node is not available on addPoint');\n    }\n  }\n\n  static removePoint(deviceNode, payload) {\n    if (deviceNode && deviceNode['subscribe']) {\n      deviceNode['subscribe'](this.createMessage(REMOVE_POINT, payload));\n    } else {\n      logger.error('Device Node is not available on removePoint');\n    }\n  }\n\n  private static createMessage(action, payload = null): any {\n    return { action, payload };\n  }\n}\n","module.exports = require(\"mqtt-match\");","module.exports = require(\"mqtt\");","module.exports = require(\"cron\");","module.exports = require(\"cronstrue\");","import { Database } from '../database/database';\nimport { ContainerRegistry } from '../nodes/container';\nimport { createNodeDbHelper, NodeDbHelper } from '../nodes/node-db-helper';\nimport { ContainerRegistryMetadata, IContainer, INode } from '../nodes/node-interface';\nimport { SlimNodeIO } from '../nodes/node-link';\nimport Utils from '../nodes/utils';\nimport { isFunction, isNotNull, isNull } from '../utils/helper';\nimport { LinkResult } from './link-result';\nimport { ContainerRegistryValidator, IContainerRegistryValidator, NodeRegistryValidator } from './validator';\n\nexport interface LinkInputVisitor {\n  visit(c: IContainer, n: INode, ioKey: string, io: SlimNodeIO): void;\n}\n\nexport interface LinkOutputVisitor {\n  visit(c: IContainer, n: INode, ioKey: string, ios: SlimNodeIO[]): void;\n}\n\nexport interface LinkNodeVisitor<V extends any | Promise<any>> {\n  visit(c: IContainer, n: INode): V;\n}\n\ninterface LinkContainerVisitor {\n  visit(c: IContainer): void;\n}\n\nexport interface LinkResultVisitor<T extends LinkResult | Promise<LinkResult>> {\n\n  readonly registry: ContainerRegistryMetadata;\n\n  inputVisitor(): LinkInputVisitor;\n\n  outputVisitor(): LinkOutputVisitor;\n\n  nodeVisitor(): LinkNodeVisitor<any | Promise<any>>;\n\n  containerVisitor(): LinkContainerVisitor;\n\n  visit(result: LinkResult): T;\n\n}\n\nclass BaseNodeLinkVisitor<V extends any | Promise<any>> implements LinkNodeVisitor<V> {\n\n  private readonly fn: (c: IContainer, n: INode) => V;\n\n  constructor(fn?: (c: IContainer, n: INode) => V) {\n    this.fn = fn;\n  }\n\n  visit(c: IContainer, n: INode): V {\n    n.isUpdated = true;\n    return isFunction(this.fn) ? this.fn(c, n) : null;\n  }\n}\n\nabstract class DefaultLinkVisitor<T extends LinkResult | Promise<LinkResult>> implements LinkResultVisitor<T> {\n\n  readonly registry: ContainerRegistryMetadata;\n  protected readonly validator: IContainerRegistryValidator;\n\n  protected constructor(registry?: ContainerRegistryMetadata) {\n    this.registry = registry ?? ContainerRegistry.instance();\n    this.validator = new ContainerRegistryValidator(this.registry);\n  }\n\n  abstract nodeVisitor(): LinkNodeVisitor<void | Promise<void>>;\n\n  abstract visit(result: LinkResult): T;\n\n  containerVisitor(): LinkContainerVisitor {\n    return new class implements LinkContainerVisitor {\n      visit(c: IContainer): void {\n      }\n    };\n  }\n\n  inputVisitor(): LinkInputVisitor {\n    return new class implements LinkInputVisitor {\n      visit(c: IContainer, n: INode, ioKey: string, io: SlimNodeIO): void {\n        n.inputs[ioKey].link = io;\n        n.inputs[ioKey].updated = true;\n        if (isNotNull(io)) {\n          n.inputs[ioKey].data = Utils.parseValue(c.nodeRegistry().get(io.nodeId)?.outputs[io.ioId]?.data,\n                                                  n.inputs[ioKey].type);\n        }\n      }\n    };\n  }\n\n  outputVisitor(): LinkOutputVisitor {\n    return new class implements LinkOutputVisitor {\n      visit(c: IContainer, n: INode, ioKey: string, ios: SlimNodeIO[]): void {\n        if (isNotNull(n.outputs[ioKey])) {\n          n.outputs[ioKey].links = ios;\n        }\n      }\n    };\n  }\n\n  protected perNode(d: { nid: number | string; inputs: { [p: string]: SlimNodeIO }; outputs: { [p: string]: SlimNodeIO[] } },\n                    c: IContainer): Promise<any> | any {\n    const n = new NodeRegistryValidator().validate(d.nid, c, false);\n    if (isNull(n)) {\n      return;\n    }\n    const inputVisitor = this.inputVisitor();\n    const outputVisitor = this.outputVisitor();\n    Object.keys(d.inputs).forEach(k => inputVisitor.visit(c, n, k, d.inputs[k]));\n    Object.keys(d.outputs).forEach(k => outputVisitor.visit(c, n, k, d.outputs[k]));\n    return this.nodeVisitor().visit(c, n);\n  }\n\n}\n\nexport class BackendLinkVisitor extends DefaultLinkVisitor<Promise<LinkResult>> {\n  private readonly dbHelper: NodeDbHelper;\n  private readonly db: Database;\n\n  constructor(registry?: ContainerRegistryMetadata, dbHelper?: NodeDbHelper) {\n    super(registry);\n    this.dbHelper = dbHelper ?? createNodeDbHelper();\n    this.db = this.registry.rootContainer()['db'];\n  }\n\n  nodeVisitor(): LinkNodeVisitor<Promise<any>> {\n    return new BaseNodeLinkVisitor((c, n) => this.dbHelper.updateAsync(this.db, n, 'inputs', 'outputs'));\n  }\n\n  visit(result: LinkResult): Promise<LinkResult> {\n    return Promise.all(Object.keys(result.result())\n                             .map(cid => this.validator.validate(cid, false))\n                             .filter(c => isNotNull(c))\n                             .map(c => Promise.all(Object.values(result.result()[c.id]).map(d => this.perNode(d, c)))\n                                              .then(_ => this.containerVisitor().visit(c))))\n                  .then(_ => result);\n  }\n\n}\n\nexport class FrontendLinkVisitor extends DefaultLinkVisitor<LinkResult> {\n\n  private readonly fn: (c: IContainer) => void;\n\n  constructor(fn: (c: IContainer) => void, registry?: ContainerRegistryMetadata) {\n    super(registry);\n    this.fn = fn;\n  }\n\n  nodeVisitor(): LinkNodeVisitor<void> {\n    return new BaseNodeLinkVisitor<void>();\n  }\n\n  containerVisitor(): LinkContainerVisitor {\n    const that = this;\n    return new class implements LinkContainerVisitor {\n      visit(c: IContainer): void {\n        that.fn(c);\n      }\n    };\n  }\n\n  visit(result: LinkResult): LinkResult {\n    Object.keys(result.result())\n          .map(cid => this.validator.validate(cid, false))\n          .filter(c => isNotNull(c))\n          .forEach(c => {\n            Object.values(result.result()[c.id]).forEach(d => this.perNode(d, c));\n            this.containerVisitor().visit(c);\n          });\n    return result;\n  }\n\n}\n\n","module.exports = require(\"@hapi/joi\");","import { isEmpty } from '../utils/helper';\n\nexport const TWEAK_POS: [number, number] = [50, -100];\n\nexport class Shape2D {\n\n  static isDisplayable(size: [number, number]) {\n    return !isEmpty(size) && size[0] > 0 && size[1] > 0;\n  }\n\n  /**\n   * Calculate distance\n   * @param pos1\n   * @param pos2\n   * @returns {number}\n   */\n  static distance(pos1: [number, number], pos2: [number, number]): number {\n    const relative = Shape2D.relative(pos1, pos2);\n    return Math.sqrt(Math.pow(relative[0], 2) + Math.pow(relative[1], 2));\n  }\n\n  static relative(pos1: [number, number], pos2: [number, number]): [number, number] {\n    const p1 = Shape2D.guard(pos1);\n    const p2 = Shape2D.guard(pos2);\n    return [p2[0] - p1[0], p2[1] - p1[1]];\n  }\n\n  static bottomRight(size: [number, number], pos: [number, number]): [number, number] {\n    const s = Shape2D.guard(size);\n    const p = Shape2D.guard(pos);\n    return [p[0] + s[0], p[1] + s[1]];\n  }\n\n  static move(relative: [number, number], origin: [number, number]): [number, number];\n  static move(relative: [number, number], origin: [number, number], size: [number, number]): [number, number];\n  static move(relative: [number, number], origin: [number, number], size?: [number, number]): [number, number] {\n    const p1 = Shape2D.bottomRight(size, origin);\n    const p2 = Shape2D.guard(relative);\n    return [p1[0] + p2[0], p1[1] + p2[1]];\n  }\n\n  static avgPos(positions: [number, number][]): [number, number] {\n    return positions.map(pos => Shape2D.guard(pos))\n                    .reduce((avg, pos, _, { length }) => [avg[0] + pos[0] / length, avg[1] + pos[1] / length], [0, 0]);\n  }\n\n  static isInside(size: [number, number], pos: [number, number], eventPos: [number, number]): boolean {\n    const bottomRightPos = this.bottomRight(size, pos);\n    return eventPos[0] >= pos[0] && eventPos[0] <= bottomRightPos[0] &&\n           eventPos[1] >= pos[1] && eventPos[1] <= bottomRightPos[1];\n  }\n\n  static guard(pos: [number, number], fallbackX: number = 0, fallbackY: number = 0): [number, number] {\n    const x = fallbackX ?? 0;\n    const y = fallbackY ?? 0;\n    if (isEmpty(pos)) {\n      return [x, y];\n    }\n    return [pos[0] ?? x, pos[1] ?? y];\n  }\n\n  /**\n   * Compute is shape inside a rectangle\n   * @param x\n   * @param y\n   * @param left\n   * @param top\n   * @param width\n   * @param height\n   * @returns {boolean}\n   */\n  static isInsideRectangle(x: number, y: number, left: number, top: number, width: number, height: number): boolean {\n    return left < x && left + width > x && top < y && top + height > y;\n  }\n\n  /**\n   * Compute is bounding overlap\n   * @param a\n   * @param b\n   * @returns {boolean}\n   */\n  static overlapBounding([aLeft, aBottom, aRight, aTop]: [number, number, number, number],\n                         [bLeft, bBottom, bRight, bTop]: [number, number, number, number]): boolean {\n    return !(aLeft > bRight || aBottom > bTop || aRight < bLeft || aTop < bBottom);\n  }\n\n  /**\n   * Solve quadratic equation\n   * @param a\n   * @param b\n   * @param c\n   * @param d\n   * @returns {x1: number, x2: number, x3: number}\n   */\n  static quadraticEquationSolver(a: number, b: number, c: number, d: number): { x1: number, x2: number, x3: number } {\n    const delta = b * b - 3 * a * c;\n    const k = (9 * a * b * c - 2 * b * b * b - 27 * a * a * d) / (2 * Math.sqrt(Math.pow(Math.abs(delta), 3)));\n    let result;\n    if (delta > 0) {\n      if (Math.abs(k) <= 1) {\n        result = {\n          x1: (2 * Math.sqrt(delta) * Math.cos(Math.acos(k) / 3) - b) / (3 * a),\n          x2: (2 * Math.sqrt(delta) * Math.cos((Math.acos(k) / 3) - (2 * Math.PI) / 3) - b) / (3 * a),\n          x3: (2 * Math.sqrt(delta) * Math.cos((Math.acos(k) / 3) + (2 * Math.PI) / 3) - b) / (3 * a),\n        };\n      }\n      if (Math.abs(k) > 1) {\n        const x = ((Math.sqrt(delta) * Math.abs(k)) / (3 * a * k)) *\n                  (Math.cbrt(Math.abs(k) + Math.sqrt(k * k - 1)) + Math.cbrt(Math.abs(k) - Math.sqrt(k * k - 1))) - b /\n                  (3 * a);\n        result = { x1: x, x2: x, x3: x };\n      }\n    }\n    if (delta === 0) {\n      const x = (-b + Math.cbrt(b * b * b - 27 * a * a * d)) / (3 * a);\n      result = { x1: x, x2: x, x3: x };\n    }\n    if (delta < 0) {\n      const x = (Math.sqrt(Math.abs(delta)) / (3 * a)) *\n                (Math.cbrt(k + Math.sqrt(k * k + 1)) + Math.cbrt(k - Math.sqrt(k * k + 1))) - b / (3 * a);\n      result = { x1: x, x2: x, x3: x };\n    }\n    return result;\n  }\n}\n","import { AbstractRegistry } from '../nodes/registry';\nimport { IdGenerator } from '../utils/id-generator';\nimport { DispatchNode } from './DispatchNode';\n\nexport class DispatcherRegistry extends AbstractRegistry<DispatchNode> {\n  private static _instance: DispatcherRegistry;\n\n  private constructor() {\n    super();\n  }\n\n  public static instance(): DispatcherRegistry {\n    if (!DispatcherRegistry._instance) {\n      DispatcherRegistry._instance = new DispatcherRegistry();\n    }\n    return DispatcherRegistry._instance;\n  }\n\n  protected createKey(node: DispatchNode): string | number {\n    return IdGenerator.createNodeId(node.cid, node.id);\n  }\n\n  protected itemName(): string {\n    return 'Dispatcher Node';\n  }\n}\n","import { AxiosResponse, default as axios } from 'axios';\nimport { get } from 'lodash';\nimport config from '../config';\nimport { Entry } from './entry';\n\nexport abstract class Api<T extends Entry> {\n  protected client = axios.create({ baseURL: config.backendSync.baseUrl });\n\n  abstract list(objId?: string): Promise<T[]>;\n\n  abstract get(objId: string): Promise<T[]>;\n\n  abstract create(obj: T, parentId?: string): Promise<any>;\n\n  abstract update(obj: T, objId?: string): Promise<any>;\n\n  abstract delete(objId: string): Promise<any>;\n\n  abstract factoryEntry(): T;\n\n  protected fetchMany(url: string, respKey?: string): Promise<T[]> {\n    return this.client.get(url).then(this.extractData(respKey)).then(this.assignAllTo(() => this.factoryEntry()));\n  }\n\n  protected fetchOne(url: string, respKey?: string) {\n    return this.client.get(url).then(this.extractData(respKey)).then(p => Object.assign(this.factoryEntry(), p));\n  }\n\n  protected newEntry<T>(c: new () => T): T {\n    return new c();\n  }\n\n  protected extractData<T>(path: string = null) {\n    return (response: AxiosResponse<T>) => (path ? get(response.data, path) : response.data);\n  }\n\n  /**\n   * Create a provided class instance using a factory method, for all given elements, and merge each element\n   * into the class instance.\n   *\n   * Higher-order function\n   */\n  protected assignAllTo<T>(factory: () => T) {\n    return (properties: any[]): T[] => properties.map(p => Object.assign(factory(), p));\n  }\n}\n","import { get, isEqual } from 'lodash';\nimport { Api } from '../../../../backend/api';\nimport { Entry } from '../../../../backend/entry';\nimport config from '../../../../config';\nimport { singleton as actor } from '../../../../promise-actor';\nimport { IOT_TYPES } from '../../../constants';\nimport { ContainerNode } from '../../../container-node';\nimport { BROADCAST, Node } from '../../../node';\nimport { NodeFactory } from '../../../node-factory';\nimport { SerializedNode, Side } from '../../../node-interface';\nimport { NodeSetting, SettingType } from '../../../node-io';\nimport EntryNode from './entry-node';\nimport Mixin from './mixin';\n\n/**\n *\n * @param <T> Type of the Entry that this container manages\n */\nexport default abstract class ApiContainerNode<T extends Entry> extends ContainerNode implements EntryNode<T> {\n  extra_node_types = this.childNodeType().filter(v => IOT_TYPES.includes(v));\n  properties: {\n    entry: T;\n    is_protected: boolean;\n  };\n  clonable = false;\n  movable = false;\n  settingFields: {};\n  entry = Mixin.prototype.entry.bind(this);\n  entryId = Mixin.prototype.entryId.bind(this);\n  deactivate = Mixin.prototype.deactivate.bind(this);\n  createSettingForm = Mixin.prototype.createSettingForm.bind(this);\n  getTakenIdentifiers = Mixin.prototype.getTakenIdentifiers.bind(this);\n  makeIdentifier = Mixin.prototype.makeIdentifier.bind(this);\n  findFreeIdentifier = Mixin.prototype.findFreeIdentifier.bind(this);\n  protected api: Api<T>;\n\n  constructor() {\n    super();\n    this.description = 'placeholder'; // FIXME\n    this.api = this.initAPI();\n    this.settings['name'] = NodeSetting.create({\n                                                 description: 'Entry',\n                                                 value: this.title,\n                                                 type: SettingType.READONLY,\n                                               });\n  }\n\n  abstract namePrefix(): string;\n\n  abstract createEntry(): Promise<T>;\n\n  entryFactory(): T {\n    return this.api.factoryEntry();\n  }\n\n  updateEntry(body: T): Promise<any> {\n    return this.api.update(body, this.entryId());\n  }\n\n  deleteEntry(): Promise<any> {\n    return this.api.delete(this.entryId());\n  }\n\n  onAdded() {\n    Mixin.prototype.onAdded.call(this);\n    super.onAdded();\n  }\n\n  applyEntry(entry: T) {\n    Mixin.prototype.applyEntry.call(this, entry);\n    this.applyTitle();\n    this.broadcastTitleToClients();\n  }\n\n  onAfterSettingsChange(old) {\n    Mixin.prototype.onAfterSettingsChange.call(this);\n    super.onAfterSettingsChange(old);\n  }\n\n  onCreated() {\n    super.onCreated();\n    const namePrefix = this.namePrefix();\n    const nameSuffix = this.entry() ? ' ' + this.entryId() : '';\n    this.settings['name'].value = namePrefix + nameSuffix;\n    Mixin.prototype.onCreated.call(this);\n  }\n\n  onRemoved() {\n    Mixin.prototype.onRemoved.call(this);\n  }\n\n  shouldRejectNodeType(type: string): boolean {\n    // reject all IoT nodes as children, except the correct hierarchical child node type. Allow all others\n    return !this.childNodeType().includes(type);\n  }\n\n  syncWithBackend() {\n    if (this.side !== Side.server) return;\n    actor.process(() => this.fetchChildren().then(children => {\n                    const childIds = children.map(v => v.entryId());\n                    const childNodes = this.collectChildNodes(this.sub_container.getNodes()).map(\n                      n => n as EntryNode<Entry>);\n                    const existingChildNodes = childNodes.filter(n => childIds.includes(n.entryId()));\n                    const obsoleteChildNodes = childNodes.filter(\n                      n => !n.properties.is_protected && !childIds.includes(n.entryId()),\n                    );\n                    Promise.all(obsoleteChildNodes.map(n => {\n                      n.deactivate();\n                      //TODO not yet send to client\n                      return n.container.nodeRegistry().remove(n);\n                    })).then(_ => this.processNextChildEntry(children, existingChildNodes));\n                  }),\n    );\n  }\n\n  onGetMessageToEditorSide({ action, payload }) {\n    super.onGetMessageToEditorSide({ action, payload, key: null });\n    if (action === BROADCAST.UPDATE_TITLE) this.applyTitle();\n  }\n\n  protected applyTitle() {\n    super.applyTitle();\n    this.container.runWithEditor(e => {\n      if (get(e, 'renderer.container.id') === this.container.id) {\n        e.emit('rerender-siderbar-containers');\n      }\n    });\n  }\n\n  protected abstract initAPI(): Api<T>;\n\n  protected abstract childNodeType(): string[];\n\n  /**\n   * Fetch all current child entries of the main entry from the remote API\n   */\n  protected abstract fetchChildren(): Promise<Entry[]>;\n\n  /**\n   * When given an array of child-nodes, returns only the nodes that manage child entries of the main entry\n   */\n  protected abstract collectChildNodes(nodes: Node[]): Node[];\n\n  /**\n   * Recursively and asynchronously processes the next of the remaining entries from the remote API\n   */\n  protected processNextChildEntry(remaining: Entry[], childNodes: EntryNode<Entry>[]) {\n    if (!remaining || remaining.length === 0) return;\n    const entry = remaining.pop();\n    let existingNode = childNodes.find(node => node.entryId() === entry.entryId());\n    const callback = () => {\n      if (existingNode instanceof ApiContainerNode) {\n        (<ApiContainerNode<any>>existingNode).syncWithBackend();\n      }\n      this.processNextChildEntry(remaining, childNodes);\n    };\n    if (!existingNode) {\n      // console.log('Creating child node for ' + this.title + ' ' + (entry.entryId() || ''));\n      const maxVerticalPosition = Math.max(100, ...this.sub_container.getNodes(false).map(n => n.pos[1]));\n      const pos: [number, number] = [250, maxVerticalPosition + config.backendSync.nodeDistance];\n      // existingNode is used above! Leave this reassignment:\n      this.sub_container.nodeRegistry()\n          .register(NodeFactory.create(<SerializedNode>{ type: entry.nodeType(), properties: { entry }, pos }, true))\n          .then(n => {\n            existingNode = <EntryNode<Entry>>n;\n            callback();\n          });\n    } else if (!isEqual(existingNode.entry(), entry)) {\n      // console.log('Found existing node with outdated entry, updating...');\n      existingNode.applyEntry(entry);\n      existingNode.persistConfiguration(callback);\n    } else {\n      callback();\n    }\n  }\n}\n","import { Entry } from '../../../../backend/entry';\nimport ApiContainerNode from './api-container-node';\n\n/**\n * Container node that contains a collection of API synced child nodes, but has itself no entity\n * or parent\n */\nexport default abstract class TopLevelApiContainerNode<C extends Entry> extends ApiContainerNode<C> {\n  settingFields = {};\n\n  entryFactory = () => null;\n\n  applyEntry = () => {\n    // Top level container's entry is always 'null'\n    this.title = this.namePrefix();\n    this.sub_container.name = this.title;\n  };\n\n  onAdded = () => {\n    this.ignore_remove = true;\n    this.removable = false;\n    this.movable = false;\n    this.applyEntry();\n    this.syncWithBackend();\n  };\n\n  createEntry = () => Promise.resolve(null);\n\n  updateEntry = (body: any) => Promise.resolve(null);\n\n  deleteEntry = () => Promise.resolve(null);\n\n  namePrefix = () => this.title;\n\n  getTakenIdentifiers = () => Promise.resolve([]);\n\n  makeIdentifier = (n: number): string => null;\n\n  findFreeIdentifier = (): Promise<string> => Promise.resolve(null);\n}\n","module.exports = require(\"lodash-decorators/debounce\");","module.exports = require(\"socket.io\");","import app from '../app';\n\nconst schemaMiddleware = (schema, property) => {\n  return (req, res, next) => {\n    const { error } = schema.validate(req[property]);\n    const valid = error == null;\n    if (valid) {\n      next();\n    } else {\n      const { details } = error;\n      const message = details.map(i => i.message).join(',');\n      res.status(422).json({ error: message });\n    }\n  };\n};\n\nconst isAuthenticated = async (token: string): Promise<boolean> => {\n  try {\n    await app.db.isAuthenticated(token);\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n\nconst authMiddleware = () => {\n  return async (req, res, next) => {\n    const token = req.headers['token'];\n    if (!token) {\n      res.status(403).json({ error: 'Please provide token' });\n      return;\n    }\n    if (await isAuthenticated(token)) {\n      next();\n    } else {\n      res.status(403).json({ error: 'Please provide valid token' });\n    }\n  };\n};\n\nexport { schemaMiddleware, authMiddleware };\n","import { Response } from 'express';\nimport { NotFoundError } from '../../../utils/errors';\nimport { isNotNull } from '../../../utils/helper';\nimport { reliability_logger } from '../../../utils/loggers';\nimport { EditorServerSocket } from '../../editor-server-socket';\nimport { ApiResult } from '../../../shared/api-result';\n\nexport abstract class ApiHandler {\n  protected readonly editorSocket: EditorServerSocket;\n\n  protected constructor(editorSocket: EditorServerSocket) {\n    this.editorSocket = editorSocket;\n  }\n\n  protected emitSuccess(resp: Response, event: string, result: ApiResult<any>, code: number = 200) {\n    this.editorSocket.io.emit(event, result.result());\n    return resp.status(code).send(result.message);\n  }\n\n  protected emitError(resp: Response, err: Error, event: string, errorFunc?: (e: Error) => number) {\n    reliability_logger.warn(err.stack ?? err.message);\n    return resp.status(err instanceof NotFoundError ? 404 : isNotNull(errorFunc) ? errorFunc(err) : 400)\n               .send(`Can't ${event.toLowerCase()}. Reason: ${err}`);\n  }\n}\n","import { NodeFactory } from '../../nodes/node-factory';\nimport {\n  ContainerRegistryMetadata,\n  IContainer,\n  IFolderNode,\n  INode,\n  isFolderNode,\n  SerializedContainer,\n  SerializedNode,\n} from '../../nodes/node-interface';\nimport { NodeRegistryHelper } from '../../nodes/node-registry';\nimport { CreationResult, initETLResult, RemoveResult } from '../../shared/etl-result';\nimport { ContainerRegistryValidator } from '../../shared/validator';\nimport { isNotNull } from '../../utils/helper';\nimport { IdGenerator } from '../../utils/id-generator';\nimport { NodeService } from './node-service';\n\nexport class NodeCRUDService extends NodeService {\n\n  getNodes(parent: number | string | IContainer, registry?: ContainerRegistryMetadata): Promise<SerializedContainer> {\n    const reg = registry ?? this.cRegistry;\n    const db = reg.rootContainer()['db'];\n    return ContainerRegistryValidator.mustExisted(parent, reg)\n                                     .then(c => this.dbHelper.listByContainer(db, c.id)\n                                                    .then(nodes => this.getNodesInContainer(db, nodes))\n                                                    .then(nodes => <SerializedContainer>{\n                                                      id: c.id,\n                                                      name: c.name,\n                                                      serializedNodes: nodes,\n                                                    }));\n  }\n\n  createNode(parent: number | string | IContainer, node: SerializedNode,\n             registry?: ContainerRegistryMetadata): Promise<CreationResult> {\n    this.logger.info(`Creating new node '${node.type}' in container '${parent}'...`);\n    const reg = registry ?? this.cRegistry;\n    return ContainerRegistryValidator.mustExisted(parent, reg)\n                                     .then(p => p.nodeRegistry().register(NodeFactory.create(node, true, registry)))\n                                     .then(n => new CreationResult(n));\n  }\n\n  removeNodes(parent: number | string | IContainer, nodes: (number | string | SerializedNode | INode)[],\n              recursive: boolean = false, metadata?: ContainerRegistryMetadata): Promise<RemoveResult> {\n    const registry = metadata ?? this.cRegistry;\n    const db = registry.rootContainer()['db'];\n    const v = ContainerRegistryValidator.mustExisted(parent, registry);\n    return v.then(p => {\n      const findNodes = this.findNodes(p, nodes, recursive, registry);\n      return this.dbHelper.batchDeleteByIds(db, findNodes.map(n => IdGenerator.createNodeId(n.cid, n.id)))\n                 .then(_ => NodeRegistryHelper.unregister(p, findNodes, registry, true))\n                 .then(r => initETLResult<RemoveResult>(RemoveResult, p.id, findNodes.length, r));\n    });\n  }\n\n  private findNodes(p: IContainer, nodes: (number | string | SerializedNode | INode)[], recursive: boolean,\n                    registry: ContainerRegistryMetadata): SerializedNode[] {\n    const list = NodeFactory.standardize(p, nodes);\n    if (!recursive) {\n      return list;\n    }\n    return list.flatMap(node => {\n      const n = p.nodeRegistry().get(node);\n      if (isFolderNode(n)) {\n        const container = registry.get((<IFolderNode>n).sub_container.id);\n        if (isNotNull(container)) {\n          return [...this.findNodes(container, container.nodeRegistry().list(), recursive, registry), n];\n        }\n      }\n      return [n ?? node];\n    });\n  }\n}\n","import { Node } from '../nodes/node';\nimport { INode, SerializedNode } from '../nodes/node-interface';\nimport { RegistryResult } from '../nodes/registry';\nimport { SerializableHelper } from '../nodes/serializable';\nimport { RegistryError } from '../utils/errors';\nimport { isEmpty } from '../utils/helper';\nimport { ApiResult } from './api-result';\n\nabstract class ETLResult extends RegistryResult<SerializedNode> {\n  readonly containerId: string | number;\n  readonly total: number;\n  message: string;\n\n  protected constructor(containerId: string | number, total: number, objects: SerializedNode[],\n                        errors: RegistryError<SerializedNode>[]) {\n    super(objects, errors);\n    this.containerId = containerId;\n    this.total = total;\n    this.message = this.genMessage();\n  }\n\n  static init<T extends ETLResult>(className: any, cId: string | number, total: number, result: RegistryResult<Node>,\n                                   args?: {}): T {\n    const nodes = result.objects.map(n => n.serialize());\n    const errors = result.errors.map(e => new RegistryError(e.message, e.item?.serialize()));\n    return new className(cId, total, nodes, errors, args);\n  }\n\n  protected errMsg(): string {\n    return isEmpty(this.errors) ? '' : `Errors: [${this.errors}]`;\n  }\n\n  protected abstract genMessage(): string;\n}\n\nexport class CreationResult implements ApiResult<SerializedNode> {\n  readonly node: SerializedNode;\n  readonly message: string;\n  readonly isDashboardNode: boolean;\n\n  constructor(node: INode) {\n    this.node = SerializableHelper.serialize(node);\n    this.isDashboardNode = (<Node>node)?.isDashboardNode;\n    this.message = `Created node '${(<Node>node)?.getReadableId()}' into container '${node.cid}'.`;\n  }\n\n  result(): SerializedNode {\n    return this.node;\n  }\n\n}\n\nexport class RemoveResult extends ETLResult implements ApiResult<RemoveResult> {\n\n  result(): RemoveResult {\n    return this;\n  }\n\n  protected genMessage(): string {\n    return `Removed ${this.objects.length}/${this.total} nodes into container '${this.containerId}'. ${this.errMsg()}`;\n  }\n\n}\n\nexport class ExportResult extends ETLResult implements ApiResult<ExportResult> {\n  constructor(containerId: string | number, objects: SerializedNode[]) {\n    super(containerId, 0, objects, null);\n  }\n\n  result(): ExportResult {\n    return this;\n  }\n\n  protected genMessage() {\n    return `Exported ${this.objects.length} nodes and sub nodes in container '${this.containerId}'.`;\n  }\n}\n\nexport class ImportResult extends ETLResult implements ApiResult<ImportResult> {\n  result(): ImportResult {\n    return this;\n  }\n\n  protected genMessage() {\n    return `Imported ${this.objects.length}/${this.total} nodes into container '${this.containerId}'. ${this.errMsg()}`;\n  }\n}\n\nexport class CloneResult extends ETLResult implements ApiResult<CloneResult> {\n  result(): CloneResult {\n    return this;\n  }\n\n  protected genMessage() {\n    return `Cloned ${this.objects.length}/${this.total} nodes into container '${this.containerId}'. ${this.errMsg()}`;\n  }\n}\n\nexport class PackResult extends ETLResult\n  implements ApiResult<{ containerId: string | number, objects: SerializedNode[], errors: RegistryError<SerializedNode>[] }> {\n\n  readonly cleanupResult: RemoveResult;\n  private readonly dest: string | number;\n\n  constructor(containerId: string | number, total: number, objects: SerializedNode[],\n              errors: RegistryError<SerializedNode>[],\n              args: { cid: string | number, rr: RemoveResult }) {\n    super(containerId, total, objects, errors);\n    this.dest = args.cid;\n    this.cleanupResult = args.rr;\n    this.message = this.genMessage();\n  }\n\n  result(): { containerId: string | number, objects: SerializedNode[], errors: RegistryError<SerializedNode>[] } {\n    return { containerId: this.containerId, objects: this.objects, errors: this.errors };\n  }\n\n  protected genMessage() {\n    return `Moved ${this.objects.length - 1}/${this.total} nodes ` +\n           `from '${this.containerId}' into container '${this.dest}'. ${this.errMsg()}`;\n  }\n}\n\nexport const initETLResult = <T>(className: any, cid: string | number, total: number, result: RegistryResult<Node>,\n                                 args?: {}): T => {\n  const nodes = result.objects.map(n => SerializableHelper.serialize(n));\n  const errors = result.errors.map(e => new RegistryError(e.message, SerializableHelper.serialize(e.item)));\n  return new className(cid, total, nodes, errors, args);\n};\n","import { Node } from '../../nodes/node';\nimport { NodeFactory } from '../../nodes/node-factory';\nimport {\n  ContainerRegistryMetadata,\n  IContainer,\n  IFolderNode,\n  INode,\n  isFolderNode,\n  SerializedContainer,\n  SerializedFolderNode,\n  SerializedNode,\n} from '../../nodes/node-interface';\nimport { SerializedNodeInput, SerializedNodeOutput } from '../../nodes/node-io';\nimport { createLinkHandler, createNodeLink, Link, NodeLink } from '../../nodes/node-link';\nimport { Shape2D } from '../../nodes/node-presenter';\nimport { NodeRegistryHelper } from '../../nodes/node-registry';\nimport { NodeTypeRegistry } from '../../nodes/node-type-registry';\nimport { CONTAINER_NODE_TYPE } from '../../nodes/nodes/container/folder';\nimport { RegistryResult } from '../../nodes/registry';\nimport { SerializableHelper } from '../../nodes/serializable';\nimport { CloneResult, ExportResult, ImportResult, initETLResult, PackResult } from '../../shared/etl-result';\nimport { LinkResult } from '../../shared/link-result';\nimport {\n  ContainerRegistryValidator,\n  IContainerRegistryValidator,\n  INodeRegistryValidator,\n  ListValidator,\n} from '../../shared/validator';\nimport {\n  arrayToObject,\n  isEmpty,\n  isNotNull,\n  isNull,\n  mapToObjectSameKey,\n  objectOf,\n  unionToArray,\n} from '../../utils/helper';\nimport { BaseIdGenerator, IdGenerator } from '../../utils/id-generator';\nimport { node_service_logger } from '../../utils/loggers';\nimport { NodeService } from './node-service';\nimport { NodeCRUDService } from './NodeCRUDService';\n\n/**\n * Represents for ETL service (Extract - Transform - Load data, a.k.a import/export)\n */\nexport class NodeETLService extends NodeService {\n\n  /**\n   * Pack up nodes to new container under specific one\n   * @param {number} parentId current parent container id\n   * @param {number[]} ids node ids to pack up\n   * @param atPos At position\n   * @param {ContainerRegistryMetadata} metadata container registry\n   * @return {Promise<PackResult>} pack result\n   */\n  packUpNodes(parentId: string | number, ids: (string | number)[], atPos: [number, number],\n              metadata?: ContainerRegistryMetadata): Promise<PackResult> {\n    this.logger.info(`Packing nodes [${ids}] in container '${parentId}' into new container...`);\n    const reg: ContainerRegistryMetadata = metadata ?? this.cRegistry;\n    const v = ContainerRegistryValidator.mustExisted(parentId, reg);\n    return v.then(p => ListValidator.notEmpty(ids, `No node to pack-up`)\n                                    .then(nodeIds => this.doExport(parentId, nodeIds, reg))\n                                    .then(nodes => this.doPackUp(p, atPos, nodes, reg)));\n  }\n\n  /**\n   * Clone nodes to other nodes under specific container\n   * @param {number} parentId current parent container id\n   * @param {number[]} ids node ids to clone\n   * @param {[number, number]} atPos to move\n   * @param {ContainerRegistryMetadata} metadata container registry\n   * @return {Promise<CloneResult>} clone result\n   */\n  cloneNodes(parentId: string | number, ids: number[], atPos: [number, number],\n             metadata?: ContainerRegistryMetadata): Promise<CloneResult> {\n    this.logger.info(`Cloning nodes [${ids}] inside container id '${parentId}'...`);\n    return ListValidator.notEmpty(ids, `No node to clone`)\n                        .then(nodeIds => this.doExport(parentId, nodeIds, metadata))\n                        .then(nodes => this.doImport(nodes, parentId, metadata, atPos))\n                        .then(r => initETLResult<CloneResult>(CloneResult, parentId, ids.length, r));\n  }\n\n  /**\n   * Export nodes and children nodes from specific container\n   * @param {number} parentId\n   * @param {number[]} ids\n   * @param {ContainerRegistryMetadata} metadata\n   * @return {Promise<SerializedNode[]>}\n   */\n  exportNodes(parentId: string | number, ids: number[], metadata?: ContainerRegistryMetadata): Promise<ExportResult> {\n    return ListValidator.notEmpty(ids, `No node to export`)\n                        .then(nodeIds => this.doExport(parentId, nodeIds, metadata))\n                        .then(l => ListValidator.notEmpty<SerializedNode>(l, `Not found any [${ids}] to export`))\n                        .then(nodes => new ExportResult(parentId, nodes));\n  }\n\n  /**\n   * Import nodes into specific container\n   * @param {number} parentId\n   * @param {SerializedNode[]} nodes\n   * @param {[number, number]} atPos\n   * @param {ContainerRegistryMetadata} metadata?\n   * @return {Promise<ImportResult>}\n   */\n  importNodes(parentId: string | number, nodes: SerializedNode[], atPos: [number, number],\n              metadata?: ContainerRegistryMetadata): Promise<ImportResult> {\n    return ListValidator.notEmpty(nodes, `No nodes to import`)\n                        .then(n => this.doImport(n, parentId, metadata, atPos))\n                        .then(r => initETLResult<ImportResult>(ImportResult, parentId, nodes.length, r));\n  }\n\n  private doExport(cid: string | number, ids: (string | number)[],\n                   metadata: ContainerRegistryMetadata): Promise<SerializedNode[]> {\n    this.logger.info(`Exporting [${ids}] nodes in container '${cid}'...`);\n    const registry: ContainerRegistryMetadata = metadata ?? this.cRegistry;\n    const database = registry.rootContainer()['db'];\n    return ContainerRegistryValidator.mustExisted(cid, registry)\n                                     .then(c => unionToArray(ids.map(nid => IdGenerator.createNodeId(c.id, nid))))\n                                     .then(exportIds => this.dbHelper.listByIds(database, exportIds))\n                                     .then(nodes => this.getNodesInContainer(database, nodes));\n  }\n\n  private createFolder(parent: IContainer, registry: ContainerRegistryMetadata,\n                       atPos: [number, number]): IFolderNode {\n    this.logger.info(`Creating new folder node into container id '${parent.id}'...`);\n    const id = this.idGenerator.genNodeId(parent.id, IdGenerator.UNINITIALIZED);\n    const folder = <IFolderNode><unknown>NodeFactory.create(<SerializedFolderNode>{\n      id, cid: parent.id, type: CONTAINER_NODE_TYPE, pos: atPos, sub_container: { id },\n    }, true, registry);\n    folder.container = parent;\n    folder.sub_container = registry.register(folder.sub_container);\n    this.logger.info(`Cached new folder node id '${IdGenerator.createNodeId(parent.id, folder.id)}' ` +\n                     `with container id '${folder.sub_container.id}'`);\n    return folder;\n  }\n\n  private doPackUp(parent: IContainer, atPos: [number, number], nodes: SerializedNode[],\n                   registry: ContainerRegistryMetadata): Promise<PackResult> {\n    const folder = this.createFolder(parent, registry, atPos);\n    const cid = folder.sub_container.id;\n    const ids = nodes.map(n => n.id);\n    this.logger.info(`Analyzing ${ids.length} nodes to move from container '${parent.id}' ` +\n                     `into container id '${cid}'...`);\n    return Promise.resolve(new NodeTree(cid, this.idGenerator, parent.id))\n                  .then(tree => tree.compute(nodes))\n                  .then(tree => this.dbHelper.batchInsert(registry.rootContainer()['db'],\n                                                          [SerializableHelper.serialize(folder), ...tree.flatten()]))\n                  .then(pNodes => new NodeCRUDService().removeNodes(parent, ids).then(rr => ({ nodes: pNodes, rr })))\n                  .then(({ nodes, rr }) => NodeRegistryHelper.register(parent, nodes, registry, true)\n                                                             .then(pr => ({ pr, rr })))\n                  .then(({ pr, rr }) => initETLResult<PackResult>(PackResult, parent.id, ids.length, pr, { cid, rr }));\n  }\n\n  private doImport(nodes: SerializedNode[], parentId: string | number, metadata: ContainerRegistryMetadata,\n                   atPos: [number, number]): Promise<RegistryResult<Node>> {\n    this.logger.info(`Analyzing ${nodes.length} nodes to import into container id '${parentId}'...`);\n    const registry: ContainerRegistryMetadata = metadata ?? this.cRegistry;\n    const db = registry.rootContainer()['db'];\n    return ContainerRegistryValidator.mustExisted(parentId, registry)\n                                     .then(c => Promise.resolve(new NodeTree(c.id, this.idGenerator))\n                                                       .then(tree => tree.compute(nodes, atPos))\n                                                       .then(t => this.dbHelper.batchInsert(db, t.flatten()))\n                                                       .then(n => NodeRegistryHelper.register(c, n, registry, true)));\n  }\n\n}\n\nexport class NodeTree {\n  private readonly destCId: string;\n  private readonly contextCId: string;\n  private readonly idGenerator: BaseIdGenerator;\n  private readonly logger = node_service_logger;\n  private tree: NodeBranch;\n  private outputs: SerializedNode[];\n\n  constructor(destCId: string | number, idGenerator: BaseIdGenerator, contextCId?: string | number) {\n    this.destCId = destCId + '';\n    this.contextCId = isNull(contextCId) ? this.destCId : contextCId + '';\n    this.idGenerator = idGenerator;\n  }\n\n  /**\n   * Build and normalize node tree\n   * @param {SerializedNode[]} nodes the given nodes\n   * @param {[number, number]} atPos position\n   * @return {NodeTree}\n   */\n  compute(nodes: SerializedNode[], atPos?: [number, number]): NodeTree {\n    const { containers, nodeMap } = this.analyze(nodes);\n    if (isEmpty(nodeMap)) {\n      return this;\n    }\n    this.tree = this.build(containers, nodeMap);\n    this.tree = this.tree.normalize(atPos);\n    this.outputs = this.tree.flatten();\n    return this;\n  }\n\n  /**\n   * Returns flatten nodes to insert into database\n   * @return {SerializedNode[]} list serialized node\n   */\n  flatten(): SerializedNode[] {\n    return this.outputs ?? [];\n  }\n\n  private analyze(nodes: SerializedNode[]): { containers: { [cid: string]: SerializedContainer }, nodeMap: { [cid: string]: SerializedNode[] } } {\n    return nodes.reduce(\n      (o, n) => {\n        if (isFolderNode(n)) {\n          const cid = (<SerializedFolderNode>n).sub_container.id;\n          o.containers[cid] = { id: this.idGenerator.genContainerId(cid) };\n        }\n        o.nodeMap[n.cid] = isNull(o.nodeMap[n.cid]) ? [n] : [...o.nodeMap[n.cid], n];\n        return o;\n      }, { containers: {}, nodeMap: {} });\n  }\n\n  private build(containers: { [cid: string]: SerializedContainer },\n                nodeMap: { [cid: string]: SerializedNode[] }): NodeBranch {\n    const remain = Object.keys(nodeMap).filter(cid => isNull(containers[cid]));\n    if (remain.length > 1) {\n      throw new Error(`The given nodes has invalid node(s) that is under non-existed container(s) ` +\n                      `[${remain.filter(id => id !== this.destCId)}]`);\n    }\n    const mapContainers = { ...containers, ...objectOf(this.contextCId, { id: this.destCId }) };\n    this.logger.info(`Building node tree with ${Object.keys(containers).length} new containers ` +\n                     `into container '${this.destCId}'...`);\n    if (remain.length === 1 && remain[0] !== this.contextCId) {\n      nodeMap[this.contextCId] = nodeMap[remain[0]];\n      delete nodeMap[remain[0]];\n    }\n    const remapNodes = arrayToObject(Object.keys(mapContainers), cid => cid, cid => nodeMap[cid] ?? []);\n    return this.buildBranch(this.contextCId, mapContainers, remapNodes);\n  }\n\n  private buildBranch(parent: string, containers: { [p: string]: SerializedContainer },\n                      nodeMap: { [p: string]: SerializedNode[] }): NodeBranch {\n    this.logger.info(`Analyzing ${nodeMap[parent].length} nodes(s) in container '${containers[parent].id}'...`);\n    return new NodeBranch(containers[parent]).add(nodeMap[parent], id => this.idGenerator.genNodeId(parent, id),\n                                                  cid => this.buildBranch(cid, containers, nodeMap));\n\n  }\n\n}\n\nclass NodeBranch {\n\n  readonly parent: SerializedContainer;\n  readonly siblingIds: { [nId: string]: string } = {};\n  private readonly nodes: { [nId: string]: { node: SerializedNode, descendant?: NodeBranch } } = {};\n  private readonly nodeLinks: NodeLink[] = [];\n  private readonly logger = node_service_logger;\n  private outputs: SerializedNode[];\n\n  constructor(parent: SerializedContainer) {\n    this.parent = parent;\n  }\n\n  add(nodes: SerializedNode[], generateId: (id) => string, lookup: (cid) => NodeBranch): NodeBranch {\n    nodes.forEach(node => {\n      const descendant = isFolderNode(node) ? lookup((<IFolderNode>node).sub_container.id) : null;\n      this.siblingIds[node.id] = generateId(node.id);\n      this.nodes[node.id] = { node, descendant };\n      let slot = 0;\n      for (const [k, input] of Object.entries(node.inputs ?? {})) {\n        if (isNull(input.link)) {\n          continue;\n        }\n        this.nodeLinks.push(createNodeLink(this.parent.id, Link.create(input.link),\n                                           Link.create({ nodeId: node.id, ioId: k, slot: ++slot })));\n        input.link = null;\n      }\n      slot = 0;\n      for (const [k, output] of Object.entries(node.outputs ?? {})) {\n        if (isEmpty(output.links)) {\n          continue;\n        }\n        this.nodeLinks.push(createNodeLink(this.parent.id, Link.create({ nodeId: node.id, ioId: k, slot: ++slot }),\n                                           ...output.links.map(l => Link.create(l))));\n        output.links = [];\n      }\n    });\n    return this;\n  }\n\n  normalize(atPos?: [number, number]): NodeBranch {\n    const relativePos = this.computeRelativePositions(atPos);\n    this.logger.info(`Optimizing ${this.nodeLinks.length} node link(s) in container '${this.parent.id}'...`);\n    const handler = createLinkHandler(null, new ContainerValidator(this.parent), new NodeValidator(this.nodes), true);\n    const lr = handler.batchCreate(...this.nodeLinks);\n    this.logger.info(`Normalizing ${Object.keys(this.nodes).length} nodes in container '${this.parent.id}'...`);\n    this.outputs = Object.keys(this.nodes)\n                         .map(nId => this.nodes[nId] = this.normalizeNode(this.nodes[nId], lr, relativePos))\n                         .flatMap(branch => this.flattenBranch(branch));\n    return this;\n  }\n\n  flatten(): SerializedNode[] {\n    return this.outputs ?? [];\n  }\n\n  private computeRelativePositions(atPos: [number, number]): [number, number] {\n    const allPos = Object.values(this.nodes).map(b => b.node.pos);\n    return isNull(atPos) ? null : Shape2D.relative(Shape2D.avgPos(allPos), atPos);\n  }\n\n  private flattenBranch(branch: { node: SerializedNode, descendant?: NodeBranch }): SerializedNode[] {\n    if (isNull(branch.descendant)) {\n      return [branch.node];\n    }\n    const nodes = Object.values(branch.descendant.nodes).flatMap(sub => this.flattenBranch(sub));\n    return [branch.node, ...nodes];\n  }\n\n  private normalizeNode(branch: { node: SerializedNode; descendant?: NodeBranch }, linkResult: LinkResult,\n                        relativePos?: [number, number]): { node: SerializedNode; descendant?: NodeBranch } {\n    if (isFolderNode(branch.node)) {\n      const itself = <SerializedFolderNode>branch.node;\n      itself.sub_container.id = branch.descendant.parent.id;\n      branch.descendant = branch.descendant.normalize();\n    }\n    const oldId = branch.node.id + '';\n    branch.node.id = this.siblingIds[branch.node.id];\n    branch.node.cid = this.parent.id;\n    branch.node.type = NodeTypeRegistry.instance().lookupNodeType(branch.node.type);\n    branch.node.pos = Shape2D.move(relativePos, branch.node.pos);\n    branch.node.inputs = this.normalizeNodeInputs(oldId, branch.node.inputs, linkResult, branch.descendant);\n    branch.node.outputs = this.normalizeNodeOutputs(oldId, branch.node.outputs, linkResult, branch.descendant);\n    return branch;\n  }\n\n  private normalizeNodeInputs(nid: string, inputs: { [p: number]: SerializedNodeInput }, linkResult: LinkResult,\n                              descendant?: NodeBranch) {\n    return mapToObjectSameKey(inputs, (k, input) => {\n      const link = linkResult.getLinkByInput(this.parent.id, nid, k);\n      input.link = isNull(link) ? null : Link.create({ ...link, nodeId: this.siblingIds[link.nodeId] });\n      if (isNotNull(descendant)) {\n        input.subNodeId = descendant.siblingIds[input.subNodeId + ''];\n      }\n      return input;\n    });\n  }\n\n  private normalizeNodeOutputs(nid: string, outputs: { [p: number]: SerializedNodeOutput }, linkResult: LinkResult,\n                               descendant?: NodeBranch) {\n    return mapToObjectSameKey(outputs, (k, output) => {\n      const links = linkResult.getLinkByOutput(this.parent.id, nid, k) ?? [];\n      output.links = links.map(link => Link.create({ ...link, nodeId: this.siblingIds[link.nodeId] }));\n      if (isNotNull(descendant)) {\n        output.subNodeId = descendant.siblingIds[output.subNodeId + ''];\n      }\n      return output;\n    });\n  }\n\n}\n\nclass ContainerValidator implements IContainerRegistryValidator {\n  private readonly container: SerializedContainer;\n\n  constructor(container: SerializedContainer) {\n    this.container = container;\n  }\n\n  validate(cid: number | string | SerializedContainer | IContainer, strict?: boolean): IContainer {\n    return <IContainer>this.container;\n  }\n\n}\n\nclass NodeValidator implements INodeRegistryValidator {\n  private readonly nodes: { [nId: string]: { node: SerializedNode, descendant?: NodeBranch } };\n\n  constructor(nodes: { [p: string]: { node: SerializedNode; descendant?: NodeBranch } }) {\n    this.nodes = nodes;\n  }\n\n  validate(node: string, container: IContainer, strict?: boolean): INode {\n    return <INode>this.nodes[node]?.node;\n  }\n\n}\n","import { ContainerNode } from '../../container-node';\nimport { NodeTypeRegistry } from '../../node-type-registry';\n\nexport const CONTAINER_NODE_TYPE = 'container/folder';\n\n//Container: a node that contains a container of other nodes\nNodeTypeRegistry.registerNodeType(CONTAINER_NODE_TYPE, ContainerNode, null, true, true);\n","import { isNotNull, isNull } from '../../../utils/helper';\nimport { Node } from '../../node';\nimport { createNodeDbHelper } from '../../node-db-helper';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeIO } from '../../node-io';\n\nexport abstract class AbstractFolderIONode extends Node {\n\n  protected constructor(title: string, description: string) {\n    super();\n    this.title = title;\n    this.description = description;\n    this.iconImageUrl = NODE_INFO.container[\"folder-input\"].iconImageUrl;\n  }\n\n  onAdd() {\n    // To backward compatible\n    if (!this.isUnderContainer() || isNull(this.properties['slot']) || this.properties['slot'] === -1) return;\n    let slot = this.properties['slot'];\n    delete this.properties['slot'];\n    createNodeDbHelper().update(this, ['properties']);\n    this.correctParentIO(this.container.nodeItself(), slot);\n  }\n\n  abstract onRemoved();\n\n  abstract onAfterSettingsChange();\n\n  protected abstract correctParentIO(containerNode: Node, slot: number);\n\n  protected isUnderContainer() {\n    return isNotNull(this.container?.nodeItself());\n  }\n\n  protected findParentIOById(inputOrOutput: string) {\n    return Object.entries(this.container.nodeItself()[inputOrOutput])\n                 .find(([_, io]) => this.id === (<NodeIO>io).subNodeId) ?? [null, null];\n  }\n\n  protected hasItself(inputOrOutput: string): boolean {\n    return this.findParentIOById(inputOrOutput)[0] !== null;\n  }\n}\n","export default class ModbusByteOrder {\n  private static TYPES = {\n    INT16: 1,\n    UINT16: 2,\n    INT32: 3,\n    UINT32: 4,\n    FLOAT32: 5,\n    INT64: 6,\n    UINT64: 7,\n    DOUBLE64: 8,\n  };\n  private static ENDIAN = {\n    LEB_BEW: 0, //                 // CD AB LE-Byte BE-Word\n    LEB_LEW: 1, //LE byte, LE word // AB CD LE-Byte LE-Word // default\n    BEB_LEW: 2, //BE byte, LE word // BA DC BE-Byte LE-Word // nube RIO device\n    BEB_BEW: 3, //BE byte, BE word // DC BA BE-Byte BE-Word\n  };\n  static readByteOrder = (buffer, offset: number, type: number, endian: number) => {\n    let TYPES = ModbusByteOrder.TYPES;\n    let ENDIAN = ModbusByteOrder.ENDIAN;\n    let buf;\n    let value;\n    try {\n      if (type <= TYPES.UINT16) {\n        buf = buffer.slice(offset, offset + 2);\n      } else if (type <= TYPES.FLOAT32) {\n        buf = buffer.slice(offset, offset + 4);\n      } else {\n        buf = buffer.slice(offset, offset + 8);\n      }\n      if (endian === ENDIAN.BEB_LEW || (type <= TYPES.UINT16 && endian === ENDIAN.BEB_BEW)) {\n        buf.swap16();\n      } else if (type > TYPES.UINT16 && type <= TYPES.FLOAT32 && endian === ENDIAN.BEB_BEW) {\n        buf.swap32();\n      } else if (type >= TYPES.INT64 && endian === ENDIAN.BEB_BEW) {\n        buf.swap64();\n      }\n    } catch (error) {\n      console.log(`buffer readValue issue in modbus-point-methods. Buffer.alloc ${error}`);\n    }\n    try {\n      switch (type) {\n        case TYPES.INT16:\n          value = buf.readInt16LE(value);\n          break;\n        case TYPES.UINT16:\n          value = buf.readUInt16LE(value);\n          break;\n        case TYPES.INT32:\n          value = buf.readInt32LE(value);\n          break;\n        case TYPES.UINT32:\n          value = buf.readUInt32LE(value);\n          break;\n        case TYPES.FLOAT32:\n          value = buf.readFloatLE(value);\n          break;\n        case TYPES.INT64:\n          // value = buf.readBigInt64LE(BigInt(value)); https://github.com/streamich/memfs/issues/275\n          break;\n        case TYPES.UINT64:\n          // value = buf.readBigUInt64LE(BigInt(value));\n          break;\n        case TYPES.DOUBLE64:\n          value = buf.readDoubleLE(value);\n          break;\n      }\n    } catch (error) {\n      console.log(`buffer readValue issue in modbus-point-methods. switch case ${error}`);\n    }\n\n    return value;\n  };\n\n  static writeValue = (value: number, type: number, endian: number) => {\n    let TYPES = ModbusByteOrder.TYPES;\n    let ENDIAN = ModbusByteOrder.ENDIAN;\n    let buf;\n    try {\n      if (type <= TYPES.UINT16) {\n        buf = Buffer.alloc(2);\n      } else if (type <= TYPES.FLOAT32) {\n        buf = Buffer.alloc(4);\n      } else {\n        buf = Buffer.alloc(8);\n      }\n    } catch (error) {\n      console.log(`buffer writeValue issue in modbus-point-methods. Buffer.alloc  ${error}`);\n    }\n    try {\n      switch (type) {\n        case TYPES.INT16:\n          buf.writeInt16LE(value);\n          break;\n        case TYPES.UINT16:\n          buf.writeUInt16LE(value);\n          break;\n        case TYPES.INT32:\n          buf.writeInt32LE(value);\n          break;\n        case TYPES.UINT32:\n          buf.writeUInt32LE(value);\n          break;\n        case TYPES.FLOAT32:\n          buf.writeFloatLE(value);\n          break;\n        case TYPES.INT64:\n          // buf.writeBigInt64LE(BigInt(value)); TODO https://github.com/streamich/memfs/issues/275\n          break;\n        case TYPES.UINT64:\n          // buf.writeBigUInt64LE(BigInt(value));\n          break;\n        case TYPES.DOUBLE64:\n          buf.writeDoubleLE(value);\n          break;\n      }\n    } catch (error) {\n      console.log(`buffer writeValue issue in modbus-point-methods :switch case ${error}`);\n    }\n    try {\n      if (endian === ENDIAN.BEB_LEW || (type <= TYPES.UINT16 && endian === ENDIAN.BEB_BEW)) {\n        buf.swap16();\n      } else if (type > TYPES.UINT16 && type <= TYPES.FLOAT32 && endian === ENDIAN.BEB_BEW) {\n        buf.swap32();\n      } else if (type >= TYPES.INT64 && endian === ENDIAN.BEB_BEW) {\n        buf.swap64();\n      }\n      return buf;\n    } catch (error) {\n      console.log(`buffer writeValue issue in modbus-point-methods :buf.swap() ${error}`);\n    }\n  };\n}\n","import FileUtils from './file-utils';\n\nexport default class UuidUtils {\n  /**\n   * Generates a UUID 28 digit\n   * @returns {string}\n   */\n  static createUUID = (a: string = ''): string =>\n    a\n      ? ((Number(a) ^ (Math.random() * 16)) >> (Number(a) / 4)).toString(16)\n      : `${1e7}-${1e3}-${4e3}-${8e3}-${1e11}`.replace(/[018]/g, UuidUtils.createUUID);\n  /**\n   * Generates a UUID 8 digit\n   * @returns {string}\n   */\n  static create8DigId = (a: string = ''): string =>\n    a\n      ? ((Number(a) ^ (Math.random() * 16)) >> (Number(a) / 4)).toString(16)\n      : `${1e7}`.replace(/[018]/g, UuidUtils.create8DigId);\n\n  /**\n   * Generates a UUID 12 digit\n   * @returns {string}\n   */\n  static create12DigId = (a: string = ''): string =>\n    a\n      ? ((Number(a) ^ (Math.random() * 16)) >> (Number(a) / 4)).toString(16)\n      : `${1e7}-${4e3}`.replace(/[018]/g, UuidUtils.create12DigId);\n\n  static isUUID(data: string): boolean {\n    const dataArray: string[] = data\n      .toString()\n      .trim()\n      .split('-');\n    return dataArray.length >= 1 && dataArray[0].length === 8;\n  }\n\n  static async isUUIDFile(filePath): Promise<boolean> {\n    try {\n      let fileContent = await FileUtils.readFile(filePath);\n      if (fileContent) {\n        return UuidUtils.isUUID(fileContent);\n      } else return false;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  static async makeUUIDFile(dirPath, fileName): Promise<void> {\n    try {\n      await FileUtils.createDirectory(dirPath);\n      await FileUtils.writeFile(`${dirPath}/${fileName}`, UuidUtils.create8DigId());\n    } catch (e) {\n      throw e;\n    }\n  }\n}\n","interface findVal {\n  valueWithKey: object,\n  value: number;\n}\n\nenum compareType {\n  Equals = 'Equals',\n  NotEquals = 'Not Equal',\n  GreaterThanEqual = 'Greater Than Equal',\n  GreaterThan = 'Greater Than',\n  LessThanEqual = 'Less Than Equal',\n  LessThan = 'Less Than',\n  Includes = 'Includes',\n  startsWith = 'Starts With',\n  endsWith = 'Ends With'\n}\n\nexport default class jsonStringCompare {\n  /**\n   * \n   */\n  static compare(self: any, s1: any, s2: any) {\n    const inputType = self.settings['function'].value;\n    if (self.settings['isNumber'].value) {\n      s1 = Number(s1)\n      s2 = Number(s2)\n    }\n    switch (inputType) {\n      case compareType.Equals:\n        return s1 === s2;\n      case compareType.NotEquals:\n        return s1 !== s2;\n      case compareType.GreaterThanEqual:\n        return s1 >= s2;\n      case compareType.GreaterThan:\n        return s1 > s2;\n      case compareType.LessThanEqual:\n        return s1 <= s2;\n      case compareType.LessThan:\n        return s1 < s2;\n      case compareType.LessThan:\n        return s1 < s2;\n      case compareType.Includes:\n        return s1.includes(s2);\n      case compareType.startsWith:\n        return s1.startsWith(s2);\n      case compareType.endsWith:\n        return s1.endsWith(s2);\n      default:\n        return s1 === s2;\n    }\n   \n  }\n\n  static findVal(object: { [x: string]: any; }, key: string) {\n    let value: findVal;\n    Object.keys(object).some(function (k) {\n      if (k === key) {\n        value = {\n          valueWithKey: { [key]: object[k] },\n          value: object[k]\n        }\n      }\n      if (object[k] && typeof object[k] === 'object') {\n        value = this.findVal(object[k], key);\n        return value !== undefined;\n      }\n    });\n    return value;\n  }\n\n\n  \n\n}\n","import { NodeSetting } from '../node-io';\n\nexport default class SettingUtils {\n  /**\n   * Inserts new setting into specific position in this.settings\n   * @returns {object}\n   */\n  static insertIntoObjectAtPosition(\n    object: { [name: string]: NodeSetting },\n    insert: object,\n    after: string = '',\n    before: string = '',\n  ): { [name: string]: NodeSetting } {\n    if (before === '' && after === '') {\n      // add to end\n      Object.assign(object, insert);\n      return object;\n    }\n    // Create a temp object and index variable\n    const newObj = {};\n    let insertAfter = false;\n    const matchBoth = before !== '' && after !== '';\n    let foundFlag = false;\n\n    // Loop through the original object\n    for (let prop in object) {\n      if (object.hasOwnProperty(prop)) {\n        // look for matches for before and after keys\n        if (!foundFlag && matchBoth && insertAfter && before === prop) {\n          Object.assign(newObj, insert);\n          foundFlag = true;\n          insertAfter = false;\n        } else if (!foundFlag && !matchBoth && (insertAfter || before === prop)) {\n          Object.assign(newObj, insert);\n          foundFlag = true;\n          insertAfter = false;\n        } else if (!foundFlag && prop === after) {\n          insertAfter = true;\n        }\n        // Add the current item in the loop\n        newObj[prop] = object[prop];\n      }\n    }\n    if (!foundFlag) Object.assign(newObj, insert);\n\n    return newObj;\n  }\n}\n","export default class NodeUtils {\n  /**\n   * @Deprecated: Use Node::persistProperties\n   */\n  static persistProperties(\n    self,\n    saveSettings = false,\n    saveProperties = false,\n    saveInputs = false,\n    saveOutputs = false,\n  ) {\n    if (!self.container.db) return;\n    var setProps = {};\n    if (saveSettings) setProps['settings'] = self.settings;\n    if (saveProperties) setProps['properties'] = self.properties;\n    if (saveInputs) setProps['inputs'] = self.inputs;\n    if (saveOutputs) setProps['outputs'] = self.outputs;\n    self.container.db.updateNode(self.id, self.container.id, {\n      $set: setProps,\n    });\n  }\n}\n","export default class EdgeGPIOUtils {\n  /*\n  used for scaling a UO !!! YES its backwards 0 is high and 100 is low !!!\n  to drive a UO as an DO send 0 for ON and 100 for OFF // Example to send 6vdc console.log(scaleToGPIOValue(60, 0, 120)) returns 48\n  to drive a UO as an AO send 100 to 0 as a float\n  */\n  static scaleToGPIOValue = (\n    val: number,\n    minOutput: number,\n    maxOutput: number,\n    minInput = 120,\n    maxInput = 0,\n  ): number => {\n    let value = val;\n    let pinValue = ((maxOutput - minOutput) * (value - minInput)) / (maxInput - minInput) + minOutput;\n    if (pinValue > maxOutput) {\n      pinValue = maxOutput;\n      value = maxInput;\n    } else if (pinValue < minOutput) {\n      pinValue = minOutput;\n      value = minInput;\n    }\n    return pinValue;\n  };\n\n  /*\n    used for scaling a UI\n    Example for scaling a 0/10dc to 0 to 1000. \n    scaleFromGPIOValue(0.7, 0, 1000)\n    */\n  static scaleFromGPIOValue = (\n    pinValue: number,\n    minOutput: number,\n    maxOutput: number,\n    minInput = 0,\n    maxInput = 1,\n  ): number => {\n    return ((maxOutput - minOutput) * (pinValue - minInput)) / (maxInput - minInput) + minOutput;\n  };\n\n  /*\n    used for scaling a UI as a DI\n    off/open = around 0.9 vdc. When on the pin jumper its set as a 10K\n    on/closed = around 0.1 vdc\n    */\n  static uiAsDI = (val: number): number => {\n    if (val > 0.6) {\n      return 0; // false/open\n    }\n    if (val < 0.2) {\n      return 1; // true/closed\n    }\n  };\n\n  /*\n    The bbb returns the DI as 0 for closed/on and 1 for open/off\n  */\n  static diInvert = (val: number): number => {\n    return (val ^= 1);\n  };\n\n  //  scale or convert 4-20mA reading to temperature\n  //      -value_420 is input value in 4-20mA\n  //      -min_target is minimum target temperature @4mA, defualts to 0C\n  //      -max_target is maximum target temperature  @20mA, defualts to 100C\n  //      -min_range is minimum input range, defaults to 4 mA.\n  //      -max_range is maximum input range, defaults to 20mA\n\n  static scale420maToRange(value_420: number, min_target: number, max_target: number) {\n    const limit = true,\n      min_range = 4,\n      max_range = 20;\n    const slope = (max_target - min_target) / (max_range - min_range);\n    if (limit)\n      if (value_420 <= min_range) return min_target;\n      else if (value_420 >= max_range) return max_target;\n    return (value_420 - min_range) * slope + min_target;\n  }\n\n  //  scale or convert ui reading to 4-20mA\n  //      -ui_value is input value in ui reading (0-1 range)\n  //      -min_target is minimum target output, defualts to 4mA\n  //      -max_target is maximum target output, defualts to 20mA\n  //      -min_range is minimum input range, defaults to 0.0\n  //      -max_range is maximum input range, defaults to 1.0\n  //\n\n  static scaleUI420ma(ui_value: number, min_range: number, max_range: number) {\n    const min_target = 4,\n      max_target = 20,\n      limit = true;\n    const slope = max_target / (max_range - min_range);\n    const value_420 = (ui_value - min_range) * slope;\n    if (limit)\n      if (value_420 <= min_target) return min_target;\n      else if (value_420 >= max_target) return max_target;\n\n    return value_420;\n  }\n}\n","module.exports = require(\"node-bacnet\");","import { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\n\nexport enum LORA_DATA_TYPE_NAMES {\n  INT8 = 0,\n  UINT8,\n  INT16,\n  UINT16,\n  INT32,\n  UINT32,\n  FLOAT,\n}\n\nexport const LORA_DATA_TYPE_LENGTHS = [\n  1, // INT8\n  1, // UINT8\n  2, // INT16\n  2, // UINT16\n  4, // INT32\n  4, // UINT32\n  4, // FLOAT\n];\n\nexport class LoRaRawTwoWayInput extends Node {\n  payloadDefinition: Array<LORA_DATA_TYPE_NAMES> = [];\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/lora-raw\"][\"lora-raw-two-way-in\"].title;\n    this.description = NODE_INFO[\"protocols/lora-raw\"][\"lora-raw-two-way-in\"].description;\n    this.settings['enable'] = NodeSetting.create({\n      description: 'enable',\n      type: SettingType.BOOLEAN,\n      value: false,\n    });\n    this.settings['senderId'] = NodeSetting.create({\n      description: 'sender Id',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n    this.settings['port'] = NodeSetting.create({\n      description: 'port number',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n    this.settings['types'] = NodeSetting.create({\n      description: 'Types',\n      type: SettingType.READONLY,\n      value: 'INT8, INT16, INT32, FLOAT',\n      // value: 'INT8, UINT8, INT16, UINT16, INT32, UINT32, FLOAT',\n    });\n    this.settings['definition'] = NodeSetting.create({\n      description: 'payload definition (JSON)',\n      type: SettingType.STRING,\n      value: '',\n    });\n\n    this.addInput('rawInput', Type.STRING);\n    this.addOutput('error', Type.STRING);\n  }\n\n  init() {\n    this.updateOutputs();\n  }\n\n  onAdded() {\n    this.payloadDefinition = this.stringToDataTypes(this.settings['definition'].value);\n  }\n\n  onInputUpdated() {\n    let data: string = this.getInputData(0) || '';\n    if (this.settings['enable'].value === false) return;\n    if (!data) return;\n    if (!data || data.length <= 6 * 2 || data.substring(0, 8) !== 'FFFFFFFF') {\n      // 6 = 4(ff's) + 1(slaveid) + 1(port). (x2 for HEX)\n      return;\n    }\n\n    const senderId = parseInt(data.substring(10, 12), 16);\n    const port = parseInt(data.substring(12, 14), 16);\n\n    if (senderId !== this.settings['senderId'].value || port !== this.settings['port'].value) {\n      return;\n    }\n\n    // remove newline\n    if (data.substring(data.length - 2, data.length) === '\\r\\n') {\n      data = data.substring(0, data.length - 2);\n    } else if (data.length % 2 === 1 && data[data.length - 1] === '\\n') {\n      data = data.substring(0, data.length - 1);\n    }\n\n    // PARSING\n\n    const parseError = msg => {\n      this.setOutputData(0, 'parse error: ' + msg);\n    };\n\n    // convert hex string to buffer\n    let buffer = Buffer.from(data.substring(14), 'hex');\n    let pointParsed = new Array<boolean>(this.payloadDefinition.length);\n    pointParsed.fill(false);\n\n    for (let i = 0; i < buffer.length; ) {\n      let point = buffer.readUInt8(i++);\n      let type_length = 0;\n\n      if (point >= this.payloadDefinition.length) {\n        parseError('invalid point ' + point);\n        return;\n      }\n      if (pointParsed[point]) {\n        parseError('point already parsed: ' + point);\n        return;\n      }\n\n      type_length = LORA_DATA_TYPE_LENGTHS[this.payloadDefinition[point]];\n\n      if (buffer.length - i < type_length) {\n        parseError('invalid length');\n        return;\n      }\n\n      switch (this.payloadDefinition[point]) {\n        case LORA_DATA_TYPE_NAMES.INT8:\n          this.setOutputData(point + 1, buffer.readInt8(i));\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT8:\n          this.setOutputData(point + 1, buffer.readUInt8(i));\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT16:\n          this.setOutputData(point + 1, buffer.readInt16LE(i));\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT16:\n          this.setOutputData(point + 1, buffer.readUInt16LE(i));\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT32:\n          this.setOutputData(point + 1, buffer.readInt32LE(i));\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT32:\n          this.setOutputData(point + 1, buffer.readUInt32LE(i));\n          break;\n\n        case LORA_DATA_TYPE_NAMES.FLOAT:\n          this.setOutputData(point + 1, buffer.readFloatLE(i));\n          break;\n      }\n      pointParsed[point] = true;\n      i += type_length;\n    }\n\n    this.setOutputData(0, null);\n  }\n\n  onAfterSettingsChange() {\n    this.payloadDefinition = this.updateOutputs();\n    this.setOutputData(0, null);\n    this.onInputUpdated();\n  }\n\n  private updateOutputs() {\n    const data = this.stringToDataTypes(this.settings['definition'].value);\n    if (this.payloadDefinition.length !== data.length) {\n      const outputsCount = this.getOutputsCount();\n      for (let i = 1; i < outputsCount; i++) {\n        this.removeOutput(i);\n      }\n      for (let i = 0; i < data.length; i++) {\n        this.addOutput(i.toString(), Type.NUMBER);\n      }\n      this.updateNodeOutput();\n    }\n    return data;\n  }\n\n  stringToDataTypes(str) {\n    const data = str\n      .toUpperCase()\n      .replace(/ /g, '')\n      .split(',')\n      .filter(x => x !== '');\n\n    if (data && data.length) {\n      for (let i = 0; i < data.length; i++) {\n        if (LORA_DATA_TYPE_NAMES[data[i]] === undefined) {\n          this.setOutputData(1, 'settings parse error');\n          return undefined;\n        }\n        data[i] = LORA_DATA_TYPE_NAMES[data[i]];\n      }\n    }\n    return data;\n  }\n}\nContainer.registerNodeType('protocols/lora-raw/lora-raw-two-way-in', LoRaRawTwoWayInput);\n","module.exports = require(\"crypto\");","module.exports = require(\"serialport\");","\n\nimport { exec } from 'child_process';\nimport OsUtils from '../../nodes/utils/os-utils';\nconst network = require('network'); //for getting IPs and gateway address\nconst cp = require('child_process');\nconst set_ip_address = require('set-ip-address'); //for setting IPs\nconst ip = require('ip'); //for checking if IPs are valid\n\nexport default class IpAddressUtils {\n  /**\n   * Get current network info\n   * @returns {object}\n   */\n  static getActiveNetworks() {\n    return new Promise<Array<any>>(resolve => {\n      network.get_interfaces_list(function (err, obj) {\n        if (err) resolve();\n        if (!obj) resolve();\n        resolve(obj);\n      });\n    });\n  }\n\n  /**\n   * Runs a system command\n   * @param iface {string} Name of the physical system interface\n   * @param upDown {string} system command options\n   * @returns {Promise}\n   *\n   */\n\n  static networkUpDown(iface: string, upDown: string) {\n    return new Promise((resolve, reject) => {\n      let command = `sudo ip link set ${iface} ${upDown}`;\n      // let command = 'sudo ip link set' +' '+ iface +' '+upDown\n      exec(command, (err, stdout, stderr) => {\n        if (err) {\n          reject({ err, stderr });\n        } else {\n          resolve(stdout);\n        }\n      });\n    });\n  }\n\n  /** check if new ip is valid\n   * @description Method for checking and build an ip address\n   * @param {string} newIP pass in an ip address\n   * @param {string} netNetmask pass in an ip net mask\n   * @param {string} newGateway pass in an  ip gateway\n   * @param newNameserver\n   * @returns {object} Will return a validIp: true, ipSubnet: '192.168.15.1/24 or if invalid it will return false\n   */\n\n  static checkIpValid(newIP: string, netNetmask: string, newGateway: string, newNameserver: string) {\n    const checkIP = ip.isV4Format(newIP);\n    const checkNetMask = ip.isV4Format(netNetmask);\n    const checkGateway = ip.isV4Format(newGateway);\n    const nameserver = ip.isV4Format(newNameserver);\n\n    if (checkIP && checkNetMask && checkGateway && nameserver) {\n      return true;\n    } else return false;\n  }\n\n  /**\n   * Gets BBB interface details\n   * @returns {Promise}\n   *\n   */\n  static bbbGetInterfaceDetails() {\n    return new Promise((resolve, reject) => {\n      cp.execSync('connmanctl services', (err, stdout, stderr) => {\n        if (err) {\n          reject({ err, stderr });\n        } else {\n          resolve(\n            stdout\n              .toString()\n              .replace(/\\s/g, '')\n              .substring(8),\n          );\n        }\n      });\n    });\n  }\n\n  /**\n   * Set BBB network as DHCP\n   * @returns {Promise}\n   *\n   */\n  static bbbSetIPDHCP(iface) {\n    return new Promise((resolve, reject) => {\n      const setIpDHCP = `sudo connmanctl config ${iface} --ipv4 dhcp`;\n      cp.execSync(setIpDHCP, (err, stdout, stderr) => {\n        if (err) {\n          reject({ err, stderr });\n        } else {\n          resolve(true);\n        }\n      });\n    });\n  }\n\n  /**\n   * Set BBB network as fixed IP\n   * @returns {Promise}\n   *\n   */\n  static bbbSetIPFixed(iface, ipAddress: string, subnetMask: string, gateway: string) {\n    return new Promise((resolve, reject) => {\n      const setIP = `sudo connmanctl config ${iface} --ipv4 manual ${ipAddress} ${subnetMask} ${gateway} --nameservers 8.8.8.8 8.8.4.4`;\n      cp.execSync(setIP, (err, stdout, stderr) => {\n        if (err) {\n          reject({ err, stderr });\n        } else {\n          resolve(true);\n        }\n      });\n    });\n  }\n\n  /**\n   * Set IP for rubix\n   * @returns {Promise}\n   * will modify the /etc/dhcpcd.conf \n   */\n  static updateIpRubixCompute(interface1Eth, dhcp1Eth: boolean, eth1Ip, eth1Sub, eth1Gate, eth1NameServer, interface2Eth, dhcp2Eth: boolean, eth2Ip, eth2Sub, eth2Gate, eth2NameServer) {\n    return new Promise<any>((resolve, reject) => {\n\n      const msgUpdateIp = 'SET: new ip '\n      const msgIncorrectHost = 'ERROR: incorrect host type'\n      const msgFailToUpdate = 'ERROR: invalid ip settings'\n      const host = 'BCM2835'  //PI BCM2835 //aidan's pc 20L5CTO1WW, MS-7A66\n\n      const interfaceEth1 = interface1Eth\n      const dhcpEth1 = dhcp1Eth\n      const ethIp1 = eth1Ip;\n      const ethSub1 = eth1Sub;\n      const ethGate1 = eth1Gate;\n      const ethNameServer1 = eth1NameServer;\n\n      const interfaceEth2 = interface2Eth\n      const dhcpEth2 = dhcp2Eth\n      const ethIp2 = eth2Ip;\n      const ethSub2 = eth2Sub;\n      const ethGate2 = eth2Gate;\n      const ethNameServer2 = eth2NameServer;\n\n      const checkIpValidEth1 = IpAddressUtils.checkIpValid(\n        ethIp1,\n        ethSub1,\n        ethGate1,\n        ethNameServer1,\n      );\n      const checkIpValidEth2 = IpAddressUtils.checkIpValid(\n        ethIp2,\n        ethSub2,\n        ethGate2,\n        ethNameServer2,\n      );\n\n      console.log(interface1Eth, dhcpEth1, eth1Ip, eth1Sub, eth1Gate, eth1NameServer, interface2Eth, dhcpEth2, eth2Ip, eth2Sub, eth2Gate, eth2NameServer, \"checkIpValidEth1=\", checkIpValidEth1, \"checkIpValidEth2=\", checkIpValidEth2)\n      OsUtils.systemInfo()\n        .then(e => {\n          if (e.system.model === host) {\n            if (checkIpValidEth1 && checkIpValidEth2) {\n              //network update\n              let interfacesArray = [];\n              if (dhcpEth1 === true) {\n                //DHCP\n                console.log(\"dhcpEth1 === true\")\n                const eth1 = {\n                  interface: interfaceEth1,\n                  dhcp: true\n                };\n                interfacesArray.push(eth1);\n              }\n              if (dhcpEth2 === true) {\n                //DHCP\n                console.log(\"dhcpEth2 === true\")\n                const eth2 = {\n                  interface: interfaceEth2,\n                  dhcp: true\n                };\n                interfacesArray.push(eth2);\n              }\n\n              if (dhcpEth1 === false) {\n                //Static\n                console.log(\"dhcpEth1 === false\")\n                const subnetMaskLength = ip.subnet(ethIp1, ethSub1);\n                const eth1 = {\n                  interface: interfaceEth1,\n                  ip_address: ethIp1,\n                  prefix: subnetMaskLength.subnetMaskLength,\n                  gateway: ethGate1,\n                  nameservers: [ethNameServer1],\n                };\n                interfacesArray.push(eth1);\n              }\n\n              if (dhcpEth2 === false) {\n                //Static\n                console.log(\"dhcpEth2 === false\")\n                const subnetMaskLength = ip.subnet(ethIp2, ethSub2);\n                const eth2 = {\n                  interface: interfaceEth2,\n                  ip_address: ethIp2,\n                  prefix: subnetMaskLength.subnetMaskLength,\n                  gateway: ethGate2,\n                  nameservers: [ethNameServer2],\n                };\n                interfacesArray.push(eth2);\n              }\n              console.log(`${msgUpdateIp} ${JSON.stringify(interfacesArray)} @ ${interfaceEth1} @ ${interfaceEth2}`)\n              // resolve(`${msgUpdateIp} ${JSON.stringify(interfacesArray)} @ ${interfaceEth1}`)\n              // set new IP\n              set_ip_address.configure(interfacesArray).then((e) => {\n                console.log(`${msgUpdateIp} ${JSON.stringify(interfacesArray)} @ ${interfaceEth1} @ ${interfaceEth2} msg ${e}`)\n                resolve(`${msgUpdateIp} ${JSON.stringify(interfacesArray)} @ ${interfaceEth1} msg ${e}`)\n              });\n\n            } else {\n              console.log(`${msgFailToUpdate} @ ${interfaceEth1}  @ ${interfaceEth2}`)\n              reject(`${msgFailToUpdate} @ ${interfaceEth1}  @ ${interfaceEth2}`)\n            }\n          } else {\n            console.log(`${msgIncorrectHost} ${e.system.model} @ ${interfaceEth1} @ ${interfaceEth2}`)\n            reject(`${msgIncorrectHost} ${e.system.model} @ ${interfaceEth1} @ ${interfaceEth2}`)\n          }\n        }).catch(err => {\n          console.log(`${msgFailToUpdate} @ ${interfaceEth1} @ ${interfaceEth2} ${err}`)\n          reject(`${msgFailToUpdate} @ ${interfaceEth1} @ ${interfaceEth2} ${err}`)\n        });\n    });\n  }\n\n\n\n}\n","module.exports = require(\"set-ip-address\");","module.exports = require(\"ip\");","export default class NodeColours {\n  /**\n   * Changes the node colour for the user\n   * NORMAL, light grey\n   * INFO, light green\n   * WARNING, light orange\n   * ERROR, light red\n   * @param self {string} pass in this instance\n   * @param NodeState {string} pass in the colour to use\n   */\n    static nodeColourChange(self, NodeState) {\n        self.setNodeState(NodeState);\n    }\n}\n","module.exports = require(\"source-map-support\");","module.exports = require(\"process\");","module.exports = require(\"minimist\");","module.exports = require(\"dotenv\");","import { Colors, create } from 'logplease';\nimport { Database } from '../database/database';\nimport {\n  EDGES_PARENT_CONTAINER_TYPE,\n  MODULES_PARENT_CONTAINER_TYPE,\n  SERVICES_PARENT_CONTAINER_TYPE,\n} from '../nodes/constants';\nimport { Container, ContainerRegistry } from '../nodes/container';\nimport { Node } from '../nodes/node';\nimport { NodeFactory } from '../nodes/node-factory';\nimport { SerializedNode } from '../nodes/node-interface';\nimport { EdgesParentContainerNode } from '../nodes/nodes/IoT/datapoint-node';\nimport { ModulesParentContainerNode, ServicesParentContainerNode } from '../nodes/nodes/IoT/installer-node';\n\nconst logger = create('backend', { color: Colors.Yellow });\n\nexport interface BackendSyncConfiguration {\n  enabled: boolean,\n  baseUrl: string,\n  nodeRefreshIntervalSeconds: number,\n  pointRefreshIntervalSeconds: number,\n  nodeDistance: number\n}\n\nexport class Backend {\n  database: Database;\n  backendSyncCfg: BackendSyncConfiguration;\n  edgesContainer: EdgesParentContainerNode;\n  modulesContainer: ModulesParentContainerNode;\n  servicesContainer: ServicesParentContainerNode;\n\n  constructor(database: Database, backendSyncCfg: BackendSyncConfiguration) {\n    this.database = database;\n    this.backendSyncCfg = backendSyncCfg;\n  }\n\n  start(): void {\n    if (!this.backendSyncCfg.enabled) {\n      return;\n    }\n    this.ensureParentContainers().then(() => this.refreshPeriodically());\n  }\n\n  private ensureParentContainers(): Promise<any> {\n    return this.findOrCreateNode(EDGES_PARENT_CONTAINER_TYPE, node => node instanceof EdgesParentContainerNode)\n               .then(edgesContainer => (this.edgesContainer = edgesContainer as EdgesParentContainerNode))\n               .then(() => this.findOrCreateNode(MODULES_PARENT_CONTAINER_TYPE,\n                                                 node => node instanceof ModulesParentContainerNode))\n               .then(modulesContainer => (this.modulesContainer = modulesContainer as ModulesParentContainerNode))\n               .then(() => this.findOrCreateNode(SERVICES_PARENT_CONTAINER_TYPE,\n                                                 node => node instanceof ServicesParentContainerNode))\n               .then(servicesContainer => (this.servicesContainer = servicesContainer as ServicesParentContainerNode));\n  }\n\n  private findOrCreateNode<N extends Node>(type_name: string, f: (Node) => boolean): Promise<N> {\n    const root: Container = ContainerRegistry.instance().rootContainer();\n    return new Promise((resolve, reject) => {\n      const existingNode = root.getNodes().find(f);\n      if (existingNode) {\n        resolve(<N>existingNode);\n      } else {\n        return root.nodeRegistry().register(NodeFactory.create(<SerializedNode>{ type: type_name }, true));\n      }\n    });\n  }\n\n  private refreshPeriodically() {\n    setInterval(() => this.refreshParentContainers(), this.backendSyncCfg.nodeRefreshIntervalSeconds * 1000);\n  }\n\n  private refreshParentContainers() {\n    this.edgesContainer.syncWithBackend();\n    this.modulesContainer.syncWithBackend();\n    this.servicesContainer.syncWithBackend();\n  }\n}\n","module.exports = require(\"slugid\");","module.exports = require(\"enumify\");","import { IOType } from '../nodes/node-io';\nimport { compareNodeIO, SlimNodeIO } from '../nodes/node-link';\nimport { ApiResult } from './api-result';\n\nexport class LinkResult implements ApiResult<object> {\n\n  message: string;\n  private readonly _map: {\n    [cid: string]: {\n      [nid: string]: {\n        nid: string,\n        inputs: { [ioId: string]: SlimNodeIO },\n        outputs: { [ioId: string]: SlimNodeIO[] }\n      }\n    }\n  };\n\n  constructor(data?: {\n    [cid: string]: {\n      [nid: string]: {\n        nid: string,\n        inputs: { [ioId: string]: SlimNodeIO },\n        outputs: { [ioId: string]: SlimNodeIO[] }\n      }\n    }\n  }) {\n    this._map = data ?? {};\n  }\n\n  push(cid: string | number, nid: string | number, type: IOType, ioId: string | number,\n       ...links: SlimNodeIO[]): LinkResult {\n    this._map[cid] = this._map[cid] ?? {};\n    this._map[cid][nid] = this._map[cid][nid] ?? { nid: nid + '', inputs: {}, outputs: {} };\n    if (type === 'input') {\n      this._map[cid][nid].inputs[ioId] = (links ?? [])[0] ?? null;\n    }\n    if (type === 'output') {\n      const o = this._map[cid][nid].outputs[ioId] ?? [];\n      const u = links ?? [];\n      this._map[cid][nid].outputs[ioId] = o.concat(u.filter(io1 => !o.some(io2 => compareNodeIO(io1, io2))));\n    }\n    return this;\n  }\n\n  hasInput(cid: string | number, nid: string | number, ioId: string | number): boolean {\n    return this.getLinkByInput(cid, nid, ioId) !== undefined;\n  }\n\n  getLinkByInput(cid: string | number, nid: string | number, ioId: string | number): SlimNodeIO {\n    return (this._map[cid] ?? {})[nid]?.inputs[ioId];\n  }\n\n  getLinkByOutput(cid: string | number, nid: string | number, ioId: string | number): SlimNodeIO[] {\n    return (this._map[cid] ?? {})[nid]?.outputs[ioId];\n  }\n\n  result(): {\n    [cid: string]: {\n      [nid: string]: {\n        nid: string,\n        inputs: { [ioId: string]: SlimNodeIO },\n        outputs: { [ioId: string]: SlimNodeIO[] }\n      }\n    }\n  } {\n    return this._map;\n  }\n\n  merge(r: LinkResult): LinkResult {\n    Object.keys(r.result()).forEach(cid => Object.values(r.result()[cid]).forEach(d => {\n      Object.keys(d.inputs).forEach(k => this.push(cid, d.nid, 'input', k, d.inputs[k]));\n      Object.keys(d.outputs).forEach(k => this.push(cid, d.nid, 'output', k, ...d.outputs[k]));\n    }));\n    return this;\n  }\n\n}\n","import { Node } from '../nodes/node';\nimport { DispatcherRegistry } from './DispatcherRegistry';\nimport { PubSubHelpers } from './PubSubHelpers';\n\nexport abstract class DispatchNode extends Node {\n  /**\n   * `@Dispatch` will call it: for listening dispatched value\n   * @param {any} value - value got from `@Dispatch`\n   */\n  abstract subscribe(value: any): void;\n\n  /**\n   * For listening store protocol, point changes\n   */\n  abstract updateProtocols(): void;\n\n  abstract getSelectedProtocol(): string;\n\n  abstract getSelectedPoint(): string;\n\n  abstract getSelectedPointName(): string;\n\n  onAdded() {\n    super.onAdded();\n    DispatcherRegistry.instance().register(this, true);\n    PubSubHelpers.map(this);\n  }\n\n  onRemoved() {\n    DispatcherRegistry.instance().remove(this);\n    PubSubHelpers.unMap(this);\n  }\n}\n","import { DispatchNode } from './DispatchNode';\n\nexport const UNKNOWN_POINT_NAME = 'Unknown';\n\nexport interface Point {\n  msg: any;\n  name: string;\n  listeners: DispatchNode[];\n  soft: boolean;\n}\n\nexport interface Points {\n  [point: string]: Point;\n}\n\nexport interface Store {\n  [protocol: string]: { points: Points };\n}\n\nexport interface IPubSub {\n  getStore(): Store;\n\n  /**\n   * Add point on a protocol whose output will be subscribed by listeners\n   * @param {string} protocol - protocol for making things on different selection\n   * @param {string} point - unique point id `${cid}/${id}`\n   * @param {string} name - display name for point\n   * @param {boolean} soft - true when it's real, false when it's unreal added from DispatchNode\n   * soft is added for subscribing to the topic when topic is not added\n   */\n  addPoint(protocol: string, point: string, name: string, soft: boolean): void;\n\n  /**\n   * Remove added input point from it's protocol\n   * @param {string} protocol - protocol for making things on different selection\n   * @param point - unique point id `${cid}/${id}`\n   */\n  removePoint(protocol: string, point: string): void;\n\n  /**\n   * When `name` gets changed we need to notify it's changes to all subscriber\n   * @param {string} protocol - protocol for making things on different selection\n   * @param {string} point - unique point id `${cid}/${id}`\n   * @param {string} name - display name for point\n   */\n  renamePoint(protocol: string, point: string, name: string): void;\n  /**\n   * Dispatch value for listeners\n   * @param {string} protocol - protocol for making things on different selection\n   * @param {string} point - unique point id `${cid}/${id}`\n   * @param {any} value - value to send to it's listener\n   */\n  dispatch(protocol: string, point: string, value: any): void;\n\n  /**\n   * Add node for subscription on particular protocol and point\n   * @param {string} protocol - protocol for making things on different selection\n   * @param {string} point - unique point id `${cid}/${id}`\n   * @param {string} name - display name for point\n   * @param {DispatchNode} node - listener node for the registration\n   */\n  connect(protocol: string, point: string, name: string, node: DispatchNode): void;\n\n  /**\n   * Remove node from the subscription\n   * @param {string} protocol - protocol for making things on different selection\n   * @param {string} point - unique point id `${cid}/${id}`\n   * @param {DispatchNode} node - listener node for the registration\n   */\n  disconnect(protocol: string, point: string, node: DispatchNode): void;\n}\n","import { DispatcherRegistry } from './DispatcherRegistry';\nimport { DispatchNode } from './DispatchNode';\nimport { IPubSub, Store } from './IPubSub';\n\n/**\n * Example:\n * {\n *   \"protocol1\": {\n *     \"points\": {\n *       \"point1\": { msg: <any>, name: 'Point1', listener: [{node: node1, soft: true}, {node: node2, soft: false}, ...]},\n *       \"point2\": { msg: <any> , name: 'Point2', listener: [{node: node1, soft: true}, {node: node2, soft: false}, ...]}\n *     },\n *   },\n *   \"protocol2\": {\n *     \"points\": {\n *       \"point1\": { msg: <any>, name: 'Point1', listener: [{node: node1, soft: true}, {node: node2, soft: false}, ...]},\n *       \"point2\": { msg: <any>, name: 'Point2', listener: [{node: node1, soft: true}, {node: node2, soft: false}, ...]}\n *     },\n *   }\n * }\n */\nclass PubSub implements IPubSub {\n  store: Store = {};\n\n  public getStore(): Store {\n    return this.store;\n  }\n\n  public addPoint(protocol: string, point: string, name: string, soft: boolean): void {\n    if (!this.store[protocol]) {\n      this.store[protocol] = { points: {} };\n    }\n    if (!this.store[protocol].points[point]) {\n      this.store[protocol].points[point] = { msg: {}, name, listeners: [], soft };\n    } else {\n      // Point exist already and soft is true and now it's inserted in real\n      if (this.store[protocol].points[point].soft && !soft) {\n        this.store[protocol].points[point].soft = soft;\n      }\n    }\n    this.updateProtocols();\n  }\n\n  public removePoint(protocol: string, point: string): void {\n    if (this.store[protocol]?.points?.[point]) {\n      delete this.store[protocol].points[point];\n    }\n    if (Object.keys(this.store[protocol]?.points || {})?.length === 0) {\n      delete this.store[protocol];\n    }\n    this.updateProtocols();\n  }\n\n  public renamePoint(protocol: string, point: string, name: string): void {\n    if (this.store?.[protocol]?.points?.[point]) {\n      this.store[protocol].points[point].name = name;\n    }\n    this.updateProtocols();\n  }\n\n  public dispatch(protocol: string, point: string, value: any): void {\n    if (this.store[protocol]?.points?.[point]) {\n      this.store[protocol].points[point].msg = value;\n      this.store[protocol].points[point].listeners.forEach(node => {\n        node.subscribe(value);\n      });\n    }\n  }\n\n  public connect(protocol: string, point: string, name: string, node: DispatchNode): void {\n    // Remove if it's subscribing to any\n    Object.keys(this.store).forEach(protocol => {\n      Object.keys(this.store[protocol].points).forEach(point => {\n        this.store[protocol].points[point].listeners = this.store[protocol].points[point].listeners.filter(\n          n => !(n.cid === node.cid && n.id === node.id),\n        );\n      });\n    });\n    if (!(protocol && point && name)) return;\n    this.addPoint(protocol, point, name, true);\n    this.store[protocol].points[point].listeners.push(node);\n    node.subscribe(this.store[protocol].points[point].msg);\n  }\n\n  public disconnect(protocol: string, point: string, node: DispatchNode): void {\n    if (this.store[protocol]?.points?.[point]) {\n      const storePoint = this.store[protocol].points[point];\n      storePoint.listeners = storePoint.listeners.filter(n => !(n.cid === node.cid && n.id === node.id));\n    }\n  }\n\n  private updateProtocols() {\n    DispatcherRegistry.instance().list().forEach(n => n.updateProtocols());\n  }\n}\n\nexport const pubSubSingleton: IPubSub = new PubSub();\n","\nexport default class EdgeHelp {\n\n    static NetworkDesc =\n        `## Description\\n ` +\n        ` The is node is used for reading and writing values to the edge-io-28. This node uses an internal rest-api to talk to the edge-io-28. No details need to be set\\n ` +\n        `   \\n ` +\n        `### Enable\\n ` +\n        `   \\n ` +\n        ` The point enable will disable any new value being sent to the node **output**  \\n ` +\n        `   \\n ` +\n        `### Polling Interval\\n ` +\n        `   \\n ` +\n        ` This will change the poll rate of the edge-io-28 inputs. A normal setting is 1 second\\n ` +\n        ` The faster the polling rate is the higher the memory usage is\\n ` +\n        `   \\n ` +\n        `### Polling Interval Time Setting\\n ` +\n        `   \\n ` +\n        `Used in conjugation with the **Polling Interval**. Make the selection for the time units for **Seconds**, **Minutes**, **Hours** \\n ` +\n        `   \\n `;\n\n        static inputsDesc =\n        `## Description\\n ` +\n        ` The is node is used in conjunction with the edge-io-28. This node uses an internal rest-api to talk to the edge-io-28\\n ` +\n        `   \\n ` +\n        `## Digital Input\\n ` +\n        `   \\n ` +\n        `A total of 14 DIs can be used on the edge-io-28. There are 7 DIs and 7 UIs\\n ` +\n        `   \\n ` +\n        `### DIs (From the UIs)  \\n ` +\n        `   \\n ` +\n        ` The UIs can be setup and used to read a status change from a *Digital Input* (7 off dry input)\\n ` +\n        `   \\n ` +\n        `### DIs (From the UIs)  \\n ` +\n        `   \\n ` +\n        ` The UIs can be setup and used to read a status change from a *Digital Input* (7 off dry input)\\n ` +\n        `   \\n ` +\n        `## Universal Input\\n ` +\n        `   \\n ` +\n        ` The Universal Input or Analogue Input (7 off) can be used in a number of combinations for reading different sensor types\\n ` +\n        `   \\n ` +\n        `### UI as 0/10dc  \\n ` +\n        `   \\n ` +\n        ` When configured as a UI 0/10dc the node output value will return a value that is set in the **Low scale** & **High scale**\\n ` +\n        `   \\n ` +\n        `### UI as 0/20ma and or 4/20ma \\n ` +\n        `   \\n ` +\n        ` When configured as a UI 0/20ma and or 4/20ma the node output value will return a value that is set in the **Low scale** & **High scale**\\n ` +\n        `   \\n ` +\n        `### UI as 10K thermistor \\n ` +\n        `   \\n ` +\n        ` When configured as a UI 10K thermistor type 2 the node output value will return a value based on the resistance and corresponding temperature\\n ` +\n        `   \\n ` +\n        `## Point Configuration\\n ` +\n        `### Point Enable\\n ` +\n        `   \\n ` +\n        ` The point enable will disable any new value being sent to the node **output**  \\n ` +\n        `   \\n ` +\n        `### Point Debug\\n ` +\n        `   \\n ` +\n        ` The point debug will allow the node **output** to always send the value even if there is node change\\n ` +\n        ` This is just a guide to see if the polling is working\\n ` +\n        `   \\n ` +\n        `### Point Selection\\n ` +\n        `   \\n ` +\n        ` 1. Select the **Point Type** for example UO  \\n ` +\n        ` 2. Select the **Point Number** for example UO-1   \\n ` +\n        ` **Note:** You cant set a type **Digital** and point number **UI1** the correct types must be matched with the correct point numbers  \\n ` +\n        `   \\n ` +\n        `### Point Units\\n ` +\n        `   \\n ` +\n        ` The units can be set as required see steps below.  \\n ` +\n        ` 1. Select the **Units Category**.  \\n ` +\n        ` 2. Lock (**lock icon**) the node setting's and hit the **save** button to return the units types.  \\n ` +\n        ` 3. Select the units type.  \\n ` +\n        ` 4. Save and close the node as required  \\n ` +\n        `   \\n ` +\n        `### Point Low Scale\\n ` +\n        `   \\n ` +\n        ` This is used in when the UI type is set as a 0-10dc or 4-20ma. The **High Scale**  must be set as well \\n ` +\n        ` For example if the point type is 0-10dc and the *Low Scale* is set to 0 and *High Scale* is set to 100 \\   \\n ` +\n        ` the node output value when at 0vdc will return 0 and at 10vdc the node output value will return 100 \\   \\n ` +\n        `   \\n ` +\n        `### Point High Scale\\n ` +\n        `   \\n ` +\n        ` This is used in when the UI type is set as a 0-10dc or 4-20ma (See **Low Scale** setting for more info).  \\n ` +\n        `   \\n ` +\n        `### Point Decimal Places\\n ` +\n        `   \\n ` +\n        ` The units can be set as required see steps below.  \\n ` +\n        `   \\n ` +\n        `### Point Offset\\n ` +\n        `   \\n ` +\n        ` Enter a float value to offset. This will apply an math add function to the original value  \\n ` +\n        ` Example original value is 20 and offset is -1 the **node output** value result will be 19 \\n ` +\n        `   \\n ` +\n        `### Point Decimal Places\\n ` +\n        `   \\n ` +\n        ` Enter a int value to Decimal. This will apply an math round function to the original value \\n ` +\n        ` Example original value is 99.9999 and the device places is set to 0  the **node output** value result will be 99 \\n ` +\n        `   \\n ` +\n        `### Math Function\\n ` +\n        `   \\n ` +\n        ` The units can be set as required see steps below.  \\n ` +\n        ` 1. **na** Will apply not math.  \\n ` +\n        ` 2. **add** Will add a **value** node output.  \\n ` +\n        ` 3. **subtract** Will subtract a **value** node output.  \\n ` +\n        ` 4. **multiply** Will multiply a **value** node output.  \\n ` +\n        ` 5. **divide** Will divide a **value** node output. \\n ` +\n        ` 6. **invert** Will invert the node output. Example in original value = 0 the node output value will = 1.   \\n ` +\n        `   \\n ` +\n        `###  History Settings Database Type\\n ` +\n        `   \\n ` +\n        ` The are two options for the database type. The data can either be pushed to influxDB or PostgreSQL.  \\n ` +\n        ` 1. Select required database type (if type is *Nube DB PostgreSQL* *no more steps are required*).  \\n ` +\n        ` 2. Enter DB details like IP, port, username and password(if type is *InfluxDB*)\\n ` +\n        `   \\n ` +\n        `#### History Settings History Type\\n ` +\n        `   \\n ` +\n        ` 1. **Change Of Value (COV)**.  \\n ` +\n        ` 2. **Periodic**.  \\n ` +\n        ` 3. **Trigger Only**.  \\n ` +\n        `   \\n ` +\n        `####  History Settings Local Storage Limit\\n ` +\n        `   \\n ` +\n        ` 1. **Change Of Value (COV)**.  \\n ` +\n        ` 2. **Periodic**.  \\n ` +\n        ` 3. **Trigger Only**.  \\n ` +\n        `   \\n ` +\n        `####  History Settings Round minutes\\n ` +\n        `   \\n ` +\n        ` 1. **Change Of Value (COV)**.  \\n ` +\n        ` 2. **Periodic**.  \\n ` +\n        ` 3. **Trigger Only**.  \\n ` +\n        `   \\n ` +\n        `### Alarm Settings\\n ` +\n        `   \\n ` +\n        ` to be added  \\n ` +\n        `   \\n ` +\n        `### Tag Settings\\n ` +\n        `   \\n ` +\n        ` to be added  \\n `;\n  \n\n\n        static outputsDesc =\n        `## Description\\n ` +\n        ` The is node is used in conjunction with the edge-io-28. This node uses an internal rest-api to talk to the edge-io-28\\n ` +\n        `   \\n ` +\n        `## Digital Output\\n ` +\n        `   \\n ` +\n        ` The DOs can be used to drive a 0-12vdc relay (5 off) or an onboard Normally Open Relay (2 off)\\n ` +\n        `### DOs  \\n ` +\n        `   \\n ` +\n        ` The input of the node can will drive the output on/true  with any value > 1 or a true value \\n ` +\n        ` Any value < 0 or a false will drive the output off/false \\n ` +\n        `### Relay Output  \\n ` +\n        `   \\n ` +\n        ` The input of the node can will drive the output on/true  with any value > 1 or a true value \\n ` +\n        ` Any value < 0 or a false will drive the output off/false \\n ` +\n        `## Universal Output\\n ` +\n        `   \\n ` +\n        ` The Universal Output or Analogue Output (7 off) has a voltage range of 0 to 12vdc\\n ` +\n        ` The UOs can be used as an AO floating point 0/10dc or a binary on/off 0-12dc \\n ` +\n        `### UOs as 0/10dc  \\n ` +\n        `   \\n ` +\n        ` When configured as a UOs a the node input value is a float value between 0/100 to drive a voltage of 0/10dc \\n ` +\n        `### UOs as On/Off  \\n ` +\n        `   \\n ` +\n        ` The input of the node can will drive the output on/true  with any value > 1 or a true value \\n ` +\n        ` Any value < 0 or a false will drive the output off/false \\n ` +\n        `## Point Configuration\\n ` +\n        `### Point Enable\\n ` +\n        `   \\n ` +\n        ` The point enable will disable any new value being sent to the node **output**  \\n ` +\n        `### Point Selection\\n ` +\n        `   \\n ` +\n        ` 1. Select the **Point Type** for example UO  \\n ` +\n        ` 2. Select the **Point Number** for example UO-1   \\n ` +\n        `### Point Settings\\n ` +\n        `   \\n ` +\n        ` The DOs can be used to drive a 0-12vdc relay (5 off) or an onboard Normally Open Relay (2 off)\\n ` +\n        `### Point Units\\n ` +\n        `   \\n ` +\n        ` The units can be set as required see steps below.  \\n ` +\n        ` 1. Select the **Units Category**.  \\n ` +\n        ` 2. Lock (**lock icon**) the node setting's and hit the **save** button to return the units types.  \\n ` +\n        ` 3. Select the units type.  \\n ` +\n        ` 4. Save and close the node as required  \\n ` +\n        `###  History Settings Database Type\\n ` +\n        `   \\n ` +\n        ` The are two options for the database type. The data can either be pushed to influxDB or PostgreSQL.  \\n ` +\n        ` 1. Select required database type (if type is *Nube DB PostgreSQL* *no more steps are required*).  \\n ` +\n        ` 2. Enter DB details like IP, port, username and password(if type is *InfluxDB*)\\n ` +\n        `#### History Settings History Type\\n ` +\n        `   \\n ` +\n        ` 1. **Change Of Value (COV)**.  \\n ` +\n        ` 2. **Periodic**.  \\n ` +\n        ` 3. **Trigger Only**.  \\n ` +\n        `####  History Settings Local Storage Limit\\n ` +\n        `   \\n ` +\n        ` 1. **Change Of Value (COV)**.  \\n ` +\n        ` 2. **Periodic**.  \\n ` +\n        ` 3. **Trigger Only**.  \\n ` +\n        `####  History Settings Round minutes\\n ` +\n        `   \\n ` +\n        ` 1. **Change Of Value (COV)**.  \\n ` +\n        ` 2. **Periodic**.  \\n ` +\n        ` 3. **Trigger Only**.  \\n ` +\n        `### Alarm Settings\\n ` +\n        `   \\n ` +\n        ` to be added  \\n ` +\n        `### Tag Settings\\n ` +\n        `   \\n ` +\n        ` to be added  \\n `;\n}\n\n","import { get, merge } from 'lodash';\nimport { Api } from '../../../backend/api';\nimport { DeviceAPI, EdgeAPI, FolderAPI, NetworkAPI, PointAPI } from '../../../backend/datapoint';\nimport { Device, Edge, Folder, Network, Point } from '../../../backend/entry';\nimport config from '../../../config';\nimport { singleton as actor } from '../../../promise-actor';\nimport { ERROR } from '../../../shared/websocket-events';\nimport {\n  DEVICE_CONTAINER_TYPE,\n  EDGE_CONTAINER_TYPE,\n  EDGES_PARENT_CONTAINER_TYPE,\n  GROUP_CONTAINER_TYPE,\n  NETWORK_CONTAINER_TYPE,\n  POINT_NODE_TYPE,\n} from '../../constants';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport ApiContainerNode from './shared/api-container-node';\nimport EntryNode from './shared/entry-node';\nimport Mixin from './shared/mixin';\nimport TopLevelApiContainerNode from './shared/top-level-api-container-node';\n\nconst doNothing = () => {\n};\n\nexport class EdgesParentContainerNode extends TopLevelApiContainerNode<Edge> {\n  title: string = 'Edges';\n  extra_node_types = []; // not possible to create edges via API\n\n  collectChildNodes(nodes: Node[]): Node[] {\n    return nodes.filter(n => n instanceof EdgeContainerNode);\n  }\n\n  protected initAPI(): Api<Edge> {\n    return new EdgeAPI();\n  }\n\n  protected fetchChildren(): Promise<Edge[]> {\n    return this.api.list();\n  }\n\n  protected childNodeType(): string[] {\n    return [EDGE_CONTAINER_TYPE];\n  }\n}\n\nexport class EdgeContainerNode extends ApiContainerNode<Edge> {\n  title: string = 'Edge Container';\n  settingFields = {\n    code            : SettingType.STRING,\n    customer_code   : SettingType.STRING,\n    side_code       : SettingType.STRING,\n    model           : SettingType.STRING,\n    firmware_version: SettingType.STRING,\n    data_version    : SettingType.STRING,\n  };\n\n  onAdded() {\n    this.ignore_remove = true;\n    this.removable = false;\n    this.movable = false;\n    super.onAdded();\n  }\n\n  createEntry() {\n    return Promise.reject('ERROR: Edge creation not currently supported.');\n  }\n\n  deleteEntry() {\n    return Promise.reject('ERROR: Edge deletion not currently supported.');\n  }\n\n  collectChildNodes(nodes: Node[]): Node[] {\n    return nodes.filter(v => v instanceof NetworkContainerNode);\n  }\n\n  namePrefix() {\n    return 'Edge';\n  }\n\n  protected initAPI(): Api<Edge> {\n    return new EdgeAPI();\n  }\n\n  protected fetchChildren() {\n    return new NetworkAPI().list(this.entryId());\n  }\n\n  protected childNodeType(): string[] {\n    return [NETWORK_CONTAINER_TYPE];\n  }\n}\n\nexport class NetworkContainerNode extends ApiContainerNode<Network> {\n  title: string = 'Network Container';\n  settingFields = {\n    state   : SettingType.READONLY,\n    protocol: SettingType.READONLY,\n    code    : SettingType.STRING,\n  };\n  private protocols = ['GPIO', 'BACNET', 'MODBUS', 'UNKNOWN'].map(point => ({\n    value: point,\n    text : point,\n  }));\n\n  createSettingForm = (entry: Network) => {\n    return merge(Mixin.prototype.createSettingForm.call(this, entry), {\n      protocol: {\n        value : this.protocols[this.protocols.length - 1].value,\n        type  : SettingType.DROPDOWN,\n        config: {\n          items: this.protocols,\n        },\n      },\n    });\n  };\n\n  collectChildNodes(nodes: Node[]): Node[] {\n    return nodes.filter(v => v instanceof DeviceContainerNode);\n  }\n\n  namePrefix() {\n    return 'Network';\n  }\n\n  createEntry() {\n    const edge_node = <EdgeContainerNode>this.container.nodeItself();\n    if (!(edge_node instanceof EdgeContainerNode)) {\n      const errorMessage =\n              'Error: Trying to create network, but network node does not exist inside a valid Edge container...';\n      console.log(errorMessage);\n      return Promise.reject(errorMessage);\n    }\n    return this.findFreeIdentifier().then(code => this.api.create(<any>{ code }, edge_node.entryId()));\n  }\n\n  protected initAPI(): Api<Network> {\n    return new NetworkAPI();\n  }\n\n  protected fetchChildren(): Promise<any[]> {\n    return new DeviceAPI().list(this.entryId());\n  }\n\n  protected childNodeType(): string[] {\n    return [DEVICE_CONTAINER_TYPE];\n  }\n}\n\nexport class DeviceContainerNode extends ApiContainerNode<Device> {\n  title: string = 'Device Container';\n  settingFields = {\n    state       : SettingType.READONLY,\n    code        : SettingType.STRING,\n    manufacturer: SettingType.STRING,\n    protocol    : SettingType.STRING,\n    type        : SettingType.STRING,\n  };\n\n  collectChildNodes(nodes: Node[]): Node[] {\n    return nodes.filter(v => v instanceof GroupContainerNode || v instanceof PointNode);\n  }\n\n  namePrefix() {\n    return 'Device';\n  }\n\n  createEntry() {\n    const network_node = <NetworkContainerNode>this.container.nodeItself();\n    const edge_node = <EdgeContainerNode>network_node.container.nodeItself();\n    if (!(network_node instanceof NetworkContainerNode)) {\n      const errorMessage =\n              'Error: Trying to create device, but device node does not exist inside a valid Network container...';\n      return Promise.reject(errorMessage);\n    }\n    return this.findFreeIdentifier().then(code => this.api.create(<any>{\n                                                                    edge_id: edge_node.entryId(),\n                                                                    device : {\n                                                                      type: 'EQUIPMENT',\n                                                                      code,\n                                                                    },\n                                                                  },\n                                                                  network_node.entryId()));\n  }\n\n  protected initAPI(): Api<Device> {\n    return new DeviceAPI();\n  }\n\n  protected fetchChildren(): Promise<Folder[]> {\n    return new FolderAPI().list(this.entryId());\n  }\n\n  protected childNodeType(): string[] {\n    return [GROUP_CONTAINER_TYPE, POINT_NODE_TYPE];\n  }\n}\n\nexport class GroupContainerNode extends ApiContainerNode<Folder> {\n  title: string = 'Group Container';\n  settingFields = {\n    name: SettingType.STRING,\n  };\n\n  collectChildNodes(nodes: Node[]): Node[] {\n    return nodes.filter(v => v instanceof PointNode);\n  }\n\n  namePrefix() {\n    return 'Group';\n  }\n\n  createEntry() {\n    const device_node = <DeviceContainerNode>this.container.nodeItself();\n    const network_node = <NetworkContainerNode>device_node.container.nodeItself();\n    const edge_node = <EdgeContainerNode>network_node.container.nodeItself();\n    if (\n      !(device_node instanceof DeviceContainerNode) ||\n      !(network_node instanceof NetworkContainerNode) ||\n      !(edge_node instanceof EdgeContainerNode)\n    ) {\n      const errorMessage =\n              'Error: Trying to create group, but group node does not exist inside a valid Device container hierarchy...';\n      return Promise.reject(errorMessage);\n    }\n    return this.findFreeIdentifier().then(name => this.api.create(<any>{ folder: { name } }, device_node.entryId()));\n  }\n\n  protected initAPI(): Api<Folder> {\n    return new FolderAPI();\n  }\n\n  protected fetchChildren(): Promise<any[]> {\n    return new PointAPI().list(this.entryId());\n  }\n\n  protected childNodeType() {\n    return [POINT_NODE_TYPE];\n  }\n}\n\nexport class PointNode extends Node implements EntryNode<Point> {\n  title: string;\n  backend: Api<Point>;\n  properties: {\n    entry: Point;\n    is_protected: boolean;\n  };\n  clonable = false;\n  movable = false;\n  settingFields = {\n    edge        : SettingType.READONLY,\n    network     : SettingType.READONLY,\n    code        : SettingType.STRING,\n    enabled     : SettingType.BOOLEAN,\n    kind        : SettingType.STRING,\n    measure_unit: SettingType.STRING,\n    offset      : SettingType.NUMBER,\n    precision   : SettingType.NUMBER,\n    protocol    : SettingType.STRING,\n    type        : SettingType.STRING,\n  };\n\n  entry = Mixin.prototype.entry.bind(this);\n  entryId = Mixin.prototype.entryId.bind(this);\n  onAfterSettingsChange = Mixin.prototype.onAfterSettingsChange.bind(this);\n  applyEntry = Mixin.prototype.applyEntry.bind(this);\n  deactivate = Mixin.prototype.deactivate.bind(this);\n  onCreated = Mixin.prototype.onCreated.bind(this);\n  makeIdentifier = Mixin.prototype.makeIdentifier.bind(this);\n  findFreeIdentifier = Mixin.prototype.findFreeIdentifier.bind(this);\n  getTakenIdentifiers = Mixin.prototype.getTakenIdentifiers.bind(this);\n  createSettingForm = Mixin.prototype.createSettingForm.bind(this);\n\n  private interval: number;\n\n  constructor() {\n    super();\n    this.title = 'Point container';\n    this.description = 'placeholder'; // FIXME\n    this.backend = new PointAPI();\n    this.settings['name'] = NodeSetting.create({\n      description: 'Point ID',\n      value      : this.title,\n      type       : SettingType.READONLY,\n    });\n    this.settings['priority'] = NodeSetting.create({\n      description: 'Priority',\n      value      : 1,\n      type       : SettingType.NUMBER,\n    });\n    this.addOutput('value', Type.NUMBER);\n    this.addInput('in', Type.NUMBER);\n  }\n\n  entryFactory() {\n    return new Point();\n  }\n\n  onAdded() {\n    Mixin.prototype.onAdded.call(this);\n    this.syncWithBackend();\n    this.interval = <any>(\n      setInterval(() => this.syncWithBackend(), config.backendSync.pointRefreshIntervalSeconds * 1000)\n    );\n  }\n\n  onRemoved() {\n    return Mixin.prototype.onRemoved.call(this);\n    // TODO: hmmm, wtf?\n    // if (this.interval) clearInterval(this.interval);\n  }\n\n  namePrefix() {\n    return 'Point';\n  }\n\n  syncWithBackend() {\n    // refactor into mixin and reuse\n    if (this.side !== Side.server) return;\n    actor.process(() => {\n      if (!this.entry()) return;\n      return (this.backend as PointAPI)\n        .fetchPointData(this.entryId())\n        .then(data => {\n          // we check again if the node is still active - this may have changed since the request was sent\n          if (!this.entry()) return; // TODO: Replace with isActive()\n          this.setOutputData(0, get(data, 'value'));\n        })\n        .catch(doNothing); // error response presumably means no value is set yet\n    });\n  }\n\n  onInputUpdated() {\n    let value = parseFloat(this.getInputData(0));\n    if (isNaN(value) || value === null) {\n      console.log('WARNING: Received non-numeric value on point inlet.');\n      return;\n    }\n    this.setOutputData(0, value);\n    const priority = Utils.clamp(this.settings['priority'].value, 1, 17);\n    (this.backend as PointAPI)\n      .updatePointData(this.entryId(), priority, value)\n      .catch(e => this.container.server_editor_socket.emit(ERROR, `Could not patch point value. ${e.message}`));\n  }\n\n  createEntry() {\n    const parentNode = this.container.nodeItself();\n    const device_node = parentNode.container.nodeItself();\n    const network_node = device_node.container.nodeItself();\n    const edge_node = network_node.container.nodeItself();\n    if (!(parentNode instanceof GroupContainerNode) || !(parentNode instanceof DeviceContainerNode)) {\n      const errorMessage =\n              'Error: Trying to create point, but point node does not exist inside a valid Group container hierarchy...';\n      console.log(errorMessage);\n      return Promise.reject(errorMessage);\n    }\n    return this.findFreeIdentifier().then(code => this.backend.create(\n      <any>{\n        device_id: (device_node as DeviceContainerNode).entryId(),\n        point    : {\n          network: (network_node as NetworkContainerNode).entryId(),\n          edge   : (edge_node as EdgeContainerNode).entryId(),\n          code,\n          unit   : { type: 'number' },\n          enabled: false,\n        },\n      },\n      parentNode.entryId(),\n                                          ),\n    );\n  }\n\n  updateEntry(body: Point) {\n    return this.backend.update(body, this.entryId());\n  }\n\n  deleteEntry() {\n    return this.backend.delete(this.entryId());\n  }\n}\n\nContainer.registerNodeType(EDGES_PARENT_CONTAINER_TYPE, EdgesParentContainerNode, null, false);\nContainer.registerNodeType(EDGE_CONTAINER_TYPE, EdgeContainerNode, null, false);\nContainer.registerNodeType(NETWORK_CONTAINER_TYPE, NetworkContainerNode, null, false);\nContainer.registerNodeType(DEVICE_CONTAINER_TYPE, DeviceContainerNode, null, false);\nContainer.registerNodeType(GROUP_CONTAINER_TYPE, GroupContainerNode, null, false);\nContainer.registerNodeType(POINT_NODE_TYPE, PointNode, null, false);\n","import { Api } from './api';\nimport { Device, Edge, Folder, Network, Point, PointData } from './entry';\n\nexport class EdgeAPI extends Api<Edge> {\n  list(_objId?: string): Promise<Edge[]> {\n    return this.fetchMany('edge', 'edges');\n  }\n\n  get(objId: string): Promise<Edge[]> {\n    return this.fetchOne(`edge/${objId}`);\n  }\n\n  create(obj: Edge): Promise<any> {\n    throw new Error('Method not implemented.');\n  }\n\n  update(obj: Edge, objId?: string): Promise<any> {\n    return this.client.patch(`edge/${objId}`, obj);\n  }\n\n  delete(objId: string): Promise<any> {\n    throw new Error('Method not implemented.');\n  }\n\n  factoryEntry(): Edge {\n    return this.newEntry(Edge);\n  }\n}\n\nexport class NetworkAPI extends Api<Network> {\n  list(objId?: string): Promise<Network[]> {\n    return this.fetchMany(`edge/${objId}/network`, 'networks');\n  }\n\n  get(objId: string): Promise<Network[]> {\n    return this.fetchOne(`network/${objId}`);\n  }\n\n  create(obj: Network, parentId: string): Promise<any> {\n    return this.client.post(`edge/${parentId}/network`, obj).then(this.extractData('resource'));\n  }\n\n  update(obj: Network, objId?: string): Promise<any> {\n    return this.client.patch(`network/${objId}`, obj);\n  }\n\n  delete(objId: string): Promise<any> {\n    return this.client.delete(`network/${objId}?_force=true`);\n  }\n\n  factoryEntry(): Network {\n    return this.newEntry(Network);\n  }\n}\n\nexport class DeviceAPI extends Api<Device> {\n  factoryEntry(): Device {\n    return this.newEntry(Device);\n  }\n\n  list(objId?: string): Promise<Device[]> {\n    return this.client.get(`network/${objId}/device`)\n               .then(this.extractData('devices'))\n               .then(v => v.map(d => d.device))\n               .then(this.assignAllTo(() => new Device()));\n  }\n\n  get(objId: string): Promise<Device[]> {\n    return this.fetchOne(`device/${objId}`);\n  }\n\n  create(obj: Device, parentId?: string): Promise<any> {\n    return this.client.post(`network/${parentId}/device`, obj).then(this.extractData('resource.device'));\n  }\n\n  update(obj: Device, objId?: string): Promise<any> {\n    return this.client.patch(`device/${objId}`, obj);\n  }\n\n  delete(objId: string): Promise<any> {\n    return this.client.delete(`device/${objId}?_force=true`);\n  }\n}\n\nexport class FolderAPI extends Api<Folder> {\n  list(objId?: string): Promise<Folder[]> {\n    return this.fetchMany(`device/${objId}/folder`, 'folders');\n  }\n\n  get(objId: string): Promise<Folder[]> {\n    return this.fetchOne(`folder/${objId}`);\n  }\n\n  create(obj: Folder, parentId?: string): Promise<any> {\n    return this.client.post(`device/${parentId}/folder`, obj).then(this.extractData('resource'));\n  }\n\n  update(obj: Folder, objId?: string): Promise<any> {\n    return this.client.patch(`folder/${objId}`, obj);\n  }\n\n  delete(objId: string): Promise<any> {\n    return this.client.delete(`folder/${objId}?_force=true`);\n  }\n\n  factoryEntry(): Folder {\n    return this.newEntry(Folder);\n  }\n}\n\nexport class PointAPI extends Api<Point> {\n  factoryEntry(): Point {\n    return this.newEntry(Point);\n  }\n\n  list(objId?: string): Promise<Point[]> {\n    return this.fetchMany(`folder/${objId}/point`, 'points');\n  }\n\n  get(objId: string): Promise<Point[]> {\n    return this.fetchOne(`point/${objId}`);\n  }\n\n  create(obj: Point, parentId?: string): Promise<any> {\n    return this.client.post(`folder/${parentId}/point`, obj).then(this.extractData('resource.point'));\n  }\n\n  update(obj: Point, objId?: string): Promise<any> {\n    return this.client.patch(`point/${objId}`, obj);\n  }\n\n  delete(objId: string): Promise<any> {\n    return this.client.delete(`point/${objId}?_force=true`);\n  }\n\n  fetchPointData(pointId: string): Promise<PointData> {\n    return this.client.get(`point/${pointId}/data`).then(this.extractData());\n  }\n\n  updatePointData(pointId: string, priority: number, value: number): Promise<any> {\n    return this.client.put(`point/${pointId}/data`, { priority, value });\n  }\n}\n","import { merge } from 'lodash';\nimport { Api } from '../../../backend/api';\nimport { Service } from '../../../backend/entry';\nimport { ModuleAPI, ServiceAPI } from '../../../backend/installer';\nimport { singleton as actor } from '../../../promise-actor';\nimport {\n  MODULE_NODE_TYPE,\n  MODULES_PARENT_CONTAINER_TYPE,\n  SERVICE_NODE_TYPE,\n  SERVICES_PARENT_CONTAINER_TYPE,\n} from '../../constants';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { SettingType } from '../../node-io';\nimport ApiNode from './shared/api-node';\nimport Mixin from './shared/mixin';\nimport TopLevelApiContainerNode from './shared/top-level-api-container-node';\n\nexport class ModulesParentContainerNode extends TopLevelApiContainerNode<Service> {\n  title: string = 'Modules';\n\n  collectChildNodes(nodes: Node[]): ModuleNode[] {\n    return <ModuleNode[]>nodes.filter(v => v instanceof ModuleNode);\n  }\n\n  protected initAPI(): Api<Service> {\n    return new ModuleAPI();\n  }\n\n  protected fetchChildren() {\n    return this.api.list();\n  }\n\n  protected childNodeType() {\n    return [MODULE_NODE_TYPE];\n  }\n}\n\nexport class ServicesParentContainerNode extends TopLevelApiContainerNode<Service> {\n  title: string = 'Services';\n\n  collectChildNodes(nodes: Node[]): ServiceNode[] {\n    return <ServiceNode[]>nodes.filter(v => v instanceof ServiceNode);\n  }\n\n  protected initAPI(): Api<Service> {\n    return new ServiceAPI();\n  }\n\n  protected fetchChildren() {\n    return this.api.list();\n  }\n\n  protected childNodeType() {\n    return [SERVICE_NODE_TYPE];\n  }\n}\n\nabstract class BaseServiceNode<A extends Api<Service>> extends ApiNode<Service, A> {\n  properties: {\n    entry: Service;\n    is_protected: boolean;\n  };\n  required_settings = ['service_id', 'service_name', 'version'];\n  settingFields = {\n    service_id     : SettingType.STRING,\n    service_name   : SettingType.STRING,\n    version        : SettingType.STRING,\n    service_type   : SettingType.STRING,\n    published_by   : SettingType.STRING,\n    state          : SettingType.STRING,\n    deploy_id      : SettingType.STRING,\n    deploy_location: SettingType.STRING,\n    created_at     : SettingType.READONLY,\n    modified_at    : SettingType.READONLY,\n  };\n  settingsHeaderComponent = {\n    props   : ['self'],\n    template:\n      '<div>' +\n      '  <v-alert v-if=\"self.properties.is_protected\" type=\"warning\">Waiting for required fields <br />' +\n      `    <small>(${this.required_settings.join(', ')})</small>` +\n      '  </v-alert>' +\n      '</div>',\n  };\n  onAdded = Mixin.prototype.onAdded.bind(this);\n  onRemoved = Mixin.prototype.onRemoved.bind(this);\n\n  constructor() {\n    super();\n    this.title = this.namePrefix();\n  }\n\n  entryId = () => this.entry() && this.entry().service_id;\n\n  syncWithBackend = () => {\n  };\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server || !this.areSettingsValid()) return;\n    if (!this.entry()) {\n      actor.process(() =>\n                      this.createEntry()\n                          .then(entry => this.applyEntry(entry))\n                          .then(() => this.displayMessage(`${this.namePrefix()} entry created.`))\n                          .catch(e => this.displayError(e, 'Entry not created.')),\n      );\n    } else {\n      // update entry\n      Mixin.prototype.onAfterSettingsChange.call(this);\n    }\n  }\n\n  applyEntry(entry: Service) {\n    this.settingFields['service_id'] = SettingType.READONLY;\n    Mixin.prototype.applyEntry.call(this, entry);\n    this.properties.is_protected = !entry;\n    this.broadcastPropertiesToClients();\n  }\n\n  onCreated() {\n    if (this.entry()) {\n      this.applyEntry(this.entry());\n    } else {\n      this.properties.is_protected = true; // await manual configuration\n      merge(this.settings, this.createSettingForm(null));\n    }\n  }\n\n  createEntry() {\n    const entry = Object.keys(this.settingFields)\n                        .map(key => ({ [key]: this.settings[key].value }))\n                        .reduce(merge);\n    return this.backend.create(this.settings['service_id'].value, <any>entry);\n  }\n\n  private areSettingsValid(): boolean {\n    return this.required_settings.map(key => this.settings[key].value).reduce((a, b) => a && b);\n  }\n}\n\nclass ModuleNode extends BaseServiceNode<ModuleAPI> {\n  namePrefix() {\n    return 'Module';\n  }\n\n  protected initAPI(): ModuleAPI {\n    return new ModuleAPI();\n  }\n}\n\nclass ServiceNode extends BaseServiceNode<ServiceAPI> {\n  namePrefix() {\n    return 'Service';\n  }\n\n  initAPI(): ServiceAPI {\n    return new ServiceAPI();\n  }\n}\n\nContainer.registerNodeType(MODULES_PARENT_CONTAINER_TYPE, ModulesParentContainerNode, null, false);\nContainer.registerNodeType(SERVICES_PARENT_CONTAINER_TYPE, ServicesParentContainerNode, null, false);\nContainer.registerNodeType(MODULE_NODE_TYPE, ModuleNode, null, false);\nContainer.registerNodeType(SERVICE_NODE_TYPE, ServiceNode, null, false);\n","import { Api } from './api';\nimport { Service } from './entry';\n\nabstract class ApplicationAPI extends Api<Service> {\n  list(_objId?: string): Promise<Service[]> {\n    return this.fetchMany(this.url(), 'services');\n  }\n\n  get(objId: string): Promise<Service[]> {\n    return this.fetchOne(`${this.url()}/${objId}`);\n  }\n\n  create(obj: Service, parentId?: string): Promise<any> {\n    return this.client.post(this.url(), { obj }).then(() => this.get(parentId));\n  }\n\n  update(obj: Service, objId: string): Promise<any> {\n    return this.client.patch(`${this.url()}/${objId}`, { service_id: objId, obj });\n  }\n\n  delete(objId: string): Promise<any> {\n    return this.client.delete(`${this.url()}/${objId}`);\n  }\n\n  factoryEntry(): Service {\n    return this.newEntry(Service);\n  }\n\n  protected abstract url(): string;\n}\n\nexport class ModuleAPI extends ApplicationAPI {\n  protected url(): string {\n    return 'modules';\n  }\n}\n\nexport class ServiceAPI extends ApplicationAPI {\n  protected url(): string {\n    return 'services';\n  }\n}\n","import { Api } from '../../../../backend/api';\nimport { Entry } from '../../../../backend/entry';\nimport { Node } from '../../../node';\nimport { NodeSetting, SettingType } from '../../../node-io';\nimport EntryNode from './entry-node';\nimport Mixin from './mixin';\n\n/**\n * TODO should rework later\n */\nexport default abstract class ApiNode<T extends Entry, A extends Api<T>> extends Node implements EntryNode<T> {\n  properties: {\n    entry: T; // main entry\n    is_protected: boolean; // If true the node won't be deleted if the remote counter-part is missing\n  };\n  settingFields: {};\n  clonable = false;\n  removable = false;\n  movable = false;\n  entry = Mixin.prototype.entry.bind(this);\n  entryId = Mixin.prototype.entryId.bind(this);\n  deactivate = Mixin.prototype.deactivate.bind(this);\n  createSettingForm = Mixin.prototype.createSettingForm.bind(this);\n  getTakenIdentifiers = Mixin.prototype.getTakenIdentifiers.bind(this);\n  makeIdentifier = Mixin.prototype.makeIdentifier.bind(this);\n  findFreeIdentifier = Mixin.prototype.findFreeIdentifier.bind(this);\n  backend: A;\n\n  protected constructor() {\n    super();\n    this.description = 'placeholder'; // FIXME\n    this.backend = this.initAPI();\n    this.settings['name'] = NodeSetting.create({\n      description: 'Entry',\n      value      : this.title,\n      type       : SettingType.READONLY,\n    });\n  }\n\n  entryFactory = (): T => this.backend.factoryEntry();\n\n  updateEntry = (body: T): Promise<any> => this.backend.update(body, this.entryId());\n\n  deleteEntry = (): Promise<any> => this.backend.delete(this.entryId());\n\n  abstract namePrefix(): string;\n\n  abstract createEntry(): Promise<T>;\n\n  abstract applyEntry(entry: T): void;\n\n  abstract syncWithBackend(): void;\n\n  protected abstract initAPI(): A;\n}\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 15.09.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\nimport Debounce from 'lodash-decorators/debounce';\nimport { Colors, create } from 'logplease';\nimport { AsyncDbHelper, Database } from '../database/database';\nimport { UiNode } from '../nodes/nodes/dashboard/ui-node';\nimport { DashboardServerSocket } from './dashboard-server-socket';\n\nconst logger = create('dashboard', { color: Colors.Yellow });\n\nexport interface UiPanel {\n  name: string;\n  title: string;\n  icon: string;\n  subPanels: Array<UiSubpanel>;\n}\n\nexport interface UiSubpanel {\n  title: string;\n  name: string;\n  uiElements: Array<UiElement>;\n}\n\nexport interface UiElement {\n  title: string;\n  type: string;\n\n  // link to node\n  cid: string | number;\n  id: string | number;\n  name: string;\n  icon: string;\n\n}\n\nexport class Dashboard {\n  db: Database;\n  uiPanels: Array<UiPanel>;\n  socket: DashboardServerSocket;\n\n  constructor(socket: DashboardServerSocket) {\n    this.socket = socket;\n    this.uiPanels = [];\n  }\n\n  loadFromDatabase(db: Database): Promise<any> {\n    this.db = db;\n    return AsyncDbHelper.noArgs<UiPanel[]>(db, db.getUiPanels)\n                        .then(panels => this.uiPanels = panels)\n                        .catch(err => logger.warn(err));\n  }\n\n  onNodeRemoved(node: UiNode) {\n    if (!node.isDashboardNode) return;\n\n    this.removeElementForNode(node);\n    this.removeEmptyPanels();\n    this.sendUiPanel(node.settings['ui-panel'].value);\n  }\n\n  onNodeChangePanelOrTitle(node: UiNode, newPanelName: string, newTitle: string) {\n    this.removeElementForNode(node);\n\n    //add new element\n    const uiElemet: UiElement = {\n      title: newTitle,\n      type: node.uiElementType,\n      cid: node.container.id,\n      id: node.id,\n      name: node.name,\n      icon: node.icon,\n\n    };\n\n    let newPanel = this.getUiPanel(newPanelName);\n    if (!newPanel) {\n      //add to new panel\n      newPanel = this.addUiPanel(newPanelName);\n      newPanel.subPanels[0].uiElements.push(uiElemet);\n\n      if (this.db) this.db.addUiPanel(newPanel);\n    } else {\n      //update existing panel\n      newPanel.subPanels[0].uiElements.push(uiElemet);\n      if (this.db)\n        this.db.updateUiPanel(newPanel.name, { $set: { subPanels: newPanel.subPanels } });\n    }\n    this.removeEmptyPanels();\n    this.socket.io.emit('getUiPanelsList', this.getUiPanelsList());\n    this.sendUiPanel(node.settings['ui-panel'].value);\n  }\n\n  @Debounce(100)\n  sendUiPanel(uiPanelValue) {\n    this.socket.io.emit('getUiPanel', this.getUiPanel(uiPanelValue));\n  }\n\n  removeEmptyPanels() {\n    let changed = false;\n    for (let p = 0; p < this.uiPanels.length; p++) {\n      let panel = this.uiPanels[p];\n      if (panel.subPanels.every(s => s.uiElements.length == 0)) {\n        // remove panel\n        changed = true;\n        this.uiPanels = this.uiPanels.filter(pan => pan.name != panel.name);\n        if (this.db) this.db.removeUiPanel(panel.name);\n      }\n    }\n    if (changed) this.socket.io.emit('getUiPanelsList', this.getUiPanelsList());\n  }\n\n  removeElementForNode(node: UiNode) {\n    const oldPanel = this.getUiPanel(node.settings['ui-panel'].value);\n    if (oldPanel) {\n      //remove old element\n      for (let s = 0; s < oldPanel.subPanels.length; s++) {\n        const subPanel = oldPanel.subPanels[s];\n        for (let e = 0; e < subPanel.uiElements.length; e++) {\n          const element = subPanel.uiElements[e];\n          if (element.cid == node.container.id && element.id == node.id) {\n            subPanel.uiElements.splice(e, 1);\n\n            if (this.db)\n              this.db.updateUiPanel(oldPanel.name, { $set: { subPanels: oldPanel.subPanels } });\n          }\n        }\n      }\n    }\n  }\n\n  getUiPanel(name: string): UiPanel {\n    return this.uiPanels.find(p => p.name === name);\n  }\n\n  getUiPanelsList(): Array<string> {\n    let arr = [];\n    this.uiPanels.forEach(p => {\n      arr.push({ name: p.name, title: p.title, icon: p.icon });\n    });\n    return arr;\n  }\n\n  addUiPanel(name: string): UiPanel {\n    const subPanel: UiSubpanel = {\n      title: '',\n      name: '',\n      uiElements: [],\n    };\n    const panel: UiPanel = {\n      name: name,\n      title: name,\n      icon: 'label_outline',\n      subPanels: [subPanel],\n    };\n    this.uiPanels.push(panel);\n    return panel;\n  }\n}\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 04.07.2016.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport * as bodyParser from 'body-parser';\nimport * as cookieParser from 'cookie-parser';\nimport * as express from 'express';\nimport * as http from 'http';\nimport { Colors, create } from 'logplease';\nimport * as morgan from 'morgan';\nimport * as path from 'path';\nimport * as socket from 'socket.io';\nimport * as config from '../config.json';\nimport { DashboardServerSocket } from './dashboard-server-socket';\nimport { EditorServerSocket } from './editor-server-socket';\nimport { authMiddleware } from './middleware';\nimport { PingPongServerSocket } from './ping-pong-server-socket';\nimport { apiEditorSetup } from './routes/api-editor';\nimport { WireNameServerSocket } from './wire-name-server-socket';\n\nconst expressValidator = require('express-validator');\n\nconst log = create('server', { color: Colors.Yellow });\n\nconst isDev = process.env.NODE_ENV !== 'production';\n\nexport class Server {\n  express: express.Application;\n  server: http.Server;\n\n  editorSocket: EditorServerSocket;\n  dashboardSocket: DashboardServerSocket;\n  wireNameSocket: WireNameServerSocket;\n  private pingPongSocket: PingPongServerSocket;\n  private readonly port: number;\n  private readonly loopInterval: number;\n\n  constructor(workingDir: string, port: number, loopInterval: number) {\n    this.port = port;\n    this.loopInterval = loopInterval;\n    this.express = express();\n    this.express.locals.moment = require('moment');\n    /* webpack-strip-block:removed */\n    this.middleware(workingDir);\n    this.routes();\n    this.handleErrors();\n    this.configure();\n    this.start_io();\n  }\n\n  /* webpack-strip-block:removed */\n\n  private middleware(workingDir: string) {\n    if (config.webServer.debug) {\n      this.express.use(\n        morgan('dev', {\n          skip: function (req, res) {\n            return res.statusCode < 400;\n          },\n        }),\n      );\n    }\n    this.express.use(bodyParser.json({ limit: '5mb' }));\n    this.express.use(bodyParser.urlencoded({ extended: false }));\n    this.express.use(cookieParser());\n    this.express.use(expressValidator());\n    const publicFolder = path.resolve(workingDir, 'public');\n    log.info(`App Server Dir : '${publicFolder}'`);\n    this.express.use('/', express.static(publicFolder));\n  }\n\n  private routes() {\n    // api console logger, after respective apis got called this method will be triggered\n    this.express.use('/api/', function (req, res, next) {\n      const send = res.send;\n      (<any>res).send = function (body) {\n        if (![200, 201].includes(res.statusCode)) log.warn(body);\n        send.call(this, body);\n      };\n      next();\n    });\n    this.express.use('/dashboard', authMiddleware(), require('./routes/dashboard'));\n    this.express.use('/api/dashboard', authMiddleware(), require('./routes/api-dashboard'));\n    this.express.use('/editor', authMiddleware(), require('./routes/editor'));\n    this.express.use('/api/editor', authMiddleware(), apiEditorSetup(this, this.loopInterval));\n    this.express.use('/api/wire-name', authMiddleware(), require('./routes/api-wire-name'));\n    this.express.use('/api/auth', require('./routes/auth'));\n    this.express.use('/api/help', authMiddleware(), require('./routes/api-help'));\n    this.express.use('/api/platform', authMiddleware(), require('./routes/api-platform'));\n\n  }\n\n  private handleErrors() {\n    // Route not found middleware\n    this.express.use((req: express.Request, res: express.Response): void => {\n      res.status(404);\n      res.json({ error: { message: 'Not Found' } });\n    });\n    // Error handler\n    this.express.use(\n      (\n        err: Error & { status: number },\n        req: express.Request,\n        res: express.Response,\n        next: express.NextFunction,\n      ): void => {\n        log.warn(`${err}`);\n        res.status(err.status || 500);\n        res.json({ error: { message: err.message, error: isDev ? err : {} } });\n      },\n    );\n  }\n\n  private configure() {\n    const port = normalizePort(this.port);\n    this.express.set('port', port);\n\n    this.server = http.createServer(this.express);\n    this.server.listen(port);\n    this.server.on('error', onError);\n    this.server.on('listening', onListening);\n\n    function normalizePort(val: number | string): number | string | boolean {\n      const port: number = typeof val === 'string' ? parseInt(val, 10) : val;\n      if (isNaN(port)) {\n        return val;\n      } else if (port >= 0) {\n        return port;\n      } else {\n        return false;\n      }\n    }\n\n    const that = this;\n\n    function onError(error: NodeJS.ErrnoException): void {\n      if (error.syscall !== 'listen') throw error;\n      const bind = typeof port === 'string' ? 'Pipe ' + port : 'Port ' + port;\n      switch (error.code) {\n        case 'EACCES':\n          console.error(`${bind} requires elevated privileges`);\n          process.exit(1);\n          break;\n        case 'EADDRINUSE':\n          console.error(`${bind} is already in use`);\n          process.exit(1);\n          break;\n        default:\n          throw error;\n      }\n    }\n\n    function onListening(): void {\n      const addr = that.server.address();\n      const bind = typeof addr === 'string' ? `pipe ${addr}` : `port ${addr.port}`;\n      log.info(`Listening on ${bind}`);\n    }\n  }\n\n  private start_io() {\n    const io_root: SocketIO.Server = socket(this.server);\n    this.editorSocket = new EditorServerSocket(io_root);\n    this.dashboardSocket = new DashboardServerSocket(io_root);\n    this.wireNameSocket = new WireNameServerSocket(io_root);\n    this.pingPongSocket = new PingPongServerSocket(this.server, io_root);\n  }\n}\n","module.exports = require(\"body-parser\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"http\");","module.exports = require(\"morgan\");","import app from '../app';\nimport { ContainerRegistry } from '../nodes/container';\nimport { createNodeDbHelper } from '../nodes/node-db-helper';\nimport { NodeHookHelper } from '../nodes/node-hook';\nimport { SerializableHelper } from '../nodes/serializable';\nimport { PubSubHelpers } from '../pub-sub/PubSubHelpers';\nimport { UPDATE_NODE_SETTING } from '../shared/websocket-events';\nimport { IdGenerator } from '../utils/id-generator';\nimport { server_logger } from '../utils/loggers';\nimport Namespace = SocketIO.Namespace;\n\nconst log = server_logger;\n\nexport class DashboardServerSocket {\n\n  io_root: SocketIO.Server;\n  io: Namespace;\n\n  constructor(io_root: SocketIO.Server) {\n    this.io_root = io_root;\n    const io = this.io_root.of('/dashboard');\n\n    this.io = io;\n    io.on('connection', function (socket) {\n      log.debug('New client connected to dashboard');\n\n      socket.on('disconnect', () => {\n        log.debug('Client disconnected from dashboard');\n      });\n\n      socket.on('getUiPanel', name => {\n        log.debug('getUiPanel: ' + name);\n        socket.emit('getUiPanel', app.dashboard.getUiPanel(name));\n      });\n\n      socket.on('getUiPanelsList', () => {\n        socket.emit('getUiPanelsList', app.dashboard.getUiPanelsList());\n      });\n\n      socket.on('nodeMessageToServerSide', n => {\n        let cont = ContainerRegistry.instance().get(n.cid);\n        if (!cont) {\n          log.error(`Can't send node message to server-side. Container [${n.cid}] does not exist`);\n          return;\n        }\n\n        let node = cont.getSubNode(n.id);\n        if (!node) {\n          log.error(`Can't send node message to server-side. Node [${IdGenerator.createNodeId(n.cid,\n                                                                                              n.id)}] does not exist`);\n          return;\n        }\n\n        if (!node['onGetMessageToServerSide']) {\n          log.error(`Can't send node message to server-side. Node ${node.getReadableId()} ` +\n                    `dont have onGetMessageToServerSide method!`);\n          return;\n        }\n\n        node['onGetMessageToServerSide'](n.message);\n      });\n\n      //redirect message\n      socket.on('nodeMessageToEditorSide', n => {\n        let cont = ContainerRegistry.instance().get(n.cid);\n        if (!cont) {\n          log.error(`Can't send node message to editor-side. Container [${n.cid}] does not exist`);\n          return;\n        }\n\n        let node = cont.getSubNode(n.id);\n        if (!node) {\n          log.error(`Can't send node message to editor-side. Node [${IdGenerator.createNodeId(n.cid,\n                                                                                              n.id)}] does not exist`);\n          return;\n        }\n\n        app.server.editorSocket.io.in(n.cid).emit('nodeMessageToEditorSide', n);\n      });\n\n      //redirect message\n      socket.on('nodeMessageToDashboardSide', n => {\n        let cont = ContainerRegistry.instance().get(n.cid);\n        if (!cont) {\n          log.error(`Can't send node message to dashboard-side. Container [${n.cid}] does not exist`);\n          return;\n        }\n\n        let node = cont.getSubNode(n.id);\n        if (!node) {\n          log.error(`Can't send node message to dashboard-side. Node [${IdGenerator.createNodeId(n.cid,\n                                                                                                 n.id)}] does not exist`);\n          return;\n        }\n\n        app.server.dashboardSocket.io.in(n.cid).emit('nodeMessageToDashboardSide', n);\n      });\n\n      socket.on(UPDATE_NODE_SETTING, n => {\n        let cont = ContainerRegistry.instance().get(n.cid);\n        if (!cont) {\n          log.error(`Can't update node settings. Container id [${n.cid}] does not exist`);\n          return;\n        }\n\n        let node = cont.nodeRegistry().get(n.id);\n        if (!node) {\n          log.error(`Can't update node settings. Node [${IdGenerator.createNodeId(n.cid, n.id)}] does not exist`);\n          return;\n        }\n\n        let oldName = node.name;\n        let oldIcon = node.icon;\n        let oldSettings = SerializableHelper.serialize(node.settings);\n\n        NodeHookHelper.execute(node, 'onBeforeSettingsChange', n.settings, n.name, n.icon);\n\n        for (let key in n.settings) {\n          let s = n.settings[key];\n          try {\n            node.settings[key].value = s.value;\n          } catch (error) {\n            log.error(error);\n          }\n        }\n\n        node.name = n.name;\n        node.icon = n.icon;\n        PubSubHelpers.renameFunction(node);\n\n        Promise.resolve(NodeHookHelper.execute(node, 'onAfterSettingsChange', oldSettings, oldName, oldIcon))\n               .then(nn => createNodeDbHelper().updateAsync(ContainerRegistry.instance().rootContainer().db, nn))\n               .then(_ => {\n                 const args = {\n                   id: n.id, cid: n.cid, name: n.name, icon: n.icon, settings: node.settings,\n                   oldName: oldName, oldIcon: oldIcon, oldSettings: oldSettings,\n                 };\n                 app.server.editorSocket.io.emit(UPDATE_NODE_SETTING, args);\n                 if (node.isDashboardNode) {\n                   app.server.dashboardSocket.io.in(n.cid).emit(UPDATE_NODE_SETTING, args);\n                 }\n               });\n      });\n\n      socket.on('dashboardElementGetNodeState', n => {\n        let cont = ContainerRegistry.instance().get(n.cid);\n        if (!cont) {\n          log.error(`Can't get dashboard element state. Container [${n.cid}] does not exist`);\n          return;\n        }\n\n        let node = cont.getSubNode(n.id);\n        if (!node) {\n          log.error(\n            `Can't get dashboard element state. Node [${IdGenerator.createNodeId(n.cid, n.id)}] does not exist`);\n          return;\n        }\n\n        //you can override get state logic\n        if (node['onDashboardElementGetNodeState']) {\n          node['onDashboardElementGetNodeState'](n.options);\n        } else {\n          let m = { id: node.id, cid: node.container.id, state: node.properties['state'] };\n          socket.emit('dashboardElementGetNodeState', m);\n        }\n      });\n\n      socket.on('dashboardElementSetNodeState', n => {\n        let cont = ContainerRegistry.instance().get(n.cid);\n        if (!cont) {\n          log.error(`Can't set node state from dashboard element. Container [${n.cid}] does not exist`);\n          return;\n        }\n\n        let node = cont.getSubNode(n.id);\n        if (!node) {\n          log.error(`Can't set node state from dashboard element. Node [${IdGenerator.createNodeId(n.cid,\n                                                                                                   n.id)}] does not exist`);\n          return;\n        }\n\n        //you can override get state logic\n        if (node['onDashboardElementSetNodeState']) {\n          node['onDashboardElementSetNodeState'](n.state);\n        } else {\n          node.properties['state'] = n.state;\n          //send state back to all clients\n          let m = { id: node.id, cid: node.container.id, state: node.properties['state'] };\n          let panelName = this.settings['ui-panel'].value;\n          io.in('' + panelName).emit('dashboardElementGetNodeState', m);\n        }\n      });\n\n      // client join to dashboard room\n      socket.on('join-room', room => {\n        if ((<any>socket).room != null) {\n          log.debug('Leave dashboard room [' + (<any>socket).room + ']');\n          socket.leave((<any>socket).room, () => {\n            (<any>socket).room = room;\n            socket.join(room, () => {\n              log.debug('Join to dashboard room [' + room + ']');\n            });\n          });\n        } else {\n          (<any>socket).room = room;\n          socket.join(room, () => {\n            log.debug('Join to dashboard room [' + room + ']');\n          });\n        }\n      });\n\n      socket.on('leave-room', room => {\n        socket.leave(room, () => {\n          log.debug('Leave dashboard room [' + room + ']');\n        });\n        (<any>socket).room = null;\n      });\n    });\n  }\n}\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 25.01.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport app from '../app';\nimport { ContainerRegistry } from '../nodes/container';\nimport { Node } from '../nodes/node';\nimport { Side } from '../nodes/node-interface';\nimport NodeUtils from '../nodes/node-utils';\nimport { NODE_IO_VALUES } from '../shared/websocket-events';\nimport { server_logger } from '../utils/loggers';\nimport Namespace = SocketIO.Namespace;\n\nconst log = server_logger;\nconst SLOTS_VALUES_INTERVAL = 200;\n\nexport class EditorServerSocket {\n  io_root: SocketIO.Server;\n  io: Namespace;\n\n  constructor(io_root: SocketIO.Server) {\n    this.io_root = io_root;\n    const io = io_root.of('/editor');\n    this.io = io;\n\n    io.on('connection', function (socket) {\n      log.debug('New client connected to editor');\n\n      socket.on('disconnect', () => {\n        log.debug('Client disconnected from editor');\n      });\n\n      // join client to container room\n      socket.on('room', function (room) {\n        if ((<any>socket).room != null) {\n          socket.leave((<any>socket).room, function () {\n            // it is necessary to waiting for leave room before join only if it's the same room (same id)\n            (<any>socket).room = room;\n            socket.join(room, () => {\n              log.debug('Switch editor room to [' + room + ']');\n            });\n          });\n        } else {\n          (<any>socket).room = room;\n          socket.join(room, () => {\n            log.debug('Join to editor room [' + room + ']');\n          });\n        }\n      });\n\n      socket.on('nodeMessageToServerSide', function (n) {\n        let node = EditorServerSocket.checkContainerNodeValidity(n, Side.server);\n        node && node['onGetMessageToServerSide'](n.message);\n      });\n\n      //redirect message\n      socket.on('nodeMessageToEditorSide', function (n) {\n        let node = EditorServerSocket.checkContainerNodeValidity(n, Side.editor);\n        node && app.server.editorSocket.io.in(n.cid).emit('nodeMessageToEditorSide', n);\n      });\n\n      //redirect message\n      socket.on('nodeMessageToDashboardSide', function (n) {\n        let node = EditorServerSocket.checkContainerNodeValidity(n, Side.dashboard);\n        node && app.server.dashboardSocket.io.in(n.cid).emit('nodeMessageToDashboardSide', n);\n      });\n    });\n\n    setInterval(() => this.sendSlotsValues(io), SLOTS_VALUES_INTERVAL);\n  }\n\n  /**\n   * @param {Node} n\n   * @param {Side} side\n   * @returns {Node} Node if Container and Node is valid otherwise null\n   */\n  static checkContainerNodeValidity(n: Node, side: Side): Node {\n    let cont = ContainerRegistry.instance().get(n.cid);\n    if (!cont) {\n      log.error(`Can't send node message to ${side}-side. Container id [\"${n.cid}'] does not exist`);\n      return null;\n    }\n\n    let node = cont.getSubNode(n.id);\n    if (!node) {\n      log.error(`Can't send node message to ${side}-side. Node id [\"${n.cid}'/'${n.id}'] does not exist`);\n      return null;\n    }\n    return node;\n  }\n\n  sendSlotsValues(io) {\n    const connectedSocket = io.connected;\n    for (let key of Object.keys(connectedSocket)) {\n      const room = Object.keys(io.connected[key].rooms).filter(x => x !== key)[0];\n      let slotsValues = NodeUtils.getNodesIOValues(room);\n      io.to(room).emit(NODE_IO_VALUES, slotsValues);\n    }\n  }\n}\n","import { ContainerRegistry } from './container';\nimport Utils from './utils';\n\nexport default class NodeUtils {\n  static getNodesIOValues(cid: string | number): any {\n    let container = ContainerRegistry.instance().get(cid);\n    if (!container || !container.subNodes()) return;\n\n    let inputs_values = [];\n    let outputs_values = [];\n    for (let node of container.subNodes()) {\n      if (node.inputs) {\n        for (let i in node.inputs) {\n          let data = node.getInputData(Number(i));\n          data = Utils.formatAndTrimValue(data);\n          inputs_values.push({ nodeId: node.id, inputId: i, type: node.type, data });\n        }\n      }\n\n      if (node.outputs) {\n        for (let o in node.outputs) {\n          let data = node.outputs[o].data;\n          data = Utils.formatAndTrimValue(data);\n          outputs_values.push({ nodeId: node.id, outputId: o, type: node.type, data });\n        }\n      }\n    }\n    return { cid: container.id, inputs: inputs_values, outputs: outputs_values };\n  }\n}\n","import { Server } from 'http';\nimport * as SocketIO from 'socket.io';\nimport { Namespace, Socket } from 'socket.io';\nimport { heartbeat_logger } from '../utils/loggers';\n\nexport class PingPongServerSocket {\n  private io: Namespace;\n\n  constructor(httpServer: Server, io_root?: SocketIO.Server) {\n    let socketServer = io_root ?? SocketIO(httpServer, { path: '/heartbeat' });\n    this.io = socketServer.of(io_root ? '/heartbeat' : '/ping');\n    this.io.on('connect', socket => this.listen(socket));\n  }\n\n  private listen(client: Socket): void {\n    heartbeat_logger.debug(`New client ${client.id} connected into server path ${client.server.path()}`);\n    heartbeat_logger.debug(`Handshake: ${JSON.stringify(client.handshake)}`);\n    client.on('disconnect', () => {\n      heartbeat_logger.debug(`Client ${client.id} is disconnected`);\n    });\n  }\n}\n","import * as express from 'express';\nimport { IRouter } from 'express-serve-static-core';\nimport { ContainerRegistry } from '../../nodes/container';\nimport { isNull } from '../../utils/helper';\nimport { Server } from '../server';\nimport { ApiLinkHandler } from './handler/api-link-handler';\nimport { ApiNodeHandler } from './handler/api-node-handler';\n\nclass ApiEditorRouter {\n  private readonly router: IRouter;\n  private readonly server: Server;\n  private _nodeHandler: ApiNodeHandler;\n  private _linkHandler: ApiLinkHandler;\n\n  constructor(server: Server) {\n    this.router = express.Router();\n    this.server = server;\n  }\n\n  setup(loopInterval: number): IRouter {\n    this.router.get('/c/:cid', (req, res) => this.nodeHandler().onList(req, res));\n    this.router.delete('/c/:cid/n/', (req, res) => this.nodeHandler().onRemove(req, res));\n    this.router.post('/c/:cid/n/', (req, res) => this.nodeHandler().onCreate(req, res));\n    this.router.post('/c/:cid/move', (req, res) => this.nodeHandler().onPackUp(req, res));\n    this.router.post('/c/:cid/export', (req, res) => this.nodeHandler().onExport(req, res));\n    this.router.post('/c/:cid/clone', (req, res) => this.nodeHandler().onClone(req, res));\n    this.router.post('/c/:cid/import', (req, res) => this.nodeHandler().onImport(req, res));\n\n    this.router.post('/c/:cid/l', (req, res) => this.linkHandler().onCreate(req, res));\n    this.router.put('/c/:cid/l', (req, res) => this.linkHandler().onMove(req, res));\n    this.router.delete('/c/:cid/l', (req, res) => this.linkHandler().onRemove(req, res));\n\n    setInterval(() => updateActiveNodes(this.server), 500);\n    return legacySetup(this.router, this.server, loopInterval);\n  }\n\n  nodeHandler() {\n    if (isNull(this._nodeHandler)) {\n      this._nodeHandler = new ApiNodeHandler(this.server.editorSocket, this.server.dashboardSocket);\n    }\n    return this._nodeHandler;\n  }\n\n  linkHandler() {\n    if (isNull(this._linkHandler)) {\n      this._linkHandler = new ApiLinkHandler(this.server.editorSocket);\n    }\n    return this._linkHandler;\n  }\n}\n\nfunction updateActiveNodes(server: Server) {\n  if (!ContainerRegistry.instance().rootContainer()) return;\n\n  for (let container of ContainerRegistry.instance().list()) {\n    let activeNodesIds = [];\n\n    for (let node of container.subNodes()) {\n      if (node.isRecentlyActive) {\n        node.isRecentlyActive = false;\n        activeNodesIds.push(node.id);\n      }\n    }\n\n    if (activeNodesIds.length > 0) {\n      server.editorSocket.io.in('' + container.id).emit('nodes-active', {\n        ids: activeNodesIds,\n        cid: container.id,\n      });\n    }\n  }\n}\n\nfunction legacySetup(router: IRouter, server: Server, loopInterval: number): IRouter {\n\n  function getDb() {\n    return ContainerRegistry.instance().rootContainer().db;\n  }\n\n  /**\n   * Update node position\n   */\n  router.put('/c/:cid/n/:id/position', function (req, res) {\n    let container = ContainerRegistry.instance().get(req.params.cid);\n    if (!container) {\n      return res.status(404).send(`Can't update node position. Container id [${req.params.cid}] not found.`);\n    }\n\n    let node = container.getSubNode(req.params.id);\n    if (!node) {\n      return res.status(404).send(\n        `Can't update node position. Node id [${req.params.cid}/${req.params.id}] not found.`);\n    }\n\n    node.pos = req.body.position;\n\n    if (getDb()) {\n      getDb().updateNode(node.id, node.container.id, { $set: { pos: node.pos } });\n    }\n\n    server.editorSocket.io.emit('node-update-position', {\n      id: req.params.id,\n      cid: req.params.cid,\n      pos: node.pos,\n    });\n    res.send(`Node position updated: type [${node.type}] id [${node.container.id}/${node.id}]`);\n  });\n\n  /**\n   * Update node size\n   */\n  router.put('/c/:cid/n/:id/size', function (req, res) {\n    let container = ContainerRegistry.instance().get(req.params.cid);\n    if (!container) return res.status(404).send(`Can't update node size. Container id [${req.params.cid}] not found.`);\n\n    let node = container.getSubNode(req.params.id);\n    if (!node) {\n      return res.status(404).send(`Can't update node size. Node id [${req.params.cid}/${req.params.id}] not found.`);\n    }\n\n    node.size = req.body.size;\n\n    if (getDb()) getDb().updateNode(node.id, node.container.id, { $set: { size: node.size } });\n\n    server.editorSocket.io.emit('node-update-size', {\n      id: req.params.id,\n      cid: req.params.cid,\n      size: node.size,\n    });\n    res.send(`Node size updated: type [${node.type}] id [${node.container.id}/${node.id}]`);\n  });\n\n  /**\n   * Update node collapsed\n   */\n  router.put('/c/:cid/n/:id/collapse', function (req, res) {\n    let container = ContainerRegistry.instance().get(req.params.cid);\n    if (!container) {\n      return res.status(404).send(`Can't update node collapse. Container id [${req.params.cid}] not found.`);\n    }\n\n    let node = container.getSubNode(req.params.id);\n    if (!node) {\n      return res.status(404).send(\n        `Can't update node collapse. Node id [${req.params.cid}/${req.params.id}] not found.`);\n    }\n\n    node.flags.collapsed = req.body.collapsed;\n\n    if (getDb()) getDb().updateNode(node.id, node.container.id, { $set: { 'flags.collapsed': node.flags?.collapsed } });\n\n    server.editorSocket.io.emit('node-update-collapsed', {\n      id: req.params.id,\n      cid: req.params.cid,\n      'flags.collapsed': node.flags?.collapsed,\n    });\n    res.send(`Node collapsed updated: type [${node.type}] id [${node.container.id}/${node.id}]`);\n  });\n\n//------------------ Container ------------------------\n  /**\n   * Run step container\n   */\n  router.get('/state', function (req, res) {\n    let state = {\n      isRunning: ContainerRegistry.instance().rootContainer().isRunning,\n    };\n    res.json(state);\n  });\n\n  /**\n   * Run container\n   */\n  router.post('/run', function (req, res) {\n    ContainerRegistry.instance().rootContainer().run(loopInterval);\n    server.editorSocket.io.emit('container-run');\n    res.send(`Run container`);\n  });\n\n  /**\n   * Stop container\n   */\n  router.post('/stop', function (req, res) {\n    ContainerRegistry.instance().rootContainer().stop();\n    server.editorSocket.io.emit('container-stop');\n    res.send(`Stop container`);\n  });\n\n  /**\n   * Run step container\n   */\n  router.post('/step', function (req, res) {\n    ContainerRegistry.instance().rootContainer().runStep();\n    server.editorSocket.io.emit('container-run-step');\n    res.send(`Run step container`);\n  });\n\n//------------------ nodes internal requests ------------------------\n\n  router.get('/c/:cid/n/:id*', function (req, res) {\n    let cont = ContainerRegistry.instance().get(req.params.cid);\n    if (!cont) return res.status(404).send(`Can't send request to node. Container id [${req.params.cid}] not found.`);\n\n    let node = cont.getSubNode(req.params.id);\n    if (!node) {\n      return res.status(404).send(\n        `Can't send request to node. Node id [${req.params.cid}/${req.params.id}] not found.`);\n    }\n\n    if (node['onEditorApiGetRequest']) {\n      node['onEditorApiGetRequest'](req, res);\n    } else {\n      return res\n        .status(404)\n        .send(`Can't send request to node. Node id [${req.params.cid}/${req.params.id}] does not accept requests.`);\n    }\n  });\n\n  router.post('/c/:cid/n/:id*', function (req, res) {\n    let cont = ContainerRegistry.instance().get(req.params.cid);\n    if (!cont) return res.status(404).send(`Can't send request to node. Container id [${req.params.cid}] not found.`);\n\n    let node = cont.getSubNode(req.params.id);\n    if (!node) {\n      return res.status(404).send(\n        `Can't send request to node. Node id [${req.params.cid}/${req.params.id}] not found.`);\n    }\n\n    if (node['onEditorApiPostRequest']) {\n      node['onEditorApiPostRequest'](req, res);\n    } else {\n      return res\n        .status(404)\n        .send(`Can't send request to node. Node id [${req.params.cid}/${req.params.id}] does not accept requests.`);\n    }\n  });\n\n  router.post('/c/:cid/n-type', function (req, res) {\n    let cont = ContainerRegistry.instance().get(req.params.cid);\n    if (!cont) {\n      return res.status(404).send(\n        `Can't receive request to node. Container id [${req.params.cid}] not found.`);\n    }\n\n    let type = req.body.type;\n    if (!type) return res.status(404).send(`Can't receive request to node. Node type is not defined.`);\n\n    let includeSubContainers = req.body.subcontainers == true;\n    let nodes = cont.getNodesByType(type, includeSubContainers);\n    if (nodes.length == 0) {\n      return res\n        .status(404)\n        .send(`Can't receive request to node. Node type [${type}] not found in container [${req.params.cid}].`);\n    }\n\n    nodes.forEach(node => {\n      if (node['onEditorApiPostRequest']) {\n        node['onEditorApiPostRequest'](req, res);\n      } else {\n        return res.status(404).send(`Can't receive request to node. Node type [${type}] does not accept requests.`);\n      }\n    });\n\n    if (!res.headersSent) res.status(400).send(`No node has processed the request.`);\n  });\n\n  return router;\n}\n\nconst apiEditorSetup = (server: Server, loopInterval: number) => new ApiEditorRouter(server).setup(loopInterval);\nexport { apiEditorSetup };\n","import { Request, Response } from 'express';\nimport { createNodeLink } from '../../../nodes/node-link';\nimport { CREATE_LINK, MOVE_LINK, REMOVE_LINK } from '../../../shared/websocket-events';\nimport { EditorServerSocket } from '../../editor-server-socket';\nimport { NodeLinkService } from '../../service/NodeLinkService';\nimport { ApiHandler } from './api-handler';\n\nexport class ApiLinkHandler extends ApiHandler {\n\n  private readonly linkService = new NodeLinkService();\n\n  constructor(editorSocket: EditorServerSocket) {\n    super(editorSocket);\n  }\n\n  onCreate(req: Request, resp: Response) {\n    const { source, targets } = req.body;\n    this.linkService.create(req.params.cid, source, ...targets)\n        .then(result => this.emitSuccess(resp, CREATE_LINK, result, 201))\n        .catch(err => this.emitError(resp, err, CREATE_LINK));\n  }\n\n  onRemove(req: Request, resp: Response) {\n    const { source, targets } = req.body;\n    this.linkService.remove(req.params.cid, source, ...targets)\n        .then(result => this.emitSuccess(resp, REMOVE_LINK, result))\n        .catch(err => this.emitError(resp, err, REMOVE_LINK));\n  }\n\n  onMove(req: Request, resp: Response) {\n    const cid = req.params.cid;\n    const { type, source, targets, another } = req.body;\n    const nodeLink = createNodeLink(cid, source, ...targets);\n    this.linkService.move(type, nodeLink, another)\n        .then(result => this.emitSuccess(resp, MOVE_LINK, result))\n        .catch(err => this.emitError(resp, err, MOVE_LINK));\n  }\n}\n","import { NodeDbHelper } from '../../nodes/node-db-helper';\nimport { ContainerRegistryMetadata } from '../../nodes/node-interface';\nimport { IOType } from '../../nodes/node-io';\nimport { createLinkHandler, createNodeLink, NodeLink, NodeLinkHandler, SlimNodeIO } from '../../nodes/node-link';\nimport { LinkResult } from '../../shared/link-result';\nimport { BackendLinkVisitor } from '../../shared/link-result-visitor';\nimport { NodeService } from './node-service';\n\nexport class NodeLinkService extends NodeService {\n  private readonly handler: NodeLinkHandler;\n\n  constructor(cRegistry?: ContainerRegistryMetadata, dbHelper?: NodeDbHelper) {\n    super(cRegistry, dbHelper);\n    this.handler = createLinkHandler(this.cRegistry);\n  }\n\n  create(cid: number | string, source: SlimNodeIO, ...targets: SlimNodeIO[]): Promise<LinkResult> {\n    return Promise.resolve(createNodeLink(cid, source, ...targets))\n                  .then(nodeLink => this.handler.create(nodeLink))\n                  .then(r => this.persist(r));\n  }\n\n  remove(cid: number | string, source: SlimNodeIO, ...targets: SlimNodeIO[]): Promise<LinkResult> {\n    return Promise.resolve(createNodeLink(cid, source, ...targets))\n                  .then(nodeLink => this.handler.remove(nodeLink))\n                  .then(r => this.persist(r));\n  }\n\n  move(type: IOType, fromLink: NodeLink, toAnother: SlimNodeIO): Promise<LinkResult> {\n    return Promise.resolve(this.handler.move(type, fromLink, toAnother)).then(r => this.persist(r));\n  }\n\n  disconnect(): Promise<LinkResult> {\n    return null;\n  }\n\n  private persist(r: LinkResult): Promise<LinkResult> {\n    return new BackendLinkVisitor(this.cRegistry).visit(r)\n                                                 .then(re => {\n                                                   this.logger.info(re.message);\n                                                   return re;\n                                                 });\n  }\n}\n\n","import { Request, Response } from 'express';\nimport { SerializedContainer, SerializedNode } from '../../../nodes/node-interface';\nimport { NodeValidator } from '../../../shared/validator';\nimport {\n  CLONE_NODES,\n  CREATE_NODE,\n  EXPORT_NODES,\n  IMPORT_NODES,\n  PACK_UP_NODES,\n  REMOVE_NODES,\n} from '../../../shared/websocket-events';\nimport { RegistryItemExistedError } from '../../../utils/errors';\nimport { reliability_logger } from '../../../utils/loggers';\nimport { DashboardServerSocket } from '../../dashboard-server-socket';\nimport { EditorServerSocket } from '../../editor-server-socket';\nimport { NodeCRUDService } from '../../service/NodeCRUDService';\nimport { NodeETLService } from '../../service/NodeETLService';\nimport { ApiHandler } from './api-handler';\n\nexport class ApiNodeHandler extends ApiHandler {\n\n  private readonly dashboardSocket: DashboardServerSocket;\n  private readonly crudService = new NodeCRUDService();\n  private readonly etlService = new NodeETLService();\n\n  constructor(editorSocket: EditorServerSocket, dashboardSocket: DashboardServerSocket) {\n    super(editorSocket);\n    this.dashboardSocket = dashboardSocket;\n  }\n\n  onList(req: Request, resp: Response): void {\n    this.crudService.getNodes(req.params.cid)\n        .then(containers => resp.status(200).json(containers))\n        .catch(err => {\n          reliability_logger.warn(err);\n          resp.status(500).json(<SerializedContainer>{ id: req.params.cid, serializedNodes: [], err: err.msg });\n        });\n  }\n\n  onCreate(req: Request, resp: Response): void {\n    this.crudService.createNode(req.params.cid, <SerializedNode>{ type: req.body.type, pos: req.body.position })\n        .then(result => {\n          if (result.isDashboardNode) {\n            this.dashboardSocket.io.in(req.params.cid).emit(CREATE_NODE, result.result());\n          }\n          return this.emitSuccess(resp, CREATE_NODE, result, 201);\n        })\n        .catch(err => this.emitError(resp, err, CREATE_NODE,\n                                     e => e instanceof RegistryItemExistedError ? 409 : 400));\n  }\n\n  onRemove(req: Request, resp: Response): void {\n    this.crudService.removeNodes(req.params.cid, req.body, true)\n        .then(result => this.emitSuccess(resp, REMOVE_NODES, result))\n        .catch(err => this.emitError(resp, err, REMOVE_NODES));\n  }\n\n  onPackUp(req: Request, resp: Response): void {\n    const cId = req.params.cid;\n    const { ids, pos } = req.body;\n    this.etlService.packUpNodes(cId, ids, pos)\n        .then(result => {\n          this.editorSocket.io.emit(REMOVE_NODES, result.cleanupResult.result());\n          return this.emitSuccess(resp, PACK_UP_NODES, result);\n        })\n        .catch(err => this.emitError(resp, err, PACK_UP_NODES));\n  }\n\n  onClone(req: Request, resp: Response): void {\n    const { ids, pos } = req.body;\n    this.etlService.cloneNodes(req.params.cid, ids, pos)\n        .then(result => this.emitSuccess(resp, CLONE_NODES, result))\n        .catch(err => this.emitError(resp, err, CLONE_NODES));\n  }\n\n  onExport(req: Request, resp: Response): void {\n    this.etlService.exportNodes(req.params.cid, req.body)\n        .then(output => resp.status(200).json(output))\n        .catch(err => this.emitError(resp, err, EXPORT_NODES));\n  }\n\n  onImport(req: Request, resp: Response) {\n    const cId = req.params.cid;\n    const { nodes, pos } = req.body;\n    const output = NodeValidator.NodeArrayValidator().validate(nodes, { allowUnknown: true });\n    if (output.error) {\n      return this.emitError(resp, new Error(output.error), IMPORT_NODES);\n    }\n    this.etlService.importNodes(cId, nodes as SerializedNode[], pos)\n        .then(result => this.emitSuccess(resp, IMPORT_NODES, result, 201))\n        .catch(err => this.emitError(resp, err, IMPORT_NODES));\n  }\n\n}\n","import Namespace = SocketIO.Namespace;\nimport { Colors, create } from 'logplease';\n\nconst log = create('server', { color: Colors.Yellow });\n\nexport class WireNameServerSocket {\n  io_root: SocketIO.Server;\n  io: Namespace;\n\n  constructor(io_root: SocketIO.Server) {\n    this.io_root = io_root;\n    const io = io_root.of('/wire-name');\n    this.io = io;\n\n    io.on('connection', function(socket) {\n      log.debug('New client connected to wire');\n\n      socket.on('disconnect', () => {\n        log.debug('Client disconnected from wire');\n      });\n    });\n  }\n}\n","module.exports = require(\"express-validator\");","/**\n * Created by Derwish (derwish.pro@gmail.com) on 04.07.2016.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport * as express from 'express';\nimport { ContainerRegistry } from '../../nodes/container';\n\nlet router = express.Router();\n\nrouter.get('/', function(req, res, next) {\n  res.render('dashboard/index', { container_id: 0 });\n});\n\nrouter.get('/c/:cid', function(req, res, next) {\n  res.render('dashboard/index', { container_id: req.params.cid });\n});\n\n//node direct page get\nrouter.get('/c/:cid/n/:id*', function(req, res) {\n  let cont = ContainerRegistry.instance().get(req.params.cid);\n  if (!cont)\n    return res\n      .status(404)\n      .send(`Can't send request to node. Container id [${req.params.cid}] not found.`);\n\n  let node = cont.getSubNode(req.params.id);\n  if (!node)\n    return res\n      .status(404)\n      .send(`Can't send request to node. Node id [${req.params.cid}/${req.params.id}] not found.`);\n\n  if (node['onDashboardGetRequest']) node['onDashboardGetRequest'](req, res);\n  else\n    return res\n      .status(404)\n      .send(\n        `Can't send request to node. Node id [${req.params.cid}/${req.params.id}] does not accept requests.`,\n      );\n});\n\n//node direct page post\nrouter.post('/c/:cid/n/:id*', function(req, res) {\n  let cont = ContainerRegistry.instance().get(req.params.cid);\n  if (!cont)\n    return res\n      .status(404)\n      .send(`Can't send request to node. Container id [${req.params.cid}] not found.`);\n\n  let node = cont.getSubNode(req.params.id);\n  if (!node)\n    return res\n      .status(404)\n      .send(`Can't send request to node. Node id [${req.params.cid}/${req.params.id}] not found.`);\n\n  if (node['onDashboardPostRequest']) node['onDashboardPostRequest'](req, res);\n  else\n    return res\n      .status(404)\n      .send(\n        `Can't send request to node. Node id [${req.params.cid}/${req.params.id}] does not accept requests.`,\n      );\n});\n\nmodule.exports = router;\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 25.02.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport * as express from 'express';\nimport { ContainerRegistry } from '../../nodes/container';\n\nlet router = express.Router();\n\n/**\n * Get container\n */\nrouter.get('/c/:cid', function(req, res) {\n  let container = ContainerRegistry.instance().get(req.params.cid);\n  if (!container)\n    return res.status(404).send(`Can't get container. Container id [${req.params.cid}] not found.`);\n  //TODO: fix it\n  // let s = container.serialize(true);\n  let s = container.serialize();\n  res.json(s);\n});\n\nmodule.exports = router;\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 04.07.2016.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport * as express from 'express';\nimport * as config from '../../config.json';\nimport { ContainerRegistry } from '../../nodes/container';\n\nlet router = express.Router();\n\nrouter.get('/', function(req, res) {\n  res.render('editor/index', {\n    split: req.query.split,\n    container_id: 0,\n    theme: config.nodeEditor.theme,\n  });\n});\n\nrouter.get('/c/:cid', function(req, res) {\n  let cid = req.params.cid || 0;\n\n  if (!ContainerRegistry.instance().get(cid)) return res.redirect('/editor');\n\n  res.render('editor/index', {\n    split: req.query.split,\n    container_id: cid,\n    theme: config.nodeEditor.theme,\n  });\n});\n\nrouter.get('/split', function(req, res) {\n  res.render('editor/split', { container_id: 0 });\n});\n\nrouter.get('/split/c/:cid', function(req, res) {\n  let cid = req.params.cid || 0;\n\n  if (!ContainerRegistry.instance().get(cid)) return res.redirect('/editor/split');\n\n  res.render('editor/split', { container_id: cid });\n});\n\nmodule.exports = router;\n","import * as express from 'express';\nimport app from '../../app';\nimport WireNameDataSource from '../../database/datasource/WireNameDataSource';\n\nlet router = express.Router();\n\nrouter.get('', async function(req, res) {\n  try {\n    const wire = await WireNameDataSource.getWireName();\n    res.json(wire);\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nrouter.put('', async function({ body }, res) {\n  const { name } = body;\n  try {\n    await WireNameDataSource.changeWireName(name);\n    app.server.wireNameSocket.io.emit('wire-name-update', name);\n    res.status(201).send(body);\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nmodule.exports = router;\n","import * as fs from 'fs';\nimport config from '../../config';\nimport FileUtils from '../../nodes/utils/file-utils';\nimport { db_logger as logger } from '../../utils/loggers';\n\nconst file = `${config.dataDir}/wire-name.txt`;\nexport default class WireNameDataSource {\n\n  static getWireName(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      FileUtils.createFile(file).then(() => {\n        fs.readFile(file, { encoding: 'utf-8' }, (err, data) => {\n          if (err) {\n            logger.error(err.message);\n            reject(err);\n          } else {\n            resolve(data);\n          }\n        });\n      });\n    });\n  }\n\n  static changeWireName(wireName: string): Promise<string> {\n    return new Promise((resolve, reject) => {\n      FileUtils.createFile(file).then(() => {\n        fs.writeFile(file, wireName, err => {\n          if (err) {\n            logger.error(err.message);\n            reject(err);\n          } else {\n            resolve(wireName);\n          }\n        });\n      });\n    });\n  }\n\n}\n","import * as express from 'express';\nimport app from '../../app';\nimport { authMiddleware, schemaMiddleware } from '../middleware';\nimport CryptoUtils from '../../nodes/utils/crypto-utils';\n\nconst Joi = require('@hapi/joi');\nlet router = express.Router();\n\nconst authUserSchema = Joi.object({\n  username: Joi.string().min(5),\n  password: Joi.string().min(5),\n});\n\nconst encryptTextSchema = Joi.object({\n  text: Joi.string().min(1),\n});\n\nrouter.route('/encrypt').post(schemaMiddleware(encryptTextSchema, 'body'), async (req, res) => {\n  try {\n    res.status(201).send({ encryptedText: CryptoUtils.encrypt(req.body.text) });\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nrouter.route('/user').post(schemaMiddleware(authUserSchema, 'body'), async (req, res) => {\n  try {\n    const authUser = await app.db.addAuthUser(req.body);\n    res.status(201).send(authUser);\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nrouter.route('/user').get(async (req, res) => {\n  try {\n    const authUser = await app.db.getAuthUser();\n    res.status(200).send(authUser);\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nrouter.route('/users').delete(authMiddleware(), async (req, res) => {\n  try {\n    const authUser = await app.db.deleteAuthUsers();\n    res.status(200).send(authUser);\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nrouter.route('/login').post(schemaMiddleware(authUserSchema, 'body'), async (req, res) => {\n  try {\n    const token = await app.db.getAuthToken(req.body);\n    res.status(200).send({ token });\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nmodule.exports = router;\n","module.exports = require(\"crypto-js\");","import * as express from 'express';\nimport HelpDataSource from '../../database/datasource/HelpDataSource';\n\nlet router = express.Router();\n\nrouter.get('', async function(req, res) {\n  try {\n    const stringHtml = await HelpDataSource.getHelpComment();\n    res.json(stringHtml);\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nrouter.put('', async function({ body }, res) {\n  const { stringHtml } = body;\n  try {\n    await HelpDataSource.changeHelpComment(stringHtml);\n    res.status(201).send(\"successful\");\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nmodule.exports = router;\n\n","import * as fs from 'fs';\nimport config from '../../config';\nimport FileUtils from '../../nodes/utils/file-utils';\nimport { db_logger as logger } from '../../utils/loggers';\n\nconst file = `${config.dataDir}/help-comment.txt`;\nexport default class HelpDataSource {\n\n  static getHelpComment(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      FileUtils.createFile(file).then(() => {\n        fs.readFile(file, { encoding: 'utf-8' }, (err, data) => {\n          if (err) {\n            logger.error(err.message);\n            reject(err);\n          } else {\n            resolve(data);\n          }\n        });\n      });\n    });\n  }\n\n  static changeHelpComment(stringHtml: string): Promise<string> {\n    return new Promise((resolve, reject) => {\n      FileUtils.createFile(file).then(() => {\n        fs.writeFile(file, stringHtml, err => {\n          if (err) {\n            logger.error(err.message);\n            reject(err);\n          } else {\n            resolve(stringHtml);\n          }\n        });\n      });\n    });\n  }\n\n}\n\n","import * as express from 'express';\nimport PlatformDataSource from '../../database/datasource/PlatformDataSource';\nimport { ContainerRegistry } from '../../nodes/container';\nimport OsUtils from '../../nodes/utils/os-utils';\n\nlet router = express.Router();\n\n// get platform data\nrouter.get('', async function (req, res) {\n  try {\n    const platform = await PlatformDataSource.getPlatform();\n    res.json(platform);\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\n// update platform\nrouter.put('', async function ({ body }, res) {\n  try {\n    await PlatformDataSource.updatePlatform(body);\n    res.status(201).send(\"successful\");\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\n//download nodes\nrouter.get('/wires/download/nodes', async function (req, res) {\n  try {\n    const container = ContainerRegistry.instance().rootContainer();\n    container.db.getNodes((err, docs) => {\n      if (!err) {\n        res.json(JSON.stringify(docs));\n      } else {\n        res.status(500);\n      }\n    });\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\n//get disc space\nrouter.get('/host/info/disc', async function (req, res) {\n  try {\n    OsUtils.fsSize()\n      .then(obj => {\n        res.json(JSON.stringify(obj));\n      })\n      .catch(err => {\n        res.status(500).send(err);\n      });\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nmodule.exports = router;\n\n","module.exports = require(\"os\");","module.exports = require(\"systeminformation\");","/**\n * Add all new nodes classes here!!!\n */\nimport './boolean/and';\nimport './boolean/or';\nimport './boolean/xor';\nimport './boolean/not';\nimport './boolean/toggle';\nimport './boolean/one-shot';\nimport './boolean/min-on-off';\nimport './boolean/on-delay';\nimport './boolean/off-delay';\nimport './boolean/ticker';\nimport './compare/equal';\nimport './compare/greater-than';\nimport './compare/less-than';\nimport './compare/between';\nimport './compare/hysteresis';\nimport './compare/type-check';\n// import './connection/DispatchListener';\nimport './connection/local-transmitter-single';\nimport './connection/local-receiver-single';\nimport './connection/local-transmitter';\nimport './connection/local-receiver';\nimport './connection/hub';\nimport './container/folder';\nimport './container/folder-input';\nimport './container/folder-output';\nimport './conversion/bit-mask';\nimport './conversion/bit-split';\nimport './conversion/bool-to-int';\nimport './conversion/buffer-to-hex-string'\nimport './conversion/buffer-to-num';\nimport './conversion/data-conversion';\nimport './conversion/hex-string-to-buffer'\nimport './conversion/int-to-byte-four-array';\nimport './count/any-event-counter';\nimport './count/counter';\nimport './count/triggered-ramp';\nimport './count/interval-ramp';\nimport './count/waveform';\nimport './csv/csv-merge-rows';\nimport './csv/csv-merge-columns';\nimport './bsa/bsa-cumulocity-device';\nimport './bsa/bsa-cumulocity-point';\nimport './bsa/bsa-cumulocity-alarm';\nimport './bsa/cumulocity-operation';\nimport './custom-function/function';\nimport './custom-function/uuid';\nimport './dashboard/label';\nimport './dashboard/button';\nimport './dashboard/switch';\nimport './dashboard/progress';\nimport './dashboard/slider';\nimport './dashboard/text-box';\nimport './dashboard/log';\nimport './dashboard/chart';\nimport './debug/console';\nimport './debug/notes';\nimport './debug/watch';\nimport './error/link-error-check';\nimport './error/output-error-check';\nimport './filter/only-true';\nimport './filter/only-false';\nimport './filter/only-between';\nimport './filter/only-greater';\nimport './filter/only-lower';\nimport './filter/only-equal';\nimport './filter/prevent-null';\nimport './filter/prevent-equal';\nimport './filter/prevent-duplicates';\nimport './history/data-store';\nimport './history/influx-db';\nimport './history/influx-db-2';\nimport './history/point-persistence';\nimport './hvac/deadband';\nimport './hvac/thermostat';\nimport './hvac/lead-lag-staging';\nimport './hvac/lead-lag-switch';\nimport './hvac/pac-unit-control';\nimport './hvac/PID';\nimport './hvac/toggle-duration';\nimport './hvac/psychometrics';\nimport './hvac/energy-conversion';\nimport './hvac/power-conversion';\nimport './hvac/volume-conversion';\nimport './hvac/temperature-conversion';\nimport './hvac/atm-pressure-conversion';\nimport './hvac/pressure-conversion';\nimport './hvac/actuator-sizing';\nimport './hvac/k-factor';\nimport './hvac/dp-airflow';\nimport './json/array-builder';\nimport './json/array-builder-num';\nimport './json/array-combine';\nimport './json/json-builder';\nimport './json/json-enum-builder';\nimport './json/json-filter';\nimport './json/json-obj-filter';\nimport './json/json-filter-compare';\nimport './json/json-filter-multiple';\nimport './json/json-checker';\nimport './json/json-parse';\nimport './json/json-prevent-duplicates';\nimport './json/json-query';\nimport './latch/any-latch';\nimport './latch/bool-latch';\nimport './latch/num-latch';\nimport './latch/string-latch';\nimport './latch/set-reset';\nimport './math/add';\nimport './math/subtract';\nimport './math/multiply';\nimport './math/divide';\nimport './math/absolute';\nimport './math/modulus';\nimport './math/power';\nimport './math-advanced/acos';\nimport './math-advanced/asin';\nimport './math-advanced/atan';\nimport './math-advanced/cbrt';\nimport './math-advanced/cos';\nimport './math-advanced/exp';\nimport './math-advanced/log';\nimport './math-advanced/log10';\nimport './math-advanced/sin';\nimport './math-advanced/sqrt';\nimport './math-advanced/tan';\nimport './math-trigger/trigger-add';\nimport './math-trigger/trigger-subtract';\nimport './math-trigger/trigger-multiply';\nimport './math-trigger/trigger-divide';\nimport './math-trigger/trigger-modulus';\nimport './math-trigger/trigger-power';\nimport './miscellaneous/geo-hash';\nimport './miscellaneous/num-series-generator';\nimport './miscellaneous/append-to-strings';\nimport './nube/get-schedules';\nimport './num-transform/round';\nimport './num-transform/floor';\nimport './num-transform/ceil';\nimport './num-transform/limit';\nimport './num-transform/scale';\nimport './num-transform/linear-shaper';\nimport './num-transform/fade';\nimport './num-transform/rate-limit';\nimport './point/bool-constant';\nimport './point/num-constant';\nimport './point/string-constant';\nimport './point/json-constant';\nimport './point/bool-writable';\nimport './point/num-writable';\nimport './point/string-writable';\nimport './point/generic-point';\nimport './protocols/email/email';\nimport './protocols/http/http-client';\nimport './protocols/edge-28/edge-28-network';\nimport './protocols/edge-28/edge-28-input';\nimport './protocols/edge-28/edge-28-output';\nimport './protocols/edge-28/edge-28-lora-reset';\nimport './protocols/bacnet/bacnet-network';\nimport './protocols/bacnet/bacnet-device';\nimport './protocols/bacnet/bacnet-point';\nimport './protocols/bacnet-server/bacnet-server-api';\nimport './protocols/lora-raw/lora';\nimport './protocols/lora-raw/lora-two-way-in';\nimport './protocols/lora-raw/lora-two-way-out';\nimport './protocols/lora-raw-v2/lora-raw-points'\nimport './protocols/lora-raw-v2/lora-raw-sensor-legacy'\nimport './protocols/modbus/modbus-server';\nimport './protocols/mqtt/mqtt-client';\nimport './protocols/mqtt/mqtt-client-single';\nimport './protocols/mqtt/topic-parts';\nimport './protocols/mqtt/topic-builder';\nimport './protocols/serial-connector/serial-connector';\nimport './schedule/weekly-schedule';\nimport './schedule/schedule-merge';\nimport './schedule/schedule-checker';\nimport './statistics/min-max-avg';\nimport './statistics/avg';\nimport './statistics/min';\nimport './statistics/max';\nimport './statistics/sum';\nimport './statistics/median';\nimport './statistics/range';\nimport './statistics/rank';\nimport './statistics/stats-all';\nimport './streams/stream-average';\nimport './streams/stream-highest';\nimport './streams/stream-lowest';\nimport './streams/stream-sum';\nimport './streams/stream-merge';\nimport './streams/gate';\nimport './streams/stack';\nimport './streams/queue';\nimport './streams/stream-delay';\nimport './streams/stream-delay-meter';\nimport './streams/frequency-meter';\nimport './streams/flatline';\nimport './string/string-compare';\nimport './string/substring-cut';\nimport './string/string-join';\nimport './string/string-length';\nimport './string/string-index-of';\nimport './string/char-at-index';\nimport './string/string-split';\nimport './string/string-case';\nimport './string/char-to-ascii';\nimport './string/ascii-to-char';\nimport './string/string-buffer';\nimport './switch/bool-switch';\nimport './switch/num-switch';\nimport './switch/string-switch';\nimport './switch/bool-select';\nimport './switch/num-select';\nimport './switch/string-select';\nimport './switch/bool-output-select';\nimport './switch/num-output-select';\nimport './switch/string-output-select';\nimport './system/host-info';\nimport './system/platform';\nimport './system/beep';\nimport './system/execute-cmd';\nimport './system/flow-export';\nimport './system/ip/network-interfaces-bbb';\nimport './system/ip/network-interfaces';\nimport './system/wires-version';\nimport './time/time-conversion';\nimport './time/time-conversion-plus';\nimport './time/timezone-conversion';\nimport './time/clock';\nimport './time/date';\nimport './time/time-diff';\nimport './time/stopwatch';\nimport './time/cron-interval';\nimport './time/cron-weekly';\nimport './time/cron-expression';\nimport './time/timestamp-generator';\nimport './trigger/change-of-value';\nimport './trigger/random';\nimport './trigger/inject';\nimport './trigger/interval-inject';\nimport './trigger/iterator';\nimport './widget/schedule-afterhours-off';\nimport './widget/schedule-prestart-fixed';\nimport './unknown/unknown-export';\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass AndNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicSettingsExist = false;\n    this.dynamicInputsType = Type.BOOLEAN;\n    this.title = NODE_INFO.boolean.and.title;\n    this.description = NODE_INFO.boolean.and.description;\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('out not', Type.BOOLEAN);\n    this.setOutputData(0, false);\n    this.setOutputData(1, true);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n\n  onInputUpdated() {\n    const allInputs = this.getDefinedInputValues();\n    if (allInputs.length == 0) {\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, true, true);\n      return;\n    }\n    const areAllInputsTrue = allInputs.every(v => v === true);\n    this.setOutputData(0, areAllInputsTrue, true);\n    this.setOutputData(1, !areAllInputsTrue, true);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('boolean/and', AndNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass OrNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicSettingsExist = false;\n    this.dynamicInputsType = Type.BOOLEAN;\n    this.title = NODE_INFO.boolean.or.title;\n    this.description = NODE_INFO.boolean.or.description;\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('out not', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n\n\n  onInputUpdated() {\n    const allInputs = this.getDefinedInputValues();\n    if (allInputs.length == 0) {\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, true, true);\n      return;\n    }\n\n    const anyTrue = allInputs.some(v => v == true);\n    this.setOutputData(0, anyTrue, true);\n    this.setOutputData(1, !anyTrue, true);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('boolean/or', OrNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport Icons from '../../node-icons';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nlet logicMainColour = Icons.logicMainColour;\nlet logicAndIcon = Icons.logicAndIcon;\nlet logicOrIcon = Icons.logicOrIcon;\n\nclass XorNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.boolean.xor.title;\n    this.description = NODE_INFO.boolean.xor.description;\n\n    // this.headerColor = logicMainColour;\n    //this.iconImageUrl = logicAndIcon;\n\n    this.addInput('in 1', Type.BOOLEAN);\n    this.addInput('in 2', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('out not', Type.BOOLEAN);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    const in1 = this.getInputData(0);\n    const in2 = this.getInputData(1);\n    if ((in1 && !in2) || (!in1 && in2)) {\n      this.setOutputData(0, true, true);\n      this.setOutputData(1, false, true);\n    } else {\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, true, true);\n    }\n  }\n}\nContainer.registerNodeType('boolean/xor', XorNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport Icons from '../../node-icons';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nlet logicMainColour = Icons.logicMainColour;\nlet logicNotIcon = Icons.logicNotIcon;\n\nclass NotNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.boolean.not.title;\n    this.description = NODE_INFO.boolean.not.description;\n    // this.headerColor = logicMainColour;\n    // this.iconImageUrl = logicNotIcon;\n    this.addInput('input', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  \n\n\n  onInputUpdated() {\n    this.emitTransformedInput(x => !x);\n  }\n}\nContainer.registerNodeType('boolean/not', NotNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass ToggleNode extends Node {\n  state = false;\n  lastVal;\n  count = 0;\n  constructor() {\n    super();\n    this.title = NODE_INFO.boolean.toggle.title;\n    this.description = NODE_INFO.boolean.toggle.description;\n    this.addInput('input', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    //this.addOutput('toggle out', Type.BOOLEAN);\n    this.settings['reset-on-disc'] = NodeSetting.create({\n      description: 'Reset on disconnected or input is null',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['toggleOnAny'] = NodeSetting.create({\n      description: 'Toggle on any input change',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    const toggleOnAny = this.settings['toggleOnAny'].value\n    const inputUpdated = this.inputs[0].updated;\n\n    if(toggleOnAny){\n      if (inputUpdated) {\n        this.properties['count']++;\n        this.setOutputData(0, !this.outputs[0].data); // toggle\n      }\n      return\n    }\n    // sends a true/false on each input update\n    if (this.count === 0) {\n      //this.setOutputData(1, false);\n      this.count = 1;\n    } else if (this.count === 1) {\n      //this.setOutputData(1, true);\n      this.count = 0;\n    }\n\n    if (input == null || input == undefined) {\n      if (this.settings['reset-on-disc'].value) {\n        this.lastVal = false;\n        this.setOutputData(0, false);\n        this.state = false;\n      }\n    } else if (input == this.lastVal) return;\n    if (input == true) {\n      this.setOutputData(0, !this.state);\n      this.state = !this.state;\n    }\n    this.lastVal = input;\n  }\n}\nContainer.registerNodeType('boolean/toggle', ToggleNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass OneShotNode extends Node {\n  lastFireValue: boolean;\n  enabled: boolean;\n  lastResetValue: boolean;\n  timeoutFunc;\n  remainingFunc;\n  timeUnits;\n  remainingUpdateMillis;\n  remainingUpdateSize;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.boolean[\"one-shot\"].title;\n    this.description = NODE_INFO.boolean[\"one-shot\"].description;\n\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Interval (Max is 597 Hours)');\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('remaining', Type.NUMBER);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.MILLISECONDS, text: 'Milliseconds' },\n          { value: TIME_TYPE.SECONDS, text: 'Seconds' },\n          { value: TIME_TYPE.MINUTES, text: 'Minutes' },\n          { value: TIME_TYPE.HOURS, text: 'Hours' },\n        ],\n      },\n      value: TIME_TYPE.SECONDS,\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n\n    this.settings['retrigger'] = NodeSetting.create({\n      description: \"Retrigger While Output is 'true'?\",\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n\n  }\n\n  onCreated() {\n  }\n\n  onAdded() {\n    this.clearTimers();\n    this.setOutputData(0, false);\n    this.setOutputData(1, 0);\n    this.lastFireValue = false;\n    this.lastResetValue = false;\n    this.enabled = false;\n    this.onAfterSettingsChange();\n  }\n\n\n\n  onAfterSettingsChange() {\n    this.timeUnits = this.settings['time'].value;\n    this.inputs[2]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.outputs[1]['name'] = `[remaining] (${this.timeUnits})`;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let reset = this.getInputData(1);\n    if (reset == null) reset = false;\n    if (reset == true && reset != this.lastResetValue) {\n      this.clearTimers();\n      this.setOutputData(0, false);\n      this.setOutputData(1, 0);\n      this.enabled = false;\n    }\n    this.lastResetValue = reset;\n\n    let fire = this.getInputData(0);\n    if (fire == null) fire = false;\n    if (fire == true && fire != this.lastFireValue) {\n      const retrigger = this.settings['retrigger'].value;\n      if (retrigger || this.enabled === false) {\n        const delay = this.getInputData(2);\n        const delayMilli = TimeUtils.timeConvert(delay, this.timeUnits);\n        this.clearTimers();\n        this.setOutputData(0, true);\n        this.setOutputData(1, delay);\n        this.enabled = true;\n        this.timeoutFunc = setTimeout(() => {\n          this.enabled = false;\n          this.setOutputData(0, false);\n          this.setOutputData(1, 0);\n          clearInterval(this.remainingFunc);\n        }, delayMilli);\n        switch(this.timeUnits){\n          case TIME_TYPE.MILLISECONDS:\n            this.remainingUpdateMillis = 500;\n            this.remainingUpdateSize = 500;\n            break;\n          case TIME_TYPE.SECONDS:\n            this.remainingUpdateMillis = 1000;\n            this.remainingUpdateSize = 1;\n            break;\n          case TIME_TYPE.MINUTES:\n            this.remainingUpdateMillis = 6000;\n            this.remainingUpdateSize = 0.1;\n            break;\n          case TIME_TYPE.HOURS:\n            this.remainingUpdateMillis = 360000;\n            this.remainingUpdateSize = 0.1;\n            break;\n        }\n        this.remainingFunc = setInterval(() => {\n          const remaining = this.outputs[1].data - this.remainingUpdateSize;\n          this.setOutputData(1, remaining);\n        }, this.remainingUpdateMillis);\n      }\n    }\n    this.lastFireValue = fire;\n    this.setOutputData(0, this.outputs[0].data, true);\n    this.setOutputData(1, this.outputs[1].data, true);\n  }\n\n  private clearTimers() {\n    if (this.timeoutFunc) clearTimeout(this.timeoutFunc);\n    if (this.remainingFunc) clearInterval(this.remainingFunc);\n  }\n  \n}\nContainer.registerNodeType('boolean/one-shot', OneShotNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\n// TODO: Check logic\nclass MinOnOffNode extends Node {\n  lastValue: boolean;\n  timeOn: number;\n  timeOff: number;\n  minOnEnabled: boolean;\n  minOffEnabled: boolean;\n  minOnTime: number;\n  minOffTime: number;\n  lastResetValue: boolean;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.boolean[\"min-on-off\"].title;\n    this.description = NODE_INFO.boolean[\"min-on-off\"].description;\n    this.addInput('input', Type.BOOLEAN);\n    this.addInputWithSettings('minOn', Type.NUMBER, 1, 'Minimum On Time');\n    this.addInputWithSettings('minOff', Type.NUMBER, 1, 'Minimum Off Time');\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('minOn active', Type.BOOLEAN);\n    this.addOutput('minOff active', Type.BOOLEAN);\n    this.settings['timeMinOn'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.settings['timeMinOff'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [\n        { minOn: { weight: 2 }, timeMinOn: {} },\n        { minOff: { weight: 2 }, timeMinOff: {} },\n      ],\n    });\n\n    this.timeOn = null;\n    this.timeOff = null;\n    this.minOnEnabled = false;\n    this.minOffEnabled = false;\n    this.lastResetValue = false;\n  }\n\n  onCreated() {\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n    this.setOutputData(1, false, true);\n    this.setOutputData(2, false, true);\n    this.inputs[1]['name'] = `[minOn] (${this.settings['timeMinOn'].value})`;\n    this.inputs[2]['name'] = `[minOff] (${this.settings['timeMinOff'].value})`;\n    this.onInputUpdated();\n  }\n\n  onExecute() {\n    let elapsed = null;\n    if (this.minOnEnabled) {\n      elapsed = Date.now() - this.timeOn;\n      if (elapsed >= this.minOnTime) {\n        this.minOnEnabled = false;\n        this.onInputUpdated();\n        this.setOutputData(1, false, true);\n      }\n    }\n    if (this.minOffEnabled) {\n      elapsed = Date.now() - this.timeOff;\n      if (elapsed >= this.minOffTime) {\n        this.minOffEnabled = false;\n        this.onInputUpdated();\n        this.setOutputData(2, false, true);\n      }\n    }\n    this.setOutputData(1, this.outputs[1].data, true)\n    this.setOutputData(2, this.outputs[2].data, true)\n  }\n\n  onInputUpdated() {\n    let reset = this.getInputData(3);\n    if (reset == null) reset = false;\n    if (reset == true && reset != this.lastResetValue) {\n      this.setOutputData(0, false);\n      this.minOnEnabled = false;\n      this.minOffEnabled = false;\n      this.setOutputData(1, false, true);\n      this.setOutputData(2, false), true;\n    }\n    this.lastResetValue = reset;\n\n    let minOn = this.getInputData(1);\n    minOn = TimeUtils.timeConvert(minOn, this.settings['timeMinOn'].value);\n    this.minOnTime = minOn;\n\n    let minOff = this.getInputData(2);\n    minOff = TimeUtils.timeConvert(minOff, this.settings['timeMinOff'].value);\n    this.minOffTime = minOff;\n\n    let input = this.getInputData(0);\n    if (!Utils.hasInput(input)) input = false;\n    if (!this.minOnEnabled && !this.minOffEnabled) {\n      this.setOutputData(0, input);\n      if (input && input != this.lastValue) {\n        this.timeOn = Date.now();\n        this.minOnEnabled = true;\n        this.setOutputData(1, false, true);\n      } else if (!input && input != this.lastValue) {\n        this.timeOff = Date.now();\n        this.minOffEnabled = true;\n        this.setOutputData(2, false), true;\n      }\n      this.lastValue = input;\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[1]['name'] = `[minOn] (${this.settings['timeMinOn'].value})`;\n    this.inputs[2]['name'] = `[minOff] (${this.settings['timeMinOff'].value})`;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('boolean/min-on-off', MinOnOffNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass DelayOnNode extends Node {\n  lastInput:boolean;\n  lastReset:boolean;\n  timeoutFunc;\n  enabled = false;\n  remainingFunc;\n  timeUnits;\n  remainingUpdateMillis;\n  remainingUpdateSize;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.boolean[\"on-delay\"].title;\n    this.description = NODE_INFO.boolean[\"on-delay\"].description;\n\n    this.addInput('input', Type.BOOLEAN);\n    this.addInputWithSettings('delay', Type.NUMBER, 1, 'On Delay Duration (Max 597 Hours)');\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('onDelay active', Type.BOOLEAN);\n    this.addOutput('remaining', Type.NUMBER);\n\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.MILLISECONDS, text: 'Milliseconds' },\n          { value: TIME_TYPE.SECONDS, text: 'Seconds' },\n          { value: TIME_TYPE.MINUTES, text: 'Minutes' },\n          { value: TIME_TYPE.HOURS, text: 'Hours' },\n        ],\n      },\n      value: TIME_TYPE.SECONDS,\n    });\n    this.setSettingsConfig({\n      groups: [{ delay: { weight: 2 }, time: {} }],\n    });\n\n    \n  }\n\n  onCreated() {\n    this.setOutputData(0, false);\n    this.setOutputData(1, false);\n    this.setOutputData(2, 0);\n    this.lastInput = false;\n    this.lastReset = false;\n  }\n\n  onAdded() {\n \n    this.onAfterSettingsChange();\n  }\n\n\n\n  onAfterSettingsChange() {\n    this.timeUnits = this.settings['time'].value;\n    this.inputs[1]['name'] = `[delay] (${this.timeUnits})`;\n    this.outputs[2]['name'] = `[remaining] (${this.timeUnits})`;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const delay = this.getInputData(1);\n    const delayMilli = TimeUtils.timeConvert(delay, this.timeUnits);\n\n    let input = this.getInputData(0);\n    if (input !== true) input = false;\n\n    const reset = this.getInputData(2);\n    if (reset && this.inputs[2].updated && !this.lastReset && this.enabled) {\n      this.clearTimers();\n      this.setOutputData(0, input);\n      this.setOutputData(1, false);\n      this.setOutputData(2, 0);\n      this.enabled = false;\n    }\n    this.lastReset = reset;\n\n    if (input && this.inputs[0].updated && !this.lastInput) {\n      this.setOutputData(1, true);\n      this.setOutputData(2, delay);\n      this.enabled = true;\n      this.clearTimers();\n      this.timeoutFunc = setTimeout(() => {\n        this.enabled = false;\n        this.setOutputData(0, true);\n        this.setOutputData(1, false);\n        this.setOutputData(2, 0);\n        clearInterval(this.remainingFunc);\n      }, delayMilli);\n      switch(this.timeUnits){\n        case TIME_TYPE.MILLISECONDS:\n          this.remainingUpdateMillis = 500;\n          this.remainingUpdateSize = 500;\n          break;\n        case TIME_TYPE.SECONDS:\n          this.remainingUpdateMillis = 1000;\n          this.remainingUpdateSize = 1;\n          break;\n        case TIME_TYPE.MINUTES:\n          this.remainingUpdateMillis = 6000;\n          this.remainingUpdateSize = 0.1;\n          break;\n        case TIME_TYPE.HOURS:\n          this.remainingUpdateMillis = 360000;\n          this.remainingUpdateSize = 0.1;\n          break;\n      }\n      this.remainingFunc = setInterval(() => {\n        const remaining = this.outputs[2].data - this.remainingUpdateSize;\n        this.setOutputData(2, remaining);\n      }, this.remainingUpdateMillis);\n    }\n    this.lastInput = input;\n    if (!input) {\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, false, true);\n      this.setOutputData(2, 0, true);\n      if (this.inputs[0].updated && this.enabled) {\n        this.clearTimers();\n        this.enabled = false;\n      }\n    }\n  }\n\n  private clearTimers() {\n    if (this.timeoutFunc) clearTimeout(this.timeoutFunc);\n    if (this.remainingFunc) clearInterval(this.remainingFunc);\n  }\n\n}\nContainer.registerNodeType('boolean/on-delay', DelayOnNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass DelayOffNode extends Node {\n  lastInput:boolean;\n  lastReset:boolean;\n  timeoutFunc;\n  enabled = false;\n  remainingFunc;\n  timeUnits;\n  remainingUpdateMillis;\n  remainingUpdateSize;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.boolean[\"off-delay\"].title;\n    this.description = NODE_INFO.boolean[\"off-delay\"].description;\n    this.addInput('input', Type.BOOLEAN);\n    this.addInputWithSettings('delay', Type.NUMBER, 1, 'Off Delay Duration (Max 597 Hours)');\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('offDelay active', Type.BOOLEAN);\n    this.addOutput('remaining', Type.NUMBER);\n\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.MILLISECONDS, text: 'Milliseconds' },\n          { value: TIME_TYPE.SECONDS, text: 'Seconds' },\n          { value: TIME_TYPE.MINUTES, text: 'Minutes' },\n          { value: TIME_TYPE.HOURS, text: 'Hours' },\n        ],\n      },\n      value: TIME_TYPE.SECONDS,\n    });\n    this.setSettingsConfig({\n      groups: [{ delay: { weight: 2 }, time: {} }],\n    });\n    \n  }\n\n  onCreated() {\n  }\n\n  onAdded() {\n    this.clearTimers();\n    this.setOutputData(0, false);\n    this.setOutputData(1, false);\n    this.setOutputData(2, 0);\n    this.lastInput = false;\n    this.lastReset = false;\n    this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.timeUnits = this.settings['time'].value;\n    this.inputs[1]['name'] = `[delay] (${this.timeUnits})`;\n    this.outputs[2]['name'] = `[remaining] (${this.timeUnits})`;\n    this.onInputUpdated();\n  }\n\n\n  onInputUpdated() {\n    const delay = this.getInputData(1);\n    const delayMilli = TimeUtils.timeConvert(delay, this.timeUnits);\n\n    let input = this.getInputData(0);\n    if (input !== true) input = false;\n\n    const reset = this.getInputData(2);\n    if (reset && this.inputs[2].updated && !this.lastReset && this.enabled) {\n      this.clearTimers();\n      this.setOutputData(0, input);\n      this.setOutputData(1, false);\n      this.setOutputData(2, 0);\n      this.enabled = false;\n    }\n    this.lastReset = reset;\n\n    if (!input && this.inputs[0].updated && this.lastInput) {\n      this.setOutputData(1, true);\n      this.setOutputData(2, delay);\n      this.clearTimers();\n      this.enabled = true;\n      this.timeoutFunc = setTimeout(() => {\n        this.enabled = false;\n        this.setOutputData(0, false);\n        this.setOutputData(1, false);\n        this.setOutputData(2, 0);\n        clearInterval(this.remainingFunc);\n      }, delayMilli);\n      switch(this.timeUnits){\n        case TIME_TYPE.MILLISECONDS:\n          this.remainingUpdateMillis = 500;\n          this.remainingUpdateSize = 500;\n          break;\n        case TIME_TYPE.SECONDS:\n          this.remainingUpdateMillis = 1000;\n          this.remainingUpdateSize = 1;\n          break;\n        case TIME_TYPE.MINUTES:\n          this.remainingUpdateMillis = 6000;\n          this.remainingUpdateSize = 0.1;\n          break;\n        case TIME_TYPE.HOURS:\n          this.remainingUpdateMillis = 360000;\n          this.remainingUpdateSize = 0.1;\n          break;\n      }\n      this.remainingFunc = setInterval(() => {\n        const remaining = this.outputs[2].data - this.remainingUpdateSize;\n        this.setOutputData(2, remaining);\n      }, this.remainingUpdateMillis);\n    }\n    this.lastInput = input;\n    if (input) {\n      this.setOutputData(0, true, true);\n      this.setOutputData(1, false, true);\n      this.setOutputData(2, 0, true);\n      if (this.inputs[0].updated && this.enabled) {\n        this.clearTimers();\n        this.enabled = false;\n      }\n    }\n  }\n\n  private clearTimers() {\n    if (this.timeoutFunc) clearTimeout(this.timeoutFunc);\n    if (this.remainingFunc) clearInterval(this.remainingFunc);\n  }\n}\nContainer.registerNodeType('boolean/off-delay', DelayOffNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass TickerNode extends Node {\n  lastInterval = 1000;\n  state: boolean = false;\n  runState: boolean = true;\n  timeoutFunc;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.boolean.ticker.title;\n    this.description = NODE_INFO.boolean.ticker.description;\n\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Interval');\n    this.addOutput('output', Type.BOOLEAN);\n\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n\n    this.settings['false'] = NodeSetting.create({\n      description: 'Generate False',\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n    //this.title = `Ticker (${this.settings['time'].value})`;\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n    clearInterval(this.timeoutFunc);\n    this.setOutputData(0, false);\n    let enable = this.getInputData(0);\n    if (!enable) {\n      this.setOutputData(0, false);\n      this.runState = false;\n      return;\n    }\n    let interval = this.getInputData(1);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    this.timeoutFunc = setInterval(() => {\n      this.state = !this.state;\n      if (!this.state && this.settings['false'].value) {\n        this.setOutputData(0, false);\n        return;\n      }\n      if (this.state) this.setOutputData(0, true);\n    }, interval / 2);\n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    let enable = this.getInputData(0);\n\n    if (!enable && this.runState) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, false, true);\n      this.runState = false;\n      this.state = false;\n      return;\n    } else if (!enable && !this.runState) {\n      this.setOutputData(0, false, true);\n      this.runState = false;\n      this.state = false;\n      return;\n    } else if (enable) {\n      let interval = this.getInputData(1);\n      interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n\n      if (this.runState) {\n        if (interval != this.lastInterval) {\n          this.lastInterval = interval;\n          clearInterval(this.timeoutFunc);\n          this.timeoutFunc = setInterval(() => {\n            this.state = !this.state;\n            if (!this.state && this.settings['false'].value) {\n              this.setOutputData(0, false);\n              return;\n            }\n            if (this.state) this.setOutputData(0, true);\n          }, interval / 2);\n        }\n        return;\n      } else if (!this.runState) {\n        this.runState = true;\n        this.state = true;\n        this.setOutputData(0, true);\n        this.timeoutFunc = setInterval(() => {\n          this.state = !this.state;\n          if (!this.state && this.settings['false'].value) {\n            this.setOutputData(0, false);\n            return;\n          }\n          if (this.state) this.setOutputData(0, true);\n        }, interval / 2);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    //this.title = `Ticker (${this.settings['time'].value})`;\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('boolean/ticker', TickerNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass EqualNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.compare.equal.title;\n    this.description = NODE_INFO.compare.equal.description;\n\n    this.addInput('in 1', Type.ANY);\n    this.addInputWithSettings('in 2', Type.ANY, null, 'in 2');\n    this.addOutput('out equal', Type.BOOLEAN);\n    this.addOutput('out not equal', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n    this.setOutputData(1, true);\n    this.onInputUpdated();\n  }\n\n\n  onInputUpdated() {\n    let a = this.getInputData(0);\n    if (!Utils.hasInput(a)) {\n      this.setOutputData(0, false);\n      this.setOutputData(1, true);\n      return;\n    }\n    a = (a || '').toString(); // making string null i.e `''` and other `null` same\n    const b = (this.getInputData(1) || '').toString();\n    if (a === b) {\n      this.setOutputData(0, true);\n      this.setOutputData(1, false);\n    } else {\n      this.setOutputData(0, false);\n      this.setOutputData(1, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('compare/equal', EqualNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass GreaterNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.compare[\"greater-than\"].title;\n    this.description = NODE_INFO.compare[\"greater-than\"].description;\n\n    this.addInput('in 1', Type.NUMBER);\n    this.addInputWithSettings('in 2', Type.NUMBER, 0, 'In 2 Constant', false);\n    this.addOutput('out >', Type.BOOLEAN);\n    this.addOutput('out >=', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n    this.setOutputData(1, false);\n    this.onInputUpdated();\n  }\n  \n\n  onInputUpdated() {\n    let a = this.getInputData(0);\n    let b = this.getInputData(1);\n\n    if (a != null && b != null) {\n      this.setOutputData(0, a > b);\n      this.setOutputData(1, a >= b);\n    } else {\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, false, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('compare/greater-than', GreaterNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass LessThanNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.compare[\"less-than\"].title;\n    this.description = NODE_INFO.compare[\"less-than\"].description;\n    \n    this.addInput('in 1', Type.NUMBER);\n    this.addInputWithSettings('in 2', Type.NUMBER, 0, 'In 2 Constant', false);\n    this.addOutput('out <', Type.BOOLEAN);\n    this.addOutput('out <=', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n    this.setOutputData(1, false);\n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    let a = this.getInputData(0);\n    let b = this.getInputData(1);\n\n    if (a != null && b != null) {\n      this.setOutputData(0, a < b);\n      this.setOutputData(1, a <= b);\n      return;\n    } else {\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, false, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('compare/less-than', LessThanNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass BetweenNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.compare.between.title;\n    this.description = NODE_INFO.compare.between.description;\n\n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('from', Type.NUMBER, 0, 'From Value', false);\n    this.addInputWithSettings('to', Type.NUMBER, 1, 'To Value', false);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('out not', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n    this.setOutputData(1, true);\n    this.onInputUpdated();\n  }\n\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    let from = this.getInputData(1);\n    let to = this.getInputData(2);\n\n    if (val != null && from != null && to != null) {\n      //if (val >= from && val <= to) {\n      if (val >= Math.min(from, to) && val <= Math.max(from, to)) {\n        this.setOutputData(0, true, true);\n        this.setOutputData(1, false, true);\n      } else {\n        this.setOutputData(0, false, true);\n        this.setOutputData(1, true, true);\n      }\n    } else {\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, true, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('compare/between', BetweenNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass HysteresisNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.compare.hysteresis.title;\n    this.description = NODE_INFO.compare.hysteresis.description;\n\n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('risingEdge', Type.NUMBER, 20, 'Rising Edge', false);\n    this.addInputWithSettings('fallingEdge', Type.NUMBER, 10, 'Falling Edge', false);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('out not', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n    this.setOutputData(1, true);\n  }\n\n//\n\n  onInputUpdated() {\n    let inMsg = this.getInputData(0);\n    let risingEdge = this.getInputData(1);\n    let fallingEdge = this.getInputData(2);\n\n    if (risingEdge != null && fallingEdge != null) {\n      if (risingEdge > fallingEdge) {\n        if (inMsg <= fallingEdge) {\n          this.setOutputData(0, false);\n          this.setOutputData(1, true);\n        }\n        if (inMsg >= risingEdge) {\n          this.setOutputData(0, true);\n          this.setOutputData(1, false);\n        }\n      } else if (risingEdge < fallingEdge) {\n        if (inMsg >= fallingEdge) {\n          this.setOutputData(0, false);\n          this.setOutputData(1, true);\n        }\n        if (inMsg <= risingEdge) {\n          this.setOutputData(0, true);\n          this.setOutputData(1, false);\n        }\n      }\n    } else {\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, true, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('compare/hysteresis', HysteresisNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass TypeCheckNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.compare[\"type-check\"].title;\n    this.description = NODE_INFO.compare[\"type-check\"].description;\n\n    this.addInput('input', Type.ANY);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('isType', Type.STRING);\n\n    this.settings['type'] = NodeSetting.create({\n      description: 'Type to check',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: Type.STRING, text: Type.STRING },\n          { value: Type.NUMBER, text: Type.NUMBER },\n          { value: Type.BOOLEAN, text: Type.BOOLEAN },\n          { value: Type.JSON, text: Type.JSON },\n        ],\n      },\n      value: Type.STRING,\n    });\n  }\n\n  onAdded() {\n \n    this.updateTitle();\n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    let data = this.getInputData(0);\n    if (data === undefined) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n    }\n    const type = this.settings['type'].value;\n    const dataType = typeof data;\n    this.setOutputData(1, dataType);\n    switch (type) {\n      case Type.STRING:\n        this.setOutputData(0, typeof data === Type.STRING, true);\n        break;\n      case Type.NUMBER:\n        this.setOutputData(0, typeof data === Type.NUMBER, true);\n        break;\n      case Type.BOOLEAN:\n        this.setOutputData(0, typeof data === Type.BOOLEAN, true);\n        break;\n      case Type.JSON:\n        if (typeof data === 'string') {\n          try {\n            JSON.parse(data);\n            this.setOutputData(0, true);\n          } catch (e) {\n            this.setOutputData(0, false);\n          }\n        } else if (typeof data === 'object') {\n          try {\n            JSON.parse(JSON.stringify(data));\n            this.setOutputData(0, true);\n          } catch (e) {\n            this.setOutputData(0, false);\n          }\n        }\n        this.setOutputData(0, data === null);\n        break;\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.updateTitle();\n    this.onInputUpdated();\n  }\n\n  updateTitle() {\n    const type = this.settings['type'].value;\n    switch (type) {\n      case Type.STRING:\n        this.title = 'Type Check (string)';\n        break;\n      case Type.NUMBER:\n        this.title = 'Type Check (number)';\n        break;\n      case Type.BOOLEAN:\n        this.title = 'Type Check (boolean)';\n        break;\n      case Type.JSON:\n        this.title = 'Type Check (json)';\n        break;\n    }\n  }\n}\n\nContainer.registerNodeType('compare/type-check', TypeCheckNode);\n","import { Container, ContainerRegistry } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nexport class ConnectionLocalTransmitterNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.connection[\"link-transmitter-single\"].title;\n    this.description = NODE_INFO.connection[\"link-transmitter-single\"].description;\n    this.iconImageUrl = NODE_INFO.connection[\"link-transmitter-single\"].iconImageUrl;\n\n    this.addInput('input', Type.ANY);\n    this.addInputWithSettings('topic', Type.STRING, '1', 'Topic Name', false);\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.settings['ifNew'] = NodeSetting.create({\n      description: 'Only transmit on COV',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  init() {\n    if (!this.properties['topic']) {\n      // we are persisting topic input just because, we don't have getInputData(1) on frontend to update title\n      this.properties['topic'] = null;\n    }\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange();\n    this.updateTitle();\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return;\n\n    this.properties['topic'] = this.getInputData(1);\n    this.persistProperties(false, true);\n\n    const receivers = this.getReceivers();\n    if (this.inputs[1].updated) {\n      this.updateTransmitterTopics();\n    }\n    if (!this.isEnable()) return;\n    const val = this.getInputData(0);\n    const topic = this.getInputData(1);\n    const ifNew = this.settings['ifNew'].value\n    receivers.forEach(receiver => {\n      if (receiver.properties['topic'] === topic) {\n        const blockNull = receiver.settings['blockNull'].value;\n        if (receiver.getInputData(0) === true && ((blockNull && val != null) || !blockNull)) {\n          receiver.properties['val'] = val;\n          receiver.persistProperties(false, true);\n          receiver.setOutputData(0, receiver.properties['val'], ifNew);\n        }\n      }\n    });\n    this.updateTitle();\n  }\n\n  onAfterSettingsChange() {\n    this.updateTransmitterTopics();\n    this.onInputUpdated();\n  }\n\n  onRemoved() {\n    this.updateTransmitterTopics();\n  }\n\n  updateTransmitterTopics() {\n    if (this.side !== Side.server) return;\n    setTimeout(() => {\n      const receivers = this.getReceivers();\n      receivers.forEach(receiver => {\n        receiver['triggerTransmitterTopicUpdate']();\n      });\n    }, 100); // waiting for this node deletion and hence, receiver will not discover this node\n  }\n\n  getReceivers(): Array<Node> {\n    return ContainerRegistry.instance().rootContainer().getNodesByType('connection/link-receiver-single', true);\n  }\n\n  isEnable() {\n    return this.getInputData(2);\n  }\n\n  updateTitle() {\n    this.title = `Link Transmitter Single [${this.properties['topic'] || this.getInputData(1)}]`;\n    this.broadcastTitleToClients();\n  }\n}\n\nContainer.registerNodeType('connection/link-transmitter-single', ConnectionLocalTransmitterNode);\n","import { isNull } from '../../../utils/helper';\nimport { Container, ContainerRegistry } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nexport class ConnectionLocalReceiverNode extends Node {\n  topicList: any = [];\n\n  inputEnable = 0;\n  inputNumTopic = 1;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.connection[\"link-receiver-single\"].title;\n    this.description = NODE_INFO.connection[\"link-receiver-single\"].description;\n    this.iconImageUrl = NODE_INFO.connection[\"link-receiver-single\"].iconImageUrl;\n    \n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.settings['manualTopicOption'] = NodeSetting.create({\n      description: 'Set topic manually',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.addInputWithSettings('topic', Type.STRING, '1', 'Set topic', false);\n    this.addOutput('output', Type.ANY);\n    this.addOutput('topic', Type.STRING);\n    this.properties['topic'] = \"\";\n    this.settings['topicDropdown'] = NodeSetting.create({\n      description: 'Select Topic',\n      config: { items: [] },\n      value: '',\n      type: SettingType.DROPDOWN,\n    });\n    this.settings['blockNull'] = NodeSetting.create({\n      description: 'Block Null',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.setSettingsConfig({\n      conditions: {\n        topicDropdown: setting => {\n          return setting['manualTopicOption'].value === false;\n        }\n      },\n    });\n  }\n\n  init() {\n    if (!this.properties['val']) {\n      this.properties['val'] = null;\n    }\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange();\n    this.setOutputData(0, this.properties['val']);\n  }\n\n  onCreated() {\n    if (isNull(this.properties['topic'])) {\n      this.onAfterSettingsChange();\n    }\n  }\n\n  async onAfterSettingsChange() {\n    await this.setTopic();\n    this.updateTitle();\n    if (this.side !== Side.server) return;\n    this.transmitterTopic();\n    this.updateChannel();\n\n  }\n\n  pushSettings() {\n    const unitCategory = this.topicList.map((point: any) => {\n      return { value: point, text: point };\n    });\n    this.settings['topicDropdown'].config = {\n      items: unitCategory,\n    };\n    this.persistProperties(true);\n    this.updateTitle();\n    this.updateChannel();\n    this.broadcastSettingsToClients(false);\n    this.broadcastTitleToClients(false);\n    this.broadcastOutputsToClients(false);\n  }\n\n  transmitterTopic() {\n    const transmitters = ContainerRegistry.instance().rootContainer().getNodesByType('connection/link-transmitter-single', true);\n    this.topicList = [];\n    transmitters.forEach(transmitter => {\n      this.topicList.push(transmitter.getInputData(1));\n      if (this.properties['topic'] === transmitter.getInputData(1)) {\n        this.setOutputData(0, transmitter.getInputData(0));\n      }\n    });\n    this.pushSettings();\n  }\n\n  updateTitle() {\n    this.title = 'Link Receiver Single [' + this.properties['topic'] + ']';\n  }\n\n  updateChannel() {\n    this.setOutputData(1, this.properties['topic']);\n  }\n\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return;\n    this.onAfterSettingsChange()\n  }\n\n  async setTopic() {\n    const manualTopicOption = this.settings['manualTopicOption'].value\n    if (manualTopicOption) {\n      this.properties['topic'] = this.getInputData(this.inputNumTopic)\n    } else if (!manualTopicOption) {\n      this.properties['topic'] = this.settings['topicDropdown'].value\n    }\n  }\n\n  // @Link: Triggers from transmitter on addition and on remove\n  triggerTransmitterTopicUpdate() {\n    if (this.side !== Side.server) return;\n    this.transmitterTopic();\n  }\n}\nContainer.registerNodeType('connection/link-receiver-single', ConnectionLocalReceiverNode);\n","import { Container, ContainerRegistry } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nexport class ConnectionLocalTransmitterNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.connection[\"link-transmitter\"].title;\n    this.description = NODE_INFO.connection[\"link-transmitter\"].description;\n\n    this.settings['channel'] = NodeSetting.create({\n      description: 'Channel Number',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['inputsCount'] = NodeSetting.create({\n      description: 'Inputs Count',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n  }\n\n  init() {\n    this.properties['inputsCount'] = 0;\n    this.changeTopicsCount(this.settings['inputsCount'].value);\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    for (let i in this.inputs) {\n      let val = this.inputs[i].data;\n      if (val == undefined) val = null;\n      let receivers = ContainerRegistry.instance().rootContainer().getNodesByType('connection/link-receiver', true);\n      receivers.forEach(receiver => {\n        if (receiver.settings['channel'].value == this.settings['channel'].value) {\n          if (receiver.outputs.hasOwnProperty(i)) {\n            receiver.setOutputData(+i, val, true);\n            if (this.inputs[i].name !== '') receiver.outputs[i].name = this.inputs[i].name;\n          }\n        }\n      });\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.updateTitle();\n    let inputCount = this.settings['inputsCount'].value;\n    inputCount = Utils.clamp(inputCount, 1, 100);\n    if (inputCount !== this.properties['inputsCount']) this.changeTopicsCount(inputCount);\n    this.renameInputs();\n    this.persistProperties(true, true, true);\n    this.onInputUpdated();\n  }\n\n  changeTopicsCount(target_count) {\n    let diff = target_count - this.properties['inputsCount'];\n    if (diff == 0) return;\n\n    //add inputs, outputs\n    this.changeInputsCount(target_count, Type.ANY);\n\n    //change settings for topics\n    if (diff > 0) {\n      for (let i = this.properties['inputsCount'] + 1; i <= target_count; i++) {\n        this.settings['in' + i] = NodeSetting.create({\n          description: 'Input ' + i,\n          value: '',\n          type: SettingType.STRING,\n        });\n      }\n    } else if (diff < 0) {\n      for (let i = this.properties['inputsCount']; i > target_count; i--) {\n        delete this.settings['in' + i];\n      }\n    }\n    this.properties['inputsCount'] = target_count;\n  }\n\n  renameInputs() {\n    for (let i = 0; i <= this.properties['inputsCount'] - 1; i++) {\n      let topic = this.settings['in' + (i + 1)]?.value;\n      if (topic?.length > 20) topic = '...' + topic.substr(topic.length - 20, 20);\n      this.inputs[String(i)].name = '' + (i + 1) + ' | ' + topic;\n    }\n\n    if (this.side == Side.editor) {\n      for (let i = 0; i <= this.properties['inputsCount'] - 1; i++) {\n        this.inputs[String(i)].label = this.inputs[String(i)].name;\n      }\n      this.setDirtyCanvas(true, true);\n    }\n  }\n\n  updateTitle() {\n    this.title = 'Link Transmitter [' + this.settings['channel'].value + ']';\n  }\n}\nContainer.registerNodeType('connection/link-transmitter', ConnectionLocalTransmitterNode);\n","import { Container, ContainerRegistry } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType } from '../../node-io';\n\nexport class ConnectionLocalReceiverNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicOutputsExist = true;\n    this.dynamicInputsExist = false;\n    this.dynamicSettingsExist = false;\n    this.dynamicDefaultOutputs = 1;\n    this.dynamicMinOutputs = 1;\n    this.title = NODE_INFO.connection[\"link-receiver\"].title;\n    this.description = NODE_INFO.connection[\"link-receiver\"].description;\n    this.settings['channel'] = NodeSetting.create({\n      description: 'Channel Number',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n  }\n\n  onCreated() {\n    this.properties['channel'] = 1;\n  }\n\n  onAdded() {\n    this.updateTitle();\n    this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.updateTitle();\n    if (this.properties['channel'] !== this.settings['channel'].value) this.resetOutputs();\n    this.triggerTransmitterNodeUpdate();\n  }\n\n  triggerTransmitterNodeUpdate() {\n    let transmitters = ContainerRegistry.instance().rootContainer().getNodesByType('connection/link-transmitter', true);\n    transmitters.forEach(transmitter => {\n      if (transmitter.settings['channel'].value == this.settings['channel'].value) {\n        transmitter['onInputUpdated']();\n      }\n    });\n  }\n\n  resetOutputs() {\n    for (let i in this.outputs) {\n      this.setOutputData(+i, null);\n    }\n  }\n\n  updateTitle() {\n    this.title = 'Link Receiver [' + this.settings['channel'].value + ']';\n  }\n}\nContainer.registerNodeType('connection/link-receiver', ConnectionLocalReceiverNode);\n","\n// THIS NODE IS A COPY OF THE STREAM-MERGE NODE.  \n// IT SHOULD BE REMOVED ONCE NODES ARE DUPLICATED TO MULTIPLE CATEGORIES\n\nimport { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\n\nclass HubNode extends FlexibleNode {\n  val: number;\n  lastReset: boolean;\n\n  constructor() {\n    super();\n    this.dynamicSettingsExist = false;\n    this.dynamicInputsType = Type.ANY;\n\n    this.title = NODE_INFO.connection.hub.title;\n    this.description = NODE_INFO.connection.hub.description;\n\n    this.addOutput('output', Type.ANY);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n    this.size = this.computeSize();\n  }\n\n  onInputUpdated() {\n    const inputs = this.getInputsCount();\n    for (let i = this.dynamicInputStartPosition; i < inputs; i++) {\n      let inputValue = this.getInputData(i);\n      if (Utils.hasInput(inputValue)) {\n        if (this.inputs[i].updated) {\n          this.setOutputData(0, this.inputs[i].data);\n          return;\n        }\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('connection/hub', HubNode);\n","import { isNull } from '../../../utils/helper';\nimport { Node } from '../../node';\nimport { createNodeDbHelper } from '../../node-db-helper';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeIO, Type } from '../../node-io';\nimport { createLegacyLinkHandler } from '../../node-link';\nimport { NodeTypeRegistry } from '../../node-type-registry';\nimport { AbstractFolderIONode } from './abstract-folder-io';\n\nclass ContainerInputNode extends AbstractFolderIONode {\n  constructor() {\n    super(NODE_INFO.container[\"folder-input\"].title, NODE_INFO.container[\"folder-input\"].description);\n    this.addOutput('input', null);\n  }\n\n  onAdded() {\n    super.onAdded();\n    if (!this.isUnderContainer() || this.hasItself('inputs')) return;\n    const containerNode = this.container.nodeItself();\n    const id = containerNode.addInput(this.name, Type.ANY, undefined, undefined, { subNodeId: this.id });\n    this.name = containerNode.inputs[id].name;\n    createLegacyLinkHandler(containerNode).recomputeInputLinks(containerNode);\n  }\n\n  onRemoved() {\n    if (!this.isUnderContainer() || !this.hasItself('inputs')) return;\n    let containerNode = this.container.nodeItself();\n    let [inputId, _] = this.findParentIOById('inputs');\n    containerNode.removeInput(+inputId);\n    createLegacyLinkHandler(containerNode).recomputeInputLinks(containerNode);\n    createNodeDbHelper().update(containerNode, ['size']);\n  }\n\n  onAfterSettingsChange() {\n    if (!this.isUnderContainer()) return;\n    const containerNode = this.container.nodeItself();\n    let [inputId, _] = this.findParentIOById('inputs');\n    if (isNull(inputId)) {\n      return;\n    }\n    containerNode.inputs[inputId].name = this.name;\n    createNodeDbHelper().update(containerNode, ['inputs']);\n  }\n\n  onExecute() {\n    if (!this.isUnderContainer()) return;\n    let [_, i] = this.findParentIOById('inputs');\n    let input = <NodeIO>i;\n    if (input?.updated) this.setOutputData(0, input.data);\n  }\n\n  protected correctParentIO(containerNode: Node, slot: number) {\n    let input = containerNode.inputs[slot];\n    if (isNull(input)) {\n      return;\n    }\n    input.subNodeId = this.id;\n    createNodeDbHelper().update(containerNode, ['inputs']);\n  }\n\n}\n\nexport const FOLDER_INPUT = 'container/folder-input';\nNodeTypeRegistry.registerNodeType(FOLDER_INPUT, ContainerInputNode, null, true, false, true);\n","import { isNull } from '../../../utils/helper';\nimport { Node } from '../../node';\nimport { createNodeDbHelper } from '../../node-db-helper';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\nimport { createLegacyLinkHandler } from '../../node-link';\nimport { NodeTypeRegistry } from '../../node-type-registry';\nimport { AbstractFolderIONode } from './abstract-folder-io';\n\nclass ContainerOutputNode extends AbstractFolderIONode {\n\n  constructor() {\n    super(NODE_INFO.container[\"folder-output\"].title, NODE_INFO.container[\"folder-output\"].description);\n    this.addInput('output', null);\n  }\n\n  onAdded() {\n    super.onAdded();\n    if (!this.isUnderContainer() || this.hasItself('outputs')) return;\n    const containerNode = this.container.nodeItself();\n    const id = containerNode.addOutput(this.name, Type.ANY, undefined, { subNodeId: this.id });\n    this.name = containerNode.outputs[id].name;\n    createLegacyLinkHandler(containerNode).recomputeOutputLinks(containerNode);\n  }\n\n  onRemoved() {\n    if (!this.isUnderContainer() || !this.hasItself('outputs')) return;\n    let containerNode = this.container.nodeItself();\n    let [outputId, _] = this.findParentIOById('outputs');\n    containerNode.removeOutput(+outputId);\n    createLegacyLinkHandler(containerNode).recomputeOutputLinks(containerNode);\n    createNodeDbHelper().update(containerNode, ['size']);\n  }\n\n  onAfterSettingsChange() {\n    if (!this.isUnderContainer()) return;\n    const containerNode = this.container.nodeItself();\n    let [outputId, _] = this.findParentIOById('outputs');\n    if (isNull(outputId)) {\n      return;\n    }\n    containerNode.outputs[outputId].name = this.name;\n    createNodeDbHelper().update(containerNode, ['outputs']);\n  }\n\n  onInputUpdated() {\n    if (!this.isUnderContainer()) return;\n    let [outputId, _] = this.findParentIOById('outputs');\n    if (isNull(outputId)) {\n      return;\n    }\n    this.isRecentlyActive = true;\n    this.container.nodeItself().setOutputData(+outputId, this.getInputData(0));\n  }\n\n  protected correctParentIO(containerNode: Node, slot: number) {\n    let output = containerNode.outputs[slot];\n    if (isNull(output)) {\n      return;\n    }\n    output.subNodeId = this.id;\n    createNodeDbHelper().update(containerNode, ['outputs']);\n  }\n\n}\n\nexport const FOLDER_OUTPUT = 'container/folder-output';\nNodeTypeRegistry.registerNodeType(FOLDER_OUTPUT, ContainerOutputNode, null, true, false, true);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass BitMaskSingle extends Node {\n  constructor() {\n    super();\n  \n    this.title = NODE_INFO.conversion[\"bit-mask-single\"].title;\n    this.description = NODE_INFO.conversion[\"bit-mask-single\"].description;\n\n    this.settings['bit'] = NodeSetting.create({\n      description: 'bit index (0-7)',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n\n    this.settings['byte'] = NodeSetting.create({\n      description: 'Byte to read if Array',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n\n    this.addInput('input', Type.ANY);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    if (input === undefined || input === null) {\n      return;\n    }\n\n    const BIT = this.settings['bit'].value;\n    const BYTE = this.settings['byte'].value;\n\n    if (typeof input === 'object') {\n      if (!input || !input.length || input.length < BYTE + 1) {\n        return;\n      }\n      input = input[BYTE];\n    }\n\n    this.setOutputData(0, (input >> BIT) & 0x01);\n  }\n\n  onAfterSettingsChange() {\n    this.settings['bit'].value = Utils.clamp(this.settings['bit'].value, 0, 7);\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('conversion/bit-mask-single', BitMaskSingle);\n\nclass BitMaskMultiple extends Node {\n  mask: number = 0;\n\n  constructor() {\n    super();\n    this.title = 'Bit Mask Multiple';\n    this.description = 'A node to mask certain bits of a byte';\n\n    this.settings['bitStart'] = NodeSetting.create({\n      description: 'Lowest bit to start (0-7)',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n\n    this.settings['maskLen'] = NodeSetting.create({\n      description: 'Mask length (1-8)',\n      type: SettingType.NUMBER,\n      value: 1,\n    });\n\n    this.settings['byte'] = NodeSetting.create({\n      description: 'Byte to read if Array',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n\n    this.addInput('input', Type.ANY);\n    this.addOutput('output', Type.NUMBER);\n    this.addOutput('error', Type.STRING);\n  }\n\n  init() {\n    this.updateMask();\n  }\n\n  onAdded() {\n    this.updateMask();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    if (input === undefined || input === null) {\n      return;\n    }\n\n    const BIT_START = this.settings['bitStart'].value;\n    const BYTE = this.settings['byte'].value;\n\n    if (typeof input === 'object') {\n      if (!input || !input.length || input.length < BYTE + 1) {\n        return;\n      }\n      input = input[BYTE];\n    }\n\n    this.setOutputData(0, (input & this.mask) >> BIT_START);\n  }\n\n  onAfterSettingsChange() {\n    this.settings['bitStart'].value = Utils.clamp(this.settings['bitStart'].value, 0, 7);\n    this.settings['maskLen'].value = Utils.clamp(\n      this.settings['maskLen'].value,\n      1,\n      8 - this.settings['bitStart'].value,\n    );\n    this.updateMask();\n    this.onInputUpdated();\n  }\n\n  private updateMask() {\n    this.mask = 0;\n    for (let i = 0; i < this.settings['maskLen'].value; i++) {\n      this.mask |= 1 << i;\n    }\n    this.mask <<= this.settings['bitStart'].value;\n  }\n}\nContainer.registerNodeType('conversion/bit-mask-multiple', BitMaskMultiple);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass IntToBits extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.conversion[\"int-to-bits\"].title;\n    this.description = NODE_INFO.conversion[\"int-to-bits\"].description;\n    this.settings['start'] = NodeSetting.create({\n      description: 'Start index if Array',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n\n    this.settings['bytes'] = NodeSetting.create({\n      description: 'Bytes to read if Array',\n      type: SettingType.NUMBER,\n      value: 1,\n    });\n\n    this.addInput('input', Type.ANY);\n  }\n\n  init() {\n    this.setNewOutputs();\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    if (input === undefined || input === null) {\n      return;\n    }\n\n    if (typeof input === 'number') {\n      input = [input];\n    }\n\n    const START = this.settings['start'].value;\n    const BYTES = this.settings['bytes'].value;\n\n    if (!input || !input.length || input.length < BYTES) {\n      return;\n    }\n\n    let outputIndex = 0;\n    for (let i = 0; i < BYTES; i++) {\n      for (let j = 0; j < 8; j++) {\n        this.setOutputData(outputIndex++, (input[START + i] >> j) & 0x01);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.setNewOutputs();\n    this.onInputUpdated();\n  }\n\n  private setNewOutputs() {\n    let outputsLen = this.getOutputsCount();\n    for (let i = 0; i < outputsLen; i++) {\n      this.removeOutput(i);\n    }\n    outputsLen = this.settings['bytes'].value * 8;\n    for (let i = 0; i < outputsLen; i++) {\n      this.addOutput(i.toString(), Type.NUMBER);\n    }\n    this.updateNodeOutput();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('conversion/int-to-bits', IntToBits);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass BoolToIntNode extends Node {\n    constructor() {\n        super();\n        this.title = NODE_INFO.conversion[\"bool-to-int\"].title;\n        this.description = NODE_INFO.conversion[\"bool-to-int\"].description;\n        this.addInput('input', Type.BOOLEAN);\n        this.addOutput('output', Type.NUMBER);\n    }\n    onInputUpdated() {\n        this.setOutputData(0, this.inputs[0].data ? 1 : 0);\n    }\n}\n\nContainer.registerNodeType('conversion/bool-to-int', BoolToIntNode);\n\nclass IntToBoolNode extends Node {\n    constructor() {\n        super();\n        this.title = NODE_INFO.conversion[\"int-to-bool\"].title;\n        this.description = NODE_INFO.conversion[\"int-to-bool\"].description;\n        this.addInput('input', Type.NUMBER);\n        this.addOutput('output', Type.BOOLEAN);\n    }\n    onInputUpdated() {\n        this.setOutputData(0, !!this.inputs[0].data);\n    }\n}\nContainer.registerNodeType('conversion/int-to-bool', IntToBoolNode);\n\n\nclass StringToBool extends Node {\n    constructor() {\n        super();\n        this.title = NODE_INFO.conversion[\"string-to-bool\"].title;\n        this.description = NODE_INFO.conversion[\"string-to-bool\"].description;\n        this.addInput('input', Type.STRING);\n        this.addOutput('output', Type.BOOLEAN);\n    }\n    onInputUpdated() {\n        const val = this.getInputData(0)\n        if (val === \"0\" || val === 'false') {\n            this.setOutputData(0, false, true);\n        } else if (val === \"1\" || val === 'true') {\n            this.setOutputData(0, true, true);\n        }\n    }\n}\nContainer.registerNodeType('conversion/string-to-bool', StringToBool);\n","import { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { Container } from '../../container';\nimport { NODE_INFO } from '../../node-info';\n\nexport class BufferToHexString extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.conversion[\"buffer-to-hex-string\"].title;\n    this.description = NODE_INFO.conversion[\"buffer-to-hex-string\"].description;\n\n    this.addInput('input', Type.ANY);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onInputUpdated() {\n    let buffer = this.getInputData(0);\n\n    if (!buffer || !Buffer.isBuffer(buffer)) {\n      return;\n    }\n\n    // console.log(buffer);\n    let str = buffer.toString('hex').toUpperCase();\n    // console.log(str);\n    this.setOutputData(0, str);\n  }\n}\nContainer.registerNodeType('conversion/buffer-to-hex-string', BufferToHexString);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport ModbusByteOrder from '../protocols/modbus/modbus-fc/modbus-point-byte-order';\n\nclass BufferToNumNode extends Node {\n  value = null;\n  constructor() {\n    super();\n    this.title = NODE_INFO.conversion[\"buffer-to-num\"].title;\n    this.description = NODE_INFO.conversion[\"buffer-to-num\"].description;\n    this.addInput('in', Type.ANY);\n    this.addOutput('out', Type.JSON);\n    this.addOutput('out buffer', Type.JSON);\n    this.settings['dataType'] = NodeSetting.create({\n      description: 'Set data type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'na' }, // use reg length from setting\n          { value: 1, text: 'INT-16' }, // 1 reg\n          { value: 2, text: `UINT-16` }, // 1 reg\n          { value: 3, text: 'INT-32' }, // 2 reg\n          { value: 4, text: 'UINT-32' }, // 2 reg\n          { value: 5, text: 'FLOAT-32' }, // 2 reg\n          { value: 8, text: 'DOUBLE-64' }, // 4 reg\n        ],\n      },\n      value: 0,\n    });\n    this.settings['dataEndian'] = NodeSetting.create({\n      description: 'Set byte order',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'LE-Byte BE-Word' },\n          { value: 1, text: 'LE-Byte LE-Word' },\n          { value: 2, text: 'BE-Byte LE-Word' },\n          { value: 3, text: 'BE-Byte BE-Word' },\n        ],\n      },\n      value: 0,\n    });\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    const dataEndian = this.settings['dataEndian'].value;\n    const dataType = this.settings['dataType'].value;\n    try {\n      let j = JSON.parse(input);\n      if (!j.length) {\n        return\n      }\n      let buf;\n      if ((j.length === 1 && j[0] > 255) || (j.length === 2 && (j[0] > 255 || j[1] > 255))) {\n        buf = Buffer.alloc(j.length * 2);\n        let index = 0\n        for (let i = 0; i < j.length; i++) {\n          if (dataEndian >= 2) {\n            buf.writeUInt16BE(j[i], index);\n          } else {\n            buf.writeUInt16LE(j[i], index);\n          }\n          index += 2;\n        }\n      } else if(j.length <= 4){\n        buf = Buffer.from(j);\n      }else{\n        return;\n      }\n      const out = ModbusByteOrder.readByteOrder(buf, 0, dataType, dataEndian);\n      this.setOutputData(0, JSON.stringify(out));\n      this.setOutputData(1, JSON.stringify(buf));\n    } catch (error) { }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('conversion/buffer-to-num', BufferToNumNode);\n","import * as convert from 'convert-units';\nimport { get } from 'lodash';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType } from '../../node-io';\n\nclass UnitConversionNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.conversion[\"convert-units\"].title;\n    this.description = NODE_INFO.conversion[\"convert-units\"].description;\n\n    this.addInput('in');\n    this.addOutput('converted');\n\n    this.settings['from-to'] = NodeSetting.create({\n      description: 'From / To unit',\n      type: SettingType.TREE_SELECT,\n      config: { items: [] },\n    });\n    this.ensureFromToConfig();\n  }\n\n  onAdded() {\n    this.updateTitle();\n    this.ensureFromToConfig();\n  }\n\n  // the from-to config is excluded from JSON serialization, we need to maintain it conditionally\n  ensureFromToConfig() {\n    // settings['from-to'].config is omitted from serialization / deserialization\n    if (!get(this, \"settings['from-to'].config.items.length\", 0))\n      this.settings['from-to'].config = { items: this.createTreeSelectItems() };\n    // ensure config exclusion from JSON serialization\n    this.settings['from-to'].toJSON = function() {\n      const { config = null, ...withoutConfig } = { ...this };\n      return withoutConfig;\n    };\n  }\n\n  createTreeSelectItems() {\n    const asItem = unit => ({ value: unit, text: unit });\n    // higher-order function:\n    const addAsChildren = (categoryName: string, units: { value: any; text: any }[]) => from => ({\n      ...from,\n      items: units.map(to => ({\n        ...to,\n        value: { type: categoryName, from: from.value, to: to.value },\n      })),\n    });\n    return convert()\n      .measures()\n      .map(unitType => ({\n        text: unitType,\n        items: convert()\n          .possibilities(unitType)\n          .map(asItem),\n      }))\n      .map(category => ({\n        ...category,\n        items: category.items.map(addAsChildren(category.text, category.items)),\n      }));\n  }\n\n  onInputUpdated() {\n    if (!this.settings['from-to'].value) return;\n    const { from, to } = this.settings['from-to'].value;\n    const value = parseFloat(this.inputs[0].data);\n    this.setOutputData(\n      0,\n      convert(value)\n        .from(from)\n        .to(to),\n    );\n  }\n\n  onAfterSettingsChange() {\n    this.ensureFromToConfig();\n    this.onInputUpdated();\n    this.updateTitle();\n  }\n\n  updateTitle() {\n    if (!this.settings['from-to'].value) return;\n    const { from, to } = this.settings['from-to'].value;\n    this.title = 'Unit converter' + ' ' + '(' + from + '/' + to + ')';\n  }\n}\nContainer.registerNodeType('conversion/convert-units', UnitConversionNode);\n","module.exports = require(\"convert-units\");","import { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { Container } from '../../container';\nimport { NODE_INFO } from '../../node-info';\n\nexport class HexStringToBuffer extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.conversion[\"hex-string-to-buffer\"].title;\n    this.description = NODE_INFO.conversion[\"hex-string-to-buffer\"].description;\n\n    this.addInput('input', Type.STRING);\n    this.addOutput('output', Type.ANY);\n  }\n\n  onInputUpdated() {\n    let str = this.getInputData(0);\n\n    if (!str) {\n      return;\n    }\n\n    // console.log(str);\n    let buffer = Buffer.from(str, 'hex');\n    // console.log(buffer);\n    this.setOutputData(0, buffer);\n  }\n}\nContainer.registerNodeType('conversion/hex-string-to-buffer', HexStringToBuffer);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport ModbusByteOrder from '../protocols/modbus/modbus-fc/modbus-point-byte-order';\nimport { NODE_INFO } from '../../node-info';\n\nclass IntToFourByteArrayNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.conversion[\"int-to-buffer\"].title;\n    this.description = NODE_INFO.conversion[\"int-to-buffer\"].description; this.addInput('in 1', Type.ANY);\n    \n    this.addOutput('out', Type.JSON);\n    this.addOutput('out data', Type.JSON);\n    this.settings['dataType'] = NodeSetting.create({\n      description: 'Set data type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'na' }, // use reg length from setting\n          { value: 1, text: 'INT-16' }, // 1 reg\n          { value: 2, text: `UINT-16` }, // 1 reg\n          { value: 3, text: 'INT-32' }, // 2 reg\n          { value: 4, text: 'UINT-32' }, // 2 reg\n          { value: 5, text: 'FLOAT-32' }, // 2 reg\n          { value: 8, text: 'DOUBLE-64' }, // 4 reg\n        ],\n      },\n      value: 0,\n    });\n    this.settings['dataEndian'] = NodeSetting.create({\n      description: 'Set byte order',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'LE-Byte BE-Word' },\n          { value: 1, text: 'LE-Byte LE-Word' },\n          { value: 2, text: 'BE-Byte LE-Word' },\n          { value: 3, text: 'BE-Byte BE-Word' },\n        ],\n      },\n      value: 0,\n    });\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    const dataEndian = this.settings['dataEndian'].value;\n    const dataType = this.settings['dataType'].value;\n    const out = ModbusByteOrder.writeValue(input, dataType, dataEndian);\n    this.setOutputData(0, JSON.stringify(out));\n    this.setOutputData(1, JSON.parse(JSON.stringify(out)).data);\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('conversion/int-to-buffer', IntToFourByteArrayNode);\n","import { isNull } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass EventCounterNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.count[\"any-event-counter\"].title;\n    this.description = NODE_INFO.count[\"any-event-counter\"].description;\n\n    this.addInput('input');\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('count', Type.NUMBER);\n    this.addOutput('toggle', Type.NUMBER);\n    this.settings['null'] = NodeSetting.create({\n      description: 'Stop count if input is null',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.properties['count'] = 0;\n  }\n\n  onAdded(){\n    this.setOutputData(0, 0);\n    this.setOutputData(1, false);\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const inputUpdated = this.inputs[0].updated;\n    const inputData = this.inputs[0].data;\n    const reset = this.inputs[1].data\n    if (reset && reset == true) this.properties['count'] = 0; //reset count\n    if (this.settings['null'].value && this.isNull(inputData)) return\n     if (inputUpdated) {\n        this.properties['count']++;\n        this.setOutputData(1, !this.outputs[1].data); // toggle\n      }\n    if (this.properties['count'] !== inputData) {\n      this.setOutputData(0, this.properties['count']);\n      this.persistProperties(false, true);\n    }\n  }\n\n  isNull(message: any) {\n    return isNull(message)\n  }\n}\nContainer.registerNodeType('count/any-event-counter', EventCounterNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass CounterNode extends Node {\n  lastUp:boolean;\n  lastDown:boolean;\n  lastReset:boolean;\n\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.count.counter.title;\n    this.description = NODE_INFO.count.counter.description;\n\n    this.addInputWithSettings('set value', Type.NUMBER, 0, 'Set Value');\n    this.addInput('count up', Type.BOOLEAN);\n    this.addInput('count down', Type.BOOLEAN);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('count', Type.NUMBER);\n    this.properties['pointVal'] = 0;\n  }\n\n  onCreated() {\n  }\n\n  onAdded() {\n    this.setOutputData(1, false);\n    this.setOutputData(2, false);\n    this.lastUp = false;\n    this.lastDown = false;\n    this.lastReset = false;\n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    const old = this.outputs[0].data;\n    const up = this.getInputData(1) || false;\n    const down = this.getInputData(2) || false;\n    const reset = this.getInputData(3) || false;\n\n    if (this.inputs[1].updated && up && !this.lastUp) this.properties['pointVal']++;\n    this.lastUp = up;\n\n    if (this.inputs[2].updated && down && !this.lastDown) this.properties['pointVal']--;\n    this.lastDown = down;\n\n    const setValue = this.getInputData(0);\n\n    if (this.inputs[3].updated && reset && !this.lastReset) this.properties['pointVal'] = setValue;\n    this.lastReset = reset;\n\n    if (this.properties['pointVal'] !== old) {\n      this.setOutputData(0, this.properties['pointVal']);\n      this.properties['pointVal'] = this.properties['pointVal'];\n      this.persistProperties(false, true);\n    }\n\n    this.setOutputData(0, this.outputs[0].data);\n  }\n}\nContainer.registerNodeType('count/counter', CounterNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass TriggeredRamp extends Node {\n  countUp: boolean;\n  lastTrigger: boolean;\n  lastReset: boolean;\n  currentVal: number;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.count[\"triggered-ramp\"].title;\n    this.description = NODE_INFO.count[\"triggered-ramp\"].description;\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInputWithSettings('min', Type.NUMBER, 0, 'min', false);\n    this.addInputWithSettings('max', Type.NUMBER, 10, 'max', false);\n    this.addInputWithSettings('step', Type.NUMBER, 1, 'Step Size', false);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n    this.settings['countOnFalse'] = NodeSetting.create({\n      description: 'Also count on true->false?',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.settings['rampUpOnly'] = NodeSetting.create({\n      description: 'Ramp Up Only',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n    this.countUp = false;\n    this.lastTrigger = false;\n    this.lastReset = false;\n    this.currentVal = 0;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const min = this.getInputData(1);\n    const max = this.getInputData(2);\n\n    this.currentVal = Number(this.currentVal);\n    if (this.currentVal < min) this.currentVal = min;\n    else if (this.currentVal > max) this.currentVal = max;\n\n    const reset = this.getInputData(4);\n    if (reset && !this.lastReset) this.currentVal = min;\n    this.lastReset = reset;\n\n    const trigger = this.getInputData(0);\n    if (trigger != this.lastTrigger) {\n      if (this.settings['countOnFalse'].value || trigger) {\n        const step = this.getInputData(3);\n        if (this.countUp && this.currentVal + step > max) {\n          if (this.settings['rampUpOnly'].value) {\n            this.countUp = true;\n            this.currentVal = min - step;\n          } else this.countUp = false;\n        } else if (!this.countUp && this.currentVal - step < min) this.countUp = true;\n        if (this.countUp) this.currentVal += step;\n        else this.currentVal -= step;\n      }\n      this.lastTrigger = trigger;\n    }\n\n    this.setOutputData(0, this.currentVal, true); //out\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('count/triggered-ramp', TriggeredRamp);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\n\nclass IntervalRampNode extends Node {\n  countUp: boolean;\n  lastInterval: number;\n  lastReset: boolean;\n  lastEnable: boolean;\n  currentVal: number;\n  timeoutFunc;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.count[\"interval-ramp\"].title;\n    this.description = NODE_INFO.count[\"interval-ramp\"].description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, 0, 'Enable', false);\n    this.addInputWithSettings('min', Type.NUMBER, 0, 'min', false);\n    this.addInputWithSettings('max', Type.NUMBER, 10, 'max', false);\n    this.addInputWithSettings('step', Type.NUMBER, 1, 'Step Size', false);\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Count Interval', false);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n\n    this.settings['rampUpOnly'] = NodeSetting.create({\n      description: 'Ramp Up Only',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n  }\n\n  onAdded() {\n    this.countUp = true;\n    this.lastInterval = 1000;\n    this.lastReset = false;\n    this.lastEnable = true;\n    this.currentVal = 0;\n    this.timeoutFunc = setInterval(() => {\n      const min = this.getInputData(1);\n      const max = this.getInputData(2);\n      this.count(min, max);\n      this.setOutputData(0, this.currentVal, true);\n    }, this.lastInterval);\n    this.inputs[4]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const min = this.getInputData(1);\n    const max = this.getInputData(2);\n\n    this.currentVal = Number(this.currentVal);\n    if (this.currentVal < min) this.currentVal = min;\n    else if (this.currentVal > max) this.currentVal = max;\n\n    const reset = Boolean(this.getInputData(5));\n    if (reset && !this.lastReset) this.currentVal = min;\n    this.countUp = true;\n    this.lastReset = reset;\n\n    let interval = this.getInputData(4);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    const enable = this.getInputData(0);\n    if (enable && !this.lastEnable) {\n      this.timeoutFunc = setInterval(() => {\n        this.count(min, max);\n        this.setOutputData(0, this.currentVal, true);\n      }, interval);\n    } else if (!enable && this.lastEnable) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, null);\n    } else if (enable && this.lastEnable && interval !== this.lastInterval) {\n      clearInterval(this.timeoutFunc);\n      this.timeoutFunc = setInterval(() => {\n        this.count(min, max);\n        this.setOutputData(0, this.currentVal, true);\n      }, interval);\n    }\n    this.lastInterval = interval;\n    this.lastEnable = enable;\n  }\n\n  count(min, max) {\n    const step = this.getInputData(3);\n    if (this.countUp && this.currentVal + step > max) {\n      if (this.settings['rampUpOnly'].value) {\n        this.countUp = true;\n        this.currentVal = min - step;\n      } else this.countUp = false;\n    } else if (!this.countUp && this.currentVal - step < min) this.countUp = true;\n    if (this.countUp) this.currentVal += step;\n    else this.currentVal -= step;\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[4]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('count/interval-ramp', IntervalRampNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 07.03.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass WaveformNode extends Node {\n  lastTime: number;\n  startTime: number;\n  lastReset: boolean;\n  constructor() {\n    super();\n    this.title = NODE_INFO.count.waveform.title;\n    this.description = NODE_INFO.count.waveform.description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, 0, 'min', false);\n    this.settings['signalType'] = NodeSetting.create({\n      description: 'Signal Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'Ramp', text: 'Ramp' },\n          { value: 'Sine', text: 'Sine' },\n          { value: 'Square', text: 'Square' },\n          { value: 'Triangle', text: 'Triangle' },\n          { value: 'Sawtooth', text: 'Sawtooth' },\n        ],\n      },\n      value: 'Ramp',\n    });\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Interval', false);\n    this.addInputWithSettings('period', Type.NUMBER, 10, 'Period', false);\n    this.addInputWithSettings('amplitude', Type.NUMBER, 1, 'Amplitude', false);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.settings['intervalTime'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.settings['periodTime'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [\n        { interval: { weight: 2 }, intervalTime: {} },\n        { period: { weight: 2 }, periodTime: {} },\n        { amplitude: {} },\n      ],\n    });\n    this.settings['enable'] = NodeSetting.create({ description: 'Enable', value: true, type: SettingType.BOOLEAN });\n    this.settings['invert'] = NodeSetting.create({\n      description: 'Invert Output',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n    this.updateTitle();\n    this.inputs[1]['name'] = `[interval] (${this.settings['intervalTime'].value})`;\n    this.inputs[2]['name'] = `[period] (${this.settings['periodTime'].value})`;\n    this.lastReset = false;\n    this.startTime = Date.now();\n    this.onInputUpdated();\n  }\n\n  onExecute() {\n    if (!this.getInputData(0)) return;\n    let interval = this.getInputData(1);\n    interval = TimeUtils.timeConvert(interval, this.settings['intervalTime'].value);\n    const now = Date.now();\n    if (!this.lastTime) {\n      this.lastTime = now;\n    }\n    if (now - this.lastTime >= interval) {\n      this.recalculate();\n    }\n  }\n  onInputUpdated() {\n    const reset = this.getInputData(4);\n    if (reset && !this.lastReset) {\n      this.setOutputData(0, 0, false);\n      this.startTime = Date.now();\n    }\n    this.lastReset = reset;\n\n    if (!this.getInputData(0)) {\n      return;\n    }\n    this.recalculate();\n  }\n\n  recalculate() {\n    const now = Date.now();\n    const signalType = this.settings['signalType'].value || 'Ramp';\n    let period = this.getInputData(2);\n    period = TimeUtils.timeConvert(period, this.settings['periodTime'].value) / 1000;\n    const amplitude = this.getInputData(3);\n    const invert = this.settings['invert'].value ? -1 : 1;\n    let time = (now - this.startTime) / 1000;\n    let t = (time % period) / period;\n    let value = 0;\n    switch (signalType) {\n      case 'Sine':\n        value = Math.sin(2 * Math.PI * t);\n        break;\n      case 'Square':\n        value = Math.sign(Math.sin(2 * Math.PI * t));\n        if (value === -1) {\n          value = 0;\n        }\n        break;\n      case 'Triangle':\n        value = 1 - 4 * Math.abs(Math.round(t - 0.25) - (t - 0.25));\n        break;\n      case 'Sawtooth':\n        value = t;\n        break;\n      case 'Ramp':\n        value = 2 * Math.abs(Math.round(t) - t);\n        break;\n    }\n    value = invert * amplitude * value;\n    this.lastTime = now;\n    this.setOutputData(0, value);\n  }\n\n  onAfterSettingsChange() {\n    this.updateTitle();\n    this.inputs[1]['name'] = `[interval] (${this.settings['intervalTime'].value})`;\n    this.inputs[2]['name'] = `[period] (${this.settings['periodTime'].value})`;\n  }\n\n  updateTitle() {\n    if (!this.settings['signalType'].value) return;\n    const signalType = this.settings['signalType'].value;\n    this.title = 'Waveform' + ' ' + '(' + signalType + ')';\n  }\n}\nContainer.registerNodeType('count/waveform', WaveformNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\n\nlet moment = require('moment-timezone');\n\n//https://github.com/travishorn/csval\n//https://github.com/C2FO/fast-csv\n\nclass CSVMergeRowsNode extends Node {\n  obj = [];\n  constructor() {\n    super();\n    this.title = NODE_INFO.csv[\"csv-merge-rows\"].title;\n    this.description = NODE_INFO.csv[\"csv-merge-rows\"].description;\n    this.addInput('original', Type.STRING);\n    this.addInput('merge', Type.STRING);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n    this.setOutputData(0, '');\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return; // only execute on server\n    if (!this.getInputData(0) || !this.getInputData(1)) return;\n    let outputCSV = this.getInputData(0).slice(0, this.getInputData(0).length - 1);\n    let addCSV = this.getInputData(1);\n    addCSV = addCSV.slice(addCSV.indexOf('\\n'), addCSV.length - 1);\n    outputCSV += addCSV;\n\n    this.setOutputData(0, outputCSV);\n  }\n}\nContainer.registerNodeType('csv/csv-merge-rows', CSVMergeRowsNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\n\nlet moment = require('moment-timezone');\n\n//https://github.com/travishorn/csval\n//https://github.com/C2FO/fast-csv\n\nclass CSVMergeColumnsNode extends Node {\n  obj = [];\n  constructor() {\n    super();\n    this.title = NODE_INFO.csv[\"csv-merge-columns\"].title;\n    this.description = NODE_INFO.csv[\"csv-merge-columns\"].description;\n    this.addInput('original', Type.STRING);\n    this.addInput('merge', Type.STRING);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n    this.setOutputData(0, '');\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return; // only execute on server\n    if (!this.getInputData(0) || !this.getInputData(1)) return;\n\n    let originalColumnsArray = this.getInputData(0).split('\\n');\n    let mergeColumnsArray = this.getInputData(1).split('\\n');\n    let outputCSV = '';\n    const originalColumnsCount = originalColumnsArray[0].split(',').length;\n    const mergeColumnsCount = mergeColumnsArray[0].split(',').length;\n\n    var i = 0;\n    for (i = 0; i < Math.min(mergeColumnsArray.length, originalColumnsArray.length) - 1; i++) {\n      outputCSV += originalColumnsArray[i] + ', ' + mergeColumnsArray[i] + '\\n';\n    }\n    //if(i < originalColumnsArray.length){\n    var x = 0;\n    while (i < originalColumnsArray.length - 1) {\n      outputCSV += originalColumnsArray[i];\n      x = originalColumnsCount;\n      while (x < originalColumnsCount + mergeColumnsCount) {\n        outputCSV += ', ';\n        x++;\n      }\n      outputCSV += '\\n';\n      i++;\n    }\n    while (i < mergeColumnsArray.length - 1) {\n      x = mergeColumnsCount;\n      while (x < originalColumnsCount + mergeColumnsCount) {\n        outputCSV += ', ';\n        x++;\n      }\n      outputCSV += mergeColumnsArray[i];\n      outputCSV += '\\n';\n      i++;\n    }\n    this.setOutputData(0, outputCSV);\n  }\n}\nContainer.registerNodeType('csv/csv-merge-columns', CSVMergeColumnsNode);\n","import axios from 'axios';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport SystemUtils from '../system/system-utils';\nimport { bsaClientConfig } from './bsa-client-config';\n\nclass BSACumulocityDeviceNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.cumulocity[\"cumulocity-device\"].title;\n    this.description =  NODE_INFO.cumulocity[\"cumulocity-device\"].description;\n    this.addInput('createDevice', Type.BOOLEAN);\n    this.addOutput('id', Type.NUMBER);\n    this.addOutput('message', Type.STRING);\n\n    this.settings['CumulocityDeviceName'] = NodeSetting.create({\n      description: 'Cumulocity Device Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n  }\n\n  async onAdded() {\n    await this.onAfterSettingsChange();\n  }\n\n  async onInputUpdated() {\n    if (this.side !== Side.server) return;\n    if (this.getInputData(0) && this.inputs[0].updated) {\n      if (this.outputs[0].data && this.outputs[0].data.length == 0) await this.createDevice();\n      await this.checkDeviceExists();\n    }\n  }\n\n  async onAfterSettingsChange() {\n    if (this.side !== Side.server) return;\n    await this.checkDeviceExists();\n  }\n\n  getDeviceName(): string {\n    let deviceName = this.settings['CumulocityDeviceName'].value || 'unknownDevice';\n    if (!deviceName.startsWith('c8y_')) deviceName = 'c8y_' + deviceName;\n    return deviceName;\n  }\n\n  async checkDeviceExists() {\n    let deviceName = this.getDeviceName();\n    let cfg: any = bsaClientConfig('device');\n    cfg = {\n      ...cfg,\n      method: 'GET',\n      url: `${cfg.url}?query=name+eq+${deviceName}`,\n    };\n    try {\n      const response = await axios(cfg);\n      const ids = [];\n      response.data.managedObjects.forEach(device => {\n        ids.push(Number(device.id));\n      });\n      this.setOutputData(0, ids);\n      this.setOutputData(1, null);\n    } catch (error) {\n      this.setOutputData(1, String(error));\n    }\n  }\n\n  async createDevice() {\n    let clientIdFromPlat;\n    let deviceIdFromPlat;\n    try {\n      clientIdFromPlat = await SystemUtils.getClientIdDb();\n    } catch (e) {\n      clientIdFromPlat = 'unknownClientID';\n    }\n    try {\n      deviceIdFromPlat = await SystemUtils.getDeviceIdDb();\n    } catch (e) {\n      deviceIdFromPlat = 'unknownDeviceID';\n    }\n    let deviceName = this.getDeviceName();\n    let cfg: any = bsaClientConfig('device');\n    cfg = {\n      ...cfg,\n      method: 'POST',\n      data: {\n        name: deviceName,\n        type: 'c8y_nube',\n        deviceid: deviceIdFromPlat,\n        clientid: clientIdFromPlat,\n        c8y_IsDevice: {},\n        com_cumulocity_model_Agent: {},\n      },\n    };\n    try {\n      await axios(cfg);\n    } catch (error) {\n      this.setOutputData(1, String(error));\n    }\n  }\n}\n\nContainer.registerNodeType('cumulocity/cumulocity-device', BSACumulocityDeviceNode);\n","import axios from 'axios';\nimport * as moment from 'moment-timezone';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport { bsaClientConfig } from './bsa-client-config';\nimport { NODE_INFO } from '../../node-info';\n\nenum HistoryMode {\n  COV = 0,\n  PERIODIC = 1,\n  TRIGGER_ONLY = 2,\n}\n\nclass BSACumulocityNode extends Node {\n  // dynamically calculate position when starting\n  histTriggerInput: number;\n  clearStoredHisInput: number;\n  histErrorOutput: number;\n  storedHistCountOutput: number;\n  lastHistExportOutput: number;\n  // configurable parameters from each extended node for extracting values to store on DB\n  valueInput: number = 0;\n  // extra parameter for nodes\n  interval: number = -1;\n  timeoutFunc: any;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.cumulocity[\"cumulocity-point\"].title;\n    this.description =  NODE_INFO.cumulocity[\"cumulocity-point\"].description;\n    this.addInput('input', Type.ANY);\n  }\n\n  addHistoryConfiguration() {\n    this.addInput('histTrigger', Type.BOOLEAN);\n    this.addInput('clearStoredHis', Type.BOOLEAN);\n    this.addOutput('histError', Type.ANY);\n    this.addOutput('storedHistCount', Type.NUMBER);\n    this.addOutput('lastHistExport', Type.STRING);\n\n    /**\n     * History settings\n     */\n    this.settings['enable'] = NodeSetting.create({\n      description: 'History Enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.settings['CumulocityDeviceID'] = NodeSetting.create({\n      description: 'Cumulocity Device ID (Number)',\n      value: '',\n      type: SettingType.STRING,\n    });\n\n    this.settings['CumulocityPointName'] = NodeSetting.create({\n      description: 'Measurement Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n\n    this.settings['CumulocityPointType'] = NodeSetting.create({\n      description: 'Measurement Type',\n      value: '',\n      type: SettingType.STRING,\n    });\n\n    this.settings['CumulocitySeries'] = NodeSetting.create({\n      description: 'Series Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n\n    this.settings['historyMode'] = NodeSetting.create({\n      description: 'History Logging Mode',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: HistoryMode.COV, text: 'Change Of Value (COV)' },\n          { value: HistoryMode.PERIODIC, text: 'Periodic' },\n          { value: HistoryMode.TRIGGER_ONLY, text: 'Trigger Only' },\n        ],\n      },\n      value: HistoryMode.COV,\n    });\n\n    this.settings['dataType'] = NodeSetting.create({\n      description: 'Data type for storing',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: Type.NUMBER, text: 'Number' },\n          { value: Type.BOOLEAN, text: 'Boolean' },\n          { value: Type.STRING, text: 'String' },\n        ],\n      },\n      value: Type.NUMBER,\n    });\n    this.settings['threshold'] = NodeSetting.create({\n      description: 'COV Threshold',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['period'] = NodeSetting.create({\n      description: 'Logging Interval',\n      value: 15,\n      type: SettingType.NUMBER,\n    });\n    this.settings['periodUnits'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.MILLISECONDS, text: 'Milliseconds' },\n          { value: TIME_TYPE.SECONDS, text: 'Seconds' },\n          { value: TIME_TYPE.MINUTES, text: 'Minutes' },\n          { value: TIME_TYPE.HOURS, text: 'Hours' },\n        ],\n      },\n      value: TIME_TYPE.MINUTES,\n    });\n\n    this.settings['storage-limit'] = NodeSetting.create({\n      description: 'Local Storage Limit (Max 50)',\n      value: 25,\n      type: SettingType.NUMBER,\n    });\n    this.settings['minuteRoundValue'] = NodeSetting.create({\n      description: 'Round minutes up in increments of',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.settings['decimals'] = NodeSetting.create({\n      description: 'Decimal Places (Limit 5)',\n      value: 3,\n      type: SettingType.NUMBER,\n    });\n    this.settings['timeAsString'] = NodeSetting.create({\n      description: 'Display Timestamp as',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: false, text: 'Numeric' },\n          { value: true, text: 'String' },\n        ],\n      },\n      value: true,\n    });\n\n    this.settings['units'] = NodeSetting.create({\n      description: 'Units',\n      value: '',\n      type: SettingType.STRING,\n    });\n\n    this.properties['obj'] = [];\n  }\n\n  setup() {\n    this.addHistoryConfiguration();\n  }\n\n  init() {\n    this.assignInputsOutputs();\n  }\n\n  onAdded() {\n    this.assignInputsOutputs();\n    this.resetOutputs();\n    this.doPeriodicHistoryFunctions();\n  }\n\n  async onInputUpdated() {\n    if (this.getInputData(this.clearStoredHisInput)) {\n      this.properties['obj'] = [];\n      this.updateHistoryCountOutput();\n    }\n    await this.doNonPeriodicHistoryFunctions();\n  }\n\n  async onAfterSettingsChange() {\n    await this.doNonPeriodicHistoryFunctions();\n    this.doPeriodicHistoryFunctions();\n  }\n\n  onRemoved() {\n    clearInterval(this.timeoutFunc);\n  }\n\n  assignInputsOutputs() {\n    for (let input in this.inputs) {\n      if (this.inputs.hasOwnProperty(input)) {\n        if (this.inputs[input].name == 'histTrigger') this.histTriggerInput = Number(input);\n        if (this.inputs[input].name == 'clearStoredHis') this.clearStoredHisInput = Number(input);\n      }\n    }\n\n    for (let output in this.outputs) {\n      if (this.outputs.hasOwnProperty(output)) {\n        if (this.outputs[output].name == 'histError') this.histErrorOutput = Number(output);\n        else if (this.outputs[output].name == 'storedHistCount') this.storedHistCountOutput = Number(output);\n        else if (this.outputs[output].name == 'lastHistExport') this.lastHistExportOutput = Number(output);\n      }\n    }\n  }\n\n  resetOutputs() {\n    this.updateHistoryCountOutput();\n  }\n\n  async doNonPeriodicHistoryFunctions() {\n    if (this.side !== Side.server) return;\n    if (!this.settings['enable'].value) return;\n    const input = this.getInputData(this.valueInput);\n\n    if (this.checkTriggered()) {\n      await this.storeLogEntry(input);\n    } else if (this.checkCOV(input)) {\n      await this.storeLogEntry(input);\n    }\n\n    if (this.properties['obj'].length > 0) await this.trySendStoredData();\n  }\n\n  async trySendStoredData() {\n    let decimals = this.settings['decimals'].value;\n    decimals = Utils.clamp(decimals, 0, 5);\n\n    const multiPointPost = [];\n\n    let measurementName = this.settings['CumulocityPointName'].value || 'c8y_unknownPoint';\n    if (!measurementName.startsWith('c8y_')) measurementName = 'c8y_' + measurementName;\n    let measurementType = this.settings['CumulocityPointType'].value || 'c8y_unknownType';\n    if (!measurementType.startsWith('c8y_')) measurementType = 'c8y_' + measurementType;\n    const seriesName = this.settings['CumulocitySeries'].value || 'unknownSeries';\n\n    this.properties['obj'].forEach(log => {\n      const dataType = this.settings['dataType'].value;\n      log.payload = this.convertInput(log.payload, dataType, decimals);\n      multiPointPost.push({\n        source: {\n          id: this.settings['CumulocityDeviceID'].value,\n        },\n        time: log.timestamp,\n        type: measurementType,\n        [measurementName]: {\n          [seriesName]: {\n            value: log.payload,\n            unit: String(this.settings['units'].value) || 'undefined',\n          },\n        },\n      });\n    });\n    this.debugInfo(`SENDING DATA: ${JSON.stringify(multiPointPost)}`);\n    let cfg: any = bsaClientConfig('measurement');\n    cfg = { ...cfg, method: 'POST', data: { measurements: multiPointPost } };\n    try {\n      const response = await axios(cfg);\n      this.debugInfo(`RESPONSE FROM SERVER: ${JSON.stringify(response.data)}`);\n      this.properties['obj'] = [];\n      this.persistProperties(false, true);\n      this.setOutputData(this.histErrorOutput, '');\n      this.settings['timeAsString'].value\n        ? this.setOutputData(this.lastHistExportOutput, moment().format(), true)\n        : this.setOutputData(this.lastHistExportOutput, moment().valueOf(), true);\n      this.updateHistoryCountOutput();\n    } catch (e) {\n      this.debugErr(`ERROR: ${e}`);\n      this.setOutputData(this.histErrorOutput, e);\n    }\n  }\n\n  async storeLogEntry(input) {\n    if (input == null) return;\n    // cap the amount of data that can be stored\n    const storageLimit = Utils.clamp(this.settings['storage-limit'].value, 0, 50);\n    const minuteRound = Utils.clamp(this.settings['minuteRoundValue'].value, 0, 60);\n    const now = minuteRound ? TimeUtils.nearestFutureMinutes(minuteRound, moment()) : moment();\n    // object data\n    const msg = {\n      payload: input,\n      timestamp: now.toISOString(),\n    };\n    // build an object\n    this.properties['obj'].push(msg);\n    while (this.properties['obj'].length > storageLimit) {\n      this.properties['obj'].shift();\n    }\n    this.properties['lastHistoryValue'] = input;\n    this.persistProperties(false, true);\n    this.updateHistoryCountOutput();\n  }\n\n  checkTriggered() {\n    return (\n      this.settings['historyMode'].value === HistoryMode.TRIGGER_ONLY &&\n      this.getInputData(this.histTriggerInput) &&\n      this.inputs[this.histTriggerInput].updated\n    );\n  }\n\n  checkCOV(input) {\n    if (this.settings['historyMode'].value === HistoryMode.COV) {\n      const threshold = this.settings['threshold'].value;\n      if (!isNaN(input) && !isNaN(this.properties['lastHistoryValue'])) {\n        return Math.abs(Number(input) - Number(this.properties['lastHistoryValue'])) >= threshold;\n      } else {\n        return input !== this.properties['lastHistoryValue'];\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Sets values in periodic period when HistoryMode is `PERIODIC`\n   */\n  doPeriodicHistoryFunctions() {\n    if (this.side !== Side.server) return;\n    const enable = this.settings['enable'].value;\n    const isPeriodic = this.settings['historyMode'].value === HistoryMode.PERIODIC;\n    if (!enable || !isPeriodic) {\n      if (this.timeoutFunc) {\n        this.interval = -1;\n        clearInterval(this.timeoutFunc);\n        this.debugInfo('Clearing Periodic interval data insertion...');\n      }\n    }\n    if (enable && isPeriodic) {\n      const interval = TimeUtils.timeConvert(this.settings['period'].value, this.settings['periodUnits'].value);\n      if (this.interval !== interval) {\n        clearInterval(this.timeoutFunc);\n        this.timeoutFunc = setInterval(async () => {\n          const input = this.getInputData(this.valueInput);\n          await this.storeLogEntry(input);\n          if (this.properties['obj'].length > 0) await this.trySendStoredData();\n        }, interval);\n        this.interval = interval;\n        this.debugInfo(`Setting Periodic Period of: ${interval} ms`);\n      }\n    }\n  }\n\n  updateHistoryCountOutput() {\n    this.setOutputData(this.storedHistCountOutput, (this.properties['obj'] && this.properties['obj'].length) || 0);\n  }\n}\n\nContainer.registerNodeType('cumulocity/cumulocity-point', BSACumulocityNode);\n","import axios from 'axios';\nimport * as _ from 'lodash';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport { bsaClientConfig } from './bsa-client-config';\nimport { NODE_INFO } from '../../node-info';\n\nlet moment = require('moment-timezone');\n\nenum ALARM_TYPE {\n  WARNING = 'WARNING',\n  MINOR = 'MINOR',\n  MAJOR = 'MAJOR',\n  CRITICAL = 'CRITICAL',\n}\n\nconst alarmConfig = {\n  items: [\n    { value: ALARM_TYPE.WARNING, text: ALARM_TYPE.WARNING },\n    { value: ALARM_TYPE.MINOR, text: ALARM_TYPE.MINOR },\n    { value: ALARM_TYPE.MAJOR, text: ALARM_TYPE.MAJOR },\n    { value: ALARM_TYPE.CRITICAL, text: ALARM_TYPE.CRITICAL },\n  ],\n};\n\nclass BSACumulocityAlarmNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.cumulocity[\"cumulocity-alarm\"].title;\n    this.description =  NODE_INFO.cumulocity[\"cumulocity-alarm\"].description;\n    this.addInput('alarmInput', Type.BOOLEAN);\n    this.addInputWithSettings('alarmText', Type.STRING, 'No Alarm Message Available', 'Enter Alarm Message');\n    this.addInputWithSettings('alarmClass', Type.DROPDOWN, ALARM_TYPE.WARNING, 'Alarm Class', false, alarmConfig);\n\n    this.addOutput('status', Type.BOOLEAN);\n    this.addOutput('error', Type.STRING);\n\n    this.settings['enable'] = NodeSetting.create({\n      description: 'Alarm Enable',\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.settings['CumulocityDeviceID'] = NodeSetting.create({\n      description: 'Cumulocity Device ID (Number)',\n      value: '',\n      type: SettingType.STRING,\n    });\n\n    this.settings['CumulocityAlarmName'] = NodeSetting.create({\n      description: 'Alarm Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n  }\n\n  onCreated() {\n    if (_.isEmpty(this.properties['alarmRegistry'])) this.properties['alarmRegistry'] = {};\n  }\n\n  async onInputUpdated() {\n    if (this.side !== Side.server) return;\n    if (!this.settings['enable'].value) return;\n    if (this.inputs[0].updated) await this.postAlarm(this.getInputData(0));\n  }\n\n  async onAfterSettingsChange() {\n    await this.onInputUpdated();\n  }\n\n  async postAlarm(alarmInput) {\n    let alarmName = this.settings['CumulocityAlarmName'].value || 'c8y_unknownAlarm';\n    if (!alarmName.startsWith('c8y_')) alarmName = 'c8y_' + alarmName;\n\n    let cfg: any = bsaClientConfig('alarm');\n    if (alarmInput) {\n      cfg = {\n        ...cfg,\n        method: 'POST',\n        data: {\n          source: {\n            id: this.settings['CumulocityDeviceID'].value,\n          },\n          text: this.getInputData(1),\n          time: moment().toISOString(),\n          type: alarmName,\n          status: 'ACTIVE',\n          severity: this.getInputData(2),\n        },\n      };\n      try {\n        const response = await axios(cfg);\n        this.setOutputData(0, true);\n        this.setOutputData(1, false);\n        this.properties['alarmRegistry'][alarmName] = response.data.id;\n        this.debugInfo(`ALARM_REGISTRY ${JSON.stringify(this.properties['alarmRegistry'])}`);\n      } catch (error) {\n        this.debugErr(error);\n        this.setOutputData(0, false);\n        this.setOutputData(1, error);\n      }\n    } else if (!alarmInput) {\n      const alarmID = this.properties['alarmRegistry'][alarmName];\n      if (!alarmID) return;\n      cfg = {\n        ...cfg,\n        method: 'PUT',\n        url: `alarm/alarms/${alarmID}`,\n        data: { status: 'CLEARED' },\n      };\n      try {\n        await axios(cfg);\n        this.setOutputData(0, false);\n        this.setOutputData(1, false);\n        delete this.properties['alarmRegistry'][alarmName];\n        this.debugInfo(`Cleared alarm ${alarmName}`);\n        this.debugInfo(`ALARM_REGISTRY ${JSON.stringify(this.properties['alarmRegistry'])}`);\n      } catch (error) {\n        this.debugErr(`ERROR ${error}`);\n        this.setOutputData(0, false);\n        this.setOutputData(1, error);\n      }\n    }\n    this.persistProperties(false, true);\n  }\n}\n\nContainer.registerNodeType('cumulocity/cumulocity-alarm', BSACumulocityAlarmNode);\n","import axios from 'axios';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport SystemUtils from '../system/system-utils';\nimport Utils from '../../utils';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport { bsaClientConfig } from './bsa-client-config';\nimport PlatformDataSource from '../../../database/datasource/PlatformDataSource';\n\nclass BSACumulocityOperationNode extends Node {\n  lastTrigger;\n  timeoutFunc;\n\n  //inputs\n  ENABLESLOT = 0;\n  TRIGGERSLOT = 1;\n\n  //outputs\n  OUTPUTSTARTSLOT = 3;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.cumulocity[\"cumulocity-operation\"].title;\n    this.description =  NODE_INFO.cumulocity[\"cumulocity-operation\"].description;\n\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addInput('trigger', Type.BOOLEAN);\n\n    this.addOutput('error', Type.BOOLEAN);\n    this.addOutput('message', Type.STRING);\n    this.addOutput('numExecuting', Type.NUMBER);\n\n    this.settings['CumulocityDeviceID'] = NodeSetting.create({\n      description: 'Cumulocity Device ID (Number)',\n      value: '',\n      type: SettingType.STRING,\n    });\n    this.settings['interval'] = NodeSetting.create({\n      description: 'Update Interval (min 15 seconds)',\n      type: SettingType.NUMBER,\n      value: 1,\n    });\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.SECONDS, text: 'Seconds' },\n          { value: TIME_TYPE.MINUTES, text: 'Minutes' },\n          { value: TIME_TYPE.HOURS, text: 'Hours' },\n        ],\n      },\n      value: TIME_TYPE.MINUTES,\n    });\n    this.settings['operationsCount'] = NodeSetting.create({\n      description: 'Number of Operations',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n  }\n\n  init(){\n    this.EXECUTE_INTERVAL = Math.max(15000, TimeUtils.timeConvert(this.settings['interval'].value, this.settings['time'].value));\n    this.properties['operationsCount'] = 0;\n    this.changeTopicsCount(this.settings['operationsCount'].value);\n    this.setOutputData(this.OUTPUTSTARTSLOT, null);\n  }\n\n  onCreated(){\n  }\n\n  onAdded() {\n    if (this.side !== Side.server) return;\n    this.EXECUTE_INTERVAL = Math.max(15000, TimeUtils.timeConvert(this.settings['interval'].value, this.settings['time'].value));\n    this.restoreOperationValues()\n    this.onAfterSettingsChange();\n  }\n\n  async onAfterSettingsChange() {\n    if (this.side !== Side.server) return;\n    //await this.createOperation();\n    let operationsCount = this.settings['operationsCount'].value;\n    operationsCount = Utils.clamp(operationsCount, 1, 100);\n    this.changeTopicsCount(operationsCount);\n    this.renameOutputs();\n    this.broadcastOutputsToClients();\n    this.checkOperationsExist();\n    this.checkOperationsExecuting();\n    this.storeOperationValues();\n  }\n\n  async onInputUpdated() {\n    if (this.side !== Side.server) return;\n    if (this.getInputData(this.ENABLESLOT)) {\n      if(this.getInputData(this.TRIGGERSLOT) && this.inputs[this.TRIGGERSLOT]){\n        this.checkOperationsExecuting();\n      }\n    }\n  }\n\n  onExecute(){\n    console.log('onExecute()')\n    if (this.getInputData(0)) {\n      this.checkOperationsExecuting();\n    }\n  }\n\n  async checkOperationsExist(){\n    const ALLoperations = await this.getDeviceOperations('ALL');\n    console.log('ALLoperations', ALLoperations)\n    const oldOperationsArray = this.properties['operationsArray'] || [];\n    const operationsArray = this.makeOperationsArray();\n    console.log('OPERATIONS ARRAY', operationsArray)\n    this.setNewOperationsToNull(oldOperationsArray, operationsArray);\n    if(operationsArray.length > 0){\n      operationsArray.forEach(async (operationName:any, index:number)=>{\n        if(operationName != undefined && operationName != 'undefined' && operationName != ''){\n          const exists = ALLoperations.some((anyOperation:any)=>{\n            return anyOperation['c8y_control']['measurementName'] == operationName;\n          });\n          if(!exists) {\n            console.log(`CREATING OPERATION ${operationsArray[index]}`)\n            await this.createOperation(operationsArray[index]);\n            this.setOutputData(this.OUTPUTSTARTSLOT + index, null)\n          }\n        }\n      });\n    }\n  }\n\n  async createOperation(operationName:string) {\n    const deviceId = this.settings['CumulocityDeviceID'].value;\n\n    let cfg: any = bsaClientConfig('operation');\n    cfg = {\n      ...cfg,\n      method: 'POST',\n      data: {\n        deviceId: deviceId,\n        deviceName: this.properties['CumulocityDeviceName'],\n        c8y_control: {\n          originalValue:\"\", \n          assetName: \"Nube-io Wires\",\n          measurementName: operationName,\n          changedValue: \"\" \n        },\n        description: operationName\n      }\n    };\n    try {\n      await axios(cfg)\n        .then(function (response) {\n          //console.log('AXIOS Response: ', response)\n        });\n    } catch (error) {\n      this.setOutputData(0, true);\n      this.setOutputData(1, String(error));\n      console.log('AXIOS Response: ', error)\n    }\n  }\n\n  makeOperationsArray(){\n    let operationsArray = [];\n    for(var i=1; i<= this.properties['operationsCount']; i++){\n      operationsArray.push(this.settings['operation'+i].value);\n    }\n    this.properties['operationsArray'] = operationsArray;\n    return operationsArray;\n  }\n\n  async checkOperationsExecuting(){\n    const operationsArray = this.makeOperationsArray();\n    const foundOperations = await this.getDeviceOperations('EXECUTING');\n    this.setOutputData(2, foundOperations.length);\n    console.log('EXECUTING OPERATIONS', foundOperations)\n    if(foundOperations.length > 0){\n      foundOperations.forEach(async (operation:any)=>{\n        var measurement = operation['c8y_control']['measurementName'];\n        const data = operation['c8y_control']['changedValue'];\n        const id = operation['id'];\n        var index = -1;\n        if(operationsArray.includes(measurement)){\n          index = operationsArray.indexOf(measurement);\n        }\n        if(index >= 0){\n          this.setOutputData(this.OUTPUTSTARTSLOT + index, data)\n          await this.operationSuccess(id);\n        }\n      });\n    }\n    this.storeOperationValues();\n  }\n\n  async getDeviceOperations(operationType:string) {\n    if(operationType != 'EXECUTING' && operationType != 'PENDING' && operationType != 'ALL') return [];\n    let deviceId = this.settings['CumulocityDeviceID'].value;\n    let operations = [];\n    let cfg: any = bsaClientConfig('operation');\n    cfg.headers = {}\n    cfg = {\n      ...cfg,\n      method: 'GET',\n      //url: `${cfg.url}?deviceId=${deviceId}`,\n      //url: `${cfg.url}?status=PENDING&deviceId=${deviceId}`,\n      //url: `${cfg.url}?status=EXECUTING&deviceId=${deviceId}`,\n    };\n    if(operationType == 'EXECUTING') cfg.url = `${cfg.url}?status=EXECUTING&deviceId=${deviceId}`;\n    else if(operationType == 'ALL') cfg.url = `${cfg.url}?deviceId=${deviceId}`;\n\n    let error = false;\n    let errors = [];\n    this.properties[`${operationType}operations`] = [];\n    try {\n      var next = cfg;\n      do {next = await this.readNextOperation(this, next, operationType);}\n      while(next);\n    } catch (error) {\n      this.setOutputData(0, true);\n      this.setOutputData(1, String(error));\n    }\n    return this.properties[`${operationType}operations`];\n  }\n\n  async readNextOperation(self, cfg:any, operationType:string){\n    if(operationType != 'EXECUTING' && operationType != 'PENDING' && operationType != 'ALL') return false;\n    var result = false;\n    var nextLink = ''\n    //console.log('CFG', cfg);\n    await axios(cfg)\n      .then(async function (response) {\n        //console.log('AXIOS Response: ', response);\n        if(response.data.hasOwnProperty('operations') && response.data.operations.length > 0){\n          self.properties[`${operationType}operations`] = self.properties[`${operationType}operations`].concat(response.data['operations']);\n          nextLink = 'https://bsaautomation' + response.data.next.slice(response.data.next.indexOf('.apj.cumulocity.com'));\n          cfg = {\n            ...cfg,\n            method: 'GET',\n            url: nextLink,\n          };\n          result = cfg;\n        }\n        else result = false;\n      })\n      .catch(function (error) {\n        console.log('AXIOS Error: ', error);\n        throw(error);\n      });\n    return result;\n  }\n\n  async operationSuccess(id:string) {\n    let deviceId = this.settings['CumulocityDeviceID'].value;\n    let cfg: any = bsaClientConfig('operation');\n    cfg = {\n      ...cfg,\n      method: 'PUT',\n      data: {\n        \"status\": \"SUCCESSFUL\"\n      },\n    };\n    cfg.url = cfg.url + '/' + id;\n    try {\n      await axios(cfg)\n        .then(function (response) {\n          //console.log('AXIOS Response: ', response)\n        });\n    } catch (error) {\n      this.setOutputData(0, true);\n      this.setOutputData(1, String(error));\n      console.log('AXIOS Response: ', error)\n    }\n  }\n\n  restoreOperationValues(){\n    this.properties['operationsValues'].forEach((value:any, index:number)=>{\n      this.setOutputData(this.OUTPUTSTARTSLOT + index, value);\n    });\n  }\n\n  storeOperationValues(){\n    let operationValues = [];\n    this.properties['operationsArray'].forEach((operationName:any, index:number)=>{\n      if(this.outputs[this.OUTPUTSTARTSLOT + index].hasOwnProperty('data')){\n        operationValues.push(this.outputs[this.OUTPUTSTARTSLOT + index].data);\n      }\n      else operationValues.push(null);\n    });\n    this.properties['operationsValues'] = operationValues;\n    this.persistProperties(true, true);\n  }\n\n  setNewOperationsToNull(oldOperationsArray, operationsArray){\n    operationsArray.forEach((operation:any, index:number)=>{\n      if(index >= oldOperationsArray.length || oldOperationsArray[index] != operation) this.setOutputData(this.OUTPUTSTARTSLOT + index, null); \n    });\n  }\n\n  changeTopicsCount(target_count) {\n    this.properties['operationsCount'] = this.getOutputsCount() - this.OUTPUTSTARTSLOT;\n    const diff = target_count - this.properties['operationsCount'];\n    if (diff == 0) return;\n\n    //add inputs, outputs\n    this.changeOutputsCount(target_count + this.OUTPUTSTARTSLOT, Type.ANY);\n\n    //change settings for topics\n    if (diff > 0) {\n      for (let i = this.properties['operationsCount'] + 1; i <= target_count; i++) {\n        this.settings['operation' + i] = NodeSetting.create({\n          description: 'Operation ' + i,\n          value: '',\n          type: SettingType.STRING,\n        });\n      }\n    } else if (diff < 0) {\n      for (let i = this.properties['operationsCount']; i > target_count; i--) {\n        delete this.settings['operation' + i];\n      }\n    }\n    this.properties['operationsCount'] = target_count;\n    //this.broadcastSettingsToClients();\n  }\n\n  renameOutputs() {\n    for (let i = 0; i <= this.properties['operationsCount'] - 1; i++) {\n      let topic = this.settings['operation' + (i + 1)]?.value || 'undefined';\n      if (topic?.length > 20) topic = '...' + topic.substr(topic.length - 20, 20);\n      this.outputs[String(i + this.OUTPUTSTARTSLOT)].name = '' + (i + 1) + ' | ' + topic;\n    }\n  }\n\n}\n\nContainer.registerNodeType('cumulocity/cumulocity-operation', BSACumulocityOperationNode);\n","import { Container } from '../../container';\nimport { BaseFunctionNode } from './base-function-node';\nimport { NODE_INFO } from '../../node-info';\n\nexport class FunctionNode extends BaseFunctionNode {\n\n  constructor() {\n    super(NODE_INFO[\"custom-function\"].function.title, NODE_INFO[\"custom-function\"].function.description);\n    this.mixinScriptSetting('// message is the received value\\nreturn message;');\n  }\n\n  protected getScriptInput() {\n    return this.getInputData(0);\n  }\n}\n\nContainer.registerNodeType('custom-function/function', FunctionNode);\n","import { NodeVM } from 'vm2';\nimport { isEmpty } from '../../../utils/helper';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType } from '../../node-io';\n\nexport abstract class BaseFunctionNode extends Node {\n\n  protected constructor(title: string, description: string) {\n    super();\n    this.title = title;\n    this.description = description;\n\n    this.addInput('message');\n    this.addOutput('output');\n    this.addOutput('error');\n  }\n\n  onCreated() {\n  }\n\n  onAdded() {\n  }\n\n  onInputUpdated() {\n    try {\n      this.executeConfiguredScript(this.getScriptInput())\n          .then(result => this.emitResult(result))\n          .catch(e => this.emitError(e));\n    } catch (e) {\n      this.emitError(e);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n\n  protected abstract getScriptInput();\n\n  protected executeConfiguredScript(...variables): Promise<any> {\n    const code = this.settings['script'].value;\n    if (this.side !== Side.server || isEmpty(code)) return;\n    const vm = new NodeVM({ timeout: 1000, sandbox: {} });\n    let func = vm.run(`module.exports = function(message, ...args) {\\n${code}\\n};`);\n    return Promise.resolve(func(...variables));\n  }\n\n  protected emitResult(result: any) {\n    this.setOutputData(0, result);\n    this.setOutputData(1, null); // reset error\n  }\n\n  protected emitError(error: Error) {\n    this.setOutputData(0, null); // reset result\n    this.debugErr(`Error when executing function node ${error.stack}`);\n    this.setOutputData(1, error);\n  }\n\n  protected mixinScriptSetting(defaultScript: string) {\n    this.settings['script'] = NodeSetting.create({ description: 'Function Code', value: defaultScript, type: SettingType.CODE_AREA });\n  }\n}\n","module.exports = require(\"vm2\");","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport UuidUtils from '../../utils/uuid-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass UuidNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"custom-function\"].uuid.title;\n    this.description =  NODE_INFO[\"custom-function\"].uuid.description;\n    this.addInput('trigger');\n    this.addOutput('uuid-out-8');\n    this.addOutput('uuid-out-12');\n    this.addOutput('uuid-out-28');\n  }\n\n  onInputUpdated() {\n    const out8 = UuidUtils.create8DigId();\n    const out12 = UuidUtils.create12DigId();\n    const out28 = UuidUtils.createUUID();\n    this.setOutputData(0, out8);\n    this.setOutputData(1, out12);\n    this.setOutputData(2, out28);\n\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated()\n  }\n\n}\n\nContainer.registerNodeType('custom-function/uuid', UuidNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 25.02.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport { Container } from '../../container';\nimport { NODE_INFO } from '../../node-info';\nimport Utils from '../../utils';\nimport { UiNode } from './ui-node';\n\nexport class UiLabelNode extends UiNode {\n  constructor(container?: Container, id?: number, properties?: any) {\n    super('Label', 'UiLabelNode', properties);\n    this.title = NODE_INFO.dashboard.label.title;\n    this.description = NODE_INFO.dashboard.label.description;\n    this.addInput('input');\n    this.UPDATE_INPUTS_INTERVAL = 100;\n  }\n\n  onInputUpdated() {\n    const state = Utils.formatValue(this.getInputData(0));\n    this.setState(state);\n    this.isRecentlyActive = true;\n  }\n}\n\nContainer.registerNodeType('dashboard/label', UiLabelNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 26.02.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport { Container } from '../../container';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport { UiNode } from './ui-node';\n\nexport class UiButtonNode extends UiNode {\n  interval = null;\n\n  constructor(container?: Container, id?: number, properties?: any) {\n    super('Button', 'UiButtonNode', properties);\n    this.title = NODE_INFO.dashboard.button.title;\n    this.description = NODE_INFO.dashboard.button.description;\n    this.addOutput('output', Type.BOOLEAN);\n    this.settings['button-text'] = NodeSetting.create({\n      description: 'Button Text',\n      value: 'ON',\n      type: SettingType.STRING,\n    });\n    this.setState({ buttonText: 'ON' });\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return;\n  }\n\n  onRemoved() {\n    super.onRemoved();\n  }\n\n  onGetMessageToServerSide() {\n    this.setOutputData(0, true);\n    this.sendIOValuesToEditor();\n  }\n}\n\nContainer.registerNodeType('dashboard/button', UiButtonNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 02.03.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport { Container } from '../../container';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\nimport { UiNode } from './ui-node';\nimport { NODE_INFO } from '../../node-info';\n\nexport class UiSwitchNode extends UiNode {\n  constructor(container?: Container, id?: number, properties?: any) {\n    super('Switch', 'UiSwitchNode', properties);\n    this.title = NODE_INFO.dashboard.switch.title;\n    this.description = NODE_INFO.dashboard.switch.description;\n    this.setState(false);\n\n    this.addInput('input', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    super.onAdded();\n    if (this.side == Side.server) this.setOutputData(0, this.getState());\n  }\n\n  onGetMessageToServerSide(data) {\n    this.setValue(data.state);\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    this.setValue(val);\n  }\n\n  setValue(val) {\n    this.setOutputData(0, val);\n    this.sendIOValuesToEditor();\n    this.isRecentlyActive = true;\n\n    if (this.getState() != val)\n      //prevent loop sending\n      this.setState(val);\n  }\n}\n\nContainer.registerNodeType('dashboard/switch', UiSwitchNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 02.03.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport { Container } from '../../container';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\nimport { UiNode } from './ui-node';\n\nexport class UiProgressNode extends UiNode {\n  constructor(container?: Container, id?: number, properties?: any) {\n    super('Progress', 'UiProgressNode', properties);\n    this.title = NODE_INFO.dashboard.progress.title;\n    this.description = NODE_INFO.dashboard.progress.description;\n    this.addInput('input', Type.NUMBER);\n    this.UPDATE_INPUTS_INTERVAL = 100;\n    this.setState(0);\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    if (val > 100) val = 100;\n    if (val < 0) val = 0;\n\n    this.setState(val);\n    this.isRecentlyActive = true;\n  }\n}\n\nContainer.registerNodeType('dashboard/progress', UiProgressNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 02.03.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport { Container } from '../../container';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\nimport { UiNode } from './ui-node';\n\nexport class UiSliderNode extends UiNode {\n  constructor(container?: Container, id?: number, properties?: any) {\n    super('Slider', 'UiSliderNode', properties);\n    this.title = NODE_INFO.dashboard.slider.title;\n    this.description = NODE_INFO.dashboard.slider.description;\n    this.addInput('input', Type.NUMBER);\n    this.addOutput('output', Type.NUMBER);\n    this.UPDATE_INPUTS_INTERVAL = 100;\n    this.setState(0);\n  }\n\n  onAdded() {\n    super.onAdded();\n    if (this.side == Side.server) this.setOutputData(0, this.getState());\n  }\n\n  onGetMessageToServerSide(data) {\n    this.setValue(data.state);\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    this.setValue(val);\n  }\n\n  setValue(val) {\n    if (val > 100) val = 100;\n    if (val < 0) val = 0;\n\n    this.setOutputData(0, val);\n    this.sendIOValuesToEditor();\n    this.isRecentlyActive = true;\n\n    if (this.getState() != val)\n      //prevent loop sending\n      this.setState(val);\n  }\n}\n\nContainer.registerNodeType('dashboard/slider', UiSliderNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 02.03.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport { Container } from '../../container';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\nimport { UiNode } from './ui-node';\nimport { NODE_INFO } from '../../node-info';\n\nexport class UiTextBoxNode extends UiNode {\n  constructor(container?: Container, id?: number, properties?: any) {\n    super('TextBox', 'UiTextBoxNode', properties);\n\n    this.title = NODE_INFO.dashboard[\"text-box\"].title;\n    this.description = NODE_INFO.dashboard[\"text-box\"].description;\n\n    this.setState('');\n\n    this.addInput('input', Type.STRING);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n    super.onAdded();\n    if (this.side == Side.server) this.setOutputData(0, this.getState());\n  }\n\n  onGetMessageToServerSide(data) {\n    this.setValue(data.state);\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    this.setValue(val);\n  }\n\n  setValue(val) {\n    this.setOutputData(0, val);\n    this.sendIOValuesToEditor();\n    this.isRecentlyActive = true;\n\n    if (this.getState() != val)\n      //prevent loop sending\n      this.setState(val);\n  }\n}\n\nContainer.registerNodeType('dashboard/text-box', UiTextBoxNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 02.03.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\nimport { Container } from '../../container';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType } from '../../node-io';\nimport { UiNode } from './ui-node';\n\nexport class UiLogNode extends UiNode {\n  messagesPerSec = 0;\n\n  constructor(container?: Container, id?: number, properties?: any) {\n    super('Log', 'UiLogNode', properties);\n\n    this.title = NODE_INFO.dashboard.log.title;\n    this.description = NODE_INFO.dashboard.log.description;\n    this.properties['log'] = [];\n    this.settings['maxRecords'] = NodeSetting.create({\n      description: 'Max Records',\n      value: 10,\n      type: SettingType.NUMBER,\n    });\n    this.settings['maxRecordsPerSec'] = NodeSetting.create({\n      description: 'Max records/sec limit',\n      value: 11,\n      type: SettingType.NUMBER,\n    });\n    this.settings['saveToDb'] = NodeSetting.create({\n      description: 'Save log to DB',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.addInput('input');\n  }\n\n  onAdded() {\n    super.onAdded();\n    if (this.side == Side.server) this.updateMessPerSec();\n  }\n\n  onAfterSettingsChange(oldSettings) {\n    if (this.side == Side.server) {\n      if (oldSettings.maxRecords != this.settings.maxRecords) {\n        this.removeOldRecords();\n\n        this.sendMessageToDashboardSide({\n          maxRecords: this.settings['maxRecords'].value,\n        });\n      }\n    }\n  }\n\n  onDbReaded() {\n    // invert log\n    let log = [];\n    this.properties['log'].forEach(rec => log.unshift(rec));\n    this.properties['log'] = log;\n  }\n\n  removeOldRecords() {\n    let records = this.properties['log'] || [];\n    let max = this.settings['maxRecords'].value;\n    let del = records.length - max;\n    records.splice(records.length - del, del);\n  }\n\n  updateMessPerSec() {\n    setInterval(() => {\n      if (this.messagesPerSec > this.settings['maxRecordsPerSec'].value) {\n        let dropped = this.messagesPerSec - this.settings['maxRecordsPerSec'].value;\n        let record = { date: Date.now(), value: 'Dropped ' + dropped + ' records (rec/sec limit)' };\n        this.properties['log'].unshift(record);\n        this.sendMessageToDashboardSide({ record: record });\n      }\n\n      this.messagesPerSec = 0;\n    }, 1000);\n  }\n\n  onInputUpdated() {\n    if (!this.inputs[0].link) return;\n\n    let val = this.getInputData(0);\n    this.isRecentlyActive = true;\n\n    this.messagesPerSec++;\n    if (this.messagesPerSec <= this.settings['maxRecordsPerSec'].value) {\n      let record = { date: Date.now(), value: val };\n      if (this.properties['log']) this.properties['log'].unshift(record);\n\n      this.removeOldRecords();\n\n      this.sendMessageToDashboardSide({ record: record });\n\n      // update in db\n      let max = this.settings['maxRecords'].value;\n      if (this.container.db && this.settings['saveToDb'].value) {\n        this.container.db.updateNode(this.id, this.container.id, {\n          $push: { 'properties.log': { $each: [record], $slice: -max } },\n        });\n      }\n    }\n  }\n\n  onGetMessageToServerSide(message) {\n    if (message == 'getLog') {\n      this.sendMessageToDashboardSide({\n        log: this.properties['log'],\n        maxRecords: this.settings['maxRecords'].value,\n      });\n    } else if (message == 'clearLog') {\n      // clear log\n      this.isRecentlyActive = true;\n      this.properties['log'] = [];\n\n      this.sendMessageToDashboardSide({ log: [] });\n\n      // update in db\n      if (this.container.db) {\n        this.container.db.updateNode(this.id, this.container.id, {\n          $unset: { 'properties.log': true },\n        });\n      }\n    }\n  }\n}\n\nContainer.registerNodeType('dashboard/log', UiLogNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 03.03.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport { Container } from '../../container';\nimport { NodeSetting, SettingType } from '../../node-io';\nimport { UiNode } from './ui-node';\nimport { NODE_INFO } from '../../node-info';\n\n// declare let vis;\n// declare let moment;\n// declare let DataSet;\n\nexport class UiChartNode extends UiNode {\n  dataset;\n\n  constructor(container?: Container, id?: number, properties?: any) {\n    super('Chart', 'UiChartNode', properties);\n\n    this.UPDATE_INPUTS_INTERVAL = 100;\n  \n    this.title = NODE_INFO.dashboard.chart.title;\n    this.description = NODE_INFO.dashboard.chart.description;\n   \n    this.properties['log'] = [];\n    this.settings['maxRecords'] = NodeSetting.create({\n      description: 'Max Records',\n      value: 100,\n      type: SettingType.NUMBER,\n    });\n    this.settings['saveToDb'] = NodeSetting.create({\n      description: 'Save data to DB',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['style'] = NodeSetting.create({ description: 'Style', value: 'bars', type: SettingType.STRING });\n    this.settings['autoscroll'] = NodeSetting.create({\n      description: 'Auto scroll',\n      value: 'continuous',\n      type: SettingType.STRING,\n    });\n\n    this.addInput('input');\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    // this.sendIOValuesToEditor();\n    // this.isRecentlyActive = true;\n\n    //add to log\n    let records = this.properties['log'];\n    let record = { x: Date.now(), y: val };\n    records.push(record);\n\n    let max = this.settings['maxRecords'].value;\n    records.splice(0, records.length - max);\n\n    //send to dashboard\n    this.sendMessageToDashboardSide({ record: record });\n\n    //update in db\n    if (this.container.db && this.settings['saveToDb'].value) {\n      this.container.db.updateNode(this.id, this.container.id, {\n        $push: { 'properties.log': { $each: [record], $slice: -max } },\n      });\n    }\n  }\n\n  onGetMessageToServerSide(data) {\n    if (data == 'clear') {\n      this.isRecentlyActive = true;\n      this.properties['log'] = [];\n      this.sendMessageToDashboardSide({ log: [] });\n\n      //update in db\n      if (this.container.db && this.settings['saveToDb'].value) {\n        this.container.db.updateNode(this.id, this.container.id, {\n          $unset: { 'properties.log': true },\n        });\n      }\n    }\n\n    if (data.style) {\n      this.settings['style'].value = data.style;\n      this.sendMessageToDashboardSide({ style: data.style });\n    }\n\n    if (data == 'getLog') {\n      this.sendMessageToDashboardSide({\n        log: this.properties['log'],\n        maxRecords: this.settings['maxRecords'].value,\n      });\n    }\n  }\n\n  // createChart() {\n  //     let that = this;\n\n  //     $('#chart-clear-' + this.id).click(function () {\n  //         that.sendMessageToServerSide({ clear: true });\n  //     });\n\n  //     $('#chart-now-' + this.id).click(function () {\n  //         that.showNow();\n  //     });\n\n  //     $('#chart-all-' + this.id).click(function () {\n  //         that.showAll();\n  //     });\n\n  //     $('#chart-style-' + this.id).click(function () {\n  //         that.changeStyle();\n  //         that.sendMessageToServerSide({ style: that.settings['style'].value });\n  //     });\n\n  //     this.body = document.getElementById('chart-body-' + this.id);\n\n  //     this.options = {\n  //         height: this.CHART_HEIGHT,\n  //         style: 'bar',\n  //         drawPoints: false,\n  //         barChart: { width: 50, align: 'right', sideBySide: false }\n  //     };\n\n  //     this.dataset = new vis.DataSet();\n  //     this.graph2d = new (<any>vis).Graph2d(this.body, this.dataset, this.options);\n\n  //     this.updateChartStyle();\n\n  //     this.showNow();\n\n  //     if (this.properties['log'].length > 0) {\n  //         this.addChartData(this.properties['log']);\n  //     }\n\n  //     this.renderStep();\n\n  // }\n\n  // addChartData(data) {\n  //     this.dataset.add(data);\n\n  //     let max = this.settings['maxRecords'].value;\n  //     let unwanted = this.dataset.length - max;\n  //     if (unwanted > 0) {\n  //         let items = this.dataset.get();\n  //         for (let i = 0; i < unwanted; i++) {\n  //             this.dataset.remove(items[i]);\n  //         }\n  //     }\n  // }\n\n  // renderStep() {\n  //     // move the window (you can think of different strategies).\n  //     let now = vis.moment();\n  //     let range = this.graph2d.getWindow();\n  //     let interval = range.end - range.start;\n  //     let that = this;\n  //     switch (this.settings['autoscroll'].value) {\n  //         case 'continuous':\n  //             // continuously move the window\n  //             this.graph2d.setWindow(now - interval, now, { animation: false });\n  //             requestAnimationFrame(that.renderStep.bind(that));\n  //             break;\n\n  //         case 'discrete':\n  //             this.graph2d.setWindow(now - interval, now, { animation: false });\n  //             setTimeout(that.renderStep.bind(that), 1000);\n  //             break;\n\n  //         case 'none': // 'static'\n  //             // move the window 90% to the left when now is larger than the end of the window\n  //             // if (now > range.end) {\n  //             //     this.graph2d.setWindow(now - 0.1 * interval, now + 0.9 * interval);\n  //             // }\n  //             setTimeout(that.renderStep.bind(that), 1000);\n  //             break;\n  //     }\n  // }\n\n  //     //setOptions cause a bug when switching to dots!!!\n  //     this.graph2d.setOptions(this.options);\n  //     //thats why we need redraw:\n  //     //redrawChart(options);\n\n  // }\n\n  // redrawChart(options, ) {\n  //     let window = this.graph2d.getWindow();\n  //     options.start = window.start;\n  //     options.end = window.end;\n  //     this.graph2d.destroy();\n  //     this.graph2d = new (<any>vis).Graph2d(this.body, this.dataset, options);\n  // }\n\n  // onDashboardGetRequest(req, res) {\n  //     //render log page\n  //     if (req.params[0] == \"/log\") {\n  //         res.render('dashboard/nodes/chart/log', {\n  //             node: this,\n  //             records: this.properties['log'],\n  //             max_records: this.settings['maxRecords'].value\n  //         });\n  //     }\n\n  //     //render chart page\n  //     res.render('dashboard/nodes/chart/index', {\n  //         node: this,\n  //         range_start: req.query.start || Date.now() - 30000,\n  //         range_end: req.query.end || Date.now(),\n  //         autoscroll: req.query.autoscroll || this.settings['autoscroll'].value,\n  //         style: req.query.style || this.settings['style'].value,\n  //         max_records: this.settings['maxRecords'].value\n  //     });\n  // }\n\n  // onEditorApiGetRequest(req, res) {\n  //     //ajax get log\n  //     if (req.params[0] == \"/log\") {\n  //         res.json(this.properties['log']);\n  //     }\n  // }\n\n  // onEditorApiPostRequest(req, res) {\n  //     //ajax get log\n  //     if (req.params[0] == \"/style\") {\n  //         this.settings['style'].value = req.body.style;\n  //         this.sendMessageToDashboardSide({ style: req.body.style });\n  //         res.json(\"ok\");\n  //     }\n  //     if (req.params[0] == \"/clear\") {\n  //         this.isRecentlyActive = true;\n  //         this.properties['log'] = [];\n  //         this.sendMessageToDashboardSide({ clear: true });\n  //         res.json(\"ok\");\n  //     }\n  // }\n}\n\nContainer.registerNodeType('dashboard/chart', UiChartNode);\n","import { Colors, create } from 'logplease';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nconst log = create('node', { color: Colors.Magenta });\n\n// TODO: we don't need this all logic, background does this job\n// Show value inside the debug console\nexport class ConsoleNode extends Node {\n  MAX_MESS_PER_SEC = 11;\n  messagesPerSec = 0;\n  timer: any;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.debug.console.title;\n    this.description = NODE_INFO.debug.console.description;\n    this.addInput('input', Type.ANY);\n  }\n\n  onAdded() {\n    if (this.side == Side.server) this.updateMessPerSec();\n  }\n\n  updateMessPerSec() {\n    let that = this;\n    this.timer = setInterval(function() {\n      if (that.messagesPerSec > that.MAX_MESS_PER_SEC) {\n        let dropped = that.messagesPerSec - that.MAX_MESS_PER_SEC;\n        log.info(\n          'CONSOLE NODE [' +\n            that.container.id +\n            '/' +\n            that.id +\n            ']: dropped ' +\n            dropped +\n            ' messages (data rate limitation)',\n        );\n        that.sendMessageToEditorSide({ dropped: dropped });\n      }\n\n      that.messagesPerSec = 0;\n    }, 1000);\n  }\n\n  onInputUpdated() {\n    if (!this.inputs[0].link) return;\n\n    let val = this.getInputData(0);\n    this.isRecentlyActive = true;\n\n    this.messagesPerSec++;\n    if (this.messagesPerSec <= this.MAX_MESS_PER_SEC) {\n      log.info('CONSOLE NODE [' + this.container.id + '/' + this.id + ']: ' + val);\n      this.sendMessageToEditorSide({ value: val });\n    }\n  }\n\n  onRemoved() {\n    if (this.timer) clearInterval(this.timer);\n  }\n\n  onGetMessageToEditorSide(data) {\n    if (data.value != null) log.info('CONSOLE NODE [' + this.container.id + '/' + this.id + ']: ' + data.value);\n\n    if (data.dropped)\n      log.info(\n        'CONSOLE NODE [' +\n          this.container.id +\n          '/' +\n          this.id +\n          ']: dropped ' +\n          data.dropped +\n          ' messages (data rate limitation)',\n      );\n  }\n}\nContainer.registerNodeType('debug/console', ConsoleNode);\n","import { Container } from '../../container';\nimport { Node, NodeState } from '../../node';\nimport { NODE_INFO } from '../../node-info';\n\nclass NotesNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.debug.comments.title;\n    this.description = NODE_INFO.debug.comments.description;\n  }\n\n  onAdded() {\n    this.nodeColour();\n  }\n\n  nodeColour() {\n    this.setNodeState(NodeState.INFO);\n  }\n}\nContainer.registerNodeType('debug/comments', NotesNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\n// TODO: we don't need this all logic, background does this job\n// Watch a value in the editor\nexport class WatchNode extends Node {\n\n  UPDATE_INTERVAL: number\n  timer: any;\n  lastData: any;\n  dataUpdated = false;\n\n  constructor() {\n    super();\n\n    this.UPDATE_INTERVAL = 300;\n\n    this.title = NODE_INFO.debug.watch.title;\n    this.description = NODE_INFO.debug.watch.description;\n    this.addInput('input', Type.ANY);\n  }\n\n  onAdded() {\n    if (this.side == Side.server) this.startSending();\n  }\n\n  startSending() {\n    let that = this;\n    this.timer = setInterval(function() {\n      if (that.dataUpdated) {\n        that.dataUpdated = false;\n        that.sendMessageToEditorSide({ value: that.lastData });\n      }\n    }, this.UPDATE_INTERVAL);\n  }\n\n  onInputUpdated() {\n    this.lastData = this.getInputData(0);\n    this.dataUpdated = true;\n  }\n\n  onRemoved() {\n    if (this.timer) clearInterval(this.timer);\n  }\n\n  onGetMessageToEditorSide(data) {\n    this.lastData = data.value;\n    this.showValueOnInput(data.value);\n  }\n\n  showValueOnInput(value: any) {\n    // show the current value\n    this.inputs[0].label = value;\n    this.setDirtyCanvas(true, false);\n  }\n\n  updateInputsLabels() {\n    this.showValueOnInput(this.lastData);\n  }\n}\nContainer.registerNodeType('debug/watch', WatchNode);\n","import { Container, ContainerRegistry } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport { Link, SlimNodeIO } from '../../node-link';\n\nexport class LinkErrorCheckNode extends Node {\n  lastTrigger;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.error['link-check'].title;\n    this.description = NODE_INFO.error['link-check'].description;\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('errorsCount', Type.NUMBER);\n    this.addOutput('errorsJSON', Type.STRING);\n    //this.addOutput('unresolvedErrors', Type.NUMBER);\n    //this.addOutput('progress', Type.STRING);\n\n    this.settings['allContainer'] = NodeSetting.create({\n                                                         description: 'Search All Containers?',\n                                                         value: true,\n                                                         type: SettingType.BOOLEAN,\n                                                       });\n    this.settings['subContainers'] = NodeSetting.create({\n                                                          description: 'Search Sub-Containers?',\n                                                          value: true,\n                                                          type: SettingType.BOOLEAN,\n                                                        });\n    this.setSettingsConfig({\n                             groups: [],\n                             conditions: {\n                               subContainers: setting => {\n                                 return !setting['allContainer'].value;\n                               },\n                             },\n                           });\n\n  }\n\n  init() {\n  }\n\n  onCreated() {\n  }\n\n  onAdded() {\n    this.properties['errors'] = {};\n    this.properties['errorsCount'] = 0;\n    this.lastTrigger = false;\n    this.setOutputData(0, 0);\n    this.setOutputData(1, '{}');\n    //this.setOutputData(2, null);\n    //this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    let trigger = this.getInputData(0);\n    if (trigger && !this.lastTrigger) {\n      //console.log('THIS', this)\n      //console.log('this.cid', this.cid)\n      //console.log('CONTAINERS', Container.containers)\n      this.properties['errors'] = {};\n      this.properties['errorsCount'] = 0;\n      const searchThisContainer = this.settings['allContainer'].value ? ContainerRegistry.instance().rootContainer()\n                                                                      : ContainerRegistry.instance().get(this.cid);\n      const searchSubContainers = this.settings['allContainer'].value ? true : this.settings['subContainers'].value;\n      this.checkLinksForInputOutputData(searchThisContainer, searchSubContainers);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  onAfterSettingsChange() {\n  }\n\n  checkLinksForInputOutputData(searchContainer, includeSubContainers = false, isTopRecursion = true) {\n    //console.log('SEARCH CONTAINER', searchContainer)\n    const currentContainer = searchContainer.id;\n    let containers = [];\n    let errors = 0;\n    const nodeList = searchContainer.getAllNodes();\n    const numNodes = nodeList.length;\n    //console.log('numNodes', numNodes)\n    //let currentNodeNum = 0;\n    for (let x = 0; x < numNodes; x++) {\n      //currentNodeNum++;\n      //this.setOutputData(2, `${currentNodeNum}/${numNodes}`);\n      console.log(x, nodeList[x]);\n      if (nodeList[x].isContainer) {\n        //console.log('FOUND CONTAINER', nodeList[x]);\n        containers.push(nodeList[x].id);\n        continue;\n      }\n      //let node: Node = this.container._nodes[`${this.inputs[i].link.target_node_id}`];\n      const node: Node = searchContainer.getNodeById(Number(nodeList[x]['id']));\n      //console.log('node', x, node);\n      if (!node.hasOwnProperty('outputs')) continue;\n\n      let outputs = node.outputs;\n      let outputLinks = [];\n      for (const output in outputs) {\n        if (outputs[output].links != null) {\n          console.log('links', output, outputs[output].links);\n          outputLinks.push([output, outputs[output].data, outputs[output].links.map(l => Link.create(l))]);\n        }\n      }\n      console.log('outputLinks', outputLinks);\n\n      outputLinks.forEach(linkInfo => {\n        console.log('linkInfo', linkInfo);\n        linkInfo[2].map(l => Link.create(l)).forEach((link: SlimNodeIO) => {\n          try {\n            let error = false;\n            const receiver: Node = searchContainer.getNodeById(link.nodeId);\n            console.log('receiver.inputs', receiver.inputs);\n            if (receiver.inputs[link.ioId].data != linkInfo[1]) {\n              console.log('LINK ERROR: output data does not match input data.');\n              error = true;\n            }\n            if (receiver.inputs[link.ioId].link.slot != linkInfo[0] &&\n                receiver.inputs[link.ioId].link.nodeId != nodeList[x]['id']) {\n              console.log('LINK ERROR: output link reference does not match input link reference.');\n              error = true;\n            }\n            if (error) {\n              errors++;\n              console.log('ERROR');\n              if (!this.properties['errors'].hasOwnProperty(\n                currentContainer)) {\n                this.properties['errors'][currentContainer] = {\n                  containerName: searchContainer.name,\n                  containerErrors: {},\n                };\n              }\n              if (!this.properties['errors'][currentContainer]['containerErrors'].hasOwnProperty(\n                nodeList[x]['id'])) {\n                this.properties['errors'][currentContainer]['containerErrors'][nodeList[x]['id']] = {\n                  nodeName: nodeList[x].name,\n                  nodeErrors: {},\n                };\n              }\n              this.properties['errors'][currentContainer]['containerErrors'][nodeList[x]['id']]['nodeErrors'][linkInfo[0]] = {\n                outputName: node.outputs[linkInfo[0]].name,\n                outputNum: linkInfo[0],\n                inputNode: receiver.id,\n                inputNodeName: receiver.name,\n                inputNodeSlot: receiver.inputs[link.ioId].link.slot,\n              };\n              // CALL onInputUpdated() ON RECEIVER NODE.  I DONT KNOW HOW TO DO IT.\n            }\n          } catch {\n            errors++;\n            console.log('UNKNOWN ERROR');\n            if (!this.properties['errors'].hasOwnProperty(\n              currentContainer)) {\n              this.properties['errors'][currentContainer] = {\n                containerName: searchContainer.name,\n                containerErrors: {},\n              };\n            }\n            if (!this.properties['errors'][currentContainer]['containerErrors'].hasOwnProperty(\n              nodeList[x]['id'])) {\n              this.properties['errors'][currentContainer]['containerErrors'][nodeList[x]['id']] = {\n                nodeName: nodeList[x].name,\n                nodeErrors: {},\n              };\n            }\n          }\n        });\n      });\n    }\n\n    this.properties['errorsCount'] += errors;\n    if (this.properties['errors'].hasOwnProperty(\n      currentContainer)) {\n      this.properties['errors'][currentContainer]['errorsCount'] = errors;\n    }\n    //console.log('containersList', containers);\n    if (includeSubContainers) {\n      containers.forEach(containerNum => {\n        //console.log('containerNum', typeof containerNum, containerNum);\n        this.checkLinksForInputOutputData(ContainerRegistry.instance().get(containerNum), includeSubContainers, false);\n      });\n    }\n    if (isTopRecursion) {\n      this.setOutputData(0, this.properties['errorsCount']);\n      this.properties['errors']['totalErrors'] = this.properties['errorsCount'];\n      this.setOutputData(1, JSON.stringify(this.properties['errors']));\n    }\n  }\n\n}\n\nContainer.registerNodeType('error/link-check', LinkErrorCheckNode);\n","import { Container, ContainerRegistry } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nexport class OutputErrorCheckNode extends Node {\n  lastTrigger;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.error[\"output-check\"].title;\n    this.description = NODE_INFO.error[\"output-check\"].description;\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('errorsCount', Type.NUMBER);\n    this.addOutput('errorsJSON', Type.STRING);\n    //this.addOutput('unresolvedErrors', Type.NUMBER);\n    //this.addOutput('progress', Type.STRING);\n\n    this.settings['allContainer'] = NodeSetting.create({\n      description: \"Search All Containers?\",\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['subContainers'] = NodeSetting.create({\n      description: \"Search Sub-Containers?\",\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n    this.setSettingsConfig({\n      groups: [],\n      conditions: {\n        subContainers: setting => {\n          return !setting['allContainer'].value;\n        },\n      },\n    });\n\n  }\n\n  init() {\n  }\n\n  onCreated() {\n  }\n\n  onAdded() {\n    this.properties['errors'] = {};\n    this.properties['errorsCount'] = 0;\n    this.lastTrigger = false;\n    this.setOutputData(0, 0);\n    this.setOutputData(1, '{}');\n    //this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    let trigger = this.getInputData(0);\n    if (trigger && !this.lastTrigger) {\n      //console.log('THIS', this)\n      //console.log('this.cid', this.cid)\n      //console.log('CONTAINERS', Container.containers)\n      this.properties['errors'] = {};\n      this.properties['errorsCount'] = 0;\n      const searchThisContainer = this.settings['allContainer'].value ? ContainerRegistry.instance().rootContainer() : ContainerRegistry.instance().get(this.cid);\n      const searchSubContainers = this.settings['allContainer'].value ? true : this.settings['subContainers'].value;\n      this.checkForOutputsWithNoData(searchThisContainer, searchSubContainers);\n\n    }\n    this.lastTrigger = trigger;\n  }\n\n  onAfterSettingsChange() {\n  }\n\n  checkForOutputsWithNoData(searchContainer, includeSubContainers = false, isTopRecursion = true){\n    //console.log('SEARCH CONTAINER', searchContainer)\n    const currentContainer = searchContainer.id;\n    let containers = [];\n    let errors = 0;\n    const nodeList = searchContainer.getAllNodes();\n    const numNodes = nodeList.length;\n    //console.log('numNodes', numNodes)\n    //let currentNodeNum = 0;\n    for(let x = 0; x < numNodes; x++){\n      //currentNodeNum++;\n      //this.setOutputData(2, `${currentNodeNum}/${numNodes}`);\n      //console.log(x, nodeList[x])\n      if(nodeList[x].isContainer){\n        //console.log('FOUND CONTAINER', nodeList[x]);\n        containers.push(nodeList[x].id)\n        continue;\n      } \n      //let node: Node = this.container._nodes[`${this.inputs[i].link.target_node_id}`];\n      const node: Node = searchContainer.getNodeById(Number(nodeList[x]['id']));\n      const outputs = node.outputs;\n      for (const output in outputs){\n        //console.log('output', output, outputs[output])\n        if(!outputs[output].hasOwnProperty('data') || outputs[output].data === undefined) {\n          errors++;\n          //console.log('ERROR');\n          if(!this.properties['errors'].hasOwnProperty(currentContainer)) this.properties['errors'][currentContainer] = {containerName: searchContainer.name, containerErrors: {}};\n          if(!this.properties['errors'][currentContainer]['containerErrors'].hasOwnProperty(nodeList[x]['id'])) this.properties['errors'][currentContainer]['containerErrors'][nodeList[x]['id']] = {nodeName: nodeList[x].name, nodeErrors: {}};\n          this.properties['errors'][currentContainer]['containerErrors'][nodeList[x]['id']]['nodeErrors'][output] = {outputName: outputs[output].name, outputNum: output};\n        }\n      }\n    }\n    this.properties['errorsCount'] += errors;\n    if (this.properties['errors'].hasOwnProperty(currentContainer)) this.properties['errors'][currentContainer]['errorsCount'] = errors;\n    //console.log('containersList', containers);\n    if(includeSubContainers) {\n      containers.forEach(containerNum => {\n        //console.log('containerNum', typeof containerNum, containerNum);\n        this.checkForOutputsWithNoData(ContainerRegistry.instance().get(containerNum), includeSubContainers, false);\n      })\n    }\n    if(isTopRecursion) {\n      this.setOutputData(0, this.properties['errorsCount']);\n      this.properties['errors']['totalErrors'] = this.properties['errorsCount'];\n      this.setOutputData(1, JSON.stringify(this.properties['errors']));\n    }\n  }\n\n}\nContainer.registerNodeType('error/output-check', OutputErrorCheckNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersOnlyTrueNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.filter[\"only-true\"].title;\n    this.description = NODE_INFO.filter[\"only-true\"].description;\n\n    this.addInput('input', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n  }\n\n  onAdded(){\n    this.setOutputData(0, null);\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    if (this.getInputData(0) === true) this.setOutputData(0, true);\n  }\n}\nContainer.registerNodeType('filter/only-true', FiltersOnlyTrueNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersOnlyFalseNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.filter[\"only-false\"].title;\n    this.description = NODE_INFO.filter[\"only-false\"].description;\n\n    this.addInput('input', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n  }\n\n  onAdded(){\n    this.setOutputData(0, null);\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    if (this.getInputData(0) === false) this.setOutputData(0, false);\n  }\n}\nContainer.registerNodeType('filter/only-false', FiltersOnlyFalseNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersOnlyFromRangeNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.filter[\"only-between\"].title;\n    this.description = NODE_INFO.filter[\"only-between\"].description;\n\n    this.addInput('value', Type.NUMBER);\n    this.addInputWithSettings('min', Type.NUMBER, 0, 'min', false);\n    this.addInputWithSettings('max', Type.NUMBER, 10, 'max', false);\n    this.addOutput('value', Type.NUMBER);\n    this.properties['value'];\n  }\n\n  onAdded(){\n    this.setOutputData(0, this.properties['value'] || null);\n    this.onInputUpdated();\n  }\n\n  onAfterSettingsChange(){\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const val = this.getInputData(0);\n    const min = this.getInputData(1);\n    const max = this.getInputData(2);\n\n    if (val == null || min == null || max == null) {\n      this.setOutputData(0, null);\n    } else if (val >= min && val <= max) {\n      this.setOutputData(0, val);\n      this.properties['value'] = val;\n      this.persistProperties(false, true);\n    }\n  }\n}\nContainer.registerNodeType('filter/only-between', FiltersOnlyFromRangeNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersOnlyGreaterNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.filter[\"only-greater\"].title;\n    this.description = NODE_INFO.filter[\"only-greater\"].description;\n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('threshold', Type.NUMBER, 0, 'threshold', false);\n    this.addOutput('output', Type.NUMBER);\n    this.properties['value'];\n  }\n\n  onAdded(){\n    this.setOutputData(0, this.properties['value'] || null);\n    this.onInputUpdated();\n  }\n\n  onAfterSettingsChange(){\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    let threshold = this.getInputData(1);\n    if (val == null || threshold == null) {\n      this.setOutputData(0, null);\n    } else if (val > threshold) {\n      this.setOutputData(0, val);\n      this.properties['value'] = val;\n      this.persistProperties(false, true);\n    }\n  }\n}\nContainer.registerNodeType('filter/only-greater', FiltersOnlyGreaterNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersOnlyLowerNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.filter[\"only-lower\"].title;\n    this.description = NODE_INFO.filter[\"only-lower\"].description;\n\n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('threshold', Type.NUMBER, 0, 'threshold', false);\n    this.addOutput('output', Type.NUMBER);\n    this.properties['value'];\n  }\n\n  onAdded(){\n    this.setOutputData(0, this.properties['value'] || null);\n    this.onInputUpdated();\n  }\n\n  onAfterSettingsChange(){\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    let threshold = this.getInputData(1);\n    if (val == null || threshold == null) {\n      this.setOutputData(0, null);\n    } else if (val < threshold) {\n      this.setOutputData(0, val);\n      this.properties['value'] = val;\n      this.persistProperties(false, true);\n    }\n  }\n}\nContainer.registerNodeType('filter/only-lower', FiltersOnlyLowerNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersOnlyEqualNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.filter[\"only-equal\"].title;\n    this.description = NODE_INFO.filter[\"only-equal\"].description;\n\n    this.addInput('input', Type.ANY);\n    this.addInputWithSettings('match', Type.ANY, '', 'Match Value');\n    this.addOutput('output', Type.ANY);\n    this.properties['value'];\n  }\n\n  onAdded(){\n    this.setOutputData(0, this.properties['value'] || null);\n    this.onInputUpdated();\n  }\n\n  onAfterSettingsChange(){\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    let match = this.getInputData(1);\n\n    let jsonEqual = false;\n    if (typeof val === 'string' && typeof match === 'string') {\n      try {\n        val = JSON.stringify(JSON.parse(val));\n        match = JSON.stringify(JSON.parse(match));\n        jsonEqual = val === match;\n      } catch (e) {}\n    } \n    else if (typeof val === 'object' && typeof match === 'object') {\n      try {\n        val = JSON.stringify(val);\n        match = JSON.stringify(match);\n        jsonEqual = val === match;\n      } catch (e) {}\n    }\n    if(!jsonEqual){\n      val = (val || '').toString(); // making string null i.e `''` and other `null` same\n      if (val == 'false') val = false;\n      else if (val == 'true') val = true;\n\n      match = (this.getInputData(1) || '').toString();\n      if (match == 'false') match = false;\n      else if (match == 'true') match = true;\n    }\n      \n    if (jsonEqual || val == match) {\n      this.setOutputData(0, val);\n      this.properties['value'] = val;\n      this.persistProperties(false, true);\n    }\n  }\n}\nContainer.registerNodeType('filter/only-equal', FiltersOnlyEqualNode);\n","import { isNotNull } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersPreventNullNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.filter[\"prevent-null\"].title;\n    this.description = NODE_INFO.filter[\"prevent-null\"].description;\n\n    this.addInput('input');\n    this.addOutput('output');\n    this.properties['value'];\n  }\n\n  onAdded(){\n    this.setOutputData(0, this.properties['value']);\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    if (isNotNull(val) && val !== '') {\n      this.setOutputData(0, val);\n      this.properties['value'] = val;\n      this.persistProperties(false, true);\n    }\n  }\n}\nContainer.registerNodeType('filter/prevent-null', FiltersPreventNullNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersPreventEqualNode extends Node {\n  constructor() {\n    super();\n    \n    this.title = NODE_INFO.filter[\"prevent-equal\"].title;\n    this.description = NODE_INFO.filter[\"prevent-equal\"].description;\n\n    this.addInput('input', Type.ANY);\n    this.addInputWithSettings('match', Type.ANY, null, 'Match Value');\n    this.addOutput('output', Type.ANY);\n    this.properties['value'];\n  }\n\n  onAdded(){\n    this.setOutputData(0, this.properties['value'] || null);\n    this.onInputUpdated();\n  }\n\n  onAfterSettingsChange(){\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    let match = this.getInputData(1);\n\n    let jsonEqual = false;\n    if (typeof val === 'string' && typeof match === 'string') {\n      try {\n        val = JSON.stringify(JSON.parse(val));\n        match = JSON.stringify(JSON.parse(match));\n        jsonEqual = val === match;\n      } catch (e) {}\n    } \n    else if (typeof val === 'object' && typeof match === 'object') {\n      try {\n        val = JSON.stringify(val);\n        match = JSON.stringify(match);\n        jsonEqual = val === match;\n      } catch (e) {}\n    }\n    if(!jsonEqual){\n      val = (val || '').toString(); // making string null i.e `''` and other `null` same\n      if (val == 'false') val = false;\n      else if (val == 'true') val = true;\n\n      match = (this.getInputData(1) || '').toString();\n      if (match == 'false') match = false;\n      else if (match == 'true') match = true;\n    }\n      \n    if (!jsonEqual && val != match) {\n      this.setOutputData(0, val);\n      this.properties['value'] = val;\n      this.persistProperties(false, true);\n    }\n  }\n}\nContainer.registerNodeType('filter/prevent-equal', FiltersPreventEqualNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersPreventDuplicatesNode extends Node {\n  lastVal: any;\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.filter[\"prevent-duplicates\"].title;\n    this.description = NODE_INFO.filter[\"prevent-duplicates\"].description;\n\n    this.addInput('input');\n    this.addOutput('output');\n    this.properties['value'];\n  }\n\n  onAdded(){\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val === '') val = null;\n    let jsonEqual = false;\n\n    if (typeof val === 'string') {\n      try {\n        val = JSON.stringify(JSON.parse(val));\n        jsonEqual = val === this.lastVal;\n      } catch (e) {}\n    } \n    else if (typeof val === 'object') {\n      try {\n        val = JSON.stringify(val);\n        jsonEqual = val === this.lastVal;\n      } catch (e) {}\n    }\n    if (jsonEqual || this.lastVal == val) return;\n\n    this.lastVal = val;\n    this.setOutputData(0, val, true);\n    this.properties['value'] = val;\n    this.persistProperties(false, true);\n  }\n}\nContainer.registerNodeType('filter/prevent-duplicates', FiltersPreventDuplicatesNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nconst moment = require('moment-timezone');\n\nclass AnyDataStoreNode extends Node {\n  constructor() {\n    super();\n \n    this.title = NODE_INFO.history[\"data-store\"].title;\n    this.description = NODE_INFO.history[\"data-store\"].description;\n   \n    this.addInput('input', Type.ANY);\n    this.addInput('clear', Type.BOOLEAN);\n    this.addOutput('output', Type.ANY);\n    this.addOutput('storedCount', Type.NUMBER);\n\n    this.settings['time-conversation-enable'] = NodeSetting.create({\n      description: 'Timestamp in system timezone?',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['storage-limit'] = NodeSetting.create({\n      description: 'Storage Limit (Max 50)',\n      value: 25,\n      type: SettingType.NUMBER,\n    });\n    this.settings['date-iso'] = NodeSetting.create({\n      description: 'Typestamp Format',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'YYYY-MM-DD HH:mm:ss TZ (ISO8601)' },\n          { value: 1, text: 'YYYY-MM-DD HH:mm:ss' },\n          { value: 2, text: 'MM-DD-YYYY HH:mm:ss' },\n          { value: 3, text: 'DD-MM-YYYY HH:mm:ss' },\n          { value: 4, text: 'DAY, Month DD, YYYY HH:MM AM/PM' },\n          { value: 5, text: 'Month DD, YYYY HH:MM AM/PM' },\n          { value: 6, text: 'Unix timestamp in Milliseconds' },\n        ],\n      },\n      value: 0,\n    });\n    this.settings['outputFormat'] = NodeSetting.create({\n      description: 'Output Format',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'Array', text: 'Array' },\n          { value: 'CSV', text: 'CSV' },\n          { value: 'JSON', text: 'JSON' },\n        ],\n      },\n      value: 'Array',\n    });\n    this.settings['pointName'] = NodeSetting.create({\n      description: 'Point Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n    this.settings['minuteRoundValue'] = NodeSetting.create({\n      description: 'Round minutes up in increments of',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    //this.settings['inputs'] = NodeSetting.create({ description: 'Tag Count', value: 0, type: SettingType.NUMBER });\n    this.setSettingsConfig({\n      conditions: {\n        pointName: setting => {\n          return setting['outputFormat'].value != 'Array';\n        },\n      },\n    });\n  }\n\n  onCreated() {\n    this.properties['historyLog'] = [];\n  }\n\n  onAdded() {\n    this.setOutputData(0, this.properties['historyLog']);\n    this.setOutputData(1, this.properties['historyLog'] ? this.properties['historyLog'].length : 0);\n  }\n\n  nearestFutureMinutes(interval, someMoment) {\n    const roundedMinutes = Math.ceil(someMoment.minute() / interval) * interval;\n    return someMoment\n      .clone()\n      .minute(roundedMinutes)\n      .second(0);\n  }\n\n  formatOutputs() {\n    // Format Output based on settings\n    // System Timezone or UTC based on settings\n    const timezone = this.settings['time-conversation-enable'].value\n      ? Intl.DateTimeFormat().resolvedOptions().timeZone\n      : 'Etc/UTC';\n    let dateTz = null;\n    const pointName = this.settings['pointName'].value;\n    let timeFormatedArray = this.properties['historyLog'].map(entry => {\n      return entry;\n    });\n    timeFormatedArray = timeFormatedArray.reverse().map(entry => {\n      switch (this.settings['date-iso'].value) {\n        case 0:\n          dateTz = moment(entry.timestamp)\n            .tz(timezone)\n            .format();\n          break;\n        case 1:\n          dateTz = moment(entry.timestamp)\n            .tz(timezone)\n            .format('YYYY-MM-DD HH:mm:ss');\n          break;\n        case 2:\n          dateTz = moment(entry.timestamp)\n            .tz(timezone)\n            .format('MM-DD-YYYY HH:mm:ss');\n          break;\n        case 3:\n          dateTz = moment(entry.timestamp)\n            .tz(timezone)\n            .format('DD-MM-YYYY HH:mm:ss');\n          break;\n        case 4:\n          dateTz = moment(entry.timestamp)\n            .tz(timezone)\n            .format('LLLL');\n          break;\n        case 5:\n          dateTz = moment(entry.timestamp)\n            .tz(timezone)\n            .format('LLL');\n          break;\n        case 6:\n          dateTz = moment(entry.timestamp)\n            .tz(timezone)\n            .valueOf();\n          break;\n        default:\n          dateTz = moment(entry.timestamp)\n            .tz(timezone)\n            .format();\n      }\n      return {\n        payload: entry.payload,\n        timestamp: dateTz,\n      };\n    });\n    switch (this.settings['outputFormat'].value) {\n      case 'Array':\n        return timeFormatedArray;\n      case 'CSV':\n        let csvString = `name, timestamp, payload\\n`;\n        timeFormatedArray.forEach(log => {\n          csvString += `${pointName}, ${log.timestamp}, ${log.payload} \\n`;\n        });\n        return csvString;\n      case 'JSON':\n        return JSON.stringify({ [pointName]: timeFormatedArray });\n    }\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return; // only execute on server\n    if (this.getInputData(1) && this.inputs[1].updated) {\n      this.properties['historyLog'] = []; // clear data if required\n      this.setOutputData(0, this.properties['historyLog'].reverse());\n      this.setOutputData(1, this.properties['historyLog'].length);\n    }\n    if (this.getInputData(0) == null || !this.inputs[0].updated) return;\n    // cap the amount of data that can be stored\n    const storageLimit = Utils.clamp(this.settings['storage-limit'].value, 0, 50);\n    // round the time to the nearest min. For example 15min. 1:00, 1:15\n    const minuteRound = Utils.clamp(this.settings['minuteRoundValue'].value, 0, 60);\n    const now = minuteRound ? TimeUtils.nearestFutureMinutes(minuteRound, moment()) : moment();\n\n    // object data\n    let msg = {\n      payload: this.getInputData(0),\n      timestamp: now._d,\n    };\n    // build an object\n    this.properties['historyLog'].push(msg);\n    while (this.properties['historyLog'].length > storageLimit) {\n      this.properties['historyLog'].shift();\n    }\n\n    this.persistProperties(true, true);\n\n    // Format Output based on settings\n    const newObj = this.formatOutputs() || [];\n    this.setOutputData(0, newObj);\n    this.setOutputData(1, this.properties['historyLog'].length);\n  }\n\n  onAfterSettingsChange() {\n    this.outputs[0].name = `output (${this.settings['outputFormat'].value})`;\n    this.broadcastOutputsToClients();\n    const newObj = this.formatOutputs() || [];\n    this.setOutputData(0, newObj);\n    this.setOutputData(1, this.properties['historyLog'].length);\n  }\n}\nContainer.registerNodeType('history/data-store', AnyDataStoreNode);\n","import config from '../../../config';\nimport { isNull } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nlet moment = require('moment-timezone');\nconst Influx = require('influx');\n\nclass InfluxDBNode extends Node {\n  inName: number = 0;\n  inJsonInput: number = 1;\n  outError: number = 0;\n  outLastExport: number = 1;\n  outMsg: number = 2;\n  client;\n  constructor() {\n    super();\n    this.title = NODE_INFO.history[\"influx-db\"].title;\n    this.description = NODE_INFO.history[\"influx-db\"].description;\n    this.addInput('[name]', Type.STRING);\n    this.addInput('json-input', Type.JSON);\n    this.addOutput('error', Type.BOOLEAN);\n    this.addOutput('outLastExport', Type.STRING);\n    this.addOutput('outMsg', Type.STRING);\n    this.settings['enable'] = NodeSetting.create({ description: 'Enable', value: false, type: SettingType.BOOLEAN });\n    this.settings['useEnv'] = NodeSetting.create({ description: 'Dont use env settings', value: false, type: SettingType.BOOLEAN });\n    this.settings['host'] = NodeSetting.create({ description: 'Host', value: '0.0.0.0', type: SettingType.STRING });\n    this.settings['port'] = NodeSetting.create({ description: 'Port', value: '8086', type: SettingType.STRING });\n    this.settings['authentication'] = NodeSetting.create({\n      description: 'Use Authentication',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['user'] = NodeSetting.create({ description: 'Username', value: '', type: SettingType.STRING });\n    this.settings['password'] = NodeSetting.create({ description: 'Password', value: '', type: SettingType.STRING });\n    this.settings['databaseName'] = NodeSetting.create({\n      description: 'Database Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n    this.setSettingsConfig({\n      groups: [\n        { host: { weight: 3 }, port: { weight: 1 } },\n        { user: {}, password: {} },\n        { period: { weight: 2 }, periodUnits: {} },\n      ],\n      conditions: {\n        host: setting => {\n          return !!setting['useEnv'].value;\n        },\n        port: setting => {\n          return !!setting['useEnv'].value;\n        },\n        authentication: setting => {\n          return !!setting['useEnv'].value;\n        },\n        databaseName: setting => {\n          return !!setting['useEnv'].value;\n        },\n        user: setting => {\n          return !!setting['authentication'].value;\n        },\n        password: setting => {\n          return !!setting['authentication'].value;\n        },\n      },\n    });\n  }\n  onAdded() {\n    this.createClient();\n  }\n\n  createClient() {\n    let { protocol, host, port, databaseName, username, password } = config.influxDb;\n    if (this.settings['useEnv'].value) {\n      // dont use env\n      host = this.settings['host'].value;\n      port = this.settings['port'].value;\n      this.client = new Influx.InfluxDB({\n        host: host || 'localhost',\n        port: +(port || 8086),\n        protocol: 'http',\n        database: this.settings['databaseName'].value || 'undefined',\n        username: this.settings['authentication'].value ? this.settings['user'].value : '',\n        password: this.settings['authentication'].value ? this.settings['password'].value : '',\n      });\n    } else {\n      // use use env\n      this.client = new Influx.InfluxDB({\n        host,\n        port: +port,\n        protocol: protocol === 'https' ? 'https' : 'http',\n        database: databaseName,\n        username,\n        password,\n      });\n    }\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return; // only execute on server\n    if (!this.client) return;\n    if (!this.settings['enable'].value) {\n      this.setOutputData(this.outMsg, `INFLUX-DB NODE: not not enabled`, true);\n      return;\n    }\n\n    // update node name\n    if (this.inputs[0].updated) {\n      let nodeName = this.getInputData(this.inName);\n      if (!isNull(nodeName)) {\n        this.name = nodeName;\n        this.broadcastNameToClients();\n      }\n    }\n\n    let input = this.getInputData(this.inJsonInput);\n    if (isNull(input)) return;\n    const hasMeasurement = input.hasOwnProperty('measurement');\n    const hasMeasurementTags = input.hasOwnProperty('tags');\n    const hasMeasurementFields = input.hasOwnProperty('fields');\n\n    if (isNull(input.tags)) {\n      this.setOutputData(this.outError, false, true);\n      this.setOutputData(this.outMsg, `!tags! is empty,`, true);\n      return;\n    }\n    if (isNull(input.measurement)) {\n      this.setOutputData(this.outError, false, true);\n      this.setOutputData(this.outMsg, `!measurement! is empty,`, true);\n      return;\n    }\n    if (isNull(input.fields)) {\n      this.setOutputData(this.outError, false, true);\n      this.setOutputData(this.outMsg, `!fields! is empty,`, true);\n      return;\n    }\n    if (hasMeasurement && hasMeasurementTags && hasMeasurementFields) {\n      this.setOutputData(this.outError, false, true);\n      this.setOutputData(this.outLastExport, moment().format());\n      this.setOutputData(this.outMsg, `influx write to DB`, true);\n\n      Object.keys(input.tags).forEach(key => {\n        if (!input.tags[key]) {\n          delete input.tags[key];\n        }\n      });\n      this.client.writePoints([input]).catch(err => {\n        this.debugInfo(`INFLUX-DB NODE: error on influx write, ${err}`);\n        this.setOutputData(this.outError, true, true);\n        this.setOutputData(this.outMsg, `error on influx write, ${err}`, true);\n      });\n    } else {\n      this.debugInfo(`INFLUX-DB NODE: input.hasOwnProperty is missing`);\n      this.setOutputData(this.outError, true, true);\n      this.setOutputData(this.outMsg, `input.hasOwnProperty is missing`, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return; // only execute on server\n    this.createClient();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('history/influx-db', InfluxDBNode);\n","import config from '../../../config';\nimport { isNull } from '../../../utils/helper';\nimport { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport PlatformDataSource from '../../../database/datasource/PlatformDataSource';\n\nlet moment = require('moment-timezone');\nconst {InfluxDB, Point, HttpError} = require('@influxdata/influxdb-client');\nconst {SetupAPI} = require('@influxdata/influxdb-client-apis')\n\nclass InfluxDB2Node extends Node {\n  inEnable: number = 0;\n  inJsonInput: number = 1;\n  outError: number = 0;\n  outLastExport: number = 1;\n  outMsg: number = 2;\n  client;\n  lastJSON;\n  constructor() {\n    super();\n    this.title = NODE_INFO.history[\"influx-db-2\"].title;\n    this.description = NODE_INFO.history[\"influx-db-2\"].description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, false, 'Enable');\n    this.addInput('json-input', Type.JSON);\n    this.addOutput('error', Type.BOOLEAN);\n    this.addOutput('outLastExport', Type.STRING);\n    this.addOutput('outMsg', Type.STRING);\n    this.settings['useDefaultTags'] = NodeSetting.create({ description: 'useDefaultTags', value: false, type: SettingType.BOOLEAN });\n    this.settings['dontUseEnv'] = NodeSetting.create({ description: 'Dont use env settings', value: false, type: SettingType.BOOLEAN });\n    this.settings['url'] = NodeSetting.create({ description: 'URL', value: '', type: SettingType.STRING });\n    this.settings['token'] = NodeSetting.create({ description: 'Token', value: '', type: SettingType.STRING });\n    this.settings['org'] = NodeSetting.create({ description: 'Org', value: '', type: SettingType.STRING });\n    this.settings['bucket'] = NodeSetting.create({ description: 'Bucket', value: '', type: SettingType.STRING });\n\n    this.setSettingsConfig({\n      groups: [\n        //{ host: { weight: 3 }, port: { weight: 1 } },\n        //{ user: {}, password: {} },\n        { period: { weight: 2 }, periodUnits: {} },\n      ],\n      conditions: {\n        url: setting => {\n          return !!setting['dontUseEnv'].value;\n        },\n        token: setting => {\n          return !!setting['dontUseEnv'].value;\n        },\n        org: setting => {\n          return !!setting['dontUseEnv'].value;\n        },\n        bucket: setting => {\n          return !!setting['dontUseEnv'].value;\n        },\n      },\n    });\n  }\n  \n  onAdded() {\n  }\n\n  createClient() {\n    let {url, token, org, bucket} = config.influxDb2;\n    if (this.settings['dontUseEnv'].value) {\n      // dont use env\n      url = this.settings['url'].value;\n      token = this.settings['token'].value;\n      org = this.settings['org'].value;\n      bucket = this.settings['bucket'].value;\n    } \n    this.client = new InfluxDB({url: url, token: token}).getWriteApi(org, bucket);\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return; // only execute on server\n    if (!this.getInputData(this.inEnable)) {\n      this.setOutputData(this.outMsg, `INFLUX-DB-2 NODE: not enabled`, true);\n      return;\n    }\n\n    // update node name - UPDATE TITLE FROM JSON INSTEAD\n    /*\n    if (this.inputs[0].updated) {\n      let nodeName = this.getInputData(this.inName);\n      if (!isNull(nodeName)) {\n        this.name = nodeName;\n        this.broadcastNameToClients();\n      }\n    }\n    */\n\n    let input = this.getInputData(this.inJsonInput);\n    //console.log('INFLUX-DB-2: input = ', input)\n\n    if (isNull(input)) return;\n    const hasMeasurement = input.hasOwnProperty('measurement');\n    const hasMeasurementTags = input.hasOwnProperty('tags');\n    const hasMeasurementFields = input.hasOwnProperty('fields');\n\n    if (isNull(input.tags)) {\n      this.setOutputData(this.outError, false, true);\n      this.setOutputData(this.outMsg, `!tags! is empty,`, true);\n      return;\n    }\n    if (isNull(input.measurement)) {\n      this.setOutputData(this.outError, false, true);\n      this.setOutputData(this.outMsg, `!measurement! is empty,`, true);\n      return;\n    }\n    if (isNull(input.fields)) {\n      this.setOutputData(this.outError, false, true);\n      this.setOutputData(this.outMsg, `!fields! is empty,`, true);\n      return;\n    }\n    if (hasMeasurement && hasMeasurementTags && hasMeasurementFields) {\n      this.setOutputData(this.outError, false, true);\n      this.setOutputData(this.outLastExport, moment().format());\n      this.setOutputData(this.outMsg, `influx write to DB`, true);\n\n      Object.keys(input.tags).forEach(key => {\n        if (!input.tags[key]) {\n          delete input.tags[key];\n        }\n      });\n\n      PlatformDataSource.getPlatform().then(e => {\n        var platformInfo = e;\n        this.setOutputData(2, e)\n      }).catch(err => {\n        this.debugInfo(`INFLUXDB-2 NODE: try/catch  getPlatform info, ${err}`);\n      })\n\n      this.createClient();\n\n      if (this.settings['useDefaultTags'].value) this.client.useDefaultTags({location: 'test'})\n\n      const point = new Point(input.measurement)\n      point.timestamp(new Date());\n      for (const tag in input.tags) point.tag(tag, input.tags[tag]);\n      for (const field in input.fields) {\n        switch (typeof input.fields[field]){\n          case 'number':\n            //console.log('its a number')\n            point.floatField(field, input.fields[field])\n            break;\n          case 'string':\n            //console.log('its a string')\n            point.stringField(field, input.fields[field])\n            break;\n          case 'boolean':\n            //console.log('its a boolean')\n            point.booleanField(field, input.fields[field])\n            break;\n          default:\n            //console.log('I dont know its type')\n            if(input.fields[field] == null) break;\n            point.floatField(field, input.fields[field])\n            break;\n        }\n      }\n      this.client.writePoint(point);\n      //console.log(`INFLUXDB-2: ${point.toLineProtocol(this.client)}`);\n\n      this.client.close()\n        .then(() => {\n          //console.log('SUCCESS')\n        })\n        .catch(e => {\n          console.error(e)\n          if (e instanceof HttpError && e.statusCode === 401) {\n            console.log('INFLUXDB-2: Run ./onboarding.js to setup a new InfluxDB database.')\n          }\n          console.log('\\n INFLUXDB-2:  Finished ERROR')\n          this.setOutputData(this.outError, true, true);\n          this.setOutputData(this.outMsg, `error on influx write, ${e}`, true);\n        })\n    } else {\n      this.debugInfo(`INFLUX-DB NODE: input.hasOwnProperty is missing`);\n      this.setOutputData(this.outError, true, true);\n      this.setOutputData(this.outMsg, `input.hasOwnProperty is missing`, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return; // only execute on server\n    /*\n    if (this.getInputData(this.inEnable)) this.createClient();\n    else {\n      if (this.client) this.client.dispose()\n        .catch(e => {\n          console.log(`INFLUX-DB-2:`, e)\n        })\n      this.client = null;\n      this.setOutputData(this.outMsg, `INFLUX-DB-2 NODE: not enabled`, true);\n      return;\n    }\n    */\n    this.onInputUpdated();\n  }\n}\nNodeTypeRegistry.registerNodeType('history/influx-db-2', InfluxDB2Node);\n\n/*\ninfluxDb2    : {\n    protocol    : env?.INFLUX_DB_2_PROTOCOL ?? 'http',\n    url         : env?.INFLUX_DB_2_URL ?? '',\n    token       : env?.INFLUX_DB_2_TOKEN ?? '',\n    bucket      : env?.INFLUX_DB_2_BUCKET ?? '',\n    org         : env?.INFLUX_DB_2_ORG ?? '',\n    username    : env?.INFLUX_DB_2_USERNAME ?? '',\n    password    : env?.INFLUX_DB_2_PASSWORD ?? '',\n  },\n*/","module.exports = require(\"@influxdata/influxdb-client\");","module.exports = require(\"@influxdata/influxdb-client-apis\");","import { isNull } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\n\nexport class PointPersistence extends Node {\n  lastInterval = 1000;\n  runState: boolean = true;\n  timeoutFunc;\n  lastTrigger;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.history.persistence.title;\n    this.description = NODE_INFO.history.persistence.description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable value resend timer');\n    this.addInput('input', Type.ANY);\n    this.addInputWithSettings('interval', Type.NUMBER, 30, 'Interval');\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('output', Type.ANY);\n    this.properties['output'] = null;\n    this.settings['preventDuplicates'] = NodeSetting.create({\n      description: 'Prevent Duplicates)',\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n  }\n\n  onAdded() {\n    clearInterval(this.timeoutFunc);\n    this.inputs[2]['name'] = `[interval] (${this.settings['time'].value})`;\n    const enable = this.getInputData(0);\n    if (!enable) {\n      this.setOutputData(0, this.properties['output']);\n      this.runState = false;\n      return;\n    }\n    let interval = this.getInputData(2);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    this.timeoutFunc = setInterval(() => {\n      const message = this.getInputData(1);\n      this.setOutputData(0, this.properties['output']);\n    }, interval);\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    // trigger\n    let trigger = this.getInputData(3);\n    const message = this.getInputData(1); //data input\n    if (message !== undefined && message !== null && message.length) {\n      this.properties['output'] = message;\n      this.setOutputData(0, this.properties['output']);\n    }\n\n    if (trigger) {\n      if (\n        this.properties['output'] !== undefined &&\n        this.properties['output'] !== null &&\n        this.properties['output'].length\n      ) {\n        this.setOutputData(0, this.properties['output']);\n      }\n    }\n\n    //pass data on input updated\n    if (this.inputs[1].updated) {\n      const preventDuplicates = this.settings['preventDuplicates'].value\n      if(!isNull(message)){\n        this.properties['output'] = message;\n        this.setOutputData(0, this.properties['output'], preventDuplicates);\n      }\n    }\n\n    // interval\n    const enable = this.getInputData(0);\n    if (!enable && this.runState) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, this.properties['output']);\n      this.runState = false;\n      return;\n    } else if (!enable && !this.runState) {\n      this.setOutputData(0, this.properties['output']);\n      this.runState = false;\n      return;\n    } else if (enable) {\n      let interval = this.getInputData(2);\n      interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n      if (this.runState) {\n        if (interval != this.lastInterval) {\n          this.lastInterval = interval;\n          clearInterval(this.timeoutFunc);\n          this.timeoutFunc = setInterval(() => {\n            this.setOutputData(0, this.properties['output']);\n          }, interval);\n        }\n        return;\n      } else if (!this.runState) {\n        this.runState = true;\n        this.timeoutFunc = setInterval(() => {\n          this.setOutputData(0, this.properties['output']);\n        }, interval);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[2]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('history/persistence', PointPersistence);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass DeadbandNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.hvac.deadband.title;\n    this.description = NODE_INFO.hvac.deadband.description;\n\n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('setpoint', Type.NUMBER, 0, 'Setpoint');\n    this.addInputWithSettings('deadband', Type.NUMBER, 0, 'Deadband');\n    this.addOutput('out', Type.BOOLEAN);\n    this.addOutput('out not', Type.BOOLEAN);\n    this.settings['invert'] = NodeSetting.create({\n      description: 'Reverses ON direction when true',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n  }\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    const setpoint = this.getInputData(1);\n    let deadband = this.getInputData(2);\n\n    const invert = this.settings['invert'].value;\n    if (invert == true) deadband = deadband * -1;\n\n    const risingEdge = setpoint + deadband / 2;\n    const fallingEdge = setpoint - deadband / 2;\n\n    if (risingEdge > fallingEdge) {\n      if (input <= fallingEdge) {\n        this.setOutputData(0, false, true);\n      }\n      if (input >= risingEdge) {\n        this.setOutputData(0, true, true);\n      }\n    } else if (risingEdge < fallingEdge) {\n      if (input >= fallingEdge) {\n        this.setOutputData(0, false, true);\n      }\n      if (input <= risingEdge) {\n        this.setOutputData(0, true, true);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('hvac/deadband', DeadbandNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass ThermostatNode extends Node {\n  clgMode: boolean;\n  htgMode: boolean;\n\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.hvac.thermostat.title;\n    this.description = NODE_INFO.hvac.thermostat.description; \n   \n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addInputWithSettings('setpoint', Type.NUMBER, 20, 'Setpoint');\n    this.addInputWithSettings('CLG offset', Type.NUMBER, 1, 'CLG offset');\n    this.addInputWithSettings('HTG offset', Type.NUMBER, 1, 'HTG offset');\n    this.addOutput('CLG Mode', Type.BOOLEAN);\n    this.addOutput('HTG Mode', Type.BOOLEAN);\n    this.setOutputData(0, false);\n    this.setOutputData(1, false);\n    this.clgMode = false;\n    this.htgMode = false;\n  }\n\n  onAdded() {\n \n    this.setOutputData(0, false);\n    this.setOutputData(1, false);\n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    let enable = this.getInputData(1);\n    if (!enable) {\n      this.setOutputData(0, false);\n      this.setOutputData(1, false);\n      this.clgMode = false;\n      this.htgMode = false;\n      return;\n    }\n    const input = this.getInputData(0);\n    const setpoint = this.getInputData(2);\n    const clgOffset = this.getInputData(3);\n    const htgOffset = this.getInputData(4);\n\n    const clgSP = setpoint + clgOffset;\n    const htgSP = setpoint - htgOffset;\n\n    if (input < htgSP) {\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, true, true);\n      this.htgMode = true;\n      this.clgMode = false;\n    } else if (input > clgSP) {\n      this.setOutputData(0, true, true);\n      this.setOutputData(1, false, true);\n      this.clgMode = true;\n      this.htgMode = false;\n    } else if ((this.clgMode && input < setpoint) || (this.htgMode && input > setpoint)) {\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, false, true);\n      this.clgMode = false;\n      this.htgMode = false;\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('hvac/thermostat', ThermostatNode);\n","import { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport { SSL_OP_SSLEAY_080_CLIENT_DH_BUG } from 'constants';\n\nclass LeadLagStagingNode extends Node {\n  //Inputs\n  ENABLESLOT = 0;\n  ROTATESLOT = 1;\n  UPSLOT = 2;\n  DOWNSLOT = 3;\n  DELAYSLOT = 4;\n  MINONSLOT = 5;\n  FAULTSTARTSLOT = 6;\n\n  //Outputs\n  JSONSLOT = 0;\n  ORDERSLOT = 1;\n  STAGESLOT = 2;\n  OUTPUTSTARTSLOT = 3;\n\n  lastRotate;\n  lastEnable;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.hvac['lead-lag-staging'].title;\n    this.description = NODE_INFO.hvac['lead-lag-staging'].description; \n   \n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addInput('rotateLead', Type.BOOLEAN);\n    this.addInput('stageUp', Type.BOOLEAN);\n    this.addInput('stageDown', Type.BOOLEAN);\n    this.settings['numUnits'] = NodeSetting.create({\n      description: 'Number of Units',\n      value: 2,\n      type: SettingType.NUMBER,\n    });\n    this.addInputWithSettings('stageUpDelay (minutes)', Type.NUMBER, 10, 'Stage Up Delay (Minutes)');\n    this.addInputWithSettings('minOnTime (minutes)', Type.NUMBER, 5, 'Minimum On Time (Minutes)');\n    this.settings['stageUpOnFault'] = NodeSetting.create({\n      description: 'Stage Up On Running Unit Fault?',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.addOutput('outputJSON', Type.JSON);\n    this.addOutput('order', Type.STRING);\n    this.addOutput('currentStage', Type.NUMBER);\n\n    this.setSettingsConfig({\n      groups: [],\n      conditions: {},\n    });\n  }\n\n  init(){\n    this.properties['currentOrder'] = [1,2];\n    this.properties['orderIndex'] = 0;\n    this.properties['rotationsList'];\n  }\n\n  onCreated() {\n    this.onAfterSettingsChange();\n  }\n\n  onAdded() {\n    this.EXECUTE_INTERVAL = 10000;\n    this.onAfterSettingsChange();\n  }\n\n  onExecute(){\n    this.onInputUpdated();\n  }\n\n  onAfterSettingsChange() {\n    this.updateCount();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    this.initializeOutputJSON();\n    const enable = this.getInputData(this.ENABLESLOT);\n\n    const rotate = this.getInputData(this.ROTATESLOT);\n    if (rotate && !this.lastRotate){\n      this.properties['orderIndex']++;\n      if (this.properties['orderIndex'] >= this.properties['rotationsList'].length) this.properties['orderIndex'] = 0;\n      this.properties['lastRotateTime'] = Date.now();\n    }\n    this.lastRotate = rotate;\n    this.properties['currentOrder'] = this.properties['rotationsList'][this.properties['orderIndex']];\n\n    if (enable) {\n      if (!this.lastEnable) {\n        this.properties['currentStage'] = 1;\n        this.properties['stageStartTime'] = Date.now();\n      }\n\n      const stageUP = this.getInputData(this.UPSLOT);\n      const stageDOWN = this.getInputData(this.DOWNSLOT);\n      const upDelay = TimeUtils.timeConvert(this.getInputData(this.DELAYSLOT), TIME_TYPE.MINUTES);\n      const minOnDelay = TimeUtils.timeConvert(this.getInputData(this.MINONSLOT), TIME_TYPE.MINUTES);\n      const currentStage = this.properties['currentStage'];\n      var stageChange = 0;\n\n\n      if(stageUP && !stageDOWN && currentStage < this.properties['numEnableOutputs']){\n        if (Date.now() > this.properties['stageStartTime'] + upDelay) {\n          stageChange++;\n        }\n      }\n\n      if(stageDOWN && !stageUP && currentStage > 1){\n        if (Date.now() > this.properties['stageStartTime'] + minOnDelay) {\n          stageChange--;\n        }\n      }\n\n      if (this.settings['stageUpOnFault'].value){\n        var faultArray = [];\n        var fault, index;\n        for (var i = 0; i < this.settings['numUnits'].value; i++) {\n          fault = this.getInputData(this.FAULTSTARTSLOT + i);\n          index = this.properties['currentOrder'].indexOf(this.convertNumToLetter(i))\n          fault ? faultArray[index] = true : faultArray[index] = false;\n        }\n        this.properties['outputJSON']['faultArray'] = faultArray;\n        while ((currentStage + stageChange) < this.properties['numEnableOutputs'] && faultArray[currentStage + stageChange - 1]){\n          stageChange++\n        }\n      }\n \n      if (stageChange !== 0){\n        if (this.properties['currentStage'] + stageChange > this.properties['numEnableOutputs']) this.properties['currentStage'] = this.properties['numEnableOutputs'];\n        else this.properties['currentStage'] += stageChange;\n        this.properties['stageStartTime'] = Date.now();\n      }\n\n      this.setOutputs();\n    }\n    // For disabled controller\n    else this.resetController();\n\n    this.lastEnable = enable;\n    this.setOutputJSON();\n\n  }\n\n  resetController(){\n    this.properties['currentStage'] = 0;\n    this.properties['stageStartTime'] = null;\n    this.setOutputData(this.ORDERSLOT, this.properties['currentOrder'].toString());\n    this.setOutputData(this.STAGESLOT, 0);\n    for(var x = 0; x < this.properties['numEnableOutputs']; x++){\n      this.setOutputData(x + this.OUTPUTSTARTSLOT, false);\n    }\n  }\n\n  setOutputs() {\n    this.setOutputData(this.ORDERSLOT, this.properties['currentOrder'].toString());\n    this.setOutputData(this.STAGESLOT, this.properties['currentStage']);\n    var output, index;\n    for(var x = 0; x < this.properties['numEnableOutputs']; x++){\n      index = this.properties['currentOrder'].indexOf(this.convertNumToLetter(x));\n      output = this.properties['currentStage'] >= (index+1);\n      this.setOutputData(x + this.OUTPUTSTARTSLOT, output);\n    }\n  }\n\n  updateCount(){\n    if (this.properties['numEnableOutputs'] !== this.settings['numUnits'].value || this.properties['numFaultInputs'] !== this.settings['numUnits'].value){\n      this.properties['orderIndex'] = 0;\n    }\n    this.updateOutputsCount();\n    this.updateInputsCount();\n    this.generateRotations();\n    this.properties['currentOrder'] = this.properties['rotationsList'][this.properties['orderIndex']];\n  }\n\n  generateRotations(){\n    var list = [];\n    const count = this.properties['numEnableOutputs'];\n    for (var x = 0; x < count; x++) list.push(this.convertNumToLetter(x));\n    var result = [];\n    result.push(Array.from(list));\n    var shiftVal;\n    for (var y = 1; y < count; y++) {\n      shiftVal = list.shift();\n      list.push(shiftVal);\n      result.push(Array.from(list));\n    }\n    this.properties['rotationsList'] = result;\n  }\n\n  updateOutputsCount() {\n    this.settings['numUnits'].value = Math.min(Math.max(2, this.settings['numUnits'].value), 10);\n    this.properties['numEnableOutputs'] = this.getOutputsCount() - this.OUTPUTSTARTSLOT;\n    const diff = this.settings['numUnits'].value - this.properties['numEnableOutputs'];\n    if (diff == 0) return;\n    //add\n    let num = null;\n    if (diff > 0) for (let i = 0; i < diff; i++) {\n      num = this.addOutput('Unit'+ this.convertNumToLetter(this.properties['numEnableOutputs'] + i), Type.BOOLEAN);\n      this.setOutputData(num, false);\n    }\n    //remove\n    if (diff < 0) {\n      let ids = Object.keys(this.outputs);\n      for (let i = 0; i > diff; i--) {\n        let id = ids[ids.length + i - 1];\n        this.removeOutput(+id);\n      }\n    }\n    this.properties['numEnableOutputs'] = this.settings['numUnits'].value;\n    if (this.properties['currentStage'] > this.properties['numUnits']) this.properties['currentStage'] = this.properties['numUnits'];\n  }\n\n  updateInputsCount() {\n    this.settings['numUnits'].value = Math.min(Math.max(2, this.settings['numUnits'].value), 10);\n    this.properties['numFaultInputs'] = this.getInputsCount() - this.FAULTSTARTSLOT;\n    var requiredFaultInputs = 0;\n    if (this.settings['stageUpOnFault'].value) requiredFaultInputs = this.settings['numUnits'].value;\n    const diff = requiredFaultInputs - this.properties['numFaultInputs'];\n    if (diff == 0) return;\n    //add\n    let num = null;\n    if (diff > 0) for (let i = 0; i < diff; i++) {\n      num = this.addInput('Fault'+ this.convertNumToLetter(this.properties['numFaultInputs'] + i), Type.BOOLEAN);\n    }\n    //remove\n    if (diff < 0) {\n      let ids = Object.keys(this.inputs);\n      for (let i = 0; i > diff; i--) {\n        let id = ids[ids.length + i - 1];\n        this.removeInput(+id);\n      }\n    }\n    if (this.settings['stageUpOnFault'].value) this.properties['numFaultInputs'] = this.settings['numUnits'].value;\n    else this.properties['numFaultInputs'] = 0;\n  }\n\n  convertNumToLetter(convertNumber:number = 0){\n    return String.fromCharCode(65 + convertNumber);\n  }\n\n  initializeOutputJSON(){\n    this.properties['outputJSON'] = {\n      enableInput: this.getInputData(this.ENABLESLOT),\n      rotateInput: this.getInputData(this.ROTATESLOT),\n      stageUpInput: this.getInputData(this.UPSLOT),\n      stageDownInput: this.getInputData(this.DOWNSLOT),\n      stageUpDelay: this.getInputData(this.DELAYSLOT),\n      minOnTime: this.getInputData(this.MINONSLOT),\n      order: null,\n      orderIndex: null,\n      numUnits: null,\n      currentStage: null,\n      stageArray: [],\n      useFaultInputs: null,\n      faultArray: [],\n      currentTime: null,\n      stageStartTime: null,\n    };\n  }\n\n  setOutputJSON(){\n    this.properties['outputJSON']['order'] = this.properties['currentOrder'];\n    this.properties['outputJSON']['orderIndex'] = this.properties['orderIndex'];\n    this.properties['outputJSON']['numUnits'] = this.settings['numUnits'].value;\n    this.properties['outputJSON']['currentStage'] = this.properties['currentStage'];\n    this.properties['outputJSON']['useFaultInputs'] = this.settings['stageUpOnFault'].value;\n    for(var x = 0; x < this.properties['numEnableOutputs']; x++){\n      this.properties['outputJSON']['stageArray'].push(this.outputs[String(x+this.OUTPUTSTARTSLOT)].data);\n    }\n    this.properties['outputJSON']['stageStartTime'] = this.properties['stageStartTime'];\n    this.properties['outputJSON']['currentTime'] = Date.now();\n    this.setOutputData(this.JSONSLOT, this.properties['outputJSON']);\n  }\n\n}\nNodeTypeRegistry.registerNodeType('hvac/lead-lag-staging', LeadLagStagingNode);\n\n","import { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass LeadLagSwitchNode extends Node {\n  lastRotate;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.hvac['lead-lag-switch'].title;\n    this.description = NODE_INFO.hvac['lead-lag-switch'].description; \n   \n    this.addInput('rotateLead', Type.BOOLEAN);\n    this.addInput('unit1', Type.BOOLEAN);\n    this.addInput('unit2', Type.BOOLEAN);\n\n    this.addOutput('leadUnit', Type.STRING);\n    this.addOutput('enableA', Type.BOOLEAN);\n    this.addOutput('enableB', Type.BOOLEAN);\n\n  }\n\n  init(){\n    this.properties['currentOrder'] = true;\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const rotate = this.getInputData(0);\n    if (rotate && !this.lastRotate) this.properties['currentOrder'] = !this.properties['currentOrder'];\n    this.lastRotate = rotate;\n\n    const in1 = this.getInputData(1);\n    const in2 = this.getInputData(2);\n\n    if (this.properties['currentOrder']) {\n      this.setOutputData(0, 'A'); \n      this.setOutputData(1, !!in1); \n      this.setOutputData(2, !!in2); \n    }\n    else {\n      this.setOutputData(0, 'B'); \n      this.setOutputData(1, !!in2); \n      this.setOutputData(2, !!in1); \n    }\n\n  }\n\n}\nNodeTypeRegistry.registerNodeType('hvac/lead-lag-switch', LeadLagSwitchNode);\n\n","import { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\n\nclass PACUnitControl extends Node {\n  //Inputs\n  ENABLESLOT = 0;\n  ZTSLOT = 1;\n  SPSLOT = 2;\n  CLGOFSTSLOT = 3;\n  HTGOFSTSLOT = 4;\n  STGUPSLOT = 5;\n  MDLYSLOT = 6;\n  ECONOASLOT = 7;\n  OATSLOT = 8;\n  ECONHISLOT = 9;\n  ECONLOSLOT = 10;\n  FSSLOT = 11;\n  CLGLOCKSLOT = 12;\n  HTGLOCKSLOT = 13;\n\n  //Outputs\n  JSONSLOT = 0;\n  CLGMSLOT = 1;\n  HTGMSLOT = 2;\n  COMPSTGSLOT = 3;\n  ECONOMSLOT = 4;\n  OADMPSLOT = 5;\n  RVSLOT = 6;\n  COMPSTARTSLOT = 7;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.hvac['pac-unit-control'].title;\n    this.description = NODE_INFO.hvac['pac-unit-control'].description; \n   \n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addInput('zoneTemp', Type.NUMBER);\n    this.addInputWithSettings('setpoint', Type.NUMBER, 20, 'Setpoint');\n    this.settings['straddleSP'] = NodeSetting.create({\n      description: 'Setpoint Logic',\n      value: true,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Condition to Setpoint' },\n          { value: false, text: 'Condition past Setpoint' },\n        ],\n      },\n    });\n    this.addInputWithSettings('CLG offset', Type.NUMBER, 1, 'CLG offset');\n    this.addInputWithSettings('HTG offset', Type.NUMBER, 1, 'HTG offset');\n    this.addInputWithSettings('stageUpDelay (minutes)', Type.NUMBER, 10, 'Stage Up Delay (Minutes)');\n    this.addInputWithSettings('modeDelay (minutes)', Type.NUMBER, 15, 'Mode Change Delay (Minutes)');\n    this.addInputWithSettings('econoAllow', Type.BOOLEAN, true, 'Allow Economy Mode');\n    this.addInput('OATemp', Type.NUMBER);\n    this.settings['compStages'] = NodeSetting.create({\n      description: '# Compressor Stages',\n      value: 2,\n      type: SettingType.NUMBER,\n    });\n    this.addInputWithSettings('econoHigh', Type.NUMBER, 22, 'Econo OA High Temp');\n    this.addInputWithSettings('econoLow', Type.NUMBER, 10, 'Econo OA Low Temp');\n    this.settings['econoDB'] = NodeSetting.create({\n      description: 'Economy Conditions Deadband',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n    this.settings['requireFS'] = NodeSetting.create({\n      description: 'Require Fan Status?',\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['FSdelay'] = NodeSetting.create({\n      description: 'Fan Status OFF Delay (Seconds)',\n      value: 20,\n      type: SettingType.NUMBER,\n    });\n    this.addInput('fanStatus', Type.BOOLEAN);\n    this.addInputWithSettings('clgLockout', Type.BOOLEAN, false, 'Lockout Cooling Mode');\n    this.addInputWithSettings('htgLockout', Type.BOOLEAN, false, 'Lockout Heating Mode');\n\n    this.addOutput('outputJSON', Type.JSON);\n    this.addOutput('CLG Mode', Type.BOOLEAN);\n    this.addOutput('HTG Mode', Type.BOOLEAN);\n    this.addOutput('compStage', Type.NUMBER);\n    this.addOutput('econoMode', Type.BOOLEAN);\n    this.addOutput('OADamper', Type.NUMBER);\n    this.addOutput('RV', Type.BOOLEAN);\n    this.addOutput('Comp1', Type.BOOLEAN);\n    this.addOutput('Comp2', Type.BOOLEAN);\n\n    this.setSettingsConfig({\n      groups: [\n        { 'CLG offset': {}, 'HTG offset': {} },\n        { 'stageUpDelay (minutes)': {}, 'modeDelay (minutes)': {} },\n        { econoLow: {}, econoHigh: {} },\n      ],\n      conditions: {},\n    });\n  }\n\n  onCreated() {\n    this.EXECUTE_INTERVAL = 10000;\n    //this.properties['numComps'] = 2;\n    this.properties['FSInput'] = true;\n    this.properties['fanStatus'] = false;\n    this.properties['fanStatusOffTime'] = null;\n    this.properties['clgModeEnd'] = null;\n    this.properties['htgModeEnd'] = null;\n    this.resetController();\n    this.onAfterSettingsChange();\n  }\n\n  onAdded() {\n    this.EXECUTE_INTERVAL = 10000;\n    this.setOutputData(0, this.properties['clgMode']);\n    this.setOutputData(1, this.properties['htgMode']);\n    this.setOutputData(2, this.properties['compStage']);\n    this.setOutputData(3, this.properties['econoConditions']);\n    this.onAfterSettingsChange();\n  }\n\n  onExecute(){\n    this.onInputUpdated();\n  }\n\n  onAfterSettingsChange() {\n    this.updateStageCount();\n    this.updateFSInput();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    this.initializeOutputJSON();\n    const enable = this.getInputData(this.ENABLESLOT);\n    this.properties['outputJSON']['enableInput'] = enable;\n    var fanStatus = true;\n    if (this.settings['requireFS'].value){ \n      const fanStatusInput = this.getInputData(this.FSSLOT);\n      this.properties['outputJSON']['fanStatusActual'] = fanStatusInput;\n      this.properties['outputJSON']['fanStatusEffective'] = true;\n      if (fanStatusInput) {\n        fanStatus = true;\n        this.properties['fanStatus'] = true;\n      }\n      else {\n        if (this.properties['fanStatus']) {\n          this.properties['fanStatusOffTime'] = Date.now() + TimeUtils.timeConvert(this.settings['FSdelay'].value, TIME_TYPE.SECONDS);\n        }\n        this.properties['fanStatus'] = fanStatusInput;\n        if (this.properties['fanStatusOffTime'] <= Date.now()) {\n          fanStatus = false;\n          this.properties['outputJSON']['fanStatusEffective'] = false;\n        }\n        this.properties['outputJSON']['fanStatusOffTime'] = this.properties['fanStatusOffTime'];\n      }\n    } \n\n    var disable = false;\n    if (!enable || (this.settings['requireFS'].value && !fanStatus)) disable = true;\n    \n    const input = this.getInputData(this.ZTSLOT);\n    this.properties['outputJSON']['zoneTemp'] = input;\n    if (input == null || input == undefined) disable = true;\n\n    if (!disable) {\n      const setpoint = this.getInputData(this.SPSLOT);\n      const clgOffset = this.getInputData(this.CLGOFSTSLOT);\n      const htgOffset = this.getInputData(this.HTGOFSTSLOT);\n      const clgSP = setpoint + clgOffset;\n      const htgSP = setpoint - htgOffset;\n      const clgLockout = this.getInputData(this.CLGLOCKSLOT);\n      const htgLockout = this.getInputData(this.HTGLOCKSLOT);\n\n      \n      if (!htgLockout && !this.properties['clgMode'] && !this.properties['htgMode'] && input < htgSP) {\n        if (this.properties['clgModeEnd'] == null || (this.properties['clgModeEnd'] + TimeUtils.timeConvert(this.getInputData(this.MDLYSLOT), TIME_TYPE.MINUTES)) <= Date.now()){\n          this.properties['htgMode'] = true;\n          this.properties['compStage'] = 0;\n        }\n      }\n      else if (!clgLockout && !this.properties['htgMode'] && !this.properties['clgMode'] && input > clgSP) {\n        if (this.properties['htgModeEnd'] == null || (this.properties['htgModeEnd'] + TimeUtils.timeConvert(this.getInputData(this.MDLYSLOT), TIME_TYPE.MINUTES)) <= Date.now()){\n          this.properties['clgMode'] = true;\n          this.properties['compStage'] = 0;\n        }\n      }\n\n      if (this.properties['htgMode']){\n        this.properties['econoConditions'] = false;\n        if(htgLockout) {\n          this.properties['compStage'] = 0;\n          this.properties['htgMode'] = false;\n          this.properties['htgModeEnd'] = Date.now();\n          this.properties['stageStartTime'] = null;\n        }\n        else if (input < htgSP) {\n          if(this.properties['compStage'] === 0){\n            this.properties['compStage'] = 1;\n            this.properties['stageStartTime'] = Date.now();\n          }\n          else if (this.properties['compStage'] > 0 && (this.properties['stageStartTime'] + TimeUtils.timeConvert(this.getInputData(this.STGUPSLOT), TIME_TYPE.MINUTES)) <= Date.now()){\n            if (this.properties['compStage'] < this.properties['numComps']) {\n              this.properties['compStage']++;\n              this.properties['stageStartTime'] = Date.now();\n            }\n          }\n        }\n        else {\n          var offSPInterval = htgOffset / this.properties['numComps'];\n          if (this.settings['straddleSP'].value){\n            for (var s = this.properties['compStage']; s > 0; s--) {\n              if (input >= (setpoint - (offSPInterval * (s-1)))) {\n                this.properties['compStage']--;\n                this.properties['stageStartTime'] = Date.now();\n              }\n            }\n          }\n          else if (!this.settings['straddleSP'].value){\n            offSPInterval = (htgOffset*2) / this.properties['numComps'];\n            for (var s = this.properties['compStage']; s > 0; s--) {\n              if (input >= ((setpoint + htgOffset) - (offSPInterval * (s-1)))) {\n                this.properties['compStage']--;\n                this.properties['stageStartTime'] = Date.now();\n              }\n            }\n          }\n          if (this.properties['compStage'] === 0){\n            this.properties['htgMode'] = false;\n            this.properties['htgModeEnd'] = Date.now();\n            this.properties['stageStartTime'] = null;\n          }\n        }\n      }\n      else if (this.properties['clgMode']) {\n        if(clgLockout){\n          this.properties['compStage'] = 0;\n          this.properties['clgMode'] = false;\n          this.properties['clgModeEnd'] = Date.now();\n          this.properties['stageStartTime'] = null;\n        }\n        else if (input > clgSP) {\n          if(this.properties['compStage'] === 0){\n            this.properties['compStage'] = 1;\n            this.properties['stageStartTime'] = Date.now();\n          }\n          else if (this.properties['compStage'] > 0 && (this.properties['stageStartTime'] + TimeUtils.timeConvert(this.getInputData(this.STGUPSLOT), TIME_TYPE.MINUTES)) <= Date.now()){\n            if (this.properties['compStage'] < this.properties['numComps']) {\n              this.properties['compStage']++;\n              this.properties['stageStartTime'] = Date.now();\n            }\n          }\n        }\n        else {\n          var offSPInterval = clgOffset / this.properties['numComps'];\n          if (this.settings['straddleSP'].value){\n            for (var s = this.properties['compStage']; s > 0; s--) {\n              if (input <= (setpoint + (offSPInterval * (s-1)))) {\n                this.properties['compStage']--;\n                this.properties['stageStartTime'] = Date.now();\n              }\n            }\n          }\n          else if (!this.settings['straddleSP'].value){\n            offSPInterval = (clgOffset*2) / this.properties['numComps'];\n            for (var s = this.properties['compStage']; s > 0; s--) {\n              if (input <= ((setpoint - clgOffset) + (offSPInterval * (s-1)))) {\n                this.properties['compStage']--;\n                this.properties['stageStartTime'] = Date.now();\n              }\n            }\n          }\n          if (this.properties['compStage'] === 0){\n            this.properties['clgMode'] = false;\n            this.properties['clgModeEnd'] = Date.now();\n            this.properties['stageStartTime'] = null;\n          }\n        }\n\n        if (this.getInputData(this.ECONOASLOT)){\n          const OATemp = this.getInputData(this.OATSLOT);\n          if (OATemp && this.checkEconoConditions(OATemp)) this.properties['econoConditions'] = true;\n          else this.properties['econoConditions'] = false;\n        }\n        else this.properties['econoConditions'] = false;\n      }\n      this.setOutputs(input, setpoint, clgSP);\n    }\n    // For disabled controller\n    else this.resetController();\n\n    this.properties['outputJSON']['disable'] = disable;\n    this.setOutputJSON();\n\n  }\n\n  setOutputs(temp:number, setpoint:number, clgSP:number) {\n    this.setOutputData(this.CLGMSLOT, this.properties['clgMode'], true);\n    this.setOutputData(this.HTGMSLOT, this.properties['htgMode'], true);\n    this.setOutputData(this.COMPSTGSLOT, this.properties['compStage'], true);\n    this.setOutputData(this.ECONOMSLOT, this.properties['econoConditions'], true);\n    if (this.properties['econoConditions'] && this.properties['clgMode']) {\n      const OAD = Utils.remap(temp, setpoint, clgSP, 0, 100)\n      this.setOutputData(this.OADMPSLOT, OAD, true);\n      this.properties['outputJSON']['OADamper'] = OAD;\n    }\n    else {\n      this.setOutputData(this.OADMPSLOT, 0, true);\n      this.properties['outputJSON']['OADamper'] = 0;\n    }\n    this.setOutputData(this.RVSLOT, this.properties['htgMode'], true);\n    for(var x = 0; x < this.properties['numComps']; x++){\n      if (this.properties['compStage'] >= (x+1)) this.setOutputData(x + this.COMPSTARTSLOT, true);\n      else this.setOutputData(x + this.COMPSTARTSLOT, false);\n    }\n  }\n\n  checkEconoConditions(OATemp:number) {\n    const econoHigh = this.getInputData(this.ECONHISLOT);\n    const econoLow = this.getInputData(this.ECONLOSLOT);\n    const econoDB = this.settings['econoDB'].value;\n    if (econoHigh <= (econoLow + econoDB) || econoHigh == null || econoLow == null || econoDB == null) {\n      this.properties['econoConditions'] = false;\n      return false;\n    }\n    if (OATemp < econoLow || OATemp > econoHigh) {\n      this.properties['econoConditions'] = false;\n      return false;\n    }\n    if (OATemp <= (econoHigh - econoDB) && OATemp >= (econoLow + econoDB)) {\n      this.properties['econoConditions'] = true;\n    }\n    return this.properties['econoConditions'];  //return current Econo state, or updated.\n  }\n\n  updateFSInput() {\n    if(this.settings['requireFS'].value != this.properties['FSInput']){\n      if(this.settings['requireFS'].value) this.addInput('fanStatus', Type.BOOLEAN);\n      else this.removeInput(11);\n    }\n    this.properties['FSInput'] = this.settings['requireFS'].value;\n  }\n\n  updateStageCount() {\n    const compSettings = Math.min(Math.max(1, this.settings['compStages'].value), 20);\n    if (this.settings['compStages'].value < 1) this.settings['compStages'].value = 1;\n    this.properties['numComps'] = this.getOutputsCount() - this.COMPSTARTSLOT;\n    const diff = this.settings['compStages'].value - this.properties['numComps'];\n    if (diff == 0) return;\n    //add\n    let num = null;\n    if (diff > 0) for (let i = 0; i < diff; i++) {\n      num = this.addOutput('Comp'+(this.properties['numComps'] + i + 1), Type.BOOLEAN);\n      this.setOutputData(num, false);\n    }\n    //remove\n    if (diff < 0) {\n      let ids = Object.keys(this.outputs);\n      for (let i = 0; i > diff; i--) {\n        let id = ids[ids.length + i - 1];\n        this.removeOutput(+id);\n      }\n    }\n    this.properties['numComps'] = this.settings['compStages'].value;\n    if (this.properties['compStage'] > this.properties['numComps']) this.properties['compStage'] = this.properties['numComps'];\n  }\n\n  resetController(){\n    this.properties['clgMode'] = false;\n    this.properties['htgMode'] = false;\n    this.properties['compStage'] = 0;\n    this.properties['econoMode'] = false;\n    this.properties['econoConditions'] = false;\n    this.properties['stageStartTime'] = null;\n    this.setOutputData(this.CLGMSLOT, this.properties['clgMode']);\n    this.setOutputData(this.HTGMSLOT, this.properties['htgMode']);\n    this.setOutputData(this.COMPSTGSLOT, this.properties['compStage']);\n    this.setOutputData(this.ECONOMSLOT, this.properties['econoMode']);\n    this.setOutputData(this.OADMPSLOT, 0);\n    this.setOutputData(this.RVSLOT, false);\n    for(var x = 0; x < this.properties['numComps']; x++){\n      this.setOutputData(x + this.COMPSTARTSLOT, false);\n    }\n  }\n\n  initializeOutputJSON(){\n    this.properties['outputJSON'] = {\n      disable: null,\n      enableInput: null,\n      zoneTemp: null,\n      setpoint: this.getInputData(this.SPSLOT),\n      clgOffset: this.getInputData(this.CLGOFSTSLOT),\n      htgOffset: this.getInputData(this.HTGOFSTSLOT),\n      stageUpDelay: this.getInputData(this.STGUPSLOT),\n      modeChangeDelay: this.getInputData(this.MDLYSLOT),\n      econoAllow: this.getInputData(this.ECONOASLOT),\n      OATemp: this.getInputData(this.OATSLOT),\n      econoHighLimit: this.getInputData(this.ECONHISLOT),\n      econoLowLimit: this.getInputData(this.ECONLOSLOT),\n      htgLockout:this.getInputData(this.HTGLOCKSLOT),\n      clgLockout:this.getInputData(this.CLGLOCKSLOT),\n      fanStatusActual: null,\n      fanStatusEffective: null,\n      fanStatusOffTime: null,\n      clgMode: null,\n      htgMode: null,\n      compStage: null,\n      econoMode: null,\n      OADamper: null,\n      RV: null,\n      compArray: [],\n      setpointMode: this.settings['straddleSP'].value ? 'Condition to Setpoint' : 'Condition past Setpoint',\n      numCompressors: this.properties['numComps'],\n      econoConditionsDB: this.settings['econoDB'].value,\n      requireFanStatus: this.settings['requireFS'].value,\n      fanStatusOffDelay: this.settings['FSdelay'].value,\n      currentTime: null,\n      stageStartTime: null,\n      htgModeEnd:null,\n      clgModeEnd:null,\n    };\n  }\n\n  setOutputJSON(){\n    this.properties['outputJSON']['clgMode'] = this.properties['clgMode'];\n    this.properties['outputJSON']['htgMode'] = this.properties['htgMode'];\n    this.properties['outputJSON']['compStage'] = this.properties['compStage'];\n    this.properties['outputJSON']['econoMode'] = this.properties['econoConditions'];\n    this.properties['outputJSON']['OADamper'] = this.properties['clgMode'];\n    this.properties['outputJSON']['RV'] = this.properties['htgMode'];\n    for(var x = 0; x < this.properties['numComps']; x++){\n      if (this.properties['compStage'] >= (x+1)) this.properties['outputJSON']['compArray'].push(true);\n      else this.properties['outputJSON']['compArray'].push(false);\n    }\n    this.properties['outputJSON']['stageStartTime'] = this.properties['stageStartTime'];\n    this.properties['outputJSON']['clgModeEnd'] = this.properties['clgModeEnd'];\n    this.properties['outputJSON']['htgModeEnd'] = this.properties['htgModeEnd'];\n    this.properties['outputJSON']['currentTime'] = Date.now();\n\n    this.setOutputData(this.JSONSLOT, this.properties['outputJSON'], true);\n  }\n\n}\nNodeTypeRegistry.registerNodeType('hvac/pac-unit-control', PACUnitControl);\n\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nconst PID = require('../../lib/pid-controller');\n\nclass PIDFunctionNode extends Node {\n  lastTime: number;\n  startTime: number;\n  lastResetVal: boolean = false;\n  pid = new PID(1, 1, 1, 0, 0, 'reverse');\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.hvac.PID.title;\n    this.description = NODE_INFO.hvac.PID.description;\n\n    this.addInput('enable', Type.BOOLEAN); // 0\n    this.addInput('processVariable', Type.NUMBER); // 1\n    this.addInputWithSettings('setpoint', Type.NUMBER, 1, 'setpoint'); // 2\n    this.addInputWithSettings('minOut', Type.NUMBER, 0, 'minOut'); // 3\n    this.addInputWithSettings('maxOut', Type.NUMBER, 100, 'maxOut'); // 4\n    this.addInputWithSettings('inP', Type.NUMBER, 1, 'P'); // 5\n    this.addInputWithSettings('inI', Type.NUMBER, 0, 'I'); // 6\n    this.addInputWithSettings('inD', Type.NUMBER, 0, 'D'); // 7\n    //this.addInputWithSettings('direction', Type.BOOLEAN, true, 'Direction (OFF = Reverse, ON = Direct)'); // Direct or Reverse // 8\n    this.addInputWithSettings(\n      'direction',\n      Type.BOOLEAN,\n      true,\n      'Direction (OFF = Reverse, ON = Direct)',\n    ); // Direct or Reverse // 8\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Interval (min 500ms)'); // 9\n    this.addInputWithSettings('bias', Type.NUMBER, 0, 'Bias'); // 10\n    this.addInputWithSettings('manual', Type.NUMBER, 0, \"Manual ('output' value on disabled)\"); // 11\n    this.addInput('reset', Type.BOOLEAN); // 12\n    this.addOutput('output', Type.NUMBER); // 0\n    this.settings['time'] = NodeSetting.create({\n      description: 'Time',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [\n        { minOut: {}, maxOut: {} },\n        { inP: {}, inI: {}, inD: {} },\n        { time: {}, interval: { weight: 2 } },\n      ],\n    });\n    this.startTime = Date.now();\n    this.pid.setSampleTime(1000);\n    this.pid.setOutputLimits(0, 100);\n    this.pid.setMode('MANUAL');\n    this.pid.setOutput(0);\n    this.pid.setBias(0);\n  }\n\n  onAdded() {\n    this.inputs[9]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n\n  onExecute() {\n    if (this.pid.compute()) this.setOutputData(0, this.pid.getOutput().toFixed(1), true);\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(12);\n    if (reset && !this.lastResetVal) this.pid.initialize();\n    this.lastResetVal = reset;\n\n    let enable = this.getInputData(0);\n    if (!enable) {\n      this.pid.setMode('MANUAL');\n      const manual = this.getInputData(11) || 0;\n      this.setOutputData(0, manual.toFixed(1));\n      this.pid.setOutput(manual);\n      return;\n    }\n\n    let processVariable = this.getInputData(1);\n    if (\n      processVariable === null ||\n      processVariable === undefined ||\n      typeof processVariable !== Type.NUMBER\n    ) {\n      this.pid.setMode('MANUAL');\n      const manual = this.getInputData(11) || 0;\n      this.setOutputData(0, manual.toFixed(1), true);\n      this.pid.setOutput(manual);\n      return;\n    }\n\n    const setpoint = this.getInputData(2);\n    const minOut = this.getInputData(3);\n    const maxOut = this.getInputData(4);\n    const inP = this.getInputData(5);\n    const inI = this.getInputData(6);\n    const inD = this.getInputData(7);\n    let direction = this.getInputData(8);\n    if (direction == true) direction = 'direct';\n    else direction = 'reverse';\n    let interval = this.getInputData(9);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    interval = Math.max(500, interval);\n    const bias = this.getInputData(10);\n\n    this.pid.setBias(bias);\n    this.pid.setSampleTime(interval);\n    this.pid.setOutputLimits(minOut, maxOut);\n    this.pid.setPoint(setpoint);\n    this.pid.setTunings(inP, inI, inD);\n    this.pid.setControllerDirection(direction);\n    this.pid.setMode('auto');\n    this.pid.setInput(processVariable);\n    this.pid.compute();\n    this.setOutputData(0, this.calculatePidOutput(), true);\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[9]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n\n  private calculatePidOutput(): number {\n    return this.pid.getOutput().toFixed(1);\n  }\n}\nContainer.registerNodeType('hvac/PID', PIDFunctionNode);\n","/**\n * pid-controller -  A node advanced PID controller based on the Arduino PID library\n * github@wilberforce.co.nz Rhys Williams\n * Based on:\n * Arduino PID Library - Version 1.0.1\n * by Brett Beauregard <br3ttb@gmail.com> brettbeauregard.com\n *\n * This Library is licensed under a GPL-3.0 License\n */\n\n'use strict';\nvar PID = function(Input, Setpoint, Kp, Ki, Kd, ControllerDirection) {\n  this.input = Input;\n  this.mySetpoint = Setpoint;\n  this.inAuto = false;\n  this.setOutputLimits(0, 255); // default output limits\n  this.SampleTime = 100; // default Controller Sample Time is 0.1 seconds\n  this.setTunings(Kp, Ki, Kd);\n  this.setControllerDirection(ControllerDirection);\n  this.lastTime = this.millis() - this.SampleTime;\n\n  this.myBias = 0;\n  this.ITerm = 0;\n  this.myOutput = 0;\n};\n\n// Constants for backward compatibility\n// PID.AUTOMATIC = 1;\n// PID.MANUAL = 0;\n// PID.DIRECT = 0;\n// PID.REVERSE = 1;\n\nPID.prototype.setInput = function(current_value) {\n  this.input = Number(current_value);\n};\n\nPID.prototype.setPoint = function(current_value) {\n  this.mySetpoint = Number(current_value);\n};\n\nPID.prototype.setBias = function(current_value) {\n  if (current_value > this.outMax) {\n    current_value = this.outMax; // POSSIBLY INCORRECT\n  } else if (current_value < this.outMin) {\n    current_value = this.outMin;\n  }\n  this.myBias = Number(current_value);\n};\n\nPID.prototype.millis = function() {\n  var d = new Date();\n  return d.getTime();\n};\n\n/**\n * Compute()\n * This, as they say, is where the magic happens.  this function should be called\n * every time \"void loop()\" executes.  the function will decide for itself whether a new\n * pid Output needs to be computed.  returns true when the output is computed,\n * false when nothing has been done.\n */\n\nPID.prototype.compute = function() {\n  if (!this.inAuto) {\n    return false;\n  }\n\n  var now = this.millis();\n  var timeChange = now - this.lastTime;\n  if (timeChange >= this.SampleTime) {\n    // Compute all the working error variables\n    var input = this.input;\n\n    //var error = this.mySetpoint - input;\n    var error = input - this.mySetpoint; // above setpoint = positive error\n    error = error * this.setDirection;\n\n    this.ITerm += this.ki * error;\n    if (this.ITerm > this.outMax - this.myBias) {\n      this.ITerm = this.outMax - this.myBias;\n    } else if (this.ITerm < this.outMin - this.myBias) {\n      this.ITerm = this.outMin - this.myBias;\n    }\n\n    var dInput = input - this.lastInput;\n\n    // Compute PID Output\n    //var output = ((this.kp * error) + this.ITerm - (this.kd * dInput)) * this.setDirection;\n    var output = this.kp * error + this.ITerm - this.kd * dInput + this.myBias;\n    //var output = ((this.kp * error) + this.ITerm - (this.kd * dInput));\n\n    if (output > this.outMax) {\n      output = this.outMax;\n    } else if (output < this.outMin) {\n      output = this.outMin;\n    }\n    this.myOutput = output;\n\n    // Remember some variables for next time\n    this.lastInput = input;\n    this.lastTime = now;\n    return true;\n  } else {\n    return false;\n  }\n};\n\n/**\n * SetTunings(...)\n * This function allows the controller's dynamic performance to be adjusted.\n * it's called automatically from the constructor, but tunings can also\n * be adjusted on the fly during normal operation\n */\nPID.prototype.setTunings = function(Kp, Ki, Kd) {\n  if (Kp < 0 || Ki < 0 || Kd < 0) {\n    return;\n  }\n\n  this.dispKp = Kp;\n  this.dispKi = Ki;\n  this.dispKd = Kd;\n\n  this.SampleTimeInSec = this.SampleTime / 1000;\n  this.kp = Kp;\n  this.ki = Ki * this.SampleTimeInSec;\n  this.kd = Kd / this.SampleTimeInSec;\n};\n\n/**\n * SetSampleTime(...)\n * sets the period, in Milliseconds, at which the calculation is performed\n */\nPID.prototype.setSampleTime = function(NewSampleTime) {\n  if (NewSampleTime > 0) {\n    var ratio = NewSampleTime / (1.0 * this.SampleTime);\n    this.ki *= ratio;\n    this.kd /= ratio;\n    this.SampleTime = Math.round(NewSampleTime);\n  }\n};\n\n/**\n * SetOutput( )\n * Set output level if in manual mode\n */\nPID.prototype.setOutput = function(val) {\n  if (val > this.outMax) {\n    val = this.outMax; // POSSIBLY INCORRECT\n  } else if (val < this.outMin) {\n    val = this.outMin;\n  }\n  this.myOutput = val;\n};\n\n/**\n * SetOutputLimits(...)\n * This function will be used far more often than SetInputLimits.  while\n * the input to the controller will generally be in the 0-1023 range (which is\n * the default already,)  the output will be a little different.  maybe they'll\n * be doing a time window and will need 0-8000 or something.  or maybe they'll\n * want to clamp it from 0-125.  who knows.  at any rate, that can all be done here.\n */\nPID.prototype.setOutputLimits = function(Min, Max) {\n  if (Min >= Max) {\n    return;\n  }\n  this.outMin = Min;\n  this.outMax = Max;\n\n  if (this.inAuto) {\n    if (this.myOutput > this.outMax) {\n      this.myOutput = this.outMax;\n    } else if (this.myOutput < this.outMin) {\n      this.myOutput = this.outMin;\n    }\n\n    if (this.ITerm > this.outMax - this.myBias) {\n      this.ITerm = this.outMax - this.myBias;\n    } else if (this.ITerm < this.outMin - this.myBias) {\n      this.ITerm = this.outMin - this.myBias;\n    }\n  }\n};\n\n/**\n * SetMode(...)\n * Allows the controller Mode to be set to manual (0) or Automatic (non-zero)\n * when the transition from manual to auto occurs, the controller is\n * automatically initialized\n */\nPID.prototype.setMode = function(Mode) {\n  var newAuto;\n  if (\n    Mode == 0 ||\n    Mode.toString().toLowerCase() == 'automatic' ||\n    Mode.toString().toLowerCase() == 'auto'\n  ) {\n    newAuto = 1;\n  } else if (Mode == 1 || Mode.toString().toLowerCase() == 'manual') {\n    newAuto = 0;\n  } else {\n    throw new Error('Incorrect Mode Chosen');\n  }\n  /*  Removed in favor of manually triggered 'Reset'(using Initialize()).\n  if (newAuto == !this.inAuto) {\n    //we just went from manual to auto\n    this.initialize();   \n  }\n  */\n  this.inAuto = newAuto;\n};\n\n/**\n * Initialize()\n * does all the things that need to happen to ensure a bumpless transfer\n * from manual to automatic mode.\n */\nPID.prototype.initialize = function() {\n  //this.ITerm = this.myOutput;\n  this.ITerm = 0;\n  this.myOutput = this.myBias;\n  this.lastInput = this.input;\n  /*\n  if (this.ITerm > this.outMax) {\n    this.ITerm = this.outMax;\n  } else if (this.ITerm < this.outMin) {\n    this.ITerm = this.outMin;\n  }\n  */\n};\n\n/**\n * SetControllerDirection(...)\n * The PID will either be connected to a DIRECT acting process (+Output leads\n * to +Input) or a REVERSE acting process(+Output leads to -Input.)  we need to\n * know which one, because otherwise we may increase the output when we should\n * be decreasing.  This is called from the constructor.\n */\nPID.prototype.setControllerDirection = function(ControllerDirection) {\n  if (ControllerDirection == 0 || ControllerDirection.toString().toLowerCase() == 'direct') {\n    this.setDirection = 1;\n  } else if (\n    ControllerDirection == 1 ||\n    ControllerDirection.toString().toLowerCase() == 'reverse'\n  ) {\n    this.setDirection = -1;\n  } else {\n    throw new Error('Incorrect Controller Direction Chosen');\n  }\n};\n\n/**\n * Status Functions\n * Just because you set the Kp=-1 doesn't mean it actually happened.  these\n * functions query the internal state of the PID.  they're here for display\n * purposes.  this are the functions the PID Front-end uses for example\n */\nPID.prototype.getKp = function() {\n  return this.dispKp;\n};\n\nPID.prototype.getKd = function() {\n  return this.dispKd;\n};\n\nPID.prototype.getKi = function() {\n  return this.dispKi;\n};\n\nPID.prototype.getMode = function() {\n  return this.inAuto ? 'Auto' : 'Manual';\n};\n\nPID.prototype.getDirection = function() {\n  return this.controllerDirection;\n};\n\nPID.prototype.getOutput = function() {\n  return this.myOutput;\n};\n\nPID.prototype.getInput = function() {\n  return this.input;\n};\n\nPID.prototype.getSetPoint = function() {\n  return this.mySetpoint;\n};\n\nPID.prototype.getBias = function() {\n  return this.myBias;\n};\n\nmodule.exports = PID;\n","import { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass ToggleDurationNode extends Node {\n  startTime;\n  lastTrigger;\n  runState;\n  runtimeVal;\n  timeoutFunc;\n\n  constructor() {\n    super();\n  \n    this.title = NODE_INFO.hvac[\"toggle-duration\"].title;\n    this.description = NODE_INFO.hvac[\"toggle-duration\"].description;\n   \n    this.addInput('pushButton', Type.BOOLEAN);\n    this.addInputWithSettings('runtime', Type.NUMBER, 120, 'Runtime');\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('remainingRuntime', Type.NUMBER);\n    \n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.SECONDS, text: 'Seconds' },\n          { value: TIME_TYPE.MINUTES, text: 'Minutes' },\n          { value: TIME_TYPE.HOURS, text: 'Hours' },\n        ],\n      },\n      value: TIME_TYPE.MINUTES,\n    });\n    this.settings['useOffDelay'] = NodeSetting.create({\n      description: 'Long Hold for OFF?',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['offDelay'] = NodeSetting.create({\n      description: 'OFF Push Delay (Seconds)',\n      value: 20,\n      type: SettingType.NUMBER,\n    });\n    this.setSettingsConfig({\n      groups: [\n        { runtime: { weight: 2 }, time: {} },\n      ],\n      conditions: {\n        offDelay: setting => !!setting['useOffDelay'].value,\n      },\n    });\n  }\n\n  onCreated() {\n    this.setOutputData(0, false);\n    this.lastTrigger = false;\n    this.onAfterSettingsChange();\n  }\n\n  onAdded() {\n    this.inputs[1]['name'] = `[runtime] (${this.settings['time'].value})`;\n    this.EXECUTE_INTERVAL = 10000;\n    this.onAfterSettingsChange();\n  }\n\n  onExecute() {\n    if (this.runState) {\n      const remainingMins = (this.runtimeVal - (new Date().valueOf() - this.startTime)) * 1.6667e-5;\n      this.setOutputData(1, remainingMins.toFixed(1));\n      if (remainingMins <= 0) this.stop();\n    }\n  }\n\n  onInputUpdated() {\n    let trigger = this.getInputData(0);\n    if (trigger == null) this.lastTrigger = false;\n    if (!trigger) this.properties['offPushStartTime'] = null;\n    else if (trigger && !this.lastTrigger) {\n      let runtime = this.getInputData(1);\n      runtime = TimeUtils.timeConvert(runtime, this.settings['time'].value);\n      if (this.runState){ \n        if (this.settings['useOffDelay'].value && this.properties['offPushStartTime'] == null){\n          this.startCountdown();\n        }\n        else this.stop();\n      }\n      else this.start(runtime);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  startCountdown(){\n    this.properties['offPushStartTime'] = Date.now();\n    this.timeoutFunc = setInterval(() => {\n      const trigger = this.getInputData(0);\n      console.log(\"checking if the button is till held\")\n      if (!trigger || !this.settings['useOffDelay'].value) {\n        this.properties['offPushStartTime'] = null;\n        clearInterval(this.timeoutFunc);\n      }\n      else if ((this.properties['offPushStartTime'] + TimeUtils.timeConvert(this.settings['offDelay'].value, TIME_TYPE.SECONDS)) <= Date.now()) {\n        this.properties['offPushStartTime'] = null;\n        clearInterval(this.timeoutFunc);\n        this.stop();\n      }\n    }, 1000);\n  }\n\n  start(runtime) {\n    this.runState = true;\n    this.runtimeVal = runtime;\n    this.EXECUTE_INTERVAL = Math.max(Math.min(10000, runtime / 10), 250);\n    this.startTime = new Date().valueOf();\n    this.setOutputData(0, true);\n    this.onExecute();\n  }\n\n  stop() {\n    this.runState = false;\n    this.setOutputData(0, false);\n    this.setOutputData(1, 0);\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[1]['name'] = `[runtime] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n}\nNodeTypeRegistry.registerNodeType('hvac/toggle-duration', ToggleDurationNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nconst psychrolib = require('../../lib/psychrolib');\n\nclass PsychrometricCalculationsNode extends Node {\n  psychro = new psychrolib();\n  conversionFunction;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.hvac.psychrometrics.title;\n    this.description = NODE_INFO.hvac.psychrometrics.description;\n    this.addInput('DryBulb', Type.NUMBER);\n    this.addInput('RelHum(0-1)', Type.NUMBER);\n    this.addInput('Pressure', Type.NUMBER);\n    this.addOutput('HumRatio', Type.NUMBER);\n    this.addOutput('TWetBulb', Type.NUMBER);\n    this.addOutput('TDewPoint', Type.NUMBER);\n    this.addOutput('VapPres', Type.NUMBER);\n    this.addOutput('MoistAirEnthalpy', Type.NUMBER);\n    this.addOutput('MoistAirVolume', Type.NUMBER);\n    this.addOutput('DegreeOfSaturation', Type.NUMBER);\n    this.addOutput('error', Type.STRING);\n    this.settings['units'] = NodeSetting.create({\n      description: 'Select Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'SI', text: 'Metric/SI' },\n          { value: 'IP', text: 'Imperial/IP' },\n        ],\n      },\n      value: 'SI',\n    });\n    this.settings['inputsSelect'] = NodeSetting.create({\n      description: 'Select Inputs',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'DB_RH_P', text: 'Dry Bulb, Rel. Humidity, Pressure' },\n          { value: 'DB_WB_P', text: 'Dry Bulb, Wet Bulb, Pressure' },\n          { value: 'DB_DP_P', text: 'Dry Bulb, Dew Point, Pressure ' },\n        ],\n      },\n      value: 'DB_RH_P',\n    });\n    this.settings['precision'] = NodeSetting.create({ description: 'Precision', type: SettingType.NUMBER, value: 4 });\n    this.psychro.SetUnitSystem(this.psychro.SI);\n  }\n\n  onAdded() {\n    this.setConversionFunction();\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.setConversionFunction();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    const input1 = this.getInputData(0);\n    const input2 = this.getInputData(1);\n    const input3 = this.getInputData(2);\n\n    if (!Utils.hasInput(input1) || !Utils.hasInput(input2) || !Utils.hasInput(input3)) {\n      this.clearOutputs();\n      this.setOutputData(7, null);\n      return;\n    }\n\n    let outputArray: number[];\n    try {\n      outputArray = this.conversionFunction(input1, input2, input3);\n    } catch (error) {\n      this.clearOutputs();\n      this.setOutputData(7, String(error));\n      return;\n    }\n    const precision = Math.abs(this.settings['precision'].value);\n    this.setOutputData(0, Number(outputArray[0]).toFixed(precision));\n    this.setOutputData(1, Number(outputArray[1]).toFixed(precision));\n    this.setOutputData(2, Number(outputArray[2]).toFixed(precision));\n    this.setOutputData(3, Number(outputArray[3]).toFixed(precision));\n    this.setOutputData(4, Number(outputArray[4]).toFixed(precision));\n    this.setOutputData(5, Number(outputArray[5]).toFixed(precision));\n    this.setOutputData(6, Number(outputArray[6]).toFixed(precision));\n    this.setOutputData(7, null);\n  }\n\n  private clearOutputs() {\n    this.setOutputData(0, null);\n    this.setOutputData(1, null);\n    this.setOutputData(2, null);\n    this.setOutputData(3, null);\n    this.setOutputData(4, null);\n    this.setOutputData(5, null);\n    this.setOutputData(6, null);\n  }\n\n  private setConversionFunction() {\n    const units = this.settings['units'].value;\n    if (units == 'IP') {\n      this.psychro.SetUnitSystem(this.psychro.IP);\n      this.title = 'Psychrometric Calcs (Imperial/IP)';\n    } else {\n      this.psychro.SetUnitSystem(this.psychro.SI);\n      this.title = 'Psychrometric Calcs (Metric/SI)';\n    }\n\n    const conversion = this.settings['inputsSelect'].value;\n    switch (conversion) {\n      case 'DB_RH_P':\n        this.inputs[0].name = 'DryBulb';\n        this.inputs[1].name = 'RelHum(0-1)';\n        this.inputs[2].name = 'Pressure';\n        this.outputs[0].name = 'HumRatio';\n        this.outputs[1].name = 'TWetBulb';\n        this.outputs[2].name = 'TDewPoint';\n        this.conversionFunction = (in1, in2, in3) => {\n          return this.psychro.CalcPsychrometricsFromRelHum(in1, in2, in3);\n        };\n        break;\n      case 'DB_WB_P':\n        this.inputs[0].name = 'DryBulb';\n        this.inputs[1].name = 'TWetBulb';\n        this.inputs[2].name = 'Pressure';\n        this.outputs[0].name = 'HumRatio';\n        this.outputs[1].name = 'TDewPoint';\n        this.outputs[2].name = 'RelHum';\n        this.conversionFunction = (in1, in2, in3) => {\n          return this.psychro.CalcPsychrometricsFromTWetBulb(in1, in2, in3);\n        };\n        break;\n      case 'DB_DP_P':\n        this.inputs[0].name = 'DryBulb';\n        this.inputs[1].name = 'TDewPoint';\n        this.inputs[2].name = 'Pressure';\n        this.outputs[0].name = 'HumRatio';\n        this.outputs[1].name = 'TWetBulb';\n        this.outputs[2].name = 'RelHum';\n        this.conversionFunction = (in1, in2, in3) => {\n          return this.psychro.CalcPsychrometricsFromTDewPoint(in1, in2, in3);\n        };\n        break;\n      default:\n        this.inputs[0].name = 'DryBulb';\n        this.inputs[1].name = 'RelHum(0-1)';\n        this.inputs[2].name = 'Pressure';\n        this.outputs[0].name = 'HumRatio';\n        this.outputs[1].name = 'TWetBulb';\n        this.outputs[2].name = 'TDewPoint';\n        this.conversionFunction = (in1, in2, in3) => {\n          return this.psychro.CalcPsychrometricsFromRelHum(in1, in2, in3);\n        };\n    }\n  }\n}\nContainer.registerNodeType('hvac/psychrometrics', PsychrometricCalculationsNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass EnergyUnitConversionNode extends Node {\n  conversionFunction;\n\n  constructor() {\n    super();\n   \n    this.title = NODE_INFO.hvac[\"energy-conversion\"].title;\n    this.description = NODE_INFO.hvac[\"energy-conversion\"].description;\n\n    this.addInput('W·h', Type.NUMBER);\n    this.addOutput('kW·h', Type.NUMBER);\n    this.addOutput('Btu', Type.NUMBER);\n    this.addOutput('cal', Type.NUMBER);\n    this.addOutput('J', Type.NUMBER);\n    this.addOutput('kJ', Type.NUMBER);\n    this.settings['inputType'] = NodeSetting.create({\n      description: 'Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'W·h', text: 'watt-hour (W·h)' },\n          { value: 'kW·h', text: 'kilowatt-hour (kW·h)' },\n          { value: 'Btu', text: 'British Thermal Unit (Btu)' },\n          { value: 'cal', text: 'calorie (cal)' },\n          { value: 'J', text: 'joule(J)' },\n          { value: 'kJ', text: 'kilojoule(kJ)' },\n        ],\n      },\n      value: 'W·h',\n    });\n    this.settings['precision'] = NodeSetting.create({ description: 'Precision', type: SettingType.NUMBER, value: '4' });\n  }\n\n  onAdded() {\n    this.setConversionFunction();\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.setConversionFunction();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    const input = this.getInputData(0);\n    if (!Utils.hasInput(input)) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n      this.setOutputData(2, null);\n      this.setOutputData(3, null);\n      this.setOutputData(4, null);\n      return;\n    }\n    const output = this.conversionFunction(input);\n    const precision = Math.abs(this.settings['precision'].value);\n    this.setOutputData(0, Number(output[0]).toFixed(precision));\n    this.setOutputData(1, Number(output[1]).toFixed(precision));\n    this.setOutputData(2, Number(output[2]).toFixed(precision));\n    this.setOutputData(3, Number(output[3]).toFixed(precision));\n    this.setOutputData(4, Number(output[4]).toFixed(precision));\n  }\n\n  setConversionFunction() {\n    const inputType = this.settings['inputType'].value;\n    switch (inputType) {\n      case 'W·h':\n        this.title = 'Energy Conversion (W·h)';\n        this.inputs[0].name = 'W·h';\n        this.outputs[0].name = 'kW·h';\n        this.outputs[1].name = 'Btu';\n        this.outputs[2].name = 'cal';\n        this.outputs[3].name = 'J';\n        this.outputs[4].name = 'kJ';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null, null];\n          outputArray[0] = input * 0.001;\n          outputArray[1] = input * 3.4121416331;\n          outputArray[2] = input * 859.8456;\n          outputArray[3] = input * 3600;\n          outputArray[4] = input * 3.6;\n          return outputArray;\n        };\n        break;\n      case 'kW·h':\n        this.title = 'Energy Conversion (kW·h)';\n        this.inputs[0].name = 'kW·h';\n        this.outputs[0].name = 'W·h';\n        this.outputs[1].name = 'Btu';\n        this.outputs[2].name = 'cal';\n        this.outputs[3].name = 'J';\n        this.outputs[4].name = 'kJ';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null, null];\n          outputArray[0] = input * 1000;\n          outputArray[1] = input * 3412.1416331279;\n          outputArray[2] = input * 859845.6;\n          outputArray[3] = input * 3600000;\n          outputArray[4] = input * 3600;\n          return outputArray;\n        };\n        break;\n      case 'Btu':\n        this.title = 'Energy Conversion (Btu)';\n        this.inputs[0].name = 'Btu';\n        this.outputs[0].name = 'W·h';\n        this.outputs[1].name = 'kW·h';\n        this.outputs[2].name = 'cal';\n        this.outputs[3].name = 'J';\n        this.outputs[4].name = 'kJ';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null, null];\n          outputArray[0] = input * 0.2930710702;\n          outputArray[1] = input * 0.0002930711;\n          outputArray[2] = input * 251.99587;\n          outputArray[3] = input * 1055.05585262;\n          outputArray[4] = input * 1.0550558526;\n          return outputArray;\n        };\n        break;\n      case 'cal':\n        this.title = 'Energy Conversion (cal)';\n        this.inputs[0].name = 'cal';\n        this.outputs[0].name = 'W·h';\n        this.outputs[1].name = 'kW·h';\n        this.outputs[2].name = 'Btu';\n        this.outputs[3].name = 'J';\n        this.outputs[4].name = 'kJ';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null, null];\n          outputArray[0] = input * 0.0011629995;\n          outputArray[1] = input * 0.000001163;\n          outputArray[2] = input * 0.003968319;\n          outputArray[3] = input * 4.1867982;\n          outputArray[4] = input * 0.0041867982;\n          return outputArray;\n        };\n        break;\n      case 'J':\n        this.title = 'Energy Conversion (J)';\n        this.inputs[0].name = 'J';\n        this.outputs[0].name = 'W·h';\n        this.outputs[1].name = 'kW·h';\n        this.outputs[2].name = 'Btu';\n        this.outputs[3].name = 'cal';\n        this.outputs[4].name = 'kJ';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null, null];\n          outputArray[0] = input * 0.0002777778;\n          outputArray[1] = input * 0.0000002777778;\n          outputArray[2] = input * 0.0009478171;\n          outputArray[3] = input * 0.238846;\n          outputArray[4] = input * 0.001;\n          return outputArray;\n        };\n        break;\n      case 'kJ':\n        this.title = 'Energy Conversion (kJ)';\n        this.inputs[0].name = 'kJ';\n        this.outputs[0].name = 'W·h';\n        this.outputs[1].name = 'kW·h';\n        this.outputs[2].name = 'Btu';\n        this.outputs[3].name = 'cal';\n        this.outputs[4].name = 'J';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null, null];\n          outputArray[0] = input * 0.2777777778;\n          outputArray[1] = input * 0.0002777778;\n          outputArray[2] = input * 0.9478171203;\n          outputArray[3] = input * 238.846;\n          outputArray[4] = input * 1000;\n          return outputArray;\n        };\n        break;\n      default:\n        this.title = 'Energy Conversion (W·h)';\n        this.inputs[0].name = 'W·h';\n        this.outputs[0].name = 'kW·h';\n        this.outputs[1].name = 'Btu';\n        this.outputs[2].name = 'cal';\n        this.outputs[3].name = 'J';\n        this.outputs[4].name = 'kJ';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null, null];\n          outputArray[0] = input * 0.001;\n          outputArray[1] = input * 3.4121416331;\n          outputArray[2] = input * 859.8456;\n          outputArray[3] = input * 3600;\n          outputArray[4] = input * 3.6;\n          return outputArray;\n        };\n    }\n  }\n}\nContainer.registerNodeType('hvac/energy-conversion', EnergyUnitConversionNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass PowerUnitConversionNode extends Node {\n  conversionFunction;\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.hvac[\"power-conversion\"].title;\n    this.description = NODE_INFO.hvac[\"power-conversion\"].description;\n\n    this.addInput('kW', Type.NUMBER);\n    this.addOutput('tons', Type.NUMBER);\n    this.addOutput('Btu/h', Type.NUMBER);\n    this.addOutput('hp', Type.NUMBER);\n    this.settings['inputType'] = NodeSetting.create({\n      description: 'Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'kW', text: 'kilowatt (kW)' },\n          { value: 'tons', text: 'Tons of Refrigeration (tons)' },\n          { value: 'Btu/h', text: 'British Thermal Unit per hour (Btu/h)' },\n          { value: 'hp', text: 'Electrical Horsepower (hp)' },\n        ],\n      },\n      value: 'kW',\n    });\n    this.settings['precision'] = NodeSetting.create({ description: 'Precision', type: SettingType.NUMBER, value: '4' });\n  }\n\n  onAdded() {\n    this.setConversionFunction();\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.setConversionFunction();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    const input = this.getInputData(0);\n    if (!Utils.hasInput(input)) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n      this.setOutputData(2, null);\n\n      return;\n    }\n    const output = this.conversionFunction(input);\n    const precision = Math.abs(this.settings['precision'].value);\n    this.setOutputData(0, Number(output[0]).toFixed(precision));\n    this.setOutputData(1, Number(output[1]).toFixed(precision));\n    this.setOutputData(2, Number(output[2]).toFixed(precision));\n  }\n\n  setConversionFunction() {\n    const inputType = this.settings['inputType'].value;\n    switch (inputType) {\n      case 'kW':\n        this.title = 'Power Conversion (kW)';\n        this.inputs[0].name = 'kW';\n        this.outputs[0].name = 'tons';\n        this.outputs[1].name = 'Btu/h';\n        this.outputs[2].name = 'hp';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 0.284345;\n          outputArray[1] = input * 3412.141635133076;\n          outputArray[2] = input * 1.340482573727;\n          return outputArray;\n        };\n        break;\n      case 'tons':\n        this.title = 'Power Conversion (tons)';\n        this.inputs[0].name = 'tons';\n        this.outputs[0].name = 'kW';\n        this.outputs[1].name = 'Btu/h';\n        this.outputs[2].name = 'hp';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 3.51685;\n          outputArray[1] = input * 12000;\n          outputArray[2] = input * 4.71427613941;\n          return outputArray;\n        };\n        break;\n      case 'Btu/h':\n        this.title = 'Power Conversion (Btu/h)';\n        this.inputs[0].name = 'Btu/h';\n        this.outputs[0].name = 'kW';\n        this.outputs[1].name = 'tons';\n        this.outputs[2].name = 'hp';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 0.00029307107;\n          outputArray[1] = input * 8.33333332843549e-5;\n          outputArray[2] = input * 0.000392856662;\n          return outputArray;\n        };\n        break;\n      case 'hp':\n        this.title = 'Power Conversion (hp)';\n        this.inputs[0].name = 'hp';\n        this.outputs[0].name = 'kW';\n        this.outputs[1].name = 'tons';\n        this.outputs[2].name = 'Btu/h';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 0.746;\n          outputArray[1] = input * 2545.457659809275;\n          outputArray[2] = input * 0.21212147;\n          return outputArray;\n        };\n        break;\n      default:\n        this.title = 'Power Conversion (kW)';\n        this.inputs[0].name = 'kW';\n        this.outputs[0].name = 'tons';\n        this.outputs[1].name = 'Btu/h';\n        this.outputs[2].name = 'hp';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 0.284345;\n          outputArray[1] = input * 3412.141635133076;\n          outputArray[2] = input * 1.340482573727;\n          return outputArray;\n        };\n    }\n  }\n}\nContainer.registerNodeType('hvac/power-conversion', PowerUnitConversionNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass VolumeUnitConversionNode extends Node {\n  conversionFunction;\n\n  constructor() {\n    super();\n    \n    this.title = NODE_INFO.hvac[\"volume-conversion\"].title;\n    this.description = NODE_INFO.hvac[\"volume-conversion\"].description;\n   \n    this.addInput('L', Type.NUMBER);\n    this.addOutput('M³', Type.NUMBER);\n    this.addOutput('ft³', Type.NUMBER);\n    this.addOutput('gal', Type.NUMBER);\n    this.settings['inputType'] = NodeSetting.create({\n      description: 'Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'L', text: 'Litre (L)' },\n          { value: 'm³', text: 'Cubic Metre (m³)' },\n          { value: 'ft³', text: 'Cubic Foot (ft³)' },\n          { value: 'gal', text: 'Gallon (gal)' },\n        ],\n      },\n      value: 'L',\n    });\n    this.settings['precision'] = NodeSetting.create({ description: 'Precision', type: SettingType.NUMBER, value: '4' });\n  }\n\n  onAdded() {\n    this.setConversionFunction();\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.setConversionFunction();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    const input = this.getInputData(0);\n    if (!Utils.hasInput(input)) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n      this.setOutputData(2, null);\n\n      return;\n    }\n    const output = this.conversionFunction(input);\n    const precision = Math.abs(this.settings['precision'].value);\n    this.setOutputData(0, Number(output[0]).toFixed(precision));\n    this.setOutputData(1, Number(output[1]).toFixed(precision));\n    this.setOutputData(2, Number(output[2]).toFixed(precision));\n  }\n\n  private setConversionFunction() {\n    const inputType = this.settings['inputType'].value;\n    switch (inputType) {\n      case 'L':\n        this.title = 'Volume Conversion (L)';\n        this.inputs[0].name = 'L';\n        this.outputs[0].name = 'm³';\n        this.outputs[1].name = 'ft³';\n        this.outputs[2].name = 'gal';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 0.001;\n          outputArray[1] = input * 0.0353147;\n          outputArray[2] = input * 0.2642;\n          return outputArray;\n        };\n        break;\n      case 'm³':\n        this.title = 'Volume Conversion (m³)';\n        this.inputs[0].name = 'm³';\n        this.outputs[0].name = 'L';\n        this.outputs[1].name = 'ft³';\n        this.outputs[2].name = 'gal';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 1000;\n          outputArray[1] = input * 35.3147;\n          outputArray[2] = input * 264.2;\n          return outputArray;\n        };\n        break;\n      case 'ft³':\n        this.title = 'Volume Conversion (ft³)';\n        this.inputs[0].name = 'ft³';\n        this.outputs[0].name = 'm³';\n        this.outputs[1].name = 'L';\n        this.outputs[2].name = 'gal';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 0.0283168;\n          outputArray[1] = input * 28.3168;\n          outputArray[2] = input * 7.481;\n          return outputArray;\n        };\n        break;\n      case 'gal':\n        this.title = 'Volume Conversion (gal)';\n        this.inputs[0].name = 'gal';\n        this.outputs[0].name = 'm³';\n        this.outputs[1].name = 'L';\n        this.outputs[2].name = 'ft³';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 0.00378541;\n          outputArray[1] = input * 3.78541;\n          outputArray[2] = input * 0.133681;\n          return outputArray;\n        };\n        break;\n      default:\n        this.title = 'Volume Conversion (L)';\n        this.inputs[0].name = 'L';\n        this.outputs[0].name = 'm³';\n        this.outputs[1].name = 'ft³';\n        this.outputs[2].name = 'gal';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 0.001;\n          outputArray[1] = input * 0.0353147;\n          outputArray[2] = input * 0.2642;\n          return outputArray;\n        };\n    }\n  }\n}\nContainer.registerNodeType('hvac/volume-conversion', VolumeUnitConversionNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nconst psychrolib = require('../../lib/psychrolib');\n\nclass TempConvertNode extends Node {\n  conversionFunction;\n  psychro = new psychrolib();\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.hvac[\"temperature-conversion\"].title;\n    this.description = NODE_INFO.hvac[\"temperature-conversion\"].description;\n    this.addInput('input', Type.NUMBER);\n    this.addOutput('output', Type.NUMBER);\n    this.settings['convertType'] = NodeSetting.create({\n      description: 'Conversion Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'C_to_F', text: 'Celsius to Fahrenheit' },\n          { value: 'C_to_K', text: 'Celsius to Kelvin' },\n          { value: 'C_to_R', text: 'Celsius to Rankine' },\n          { value: 'F_to_C', text: 'Fahrenheit to Celsius' },\n          { value: 'F_to_K', text: 'Fahrenheit to Kelvin' },\n          { value: 'F_to_R', text: 'Fahrenheit to Rankine' },\n          { value: 'K_to_C', text: 'Kelvin to Celsius' },\n          { value: 'K_to_F', text: 'Kelvin to Fahrenheit' },\n          { value: 'K_to_R', text: 'Kelvin to Rankine' },\n          { value: 'R_to_C', text: 'Rankine to Celsius' },\n          { value: 'R_to_F', text: 'Rankine to Fahrenheit' },\n          { value: 'R_to_K', text: 'Rankine to Kelvin' },\n        ],\n      },\n      value: 'C_to_F',\n    });\n    this.settings['precision'] = NodeSetting.create({ description: 'Precision', type: SettingType.NUMBER, value: 2 });\n  }\n\n  onAdded() {\n    this.setConversionFunction();\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.setConversionFunction();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    const input = Number(this.getInputData(0));\n    if (!Utils.hasInput(input)) {\n      this.setOutputData(0, null);\n      return;\n    }\n    const precision = Math.abs(this.settings['precision'].value);\n    const output = Number(this.conversionFunction(input)).toFixed(precision);\n    this.setOutputData(0, output);\n  }\n\n  private setConversionFunction() {\n    const conversion = this.settings['convertType'].value;\n    console.log(conversion, ': converstion');\n    switch (conversion) {\n      case 'C_to_F':\n        this.title = 'Temperature Conversion (C-> F)';\n        this.conversionFunction = this.psychro.GetTFahrenheitFromTCelsius;\n        break;\n      case 'C_to_K':\n        this.title = 'Temperature Conversion (C-> K)';\n        console.log('C_to_K');\n        this.conversionFunction = this.psychro.GetTKelvinFromTCelsius;\n        break;\n      case 'C_to_R':\n        this.title = 'Temperature Conversion (C-> R)';\n        this.conversionFunction = this.psychro.GetTRankineFromTCelsius;\n        break;\n      case 'F_to_C':\n        this.title = 'Temperature Conversion (F-> C)';\n        this.conversionFunction = this.psychro.GetTCelsiusFromTFahrenheit;\n        break;\n      case 'F_to_K':\n        this.title = 'Temperature Conversion (F-> K)';\n        this.conversionFunction = this.psychro.GetTKelvinFromTFahrenheit;\n        break;\n      case 'F_to_R':\n        this.title = 'Temperature Conversion (F-> R)';\n        this.conversionFunction = this.psychro.GetTRankineFromTFahrenheit;\n        break;\n      case 'K_to_C':\n        this.title = 'Temperature Conversion (K-> C)';\n        this.conversionFunction = this.psychro.GetTCelsiusFromTKelvin;\n        break;\n      case 'K_to_F':\n        this.title = 'Temperature Conversion (K-> F)';\n        this.conversionFunction = this.psychro.GetTFahrenheitFromTKelvin;\n        break;\n      case 'K_to_R':\n        this.title = 'Temperature Conversion (K-> R)';\n        this.conversionFunction = this.psychro.GetTRankineFromTKelvin;\n        break;\n      case 'R_to_C':\n        this.title = 'Temperature Conversion (R-> C)';\n        this.conversionFunction = this.psychro.GetTCelsiusFromTRankine;\n        break;\n      case 'R_to_F':\n        this.title = 'Temperature Conversion (R-> F)';\n        this.conversionFunction = this.psychro.GetTFahrenheitFromTRankine;\n        break;\n      case 'R_to_K':\n        this.title = 'Temperature Conversion (R-> K)';\n        this.conversionFunction = this.psychro.GetTKelvinFromTRankine;\n        break;\n      default:\n        this.title = 'Temperature Conversion (C-> F)';\n        this.conversionFunction = this.psychro.GetTFahrenheitFromTCelsius;\n    }\n  }\n}\nContainer.registerNodeType('hvac/temperature-conversion', TempConvertNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nconst psychrolib = require('../../lib/psychrolib');\n\nclass AtmosphericPressureNode extends Node {\n  psychro = new psychrolib();\n\n  constructor() {\n    super();\n   \n    this.title = NODE_INFO.hvac[\"atmospheric-pressure\"].title;\n    this.description = NODE_INFO.hvac[\"atmospheric-pressure\"].description;\n\n    this.addInput('altitude', Type.NUMBER);\n    this.addOutput('pressure', Type.NUMBER);\n    this.settings['units'] = NodeSetting.create({\n      description: 'Select Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'SI', text: 'Metric/SI (Meters-> Pa)' },\n          { value: 'IP', text: 'Imperial/IP (Feet-> Psi)' },\n        ],\n      },\n      value: 'SI',\n    });\n    this.settings['precision'] = NodeSetting.create({ description: 'Precision', type: SettingType.NUMBER, value: 2 });\n    this.psychro.SetUnitSystem(this.psychro.SI);\n  }\n\n  onAdded() {\n    this.updateTitleAndFunction();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.updateTitleAndFunction();\n    this.onInputOrSettingsChange();\n  }\n\n  private updateTitleAndFunction() {\n    const units = this.settings['units'].value;\n    if (units == 'IP') {\n      this.title = 'Atmospheric Pressure (Feet-> Psi)';\n      this.psychro.SetUnitSystem(this.psychro.IP);\n    } else {\n      this.title = 'Atmospheric Pressure (Meters-> Pa)';\n      this.psychro.SetUnitSystem(this.psychro.SI);\n    }\n  }\n\n  private onInputOrSettingsChange() {\n    const altitude = this.getInputData(0);\n    if (!Utils.hasInput(altitude)) {\n      this.setOutputData(0, null);\n      return;\n    }\n    const pressure = this.psychro.GetStandardAtmPressure(altitude);\n    const precision = Math.abs(this.settings['precision'].value);\n    this.setOutputData(0, Number(pressure).toFixed(precision));\n  }\n}\nContainer.registerNodeType('hvac/atmospheric-pressure', AtmosphericPressureNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass PressureConvertNode extends Node {\n  conversionFunction;\n  constructor() {\n    super();\n   \n    this.title = NODE_INFO.hvac[\"pressure-conversion\"].title;\n    this.description = NODE_INFO.hvac[\"pressure-conversion\"].description;\n   \n    this.addInput('Pa', Type.NUMBER);\n    this.addOutput('atm', Type.NUMBER);\n    this.addOutput('bar', Type.NUMBER);\n    this.addOutput('lbf/in2', Type.NUMBER);\n    this.settings['inputType'] = NodeSetting.create({\n      description: 'Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'Pa', text: 'Pascal (Pa)' },\n          { value: 'atm', text: 'Standard Atmosphere (atm)' },\n          { value: 'bar', text: 'Bar (bar)' },\n          { value: 'lbf/in2', text: 'Pound-force per square inch (lbf/in2)' },\n        ],\n      },\n      value: 'Pa',\n    });\n    this.settings['precision'] = NodeSetting.create({ description: 'Precision', type: SettingType.NUMBER, value: '2' });\n  }\n\n  onAdded() {\n    this.setConversionFunction();\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.setConversionFunction();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    const input = this.getInputData(0);\n    if (!Utils.hasInput(input)) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n      this.setOutputData(2, null);\n      return;\n    }\n    const output = this.conversionFunction(input);\n    const precision = Math.abs(this.settings['precision'].value);\n    this.setOutputData(0, Number(output[0]).toFixed(precision));\n    this.setOutputData(1, Number(output[1]).toFixed(precision));\n    this.setOutputData(2, Number(output[2]).toFixed(precision));\n  }\n\n  setConversionFunction() {\n    const inputType = this.settings['inputType'].value;\n    switch (inputType) {\n      case 'Pa':\n        this.title = 'Pressure Conversion (Pa)';\n        this.inputs[0].name = 'Pa';\n        this.outputs[0].name = 'atm';\n        this.outputs[1].name = 'bar';\n        this.outputs[2].name = 'lbf/in2';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 9.8692e-6;\n          outputArray[1] = input * 1e-5;\n          outputArray[2] = input * 0.000145038;\n          return outputArray;\n        };\n        break;\n      case 'atm':\n        this.title = 'Pressure Conversion (atm)';\n        this.inputs[0].name = 'atm';\n        this.outputs[0].name = 'Pa';\n        this.outputs[1].name = 'bar';\n        this.outputs[2].name = 'lbf/in2';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 101325;\n          outputArray[1] = input * 1.01325;\n          outputArray[2] = input * 14.6959;\n          return outputArray;\n        };\n        break;\n      case 'bar':\n        this.title = 'Pressure Conversion (bar)';\n        this.inputs[0].name = 'bar';\n        this.outputs[0].name = 'Pa';\n        this.outputs[1].name = 'atm';\n        this.outputs[2].name = 'lbf/in2';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 100000;\n          outputArray[1] = input * 0.986923;\n          outputArray[2] = input * 14.5038;\n          return outputArray;\n        };\n        break;\n      case 'lbf/in2':\n        this.title = 'Pressure Conversion (lbf/in2)';\n        this.inputs[0].name = 'lbf/in2';\n        this.outputs[0].name = 'Pa';\n        this.outputs[1].name = 'atm';\n        this.outputs[2].name = 'bar';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 6894.76;\n          outputArray[1] = input * 0.068046;\n          outputArray[2] = input * 0.0689476;\n          return outputArray;\n        };\n        break;\n      default:\n        this.title = 'Pressure Conversion (Pa)';\n        this.inputs[0].name = 'Pa';\n        this.outputs[0].name = 'atm';\n        this.outputs[1].name = 'bar';\n        this.outputs[2].name = 'lbf/in2';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 9.8692e-6;\n          outputArray[1] = input * 1e-5;\n          outputArray[2] = input * 0.000145038;\n          return outputArray;\n        };\n    }\n  }\n}\nContainer.registerNodeType('hvac/pressure-conversion', PressureConvertNode);\n","import { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass ActuatorSizingNode extends Node {\n  conversionFunction;\n  constructor() {\n    super();\n   \n    this.title = NODE_INFO.hvac[\"actuator-sizing\"].title;\n    this.description = NODE_INFO.hvac[\"actuator-sizing\"].description;\n   \n    this.addInput('damperArea(m²)', Type.NUMBER);\n    this.addOutput('torque(Nm)', Type.NUMBER);\n    this.addOutput('torque(lbf-in)', Type.NUMBER);\n\n    this.settings['units'] = NodeSetting.create({\n      description: 'Input Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Square Meters (m²)' },\n          { value: false, text: 'Square Feet (ft²)' },\n        ],\n      },\n      value: true,\n    });\n\n    this.settings['type'] = NodeSetting.create({\n      description: 'Damper Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 6, text: 'No Seals (Low Resistance)' },\n          { value: 7, text: 'With Seals (Medium Resistance)' },\n          { value: 8, text: 'Fire/Smoke (High Resistance)' },\n        ],\n      },\n      value: 6,\n    });\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.updateTitles();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    var input = this.getInputData(0);\n    if (!Utils.hasInput(input)) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n      return;\n    }\n\n    if (this.settings['units'].value) input = input * 10.7639;\n    const type = this.settings['type'].value;\n\n    // calculations are roughly based on https://controltrends.org/by-industry/commercial-hvac/actuators-and-valves/05/sizing-electronic-damper-actuators/ (with sizing reduced slightly);\n    const outputm2 = input * type * 0.112985;\n    const outputft2 = input * type;\n\n    this.setOutputData(0, outputm2.toFixed(2));\n    this.setOutputData(1, outputft2.toFixed(2));\n  }\n\n  updateTitles(){\n    if (this.settings['units'].value) this.inputs[0].name = 'ductArea(m²)';\n    else this.inputs[0].name = 'ductArea(ft²)';\n  }\n}\nNodeTypeRegistry.registerNodeType('hvac/actuator-sizing', ActuatorSizingNode);\n","import { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass KFactorNode extends Node {\n  constructor() {\n    super();\n   \n    this.title = NODE_INFO.hvac[\"k-factor\"].title;\n    this.description = NODE_INFO.hvac[\"k-factor\"].description;\n   \n    this.addInput('ductArea(m²)', Type.NUMBER);\n    this.addInput('diffPressure(Pa)', Type.NUMBER);\n    this.addInput('airflow(L/s)', Type.NUMBER);\n    this.addOutput('Kfactor', Type.NUMBER);\n\n    this.settings['areaUnits'] = NodeSetting.create({\n      description: 'Duct Area Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Square Meters (m²)' },\n          { value: false, text: 'Square Feet (ft²)' },\n        ],\n      },\n      value: true,\n    });\n\n    this.settings['DPUnits'] = NodeSetting.create({\n      description: 'Differential Pressure Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Pascals (Pa)' },\n          { value: false, text: 'Inches of Water (in. w.g.)' },\n        ],\n      },\n      value: true,\n    });\n\n    this.settings['airflowUnits'] = NodeSetting.create({\n      description: 'Airflow Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Litres per Second (L/s)' },\n          { value: false, text: 'Cubic Feet per Minute (cfm)' },\n        ],\n      },\n      value: true,\n    });\n  }\n\n  onAdded() {\n    this.setOutputData(0, null);\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.updateTitles();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    var area = this.getInputData(0);\n    var DP = this.getInputData(1);\n    var airflow = this.getInputData(2);\n    if (area == null || DP == null || airflow == null) {\n      this.setOutputData(0, null);\n      return;\n    }\n\n    if (this.settings['areaUnits'].value) area = area * 10.7639;\n    if (this.settings['DPUnits'].value) DP = DP * 0.00401865;\n    if (this.settings['airflowUnits'].value) airflow = airflow * 2.11888;\n    \n    //Calculation reference https://cgproducts.johnsoncontrols.com/MET_PDF/6375120.PDF page 30\n    const kFactor = DP*Math.pow(((4005 * area)/airflow), 2);\n    this.setOutputData(0, kFactor.toFixed(2));\n\n  }\n\n  updateTitles(){\n    if (this.settings['areaUnits'].value) this.inputs[0].name = 'ductArea(m²)';\n    else this.inputs[0].name = 'ductArea(ft²)';\n    if (this.settings['areaUnits'].value) this.inputs[1].name = 'diffPressure(Pa)';\n    else this.inputs[1].name = 'diffPressure(in. w.g)';\n    if (this.settings['areaUnits'].value) this.inputs[0].name = 'airflow(L/s)';\n    else this.inputs[2].name = 'airflow(cfm)';\n  }\n}\nNodeTypeRegistry.registerNodeType('hvac/k-factor', KFactorNode);\n","import { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass DPAirflowNode extends Node {\n  constructor() {\n    super();\n   \n    this.title = NODE_INFO.hvac[\"dp-airflow\"].title;\n    this.description = NODE_INFO.hvac[\"dp-airflow\"].description;\n   \n    this.addInput('ductArea(m²)', Type.NUMBER);\n    this.addInput('diffPressure(Pa)', Type.NUMBER);\n    this.addInput('Kfactor', Type.NUMBER);\n    this.addOutput('airflow(L/s)', Type.NUMBER);\n    this.addOutput('airflow(cfm)', Type.NUMBER);\n\n    this.settings['areaUnits'] = NodeSetting.create({\n      description: 'Duct Area Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Square Meters (m²)' },\n          { value: false, text: 'Square Feet (ft²)' },\n        ],\n      },\n      value: true,\n    });\n\n    this.settings['DPUnits'] = NodeSetting.create({\n      description: 'Differential Pressure Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Pascals (Pa)' },\n          { value: false, text: 'Inches of Water (in. w.g.)' },\n        ],\n      },\n      value: true,\n    });\n  }\n\n  onAdded() {\n    this.setOutputData(0, null);\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.updateTitles();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    var area = this.getInputData(0);\n    var DP = this.getInputData(1);\n    var KFactor = this.getInputData(2);\n    if (area == null || DP == null || KFactor == null) {\n      this.setOutputData(0, null);\n      return;\n    }\n\n    if (this.settings['areaUnits'].value) area = area * 10.7639;\n    if (this.settings['DPUnits'].value) DP = DP * 0.00401865;\n    \n\n    //Calculation reference https://cgproducts.johnsoncontrols.com/MET_PDF/6375120.PDF page 30\n    const airflowCFM = (4005 * area) * Math.sqrt(DP/KFactor);\n    const airflowLS = airflowCFM * 0.4719474;\n\n    this.setOutputData(0, airflowLS.toFixed(2));\n    this.setOutputData(1, airflowCFM.toFixed(2));\n  }\n\n  updateTitles(){\n    if (this.settings['areaUnits'].value) this.inputs[0].name = 'ductArea(m²)';\n    else this.inputs[0].name = 'ductArea(ft²)';\n    if (this.settings['areaUnits'].value) this.inputs[1].name = 'diffPressure(Pa)';\n    else this.inputs[1].name = 'diffPressure(in. w.g)';\n  }\n}\nNodeTypeRegistry.registerNodeType('hvac/dp-airflow', DPAirflowNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass ArrayBuilderNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.STRING;\n    this.title = NODE_INFO.json[\"array-builder\"].title;\n    this.description = NODE_INFO.json[\"array-builder\"].description; \n    this.addOutput('out', Type.STRING);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let out = []\n    for (let i = this.dynamicInputStartPosition; i < this.getInputsCount(); i++) {\n      out.push(this.getInputData(i))\n    }\n    this.setOutputData(0, out);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('json/array-builder', ArrayBuilderNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass ArrayBuilderNumNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    this.title = NODE_INFO.json[\"array-builder-number\"].title;\n    this.description = NODE_INFO.json[\"array-builder-number\"].description; \n    this.addOutput('out', Type.STRING);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let out = []\n    for (let i:any = this.dynamicInputStartPosition; i < this.getInputsCount(); i++) {\n      out.push(this.getInputData(parseInt(i)))\n    }\n    this.setOutputData(0, out);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('json/array-builder-number', ArrayBuilderNumNode);\n","import { Node } from '../../node';\nimport { Container } from '../../container';\nimport * as _ from 'lodash';\nimport { Type } from '../../node-io';\nimport { isNull } from '../../../utils/helper';\nimport { NODE_INFO } from '../../node-info';\n\nexport class ArrayCombineNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"array-combine\"].title;\n    this.description = NODE_INFO.json[\"array-combine\"].description; \n    this.addInput('input-1', Type.JSON);\n    this.addInput('input-2', Type.JSON);\n    this.addOutput('output-array', Type.JSON);\n    this.addOutput('output-object', Type.JSON);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let out = {};\n    const in1 = this.getInputData(0);\n    const in2 = this.getInputData(1);\n    if (isNull(in1)) return\n    if (isNull(in2)) return\n    try {\n      out = [...in1, ...in2]\n      this.setOutputData(0, out);\n    } catch (err) {\n      this.debugInfo(`ARRY-COMBINE NODE: try/catch concat, ${err}`);\n    }\n    try {\n      const merged = Object.assign({}, in1, in2)  \n      this.setOutputData(1, merged);\n    } catch (err) {\n      this.debugInfo(`ARRY-COMBINE NODE: try/catch assign, ${err}`);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n\n\n\n}\nContainer.registerNodeType('json/array-combine', ArrayCombineNode);\n","import * as _ from 'lodash';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nexport class JSONBuilderNode extends Node {\n  filterKeys: string[] = [];\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.json['json-builder'].title;\n    this.description = NODE_INFO.json['json-builder'].description;\n    this.settings['definition'] =NodeSetting.create({\n      description: 'payload definition (JSON)',\n      type: SettingType.STRING,\n      value: '',\n    });\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('output', Type.JSON);\n  }\n\n  init() {\n    this.addInputs();\n  }\n\n  onAdded() {\n    this.filterKeys = this.getFilterKeys();\n  }\n\n  onInputUpdated() {\n    let out = {};\n    for (let i = this.dynamicOutputStartPosition(); i < this.getInputsCount(); i++) {\n      out = { ...out, ...{ [this.filterKeys[i - 1]]: this.inputs[i].data } };\n    }\n    this.setOutputData(0, out);\n  }\n\n  onAfterSettingsChange() {\n    this.updateInputs();\n    this.onInputUpdated();\n  }\n\n  private updateInputs() {\n    const filterKeys = this.getFilterKeys();\n    let diffKeyFromPos = Math.min(this.filterKeys.length, filterKeys.length);\n    for (let i = 0; i < filterKeys.length; i++) {\n      if (this.filterKeys?.[i] != filterKeys[i]) {\n        diffKeyFromPos = i;\n        break;\n      }\n    }\n    const inputsCount = this.getInputsCount();\n    for (let i = diffKeyFromPos + this.dynamicOutputStartPosition(); i < inputsCount; i++) {\n      this.removeInput(i);\n    }\n    this.addInputs(diffKeyFromPos);\n  }\n\n  private addInputs(fromPos = 0) {\n    this.filterKeys = this.getFilterKeys();\n    for (let i = fromPos; i < this.filterKeys.length; i++) {\n      let name = this.filterKeys[i];\n      this.addInput(name.toString(), Type.ANY);\n    }\n  }\n\n  private getFilterKeys(): string[] {\n    return this.settings['definition'].value\n      .replace(/\\s+/g, '')\n      .split(',')\n      .filter(x => !!x);\n  }\n\n  private dynamicOutputStartPosition() {\n    return 1;\n  }\n}\nContainer.registerNodeType('json/json-builder', JSONBuilderNode);\n","import { isEmpty, isJSON, isNull } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nexport class JSONEnumBuilderNode extends Node {\n  filterKeys = [];\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"json-enum-builder\"].title;\n    this.description = NODE_INFO.json[\"json-enum-builder\"].description;\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInputWithSettings('definition', Type.JSON, '{\"pointOne\":22, \"pointTwo\":33}', 'JSON value');\n    this.addOutput('output', Type.ANY);\n    this.addOutput('valid-json', Type.BOOLEAN);\n    this.settings['json'] = NodeSetting.create({\n      description: 'Select output',\n      type: SettingType.DROPDOWN,\n      value: '',\n    });\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange()\n  }\n\n  onInputUpdated() {\n    this.getInputData(0);\n    this.onAfterSettingsChange()\n  }\n\n  onAfterSettingsChange() {\n    const input = this.getInputData(1);\n    if (isNull(input)) return;\n    if (isJSON(input) && !isEmpty(input)) {\n      const definition = Object.entries(input).map(\n        e => {\n          return { value: e[1], text: e[0] };\n        },\n      );\n      if (definition) {\n        this.settings['json'].config = {\n          items: definition,\n        };\n        const out = this.settings['json'].value\n        this.setOutputData(0, out);\n        this.setOutputData(1, true);\n        this.broadcastSettingsToClients();\n      }\n    } else this.setOutputData(1, false);\n  }\n\n\n\n\n}\nContainer.registerNodeType('json/json-enum-builder', JSONEnumBuilderNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport jsonStringCompare from '../../utils/string-json-compare-utils';\n\nclass JsonFilter extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"json-filter\"].title;\n    this.description = NODE_INFO.json[\"json-filter\"].description;\n    this.addInput('input', Type.JSON);\n    this.addOutput('output', Type.JSON);\n    this.addOutput('output-key', Type.STRING);\n    this.settings['filter'] = NodeSetting.create({\n      description: 'Example: key',\n      value: 'key',\n      type: SettingType.STRING,\n    });\n  }\n\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    if (input === null) {\n      this.setOutputData(0, null);\n      return;\n    }\n\n    try {\n      const filter = this.settings['filter'].value;\n      const out = input[0][filter]\n      this.setOutputData(0, out);\n\n    } catch (e) {\n      this.setOutputData(0, null);\n\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('json/json-filter', JsonFilter);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass JsonObjFilter extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"json-obj-filter\"].title;\n    this.description = NODE_INFO.json[\"json-obj-filter\"].description;\n    this.addInput('input', Type.JSON);\n    this.addOutput('output', Type.JSON);\n    this.settings['key'] = NodeSetting.create({\n      description: 'Example: key',\n      value: 'key',\n      type: SettingType.STRING,\n    });\n    this.settings['filter'] = NodeSetting.create({\n      description: 'Example: value',\n      value: 'value',\n      type: SettingType.STRING,\n    });\n  }\n\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    if (input === null) {\n      this.setOutputData(0, null);\n      return;\n    }\n\n    try {\n      const key = this.settings['key'].value;\n      const filter = this.settings['filter'].value;\n      const out = input.filter(obj => (obj[key] === filter)); \n      this.setOutputData(0, out);\n    } catch (e) {\n      this.setOutputData(0, null);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('json/json-obj-filter', JsonObjFilter);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport jsonStringCompare from '../../utils/string-json-compare-utils';\nimport { NODE_INFO } from '../../node-info';\n\nenum compareType {\n  Equals = 'Equals',\n  NotEquals = 'Not Equal',\n  GreaterThanEqual = 'Greater Than Equal',\n  GreaterThan = 'Greater Than',\n  LessThanEqual = 'Less Than Equal',\n  LessThan = 'Less Than',\n  Includes = 'Includes',\n  startsWith = 'Starts With',\n  endsWith = 'Ends With'\n}\n\nclass JsonFilterCompare extends Node {\n  conversionFunction;\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"json-filter-compare\"].title;\n    this.description = NODE_INFO.json[\"json-filter-compare\"].description; \n    this.addInput('input', Type.STRING);\n    this.addInputWithSettings('comparison-to', Type.STRING, '', 'Comparison Value');\n    this.addOutput('output', Type.STRING);\n    this.addOutput('output-key', Type.STRING);\n    this.addOutput('match', Type.BOOLEAN);\n    this.settings['filter'] = NodeSetting.create({\n      description: 'Example: msg.myKey',\n      value: 'myKey',\n      type: SettingType.STRING,\n    });\n    this.settings['function'] = NodeSetting.create({\n      description: 'Comparison Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: compareType.Equals, text: compareType.Equals },\n          { value: compareType.NotEquals, text: compareType.NotEquals },\n          { value: compareType.GreaterThanEqual, text: compareType.GreaterThanEqual },\n          { value: compareType.GreaterThan, text: compareType.GreaterThan },\n          { value: compareType.LessThanEqual, text: compareType.LessThanEqual },\n          { value: compareType.LessThan, text: compareType.LessThan },\n          { value: compareType.Includes, text: compareType.Includes },\n          { value: compareType.startsWith, text: compareType.startsWith },\n          { value: compareType.endsWith, text: compareType.endsWith },\n        ],\n      },\n      value: compareType.Equals,\n    });\n    this.settings['isNumber'] = NodeSetting.create({\n      description: 'Comparison value is a number',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['passNull'] = NodeSetting.create({\n      description: 'Send null if not a match',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n  this.onAfterSettingsChange()\n  }\n\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    if (input === null || input === undefined) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n      this.setOutputData(2, null);\n      return;\n    }\n    try {\n      const jsonCheck = JSON.parse(input);\n      const filter = this.settings['filter'].value;\n      let out = jsonStringCompare.findVal(jsonCheck, filter);\n      const string2 = this.getInputData(1);\n      if (jsonStringCompare.compare(this, out.value, string2)) {\n        this.setOutputData(0, out.value);\n        this.setOutputData(1, out.valueWithKey);\n        this.setOutputData(2, true);\n      } else if (this.settings['passNull'].value === true) {\n        this.setOutputData(0, null);\n        this.setOutputData(1, null);\n        this.setOutputData(2, false);\n      } else this.setOutputData(2, false);\n    } catch (e) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n      this.setOutputData(2, true);\n    }\n  }\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n    const inputType = this.settings['function'].value\n    const title = \"Json Comparison\"\n    this.title = `${title} Compare (${inputType})`;\n    this.broadcastTitleToClients();\n  }\n\n}\nContainer.registerNodeType('json/json-filter-compare', JsonFilterCompare);\n","import * as _ from 'lodash';\nimport { ErrorHandler } from '../../../utils/decorators';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\n\nclass JsonFilterMultiple extends Node {\n  outputsCount = 0;\n  filterKeys: Array<string> = [];\n\n  inInput: number = 0;\n\n  outError: number = 0;\n  outJsonOutput: number = 1;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.json['json-filter-multiple'].title;\n    this.description = NODE_INFO.json['json-filter-multiple'].description;\n    this.addInput('input', Type.JSON);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('json-output', Type.JSON);\n    this.settings['outputs_count'] = NodeSetting.create({\n      description: 'Number of Outputs',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n\n    this.setSettingsConfig({\n      groups: [{ outputs_count: {} }],\n    });\n  }\n\n  init() {\n    this.changeOutputsAndSettings();\n  }\n\n  onCreated() {\n    this.renameInputsOutputs();\n  }\n\n  onAdded() {\n    this.outputsCount = this.settings['outputs_count'].value;\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    const input = this.getInputData(this.inInput);\n    if (input == null) {\n      this.setOutputData(this.outError, null);\n      return;\n    }\n    try {\n      const outputJson: any = {};\n      for (let i = 0; i < this.filterKeys.length; i++) {\n        let out = _.get(input, this.filterKeys[i]);\n        if (out !== undefined) {\n          outputJson[this.filterKeys[i]] = out;\n          this.setOutputData(i + this.dynamicOutputStartPosition(), out);\n        }\n      }\n      this.setOutputData(this.outJsonOutput, outputJson);\n      this.setOutputData(this.outError, null);\n    } catch (e) {\n      this.setOutputData(this.outError, e.toString());\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.changeOutputsAndSettings();\n    this.renameInputsOutputs();\n    // update db\n    if (this.container.db)\n      this.container.db.updateNode(this.id, this.container.id, {\n        $set: { outputs: this.outputs, settings: this.settings },\n      });\n    this.onInputUpdated();\n  }\n\n  @ErrorHandler\n  changeOutputsAndSettings() {\n    let outputs = this.settings['outputs_count'].value;\n    outputs = Utils.clamp(outputs, 1, 10);\n    this.settings['outputs_count'].value = outputs;\n    // change outputs count\n    if (this.outputsCount != outputs) this.changeMyOutputsCount(outputs);\n  }\n\n  @ErrorHandler\n  changeMyOutputsCount(targetOutputCount) {\n    const diff = targetOutputCount - this.outputsCount;\n    if (diff == 0) return;\n    // add inputs, outputs\n    this.changeOutputsCount(targetOutputCount + this.dynamicOutputStartPosition(), Type.STRING);\n\n    // change settings for outputs\n    if (diff > 0) {\n      for (\n        let i = this.outputsCount + this.dynamicOutputStartPosition();\n        i < targetOutputCount + this.dynamicOutputStartPosition();\n        i++\n      ) {\n        this.settings['output' + this.getOutputNumber(i)] = NodeSetting.create({\n          description: 'Output ' + this.getOutputNumber(i),\n          value: '',\n          type: SettingType.STRING,\n        });\n      }\n    } else if (diff < 0) {\n      for (\n        let i = this.outputsCount + this.dynamicOutputStartPosition() - 1;\n        i >= targetOutputCount + this.dynamicOutputStartPosition();\n        i--\n      ) {\n        delete this.settings['output' + this.getOutputNumber(i)];\n      }\n    }\n    this.outputsCount = targetOutputCount;\n  }\n\n  @ErrorHandler\n  renameInputsOutputs() {\n    this.filterKeys = [];\n    for (let i = this.dynamicOutputStartPosition(); i < this.outputsCount + this.dynamicOutputStartPosition(); i++) {\n      this.filterKeys.push(this.settings['output' + this.getOutputNumber(i)].value);\n      const output = this.settings['output' + this.getOutputNumber(i)].value || '';\n      this.outputs[i].name = this.getOutputNumber(i) + ' | ' + output;\n      this.setOutputData(i, '');\n    }\n  }\n\n  private getOutputNumber(i: number): number {\n    return i - this.dynamicOutputStartPosition() + 1;\n  }\n\n  private dynamicOutputStartPosition() {\n    return 2;\n  }\n}\nContainer.registerNodeType('json/json-filter-multiple', JsonFilterMultiple);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass JsonCheckerNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"json-checker\"].title;\n    this.description = NODE_INFO.json[\"json-checker\"].description; \n    this.addInput('input', Type.STRING)\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('msg', Type.STRING);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  isJson(item: any): boolean {\n    item = typeof item !== 'string' ? JSON.stringify(item) : item;\n\n    try {\n      item = JSON.parse(item);\n    } catch (e) {\n      return false;\n    }\n\n    if (typeof item === 'object' && item !== null) {\n      return true;\n    }\n\n    return false;\n  }\n\n  onInputUpdated() {\n    const val = this.getInputData(0);\n    try {\n      if (this.isJson(val)) {\n        this.setOutputData(0, true);\n        this.setOutputData(1, 'valid JSON');\n      } else { \n        this.setOutputData(0, false);\n        this.setOutputData(1, 'invalid JSON');\n      }\n    } catch (err) {\n      this.setOutputData(0, false);\n      this.setOutputData(1, err);\n    }\n  }\n}\nContainer.registerNodeType('json/json-checker', JsonCheckerNode);\n","import { isNull } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\n\nclass JsonParse extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"json-parse\"].title;\n    this.description = NODE_INFO.json[\"json-parse\"].description;\n    this.addInput('json-input', Type.JSON);\n    this.addOutput('output', Type.JSON);\n  }\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    if (isNull(input)) return;\n    try {\n      this.setOutputData(0, input);\n    } catch (err) {\n      this.debugInfo(`JSON PARSE: try/catch , ${err}`);\n    };\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('json/json-parse', JsonParse);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport {Type } from '../../node-io';\nimport { isNull } from '../../../utils/helper';\n\n\nclass JsonPreventDuplicates extends Node {\n  older;\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"json-prevent-duplicates\"].title;\n    this.description = NODE_INFO.json[\"json-prevent-duplicates\"].description;\n    this.addInput('input', Type.JSON);\n    this.addOutput('output', Type.JSON);\n  }\n\n  getChanges = function (oldArray: any, newArray: any) {\n    if (JSON.stringify(oldArray) === JSON.stringify(newArray)) {\n      return false;\n    } else return true;\n  \n  };\n\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    if (input === null) {\n      this.setOutputData(0, null);\n      return;\n    }\n    try {\n      // first run\n      if(isNull(this.older)){\n        this.setOutputData(0, input);\n        this.older = input\n      }\n      const test = this.getChanges(this.older, input)\n      if(test == false) return\n      if(test == true){\n        this.older = input\n        this.setOutputData(0, input);\n      }\n    \n    } catch (e) {\n      this.setOutputData(0, null);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('json/json-prevent-duplicates', JsonPreventDuplicates);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { isNull } from '../../../utils/helper';\nimport { NODE_INFO } from '../../node-info';\nconst jsonata = require('jsonata');\n\nclass JsonQueryNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"json-query\"].title;\n    this.description = NODE_INFO.json[\"json-query\"].description;\n    this.addInput('input', Type.JSON);\n    this.addInputWithSettings('query', Type.STRING, `deviceID &  ', ' & clientId`, 'Query', false);\n    this.addOutput('output', Type.JSON);\n    this.addOutput('error', Type.STRING);\n  }\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    let queryInput = this.getInputData(1);\n    if (isNull(input)) return\n    if (isNull(queryInput)) return\n    try {\n      let expression = jsonata(queryInput);\n      let result = expression.evaluate(input);\n      this.setOutputData(0, result);\n      this.setOutputData(1, null);\n    } catch (e) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, e);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('json/json-query', JsonQueryNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass AnyLatchNode extends Node {\n  lastLatchValue: boolean;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.latch[\"any-latch\"].title;\n    this.description =NODE_INFO.latch[\"any-latch\"].description;\n\n    this.addInput('input', Type.ANY);\n    this.addInput('latch', Type.BOOLEAN);\n    this.addOutput('output', Type.ANY);\n    this.settings['passOnly'] = NodeSetting.create({\n      description: 'Only if input value is updated',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    const passOnly = this.settings['passOnly'].value\n    let latch = this.getInputData(1);\n    if (latch == null) {\n      if (passOnly) {\n        this.setOutputData(0, null, true);\n      } else this.setOutputData(0, null);\n      return;\n    }\n    if (latch == this.lastLatchValue) return;\n    this.lastLatchValue = latch;\n    if (latch == true) {\n      let input = this.getInputData(0);\n      if (!Utils.hasInput(input)) {\n        if (passOnly) {\n          this.setOutputData(0, null, true);\n        } else this.setOutputData(0, null);\n        return;\n      }\n      if (input === '') input = null;\n      if (passOnly) {\n        this.setOutputData(0, input, true);\n      } else this.setOutputData(0, input);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('latch/any-latch', AnyLatchNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass BoolLatchNode extends Node {\n  lastLatchValue: boolean;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.latch[\"bool-latch\"].title;\n    this.description =NODE_INFO.latch[\"bool-latch\"].description;\n    this.addInput('input', Type.BOOLEAN);\n    this.addInput('latch', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.setOutputData(0, false);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n  \n//\n\n  onInputUpdated() {\n    let latch = this.getInputData(1);\n    if (latch == null) {\n      this.setOutputData(0, null, true);\n      return;\n    }\n    if (latch == this.lastLatchValue) return;\n    this.lastLatchValue = latch;\n    if (latch == true) {\n      let input = this.getInputData(0);\n      if (!Utils.hasInput(input)) {\n        this.setOutputData(0, null, true);\n        return;\n      }\n      this.setOutputData(0, input);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('latch/bool-latch', BoolLatchNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass NumLatchNode extends Node {\n  lastLatchValue: boolean;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.latch[\"num-latch\"].title;\n    this.description =NODE_INFO.latch[\"num-latch\"].description;\n    this.addInput('input', Type.NUMBER);\n    this.addInput('latch', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    let latch = this.getInputData(1);\n    if (latch == null) {\n      this.setOutputData(0, null, true);\n      return;\n    }\n    if (latch == this.lastLatchValue) return;\n    this.lastLatchValue = latch;\n    if (latch == true) {\n      let input = this.getInputData(0);\n      if (!Utils.hasInput(input)) {\n        this.setOutputData(0, null, true);\n        return;\n      }\n      if (input === '') input = null;\n      this.setOutputData(0, input);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('latch/num-latch', NumLatchNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass StringLatchNode extends Node {\n  lastLatchValue: boolean;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.latch[\"string-latch\"].title;\n    this.description =NODE_INFO.latch[\"string-latch\"].description;\n    this.addInput('input', Type.STRING);\n    this.addInput('latch', Type.BOOLEAN);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    let latch = this.getInputData(1);\n    if (latch == null) {\n      this.setOutputData(0, null, true);\n      return;\n    }\n    if (latch == this.lastLatchValue) return;\n    this.lastLatchValue = latch;\n    if (latch == true) {\n      let input = this.getInputData(0);\n      if (!Utils.hasInput(input)) {\n        this.setOutputData(0, null, true);\n        return;\n      }\n      if (input === '') input = null;\n      this.setOutputData(0, input, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('latch/string-latch', StringLatchNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass SetResetNode extends Node {\n  out = null;\n\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.latch[\"set-reset\"].title;\n    this.description =NODE_INFO.latch[\"set-reset\"].description;\n\n    this.addInput('set', Type.BOOLEAN);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.settings['lock'] = NodeSetting.create({\n      description: 'Reset when set=true',\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n \n    this.setOutputData(0, false);\n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    let set = this.inputs[0].data;\n    let reset = this.inputs[1].data;\n    let lock = this.settings['lock'].value;\n    let out = this.out;\n    if (set && !reset) {\n      this.setOutputData(0, true, true);\n      this.out = true;\n    } else if (lock && reset && out && set) {\n      //when lock = true\n      this.setOutputData(0, false, true);\n      this.out = false;\n    } else if (!set && out && reset) {\n      //when lock = false\n      this.setOutputData(0, false, true);\n      this.out = false;\n    }\n  }\n}\nContainer.registerNodeType('latch/set-reset', SetResetNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass AddNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    this.title = NODE_INFO.math.add.title;\n    this.description = NODE_INFO.math.add.description;\n\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const inputCount = this.getInputsCount();\n    let total = 0;\n    for (let i = this.dynamicInputStartPosition; i < inputCount; i++) {\n      total = total + this.getInputData(i);\n    }\n    this.settingOutput(total);\n  }\n\n  settingOutput(total): any {\n    this.setOutputData(0, total);\n    return total;\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('math/add', AddNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass MathSubNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    \n    this.title = NODE_INFO.math.subtract.title;\n    this.description = NODE_INFO.math.subtract.description; \n\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    const inputCount = this.getInputsCount();\n    let total = this.getInputData(0);\n    for (let i = this.dynamicInputStartPosition + 1; i < inputCount; i++) {\n      total = total - this.getInputData(i);\n    }\n    this.setOutputData(0, total);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('math/subtract', MathSubNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass MathMultiplyNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    this.title = NODE_INFO.math.multiply.title;\n    this.description = NODE_INFO.math.multiply.description; \n    \n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    const inputCount = this.getInputsCount();\n    let total = 1;\n    for (let i = this.dynamicInputStartPosition; i < inputCount; i++) {\n      total = total * this.getInputData(i);\n    }\n    this.setOutputData(0, total);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('math/multiply', MathMultiplyNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass MathDivideNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    this.title = NODE_INFO.math.divide.title;\n    this.description = NODE_INFO.math.divide.description; \n    \n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    const inputCount = this.getInputsCount();\n    let total = 1;\n    let div = 0;\n    for (let i = this.dynamicInputStartPosition; i < inputCount; i++) {\n      div = this.getInputData(i);\n      if (!div) {\n        // when it's 0 or null\n        this.setOutputData(0, 0);\n        return;\n      }\n      if (i === this.dynamicInputStartPosition) {\n        total = div;\n      } else {\n        total = total / div;\n      }\n    }\n    this.setOutputData(0, total);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('math/divide', MathDivideNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport Icons from '../../node-icons';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nlet uiMainIcon = Icons.uiMainIcon;\nlet uiMainColour = Icons.uiMainColour;\n\nclass MathAbsNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.math.absolute.title;\n    this.description = NODE_INFO.math.absolute.description;\n    //this.headerColor = uiMainIcon;\n    //this.iconImageUrl = uiMainIcon;\n\n    this.addInput('input', Type.NUMBER);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, Math.abs(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math/absolute', MathAbsNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathModulusNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.math.modulus.title;\n    this.description = NODE_INFO.math.modulus.description; \n   \n    this.addInputWithSettings('in 1', Type.NUMBER, 0, 'in 1');\n    this.addInputWithSettings('in 2', Type.NUMBER, 1, 'in 2');\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    const a = this.getInputData(0);\n    const b = this.getInputData(1);\n\n    if (a != null && b != null) this.setOutputData(0, a % b);\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math/modulus', MathModulusNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathPowNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.math.power.title;\n    this.description = NODE_INFO.math.power.description; \n    this.addInputWithSettings('in 1', Type.NUMBER, 0, 'in 1');\n    this.addInputWithSettings('in 2', Type.NUMBER, 1, 'in 2');\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    let x = this.getInputData(0);\n    let y = this.getInputData(1);\n    if (x != null && y != null) this.setOutputData(0, Math.pow(x, y));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math/power', MathPowNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathAcosNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].acos.title;\n    this.description = NODE_INFO[\"math-advanced\"].acos.description;\n\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('acos(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    if (val != null) this.setOutputData(0, Math.acos(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/acos', MathAcosNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathAsinNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].asin.title;\n    this.description = NODE_INFO[\"math-advanced\"].asin.description;\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('asin(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    if (val != null) this.setOutputData(0, Math.asin(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/asin', MathAsinNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathAtanNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].atan.title;\n    this.description = NODE_INFO[\"math-advanced\"].atan.description;\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('atan(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    if (val != null) this.setOutputData(0, Math.atan(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/atan', MathAtanNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathCbrtNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].cbrt.title;\n    this.description = NODE_INFO[\"math-advanced\"].cbrt.description;\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('cbrt(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    if (val != null) this.setOutputData(0, Math.cbrt(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/cbrt', MathCbrtNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathCosNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].cos.title;\n    this.description = NODE_INFO[\"math-advanced\"].cos.description;\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('cos(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, Math.cos(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/cos', MathCosNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathExpNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].exp.title;\n    this.description = NODE_INFO[\"math-advanced\"].exp.description; \n   \n    this.addInput('x', Type.NUMBER);\n    this.addOutput('exp(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, Math.exp(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/exp', MathExpNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathLogarithmNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].log.title;\n    this.description = NODE_INFO[\"math-advanced\"].log.description;\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('log(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, Math.log(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/log', MathLogarithmNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathLogarithmNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].log10.title;\n    this.description = NODE_INFO[\"math-advanced\"].log10.description;\n\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('log10(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, Math.log10(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/log10', MathLogarithmNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathSinNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].sin.title;\n    this.description = NODE_INFO[\"math-advanced\"].sin.description;\n    \n    this.addInput('x', Type.NUMBER);\n    this.addOutput('sin(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, Math.sin(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/sin', MathSinNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathSqrtNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].sqrt.title;\n    this.description = NODE_INFO[\"math-advanced\"].sqrt.description;\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('sqrt(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, Math.sqrt(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/sqrt', MathSqrtNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathTanNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"math-advanced\"].tan.title;\n    this.description = NODE_INFO[\"math-advanced\"].tan.description;\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('tan(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, Math.tan(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/tan', MathTanNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass TriggerAddNode extends FlexibleNode {\n  lastTrigger: boolean;\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    super.dynamicInputStartPosition = 1;\n    this.title = NODE_INFO[\"math-trigger\"][\"trigger-add\"].title;\n    this.description = NODE_INFO[\"math-trigger\"][\"trigger-add\"].description; \n   \n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.lastTrigger = false;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const trigger = this.getInputData(0);\n    if (trigger && !this.lastTrigger) {\n      const inputCount = this.getInputsCount();\n      let total = 0;\n      for (let i = this.dynamicInputStartPosition; i < inputCount; i++) {\n        total += this.getInputData(i);\n      }\n      this.setOutputData(0, total);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('math-trigger/trigger-add', TriggerAddNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass MathTriggerSubNode extends FlexibleNode {\n  lastTrigger: boolean;\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    super.dynamicInputStartPosition = 1;\n    this.title = NODE_INFO[\"math-trigger\"][\"trigger-subtract\"].title;\n    this.description = NODE_INFO[\"math-trigger\"][\"trigger-subtract\"].description; \n    \n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.lastTrigger = false;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const trigger = this.getInputData(0);\n    if (trigger && !this.lastTrigger) {\n      const inputCount = this.getInputsCount();\n      let total = this.getInputData(1);\n      for (let i = this.dynamicInputStartPosition + 1; i < inputCount; i++) {\n        total -= this.getInputData(i);\n      }\n      this.setOutputData(0, total);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('math-trigger/trigger-subtract', MathTriggerSubNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass MathTriggerMultiplyNode extends FlexibleNode {\n  lastTrigger: boolean;\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    super.dynamicInputStartPosition = 1;\n    this.title = NODE_INFO[\"math-trigger\"][\"trigger-multiply\"].title;\n    this.description = NODE_INFO[\"math-trigger\"][\"trigger-multiply\"].description; \n    \n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.lastTrigger = false;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const trigger = this.getInputData(0);\n    if (trigger && !this.lastTrigger) {\n      const inputCount = this.getInputsCount();\n      let total = 1;\n      for (let i = this.dynamicInputStartPosition; i < inputCount; i++) {\n        total *= this.getInputData(i);\n      }\n      this.setOutputData(0, total);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('math-trigger/trigger-multiply', MathTriggerMultiplyNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass MathTriggerDivideNode extends FlexibleNode {\n  lastTrigger: boolean;\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    super.dynamicInputStartPosition = 1;\n    this.title = NODE_INFO[\"math-trigger\"][\"trigger-divide\"].title;\n    this.description = NODE_INFO[\"math-trigger\"][\"trigger-divide\"].description; \n   \n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.lastTrigger = false;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const trigger = this.getInputData(0);\n    if (trigger && !this.lastTrigger) {\n      const inputCount = this.getInputsCount();\n      let total = 1;\n      let div = 0;\n      for (let i = this.dynamicInputStartPosition; i < inputCount; i++) {\n        div = this.getInputData(i);\n        if (div === 0) {\n          this.setOutputData(0, 0);\n          return;\n        }\n        if (i === this.dynamicInputStartPosition) {\n          total = div;\n        } else {\n          total = total / div;\n        }\n      }\n      this.setOutputData(0, total);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('math-trigger/trigger-divide', MathTriggerDivideNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathTriggerModulusNode extends Node {\n  lastTrigger: boolean;\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-trigger\"][\"trigger-modulus\"].title;\n    this.description = NODE_INFO[\"math-trigger\"][\"trigger-modulus\"].description; \n   \n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInputWithSettings('in 1', Type.NUMBER, 0, 'in 1');\n    this.addInputWithSettings('in 2', Type.NUMBER, 2, 'in 2');\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.lastTrigger = false;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const trigger = this.getInputData(0);\n    if (trigger && !this.lastTrigger) {\n      let a = this.getInputData(1);\n      let b = this.getInputData(2);\n\n      if (a != null && b != null) this.setOutputData(0, a % b);\n      else this.setOutputData(0, null);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  dynamicInputStartPosition(): number {\n    return 1;\n  }\n}\nContainer.registerNodeType('math-trigger/trigger-modulus', MathTriggerModulusNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathTriggerPowNode extends Node {\n  lastTrigger: boolean;\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-trigger\"][\"trigger-power\"].title;\n    this.description = NODE_INFO[\"math-trigger\"][\"trigger-power\"].description; \n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInputWithSettings('in 1', Type.NUMBER, 0, 'in 1');\n    this.addInputWithSettings('in 2', Type.NUMBER, 2, 'in 2');\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.lastTrigger = false;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const trigger = this.getInputData(0);\n    if (trigger && !this.lastTrigger) {\n      const x = this.getInputData(1);\n      const y = this.getInputData(2);\n\n      if (x != null && y != null) this.setOutputData(0, Math.pow(x, y));\n      else this.setOutputData(0, null);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  dynamicInputStartPosition(): number {\n    return 1;\n  }\n}\nContainer.registerNodeType('math-trigger/trigger-power', MathTriggerPowNode);\n","import { Container } from '../../container';\nimport { Node} from '../../node';\nimport { Type } from '../../node-io';\nimport {isNull } from '../../../utils/helper';\nconst geohash = require('ngeohash');\nimport { NODE_INFO } from '../../node-info';\n\nclass GeoHashNode extends Node {\n  client: any;\n  outputsCount = 0;\n  constructor() {\n    super();\n    this.title = NODE_INFO.miscellaneous[\"geo-hash\"].title;\n    this.description = NODE_INFO.miscellaneous[\"geo-hash\"].description; \n    this.addInputWithSettings('encode', Type.JSON, '151.1677778, -34.0316667', 'Lon at Lat Values Encode');\n    this.addInputWithSettings('decode', Type.STRING, 'ww8p1r4t8, ', 'Hash Decode');\n    this.addOutput('encode-out', Type.STRING);\n    this.addOutput('decode-out', Type.JSON);\n  }\n  \n\n\n  onAdded() {\n    this.onInputUpdated()\n  }\n\n  onInputUpdated(){\n    const encode = this.getInputData(0);\n    const decode = this.getInputData(1);\n\n    if (!isNull(encode)) {\n      this.setOutputData(0, geohash.encode(parseInt(encode[0]), parseInt(encode[1])))\n   \n    }\n    if (!isNull(decode)) {\n      this.setOutputData(1, geohash.decode(decode))\n  \n    }\n\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated()\n  }\n\n\n\n}\nContainer.registerNodeType('miscellaneous/geo-hash', GeoHashNode);\n","module.exports = require(\"ngeohash\");","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nexport class NumSeriesGenerator extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicOutputsExist = true;\n    this.dynamicInputsExist = false;\n    this.dynamicSettingsExist = true;\n    super.dynamicOutputsType = Type.NUMBER;\n    this.title = NODE_INFO.miscellaneous[\"num-series-generator\"].title;\n    this.description = NODE_INFO.miscellaneous[\"num-series-generator\"].description; \n    this.addInputWithSettings('startVal', Type.NUMBER, 0, 'Start Value');\n    this.addInputWithSettings('addVal', Type.NUMBER, 1, 'Added Value ');\n    this.settings['factor'] = NodeSetting.create({\n      description: 'Multiply factor',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n  }\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    let factor = this.settings['factor'].value; \n    if (typeof input === 'undefined') return;\n    if (typeof input === 'number') {\n      const len = this.getOutputsCount();\n      let diff = this.getInputData(1);\n      if (typeof diff !== 'number') diff = 1;\n      for (let i = 0; i < len; i++) {\n        this.setOutputData(i, i + (input * diff) + (i * factor));\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated()\n  }\n}\nContainer.registerNodeType('miscellaneous/num-series-generator', NumSeriesGenerator);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass AddressHelperString extends Node {\n  client: any;\n  outputsCount = 0;\n  constructor() {\n    super();\n    this.title = NODE_INFO.miscellaneous[\"append-to-strings\"].title;\n    this.description = NODE_INFO.miscellaneous[\"append-to-strings\"].description; \n\n    this.addInputWithSettings('prepend', Type.STRING, '', 'Prepend Value');\n    this.addInputWithSettings('append', Type.STRING, '', 'Append Value');\n\n    this.settings['outputs_count'] = NodeSetting.create({\n      description: 'Number of Outputs',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n\n    this.setSettingsConfig({\n      groups: [{ outputs_count: {} }],\n    });\n  }\n\n  init() {\n    this.changeOutputsAndSettings();\n  }\n\n  onCreated() {\n    this.renameInputsOutputs();\n  }\n\n  onAdded() {\n    this.outputsCount = this.settings['outputs_count'].value;\n    this.onAfterSettingsChange()\n  }\n\n  onInputUpdated(){\n    this.renameInputsOutputs();\n  }\n\n  onAfterSettingsChange() {\n    this.changeOutputsAndSettings();\n    this.renameInputsOutputs();\n    //update db\n    if (this.container.db)\n      this.container.db.updateNode(this.id, this.container.id, {\n        $set: { outputs: this.outputs, settings: this.settings },\n      });\n  }\n\n  private changeOutputsAndSettings() {\n    let outputs = this.settings['outputs_count'].value;\n    outputs = Utils.clamp(outputs, 1, 100);\n    this.settings['outputs_count'].value = outputs;\n    // change outputs count\n    if (this.outputsCount != outputs) this.changeMyOutputsCount(outputs);\n  }\n\n  changeMyOutputsCount(target_count) {\n    const diff = target_count - this.outputsCount;\n    if (diff == 0) return;\n\n    // add inputs, outputs\n    this.changeOutputsCount(target_count + 1, Type.STRING);\n\n    // change settings for outputs\n    if (diff > 0) {\n      for (let i = this.outputsCount + 1; i <= target_count; i++) {\n        this.settings['output' + i] = NodeSetting.create({\n          description: 'Output ' + i,\n          value: '',\n          type: SettingType.STRING,\n        });\n        for (let i = this.outputsCount + 1; i <= target_count; i++) {\n          this.settingConfigs.groups.push({\n            [`output${i}`]: { weight: 5 },\n          });\n        }\n      }\n    } else if (diff < 0) {\n      for (let i = this.outputsCount; i > target_count; i--) {\n        delete this.settings['output' + i];\n        this.settingConfigs.groups.pop();\n      }\n    }\n\n    this.outputsCount = target_count;\n  }\n\n  renameInputsOutputs() {\n    const prepend = this.getInputData(0);\n    const append = this.getInputData(1);\n    for (let i = 1; i <= this.outputsCount; i++) {\n      const output = this.settings['output' + i].value || '';\n      this.outputs[i].name = '' + i + ' | ' + output;\n      this.setOutputData(i, '' + prepend + output + append);\n    }\n  }\n}\nContainer.registerNodeType('miscellaneous/append-to-strings', AddressHelperString);\n","import axios from 'axios';\nimport config from '../../../config';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport SystemUtils from '../system/system-utils';\n\nconst btoa = require('btoa');\n\nclass GetSchedulesNode extends Node {\n  enable;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.nube[\"get-schedules\"].title;\n    this.description = NODE_INFO.nube[\"get-schedules\"].description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addOutput('data', Type.JSON);\n    this.addOutput('error', Type.BOOLEAN);\n\n    this.settings['interval'] = NodeSetting.create({\n      description: 'Update Interval (min 10 seconds)',\n      type: SettingType.NUMBER,\n      value: 60,\n    });\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.SECONDS, text: 'Seconds' },\n          { value: TIME_TYPE.MINUTES, text: 'Minutes' },\n          { value: TIME_TYPE.HOURS, text: 'Hours' },\n        ],\n      },\n      value: TIME_TYPE.SECONDS,\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n  }\n\n  async onAdded() {\n    if (this.properties['scheduleData']) this.setOutputData(0, this.properties['scheduleData']);\n    await this.onAfterSettingsChange();\n  }\n\n  async onAfterSettingsChange() {\n    this.setExecuteInterval();\n    await this.onInputUpdated();\n  }\n\n  async onInputUpdated() {\n    await this.getDittoSchedules();\n  }\n\n  async onExecute() {\n    await this.getDittoSchedules();\n  }\n \n  async getDittoSchedules() {\n    if (this.side !== Side.server || !this.getInputData(0)) return;\n    try {\n      const deviceIdFromPlat = await SystemUtils.getDeviceIdDb();\n      const { username, password } = config.ditto;\n      const dittoUrl =  config.ditto.baseURL\n      const response = await axios({\n        method: 'get',\n        url:\n        dittoUrl + deviceIdFromPlat + '/features/schedules/properties',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Basic ${btoa(`${username}:${password}`)}`,\n        },\n      });\n      this.setOutputData(0, response.data, false);\n      this.setOutputData(1, false);\n      this.properties['scheduleData'] = response.data;\n      this.persistProperties(false, true);\n    } catch (error) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, error);\n      this.debugErr(error);\n      return;\n    }\n  }\n\n  setExecuteInterval() {\n    let interval = this.settings['interval'].value;\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    interval = Math.max(interval, 10000);\n    this.EXECUTE_INTERVAL = interval;\n  }\n}\nContainer.registerNodeType('nube/get-schedules', GetSchedulesNode);\n","module.exports = require(\"btoa\");","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass MathDecimalPlaceNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"num-transform\"].round.title;\n    this.description = NODE_INFO[\"num-transform\"].round.description; this.addInput('input', Type.NUMBER);\n\n    this.addOutput('output', Type.NUMBER);\n    this.settings['decimals'] = NodeSetting.create({\n      description: 'Decimal Places (Limit 5)',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    let decimals = this.settings['decimals'].value;\n    if (decimals > 5) decimals = 5;\n    this.emitTransformedInput(x => x.toFixed(decimals));\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('num-transform/round', MathDecimalPlaceNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass MathFloorNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"num-transform\"].floor.title;\n    this.description = NODE_INFO[\"num-transform\"].floor.description; \n\n    this.addInput('input', Type.NUMBER);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    this.emitTransformedInput(x => Math.floor(x));\n  }\n}\nContainer.registerNodeType('num-transform/floor', MathFloorNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass MathCeilNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"num-transform\"].ceil.title;\n    this.description = NODE_INFO[\"num-transform\"].ceil.description; \n\n    this.addInput('input', Type.NUMBER);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    this.emitTransformedInput(x => Math.ceil(x));\n  }\n}\nContainer.registerNodeType('num-transform/ceil', MathCeilNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass LimitNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"num-transform\"].limit.title;\n    this.description = NODE_INFO[\"num-transform\"].limit.description; \n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('min', Type.NUMBER, 0, 'min', false);\n    this.addInputWithSettings('max', Type.NUMBER, 5, 'max', false);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onCreated() {\n    this.setOutputData(0, this.settings['min'].value);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    const val = this.getInputData(0);\n\n    const min = this.getInputData(1);\n    const max = this.getInputData(2);\n\n    if (val >= max) {\n      this.setOutputData(0, max);\n    } else if (val <= min) {\n      this.setOutputData(0, min);\n    } else {\n      this.setOutputData(0, val);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('num-transform/limit', LimitNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass ScaleNode extends Node {\n  lastTime: number;\n  interval: number = 250;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"num-transform\"].scale.title;\n    this.description = NODE_INFO[\"num-transform\"].scale.description; \n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('in-min', Type.NUMBER, 0, 'Minimum Input', false);\n    this.addInputWithSettings('in-max', Type.NUMBER, 100, 'Maximum Input', false);\n    this.addInputWithSettings('out-min', Type.NUMBER, 0, 'Minimum Output', false);\n    this.addInputWithSettings('out-max', Type.NUMBER, 10, 'Maximum Output', false);\n    this.addOutput('output', Type.NUMBER);\n    this.lastTime = Date.now();\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n//\n\n  onAfterSettingsChange(){\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let now = Date.now();\n    if (now - this.lastTime >= this.interval) {\n      this.lastTime = now;\n      let val = this.getInputData(0);\n      const inMin = this.getInputData(1);\n      const inMax = this.getInputData(2);\n      const outMin = this.getInputData(3);\n      const outMax = this.getInputData(4);\n\n      if (val == null) {\n        this.setOutputData(0, 0);\n      } else {\n        val = Utils.remap(val, inMin, inMax, outMin, outMax);\n        this.setOutputData(0, val.toFixed(1));\n      }\n    }\n  }\n}\nContainer.registerNodeType('num-transform/scale', ScaleNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass LinearShaperNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"num-transform\"][\"linear-shaper\"].title;\n    this.description = NODE_INFO[\"num-transform\"][\"linear-shaper\"].description; \n    this.addInput('input', Type.NUMBER);\n    this.settings['inputs'] = NodeSetting.create({\n      description: 'Inflection Points Count',\n      value: 3,\n      type: SettingType.NUMBER,\n    });\n    this.settings['in1'] = NodeSetting.create({\n      description: 'output value @ input = 0',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.settings['in2'] = NodeSetting.create({\n      description: 'output value @ input = 50',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.settings['in3'] = NodeSetting.create({\n      description: 'output value @ input = 100',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.addInput('[0]', Type.NUMBER);\n    this.addInput('[50]', Type.NUMBER);\n    this.addInput('[100]', Type.NUMBER);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAfterSettingsChange() {\n    const inputCountBefore = this.getInputsCount();\n    let inputs = this.settings['inputs'].value;\n    inputs = Utils.clamp(inputs, 3, 100);\n    inputs = inputs + 1;\n    if (inputs == inputCountBefore) return;\n    this.changeInputsCount(inputs, Type.NUMBER);\n\n    if (inputs > 4) {\n      for (let i = 4; i < inputs; i++) {\n        if (!this.settings['in' + i]) {\n          this.settings['in' + i] = NodeSetting.create({\n            description: 'in ' + i,\n            value: 0,\n            type: SettingType.NUMBER,\n          });\n        }\n      }\n    }\n    for (let j = inputs; j < inputCountBefore; j++) {\n      delete this.settings['in' + j];\n    }\n    this.renameInputsAndSettings(inputs);\n\n    if (this.side == Side.editor) this.updateInputsLabels();\n    this.onInputUpdated();\n  }\n\n  renameInputsAndSettings(count) {\n    count = count - 1;\n    this.inputs[1].name = '[0]';\n    for (let i = 1; i < count; i++) {\n      let point = (100.0 / (count - 1)) * i;\n      let pointFormatted = point.toFixed(2).replace(/[.,]00$/, '');\n      this.inputs[i + 1].name = '[' + pointFormatted + ']';\n      this.settings['in' + (i + 1)] = NodeSetting.create({\n        description: 'output value @ input = ' + pointFormatted,\n        value: 0,\n        type: SettingType.NUMBER,\n      });\n    }\n    this.updateNodeInput();\n  }\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    if (input == null) {\n      this.setOutputData(0, null, true);\n      return;\n    }\n    const position = Utils.clamp(input, 0, 100);\n    const pointsCount = this.getInputsCount() - 1;\n    const stepSize = 100.0 / (pointsCount - 1);\n    const stepIndex = position / stepSize;\n    if (position % stepSize == 0) {\n      let valueAtPosition = this.getInputData(stepIndex + 1);\n      if (!Utils.hasInput(valueAtPosition)) {\n        valueAtPosition = this.settings['in' + (stepIndex + 1)].value;\n      }\n      valueAtPosition = Number(valueAtPosition);\n      this.setOutputData(0, valueAtPosition);\n      return;\n    }\n    const positionInStep = stepIndex - Math.floor(stepIndex);\n    const startValueIndex = Math.floor(stepIndex);\n    console.log(stepIndex, 'stepIndex');\n    console.log(startValueIndex, 'startValueIndex');\n    console.log('in' + (startValueIndex + 1), \"'in' + (startValueIndex + 1)\");\n    let startValue = this.getInputData(startValueIndex + 1);\n    if (!Utils.hasInput(startValue)) startValue = this.settings['in' + (startValueIndex + 1)].value;\n    let endValue = this.getInputData(startValueIndex + 2);\n    if (!Utils.hasInput(endValue)) endValue = this.settings['in' + (startValueIndex + 2)].value;\n    let output = Utils.remap(positionInStep, 0, 1, startValue, endValue);\n    this.setOutputData(0, output, true);\n  }\n}\nContainer.registerNodeType('num-transform/linear-shaper', LinearShaperNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass TimeFadeNode extends Node {\n  updateInterval: number = 500;\n  stepSize: number;\n  lastEnable: boolean;\n  timerFinished: boolean;\n  currentVal: number;\n  timeoutFunc;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"num-transform\"].fade.title;\n    this.description = NODE_INFO[\"num-transform\"].fade.description; \n   \n    this.addInput('enable', Type.BOOLEAN);\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Interval', false);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n    this.addInputWithSettings('from', Type.NUMBER, 0, 'To Value', false);\n    this.addInputWithSettings('to', Type.NUMBER, 100, 'From Value', false);\n    this.addOutput('output');\n    this.addOutput('out=to');\n\n    this.updateInterval = 250;\n  }\n\n  onAdded() {\n \n    this.lastEnable = false;\n    this.timerFinished = false;\n    this.setOutputData(1, false);\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n\n//\n\n  onAfterSettingsChange() {\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n  }\n\n  onInputUpdated() {\n    const enable = this.getInputData(0);\n    if (!enable && this.lastEnable) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, 0);\n      this.setOutputData(1, false);\n      this.timerFinished = false;\n      this.lastEnable = enable;\n      return;\n    } else if (!enable) {\n      this.setOutputData(0, 0);\n      this.setOutputData(1, false);\n      return;\n    }\n    const to = this.getInputData(3);\n    if (enable && this.timerFinished) {\n      this.setOutputData(0, to);\n      this.setOutputData(1, true);\n      return;\n    }\n\n    const from = this.getInputData(2);\n    let interval = this.getInputData(1);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    if (enable && !this.lastEnable) {\n      this.stepSize = (to - from) / (interval / this.updateInterval);\n      this.currentVal = from;\n      this.timeoutFunc = setInterval(() => {\n        this.update();\n      }, this.updateInterval);\n    } else if (!enable && this.lastEnable) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, 0);\n      this.timerFinished = false;\n    }\n    this.lastEnable = enable;\n  }\n\n  update() {\n    let to = this.getInputData(3);\n    const val = this.currentVal + this.stepSize;\n    if (val >= to) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, to);\n      this.setOutputData(1, true);\n      this.timerFinished = true;\n      this.currentVal = 0;\n      return;\n    } else {\n      this.currentVal = val;\n      this.setOutputData(0, val);\n    }\n  }\n}\nContainer.registerNodeType('num-transform/fade', TimeFadeNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass RateLimitNode extends Node {\n  lastEnable: boolean;\n  lastInterval: number;\n  currentVal: number;\n  timeoutFunc;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"num-transform\"][\"rate-limit\"].title;\n    this.description = NODE_INFO[\"num-transform\"][\"rate-limit\"].description; \n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable', false);\n    this.addInputWithSettings('step', Type.NUMBER, 1, 'Step Size', false);\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Update Interval', false);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n    this.addOutput('output', Type.NUMBER);\n    this.lastInterval = 1000;\n    this.lastEnable = true;\n    this.currentVal = 0;\n  }\n\n  onAdded() {\n \n    this.lastInterval = 1000;\n    this.lastEnable = true;\n    this.currentVal = 0;\n    this.setOutputData(0, null);\n    this.inputs[3]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.timeoutFunc = setInterval(() => {\n      this.step();\n    }, this.lastInterval);\n  }\n\n//\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    if (input == null) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, null);\n      this.lastEnable = false;\n      return;\n    }\n    let interval = this.getInputData(3);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    const enable = this.getInputData(1);\n    if (enable && !this.lastEnable) {\n      this.currentVal = 0;\n      this.timeoutFunc = setInterval(() => {\n        this.step();\n      }, interval);\n    } else if (!enable && this.lastEnable) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, null);\n    } else if (enable && this.lastEnable && interval !== this.lastInterval) {\n      clearInterval(this.timeoutFunc);\n      this.timeoutFunc = setInterval(() => {\n        this.step();\n      }, interval);\n    }\n    this.lastInterval = interval;\n    this.lastEnable = enable;\n  }\n\n  step() {\n    const step = this.getInputData(2);\n    let input = this.getInputData(0);\n    if (input >= this.currentVal) {\n      this.currentVal = this.currentVal + step;\n      if (this.currentVal > input) this.currentVal = input;\n      this.setOutputData(0, this.currentVal);\n    } else if (input < this.currentVal) {\n      this.currentVal = this.currentVal - step;\n      if (this.currentVal < input) this.currentVal = input;\n      this.setOutputData(0, this.currentVal);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[3]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('num-transform/rate-limit', RateLimitNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\n//Bool Constant\nclass BoolConstantNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.point[\"bool-constant\"].title;\n    this.description = NODE_INFO.point[\"bool-constant\"].description;\n\n    this.settings['value'] = NodeSetting.create({\n      description: 'Payload',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: false, text: 'false' },\n          { value: true, text: 'true' },\n          { value: null, text: 'null' },\n        ],\n      },\n      value: null,\n    });\n\n    this.addOutput('output', Type.BOOLEAN);\n  }\n\n  onAdded() {\n \n    if (this.side != Side.server) return;\n    let val = this.settings['value'].value;\n    this.setOutputData(0, val);\n  }\n\n  onExecute(){\n    // this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    let val = this.settings['value'].value;\n    this.setOutputData(0, val);\n  }\n}\nContainer.registerNodeType('point/bool-constant', BoolConstantNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\n//Numeric Constant\nclass NumConstantNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.point[\"num-constant\"].title;\n    this.description = NODE_INFO.point[\"num-constant\"].description; \n    this.settings['value'] = NodeSetting.create({ description: 'Value', value: null, type: SettingType.NUMBER });\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onAfterSettingsChange();\n  }\n\n  onExecute(){\n    // this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    const val = this.settings['value'].value;\n    this.setOutputData(0, Utils.parseValue(val, Type.NUMBER));\n  }\n}\nContainer.registerNodeType('point/num-constant', NumConstantNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\n\n//String\nclass StringConstantNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.point[\"string-constant\"].title;\n    this.description = NODE_INFO.point[\"string-constant\"].description;\n    this.settings['value'] = NodeSetting.create({ description: 'Value', value: '', type: SettingType.STRING });\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n \n    this.onAfterSettingsChange();\n  }\n\n  onExecute(){\n    // this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    const val = this.settings['value'].value;\n    this.setOutputData(0, Utils.parseValue(val, Type.STRING));\n  }\n}\nContainer.registerNodeType('point/string-constant', StringConstantNode);\n","import { isEmpty, isJSON } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass JsonConstantNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.point[\"json-constant\"].title;\n    this.description = NODE_INFO.point[\"json-constant\"].description;\n     this.addInputWithSettings('value', Type.JSON, '{ \"measurement\": 22 }', 'JSON value');\n    this.settings['passNull'] = NodeSetting.create({\n      description: 'Send null if not a match',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.addOutput('output', Type.JSON);\n    this.addOutput('valid-json', Type.BOOLEAN);\n    this.addOutput('msg', Type.STRING);\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    const passNull = this.settings['passNull'].value;\n    try {\n      if (isJSON(val) && !isEmpty(val)) {\n        this.setOutputData(0, val);\n        this.setOutputData(1, true);\n        this.setOutputData(2, 'valid JSON');\n      } else if(passNull) {\n        this.setOutputData(0, null);\n        this.setOutputData(1, false);\n        this.setOutputData(2, 'invalid JSON');\n      } else {\n        this.setOutputData(1, false);\n        this.setOutputData(2, 'invalid JSON');\n      }\n    } catch (err) {\n      this.setOutputData(1, false);\n      this.setOutputData(2, err);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated()\n  }\n}\nContainer.registerNodeType('point/json-constant', JsonConstantNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass BoolPriorityNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.BOOLEAN;\n    this.title = NODE_INFO.point[\"bool-writable\"].title;\n    this.description = NODE_INFO.point[\"bool-writable\"].description; \n    this.addOutput('out', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const inputs = this.getInputsCount();\n    for (let i = this.dynamicInputStartPosition; i < inputs; i++) {\n      let inputValue = this.getInputData(i);\n      if (inputValue != null) {\n        this.setOutputData(0, inputValue);\n        return;\n      }\n    }\n    this.setOutputData(0, null);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('point/bool-writable', BoolPriorityNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass NumWritableNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    this.title = NODE_INFO.point[\"num-writable\"].title;\n    this.description = NODE_INFO.point[\"num-writable\"].description; \n   \n    this.addOutput('out', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n    this.size = this.computeSize();\n  }\n\n  onInputUpdated() {\n    const inputs = this.getInputsCount();\n    for (let i = this.dynamicInputStartPosition; i < inputs; i++) {\n      let inputValue = this.getInputData(i);\n      if (inputValue != null) {\n        this.setOutputData(0, inputValue);\n        return;\n      }\n    }\n    this.setOutputData(0, null);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType('point/num-writable', NumWritableNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass StringPriorityNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.STRING;\n    this.title = NODE_INFO.point[\"string-writable\"].title;\n    this.description = NODE_INFO.point[\"string-writable\"].description; \n   \n    this.addOutput('out', Type.STRING);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    for (let i = this.dynamicInputStartPosition; i < this.getInputsCount(); i++) {\n      let inputValue = this.getInputData(i);\n      if (inputValue) {\n        this.setOutputData(0, inputValue);\n        return;\n      }\n    }\n    this.setOutputData(0, '');\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('point/string-writable', StringPriorityNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport HistoryConfig from '../../utils/points/history-config';\nimport PriorityConfig from '../../utils/points/priority-config';\nimport { NODE_INFO } from '../../node-info';\n\n// TODO change history config to HistoryBase\nclass GenericNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.point[\"generic-point\"].title;\n    this.description = NODE_INFO.point[\"generic-point\"].description; \n\n    PriorityConfig.addPrioritySettings(this);\n    HistoryConfig.addHistorySettings(this);\n    this.setSettingsConfig({ groups: [], conditions: {} });\n    PriorityConfig.addPrioritySettingsConfig(this);\n    HistoryConfig.addHistorySettingsConfig(this, 0, false);\n  }\n\n  onCreated() {\n    PriorityConfig.priorityOnCreated(this);\n    HistoryConfig.historyOnCreated(this);\n  }\n\n  onAdded() {\n    //this.size = this.computeSize();\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    PriorityConfig.doPriorityFunctions(this);\n    if (this.side !== Side.server) return; // only execute on server\n    HistoryConfig.doHistoryFunctions(this);\n  }\n\n  onAfterSettingsChange() {\n    PriorityConfig.priorityFunctionsForAfterSettingsChange(this);\n    HistoryConfig.historyFunctionsForAfterSettingsChange(this, this.settings['pointName'].value);\n    PriorityConfig.doPriorityFunctions(this);\n    if (this.side !== Side.server) return; // only execute on server\n    HistoryConfig.doHistoryFunctions(this);\n    /*\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n    */\n  }\n}\n\nContainer.registerNodeType('point/generic-point', GenericNode);\n","/******************************************************\n *\n * Node Constructor should include the following:\n * Add this line in the settings setup, where the history settings should appear:\n *      HistoryConfig.addHistorySettings(this);\n *\n * Add this line at the end after this.setSettingsConfig() has been called,\n * or if this.setSettingsConfig() has not been used, then add this line after settings setup in Node Constructor:\n *      HistoryConfig.addHistorySettingsConfig(this);\n *\n *\n * Node Functions should include the following:\n *     async onInputUpdated() {\n *       if (this.side !== Side.server) return; // only execute on server\n *       HistoryConfig.doHistoryFunctions(this, 0, this.settings['pointName'].value);\n *     }\n *\n *     onAfterSettingsChange() {\n *       HistoryConfig.historyFunctionsForAfterSettingsChange(this, this.settings['pointName'].value);\n *       this.onInputUpdated();\n *       if (this.side !== Side.server) return; // HISTORY FUNCTONS MUST BE DONE ON BOTH SIDES\n *     }\n *\n */\n\nimport { Side } from '../../node-interface';\nimport { SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport TimeUtils from '../time-utils';\nimport SettingUtils from '../setting-utils';\nimport CryptoUtils from '../crypto-utils';\nimport NodeUtils from '../../utils/node-utils';\nimport axios from 'axios';\nimport config from '../../../config';\nimport SystemUtils from '../../nodes/system/system-utils';\nconst Influx = require('influx');\nconst moment = require('moment-timezone');\n\n\n\n/**\n * @Deprecated: Use HistoryBase instead of this one\n */\nexport default class HistoryConfig {\n  static addHistorySettings(self) {\n    self.addInput('histTrigger', Type.BOOLEAN);\n    self.addOutput('histError', Type.ANY);\n    self.addOutput('storedHistCount', Type.NUMBER);\n    self.addOutput('lastHistExport', Type.STRING);\n    for (let input in self.inputs) {\n      if (self.inputs.hasOwnProperty(input)) {\n        if (self.inputs[input].name == 'histTrigger') self.histTriggerInput = input;\n      }\n    }\n\n    for (let output in self.outputs) {\n      if (self.outputs.hasOwnProperty(output)) {\n        if (self.outputs[output].name == 'histError') self.histErrorOutput = output;\n        else if (self.outputs[output].name == 'storedHistCount') self.storedHistCountOutput = output;\n        else if (self.outputs[output].name == 'lastHistExport') self.lastHistExportOutput = output;\n      }\n    }\n\n    /**\n     * History settings\n     */\n    self.settings['history_group'] = {\n      description: 'History Settings',\n      value: '',\n      type: SettingType.GROUP,\n    };\n\n    self.settings['databaseType'] = {\n      description: 'Database Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'Nube DB (Postgres)' },\n          { value: 1, text: 'InfluxDB' },\n        ],\n      },\n      value: 0,\n    };\n\n    // THESE SETTINGS FOR INFLUX HISTORY STORAGE\n\n    self.settings['enable'] = {\n      description: 'History Enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['host'] = { description: 'Host', value: '', type: SettingType.STRING };\n    self.settings['port'] = { description: 'Port', value: '', type: SettingType.STRING };\n\n    self.settings['authentication'] = {\n      description: 'Use Authentication',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['user'] = { description: 'Username', value: '', type: SettingType.STRING };\n    self.settings['password'] = { description: 'Password', value: '', type: SettingType.STRING };\n\n    self.settings['databaseName'] = {\n      description: 'Database Name',\n      value: '',\n      type: SettingType.STRING,\n    };\n\n    self.settings['tableName'] = {\n      description: 'Measurement Name',\n      value: '',\n      type: SettingType.STRING,\n    };\n\n    // END OF INFLUX SPECIFIC SETTINGS\n\n    self.settings['pointName'] = {\n      description: 'Point Name',\n      value: '',\n      type: SettingType.STRING,\n    };\n\n    self.settings['historyMode'] = {\n      description: 'History Logging Mode',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'Change Of Value (COV)' },\n          { value: 1, text: 'Periodic' },\n          { value: 2, text: 'Trigger Only' },\n        ],\n      },\n      value: 0,\n    };\n\n    self.settings['threshold'] = {\n      description: 'COV Threshold',\n      value: 0,\n      type: SettingType.NUMBER,\n    };\n\n    self.settings['period'] = {\n      description: 'Logging Interval',\n      value: 15,\n      type: SettingType.NUMBER,\n    };\n    self.settings['periodUnits'] = {\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'minutes',\n    };\n\n    self.settings['storage-limit'] = {\n      description: 'Local Storage Limit (Max 50)',\n      value: 25,\n      type: SettingType.NUMBER,\n    };\n    self.settings['minuteRoundValue'] = {\n      description: 'Round minutes up in increments of',\n      value: 0,\n      type: SettingType.NUMBER,\n    };\n\n    self.settings['decimals'] = {\n      description: 'Decimal Places (Limit 5)',\n      value: 3,\n      type: SettingType.NUMBER,\n    };\n\n    self.settings['timeAsString'] = {\n      description: 'Display Timestamp as:',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: false, text: 'Numeric' },\n          { value: true, text: 'String' },\n        ],\n      },\n      value: true,\n    };\n\n    /**\n     * Alarm settings\n     */\n    self.settings['alarm_group'] = {\n      description: 'Alarm Settings',\n      value: '',\n      type: SettingType.GROUP,\n    };\n\n    self.settings['alarms_count'] = {\n      description: 'Alarms Count (Max 10)',\n      value: 0,\n      type: SettingType.NUMBER,\n    };\n\n    /**\n     * Tag settings\n     */\n    self.settings['tags_group'] = {\n      description: 'Tag Settings',\n      value: '',\n      type: SettingType.GROUP,\n    };\n\n    self.settings['tags_count'] = {\n      description: 'Tag Count (Max 10)',\n      value: 0,\n      type: SettingType.NUMBER,\n    };\n  }\n\n  static addHistorySettingsConfig(self, valueInput: number = 0, isOutput: boolean = true) {\n    if (!self.settingConfigs.hasOwnProperty('groups') && !self.settingConfigs.hasOwnProperty('conditions'))\n      self.setSettingsConfig({ groups: [], conditions: {} });\n    self.settingConfigs.groups.push({ history_group: {} });\n    self.settingConfigs.groups.push({ databaseType: {} });\n    self.settingConfigs.groups.push({ host: { weight: 3 }, port: { weight: 1 } });\n    self.settingConfigs.groups.push({ user: {}, password: {} });\n    self.settingConfigs.groups.push({ period: { weight: 2 }, periodUnits: {} });\n    self.settingConfigs.conditions['authentication'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['host'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['port'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['databaseName'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['tableName'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['user'] = setting => {\n      return !!setting['authentication'].value && setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['password'] = setting => {\n      return !!setting['authentication'].value && setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['threshold'] = setting => {\n      return !setting['historyMode'].value;\n    };\n    self.settingConfigs.conditions['period'] = setting => {\n      return setting['historyMode'].value == 1;\n    };\n    self.settingConfigs.conditions['periodUnits'] = setting => {\n      return setting['historyMode'].value == 1;\n    };\n    self.settingConfigs.conditions['alarm_group'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['alarms_count'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['tags_group'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['tags_count'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    if (self.settings['authentication']) {\n      self.settingConfigs.groups.push({ host: { weight: 3 }, port: { weight: 1 } });\n      self.settingConfigs.groups.push({ user: {}, password: {} });\n      self.settingConfigs.conditions['user'] = setting => {\n        return !!setting['authentication'].value;\n      };\n      self.settingConfigs.conditions['password'] = setting => {\n        return !!setting['authentication'].value;\n      };\n    }\n\n    self.properties['alarmsCount'] = self.settings['alarms_count'].value;\n    self.properties['tagsCount'] = self.settings['tags_count'].value;\n    self.properties['valueInput'] = valueInput || 0;\n    self.properties['isOutput'] = isOutput;\n  }\n\n  static historyOnCreated(self) {\n    self.useInterval = false;\n    self.properties['alarmsCount'] = 0;\n    self.properties['tagsCount'] = 0;\n    self.properties['valueInput'] = 0;\n    self.properties['isOutput'] = true;\n    self.properties['pointName'] = 'undefined';\n    self.properties['obj'] = [];\n    self.properties['lastHistoryValue'] = null;\n    self.properties['dynamicInputStartPosition'] = 2;\n  }\n\n  //static async doHistoryFunctions(self, valueInput:number, histTrigger:number, histErrorOutput:number, storedHistCountOutput:number, lastHistExportOutput:number) {\n  static async doHistoryFunctions(self) {\n    let input = null;\n    if (self.properties['isOutput']) input = self.getInputData(self.properties['valueInput']);\n    else input = self.outputs[self.properties['valueInput']].data;\n    if (self.getInputData(self.histTriggerInput) && self.inputs[self.histTriggerInput].updated)\n      await HistoryConfig.storeLogEntry(self, input);\n    else if (input != null && (await HistoryConfig.checkCOV(self, input))) {\n      await HistoryConfig.storeLogEntry(self, input);\n    }\n    if (self.properties['obj'].length > 0) await HistoryConfig.trySendStoredData(self);\n    self.setOutputData(self.storedHistCountOutput, self.properties['obj'].length);\n  }\n\n  static async trySendStoredData(self) {\n    let decimals = self.settings['decimals'].value;\n    if (decimals > 5) decimals = 5;\n\n    var points = [];\n    self.properties['obj'].forEach(log => {\n      if (typeof log.payload == 'number') log.payload = log.payload.toFixed(decimals);\n      var tagList = {};\n      tagList['point'] = self.properties['pointName'] || 'undefined';\n      for (var j = 2; j < Object.keys(log).length - 1; j++) {\n        var key = Object.keys(log)[j];\n        tagList[key] = log[key];\n      }\n      for (var i = 0; i < 10; i++) {\n        tagList['tag' + (i + 1)] = log['tags'][i] || null;\n      }\n      // this.getInputData(2), //tableName\n      points.push({\n        measurement: self.getInputData(2),\n        fields: {\n          val: log.payload,\n          //ts: log.timestamp.valueOf(), // check that self is the correct DATE format.\n        },\n        tags: tagList,\n        time: log.timestamp, // check that self is the correct DATE format.\n      });\n      /* \n        measurement: self.settings['tableName'].value,\n        fields: {\n          val: log.payload,\n          //ts: log.timestamp.valueOf(), // check that self is the correct DATE format.\n        },\n        alarms: {\n          point: pointName || 'undefined',\n        },\n        time: log.timestamp.valueOf(), // check that self is the correct DATE format.\n      });\n      */\n    });\n    var errorFlag = false;\n\n    /////////////////////////////////////////////////////////////\n    // This section should be replaced with the history storage mode of choice.\n\n    // FOR POSTGRESQL DB (NUBE DATABASE)\n    if (self.settings['databaseType'].value == 0) {\n      //USING AXIOS\n      // For Multiple points in 1 push\n      var multiPointPost = [];\n      const clientIDfromPlat = await SystemUtils.getDeviceIdDb();\n      const deviceIDfromPlat = await SystemUtils.getDeviceIdDb();\n      let foundDeviceID = false;\n      let foundClientID = false;\n      typeof deviceIDfromPlat == 'string' ? (foundDeviceID = true) : null;\n      typeof deviceIDfromPlat == 'string' ? (foundClientID = true) : null;\n      var inputVal;\n      var typeOfVal;\n      var valAsNum;\n      const pgUrl = config.pg.baseURL;\n      points.forEach(point => {\n        inputVal = point['fields']['val'];\n        typeOfVal = typeof inputVal;\n        if (typeOfVal === 'string' || typeOfVal === 'boolean') valAsNum = Number(point['fields']['val']);\n        else valAsNum = inputVal;\n        multiPointPost.push({\n          deviceid: foundDeviceID ? deviceIDfromPlat : 'unknownDeviceID',\n          clientid: foundClientID ? clientIDfromPlat : 'unknownClientID',\n          val: valAsNum,\n          point: point['tags']['point'],\n          ts: moment(point['time'])._d,\n        });\n      });\n\n      axios({\n        method: 'post',\n        url: pgUrl,\n        data: multiPointPost,\n      })\n        .then(function() {})\n        .catch(function(error) {\n          self.setOutputData(self.histErrorOutput, String(error));\n          errorFlag = true;\n        });\n    }\n\n    // FOR INFLUX DB\n    if (self.settings['databaseType'].value == 1) {\n      const host = self.settings['host'].value || 'localhost';\n      const port = self.settings['port'].value || 8086;\n      var writeOptions = {};\n\n      var client = new Influx.InfluxDB({\n        host: self.settings['host'].value || 'localhost',\n        port: self.settings['port'].value || 8086,\n        protocol: 'http', //self.influxdbConfig.usetls ? \"https\" : \"http\",\n        database: self.settings['databaseName'].value || 'undefined',\n        username: self.settings['authentication'].value ? self.settings['user'].value : '',\n        password: self.settings['authentication'].value ? CryptoUtils.decrypt(self.settings['password'].value) : '',\n        /*\n      schema: [\n        {\n          measurement: self.settings['tableName'].value,\n          fields: {\n            point: Influx.FieldType.STRING,\n            val: Influx.FieldType.ANY,\n            ts: Influx.FieldType.TIMESTAMP\n          },\n          tags: [],\n        }\n      ]\n      */\n      });\n      await client.writePoints(points, writeOptions).catch(err => {\n        self.setOutputData(self.histErrorOutput, String(err.code));\n        errorFlag = true;\n        //console.log('err', err);\n      });\n    }\n\n    /////////////////////////////////////////////////////////////\n\n    if (!errorFlag) {\n      self.properties['obj'] = [];\n      self.setOutputData(self.histErrorOutput, '');\n      self.settings['timeAsString'].value\n        ? self.setOutputData(self.lastHistExportOutput, moment().format(), true)\n        : self.setOutputData(self.lastHistExportOutput, moment().valueOf(), true);\n    }\n  }\n\n  static historyFunctionsForAfterSettingsChange(self, pointName: string, save: boolean = true) {\n    self.properties['pointName'] = pointName;\n    if (self.settings['databaseType'].value == 0) {\n      self.settings['alarms_count'].value = 0;\n      self.settings['tags_count'].value = 0;\n    }\n    HistoryConfig.changeAlarmsCount(self, self.settings['alarms_count'].value);\n    // Alarms settings values gets inserted after certain time -- Container.setSettings(properties, node);\n    setTimeout(() => {\n      HistoryConfig.renameAlarmInputs(self);\n    }, 100);\n    HistoryConfig.changeTagsCount(self, self.settings['tags_count'].value);\n    HistoryConfig.setPeriodicLogging(self);\n    if (save) {\n      NodeUtils.persistProperties(self, true, true, true);\n    }\n    if (self.properties['isOutput']) self.onInputUpdated();\n  }\n\n  static async storeLogEntry(self, input) {\n    if (input == null) return -1;\n    // cap the amount of data that can be stored\n    const storageLimit = Utils.clamp(self.settings['storage-limit'].value, 0, 50);\n    // round the time to the nearest min. For example 15min. 1:00, 1:15\n    const minuteRound = Utils.clamp(self.settings['minuteRoundValue'].value, 0, 60);\n    const now = minuteRound ? await self.nearestFutureMinutes(minuteRound, moment()) : moment();\n\n    // object data\n    let msg = {\n      payload: input,\n      timestamp: now._d,\n    };\n    // add alarm values\n    for (\n      var i = self.properties['dynamicInputStartPosition'];\n      i < self.properties['dynamicInputStartPosition'] + Number(self.properties['alarmsCount']);\n      i++\n    ) {\n      let alarmNum = i - self.properties['dynamicInputStartPosition'] + 1;\n      let alarmName = self.settings['alarm' + alarmNum].value || 'alarm' + alarmNum;\n      msg[alarmName] = self.getInputData(i) || 'null';\n    }\n    // add tags\n    var tags = [];\n    var j = 1;\n    while (j <= Number(self.properties['tagsCount'])) {\n      if (self.settings['tag' + j].value) tags.push(self.settings['tag' + j].value);\n      j++;\n    }\n    msg['tags'] = tags;\n\n    // build an object\n    self.properties['obj'].push(msg);\n    while (self.properties['obj'].length > storageLimit) {\n      self.properties['obj'].shift();\n    }\n    self.properties['lastHistoryValue'] = input;\n    NodeUtils.persistProperties(self, true, true, true);\n    //HistoryConfig.persistProperties(self);\n    return self.properties['obj'].length;\n  }\n\n  static async checkCOV(self, input) {\n    if (!self.settings['historyMode'].value) {\n      // if COV mode\n      const threshold = self.settings['threshold'].value;\n      if (threshold === 0 && input !== self.properties['lastHistoryValue']) return true;\n      const isNumber = typeof input === 'number';\n      if (input !== self.properties['lastHistoryValue']) {\n        if (\n          typeof self.properties['lastHistoryValue'] !== 'number' ||\n          !isNumber ||\n          (isNumber && Math.abs(input - self.properties['lastHistoryValue']) >= self.settings['threshold'].value)\n        )\n          return true;\n      }\n    }\n    return false;\n  }\n\n  static setPeriodicLogging(self) {\n    if (self.settings['historyMode'].value == 1 && !self.useInterval) {\n      self.useInterval = true;\n      let interval = self.settings['period'].value;\n      interval = TimeUtils.timeConvert(interval, self.settings['periodUnits'].value);\n      self.timeoutFunc = setInterval(async () => {\n        let input = null;\n        if (self.properties['isOutput']) input = self.getInputData(self.properties['valueInput']);\n        else input = self.outputs[self.properties['valueInput']].data;\n        await HistoryConfig.storeLogEntry(self, input);\n        if (self.properties['obj'].length > 0) await HistoryConfig.trySendStoredData(self);\n        self.setOutputData(self.storedHistCountOutput, self.properties['obj'].length);\n        // add status output\n      }, interval);\n    } else if (self.settings['historyMode'].value != 1 && self.useInterval) {\n      self.useInterval = false;\n      clearInterval(self.timeoutFunc);\n    }\n  }\n\n  static nearestFutureMinutes(interval, someMoment) {\n    const roundedMinutes = Math.ceil(someMoment.minute() / interval) * interval;\n    return someMoment\n      .clone()\n      .minute(roundedMinutes)\n      .second(0);\n  }\n\n  static changeAlarmsCount(self, target_count) {\n    if (target_count > 10) {\n      target_count = 10;\n      self.settings['alarms_count'].value = 10;\n    } else if (target_count < 0) {\n      target_count = 0;\n      self.settings['alarms_count'].value = 0;\n    }\n    self.properties['alarmsCount'] = Number(self.properties['alarmsCount']);\n    let diff = target_count - self.properties['alarmsCount'];\n    if (diff == 0) return;\n\n    //add inputs\n    self.changeInputsCount(target_count + self.properties['dynamicInputStartPosition'], Type.STRING);\n\n    //change settings for topics\n    var alarmsToAdd = {};\n    if (diff > 0) {\n      for (let i = self.properties['alarmsCount'] + 1; i <= target_count; i++) {\n        alarmsToAdd['alarm' + i] = {\n          description: 'Alarm ' + i,\n          value: '',\n          type: SettingType.STRING,\n        };\n      }\n      if (self.properties['alarmsCount'] <= 0)\n        self.settings = SettingUtils.insertIntoObjectAtPosition(self.settings, alarmsToAdd, 'alarms_count');\n      else\n        self.settings = SettingUtils.insertIntoObjectAtPosition(\n          self.settings,\n          alarmsToAdd,\n          'alarm' + self.properties['alarmsCount'],\n        );\n    } else if (diff < 0) {\n      for (let i = self.properties['alarmsCount']; i > target_count; i--) {\n        delete self.settings['alarm' + i];\n      }\n    }\n    self.properties['alarmsCount'] = target_count;\n  }\n\n  static renameAlarmInputs(self) {\n    for (let i = 1; i <= self.properties['alarmsCount']; i++) {\n      //this.inputs[i].name = '[' + i + ']';\n      let alarm = self.settings['alarm' + i].value;\n      if (alarm.length > 20) alarm = '...' + alarm.substr(alarm.length - 20, 20);\n      self.inputs[self.properties['dynamicInputStartPosition'] + i - 1].name = 'alarm' + i + ' | ' + alarm;\n    }\n\n    if (self.side == Side.editor) {\n      for (let i = 1; i <= self.properties['alarmsCount']; i++) {\n        self.inputs[self.properties['dynamicInputStartPosition'] + i - 1].label =\n          self.inputs[self.properties['dynamicInputStartPosition'] + i - 1].name;\n      }\n      self.setDirtyCanvas(true, true);\n    }\n  }\n\n  static changeTagsCount(self, target_count) {\n    if (target_count > 10) {\n      target_count = 10;\n      self.settings['tags_count'].value = 10;\n    } else if (target_count < 0) {\n      target_count = 0;\n      self.settings['tags_count'].value = 0;\n    }\n    self.properties['tagsCount'] = Number(self.properties['tagsCount']);\n    let diff = target_count - self.properties['tagsCount'];\n    if (diff == 0) return;\n\n    //change settings for topics\n    var tagsToAdd = {};\n    if (diff > 0) {\n      for (let i = self.properties['tagsCount'] + 1; i <= target_count; i++) {\n        tagsToAdd['tag' + i] = {\n          description: 'Tag ' + i,\n          value: '',\n          type: SettingType.STRING,\n        };\n      }\n      if (self.properties['tagsCount'] == 0)\n        self.settings = SettingUtils.insertIntoObjectAtPosition(self.settings, tagsToAdd, 'tags_count');\n      else\n        self.settings = SettingUtils.insertIntoObjectAtPosition(\n          self.settings,\n          tagsToAdd,\n          'tag' + self.properties['tagsCount'],\n        );\n    } else if (diff < 0) {\n      for (let i = self.properties['tagsCount']; i > target_count; i--) {\n        delete self.settings['tag' + i];\n      }\n    }\n    self.properties['tagsCount'] = target_count;\n  }\n\n  // static getDeviceID(self): Promise<Array<any>> {\n  //   return new Promise((resolve, reject) => {\n  //     try {\n  //       HistoryConfig.findMainContainer(self).db.getNodeType('system/platform', (err, docs) => {\n  //         if (!err) {\n  //           let output = [];\n  //           output.push(docs);\n  //           if (output[0] && output[0][0] && output[0][0].properties) {\n  //             resolve(output[0][0].properties['deviceID'].trim());\n  //             return output[0][0].properties['deviceID'].trim();\n  //           } else {\n  //           }\n  //           resolve(output);\n  //           return output;\n  //         } else {\n  //           console.log(err);\n  //           reject(err);\n  //         }\n  //       });\n  //     } catch (error) {\n  //       console.log(error);\n  //     }\n  //   });\n  // }\n\n  // static getClientID(self): Promise<Array<any>> {\n  //   return new Promise((resolve, reject) => {\n  //     try {\n  //       HistoryConfig.findMainContainer(self).db.getNodeType('system/platform', (err, docs) => {\n  //         if (!err) {\n  //           let output = [];\n  //           output.push(docs);\n  //           if (output[0] && output[0][0] && output[0][0].settings) {\n  //             resolve(output[0][0].settings['clientId'].value.trim());\n  //             return output[0][0].settings['clientId'].value.trim();\n  //           } else {\n  //           }\n  //           resolve(output);\n  //           return output;\n  //         } else {\n  //           console.log(err);\n  //           reject(err);\n  //         }\n  //       });\n  //     } catch (error) {\n  //       console.log(error);\n  //     }\n  //   });\n  // }\n\n  static findMainContainer(self) {\n    if (self.hasOwnProperty('container')) return HistoryConfig.findMainContainer(self.container);\n    else return self;\n  }\n\n  static persistProperties(self) {\n    if (!self.container.db) return;\n    self.container.db.updateNode(self.id, self.container.id, {\n      $set: {\n        properties: self.properties,\n        inputs: self.inputs,\n        settings: self.settings,\n      },\n    });\n  }\n}\n","/******************************************************\n *\n * Node Constructor should include the following:\n * Add this line in the settings setup, where the history settings should appear:\n *      PriorityConfig.addPrioritySettings(this);\n *\n * Add this line at the end after this.setSettingsConfig() has been called,\n * or if this.setSettingsConfig() has not been used, then add this line after settings setup in Node Constructor:\n *      PriorityConfig.addPrioritySettingsConfig(this);\n *\n *\n * Node Functions should include the following:\n *     async onInputUpdated() {\n *       if (this.side !== Side.server) return; // only execute on server\n *       PriorityConfig.doPriorityFunctions(this);\n *     }\n *\n *     onAfterSettingsChange() {\n *       PriorityConfig.priorityFunctionsForAfterSettingsChange(this);\n         PriorityConfig.doPriorityFunctions(this);\n *       if (this.side !== Side.server) return; // HISTORY FUNCTONS MUST BE DONE ON BOTH SIDES\n *     }\n *\n */\n\nimport { SettingType, Type } from '../../node-io';\nimport NodeUtils from '../../utils/node-utils';\n//import { tagsAll } from './tags';\n\nexport default class PriorityConfig {\n  static addPrioritySettings(self) {\n    self.properties['priorityStartInput'] = self.getFreeInputId();\n    self.properties['priorityStartOutput'] = self.getFreeOutputId();\n    self.addInput('inputValue', Type.ANY);\n    self.addInput('inputPriority', Type.NUMBER);\n    self.addOutput('outputValue', Type.ANY);\n    self.addOutput('outputPriority', Type.NUMBER);\n    self.addOutput('outputJSON', Type.STRING);\n\n    for (let input in self.inputs) {\n      if (self.inputs[input].name == 'inputValue') {\n        self.properties['valueInput'] = input;\n      } else if (self.inputs[input].name == 'inputPriority') self.properties['priorityInput'] = input;\n    }\n\n    for (let output in self.outputs) {\n      if (self.outputs[output].name == 'outputValue') {\n        self.properties['valueOutput'] = output;\n      } else if (self.outputs[output].name == 'outputPriority') {\n        self.properties['priorityOutput'] = output;\n      } else if (self.outputs[output].name == 'outputJSON') self.properties['jsonOutput'] = output;\n    }\n\n    /**\n     Point settings\n     */\n    self.settings['input_group'] = {\n      description: 'Input Settings',\n      value: '',\n      type: SettingType.GROUP,\n    };\n\n    self.settings['decimals'] = {\n      description: 'Decimal Places (Limit 5)',\n      value: 3,\n      type: SettingType.NUMBER,\n    };\n\n    self.settings['inputMethod'] = {\n      description: 'Input Method',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'Value and Priority' },\n          { value: 1, text: 'Priority Array' },\n          { value: 2, text: 'JSON' },\n        ],\n      },\n      value: 0,\n    };\n\n    // SETTINGS FOR \"VALUE AND PRIORITY\"\n    self.properties['priorityLevelItems'] = Array(16)\n      .fill(null)\n      .map((_, i) => ({ value: i + 1, text: (i + 1).toString() }));\n\n    self.settings['priorityLevel'] = {\n      description: 'Write Priority Level',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: self.properties['priorityLevelItems'],\n      },\n      value: 16,\n    };\n\n    // SETTINGS FOR \"PRIORITY ARRAY\"\n    self.settings['in1'] = {\n      description: 'in1',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in2'] = {\n      description: 'in2',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in3'] = {\n      description: 'in3',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in4'] = {\n      description: 'in4',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in5'] = {\n      description: 'in5',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in6'] = {\n      description: 'in6',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in7'] = {\n      description: 'in7',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in8'] = {\n      description: 'in8',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in9'] = {\n      description: 'in9',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in10'] = {\n      description: 'in10',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in11'] = {\n      description: 'in11',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in12'] = {\n      description: 'in12',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in13'] = {\n      description: 'in13',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in14'] = {\n      description: 'in14',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in15'] = {\n      description: 'in15',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in16'] = {\n      description: 'in16',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n  }\n\n  static addPrioritySettingsConfig(self) {\n    if (!self.settingConfigs.hasOwnProperty('groups') && !self.settingConfigs.hasOwnProperty('conditions')) {\n      self.setSettingsConfig({ groups: [], conditions: {} });\n    }\n    self.settingConfigs.groups.push({ input_group: {} });\n    self.settingConfigs.conditions['priorityLevel'] = setting => {\n      return setting['inputMethod'].value == 0;\n    };\n    self.settingConfigs.conditions['in1'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in2'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in3'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in4'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in5'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in6'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in7'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in8'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in9'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in10'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in11'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in12'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in13'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in14'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in15'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in16'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n\n    //self.properties['priorityArray'] = new Array<Object>(16).fill(null);\n    self.properties['priorityArray'] = {};\n    for (var i = 1; i < 16; i++) {\n      self.properties['priorityArray'][String(i)] = null;\n    }\n    self.properties['inputMethod'] = self.settings['inputMethod'].value;\n    self.properties['prioritySettingsArray'] = new Array<Object>(16).fill(false);\n  }\n\n  static priorityOnCreated(self) {\n    self.properties['dynamicInputStartPosition'] = self.getInputsCount();\n    NodeUtils.persistProperties(self, true, true, true, true);\n  }\n\n  static async doPriorityFunctions(self) {\n    let input = null;\n    let priority = null;\n    switch (self.properties['inputMethod']) {\n      case 0:\n        input = self.getInputData(self.properties['priorityStartInput']);\n        if (input == undefined) input = null;\n        priority = self.getInputData(self.properties['priorityStartInput'] + 1) || 16;\n        if (priority > 16 || priority == null) priority = 16;\n        //self.properties['priorityArray'][`${priority-1}`] = input;\n        self.properties['priorityArray'][String(priority)] = input;\n        break;\n      case 1:\n        var inputsCount = 0;\n        self.properties['prioritySettingsArray'].forEach(setting => {\n          if (setting) inputsCount++;\n        });\n        for (var i = 0; i < inputsCount; i++) {\n          input = self.getInputData(self.properties['priorityStartInput'] + i);\n          if (input == undefined) input = null;\n          const inputName = self.inputs[self.properties['priorityStartInput'] + i].name;\n          if (inputName.startsWith('in')) {\n            const inputNumber = Number(inputName.replace(/\\D/g, ''));\n            if (!isNaN(inputNumber)) {\n              self.properties['priorityArray'][`${inputNumber}`] = input;\n            }\n          }\n        }\n        break;\n      case 2:\n        input = self.getInputData(self.properties['priorityStartInput']);\n        if (typeof input === 'string') {\n          try {\n            self.properties['priorityArray'] = JSON.parse(input);\n          } catch (e) {\n            console.log('PRIORITY ARRAY JSON ERROR: ', e);\n          }\n        }\n        break;\n    }\n\n    // CODE FOR A FUTURE INPUT METHOD\n    /*\n    if (payload.hasOwnProperty('priority') && payload.hasOwnProperty('value')) {\n      const priority = parseInt(payload['priority']);\n      if (isNaN(priority) || priority < 1 || priority > 16) {\n        this.debugErr('Invalid priority');\n        return;\n      }\n      // Release override\n      if (payload.value === '' || payload.value === null) {\n        this.priorityArray[priority - 1] = {}; // 1 priority on 0 position, 2 on 1 and so on...\n      } else {\n        this.priorityArray[priority - 1] = payload;\n      }\n    }\n    */\n\n    //const highestPriorityIndex = self.properties['priorityArray'].findIndex(\n    const highestPriorityIndex =\n      Object.values(self.properties['priorityArray']).findIndex(element => element != null) + 1;\n\n    if (highestPriorityIndex <= 0) {\n      self.setOutputData(self.properties['priorityStartOutput'], null);\n      self.setOutputData(self.properties['priorityStartOutput'] + 1, null);\n      self.setOutputData(self.properties['priorityStartOutput'] + 2, null);\n    } else {\n      self.setOutputData(\n        self.properties['priorityStartOutput'],\n        self.properties['priorityArray'][String(highestPriorityIndex)],\n      );\n      self.setOutputData(self.properties['priorityStartOutput'] + 1, highestPriorityIndex);\n      self.setOutputData(self.properties['priorityStartOutput'] + 2, self.properties['priorityArray']);\n    }\n  }\n\n  static async priorityFunctionsForAfterSettingsChange(self) {\n    if (self.properties['inputMethod'] !== self.settings['inputMethod'].value) {\n      PriorityConfig.initializePriorityArray(self);\n      switch (self.settings['inputMethod'].value) {\n        case 0:\n          if (self.properties['inputMethod'] == 2) {\n            self.removeInputAtPosition(self.properties['priorityStartInput']);\n          } else if (self.properties['inputMethod'] == 1) {\n            PriorityConfig.updatePriorityInputsFromSettings(self, true);\n          }\n          self.addInputAtPosition(self.properties['priorityStartInput'], 'inputValue', Type.ANY);\n          self.addInputAtPosition(self.properties['priorityStartInput'] + 1, 'inputPriority', Type.NUMBER);\n          break;\n        case 1:\n          if (self.properties['inputMethod'] == 2) {\n            self.removeInputAtPosition(self.properties['priorityStartInput']);\n          } else if (self.properties['inputMethod'] == 0) {\n            self.removeInputAtPosition(self.properties['priorityStartInput']);\n            self.removeInputAtPosition(self.properties['priorityStartInput']);\n          }\n          PriorityConfig.updatePriorityInputsFromSettings(self);\n          break;\n        case 2:\n          if (self.properties['inputMethod'] == 1) {\n            PriorityConfig.updatePriorityInputsFromSettings(self, true);\n          } else if (self.properties['inputMethod'] == 0) {\n            self.removeInputAtPosition(self.properties['priorityStartInput']);\n            self.removeInputAtPosition(self.properties['priorityStartInput']);\n          }\n          self.addInputAtPosition(self.properties['priorityStartInput'], 'inputJSON', Type.ANY);\n          break;\n      }\n    } else if (self.properties['inputMethod'] == 1) PriorityConfig.updatePriorityInputsFromSettings(self);\n    self.properties['inputMethod'] = self.settings['inputMethod'].value;\n    NodeUtils.persistProperties(self, true, true, true);\n  }\n\n  static async updatePriorityInputsFromSettings(self, removeAll = false) {\n    const startPosition = self.properties['priorityStartInput'];\n    var settingsArray = new Array(16).fill(false);\n    var inputsArray = new Array(16).fill(-1);\n    //console.log('INPUTS BEFORE', self.inputs)\n\n    for (var i = 0; i < 16; i++) {\n      removeAll ? (settingsArray[i] = false) : (settingsArray[i] = self.settings['in' + (i + 1)].value);\n      if (self.inputs.hasOwnProperty(`${startPosition + i}`)) {\n        const inputName = self.inputs[`${startPosition + i}`].name;\n        if (inputName.startsWith('in')) {\n          const inputNumber = Number(inputName.replace(/\\D/g, ''));\n          if (!isNaN(inputNumber)) {\n            inputsArray[i] = inputNumber;\n          }\n        }\n      }\n      self.properties['prioritySettingsArray'] = settingsArray;\n    }\n    //console.log('settingsArray', settingsArray)\n    //console.log('inputsArray', inputsArray)\n\n    for (var j = 0; j < 16; j++) {\n      //console.log('J', j)\n      if (settingsArray[j]) {\n        for (var y = 0; y <= j; y++) {\n          //console.log('Y', y)\n          const inputArrayatY = inputsArray[y];\n          //console.log('inputArrayatY', inputArrayatY)\n          if (inputArrayatY == j + 1) break;\n          //console.log('pastBreak')\n          if (inputArrayatY == -1 || inputArrayatY > j + 1) {\n            self.addInputAtPosition(startPosition + y, 'in' + (j + 1), Type.ANY);\n            inputsArray.splice(y, 0, j + 1);\n            inputsArray.pop();\n            //console.log('inputsArray', inputsArray);\n            //console.log('INPUTS', self.inputs)\n            break;\n          }\n        }\n      } else if (!settingsArray[j]) {\n        for (var x = 0; x <= j; x++) {\n          //console.log('X', x)\n          const inputArrayatX = inputsArray[x];\n          if (inputArrayatX == -1 || inputArrayatX > j + 1) {\n            break;\n          } else if (inputsArray[x] == j + 1) {\n            self.removeInputAtPosition(startPosition + x);\n            inputsArray.splice(x, 1);\n            inputsArray.push(-1);\n            //console.log('inputsArray', inputsArray)\n            //console.log('INPUTS', self.inputs)\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  static async initializePriorityArray(self) {\n    self.properties['priorityArray'] = {};\n    for (var i = 1; i < 16; i++) {\n      self.properties['priorityArray'][String(i)] = null;\n    }\n  }\n}\n","import * as nodemailer from 'nodemailer';\nimport { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport CryptoUtils from '../../../utils/crypto-utils';\n\nclass EmailNode extends Node {\n  lastTrigger: boolean;\n  // Supported services: https://github.com/nodemailer/nodemailer/blob/master/lib/well-known/services.json\n  services = ['Gmail', 'Hotmail', 'Outlook365', 'Yahoo'].map(service => {\n    return { value: service, text: service };\n  });\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/misc\"].email.title;\n    this.description = NODE_INFO[\"protocols/misc\"].email.description;\n    this.settings['service'] = NodeSetting.create({\n      description: 'Service',\n      value: this.services[0].value,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: this.services,\n      },\n    });\n    this.settings['user'] = NodeSetting.create({ description: 'Email', value: '', type: SettingType.STRING });\n    this.settings['pass'] = NodeSetting.create({ description: 'Password', value: '', type: SettingType.PASSWORD });\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInputWithSettings('recipient', Type.STRING, '', 'To', false);\n    this.addInputWithSettings('subject', Type.STRING, '', 'Subject', false);\n    this.addInputWithSettings('message', Type.STRING, '', 'Message', false);\n    this.addOutput('response', Type.STRING);\n    this.addOutput('error', Type.STRING);\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return; // only execute on server\n\n    let trigger = this.getInputData(0);\n    if (!Utils.hasInput(trigger)) trigger = false;\n    if (trigger == this.lastTrigger) return;\n    else this.lastTrigger = trigger;\n    if (trigger == false) return;\n\n    const service = this.settings['service'].value;\n    const user = this.settings['user'].value;\n    const from = user;\n    const pass = this.settings['pass'].value;\n    const to = this.getInputData(1);\n    const subject = this.getInputData(2);\n    const text = this.getInputData(3);\n\n    const transporter = nodemailer.createTransport({\n      service,\n      auth: { user, pass: CryptoUtils.decrypt(pass) },\n    });\n\n    transporter.sendMail({ from, to, subject, text }, error => {\n      if (error) {\n        this.emitError(error.message);\n      } else {\n        this.emitResult(true);\n      }\n    });\n  }\n\n  emitResult(result) {\n    this.setOutputData(0, result);\n    this.setOutputData(1, null);\n  }\n\n  emitError(body) {\n    this.setOutputData(0, null);\n    this.setOutputData(1, body);\n  }\n}\n\nContainer.registerNodeType('protocols/misc/email', EmailNode);\n","module.exports = require(\"nodemailer\");","import { default as axios, Method } from 'axios';\nimport { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { NodeSetting, SettingType } from '../../../node-io';\n\nenum HttpMethod {\n  GET = 'GET',\n  POST = 'POST',\n  PUT = 'PUT',\n  DELETE = 'DELETE',\n  PATCH = 'PATCH',\n}\n\nclass HttpClientNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/http\"][\"http-client\"].title;\n    this.description = NODE_INFO[\"protocols/http\"][\"http-client\"].description;\n    this.addInput('request body');\n    this.addOutput('response');\n    this.settings['enable'] = NodeSetting.create({ description: 'Enable', value: true, type: SettingType.BOOLEAN });\n    this.settings['method'] = NodeSetting.create({\n      description: 'Request Method',\n      value: HttpMethod.GET,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: Object.keys(HttpMethod),\n      },\n    });\n    this.settings['url'] = NodeSetting.create({ description: 'HTTP URL', value: 'http://', type: SettingType.STRING });\n  }\n\n  onInputUpdated() {\n    if (!this.isEnabled()) return;\n    const methodsWithBody = [HttpMethod.PATCH, HttpMethod.PUT, HttpMethod.POST].map(v =>\n      v.toString().toLowerCase(),\n    );\n    const url = this.getSanitizedUrl();\n    const method = this.getSanitizedMethod();\n    const input_data = this.inputs[0].data;\n    const data =\n      methodsWithBody.includes(method) && typeof input_data === 'object' ? input_data : undefined;\n    try {\n      this.validateMethod(method);\n      axios.request({ url, method, data }).then(\n        r => this.setOutputData(0, r.data),\n        e => this.debugErr(e.message),\n      );\n    } catch (e) {\n      this.debugErr(e.message);\n    }\n  }\n\n  isEnabled(): boolean {\n    return this.settings['enable'].value;\n  }\n\n  getSanitizedUrl(): string {\n    return this.settings['url'].value.trim();\n  }\n\n  getSanitizedMethod(): Method {\n    return this.settings['method'].value.trim().toLowerCase();\n  }\n\n  validateMethod(method: string) {\n    if (Object.keys(HttpMethod).indexOf(method.toUpperCase()) === -1) {\n      throw new Error('Unknown HTTP request method: ' + method);\n    }\n  }\n\n  onCreated() {}\n  onAdded() {}\n  onAfterSettingsChange() {}\n}\n\nContainer.registerNodeType('protocols/http-client', HttpClientNode);\n","import axios from 'axios';\nimport { EDGE_28_NETWORK } from '../../../constants';\nimport { Container } from '../../../container';\nimport { ContainerNode } from '../../../container-node';\nimport { Node } from '../../../node';\nimport Icons from '../../../node-icons';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport TimeUtils from '../../../utils/time-utils';\nimport { ADD_POINT, edgeApiVer, edgeIp, edgePort, REMOVE_POINT } from './edge-constant';\nimport Edge28Utils from './edge-utils';\n\nclass Edge28ApiNode extends ContainerNode {\n  // point object\n  pointNodes: Array<Node> = [];\n  edgeReadDI_Store: {};\n  edgeReadUI_Store: {};\n\n  // node inputs\n  inAlarmTrigger = 0;\n  inHistoryTrigger = 1;\n  inInput = 2;\n\n  // node outputs\n  outVal = 0;\n  outError = 1;\n  outMessageJson = 2;\n  outAlarm = 3;\n\n  lastInterval = 1000;\n  runState: boolean = true;\n  UI_timeoutFunc;\n  DI_timeoutFunc;\n  _ui = 'ui';\n  _di = 'di';\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/nube\"][\"edge-28-network\"].title;\n    this.description = NODE_INFO[\"protocols/nube\"][\"edge-28-network\"].description;\n    if (this.side !== Side.server) {\n      this.iconImageUrl = NODE_INFO[\"protocols/nube\"][\"edge-28-network\"].iconImageUrl;\n    }\n\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addInputWithSettings('interval', Type.NUMBER, 2, 'Polling Interval');\n    this.addOutput('connected', Type.BOOLEAN);\n    this.addOutput('error', Type.STRING);\n\n    this.headerColor = '#184840';\n    this.settings['time'] = NodeSetting.create({\n      description: 'Polling Interval Time Setting',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          // { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n  }\n\n  async fetchPointValue(host: string, port: number, apiVer: string, pointType: string): Promise<any> {\n    const url = `${Utils.buildUrl(host, port)}/api/${apiVer}/read/all/${pointType}`;\n    const pointValue = await axios.get(url);\n    return pointValue.data;\n  }\n\n  async onAdded() {\n    super.onAdded();\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n    clearInterval(this.UI_timeoutFunc);\n    clearInterval(this.DI_timeoutFunc);\n    let enable = this.getInputData(0);\n    if (!enable) {\n      this.setOutputData(0, false); //connected\n      this.runState = false;\n      return;\n    }\n    let interval = this.getInputData(1);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    this.startInputPolling(interval);\n    await this.onInputUpdated();\n  }\n\n  async onRemoved() {\n    super.onRemoved();\n    clearInterval(this.UI_timeoutFunc);\n    clearInterval(this.DI_timeoutFunc);\n  }\n\n  startInputPolling(interval: number) {\n    if (this.side !== Side.server) return;\n    this.UI_timeoutFunc = setInterval(async () => {\n      // get UIs\n      await this.pollUIs();\n      this.sendPayloadToPointNodesFunc();\n    }, interval);\n    this.DI_timeoutFunc = setInterval(async () => {\n      // get DIs\n      await this.pollDIs();\n      this.sendPayloadToPointNodesFunc();\n    }, interval + 5);\n  }\n\n  async pollUIs() {\n    try {\n      this.edgeReadUI_Store = await this.fetchPointValue(edgeIp, edgePort, edgeApiVer, this._ui);\n      this.setOutputData(0, true); //connected\n      this.setOutputData(1, false); //error\n      // NodeColours.nodeColourChange(this, NodeState.ONLINE);\n    } catch (err) {\n      this.debugInfo(`ERROR: getting edge point type: ${this._ui} ${err}`);\n      this.setOutputData(0, false); //connected\n      this.setOutputData(1, true); //error\n      // NodeColours.nodeColourChange(this, NodeState.OFFLINE);\n    }\n  }\n\n  async pollDIs() {\n    try {\n      this.edgeReadDI_Store = await this.fetchPointValue(edgeIp, edgePort, edgeApiVer, this._di);\n      this.setOutputData(0, true); //connected\n      this.setOutputData(1, false); //error\n      // NodeColours.nodeColourChange(this, NodeState.ONLINE);\n    } catch (err) {\n      this.debugInfo(`ERROR: getting edge point type: ${this._di} ${err}`);\n      this.setOutputData(0, false); //connected\n      this.setOutputData(1, true); //error\n      // NodeColours.nodeColourChange(this, NodeState.OFFLINE);\n    }\n  }\n\n  async pollInputsAndSend() {\n    if (this.side !== Side.server) return;\n    await this.pollUIs();\n    await this.pollDIs();\n    this.sendPayloadToPointNodesFunc();\n  }\n\n  sendPayloadToPointNodesFunc() {\n    if (this.side !== Side.server) return;\n    for (let pointNode of this.pointNodes) {\n      Edge28Utils.sendPayloadToChild(pointNode, {\n        pointsDI: this.edgeReadDI_Store,\n        pointsUI: this.edgeReadUI_Store,\n      });\n    }\n  }\n\n  subscribe({ action, payload }) {\n    switch (action) {\n      case ADD_POINT:\n        this.pointNodes.push(payload);\n        break;\n      case REMOVE_POINT:\n        this.pointNodes = this.pointNodes.filter(pointNode => pointNode.id !== payload.id);\n        break;\n      default:\n        this.debugWarn(\"Request action doesn't match\");\n    }\n  }\n\n  async onInputUpdated() {\n    if (this.side !== Side.server) return;\n    let enable = this.getInputData(0);\n    if (!enable && this.runState) {\n      clearInterval(this.UI_timeoutFunc);\n      clearInterval(this.DI_timeoutFunc);\n      this.setOutputData(0, false, true); //connected\n      this.runState = false;\n      return;\n    } else if (!enable && !this.runState) {\n      this.setOutputData(0, false, true); //connected\n      this.runState = false;\n      return;\n    } else if (enable) {\n      let interval = this.getInputData(1);\n      interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n      if (this.runState) {\n        if (interval != this.lastInterval) {\n          this.lastInterval = interval;\n          clearInterval(this.UI_timeoutFunc);\n          clearInterval(this.DI_timeoutFunc);\n          this.startInputPolling(interval);\n        }\n        return;\n      } else if (!this.runState) {\n        this.runState = true;\n        this.startInputPolling(interval);\n        return;\n      }\n      await this.pollInputsAndSend();\n    }\n  }\n\n  async onAfterSettingsChange(oldSettings: any) {\n    super.onAfterSettingsChange(oldSettings);\n    if (this.side !== Side.server) return;\n    await this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType(EDGE_28_NETWORK, Edge28ApiNode);\n","import { EDGE_28_INPUT, EDGE_28_NETWORK } from '../../../constants';\nimport { Container } from '../../../container';\nimport { NodeState } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport MathUtils, { MATH_FUNC_TYPE } from '../../../utils/MathUtils';\nimport HistoryBase from '../../history/HistoryBase';\nimport Edge10kSensorUtils from './edge-10k-sensor-calc';\nimport { SEND_PAYLOAD_TO_CHILD } from './edge-constant';\nimport EdgeGPIOUtils from './edge-gpio-utils';\nimport Edge28Utils from './edge-utils';\n\nenum POINT_TYPE {\n  DIGITAL = 1,\n  UI_DIGITAL = 2,\n  _0_10DC = 3,\n  _0_20MA = 4,\n  _4_20MA = 5,\n  _10K_THERMISTOR = 6,\n}\n\nenum POINT_TYPE_TEXT {\n  DIGITAL = 'Digital',\n  UI_DIGITAL = `UI-Digital`,\n  _0_10DC = `0-10dc`,\n  _0_20MA = `0-20ma`,\n  _4_20MA = `4-20ma`,\n  _10K_THERMISTOR = `10k-thermistor`,\n}\n\nclass Edge28InputPointNode extends HistoryBase {\n  out: any;\n  constructor() {\n    super();\n    this.title = NODE_INFO['protocols/nube']['edge-28-input'].title;\n    this.description = NODE_INFO['protocols/nube']['edge-28-input'].description;\n    this.addOutput('output', Type.NUMBER);\n    this.addOutput('output-json', Type.STRING);\n    this.addOutput('error', Type.STRING);\n\n    /**\n      Default point Settings (Will be in point class)\n   */\n    this.settings['pointEnable'] = NodeSetting.create({\n      description: 'Point enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['pointDebug'] = NodeSetting.create({\n      description: 'Point Debug',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['pointNumber'] = NodeSetting.create({\n      description: 'Point',\n      value: 'DI1',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'DI1', text: `DI1` },\n          { value: 'DI2', text: `DI2` },\n          { value: 'DI3', text: `DI3` },\n          { value: 'DI4', text: `DI4` },\n          { value: 'DI5', text: `DI5` },\n          { value: 'DI6', text: `DI6` },\n          { value: 'DI7', text: `DI7` },\n          { value: 'UI1', text: `UI1` },\n          { value: 'UI2', text: `UI2` },\n          { value: 'UI3', text: `UI3` },\n          { value: 'UI4', text: `UI4` },\n          { value: 'UI5', text: `UI5` },\n          { value: 'UI6', text: `UI6` },\n          { value: 'UI7', text: `UI7` },\n        ],\n      },\n    });\n    this.settings['pointType'] = NodeSetting.create({\n      description: 'Point Type',\n      value: 1,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: POINT_TYPE.DIGITAL, text: `Digital` },\n          { value: POINT_TYPE.UI_DIGITAL, text: `UI-Digital` },\n          { value: POINT_TYPE._0_10DC, text: `0-10dc` },\n          { value: POINT_TYPE._0_20MA, text: `0-20ma` },\n          { value: POINT_TYPE._4_20MA, text: `4-20ma` },\n          { value: POINT_TYPE._10K_THERMISTOR, text: `10k-thermistor` },\n        ],\n        value: POINT_TYPE.DIGITAL,\n      },\n    });\n\n    this.settings['value_group'] = NodeSetting.create({\n      description: 'Point Settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['lowScale'] = NodeSetting.create({\n      description: 'Low scale',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.settings['highScale'] = NodeSetting.create({\n      description: 'High scale',\n      value: 100,\n      type: SettingType.NUMBER,\n    });\n    this.settings['decimals'] = NodeSetting.create({\n      description: 'Out value precision',\n      value: 2,\n      type: SettingType.NUMBER,\n    });\n    this.settings['offset'] = NodeSetting.create({\n      description: 'Out value offset',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    /**\n        Point Math settings\n     */\n    this.settings['mathFunc'] = NodeSetting.create({\n      description: 'Math on output value (optional)',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: MATH_FUNC_TYPE.NA, text: 'na' },\n          { value: MATH_FUNC_TYPE.ADD, text: 'add' },\n          { value: MATH_FUNC_TYPE.SUBTRACT, text: 'subtract' },\n          { value: MATH_FUNC_TYPE.MULTIPLY, text: 'multiply' },\n          { value: MATH_FUNC_TYPE.DIVIDE, text: 'divide' },\n          { value: MATH_FUNC_TYPE.NUMBER_INVERT, text: 'invert' },\n        ],\n      },\n      value: MATH_FUNC_TYPE.NA,\n    });\n    this.settings['mathValue'] = NodeSetting.create({\n      description: 'Enter a value',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n    const isDigitalType = [POINT_TYPE.DIGITAL, POINT_TYPE.UI_DIGITAL];\n\n    this.setSettingsConfig({\n      groups: [\n        { pointEnable: {}, pointDebug: {} },\n        { pointNumber: {}, pointType: {} },\n        { decimals: {}, offset: {} },\n        { lowScale: {}, highScale: {} },\n        { mathFunc: {}, mathValue: {} },\n      ],\n      conditions: {\n        decimals: setting => {\n          const val = setting['pointType'].value;\n          return !isDigitalType.includes(val);\n        },\n        offset: setting => {\n          const val = setting['pointType'].value;\n          return !isDigitalType.includes(val);\n        },\n        lowScale: setting => {\n          const val = setting['pointType'].value;\n          return !isDigitalType.includes(val);\n        },\n        highScale: setting => {\n          const val = setting['pointType'].value;\n          return !isDigitalType.includes(val);\n        },\n        mathValue: setting => {\n          const val = setting['mathFunc'].value;\n          return ![MATH_FUNC_TYPE.NUMBER_INVERT, MATH_FUNC_TYPE.NA].includes(val);\n        },\n      },\n    });\n    this.addHistorySettingsConfig(0, false);\n  }\n\n  async onAdded() {\n    this.updateTitle();\n    super.onAdded();\n    if (this.side !== Side.server) return;\n    await Utils.sleep(1000); // TODO: Since this node should start after network, import may shows issue if we don't have this\n    Edge28Utils.addPoint(this.getParentNode(), this);\n  }\n\n  async onAfterSettingsChange() {\n    await super.onAfterSettingsChange();\n    if (this.side !== Side.server) return;\n    this.updateTitle();\n    this.sendPointValue(this.out);\n    this.broadcastSettingsToClients();\n\n    setTimeout(() => {\n      this.settings['pointDebug'].value = false;\n      // this.broadcastSettingsToClients(); // TODO is not updating the settings to false.. fuck knows why\n    }, 120 * 1000); // stop debug after 120 sec\n  }\n\n  onRemoved() {\n    super.onRemoved();\n    Edge28Utils.removePoint(this.getParentNode(), this);\n  }\n\n  sendJson() {\n    return {\n      name: this.name,\n      pointValue: this.out,\n      enable: this.settings['pointEnable'].value,\n      units: this.settings['units'].value,\n      pointNumber: this.settings['pointNumber'].value,\n      pointType: this.settings['pointType'].value,\n      pointOffset: this.settings['offset'].value,\n    };\n  }\n\n  nodeColour() {\n    if (this.settings['pointEnable'].value === false) {\n      this.setNodeState(NodeState.INFO);\n    } else this.setNodeState(NodeState.NORMAL);\n  }\n\n  sendPointValue(val) {\n    const debug = this.settings['pointDebug'].value;\n    if (debug) {\n      this.setOutputData(0, val);\n      this.setOutputData(1, this.sendJson());\n    } else {\n      this.setOutputData(0, val);\n      this.setOutputData(1, this.sendJson());\n    }\n  }\n\n  pointOffset(val: any) {\n    let offset = this.settings['offset'].value;\n    if (offset === null) {\n      offset = 0;\n    }\n    return parseFloat(val) + parseFloat(offset);\n  }\n\n  pointTypeText(type) {\n    switch (type) {\n      case POINT_TYPE.DIGITAL:\n        return POINT_TYPE_TEXT.DIGITAL;\n      case POINT_TYPE.UI_DIGITAL:\n        return POINT_TYPE_TEXT.UI_DIGITAL;\n      case POINT_TYPE._0_10DC:\n        return POINT_TYPE_TEXT._0_10DC;\n      case POINT_TYPE._0_20MA:\n        return POINT_TYPE_TEXT._0_20MA;\n      case POINT_TYPE._4_20MA:\n        return POINT_TYPE_TEXT._4_20MA;\n      case POINT_TYPE._10K_THERMISTOR:\n        return POINT_TYPE_TEXT._10K_THERMISTOR;\n\n      default:\n        this.debugWarn('Unknown type of object');\n    }\n  }\n\n  updateTitle() {\n    const pointNumber = this.settings['pointNumber'].value;\n    this.title = `Edge-28-Input: (${pointNumber} as ${this.pointTypeText(this.settings['pointType'].value)})`;\n    this.broadcastTitleToClients();\n  }\n\n  pointCalcs(val: number) {\n    const mathFunc = this.settings['mathFunc'].value;\n    const mathValue = this.settings['mathValue'].value;\n    const decimals = this.settings['decimals'].value;\n    const pointType = this.settings['pointType'].value;\n    const isDigitalType = [POINT_TYPE.DIGITAL, POINT_TYPE.UI_DIGITAL];\n    if (MathUtils.validateNumbers(val, mathValue)) {\n      if (mathFunc !== MATH_FUNC_TYPE.NA) {\n        if (!isDigitalType.includes(pointType)) {\n          this.out = MathUtils.mathSwitch(mathFunc, val, mathValue);\n          this.out = MathUtils.decimals(this.out, decimals);\n          this.out = this.pointOffset(this.out);\n          this.sendPointValue(this.out);\n        } else {\n          this.out = MathUtils.mathSwitch(mathFunc, val, mathValue);\n          this.out = this.pointOffset(this.out);\n          this.sendPointValue(this.out);\n        }\n      } else {\n        if (!isDigitalType.includes(pointType)) {\n          this.out = MathUtils.decimals(val, decimals);\n          this.out = this.pointOffset(this.out);\n        } else {\n          this.out = val;\n        }\n        this.sendPointValue(this.out);\n      }\n    }\n  }\n\n  uiType(type: number, val: number, min_range?: number, max_range?: number) {\n    const lowScale = this.settings['lowScale'].value;\n    const highScale = this.settings['highScale'].value;\n    switch (type) {\n      case POINT_TYPE.DIGITAL:\n        this.pointCalcs(EdgeGPIOUtils.diInvert(val));\n        break;\n      case POINT_TYPE.UI_DIGITAL:\n        this.pointCalcs(EdgeGPIOUtils.uiAsDI(val));\n        break;\n      case POINT_TYPE._0_10DC:\n        const limitValDc = Utils.clamp(val, 0, highScale);\n        this.pointCalcs(EdgeGPIOUtils.scaleFromGPIOValue(limitValDc, lowScale, highScale));\n        break;\n      case POINT_TYPE._0_20MA:\n        const limitValMaZero = Utils.clamp(val, 0, highScale);\n        this.pointCalcs(EdgeGPIOUtils.scaleFromGPIOValue(limitValMaZero, lowScale, highScale));\n        break;\n      case POINT_TYPE._4_20MA:\n        const limitValMaFour = EdgeGPIOUtils.scaleUI420ma(val, min_range, max_range);\n        this.pointCalcs(EdgeGPIOUtils.scale420maToRange(limitValMaFour, lowScale, highScale));\n        break;\n      case POINT_TYPE._10K_THERMISTOR:\n        this.pointCalcs(Edge10kSensorUtils.calc10kThermistor(val));\n        break;\n    }\n  }\n\n  subscribe({ action, payload }) {\n    switch (action) {\n      case SEND_PAYLOAD_TO_CHILD:\n        if (this.settings['pointEnable'].value === false) return;\n        const pointType = this.settings['pointType'].value;\n        const pointNumber = this.settings['pointNumber'].value;\n        let out: number;\n        let min_range: number;\n        let max_range: number;\n        if (pointType === POINT_TYPE.DIGITAL) {\n          if (!['DI1', 'DI2', 'DI3', 'DI4', 'DI5', 'DI6', 'DI7'].includes(pointNumber)) return;\n          try {\n            for (let val of [payload]) {\n              out = val.pointsDI['4_val'][this.settings['pointNumber'].value].val;\n            }\n            this.uiType(pointType, out, payload);\n          } catch (err) {\n            this.debugErr(err);\n          }\n        } else {\n          if (!['UI1', 'UI2', 'UI3', 'UI4', 'UI5', 'UI6', 'UI7'].includes(pointNumber)) return;\n          try {\n            for (let val of [payload]) {\n              out = val.pointsUI['4_val'][this.settings['pointNumber'].value].val;\n              min_range = val.pointsUI['6_min_range'][this.settings['pointNumber'].value];\n              max_range = val.pointsUI['7_max_range'][this.settings['pointNumber'].value];\n            }\n            this.uiType(pointType, out, min_range, max_range);\n          } catch (err) {\n            this.debugErr(err);\n          }\n        }\n        break;\n      default:\n        this.debugWarn(\"Request action doesn't match\");\n    }\n  }\n}\n\nContainer.registerNodeType(EDGE_28_INPUT, Edge28InputPointNode, EDGE_28_NETWORK);\n","export enum MATH_FUNC_TYPE {\n  NA = 0,\n  ADD = 1,\n  SUBTRACT = 2,\n  MULTIPLY = 3,\n  DIVIDE = 4,\n  REMAINDER = 5,\n  EXP = 6,\n  BOOL_INVERT = 7,\n  ONE_TO_TRUE = 8,\n  TRUE_TO_ONE = 9,\n  NUMBER_INVERT = 10,\n}\n\nexport default class MathUtils {\n  /**\n   * Values will be converted into the range min-max\n   * @param {number} value\n   * @param {number} min\n   * @param {number} max\n   */\n  static clamp(value: number, min: number, max: number): number {\n    return Math.min(Math.max(value, min), max);\n  }\n\n  /**\n   * It rounds to decimal place\n   * @param {any} value\n   * @param {number} decimals\n   * @returns {number}\n   */\n  static decimals(value: any, decimals: number): number {\n    if (isNaN(value)) return undefined;\n    const out = value.toFixed(MathUtils.clamp(decimals, 0, 5));\n    parseFloat(out);\n    return out;\n  }\n\n  /**\n   * It converts a 1 to a 0 or a 0 to a 1\n   * @param {number} value\n   */\n  static numInvert(value: number): number {\n    return value ^ 1;\n  }\n\n  /**\n   * It convert a true to a 1\n   * @param {number} value\n   */\n  static trueToOne(value: boolean): number {\n    if (typeof value === 'boolean') {\n      return value ? 1 : 0;\n    }\n    return undefined;\n  }\n\n  /**\n   * It convert a 1 to a true\n   * @param {number} value\n   */\n  static oneToTrue(value: number): boolean {\n    if (typeof value === 'number') {\n      return !!value;\n    }\n    return undefined;\n  }\n\n  /**\n   * It inverts the boolean value\n   * @param {boolean} value\n   */\n  static invert(value: boolean): boolean {\n    if (typeof value === 'boolean') {\n      return !value;\n    }\n    return undefined;\n  }\n\n  /**\n   * Checks whether all values are numbers or not\n   * @param values list of comma separated values\n   * @returns {boolean}\n   */\n  static validateNumbers = (...values: any) => {\n    return values.every(x => !isNaN(x));\n  };\n\n  static mathSwitch(mathFuncType: number, val: any, mathValue: number) {\n    let out;\n    switch (mathFuncType) {\n      case MATH_FUNC_TYPE.NA:\n        out = 0;\n        break;\n      case MATH_FUNC_TYPE.ADD:\n        out = val + mathValue;\n        break;\n      case MATH_FUNC_TYPE.SUBTRACT:\n        out = val - mathValue;\n        break;\n      case MATH_FUNC_TYPE.MULTIPLY:\n        out = val * mathValue;\n        break;\n      case MATH_FUNC_TYPE.DIVIDE:\n        out = val / mathValue;\n        break;\n      case MATH_FUNC_TYPE.REMAINDER:\n        out = 1;\n        break;\n      case MATH_FUNC_TYPE.EXP:\n        out = 1;\n        break;\n      case MATH_FUNC_TYPE.BOOL_INVERT:\n        out = MathUtils.invert(val);\n        break;\n      case MATH_FUNC_TYPE.ONE_TO_TRUE:\n        out = MathUtils.oneToTrue(val);\n        break;\n      case MATH_FUNC_TYPE.TRUE_TO_ONE:\n        out = MathUtils.trueToOne(val);\n        break;\n      case MATH_FUNC_TYPE.NUMBER_INVERT:\n        out = MathUtils.numInvert(val);\n        break;\n    }\n    return out;\n  }\n}\n","export default class Edge10kSensorUtils {\n  /*\n    used for scaling a UO from a float to a 10K temp reading\n    */\n  static calc10kThermistor = (val: number): number => {\n    const raw10K = [\n      0.9556905617,\n      0.9540427367,\n      0.9523006917,\n      0.9504602339,\n      0.9485172744,\n      0.946467535,\n      0.944306865,\n      0.9420290739,\n      0.9396319594,\n      0.9371093311,\n      0.9344568928,\n      0.9316708217,\n      0.9287447039,\n      0.9256742939,\n      0.9224557261,\n      0.91908403,\n      0.9155539628,\n      0.9118616967,\n      0.9080003267,\n      0.9039690867,\n      0.8997620283,\n      0.8953731717,\n      0.8908015628,\n      0.8860418194,\n      0.8810918183,\n      0.8759457717,\n      0.8706035044,\n      0.8650596894,\n      0.8593146611,\n      0.8533643761,\n      0.8472041872,\n      0.8408402328,\n      0.8342674089,\n      0.8274824028,\n      0.8204910228,\n      0.8132897394,\n      0.8058858472,\n      0.7982715539,\n      0.7904548383,\n      0.7824349294,\n      0.7742229339,\n      0.7658146322,\n      0.7572185678,\n      0.7484302572,\n      0.7394743383,\n      0.73033582,\n      0.7210303644,\n      0.7115748456,\n      0.7019597739,\n      0.6922074256,\n      0.6823111222,\n      0.6722912061,\n      0.6621575094,\n      0.6519178717,\n      0.6415775039,\n      0.6311526306,\n      0.6206437806,\n      0.6100630156,\n      0.5994548717,\n      0.588779615,\n      0.5780593139,\n      0.5673369194,\n      0.5565970278,\n      0.5458604304,\n      0.5351246092,\n      0.5244065761,\n      0.513722581,\n      0.5030878249,\n      0.4924882451,\n      0.4819615594,\n      0.4714876446,\n      0.4611024332,\n      0.450811465,\n      0.4405833684,\n      0.4304850415,\n      0.4204801987,\n      0.4106001113,\n      0.4008382911,\n      0.3912252038,\n      0.3817085907,\n      0.3723569356,\n      0.3631557389,\n      0.3540861978,\n      0.3451724444,\n      0.3363907538,\n      0.3277628108,\n      0.3193109318,\n      0.3110054108,\n      0.3028656927,\n      0.2949116408,\n      0.2871070734,\n      0.2794687028,\n      0.272013505,\n      0.264698569,\n      0.2575375869,\n      0.2505444204,\n      0.2437330494,\n      0.2370527064,\n      0.2305799944,\n      0.2242619327,\n      0.2180410733,\n      0.2119941474,\n      0.2061319159,\n      0.2003937116,\n      0.1948594611,\n      0.1893929343,\n      0.1841473882,\n      0.1789825137,\n      0.1739791116,\n      0.1691445094,\n      0.1644078283,\n      0.1597735289,\n      0.1553259162,\n      0.1509105486,\n      0.1466923378,\n      0.1425957094,\n      0.1386248913,\n      0.1347001575,\n      0.1309926256,\n      0.1273378137,\n      0.1237375067,\n      0.1202802759,\n      0.116969961,\n      0.1137221844,\n      0.1105386486,\n      0.107421042,\n      0.1044610471,\n      0.1015715166,\n      0.09875404639,\n      0.09610194494,\n      0.09343384,\n      0.09084241711,\n      0.0884225005,\n      0.08598938206,\n      0.08363729444,\n      0.08136762256,\n      0.07918171356,\n      0.07698514917,\n      0.07497021833,\n      0.07294627961,\n      0.07091327239,\n      0.06906601989,\n      0.06721124833,\n      0.06544711883,\n      0.06367616028,\n      0.061997282,\n      0.06041153422,\n      0.05882030111,\n      0.05722355406,\n      0.05572157039,\n      0.05431530289,\n      0.05290475159,\n      0.05148989689,\n      0.05017223272,\n      0.04895260508,\n      0.04762772774,\n      0.04640141447,\n      0.045274458,\n      0.04414477874,\n      0.04301236682,\n      0.04187721228,\n      0.04084286529,\n      0.03980623591,\n      0.03887131178,\n      0.03793452726,\n      0.03699587678,\n      0.03605535477,\n      0.03511295563,\n      0.03427368709,\n      0.03343292697,\n      0.03269603518,\n      0.03185246761,\n      0.03111311315,\n      0.03037260522,\n      0.02963094111,\n      0.02888811812,\n      0.02825048826,\n      0.02761200327,\n      0.02697266141,\n      0.02633246097,\n      0.02569140021,\n      0.02504947741,\n      0.02451388196,\n      0.02397768566,\n      0.02333345552,\n      0.02279593374,\n      0.02236548142,\n      0.02182687151,\n      0.02128765566,\n      0.02085584601,\n      0.02042364737,\n    ];\n    const temps10K = [\n      -40,\n      -39,\n      -38,\n      -37,\n      -36,\n      -35,\n      -34,\n      -33,\n      -32,\n      -31,\n      -30,\n      -29,\n      -28,\n      -27,\n      -26,\n      -25,\n      -24,\n      -23,\n      -22,\n      -21,\n      -20,\n      -19,\n      -18,\n      -17,\n      -16,\n      -15,\n      -14,\n      -13,\n      -12,\n      -11,\n      -10,\n      -9,\n      -8,\n      -7,\n      -6,\n      -5,\n      -4,\n      -3,\n      -2,\n      -1,\n      0,\n      1,\n      2,\n      3,\n      4,\n      5,\n      6,\n      7,\n      8,\n      9,\n      10,\n      11,\n      12,\n      13,\n      14,\n      15,\n      16,\n      17,\n      18,\n      19,\n      20,\n      21,\n      22,\n      23,\n      24,\n      25,\n      26,\n      27,\n      28,\n      29,\n      30,\n      31,\n      32,\n      33,\n      34,\n      35,\n      36,\n      37,\n      38,\n      39,\n      40,\n      41,\n      42,\n      43,\n      44,\n      45,\n      46,\n      47,\n      48,\n      49,\n      50,\n      51,\n      52,\n      53,\n      54,\n      55,\n      56,\n      57,\n      58,\n      59,\n      60,\n      61,\n      62,\n      63,\n      64,\n      65,\n      66,\n      67,\n      68,\n      69,\n      70,\n      71,\n      72,\n      73,\n      74,\n      75,\n      76,\n      77,\n      78,\n      79,\n      80,\n      81,\n      82,\n      83,\n      84,\n      85,\n      86,\n      87,\n      88,\n      89,\n      90,\n      91,\n      92,\n      93,\n      94,\n      95,\n      96,\n      97,\n      98,\n      99,\n      100,\n      101,\n      102,\n      103,\n      104,\n      105,\n      106,\n      107,\n      108,\n      109,\n      110,\n      111,\n      112,\n      113,\n      114,\n      115,\n      116,\n      117,\n      118,\n      119,\n      120,\n      121,\n      122,\n      123,\n      124,\n      125,\n      126,\n      127,\n      128,\n      129,\n      130,\n      131,\n      132,\n      133,\n      134,\n      135,\n      136,\n      137,\n      138,\n      139,\n      140,\n      141,\n      142,\n      143,\n      144,\n      145,\n      146,\n      147,\n      148,\n      149,\n      150,\n    ];\n    let value = val;\n    for (let i = 0; i < 190; i++) {\n      if (value <= raw10K[i] && value > raw10K[i + 1]) {\n        value = temps10K[i + 1] - (value - raw10K[i + 1]) / (raw10K[i] - raw10K[i + 1]);\n        break;\n      }\n    }\n    return value;\n  };\n}\n","import { isNull } from '../../../../utils/helper';\nimport { EDGE_28_NETWORK, EDGE_28_OUTPUT } from '../../../constants';\nimport { Container } from '../../../container';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport HistoryBase from '../../history/HistoryBase';\nimport { edgeApiVer, edgeIp, edgePort } from './edge-constant';\nimport EdgeGPIOUtils from './edge-gpio-utils';\nimport Edge28Utils from './edge-utils';\n\nenum OUTPUT_POINT_TYPE {\n  DO = 1,\n  UO_AS_DIGITAL = 2,\n  UO_AS_0_10DC = 3,\n}\n\nenum OUTPUT_POINT_TYPE_TEXT {\n  DO = 'DO',\n  UO_AS_DIGITAL = 'UO As Digital',\n  UO_AS_0_10DC = 'UO As 0-10dc',\n}\n\nclass Edge28OutputPointNode extends HistoryBase {\n  uuid: Number = null;\n  deviceContainerID: Number = null;\n  topic: string = null;\n  newSetting = false;\n  lastSendTime;\n  lastInput;\n  resendTime = 120000; //resend output every 120 seconds even if it hasn't changed.\n\n  // node inputs\n  inInput: number = 0;\n  inAlarmTrigger: number = 1;\n  inHistoryTrigger: number = 2;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/nube\"][\"edge-28-output\"].title;\n    this.description = NODE_INFO[\"protocols/nube\"][\"edge-28-output\"].description;\n\n    this.addInput('input', Type.ANY);\n    this.addOutput('output', Type.NUMBER);\n    this.addOutput('output-json', Type.JSON);\n    this.properties['pointVal'] = null;\n\n    // Default point Settings (Will be in point class)\n    this.settings['pointEnable'] = NodeSetting.create({\n      description: 'Point enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['pointType'] = NodeSetting.create({\n      description: 'Point Type',\n      value: OUTPUT_POINT_TYPE.DO,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: OUTPUT_POINT_TYPE.DO, text: OUTPUT_POINT_TYPE_TEXT.DO },\n          { value: OUTPUT_POINT_TYPE.UO_AS_DIGITAL, text: OUTPUT_POINT_TYPE_TEXT.UO_AS_DIGITAL },\n          { value: OUTPUT_POINT_TYPE.UO_AS_0_10DC, text: OUTPUT_POINT_TYPE_TEXT.UO_AS_0_10DC },\n        ],\n      },\n    });\n    this.settings['inputType'] = NodeSetting.create({\n      description: 'Input Type',\n      value: true,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Percent (0-100 -> 0-10vdc)' },\n          { value: false, text: 'Voltage (0-10 -> 0-10vdc)' },\n        ],\n      },\n    });\n    this.settings['pointNumber'] = NodeSetting.create({\n      description: 'Point',\n      value: 'UO1',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'UO1', text: `UO1` },\n          { value: 'UO2', text: `UO2` },\n          { value: 'UO3', text: `UO3` },\n          { value: 'UO4', text: `UO4` },\n          { value: 'UO5', text: `UO5` },\n          { value: 'UO6', text: `UO6` },\n          { value: 'UO7', text: `UO7` },\n          { value: 'DO1', text: `DO1` },\n          { value: 'DO2', text: `DO2` },\n          { value: 'DO3', text: `DO3` },\n          { value: 'DO4', text: `DO4` },\n          { value: 'DO5', text: `DO5` },\n          { value: 'R1', text: `R1` },\n          { value: 'R2', text: `R2` },\n        ],\n      },\n    });\n\n    this.setSettingsConfig({\n      groups: [\n        { pointNumber: {}, pointType: {} },\n        { mathFunc: {}, mathValue: {} },\n      ],\n      conditions: {\n        mathValue: setting => {\n          const val = setting['mathFunc'].value;\n          return ![10, 0].includes(val);\n        },\n        inputType: setting => {\n          return setting['pointType'].value === OUTPUT_POINT_TYPE.UO_AS_0_10DC;\n        },\n      },\n    });\n\n    this.addHistorySettingsConfig();\n  }\n\n  onAdded() {\n    super.onAdded();\n    this.updateTitle();\n    if (this.side !== Side.server) return;\n    this.EXECUTE_INTERVAL = 60000;\n    this.lastSendTime = new Date().valueOf();\n    this.lastInput = null\n    this.inputChange();\n  }\n\n  async onExecute() {\n    if (this.side !== Side.server) return;\n    if (new Date().valueOf() - this.resendTime > this.lastSendTime) {\n      this.lastInput = null; //to trigger output rewrite\n      await this.onInputUpdated();\n    }\n  }\n\n  pointType(type) {\n    switch (type) {\n      case OUTPUT_POINT_TYPE.DO:\n        return 'do';\n      case OUTPUT_POINT_TYPE.UO_AS_DIGITAL:\n        return 'uo';\n      case OUTPUT_POINT_TYPE.UO_AS_0_10DC:\n        return 'uo';\n      default:\n        this.debugWarn('Unknown type of object');\n    }\n  }\n\n  pointTypeText(type) {\n    switch (type) {\n      case OUTPUT_POINT_TYPE.DO:\n        return OUTPUT_POINT_TYPE_TEXT.DO;\n      case OUTPUT_POINT_TYPE.UO_AS_DIGITAL:\n        return OUTPUT_POINT_TYPE_TEXT.UO_AS_DIGITAL;\n      case OUTPUT_POINT_TYPE.UO_AS_0_10DC:\n        return OUTPUT_POINT_TYPE_TEXT.UO_AS_0_10DC;\n      default:\n        this.debugWarn('Unknown type of object');\n    }\n  }\n\n  async onInputUpdated() {\n    await super.onInputUpdated();\n    this.inputChange();\n  }\n\n  onRemoved() {\n    super.onRemoved();\n  }\n\n  async onAfterSettingsChange() {\n    await super.onAfterSettingsChange();\n    this.updateTitle();\n    this.broadcastSettingsToClients();\n    this.inputChange();\n  }\n\n  inputChange() {\n    if (this.side !== Side.server) return;\n    const inputVal: number = this.getInputData(this.inInput);\n    if (this.lastInput == null || inputVal !== this.lastInput) this.apiCall(inputVal);\n  }\n\n  updateTitle() {\n    const pointNumber = this.settings['pointNumber'].value;\n    if (this.settings['pointType'].value == OUTPUT_POINT_TYPE.UO_AS_0_10DC) {\n      const inputType = this.settings['inputType'].value ? '0-100 -> 0-10vdc' : '0-10 -> 0-10vdc';\n      this.title = `Edge-28-Output: [${pointNumber}] ${this.pointTypeText(this.settings['pointType'].value)} (${inputType})`;\n    }\n    else this.title = `Edge-28-Output: [${pointNumber}] ${this.pointTypeText(this.settings['pointType'].value)}`;\n    this.broadcastTitleToClients();\n  }\n\n  sendJson() {\n    const pointIsUO0to10 = this.settings['pointType'].value == OUTPUT_POINT_TYPE.UO_AS_0_10DC;\n    var inputType = null;\n    if (pointIsUO0to10) inputType = this.settings['inputType'].value ? 'Percent (0-100 -> 0-10vdc)' : 'Voltage (0-10 -> 0-10vdc)';\n\n    return {\n      name: this.name,\n      pointValue: this.properties['pointVal'],\n      enable: this.settings['pointEnable'].value,\n      units: this.settings['units'].value,\n      pointNumber: this.settings['pointNumber'].value,\n      pointType: this.settings['pointType'].value,\n      inputType: inputType,\n    };\n  }\n\n  apiCall(inputVal: number) {\n    this.lastInput = inputVal;\n    if (this.side !== Side.server) return;\n    if (this.settings['pointEnable'].value === false) return;\n    const pointNumber = this.settings['pointNumber'].value;\n    let outVal: number = null;\n    const nodeVal = inputVal;\n    if (inputVal === undefined || inputVal === null) return;\n\n    if (this.settings['pointType'].value === OUTPUT_POINT_TYPE.DO) {\n      // if type = DO 0 is off 1 is on\n      if (typeof inputVal === 'boolean') {\n        outVal = inputVal ? 1 : 0;\n      } else if (typeof inputVal === 'string') {\n        if (inputVal === '1' || inputVal === 'true') {\n          outVal = 1;\n        } else if (inputVal === '0' || inputVal === 'false') {\n          outVal = 0;\n        }\n      } else if (typeof inputVal === 'number') {\n        if (inputVal >= 1) {\n          outVal = 1;\n        } else if (inputVal < 1) outVal = 0; // drive to 0vdc\n      } else this.debugInfo(`ERROR: input value must be a int 1 or 0 or a bool`);\n    } else if (this.settings['pointType'].value === OUTPUT_POINT_TYPE.UO_AS_DIGITAL) {\n      // UO as a DO\n      // if type = DO\n      if (typeof inputVal === 'boolean') {\n        if (inputVal) {\n          outVal = 0;\n        } else outVal = 100;\n      } else if (typeof inputVal === 'string') {\n        if (inputVal === '1' || inputVal === 'true') {\n          outVal = 0;\n        } else if (inputVal === '0' || inputVal === 'false') {\n          outVal = 100;\n        }\n      } else if (typeof inputVal === 'number') {\n        if (inputVal >= 1) {\n          outVal = 0; // drive to 12vdc\n        } else if (inputVal < 1) outVal = 100; // drive to 0vdc\n      } else this.debugInfo(`ERROR: input value must be a int 1 or 0 or a bool`);\n    } else if (this.settings['pointType'].value === OUTPUT_POINT_TYPE.UO_AS_0_10DC) {\n      // if type = UO\n      if (typeof inputVal === 'number') {\n        if (!this.settings['inputType'].value) inputVal = inputVal * 10; //scale from 0-10 to 0-100\n        if (inputVal >= 100) outVal = EdgeGPIOUtils.scaleToGPIOValue(100, 0, 100);\n        // this is to cap writing a value > 12vdc\n        else {\n          inputVal = inputVal * 0.9839; // * 0.9839 this is to software cal the UOs\n          outVal = EdgeGPIOUtils.scaleToGPIOValue(inputVal, 0, 100);\n        }\n      } else if (typeof inputVal === 'string') {\n        this.debugInfo(`ERROR: input value must be a float`);\n      }\n    }\n\n    if (isNull(outVal)) return;\n    const pointType = this.pointType(this.settings['pointType'].value);\n    Edge28Utils.writePointValue(edgeIp, edgePort, edgeApiVer, pointType, pointNumber, outVal, 16)\n      .then(e => {\n        this.properties['pointVal'] = nodeVal;\n        this.setOutputData(0, nodeVal);\n        this.setOutputData(1, this.sendJson()); // json\n        this.lastSendTime = new Date().valueOf();\n      })\n      .catch(err => {\n        this.debugInfo(`ERROR: getting edge point type: ${pointType} ${err}`);\n      });\n  }\n}\n\nContainer.registerNodeType(EDGE_28_OUTPUT, Edge28OutputPointNode, EDGE_28_NETWORK);\n","import axios from 'axios';\nimport { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport TimeUtils from '../../../utils/time-utils';\nimport { edgeApiVer, edgeIp, edgePort } from './edge-constant';\nimport Edge28Utils from './edge-utils';\n\nexport class Edge28LORAResetNode extends Node {\n  lastSendTime;\n  lastTrigger;\n  timeoutFunc;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/nube\"][\"edge-28-lora-reset\"].title;\n    this.description = NODE_INFO[\"protocols/nube\"][\"edge-28-lora-reset\"].description;\n    this.addInputWithSettings('enableInterval', Type.BOOLEAN, false, 'Enable Interval Reset');\n    this.addInputWithSettings('interval', Type.NUMBER, 15, 'Interval');\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('lastReset');\n\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'minutes',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n  }\n\n  async writePointValue(\n    host: string,\n    port: number,\n    apiVer: string,\n    pointType: string,\n    pointId: string,\n    val: number,\n    priority: number,\n  ): Promise<any> {\n    const url = `${Utils.buildUrl(host, port)}/api/${apiVer}/write/${pointType}/${pointId}/${val}/${priority}`;\n    //console.log(url);\n    const pointValue = await axios.get(url);\n    //console.log('writePointValue()', pointValue)\n    return pointValue.data;\n  }\n\n  onAdded() {\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n    if (this.side !== Side.server) return;\n    let interval = this.getInputData(1);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    this.EXECUTE_INTERVAL = interval;\n    try {\n      Edge28Utils.addPoint(this.getParentNode(), this);\n    } catch (error) {}\n  }\n\n  onExecute() {\n    if (this.side !== Side.server) return;\n    if (!this.getInputData(0)) return;\n    this.resetLORAConnect();\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return;\n    let interval = this.getInputData(1);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    this.EXECUTE_INTERVAL = interval;\n    let trigger = this.getInputData(2);\n    //if (trigger && this.inputs[2].updated) {\n    if (trigger && !this.lastTrigger) this.resetLORAConnect();\n    this.lastTrigger = trigger;\n  }\n\n  resetLORAConnect() {\n    if (this.side !== Side.server) return;\n    const pointType = 'do';\n    const pointNumber = 'lc';\n    this.writePointValue(edgeIp, edgePort, edgeApiVer, pointType, pointNumber, 0, 16)\n      .then(e => {\n        this.setOutputData(0, new Date().valueOf(), true);\n        this.timeoutFunc = setTimeout(() => {\n          this.writePointValue(edgeIp, edgePort, edgeApiVer, pointType, pointNumber, 1, 16);\n        }, 2000);\n      })\n      .catch(err => this.debugInfo(`ERROR: LoRa Edge-28 Reset - ${err}`));\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n    if (this.side !== Side.server) return;\n    this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType('protocols/nube/edge-28-lora-reset', Edge28LORAResetNode);\n","import * as Bacnet from 'node-bacnet';\nimport { BACNET_NETWORK } from '../../../constants';\nimport { Container } from '../../../container';\nimport { ContainerNode } from '../../../container-node';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport { ADD_DEVICE, GET_BACNET_CLIENT, GET_NETWORK_NODE, REMOVE_DEVICE } from './bacnet-constant';\nimport BacnetUtils from './bacnet-utils';\n\nexport class BACnetNetwork extends ContainerNode {\n  bacnetClient: Bacnet = null;\n  deviceNodes: Array<Node> = [];\n\n  // node input\n  inNetworkEnable: number = 0;\n  inDiscover: number = 1;\n\n  // node outputs\n  outMsg: number = 0;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO['protocols/bacnet']['bacnet-network'].title;\n    this.description = NODE_INFO['protocols/bacnet']['bacnet-network'].description;\n\n    this.addInputWithSettings('enable', Type.BOOLEAN, false, 'Network Enable', false);\n    this.addInput('discover', Type.BOOLEAN);\n    this.addOutput('msg', Type.STRING);\n    this.settings['interface'] = NodeSetting.create({\n      description: 'interface',\n      value: '0.0.0.0',\n      type: SettingType.STRING,\n    });\n    this.settings['port'] = NodeSetting.create({\n      description: 'port',\n      value: 47808,\n      type: SettingType.NUMBER,\n    });\n    this.settings['broadcastAddress'] = NodeSetting.create({\n      description: 'broadcastAddress',\n      value: '255.255.255.255',\n      type: SettingType.STRING,\n    });\n    this.settings['apduTimeout'] = NodeSetting.create({\n      description: 'BACnet apduTimeout',\n      value: 6000,\n      type: SettingType.NUMBER,\n    });\n    this.settings['networkNumber'] = NodeSetting.create({\n      description: 'BACnet network Number (Set to -1 to disable)',\n      value: -1,\n      type: SettingType.NUMBER,\n    });\n    this.settings['networkNumberWhoIs'] = NodeSetting.create({\n      description: 'BACnet Network Number for Discover',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'This network number' },\n          { value: 1, text: 'Global (0xFFFF)' },\n          { value: 2, text: 'Blank' },\n        ],\n      },\n      value: 0,\n    });\n    this.settings['devicePolling'] = NodeSetting.create({\n      description: 'Polling time setting in ms',\n      value: 2000, // TODO add validation range later\n      type: SettingType.NUMBER,\n    });\n  }\n\n  onAdded() {\n    super.onAdded();\n    // this.name = `BACnet Network:  cid_${this.container.id.toString()}_sid_${this.sub_container.id.toString()}_id${this.id.toString()}`; //set default node name\n    this.initializeBacnetClient();\n  }\n\n  onAfterSettingsChange(oldSettings: any) {\n    super.onAfterSettingsChange(oldSettings);\n    if (this.side !== Side.server) return;\n    this.initializeBacnetClient();\n  }\n\n  onInputUpdated() {\n    if (this.inputs[this.inDiscover].updated) {\n      this.iAm();\n      this.whoIs();\n    }\n    if (this.inputs[this.inNetworkEnable].updated) {\n      this.initializeBacnetClient();\n    }\n  }\n\n  whoIs() {\n    if (this.side !== Side.server) return;\n    const iface = this.settings['interface'].value;\n    const networkNumber = this.settings['networkNumber'].value;\n    const networkNumberWhoIs = this.settings['networkNumberWhoIs'].value;\n    if (this.bacnetClient) {\n      if (networkNumberWhoIs === 0) {\n        this.bacnetClient.whoIs({ net: networkNumber, interface: iface });\n        this.setOutputData(this.outMsg, `INFO: Send a WhoIs on net: ${networkNumber} interface: ${iface}`);\n      } else if (networkNumberWhoIs === 1) {\n        this.bacnetClient.whoIs({ net: 0xffff, interface: iface });\n        this.setOutputData(this.outMsg, `INFO: Send a WhoIs on net: ${0xffff} interface: ${iface}`);\n      } else if (networkNumberWhoIs === 2) {\n        this.bacnetClient.whoIs({ interface: iface });\n        this.setOutputData(this.outMsg, `INFO: Send a WhoIs on net: BLANK interface: ${iface}`);\n      }\n    } else this.setOutputData(this.outMsg, `ERROR: Failed to send whoIs`);\n  }\n\n  iAm() {\n    if (this.side !== Side.server) return;\n    this.setOutputData(this.outMsg, `INFO: On iAm replay`);\n    this.bacnetClient.on('iAm', device => {\n      this.setOutputData(this.outMsg, `INFO: On iAm replay from device: ${device.payload.deviceId}`);\n    });\n  }\n\n  subscribe({ action, payload }) {\n    switch (action) {\n      case ADD_DEVICE:\n        this.deviceNodes.push(payload);\n        break;\n      case REMOVE_DEVICE:\n        this.deviceNodes = this.deviceNodes.filter(pointNode => pointNode.id !== payload.id);\n        break;\n      case GET_BACNET_CLIENT:\n        return this.bacnetClient;\n      case GET_NETWORK_NODE:\n        return this;\n      default:\n        this.debugWarn(\"Request action doesn't match\");\n    }\n  }\n\n  onRemoved() {\n    super.onRemoved();\n    this.closeBacnetClient();\n  }\n\n  private closeBacnetClient() {\n    if (this.bacnetClient) {\n      this.setOutputData(this.outMsg, `INFO: Closing BACnet client...`);\n      this.bacnetClient.close();\n    }\n  }\n\n  initializeBacnetClient() {\n    if (this.side !== Side.server) return; // only execute on server\n    this.closeBacnetClient();\n    this.setOutputData(this.outMsg, `INFO: Initializing BACnet...`);\n    this.bacnetClient = new Bacnet({\n      apduTimeout: this.settings['apduTimeout'].value,\n      interface: this.settings['interface'].value,\n      port: this.settings['port'].value,\n      broadcastAddress: this.settings['broadcastAddress'].value,\n    });\n    if (this.bacnetClient) {\n      this.setOutputData(this.outMsg, `INFO: Started BACnet Stack :)`);\n    } else this.setOutputData(this.outMsg, `ERROR: Failed to started BACnet Stack :(`);\n\n    for (let deviceNode of this.deviceNodes) {\n      BacnetUtils.sendPayloadToChild(deviceNode, {\n        bacnetClient: this.bacnetClient,\n        networkNode: this,\n      });\n    }\n  }\n}\nContainer.registerNodeType(BACNET_NETWORK, BACnetNetwork);\n","import * as Bacnet from 'node-bacnet';\nimport { BACNET_DEVICE, BACNET_NETWORK } from '../../../constants';\nimport { Container } from '../../../container';\nimport { ContainerNode } from '../../../container-node';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport {\n  ADD_POINT,\n  GET_NETWORK_NODE,\n  GET_POINTS,\n  GET_PRESENT_VALUE,\n  REMOVE_POINT,\n  SEND_PAYLOAD_TO_CHILD,\n  WRITE_PRESENT_VALUE,\n} from './bacnet-constant';\nimport { BACnetNetwork } from './bacnet-network';\nimport BacnetUtils, { singleton as actor } from './bacnet-utils';\nimport { DeviceObject } from './interface';\n\nenum Poll {\n  STOP = 0,\n  START = 1,\n}\n\nclass BACnetDevice extends ContainerNode {\n  bacnetClient: Bacnet = null;\n  networkNode: BACnetNetwork = null;\n  points: Array<DeviceObject> = [];\n  pointNodes: Array<Node> = [];\n  isFirst: boolean = true;\n  isPolling: boolean = false;\n  shouldPoll: boolean = true;\n  delayBetweenDevice: number = 100;\n  delayBetweenPoint: number = 30;\n  outputMsg: 1;\n  networkNumber: number = null;\n  constructor() {\n    super();\n    this.title = NODE_INFO['protocols/bacnet']['bacnet-device'].title;\n    this.description = NODE_INFO['protocols/bacnet']['bacnet-device'].description;\n    this.addInput('get-point-list', Type.BOOLEAN);\n    this.addOutput('out', Type.STRING);\n    this.addOutput('out msg', Type.STRING);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('points-discovered', Type.STRING);\n    this.addOutput('points-to-poll', Type.STRING);\n    this.properties['pointsList'] = null;\n    this.settings['deviceEnable'] = NodeSetting.create({\n      description: 'Device enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    // device\n    this.settings['ip'] = NodeSetting.create({ description: 'ip', value: '192.168.13.13', type: SettingType.STRING });\n    this.settings['deviceId'] = NodeSetting.create({ description: 'deviceId', value: 2508, type: SettingType.NUMBER });\n    this.settings['port'] = NodeSetting.create({ description: 'port', value: 47808, type: SettingType.NUMBER });\n\n    // device mac address if under a IP to MS/TP router\n    this.settings['deviceTypeMstp'] = NodeSetting.create({\n      description: 'BACnet MS/TP device',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    // device mac address if under a IP to MS/TP router\n    this.settings['macAddress'] = NodeSetting.create({\n      description: 'BACnet Mac address',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['networkNumber'] = NodeSetting.create({\n      description: 'BACnet network number ',\n      // value: null,\n      type: SettingType.READONLY,\n    });\n  }\n\n  async onAdded() {\n    super.onAdded();\n    // this.name = `BACnet Device: cid_${this.container.id.toString()}_sid_${this.sub_container.id.toString()}_id${this.id.toString()}`; //set default node name\n    await Utils.sleep(1000); // TODO: Since device should start after network, import may shows issue if we don't have this\n    this.setBacnetClient();\n    this.setPayloadsToPointNodes();\n    if (this.side !== Side.server) return;\n    BacnetUtils.addDevice(this.getParentNode(), this);\n    this.updateNetworkSettings();\n    await this.requestPoll();\n  }\n\n  onAfterSettingsChange(oldSettings: any) {\n    super.onAfterSettingsChange(oldSettings);\n    this.setPayloadsToPointNodes();\n    this.requestPoll().then(); // don't await, it will unable to set setting value\n  }\n\n  onRemoved() {\n    super.onRemoved();\n    this.shouldPoll = false;\n    BacnetUtils.removeDevice(this.getParentNode(), this);\n  }\n\n  updateNetworkSettings() {\n    if (this.side !== Side.server) return;\n    this.networkNode = BacnetUtils.getNetworkNode(this.getParentNode());\n    this.networkNumber = this.networkNode.settings['networkNumber'].value;\n    this.settings['networkNumber'].value = this.networkNumber;\n    this.broadcastSettingsToClients();\n    this.persistSettings();\n  }\n\n  onInputUpdated() {\n    let pntList = [];\n    for (let pointNode of this.pointNodes) {\n      const settings = pointNode.settings;\n      const id = pointNode.id;\n      const cid = pointNode.id;\n      const name = pointNode.name;\n      let a = {\n        id: id,\n        cid: cid,\n        name: name,\n        settings: settings,\n      };\n      pntList.push(a);\n    }\n    this.setOutputData(4, JSON.stringify(pntList));\n    this.setOutputData(3, JSON.stringify(this.points));\n  }\n\n  async requestPoll() {\n    if (this.currentPollValue() === Poll.START && !this.isPolling) {\n      this.isPolling = true;\n      await this.polling();\n    }\n  }\n\n  // check if network and device are enabled\n  currentPollValue(): Poll {\n    return this.settings['deviceEnable'].value && this.networkNode.getInputData(this.networkNode.inNetworkEnable)\n      ? Poll.START\n      : Poll.STOP;\n  }\n  // send points list to point node\n  setPayloadsToPointNodes() {\n    if (this.side !== Side.server) return; // only execute on server\n    this.setOutputData(this.outputMsg, `INFO: Scan devices`);\n    actor\n      .process<Array<DeviceObject>>(() => this.scanDeviceFunc())\n      .then(points => {\n        this.points = points;\n        this.sendPayloadToPointNodesFunc();\n      });\n    actor.process(async () => await Utils.sleep(this.delayBetweenDevice)).then();\n  }\n\n  // send points list to point node\n  sendPayloadToPointNodesFunc() {\n    for (let pointNode of this.pointNodes) {\n      BacnetUtils.sendPayloadToChild(pointNode, {\n        points: this.points,\n        networkNode: this.networkNode,\n      });\n    }\n  }\n\n  // get bacnet client from network node\n  setBacnetClient() {\n    if (this.side !== Side.server) return;\n    this.bacnetClient = BacnetUtils.getBacnetClient(this.getParentNode());\n  }\n\n  // bacnet lib point write function\n  writePresentValue(deviceAddress, type, instance, value, priority, tag) {\n    if (!this.bacnetClient) return;\n    if (this.settings['deviceTypeMstp'].value) {\n      this.bacnetClient.writeProperty(\n        {\n          address: deviceAddress,\n          net: this.networkNumber,\n          adr: [this.settings['macAddress'].value],\n        },\n        { type: type, instance: instance },\n        85,\n        [{ type: tag, value: value }],\n        { priority: priority },\n        (err, value) => {\n          console.log(err, value);\n        },\n      );\n    } else {\n      this.bacnetClient.writeProperty(\n        deviceAddress,\n        { type: type, instance: instance },\n        85,\n        [{ type: tag, value: value }],\n        { priority: priority },\n        (err, value) => {},\n      );\n    }\n  }\n  // bacnet lib get points list function\n  readObjectList(deviceAddress, deviceId, callback) {\n    // Read Device Object\n    const requestArray = [\n      {\n        objectId: { type: Bacnet.enum.ObjectType.DEVICE, instance: deviceId },\n        properties: [{ id: Bacnet.enum.PropertyIdentifier.OBJECT_LIST }],\n      },\n    ];\n    if (!this.bacnetClient) return;\n    if (this.settings['deviceTypeMstp'].value) {\n      this.bacnetClient.readPropertyMultiple(\n        {\n          address: deviceAddress,\n          net: this.networkNumber,\n          adr: [this.settings['macAddress'].value],\n        },\n        requestArray,\n        requestArray,\n        callback,\n      );\n    } else this.bacnetClient.readPropertyMultiple(deviceAddress, requestArray, callback);\n  }\n\n  readObjectFull(deviceAddress, type): Promise<any> {\n    return this.readObject(deviceAddress, type, [\n      { id: Bacnet.enum.PropertyIdentifier.OBJECT_IDENTIFIER },\n      { id: Bacnet.enum.PropertyIdentifier.OBJECT_NAME },\n      { id: Bacnet.enum.PropertyIdentifier.OBJECT_TYPE },\n      { id: Bacnet.enum.PropertyIdentifier.DESCRIPTION },\n      { id: Bacnet.enum.PropertyIdentifier.UNITS },\n      { id: Bacnet.enum.PropertyIdentifier.PRESENT_VALUE },\n      // { id: Bacnet.enum.PropertyIdentifier.PRIORITY_ARRAY },\n      // { id: Bacnet.enum.PropertyIdentifier.PRIORITY_FOR_WRITING },\n    ]);\n  }\n  // bacnet lib point read function\n  readObject(deviceAddress, obj, properties): Promise<any> {\n    return new Promise(resolve => {\n      const requestArray = [\n        {\n          objectId: { type: obj.type, instance: obj.instance },\n          properties: properties,\n        },\n      ];\n      if (!this.bacnetClient) return;\n      if (this.settings['deviceTypeMstp'].value) {\n        this.bacnetClient.readPropertyMultiple(\n          {\n            address: deviceAddress,\n            net: this.networkNumber,\n            adr: [this.settings['macAddress'].value],\n          },\n          requestArray,\n          (error, value) => {\n            resolve({\n              error: error,\n              value: value,\n            });\n          },\n        );\n      } else {\n        this.bacnetClient.readPropertyMultiple(deviceAddress, requestArray, (error, value) => {\n          resolve({\n            error: error,\n            value: value,\n          });\n        });\n      }\n    });\n  }\n\n  // bacnet lib point read function\n  readProperty(deviceAddress, obj): Promise<any> {\n    return new Promise(resolve => {\n      if (this.settings['deviceTypeMstp'].value) {\n        this.bacnetClient.readProperty(\n          { address: deviceAddress, net: this.networkNumber, adr: [this.settings['macAddress'].value] },\n          { type: obj.type, instance: obj.instance },\n          Bacnet.enum.PropertyIdentifier.PRESENT_VALUE,\n          (error, value) => {\n            resolve({\n              error: error,\n              value: value,\n            });\n          },\n        );\n      } else {\n        this.bacnetClient.readProperty(\n          deviceAddress,\n          { type: obj.type, instance: obj.instance },\n          Bacnet.enum.PropertyIdentifier.PRESENT_VALUE,\n          (error, value) => {\n            resolve({\n              error: error,\n              value: value,\n            });\n          },\n        );\n      }\n    });\n  }\n\n  readPresentValue(obj): any {\n    return this.readProperty(this.settings['ip'].value, obj);\n  }\n\n  findValueById(properties, id) {\n    const property = properties.find(function(element) {\n      return element.id === id;\n    });\n    if (property && property.value && property.value.length > 0) {\n      if (property.value[0].value.errorClass) {\n        return null;\n      }\n      return property.value[0].value;\n    } else {\n      return null;\n    }\n  }\n\n  mapToDeviceObject(object): DeviceObject {\n    if (!object || !object.values) {\n      return null;\n    }\n    const objectInfo = object.values[0].objectId.instance;\n    const objectProperties = object.values[0].values;\n    const name = this.findValueById(objectProperties, Bacnet.enum.PropertyIdentifier.OBJECT_NAME);\n    const description = this.findValueById(objectProperties, Bacnet.enum.PropertyIdentifier.DESCRIPTION);\n    const type = this.findValueById(objectProperties, Bacnet.enum.PropertyIdentifier.OBJECT_TYPE);\n    const units = this.findValueById(objectProperties, Bacnet.enum.PropertyIdentifier.UNITS);\n    const presentValue = this.findValueById(objectProperties, Bacnet.enum.PropertyIdentifier.PRESENT_VALUE);\n\n    return { objectInfo, name, description, type, units, presentValue };\n  }\n\n  async scanDeviceFunc(): Promise<Array<DeviceObject>> {\n    const device = {\n      deviceId: this.settings['deviceId'].value,\n      address: this.settings['ip'].value,\n    };\n    this.setOutputData(1, `INFO: Scan device ID: ${JSON.stringify(device)}`);\n    this.setOutputData(2, ``);\n    return new Promise((resolve, reject) => {\n      this.readObjectList(device.address, device.deviceId, async (err, result) => {\n        if (!err) {\n          const objectArray = result.values[0].values[0].value;\n\n          this.setOutputData(1, `INFO: Scan device ID: ${JSON.stringify(device)}`);\n          this.setOutputData(2, ``);\n          const outputs = [];\n          for (const object of objectArray) {\n            try {\n              const output = await this.readObjectFull(device.address, {\n                type: object.value.type,\n                instance: object.value.instance,\n              });\n              outputs.push(output);\n            } catch (error) {\n              this.setOutputData(1, ``);\n              this.setOutputData(2, `ERROR: while fetching objects: ${JSON.stringify(error)}`);\n              reject(error);\n            }\n            await Utils.sleep(this.delayBetweenDevice);\n          }\n          const successfulResults = outputs.filter(element => !element.error);\n          const deviceObjects = successfulResults.map(element => {\n            return this.mapToDeviceObject(element.value);\n          });\n          this.debugInfo(`BACNET-NETWORK-POINT-NODE: msg from device ${JSON.stringify(deviceObjects)}`);\n          this.setOutputData(1, `INFO: Scan device ID: ${JSON.stringify(deviceObjects)}`);\n          resolve(deviceObjects);\n        } else {\n          this.setOutputData(1, ``);\n          this.setOutputData(2, `ERROR: while fetching objects: ${JSON.stringify(err)}`);\n          reject(err);\n        }\n      });\n    });\n  }\n\n  subscribe({ action, payload }) {\n    switch (action) {\n      case ADD_POINT:\n        this.pointNodes.push(payload);\n        break;\n      case REMOVE_POINT:\n        this.pointNodes = this.pointNodes.filter(pointNode => pointNode.id !== payload.id);\n        break;\n      case GET_NETWORK_NODE:\n        return BacnetUtils.getNetworkNode(this.getParentNode());\n      case GET_POINTS:\n        return this.points;\n      case GET_PRESENT_VALUE:\n        return this.readPresentValue(payload);\n      case SEND_PAYLOAD_TO_CHILD:\n        this.bacnetClient = payload.bacnetClient;\n        this.networkNode = payload.networkNode;\n        this.updateNetworkSettings();\n        if (!this.isFirst) {\n          // We can check settings with older settings if we want\n          this.setPayloadsToPointNodes();\n        }\n        this.isFirst = false;\n        this.requestPoll().then();\n        break;\n      case WRITE_PRESENT_VALUE:\n        this.writePresentValue(this.settings['ip'].value, payload[0], payload[1], payload[2], payload[3], payload[4]);\n\n        break;\n      default:\n        this.debugWarn(\"Request action doesn't match\");\n    }\n  }\n\n  persistSettings() {\n    if (!this.container.db) return;\n    this.container.db.updateNode(this.id, this.container.id, {\n      $set: {\n        settings: this.settings,\n        properties: this.properties,\n      },\n    });\n  }\n\n  async polling() {\n    if (this.currentPollValue() !== Poll.START || !this.shouldPoll) {\n      this.isPolling = false;\n      return;\n    }\n    await actor.process<any>(() => this.pollingFuncOrTimeout());\n    await actor.process<any>(async () => await Utils.sleep(this.delayBetweenDevice));\n    await Utils.sleep(this.networkNode.settings['devicePolling'].value);\n    await this.polling();\n  }\n\n  /**\n   * If any reason await function got to wait indefinitely long then timeout such function\n   */\n  pollingFuncOrTimeout(): Promise<any> {\n    const that = this;\n    return Promise.race([\n      this.pollingFunc(),\n      new Promise((_, reject) =>\n        setTimeout(() => reject(new Error('timeout')), this.networkNode.settings['devicePolling'].value),\n      ),\n    ]).catch(function(err) {\n      that.debugErr(`Error: ${err}`);\n    });\n  }\n\n  async pollingFunc() {\n    for (let pointNode of this.pointNodes) {\n      let selectPoint = pointNode.settings['pointsList'].value;\n      const manualPoint = pointNode.settings['manualPoint'].value;\n      const objectType = pointNode.settings['objectType'].value;\n      const objectInstance = pointNode.settings['objectInstance'].value;\n      if (manualPoint) {\n        selectPoint = { type: objectType, instance: objectInstance };\n      }\n      if (selectPoint) {\n        const value = await this.readPresentValue(selectPoint);\n        this.debugInfo(`BACNET-NETWORK-DEVICE-NODE: msg from readPresentValue ${JSON.stringify(value)}`);\n        BacnetUtils.sendPointValue(pointNode, value);\n        await Utils.sleep(this.delayBetweenPoint);\n      }\n    }\n  }\n}\nContainer.registerNodeType(BACNET_DEVICE, BACnetDevice, BACNET_NETWORK);\n","import { isNull } from '../../../../utils/helper';\nimport { BACNET_DEVICE, BACNET_POINT } from '../../../constants';\nimport { Container } from '../../../container';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport HistoryBase from '../../history/HistoryBase';\nimport { SEND_PAYLOAD_TO_CHILD, SEND_POINT_VALUE } from './bacnet-constant';\nimport { BACnetNetwork } from './bacnet-network';\nimport BacnetUtils from './bacnet-utils';\nimport { DeviceObject } from './interface';\n\nclass BACnetPoint extends HistoryBase {\n  networkNumber: number;\n  points: Array<DeviceObject> = [];\n  // poll count\n  pollCount = 0;\n  pollCountFail = 0;\n\n  // node input nums\n  inputInNum = 0;\n\n  // node output nums\n  outputOutNum = 0;\n  jsonOutNum = 1;\n  errorOutNum = 2;\n  logsOutNum = 3;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO['protocols/bacnet']['bacnet-point'].title;\n    this.description = NODE_INFO['protocols/bacnet']['bacnet-point'].description;\n    this.addInput('input', Type.ANY);\n    this.addOutput('output', Type.STRING);\n    this.addOutput('output json', Type.STRING);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('logs', Type.STRING);\n    this.settings['pointEnable'] = NodeSetting.create({\n      description: 'Point enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['pointWriteEnable'] = NodeSetting.create({\n      description: 'Point write enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['manualPoint'] = NodeSetting.create({\n      description: 'Add point manually',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.settings['pointsList'] = NodeSetting.create({\n      description: 'Select a point',\n      value: null,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [],\n      },\n    });\n    this.settings['objectType'] = NodeSetting.create({\n      description: 'Output type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'analog-input' },\n          { value: 1, text: 'analog-output' },\n          { value: 2, text: 'analog-value' },\n          { value: 3, text: 'binary-input' },\n          { value: 4, text: 'binary-output' },\n          { value: 5, text: 'binary-value' },\n          { value: 13, text: 'multi-state-input' },\n          { value: 14, text: 'multi-state-output' },\n          { value: 19, text: 'multi-state-value' },\n        ],\n      },\n      value: 0,\n    });\n    // The data-type of the value to be written.\n    this.settings['objectTag'] = NodeSetting.create({ //The data-type of the value to be written.\n      description: 'Data type value to be written',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'NULL(0)' },\n          { value: 1, text: 'BOOLEAN(1)' },\n          { value: 2, text: 'UNSIGNED_INTEGER(2)' },\n          { value: 3, text: 'SIGNED_INTEGER(3)' },\n          { value: 4, text: 'REAL(4)' },\n          { value: 5, text: 'DOUBLE(5)' },\n          { value: 6, text: 'OCTET_STRING(6)' },\n          { value: 7, text: 'CHARACTER_STRING(7)' },\n          { value: 8, text: 'BIT_STRING(8)' },\n          { value: 9, text: 'ENUMERATED(9)' },\n          { value: 10, text: 'DATE(10)' },\n          { value: 11, text: 'TIME(11)' },\n          { value: 12, text: 'OBJECTIDENTIFIER(12)' },\n        ],\n      },\n      value: 1,\n    });\n\n    this.settings['objectInstance'] = NodeSetting.create({\n      description: 'Point ID',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['priority'] = NodeSetting.create({\n      description: 'Priority Number',\n      value: 16,\n      type: SettingType.NUMBER,\n    });\n    this.settings['logs'] = NodeSetting.create({\n      description: 'Return full bacnet payload',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.setSettingsConfig({\n      conditions: {\n        pointsList: setting => {\n          return !setting['manualPoint'].value;\n        },\n        objectType: setting => {\n          return setting['manualPoint'].value;\n        },\n      },\n    });\n    this.addHistorySettingsConfig(0, false);\n  }\n\n  async onAdded() {\n    super.onAdded();\n    // this.name = `BACnet Point: cid_${this.container.id.toString()}_id${this.id.toString()}`; //set default node name\n    if (this.side !== Side.server) return; // only execute on server\n    await Utils.sleep(2000); // TODO: Since device should start after network > device, import may shows issue if we don't have this\n    this.points = BacnetUtils.getPoints(this.getParentNode());\n    this.setPointsListItems();\n    this.getPresentValue();\n    BacnetUtils.addPoint(this.getParentNode(), this);\n  }\n\n  async onInputUpdated() {\n    // this.setOutputData(0, 1);\n    await super.onInputUpdated();\n    if (this.side !== Side.server) return; // only execute on server\n    let objectType: number;\n    let objectInstance: number;\n    const value = this.getInputData(0);\n    const priority = this.settings['priority'].value;\n    const manualPoint = this.settings['manualPoint'].value;\n    const selectPoint = this.settings['pointsList'].value;\n    const objectTag = this.settings['objectTag'].value;\n    let pointWriteEnable = this.settings['pointWriteEnable'].value;\n    if (manualPoint) {\n      objectType = this.settings['objectType'].value;\n      objectInstance = this.settings['objectInstance'].value;\n    }\n    if (selectPoint) {\n      objectType = selectPoint.type;\n      objectInstance = selectPoint.instance;\n    }\n    if (isNull(value)) return;\n    if (pointWriteEnable === false) return;\n    // write point value\n    BacnetUtils.writePresentValue(this.getParentNode(), [objectType, objectInstance, value, priority, objectTag]);\n  }\n\n  async onAfterSettingsChange() {\n    await super.onAfterSettingsChange();\n    this.getPresentValue();\n    const networkNode: BACnetNetwork = BacnetUtils.getNetworkNode(this.getParentNode());\n    if (networkNode.settings?.networkNumber?.value) {\n      this.networkNumber = networkNode.settings?.networkNumber?.value;\n    }\n  }\n\n  onRemoved() {\n    super.onRemoved();\n    BacnetUtils.removePoint(this.getParentNode(), this);\n  }\n\n  getPresentValue() {\n    if (this.side !== Side.server) return; // only execute on serve\n    let selectPoint = this.settings['pointsList'].value;\n    const manualPoint = this.settings['manualPoint'].value;\n    const objectType = this.settings['objectType'].value;\n    const objectInstance = this.settings['objectInstance'].value;\n    if (manualPoint) {\n      selectPoint = { type: objectType, instance: objectInstance };\n    }\n    if (selectPoint) {\n      BacnetUtils.getPresentValue(this.getParentNode(), selectPoint).then(msg => {\n        this.setPointValue(msg);\n      });\n    }\n  }\n\n  setPointValue(msg) {\n    const logs = this.settings['logs'].value;\n    if (logs) {\n      this.setOutputData(this.logsOutNum, true, true);\n      this.debugInfo(`BACNET-NETWORK-POINT-NODE: msg from device ${JSON.stringify(msg)}`);\n    }\n    if (msg?.value?.values?.[0]?.value === undefined) {\n      this.setOutputData(this.errorOutNum, true, true);\n      this.debugErr(`BACNET-NETWORK-POINT-NODE: msg from device node is invalid ${JSON.stringify(msg)}`);\n      return;\n    }\n    let pointValue = msg.value.values[0].value;\n    let objectType: number;\n    let objectInstance: number;\n    let pointEnable = this.settings['pointEnable'].value;\n    let pointWriteEnable = this.settings['pointWriteEnable'].value;\n    const priority = this.settings['priority'].value;\n    const manualPoint = this.settings['manualPoint'].value;\n    const selectPoint = this.settings['pointsList'].value;\n    const pointsList = this.settings['pointsList'].config.items;\n    let bacnetPointName;\n\n    if (manualPoint) {\n      objectType = this.settings['objectType'].value;\n      objectInstance = this.settings['objectInstance'].value;\n    }\n    if (selectPoint) {\n      objectType = selectPoint.type;\n      objectInstance = selectPoint.instance;\n      // get bacnet point name\n      if (pointsList) {\n        let obj = pointsList;\n        for (let key in obj) {\n          if (\n            obj.hasOwnProperty(key) &&\n            obj[key].value.type === selectPoint.type &&\n            obj[key].value.instance === selectPoint.instance\n          ) {\n            bacnetPointName = obj[key];\n          }\n        }\n      }\n    }\n\n    if (msg.value) {\n      this.pollCount++;\n      const json = {\n        name: this.name,\n        pointValue: pointValue,\n        enable: pointEnable,\n        pointWriteEnable: pointWriteEnable,\n        objectType: objectType,\n        objectInstance: objectInstance,\n        priority: priority,\n        bacnetPointName: bacnetPointName,\n        pollCount: this.pollCount,\n        pollCountFail: this.pollCountFail,\n      };\n      this.setOutputData(this.outputOutNum, pointValue);\n      this.setJsonOutput(json);\n      this.setOutputData(this.errorOutNum, null, true);\n    } else {\n      this.setOutputData(this.outputOutNum, null, true);\n      this.setJsonOutput(null);\n      if (msg.error) {\n        this.setOutputData(this.errorOutNum, 'Error on reading value');\n        this.pollCountFail++;\n      }\n    }\n  }\n\n  setJsonOutput(json) {\n    this.setOutputData(this.jsonOutNum, json);\n    return json;\n  }\n\n  setPointsListItems() {\n    this.settings['pointsList'].config.items = this.points.map(point => {\n      return {\n        value: { type: point.type, instance: point.objectInfo },\n        text: point.name,\n      };\n    });\n    this.persistConfiguration();\n    this.broadcastSettingsToClients();\n  }\n\n  subscribe({ action, payload }) {\n    switch (action) {\n      case SEND_PAYLOAD_TO_CHILD:\n        this.points = payload.points;\n        this.setPointsListItems();\n        break;\n      case SEND_POINT_VALUE:\n        this.setPointValue(payload);\n        break;\n      default:\n        this.debugWarn(\"Request action doesn't match\");\n    }\n  }\n}\nContainer.registerNodeType(BACNET_POINT, BACnetPoint, BACNET_DEVICE);\n","import Utils from '../../../utils';\nimport { isNull } from '../../../../utils/helper';\nimport { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport { Side } from '../../../node-interface';\nimport config from '../../../../config';\nimport axios from 'axios';\nconst matchMQTT = require('mqtt-match');\nimport * as mqtt from 'mqtt';\n\ninterface MQTTMessage {\n  topic: string;\n  message: string;\n}\n\n\n/*\n- on created call api to get all points\n- on added try connected to mqtt broker\n- on save settings \n-- set MQTT topic if user selected a point\n-- set readonly setting for selectedPoint\n-- call api to get all points as user my have CRUD a new/existing point in backend\n-- set node name as the bacnet point name\n*/\n\n/*\n on input updated send down new value\n*/\n\n/*\n pointsList: is all the points return from the backend api call\n point_object: is the whole point\n selected_point: selected point is to show the point select in the settings as read only\n topic: is the MQTT topic to subtribe from, The objectIdentifier form the topic, It is the combination of the point address and the objectType\n*/\n\n\nexport class BACnetServerRest extends Node {\n  //in nums\n  inputFault = 0;\n  inputOneNum = 1;\n  inputTwoNum = 2;\n  inputThreeNum = 3;\n\n  //out nums\n  outConnection = 0;\n  outNum = 1;\n  outJson = 2;\n\n  //MQTT\n  enable: boolean\n  client: any;\n  messageQueue: Array<MQTTMessage> = [];\n  topic: any;\n  rateLimitMS = 200;\n\n  // bacnet\n  selectedPoint:string\n  pointName:string\n  objectType:string\n  address:number\n\n  // for stopping sending same value twice to backend\n  lastInput = null;\n  lastSendTime;\n  resendTime = Math.floor(Math.random() * 60) + 1;\n\n  //ip\n  host = '0.0.0.0'\n  port = 1717\n\n  enableDebug = false\n\n  constructor() {\n    super();\n    this.title = NODE_INFO['protocols/bacnet-server']['bacnet-server-api'].title;\n    this.description = NODE_INFO['protocols/bacnet-server']['bacnet-server-api'].description;\n    this.properties['pointObject'] = null;\n    this.settings['selected_point'] = NodeSetting.create({ description: 'Point Object Id', value: '', type: SettingType.READONLY });\n    this.settings['selected_point_name'] = NodeSetting.create({ description: 'Point Name', value: '', type: SettingType.READONLY });\n    this.settings['pointsList'] = NodeSetting.create({\n      description: 'Points List',\n      type: SettingType.AUTOCOMPLETE,\n      config: {\n        items: [],\n      },\n    });\n    this.settings['enable'] = NodeSetting.create({ description: 'Enable', value: true, type: SettingType.BOOLEAN });\n    this.addInput('fault', Type.BOOLEAN);\n    this.addInput('in 1', Type.NUMBER);\n    this.addInput('in 10', Type.NUMBER);\n    this.addInput('in 16', Type.NUMBER);\n    this.addOutput('connection', Type.ANY);\n    this.addOutput('output', Type.ANY);\n    this.addOutput('output-json', Type.JSON);\n  }\n\n  async setTopic() {\n    const point_object = this.getObjectIdentifier()\n    this.topic = `bacnet/server/points/ao/${point_object}`\n  }\n\n  getTopic() {\n    return this.topic\n  }\n\n  getPointUUID() {\n   const obj = this.getPointObject()\n   if (isNull(obj)) return\n   return obj.uuid\n  }\n\n  async getPoints() {\n    await this.fetchPoints(this.host, this.port)\n  }\n\n  async setEnable() {\n    this.enable = this.settings['enable'].value\n  }\n\n  getEnable() {\n    return this.enable\n  }\n\n\n  getPointObject() {\n    return this.properties['pointObject']\n  }\n\n  async setSelectedPoint() {\n    const selectedPoint = this.getPointObject()\n    if (isNull(selectedPoint)) return;\n    const objectName = selectedPoint.object_name\n    const objectType = selectedPoint.object_type;\n    const address = selectedPoint.address;\n    const objectIdentifier = `${objectType.substring(10)}-${address}`\n    const cleanObjectType = `${objectType.substring(10)}`\n    this.setAddress(address)\n    this.setObjectType(cleanObjectType)\n    this.setObjectIdentifier(objectIdentifier)\n    this.pointName = `${objectIdentifier} -> ${objectName}`\n    this.settings['selected_point_name'].value = objectName\n    this.broadcastSettingsToClients();\n  }\n\n  getAddress() {\n    return this.address\n  }\n\n  setAddress(address) {\n    this.address = address\n  }\n\n  getObjectType() {\n    return this.objectType\n  }\n\n  setObjectType(objectType) {\n    this.objectType = objectType\n  }\n\n\n  getSelectedPoint() {\n    return this.selectedPoint\n  }\n\n  setObjectIdentifier(objectIdentifier) {\n    this.settings['selected_point'].value = objectIdentifier\n  }\n\n\n  getObjectIdentifier() {\n    return this.settings['selected_point'].value\n  }\n\n\n  updateTitle() {\n    this.title = `BACnet-Server: ${this.pointName}`;\n    this.broadcastTitleToClients();\n  }\n\n\n   onExecute() {\n    if (this.side !== Side.server) return;\n    const pointValueIn1: number = this.getInputData(this.inputOneNum);\n    const pointValueIn10 = this.getInputData(this.inputTwoNum);\n    const pointValueIn16 = this.getInputData(this.inputThreeNum);\n    this.doPointWrite(pointValueIn1, pointValueIn10, pointValueIn16)\n  }\n\n\n\n  inputChange() {\n    if (this.side !== Side.server) return;\n    const pointValueIn1: number = this.getInputData(this.inputOneNum);\n    const pointValueIn10 = this.getInputData(this.inputTwoNum);\n    const pointValueIn16 = this.getInputData(this.inputThreeNum);\n    if (this.lastInput == null || pointValueIn16 !== this.lastInput){\n      const uuid = this.getPointUUID()\n      if(isNull(uuid))return \n      this.doPointWrite(pointValueIn1, pointValueIn10, pointValueIn16)\n    }\n  }\n\n \n  doPointWrite(pointValueIn1, pointValueIn10, pointValueIn16){\n    const host =  this.host\n    const port = this.port\n    // const uuid = this.getPointUUID()\n    const address = this.getAddress()\n    const objectType = this.getObjectType()\n    if (this.enableDebug) this.debugInfo(`BACNET-SERVER NODE: doPointWrite ${[host, port, objectType, address, pointValueIn1, pointValueIn10, pointValueIn16]}`);\n    if(isNull(address))return \n    if(isNull(objectType))return \n    this.writePointValue(host, port, objectType, address, pointValueIn1, pointValueIn10, pointValueIn16).then(e => {\n      if (this.enableDebug) this.debugInfo(`BACNET-SERVER NODE: doPointWrite did HTTP post ${e}`);\n    }).catch(err=> {\n      if (this.enableDebug) this.debugInfo(`BACNET-SERVER NODE: doPointWrite tried HTTP POTS AND GOT ERROR ${err}`);\n\n    })\n  }\n\n\n  onInputUpdated() {\n    this.inputChange()\n\n  }\n\n  persistSettings() {\n    if (!this.container.db) return;\n    this.container.db.updateNode(this.id, this.container.id, {\n      $set: {\n        settings: this.settings,\n        properties: this.properties,\n      },\n    });\n  }\n\n async onAfterSettingsChange() {\n    const pointsList = this.settings['pointsList'].value;\n    await this.setEnable()\n    this.properties['pointObject'] = pointsList\n    await this.setSelectedPoint()\n    await this.setTopic()\n    const enable = this.getEnable()\n    if (this.side == Side.server) {\n      this.disconnectFromBroker();\n      if (enable) {\n        this.connectToBroker();\n        if (this.enableDebug) this.debugInfo(`BACNET-SERVER NODE: connect to Broker from settings`);\n      }\n    }\n    this.getPoints()\n    this.updateTitle()\n    this.inputChange()\n  }\n\n  onRemoved() {\n    this.disconnectFromBroker();\n  }\n\n  async fetchPoints(host: string, port: number) {\n    if (this.side !== Side.server) return;\n    const url = `${Utils.buildUrl(host, port)}/api/bacnet/points`;\n    const response = await axios.get(url);\n    let res = response.data.points\n    const points = res.map(point => {\n      return { value: point, text: point.object_name };\n    });\n    this.settings['pointsList'].config.items = points;\n    if(isNull(points)) return\n    this.broadcastSettingsToClients();\n\n\n  }\n\n  async writePointValue(host: string, port: number, objectType: string, address: number, pointValueIn1:number, pointValueIn10:number, pointValueIn16:number): Promise<any> {\n    if (this.side !== Side.server) return;\n    const url = `${Utils.buildUrl(host, port)}/api/bacnet/points/obj/${objectType}/${address}`;\n    this.lastInput = pointValueIn1;\n    const body = {\n      \"priority_array_write\": {\n        // \"_1\": pointValueIn1,\n        // \"_10\": pointValueIn10,\n        \"_16\": pointValueIn16\n      }\n    }\n    if (this.enableDebug) this.debugInfo(`BACNET-SERVER NODE:  writePointValue, url:${url} body:${body} host:${host} port:${port} lastInput:${this.lastInput}`);\n    await axios.patch(url, body, {\n      headers: {\n        'Content-Type': 'application/json'\n      },\n    });\n    return null;\n  }\n\n\n  onAdded() {\n    this.onAfterSettingsChange() \n    if (this.side !== Side.server) return;\n    const time = (this.resendTime * 1000) + 200 * 1000 //try and make the resend time a little more random\n    this.EXECUTE_INTERVAL = time\n  }\n\n\n  processMessage(mqttMessage: MQTTMessage) {\n    // look into using mqtt-match library. (https://www.npmjs.com/package/mqtt-match)\n    const top = this.topic;\n    if (matchMQTT(top, mqttMessage.topic)) {\n      this.setOutputData(this.outNum, mqttMessage.message);\n      this.setOutputData(this.outJson, mqttMessage);\n    }\n  }\n\n\n  connectToBroker() {\n    let { host, port, username, password } = config.mqtt;\n    let options: any = {};\n    //use use env\n    if (isNull(host)) return;\n    if (isNull(port)) return;\n    if (isNull(this.getTopic())) return;\n    if (this.getEnable() === false) return;\n    options.host = host;\n    options.port = port;\n\n    this.disconnectFromBroker();\n    this.client = mqtt.connect(options);\n    this.client.on('connect', () => {\n      if (this.enableDebug) this.debugInfo(`BACNET-SERVER NODE: this.client = mqtt.connect options: ${JSON.stringify(options)}`);\n      this.setOutputData(this.outConnection, true, true);\n      let topic = this.getTopic()\n      // if no json topic use input 2 topic\n      if (!isNull(topic)) {\n        if (this.enableDebug) this.debugInfo(`BACNET-SERVER NODE:  subscribe on node input topic ${topic}`);\n        this.client.subscribe(topic);\n      }\n\n    });\n    this.client.on('close', () => {\n      if (this.enableDebug) this.debugInfo(`BACNET-SERVER NODE:  MQTT CLIENT close WAS CALLED`);\n      this.setOutputData(this.outConnection, false, true);\n    });\n\n    this.client.on('error', error => {\n      this.debugWarn(error);\n    });\n    this.client.on('message', (topic, message) => {\n      let obj: MQTTMessage = { topic: topic, message: message.toString() };\n      if (this.enableDebug) this.debugInfo(`BACNET-SERVER NODE:  this.client.on('message' ${JSON.stringify(obj)}`);\n      this.processMessage(obj);\n    });\n  }\n\n  disconnectFromBroker() {\n    if (this.client) this.client.end();\n  }\n\n\n\n}\nContainer.registerNodeType('protocols/bacnet-server/bacnet-server-api', BACnetServerRest);\n","import { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport TimeUtils from '../../../utils/time-utils';\n\ninterface LoraSensor {\n  id: string;\n  voltage: number;\n  rssi: number;\n  snr: number;\n  nodeName: string;\n  topic: {}\n  lastMessage: any\n}\ninterface AASensor extends LoraSensor {\n  pulses: number;\n  a1: number;\n  a2: number;\n  a3: number;\n}\ninterface B0Sensor extends LoraSensor {\n  temp: number;\n  pressure: number;\n  humidity: number;\n}\ninterface B1Sensor extends B0Sensor {\n  lux: number;\n}\ninterface B2Sensor extends B1Sensor {\n  movement: boolean;\n}\n\nenum SensorType {\n  Droplet = 'Droplet',\n  MicroEdge = 'MicroEdge',\n}\n\nexport class LoraSensorDecoderNode extends Node {\n  watchdogDelay = 3600000;\n  nodeID = '';\n  timeoutFunc;\n  sensorType: string;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/lora-raw\"][\"lora-sensor-decoder\"].title;\n    this.description = NODE_INFO[\"protocols/lora-raw\"][\"lora-sensor-decoder\"].description;\n    this.settings['sensorType'] = NodeSetting.create({\n      description: 'LORA Sensor Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: SensorType.Droplet, text: SensorType.Droplet },\n          { value: SensorType.MicroEdge, text: SensorType.MicroEdge },\n        ],\n      },\n      value: SensorType.Droplet,\n    });\n    this.addInput('rawInput', Type.STRING);\n    this.addInputWithSettings('nodeID', Type.STRING, '', 'NodeID');\n    this.addInputWithSettings('topic', Type.STRING, '', 'Set topic for use elsewhere in wires');\n    this.addOutput('json', Type.STRING);\n    this.addOutput('id', Type.STRING);\n    this.addOutput('voltage', Type.NUMBER);\n    this.addOutput('rssi', Type.NUMBER);\n    this.addOutput('lowBatteryAlm', Type.BOOLEAN);\n    this.addOutput('watchdog', Type.BOOLEAN);\n    this.addOutput('temperature', Type.NUMBER);\n    this.addOutput('humidity', Type.NUMBER);\n    this.addOutput('lux', Type.NUMBER);\n    this.addOutput('pressure', Type.NUMBER);\n    this.addOutput('movement', Type.BOOLEAN);\n    this.settings['microEdgeA1'] = NodeSetting.create({\n      description: 'MicroEdge a1 Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: '10k', text: '10k Thermistor' },\n          { value: '10vdc', text: '0-10vdc' },\n          { value: 'digital', text: 'Digital' },\n        ],\n      },\n      value: '10vdc',\n    });\n    this.settings['microEdgeA2'] = NodeSetting.create({\n      description: 'MicroEdge a2 Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: '10k', text: '10k Thermistor' },\n          { value: '10vdc', text: '0-10vdc' },\n          { value: 'digital', text: 'Digital' },\n        ],\n      },\n      value: '10vdc',\n    });\n    this.settings['microEdgeA3'] = NodeSetting.create({\n      description: 'MicroEdge a3 Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: '10k', text: '10k Thermistor' },\n          { value: '10vdc', text: '0-10vdc' },\n          { value: 'digital', text: 'Digital' },\n        ],\n      },\n      value: '10vdc',\n    });\n    this.settings['battery-warn'] = NodeSetting.create({\n      description: 'Low battery warning voltage',\n      value: 3.5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['watchdog'] = NodeSetting.create({\n      description: 'Watchdog (No message warning) Delay',\n      value: 60,\n      type: SettingType.NUMBER,\n    });\n    this.settings['time'] = NodeSetting.create({\n      description: 'Time',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'minutes',\n    });\n    this.setSettingsConfig({\n      groups: [{ time: {}, watchdog: { weight: 2 } }],\n      conditions: {\n        microEdgeA1: setting => {\n          return setting['sensorType'].value === SensorType.MicroEdge;\n        },\n        microEdgeA2: setting => {\n          return setting['sensorType'].value === SensorType.MicroEdge;\n        },\n        microEdgeA3: setting => {\n          return setting['sensorType'].value === SensorType.MicroEdge;\n        },\n      },\n    });\n  }\n\n  onAdded() {\n    this.sensorType = this.settings['sensorType'].value;\n    if (this.sensorType === SensorType.MicroEdge) {\n      /**\n       * Issue: #552\n       * On frontend side:\n       * Removing this one here, because constructor() and onAdded() function gets called while doing each refresh\n       * And always 'movement' slot (slot number: 10) gets displayed even when it shouldn't\n       * It's because when sensorType === 'MicroEdge', we are replacing slots 6-9 with new one and leaving 0-5 as is,\n       * But we are doing nothing for node 10, so on it displays on frontend side even it doesn't have real value on backend\n       */\n      this.removeOutput(10);\n    }\n    this.clearOutputs();\n    let nodeID = this.getInputData(1).toUpperCase() || '';\n    if (nodeID != this.nodeID) {\n      this.nodeID = nodeID;\n    }\n    this.updateTitle();\n  }\n\n  onInputUpdated() {\n    const sensorType = this.settings['sensorType'].value;\n    let nodeID = this.getInputData(1).toUpperCase() || '';\n    if (nodeID != this.nodeID) {\n      this.nodeID = nodeID;\n      this.updateTitle(); // Update title is also related with nodeID update so\n      this.broadcastTitleToClients();\n      this.clearOutputs();\n      this.resetWatchdog();\n    }\n    let data: string = this.getInputData(0) || '';\n    if (!data) return;\n    else if (data.length % 2 === 1 && (data[data.length - 1] === '\\r' || data[data.length - 1] === '\\n')) {\n      data = data.substring(0, data.length - 1);\n    } else if (data.substring(data.length - 2, data.length) === '\\r\\n') {\n      data = data.substring(0, data.length - 2);\n    }\n\n    if (\n      data.length !== 36 &&\n      data.length !== 44 &&\n      data.substring(2, 4) !== 'AA' &&\n      data.substring(2, 4) !== 'B0' &&\n      data.substring(2, 4) !== 'B1' &&\n      data.substring(2, 4) !== 'B2'\n    ) {\n      return;\n    }\n\n    if (nodeID == data.substring(0, 8) || nodeID == '') {\n      if (\n        sensorType === SensorType.MicroEdge &&\n        data.substring(2, 4) === 'AA' &&\n        (data.length === 44 || data.length === 36)\n      ) {\n        if (this.inputs[0].updated) this.resetWatchdog();\n        this.writeOutputs(this.microEdgeDecode(data));\n      } else if (\n        sensorType === SensorType.Droplet &&\n        data.substring(2, 3) === 'B' &&\n        (data.length === 44 || data.length === 36)\n      ) {\n        if (this.inputs[0].updated) this.resetWatchdog();\n        this.writeOutputs(this.dropletDecode(data));\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    let watchdogTime = this.settings['watchdog'].value;\n    watchdogTime = TimeUtils.timeConvert(watchdogTime, this.settings['time'].value);\n    if (this.watchdogDelay != watchdogTime) {\n      this.resetWatchdog();\n    }\n    this.setOutputs();\n    this.updateNodeOutput();\n    this.onInputUpdated();\n  }\n\n  private writeOutputs(output: LoraSensor) {\n    switch (this.settings['sensorType'].value) {\n      case SensorType.Droplet:\n        this.setOutputData(0, JSON.stringify(output));\n        this.setOutputData(1, output['id'] == null ? null : output['id']);\n        this.setOutputData(2, output['voltage'] == null ? null : output['voltage']);\n        this.setOutputData(3, output['rssi'] == null ? null : output['rssi']);\n        this.setOutputData(4, output['voltage'] < this.settings['battery-warn'].value);\n        this.setOutputData(6, output['temp'] == null ? null : output['temp']);\n        this.setOutputData(7, output['humidity'] == null ? null : output['humidity']);\n        this.setOutputData(8, output['lux'] == null ? null : output['lux']);\n        this.setOutputData(9, output['pressure'] == null ? null : output['pressure']);\n        this.setOutputData(10, output['movement'] == null ? null : output['movement']);\n        break;\n\n      case SensorType.MicroEdge:\n        this.setOutputData(0, JSON.stringify(output));\n        this.setOutputData(1, output['id'] == null ? null : output['id']);\n        this.setOutputData(2, output['voltage'] == null ? null : output['voltage']);\n        this.setOutputData(3, output['rssi'] == null ? null : output['rssi']);\n        this.setOutputData(4, output['voltage'] < this.settings['battery-warn'].value);\n        this.setOutputData(6, output['pulses'] == null ? null : output['pulses']);\n        const microEdgeOutputs = this.MicroEdgeAnalogs([output['a1'], output['a2'], output['a3']]);\n        this.setOutputData(7, microEdgeOutputs[0] == null ? null : microEdgeOutputs[0]);\n        this.setOutputData(8, microEdgeOutputs[1] == null ? null : microEdgeOutputs[1]);\n        this.setOutputData(9, microEdgeOutputs[2] == null ? null : microEdgeOutputs[2]);\n        break;\n    }\n  }\n\n  private MicroEdgeAnalogs(analogInputs) {\n    let output = [];\n    for (var i = 0; i < 3; i++) {\n      if (typeof analogInputs[i] == 'number') {\n        switch (this.settings[`microEdgeA${i + 1}`].value) {\n          case '10k':\n            const Vref = 3.34;\n            const V = (analogInputs[i] / 1024) * Vref;\n            const R0 = 10000;\n            const R = (R0 * V) / (Vref - V);\n            const T0 = 273 + 25;\n            const B = 3850;\n            const T = 1 / (1 / T0 + (1 / B) * Math.log(R / R0));\n            const temp = T - 273.15;\n            output.push(Math.round(temp * 100) / 100);\n            break;\n\n          case '10vdc':\n            output.push((analogInputs[i] / 1024) * 10);\n            break;\n\n          case 'digital':\n            if (analogInputs[i] === undefined || analogInputs[i] >= 1000) {\n              output.push(false);\n            } else {\n              output.push(true);\n            }\n            break;\n        }\n      } else output.push(null);\n    }\n    return output;\n  }\n\n  lastMessageTimeStamp(){\n    return  new Date()\n  }\n\n  microEdgeDecode(data: string): AASensor {\n    const topic = this.getInputData(2)\n    const topicsBuilder = {\n      id : topic+\"/id\",\n      pulses: topic+\"/pulses\",\n      voltage: topic+\"/voltage\",\n      a1: topic+\"/a1\",\n      a2: topic+\"/a2\",\n      a3: topic+\"/a3\",\n      rssi: topic+\"/rssi\",\n      snr: topic+\"/snr\"\n    }\n    let lastMessage = null;\n    lastMessage = this.lastMessageTimeStamp()\n    return {\n      id: data.substring(0, 8),\n      pulses: parseInt(data.substring(8, 16), 16),\n      voltage: parseInt(data.substring(16, 18), 16) / 50,\n      a1: parseInt(data.substring(18, 22), 16),\n      a2: parseInt(data.substring(22, 26), 16),\n      a3: parseInt(data.substring(26, 30), 16),\n      rssi: parseInt(data.substring(data.length - 4, data.length - 2), 16) * -1,\n      snr: parseInt(data.substring(data.length - 2, data.length), 16) / 10,\n      nodeName: this.name,\n      topic: topicsBuilder,\n      lastMessage: lastMessage\n    };\n  }\n\n  dropletDecode(data: string): B0Sensor {\n    const topic = this.getInputData(2)\n    const topicsBuilder = {\n      id : topic+\"/id\",\n      temp: topic+\"/temp\",\n      pressure: topic+\"/pressure\",\n      humidity: topic+\"/humidity\",\n      lux: topic+\"/lux\",\n      movement: topic+\"/movement\",\n      voltage: topic+\"/voltage\",\n      rssi: topic+\"/rssi\",\n      snr: topic+\"/snr\"\n    }\n    let lastMessage = null;\n    lastMessage = this.lastMessageTimeStamp()\n\n    let output: B0Sensor = {\n      id: data.substring(0, 8),\n      temp: parseInt(data.substring(10, 12) + data.substring(8, 10), 16) / 100,\n      pressure: parseInt(data.substring(14, 16) + data.substring(12, 14), 16) / 10,\n      humidity: parseInt(data.substring(16, 18), 16) % 128,\n      voltage: parseInt(data.substring(22, 24), 16) / 50,\n      rssi: parseInt(data.substring(data.length - 4, data.length - 2), 16) * -1,\n      snr: parseInt(data.substring(data.length - 2, data.length), 16) / 10,\n      nodeName: this.name,\n      topic: topicsBuilder,\n      lastMessage: lastMessage\n    };\n    if (data.substring(2, 4) === 'B1' || data.substring(2, 4) === 'B2') {\n      const b1Sensor: B1Sensor = output as B1Sensor;\n      b1Sensor.lux = parseInt(data.substring(20, 22) + data.substring(18, 20), 16);\n      output = b1Sensor;\n      if (data.substring(2, 4) == 'B2') {\n        const b2_sensor: B2Sensor = b1Sensor as B2Sensor;\n        b2_sensor.movement = parseInt(data.substring(16, 18), 16) > 127;\n        output = b2_sensor;\n      }\n    }\n    return output;\n  }\n\n  resetWatchdog() {\n    this.setOutputData(5, false, true);\n    clearInterval(this.timeoutFunc);\n    let watchdogTime = this.settings['watchdog'].value;\n    watchdogTime = TimeUtils.timeConvert(watchdogTime, this.settings['time'].value);\n    this.watchdogDelay = watchdogTime;\n    this.timeoutFunc = setTimeout(() => {\n      this.setOutputData(5, true, true);\n    }, watchdogTime);\n  }\n\n  setOutputs() {\n    const currentSensorType = this.settings['sensorType'].value;\n    if (this.sensorType != currentSensorType) {\n      switch (currentSensorType) {\n        case SensorType.Droplet:\n          this.removeOutput(6);\n          this.removeOutput(7);\n          this.removeOutput(8);\n          this.removeOutput(9);\n          if (this.outputs[10]) this.removeOutput(10);\n          this.addOutput('temperature', Type.NUMBER);\n          this.addOutput('humidity', Type.NUMBER);\n          this.addOutput('lux', Type.NUMBER);\n          this.addOutput('pressure', Type.NUMBER);\n          this.addOutput('movement', Type.BOOLEAN);\n          this.clearOutputs();\n          break;\n\n        case SensorType.MicroEdge:\n          this.removeOutput(6);\n          this.removeOutput(7);\n          this.removeOutput(8);\n          this.removeOutput(9);\n          this.removeOutput(10);\n          if (this.outputs[11]) this.removeOutput(11);\n          this.addOutput('pulses', Type.NUMBER);\n          this.addOutput('a1', Type.NUMBER);\n          this.addOutput('a2', Type.NUMBER);\n          this.addOutput('a3', Type.NUMBER);\n          this.clearOutputs();\n          break;\n      }\n    }\n    if (currentSensorType == SensorType.MicroEdge) {\n      this.outputs[7].name = `a1 (${this.settings['microEdgeA1'].value})`;\n      this.outputs[8].name = `a2 (${this.settings['microEdgeA2'].value})`;\n      this.outputs[9].name = `a3 (${this.settings['microEdgeA3'].value})`;\n    }\n    this.sensorType = currentSensorType;\n    this.updateTitle();\n  }\n\n  updateTitle() {\n    if (this.nodeID) this.title = `Lora Sensor Decoder (${this.sensorType} | ${this.nodeID})`;\n    else this.title = `Lora Sensor Decoder (${this.sensorType} | ALL)`;\n  }\n\n  clearOutputs() {\n    this.setOutputData(0, null);\n    this.setOutputData(1, null);\n    this.setOutputData(2, null);\n    this.setOutputData(3, null);\n    this.setOutputData(4, null);\n    this.setOutputData(5, null);\n    this.setOutputData(6, null);\n    this.setOutputData(7, null);\n    this.setOutputData(8, null);\n    this.setOutputData(9, null);\n    if (this.settings['sensorType'].value === SensorType.Droplet) this.setOutputData(10, null);\n  }\n}\nContainer.registerNodeType('protocols/lora-raw/lora-sensor-decoder', LoraSensorDecoderNode);\n","import { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport { LORA_DATA_TYPE_LENGTHS, LORA_DATA_TYPE_NAMES } from './lora-two-way-in';\n\nexport class LoRaRawTwoWayOutput extends Node {\n  payloadDefinition: Array<LORA_DATA_TYPE_NAMES> = [];\n  inputsUpdated: Array<boolean> = [];\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/lora-raw\"][\"lora-raw-two-way-out\"].title;\n    this.description = NODE_INFO[\"protocols/lora-raw\"][\"lora-raw-two-way-out\"].description;\n    this.settings['enable'] = NodeSetting.create({\n      description: 'enable',\n      type: SettingType.BOOLEAN,\n      value: false,\n    });\n    this.settings['senderId'] = NodeSetting.create({\n      description: 'sender Id',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n    this.settings['port'] = NodeSetting.create({\n      description: 'port number',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n    // this.settings['sendUpdatedOnly'] = {\n    //   description: 'send only updated inputs',\n    //   type: SettingType.BOOLEAN,\n    //   value: true,\n    // },\n    this.settings['types'] = NodeSetting.create({\n      description: 'Types',\n      type: SettingType.READONLY,\n      value: 'INT8, INT16, INT32, FLOAT',\n      // value: 'INT8, UINT8, INT16, UINT16, INT32, UINT32, FLOAT',\n    });\n    this.settings['definition'] = NodeSetting.create({\n      description: 'payload definition (JSON)',\n      type: SettingType.STRING,\n      value: '',\n    });\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('output', Type.ANY);\n  }\n\n  init() {\n    this.updateOutputs();\n  }\n\n  onAdded() {\n    this.payloadDefinition = this.stringToDataTypes(this.settings['definition'].value);\n    this.inputsUpdated = new Array<boolean>(this.payloadDefinition.length);\n    this.inputsUpdated.fill(false);\n  }\n\n  onInputUpdated() {\n    for (let i = 1; i < this.getInputsCount(); i++) {\n      if (this.inputs[i].updated) {\n        this.inputsUpdated[i - 1] = true;\n      }\n    }\n    if (this.settings['enable'].value === false) return;\n    if (!this.inputs[0].updated || this.getInputData(0) === false) {\n      return;\n    }\n\n    // PARSING\n    const parseError = msg => {\n      this.setOutputData(1, 'parse error: ' + msg);\n    };\n\n    const checkInputAndType = (value, type) => {\n      let isOk = true;\n      switch (type) {\n        case LORA_DATA_TYPE_NAMES.INT8:\n          isOk = value >= -128 && value <= 127;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT8:\n          isOk = value >= 0 && value <= 0xff;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT16:\n          isOk = value >= -32768 && value <= 32767;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT16:\n          isOk = value >= 0 && value <= 0xffff;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT32:\n          isOk = value >= -2147483648 && value <= 2147483647;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT32:\n          isOk = value >= 0 && value <= 0xffffffff;\n          break;\n      }\n      return isOk;\n    };\n\n    // if (!this.settings['sendUpdatedOnly'].value) {\n    //   this.inputsUpdated.fill(true);\n    // }\n    this.inputsUpdated.fill(true);\n    let data_lengths = 0;\n    for (let i = 0; i < this.payloadDefinition.length; i++) {\n      if (this.inputsUpdated[i]) {\n        data_lengths += LORA_DATA_TYPE_LENGTHS[this.payloadDefinition[i]] + 1;\n      }\n    }\n    if (data_lengths === 0) {\n      parseError('No input updates');\n      return;\n    }\n    let buffer = Buffer.alloc(data_lengths + 2);\n\n    buffer.writeUInt8(this.settings['senderId'].value, 0);\n    buffer.writeUInt8(this.settings['port'].value, 1);\n\n    let point = 0;\n    for (let i = 2; i < buffer.length; ) {\n      if (!this.inputsUpdated[point]) {\n        point++;\n        continue;\n      }\n      let type = this.payloadDefinition[point];\n      let value = this.getInputData(point + 1);\n\n      if (!checkInputAndType(value, type)) {\n        parseError('invalid value input ' + point);\n        return;\n      }\n\n      buffer.writeUInt8(point, i++);\n\n      switch (type) {\n        case LORA_DATA_TYPE_NAMES.INT8:\n          buffer.writeInt8(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT8:\n          buffer.writeUInt8(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT16:\n          buffer.writeInt16LE(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT16:\n          buffer.writeUInt16LE(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT32:\n          buffer.writeInt32LE(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT32:\n          buffer.writeUInt32LE(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.FLOAT:\n          buffer.writeFloatLE(value, i);\n          break;\n      }\n\n      i += LORA_DATA_TYPE_LENGTHS[type];\n      point++;\n    }\n\n    this.setOutputData(1, null);\n    this.setOutputData(0, buffer);\n\n    this.inputsUpdated.fill(false);\n  }\n\n  onAfterSettingsChange() {\n    this.payloadDefinition = this.updateOutputs();\n    this.setOutputData(1, null);\n    this.onInputUpdated();\n  }\n\n  private updateOutputs() {\n    const data = this.stringToDataTypes(this.settings['definition'].value);\n    if (this.payloadDefinition.length !== data.length) {\n      const inputsCount = this.getInputsCount();\n      for (let i = 1; i < inputsCount; i++) {\n        this.removeInput(i);\n      }\n\n      this.inputsUpdated = new Array<boolean>(data.length);\n      for (let i = 0; i < data.length; i++) {\n        this.addInput(i.toString(), Type.NUMBER);\n        this.inputsUpdated[i] = false;\n      }\n    }\n    return data;\n  }\n\n  stringToDataTypes(str) {\n    const data = str\n      .toUpperCase()\n      .replace(/ /g, '')\n      .split(',')\n      .filter(x => x !== '');\n\n    if (data && data.length) {\n      for (let i = 0; i < data.length; i++) {\n        if (LORA_DATA_TYPE_NAMES[data[i]] === undefined) {\n          this.setOutputData(1, 'settings parse error');\n          return undefined;\n        }\n        data[i] = LORA_DATA_TYPE_NAMES[data[i]];\n      }\n    }\n    return data;\n  }\n}\nContainer.registerNodeType('protocols/lora-raw/lora-raw-two-way-out', LoRaRawTwoWayOutput);\n","import { Node } from '../../../node';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport { Container } from '../../../container';\nimport Utils from '../../../utils'\nimport * as loraRawCrypt from './lora-raw-crypt';\n\nenum LORA_DATA_TYPE_NAMES {\n  INT8 = 0,\n  UINT8,\n  INT16,\n  UINT16,\n  INT32,\n  UINT32,\n  FLOAT,\n}\n\nconst LORA_DATA_TYPE_LENGTHS = [\n  1, // INT8\n  1, // UINT8\n  2, // INT16\n  2, // UINT16\n  4, // INT32\n  4, // UINT32\n  4, // FLOAT\n];\n\nexport class LoRaRawPointsInput extends Node {\n  payloadDefinition: Array<LORA_DATA_TYPE_NAMES> = [];\n  addressPrefix: string = 'FFFFFF';\n  address: string = '';\n  keyBuffer: Buffer = null;\n  nonce = 0;\n  outputOffset = 3; // 3 static outputs before dynamic outputs\n\n  constructor() {\n    super();\n    this.title = `Nube LoRaRAW Points In`;\n    this.description = 'This node parses Nubes LoRa Points protocol payload';\n    this.settings['enable'] = NodeSetting.create({\n      description: 'enable',\n      type: SettingType.BOOLEAN,\n      value: true,\n    });\n    this.settings['senderId'] = NodeSetting.create({\n      description: 'sender Id [0-254]',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n    this.settings['port'] = NodeSetting.create({\n      description: 'port number [0-254]',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n    this.settings['types'] = NodeSetting.create({\n      description: 'Types # = [8, 16, 23]',\n      type: SettingType.READONLY,\n      // value: 'INT8, UINT8, INT16, UINT16, INT32, UINT32, FLOAT',\n      value: 'INT#, UINT#, FLOAT',\n    });\n    this.settings['definition'] = NodeSetting.create({\n      description: 'payload definition (\\',\\' separated)',\n      type: SettingType.STRING,\n      value: '',\n    });\n    this.settings['key'] = NodeSetting.create({\n      description: 'encryption key (hex)',\n      type: SettingType.STRING,\n      value: '',\n    });\n    this.settings['other_group'] = NodeSetting.create({\n      description: 'Advanced',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['addrPrefix'] = NodeSetting.create({\n      description: 'Address Prefix [6]',\n      type: SettingType.STRING,\n      value: 'FFFFFF',\n    });\n    this.settings['nonceLen'] = NodeSetting.create({\n      description: 'Nonce Length',\n      type: SettingType.NUMBER,\n      value: 2,\n    });\n    this.settings['frameCounterEnabled'] = NodeSetting.create({\n      description: 'frame counters (**TBA**)',\n      type: SettingType.BOOLEAN,\n      value: false,\n    });\n\n    this.addInput('rawInput', Type.STRING);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('rssi', Type.NUMBER);\n    this.addOutput('snr', Type.NUMBER);\n  }\n\n  init() {\n    this.updateSettings();\n    this.updateOutputs(this.payloadDefinition);\n  }\n\n  onAdded() {\n    this.updateSettings();\n  }\n\n  onInputUpdated() {\n    if (this.keyBuffer === null) {\n      return;\n    }\n    let data: string = this.getInputData(0) || '';\n    if (this.settings['enable'].value === false) return;\n    if (!data || data.length < (24 * 2) || data.substring(0, 8).toUpperCase() !== this.address) {\n      return;\n    }\n\n    // remove newline\n    if (data.substring(data.length - 2, data.length) === '\\r\\n') {\n      data = data.substring(0, data.length - 2);\n    } else if (data.length % 2 === 1 && (data[data.length - 1] === '\\n' || data[data.length - 1] === '\\r')) {\n      data = data.substring(0, data.length - 1);\n    }\n\n\n\n    let encryptedBuffer = Buffer.from(data, 'hex');\n    let [dataBuffer, err] = loraRawCrypt.loraRawDecryptBuffer(encryptedBuffer.slice(0, 4), encryptedBuffer.slice(4, encryptedBuffer.length - 2), this.keyBuffer);\n    if (err !== loraRawCrypt.LORA_RAW_ERROR.LRERR_NOERR) {\n      this.setOutputData(0, 'LoRaRaw Crypt ERR: ' + err);\n      return;\n    }\n    let rssi = encryptedBuffer.readInt8(encryptedBuffer.length - 2);\n    let snr = encryptedBuffer.readUInt8(encryptedBuffer.length - 1);\n\n\n    let startPos = this.settings['nonceLen'].value // skip nonce\n    const port = dataBuffer[startPos];\n    if (port !== this.settings['port'].value) {\n      return;\n    }\n\n    // PARSING\n\n    const parseError = msg => {\n      this.setOutputData(0, 'parse error: ' + msg);\n    };\n\n    // convert hex string to buffer\n    let buffer = dataBuffer.slice(startPos + 1); //skip port\n    let outputValues = new Array<number>(this.payloadDefinition.length);\n    let pointParsed = new Array<boolean>(this.payloadDefinition.length);\n    pointParsed.fill(false);\n\n    let i = 0;\n    for (let pointCount = 0; pointCount < this.payloadDefinition.length; pointCount++) {\n      let point = buffer.readUInt8(i++);\n      let type_length = 0;\n\n      if (point >= this.payloadDefinition.length) {\n        parseError('invalid point ' + point);\n        return;\n      }\n      if (pointParsed[point]) {\n        parseError('Bad payload. Point already parsed: ' + point);\n        return;\n      }\n\n      type_length = LORA_DATA_TYPE_LENGTHS[this.payloadDefinition[point]];\n\n      if (buffer.length - i < type_length) {\n        parseError('invalid length');\n        return;\n      }\n\n      switch (this.payloadDefinition[point]) {\n        case LORA_DATA_TYPE_NAMES.INT8:\n          outputValues[point] = buffer.readInt8(i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT8:\n          outputValues[point] = buffer.readUInt8(i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT16:\n          outputValues[point] = buffer.readInt16LE(i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT16:\n          outputValues[point] = buffer.readUInt16LE(i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT32:\n          outputValues[point] = buffer.readInt32LE(i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT32:\n          outputValues[point] = buffer.readUInt32LE(i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.FLOAT:\n          outputValues[point] = buffer.readFloatLE(i);\n          break;\n      }\n      pointParsed[point] = true;\n      i += type_length;\n    }\n\n    for (let i = 0; i < outputValues.length; i++) {\n      this.setOutputData(i + this.outputOffset, outputValues[i]);\n    }\n    this.setOutputData(1, rssi);\n    this.setOutputData(2, snr);\n    this.setOutputData(0, null);\n  }\n\n  onAfterSettingsChange() {\n    if (!this.updateSettings()) {\n      return;\n    }\n    this.updateOutputs(this.payloadDefinition);\n    this.onInputUpdated();\n  }\n\n  private updateSettings() {\n    this.settings['senderId'].value = Utils.clamp(this.settings['senderId'].value, 0, 254);\n    this.settings['port'].value = Utils.clamp(this.settings['port'].value, 0, 254);\n    this.settings['nonceLen'].value = Utils.clamp(this.settings['nonceLen'].value, 1, 4);\n    this.payloadDefinition = this.stringToDataTypes(this.settings['definition'].value);\n    let addrPrefix = this.settings['addrPrefix'].value;\n    this.addressPrefix = addrPrefix && addrPrefix.length === 6 ? addrPrefix : 'FFFFFF';\n    this.address = this.addressPrefix + ('0' + this.settings['senderId'].value.toString(16)).substr(-2);\n    this.address = this.address.toUpperCase();\n    if (this.settings['key'].value.length !== 32) {\n      this.setOutputData(0, 'invalid key');\n      this.keyBuffer = null;\n      return false;\n    }\n    this.keyBuffer = Buffer.from(this.settings['key'].value, 'hex');\n    this.setOutputData(0, null);\n    return true;\n  }\n\n  private updateOutputs(data) {\n    if (this.getOutputsCount() - this.outputOffset !== data.length) {\n      const outputsCount = this.getOutputsCount();\n      for (let i = this.outputOffset; i < outputsCount; i++) {\n        this.removeOutput(i);\n      }\n      for (let i = 0; i < data.length; i++) {\n        this.addOutput(i.toString(), Type.NUMBER);\n      }\n      this.updateNodeOutput();\n    }\n  }\n\n  private stringToDataTypes(str) {\n    const data = str\n      .toUpperCase()\n      .replace(/ /g, '')\n      .split(',')\n      .filter(x => x !== '');\n\n    if (data && data.length) {\n      for (let i = 0; i < data.length; i++) {\n        if (LORA_DATA_TYPE_NAMES[data[i]] === undefined) {\n          this.setOutputData(0, 'settings parse error');\n          return undefined;\n        }\n        data[i] = LORA_DATA_TYPE_NAMES[data[i]];\n      }\n    }\n    return data;\n  }\n}\nContainer.registerNodeType('protocols/lora-raw-v2/lora-raw-points-in', LoRaRawPointsInput);\n\n\n//////////////////////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////////////////////\n\n\nexport class LoRaRawPointsOutput extends Node {\n  payloadDefinition: Array<LORA_DATA_TYPE_NAMES> = [];\n  addressPrefix: string = 'FFFFFF';\n  address: Buffer = null;\n  keyBuffer: Buffer = null;\n  nonce = 0;\n  // inputsUpdated: Array<boolean> = [];\n\n  errorOutputIndex: number = 1;\n\n  constructor() {\n    super();\n    this.title = `Nube LoRaRAW Points Out`;\n    this.description = 'This node compiles points to Nubes LoRa Points protocol';\n    this.settings['enable'] = NodeSetting.create({\n      description: 'enable',\n      type: SettingType.BOOLEAN,\n      value: true,\n    });\n    // this.settings['sendUpdatedOnly'] = NodeSetting.create({\n    //   description: 'send only updated inputs',\n    //   type: SettingType.BOOLEAN,\n    //   value: true,\n    // },\n    this.settings['enable'] = NodeSetting.create({\n      description: 'enable',\n      type: SettingType.BOOLEAN,\n      value: true,\n    });\n    this.settings['senderId'] = NodeSetting.create({\n      description: 'sender Id [0-254]',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n    this.settings['port'] = NodeSetting.create({\n      description: 'port number [0-254]',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n    this.settings['types'] = NodeSetting.create({\n      description: 'Types ( # = [8, 16, 23] )',\n      type: SettingType.READONLY,\n      // value: 'INT8, UINT8, INT16, UINT16, INT32, UINT32, FLOAT',\n      value: 'INT#, UINT#, FLOAT',\n    });\n    this.settings['definition'] = NodeSetting.create({\n      description: 'payload definition (\\',\\' separated)',\n      type: SettingType.STRING,\n      value: '',\n    });\n    this.settings['key'] = NodeSetting.create({\n      description: 'encryption key (hex)',\n      type: SettingType.STRING,\n      value: '',\n    });\n    this.settings['other_group'] = NodeSetting.create({\n      description: 'Advanced',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['addrPrefix'] = NodeSetting.create({\n      description: 'Address Prefix [6]',\n      type: SettingType.STRING,\n      value: 'FFFFFF',\n    });\n    this.settings['nonceLen'] = NodeSetting.create({\n      description: 'Nonce Length',\n      type: SettingType.NUMBER,\n      value: 2,\n    });\n    this.settings['frameCounterEnabled'] = NodeSetting.create({\n      description: 'frame counters (**TBA**)',\n      type: SettingType.BOOLEAN,\n      value: false,\n    });\n\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('output', Type.ANY);\n    this.addOutput('error', Type.STRING);\n  }\n\n  init() {\n    this.updateSettings();\n    this.updateInputs(this.payloadDefinition);\n  }\n\n  onAdded() {\n    this.updateSettings();\n    // this.inputsUpdated = new Array<boolean>(this.payloadDefinition.length);\n    // this.inputsUpdated.fill(false);\n  }\n\n  onInputUpdated() {\n    // for (let i = 1; i < this.getInputsCount(); i++) {\n    //   if (this.inputs[i].updated) {\n    //     this.inputsUpdated[i - 1] = true;\n    //   }\n    // }\n    if (this.settings['enable'].value === false) return;\n    if (!this.inputs[0].updated || this.getInputData(0) !== true) {\n      return;\n    }\n\n    // PARSING\n    const parseError = msg => {\n      this.setOutputData(this.errorOutputIndex, 'parse error: ' + msg);\n    };\n\n    const checkInputAndType = (value, type) => {\n      let isOk = true;\n      switch (type) {\n        case LORA_DATA_TYPE_NAMES.INT8:\n          isOk = value >= -128 && value <= 127;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT8:\n          isOk = value >= 0 && value <= 0xff;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT16:\n          isOk = value >= -32768 && value <= 32767;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT16:\n          isOk = value >= 0 && value <= 0xffff;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT32:\n          isOk = value >= -2147483648 && value <= 2147483647;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT32:\n          isOk = value >= 0 && value <= 0xffffffff;\n          break;\n      }\n      return isOk;\n    };\n\n    // if (!this.settings['sendUpdatedOnly'].value) {\n    //   this.inputsUpdated.fill(true);\n    // }\n    // this.inputsUpdated.fill(true);\n    let data_lengths = 0;\n    for (let i = 0; i < this.payloadDefinition.length; i++) {\n      // if (this.inputsUpdated[i]) {\n      data_lengths += LORA_DATA_TYPE_LENGTHS[this.payloadDefinition[i]] + 1;\n      // }\n    }\n    if (data_lengths === 0) {\n      parseError('No input updates');\n      return;\n    }\n\n    let buffer = Buffer.alloc(data_lengths + this.settings['nonceLen'].value + 1);\n\n    const nonceLen = this.settings['nonceLen'].value;\n    if (nonceLen === 1) {\n      buffer.writeUInt8(this.nonce, 0);\n      this.nonce = (this.nonce + 1) & 0xFF;\n    }\n    else if (nonceLen === 2) {\n      buffer.writeUInt16LE(this.nonce, 0);\n      this.nonce = (this.nonce + 1) & 0xFFFF;\n    }\n    else if (nonceLen === 4) {\n      buffer.writeUInt32LE(this.nonce, 0);\n      this.nonce = (this.nonce + 1) & 0xFFFFFFFF;\n    }\n    buffer.writeUInt8(this.settings['port'].value, nonceLen);\n\n    let point = 0;\n    for (let i = nonceLen + 1; i < buffer.length;) {\n      // if (!this.inputsUpdated[point]) {\n      //   point++;\n      //   continue;\n      // }\n      let type = this.payloadDefinition[point];\n      let value = this.getInputData(point + 1);\n\n      if (!checkInputAndType(value, type)) {\n        parseError('invalid value input ' + point);\n        return;\n      }\n\n      buffer.writeUInt8(point, i++);\n\n      switch (type) {\n        case LORA_DATA_TYPE_NAMES.INT8:\n          buffer.writeInt8(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT8:\n          buffer.writeUInt8(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT16:\n          buffer.writeInt16LE(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT16:\n          buffer.writeUInt16LE(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT32:\n          buffer.writeInt32LE(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT32:\n          buffer.writeUInt32LE(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.FLOAT:\n          buffer.writeFloatLE(value, i);\n          break;\n      }\n\n      i += LORA_DATA_TYPE_LENGTHS[type];\n      point++;\n    }\n\n    let [encBuffer, err] = loraRawCrypt.loraRawEncryptBuffer(this.address, buffer, this.keyBuffer);\n    if (err !== loraRawCrypt.LORA_RAW_ERROR.LRERR_NOERR) {\n      this.setOutputData(this.errorOutputIndex, 'LoRaRaw Crypt ERR: ' + err);\n      return;\n    }\n    buffer = Buffer.concat([this.address, encBuffer]);\n\n    this.setOutputData(this.errorOutputIndex, null);\n    this.setOutputData(0, buffer);\n\n    // this.inputsUpdated.fill(false);\n  }\n\n  onAfterSettingsChange() {\n    if (!this.updateSettings()) {\n      return;\n    }\n    this.updateInputs(this.payloadDefinition);\n    this.setOutputData(this.errorOutputIndex, null);\n    this.onInputUpdated();\n  }\n\n  private updateSettings() {\n    this.settings['senderId'].value = Utils.clamp(this.settings['senderId'].value, 0, 254);\n    this.settings['port'].value = Utils.clamp(this.settings['port'].value, 0, 254);\n    this.settings['nonceLen'].value = Utils.clamp(this.settings['nonceLen'].value, 1, 4);\n    this.payloadDefinition = this.stringToDataTypes(this.settings['definition'].value);\n    if (this.settings['key'].value.length !== 32) {\n      this.setOutputData(this.errorOutputIndex, 'invalid key');\n      this.keyBuffer = null;\n      return false;\n    }\n    this.keyBuffer = Buffer.from(this.settings['key'].value, 'hex');\n    let addrPrefix = this.settings['addrPrefix'].value;\n    this.addressPrefix = addrPrefix && addrPrefix.length === 6 ? addrPrefix.toUpperCase() : 'FFFFFF';\n    this.address = Buffer.from(this.addressPrefix + ('0' + this.settings['senderId'].value.toString(16)).substr(-2), 'hex');\n    this.setOutputData(this.errorOutputIndex, null);\n    return true;\n  }\n\n  private updateInputs(data) {\n    if (this.getInputsCount() - 1 !== data.length) {\n      const inputsCount = this.getInputsCount();\n      for (let i = 1; i < inputsCount; i++) {\n        this.removeInput(i);\n      }\n\n      // this.inputsUpdated = new Array<boolean>(data.length);\n      for (let i = 0; i < data.length; i++) {\n        this.addInput(i.toString(), Type.NUMBER);\n        // this.inputsUpdated[i] = false;\n      }\n      this.updateNodeOutput();\n    }\n  }\n\n  private stringToDataTypes(str) {\n    const data = str\n      .toUpperCase()\n      .replace(/ /g, '')\n      .split(',')\n      .filter(x => x !== '');\n\n    if (data && data.length) {\n      for (let i = 0; i < data.length; i++) {\n        if (LORA_DATA_TYPE_NAMES[data[i]] === undefined) {\n          this.setOutputData(this.errorOutputIndex, 'settings parse error');\n          return undefined;\n        }\n        data[i] = LORA_DATA_TYPE_NAMES[data[i]];\n      }\n    }\n    return data;\n  }\n}\nContainer.registerNodeType('protocols/lora-raw-v2/lora-raw-points-out', LoRaRawPointsOutput);\n","var crypto = require('crypto');\nconst aesCmac = require('node-aes-cmac').aesCmac;\n\nconst IV_DEFAULT = Buffer.alloc(16, 0);\n\nexport enum LORA_RAW_ERROR {\n  LRERR_NOERR,\n  LRERR_INVALID_KEY,\n  LRERR_INVALID_IV,\n  LRERR_INVALID_PAYLOAD,\n  LRERR_INVALID_CMAC,\n};\n\n/* Encrypts a payload for the Nube iO LoRaRaw protocol\n*   AES128 with AES-CMAC\n*   Nonce must be handled externally\n*   \n*   Address - Buffer (4 bytes)\n*   payload - Buffer (any size)\n*   key     - Buffer (16 bytes)\n*   iv     - Buffer (16 bytes). All 0 as DEFAULT\n*\n* Returns array[2]\n*   - Buffer (mod16 bytes) on success or null on error\n*   - LORA_RAW_ERROR code\n*/\nexport function loraRawEncryptBuffer(address, payload, key, iv = IV_DEFAULT) {\n  if (key.length !== 16) {\n    return [null, LORA_RAW_ERROR.LRERR_INVALID_KEY];\n  }\n  if (iv.length !== 16) {\n    return [null, LORA_RAW_ERROR.LRERR_INVALID_IV];\n  }\n\n  var cipher = crypto.createCipheriv('aes-128-cbc', key, iv)\n    .setAutoPadding(false);\n\n  if (payload.length % 16) {\n    payload = Buffer.concat([payload, Buffer.alloc(16 - (payload.length % 16), 0)]);\n  }\n  payload = cipher.update(payload);\n  payload = Buffer.concat([payload, cipher.final()]);\n\n  var cmacBlock = Buffer.concat([address, payload.slice(0, 12)], 16);\n  cmacBlock = Buffer.concat([cmacBlock, payload], 16 + payload.length);\n  var cmac = aesCmac(key, cmacBlock, { returnAsBuffer: true });\n\n  payload = Buffer.concat([payload, cmac.slice(0, 4)], payload.length + 4)\n  return [payload, LORA_RAW_ERROR.LRERR_NOERR];\n}\n\n/* Decrypts payload for Nube iO LoRaRaw protocol\n*   AES128 with AES-CMAC\n*   \n*   Address - Buffer (4 bytes)\n*   payload - Buffer (mod16 bytes + 4 bytes for CMAC)\n*   key     - Buffer (16 bytes)\n*   iv     - Buffer (16 bytes). All 0 as DEFAULT\n*\n* Returns array[2]\n*   - Buffer (mod16 bytes) on success or null on error\n*   - LORA_RAW_ERROR code\n*/\nexport function loraRawDecryptBuffer(address, payload, key, iv = IV_DEFAULT) {\n  if (key.length !== 16) {\n    return [null, LORA_RAW_ERROR.LRERR_INVALID_KEY];\n  }\n  if (iv.length !== 16) {\n    return [null, LORA_RAW_ERROR.LRERR_INVALID_IV];\n  }\n\n  if (payload.length % 16 !== 4) {\n    return [null, LORA_RAW_ERROR.LRERR_INVALID_PAYLOAD];\n  }\n\n  var cmacBlock = Buffer.concat([address, payload], 16);\n  cmacBlock = Buffer.concat([cmacBlock, payload], 16 + payload.length);\n  var cmac = aesCmac(key, cmacBlock, { returnAsBuffer: true }).slice(0, 4);\n  if (!cmac.compare(payload, payload.length - 4)) {\n    return [null, LORA_RAW_ERROR.LRERR_INVALID_CMAC];\n  }\n\n  var cipher = crypto.createDecipheriv('aes-128-cbc', key, iv)\n    .setAutoPadding(false);\n\n  payload = cipher.update(payload.slice(0, payload.length - 4));\n  payload = Buffer.concat([payload, cipher.final()]);\n\n  return [payload, LORA_RAW_ERROR.LRERR_NOERR];\n}\n","module.exports = require(\"node-aes-cmac\");","import { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport TimeUtils from '../../../utils/time-utils';\n\nconst crypto = require('crypto');\n\nconst IV_DEFAULT = Buffer.alloc(16, 0);\n\ninterface LoraSensor {\n  id: string;\n  voltage: number;\n  rssi: number;\n  snr: number;\n  nodeName: string;\n  topic: {}\n  lastMessage: any\n}\ninterface AASensor extends LoraSensor {\n  pulses: number;\n  a1: number;\n  a2: number;\n  a3: number;\n}\ninterface B0Sensor extends LoraSensor {\n  temp: number;\n  pressure: number;\n  humidity: number;\n}\ninterface B1Sensor extends B0Sensor {\n  lux: number;\n}\ninterface B2Sensor extends B1Sensor {\n  movement: boolean;\n}\n\nenum SensorType {\n  Droplet = 'Droplet',\n  MicroEdge = 'MicroEdge',\n}\n\nexport class LoraSensorLegacyDecoderNode extends Node {\n  watchdogDelay = 3600000;\n  nodeID = '';\n  timeoutFunc;\n  sensorType: string;\n  keyBuffer: Buffer = null;\n\n  constructor() {\n    super();\n    this.title = `Lora Sensor Legacy Decoder (Droplet | Micro)`;\n    this.description =\n      'LEGACY DECODER. PROVIDES DECRYPTION AS NEW FIRMWARE DOESNT\\n' +\n      'This node is used to decode raw serial input messages to LORA sensor values.\\n' +\n      'It should be used in conjunction with the protocols/serial-connector node.\\n' +\n      'If a ‘nodeID’ is set, only messages from matching LORA sensors will be output.\\n' +\n      'If no ‘nodeID’ is set, all valid LORA sensor messages will be output.\\n' +\n      'Outputs that are not present in the raw serial input message will be ‘null’.\\n' +\n      '‘lowBatteryAlm’ output will be ‘true’ if the LORA sensor has a battery ‘voltage’ value less than the ‘Low battery warning voltage’ setting\\n' +\n      'otherwise it will be ‘false’.\\n' +\n      '‘watchdog’ output will be ‘true’ if there has been no valid message from the ‘nodeID’ LORA sensor for the ‘Watchdog Delay’\\n' +\n      'otherwise ‘watchdog’ output will be false.  Maximum ‘Watchdog Delay’ setting is 587 hours.\\n' +\n      'This node can be used for decoding Nube Droplet sensors, and Nube MicroEdge sensors.\\n' +\n      'The sensor type can be selected from settings.';\n\n    this.settings['sensorType'] = NodeSetting.create({\n      description: 'LORA Sensor Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: SensorType.Droplet, text: SensorType.Droplet },\n          { value: SensorType.MicroEdge, text: SensorType.MicroEdge },\n        ],\n      },\n      value: 'Droplet',\n    });\n    this.settings['keyHex'] = NodeSetting.create({\n      description: 'Decryption Key (HEX)',\n      value: '',\n      type: SettingType.STRING,\n    });\n    this.addInput('rawInput', Type.STRING);\n    this.addInputWithSettings('nodeID', Type.STRING, '', 'NodeID');\n    this.addInputWithSettings('topic', Type.STRING, '', 'Set topic for use elsewhere in wires');\n    this.addOutput('json', Type.STRING);\n    this.addOutput('id', Type.STRING);\n    this.addOutput('voltage', Type.NUMBER);\n    this.addOutput('rssi', Type.NUMBER);\n    this.addOutput('lowBatteryAlm', Type.BOOLEAN);\n    this.addOutput('watchdog', Type.BOOLEAN);\n    this.addOutput('temperature', Type.NUMBER);\n    this.addOutput('humidity', Type.NUMBER);\n    this.addOutput('lux', Type.NUMBER);\n    this.addOutput('pressure', Type.NUMBER);\n    this.addOutput('movement', Type.BOOLEAN);\n    this.settings['microEdgeA1'] = NodeSetting.create({\n      description: 'MicroEdge a1 Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: '10k', text: '10k Thermistor' },\n          { value: '10vdc', text: '0-10vdc' },\n          { value: 'digital', text: 'Digital' },\n        ],\n      },\n      value: '10vdc',\n    });\n    this.settings['microEdgeA2'] = NodeSetting.create({\n      description: 'MicroEdge a2 Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: '10k', text: '10k Thermistor' },\n          { value: '10vdc', text: '0-10vdc' },\n          { value: 'digital', text: 'Digital' },\n        ],\n      },\n      value: '10vdc',\n    });\n    this.settings['microEdgeA3'] = NodeSetting.create({\n      description: 'MicroEdge a3 Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: '10k', text: '10k Thermistor' },\n          { value: '10vdc', text: '0-10vdc' },\n          { value: 'digital', text: 'Digital' },\n        ],\n      },\n      value: '10vdc',\n    });\n    this.settings['battery-warn'] = NodeSetting.create({\n      description: 'Low battery warning voltage',\n      value: 3.5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['watchdog'] = NodeSetting.create({\n      description: 'Watchdog (No message warning) Delay',\n      value: 60,\n      type: SettingType.NUMBER,\n    });\n    this.settings['time'] = NodeSetting.create({\n      description: 'Time',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'minutes',\n    });\n    this.setSettingsConfig({\n      groups: [{ time: {}, watchdog: { weight: 2 } }],\n      conditions: {\n        microEdgeA1: setting => {\n          return setting['sensorType'].value === SensorType.MicroEdge;\n        },\n        microEdgeA2: setting => {\n          return setting['sensorType'].value === SensorType.MicroEdge;\n        },\n        microEdgeA3: setting => {\n          return setting['sensorType'].value === SensorType.MicroEdge;\n        },\n      },\n    });\n  }\n\n  onAdded() {\n    this.sensorType = this.settings['sensorType'].value;\n    let keyHex = this.settings['keyHex'].value;\n    this.keyBuffer = keyHex && keyHex.length === 32 ? Buffer.from(keyHex, 'hex') : null;\n    if (this.sensorType === SensorType.MicroEdge) {\n      /**\n       * Issue: #552\n       * On frontend side:\n       * Removing this one here, because constructor() and onAdded() function gets called while doing each refresh\n       * And always 'movement' slot (slot number: 10) gets displayed even when it shouldn't\n       * It's because when sensorType === 'MicroEdge', we are replacing slots 6-9 with new one and leaving 0-5 as is,\n       * But we are doing nothing for node 10, so on it displays on frontend side even it doesn't have real value on backend\n       */\n      this.removeOutput(10);\n    }\n    this.clearOutputs();\n    this.updateTitle();\n  }\n\n  onInputUpdated() {\n\n    const sensorType = this.settings['sensorType'].value;\n    let nodeID = this.getInputData(1).toUpperCase() || '';\n    if (nodeID != this.nodeID) {\n      this.nodeID = nodeID;\n      this.updateTitle(); // Update title is also related with nodeID update so\n      this.broadcastTitleToClients();\n      this.clearOutputs();\n      this.resetWatchdog();\n    }\n\n    if (this.keyBuffer === null) {\n      return;\n    }\n    let data: string = this.getInputData(0) || '';\n    if (!data) return;\n    else if (data.length % 2 === 1 && (data[data.length - 1] === '\\r' || data[data.length - 1] === '\\n')) {\n      data = data.substring(0, data.length - 1);\n    } else if (data.substring(data.length - 2, data.length) === '\\r\\n') {\n      data = data.substring(0, data.length - 2);\n    }\n    if (data.length !== 36 && data.length !== 44) {\n      return;\n    }\n    // Added decryption\n    let buffer = Buffer.from(data.substr(0, 32), 'hex');\n    var decipher = crypto.createDecipheriv('aes-128-cbc', this.keyBuffer, IV_DEFAULT)\n      .setAutoPadding(false);\n    buffer = decipher.update(buffer);\n    data = buffer.toString('hex').toUpperCase() + data.substring(32);\n\n    if (\n      data.length !== 36 &&\n      data.length !== 44 &&\n      data.substring(2, 4) !== 'AA' &&\n      data.substring(2, 4) !== 'B0' &&\n      data.substring(2, 4) !== 'B1' &&\n      data.substring(2, 4) !== 'B2'\n    ) {\n      return;\n    }\n\n    if (nodeID == data.substring(0, 8) || nodeID == '') {\n      if (\n        sensorType === SensorType.MicroEdge &&\n        data.substring(2, 4) === 'AA' &&\n        (data.length === 44 || data.length === 36)\n      ) {\n        if (this.inputs[0].updated) this.resetWatchdog();\n        this.writeOutputs(this.microEdgeDecode(data));\n      } else if (\n        sensorType === SensorType.Droplet &&\n        data.substring(2, 3) === 'B' &&\n        (data.length === 44 || data.length === 36)\n      ) {\n        if (this.inputs[0].updated) this.resetWatchdog();\n        this.writeOutputs(this.dropletDecode(data));\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    let keyHex = this.settings['keyHex'].value;\n    this.keyBuffer = keyHex && keyHex.length === 32 ? Buffer.from(keyHex, 'hex') : null;\n    let watchdogTime = this.settings['watchdog'].value;\n    watchdogTime = TimeUtils.timeConvert(watchdogTime, this.settings['time'].value);\n    if (this.watchdogDelay != watchdogTime) {\n      this.resetWatchdog();\n    }\n    this.setOutputs();\n    this.updateNodeOutput();\n    this.onInputUpdated();\n  }\n\n  private writeOutputs(output: LoraSensor) {\n    switch (this.settings['sensorType'].value) {\n      case SensorType.Droplet:\n        this.setOutputData(0, JSON.stringify(output));\n        this.setOutputData(1, output['id'] == null ? null : output['id']);\n        this.setOutputData(2, output['voltage'] == null ? null : output['voltage']);\n        this.setOutputData(3, output['rssi'] == null ? null : output['rssi']);\n        this.setOutputData(4, output['voltage'] < this.settings['battery-warn'].value);\n        this.setOutputData(6, output['temp'] == null ? null : output['temp']);\n        this.setOutputData(7, output['humidity'] == null ? null : output['humidity']);\n        this.setOutputData(8, output['lux'] == null ? null : output['lux']);\n        this.setOutputData(9, output['pressure'] == null ? null : output['pressure']);\n        this.setOutputData(10, output['movement'] == null ? null : output['movement']);\n        break;\n\n      case SensorType.MicroEdge:\n        this.setOutputData(0, JSON.stringify(output));\n        this.setOutputData(1, output['id'] == null ? null : output['id']);\n        this.setOutputData(2, output['voltage'] == null ? null : output['voltage']);\n        this.setOutputData(3, output['rssi'] == null ? null : output['rssi']);\n        this.setOutputData(4, output['voltage'] < this.settings['battery-warn'].value);\n        this.setOutputData(6, output['pulses'] == null ? null : output['pulses']);\n        const microEdgeOutputs = this.MicroEdgeAnalogs([output['a1'], output['a2'], output['a3']]);\n        this.setOutputData(7, microEdgeOutputs[0] == null ? null : microEdgeOutputs[0]);\n        this.setOutputData(8, microEdgeOutputs[1] == null ? null : microEdgeOutputs[1]);\n        this.setOutputData(9, microEdgeOutputs[2] == null ? null : microEdgeOutputs[2]);\n        break;\n    }\n  }\n\n  private MicroEdgeAnalogs(analogInputs) {\n    let output = [];\n    for (var i = 0; i < 3; i++) {\n      if (typeof analogInputs[i] == 'number') {\n        switch (this.settings[`microEdgeA${i + 1}`].value) {\n          case '10k':\n            const Vref = 3.34;\n            const V = (analogInputs[i] / 1024) * Vref;\n            const R0 = 10000;\n            const R = (R0 * V) / (Vref - V);\n            const T0 = 273 + 25;\n            const B = 3850;\n            const T = 1 / (1 / T0 + (1 / B) * Math.log(R / R0));\n            const temp = T - 273.15;\n            output.push(Math.round(temp * 100) / 100);\n            break;\n\n          case '10vdc':\n            output.push((analogInputs[i] / 1024) * 10);\n            break;\n\n          case 'digital':\n            if (analogInputs[i] === undefined || analogInputs[i] >= 1000) {\n              output.push(false);\n            } else {\n              output.push(true);\n            }\n            break;\n        }\n      } else output.push(null);\n    }\n    return output;\n  }\n\n  lastMessageTimeStamp() {\n    return new Date()\n  }\n\n  microEdgeDecode(data: string): AASensor {\n    const topic = this.getInputData(2)\n    const topicsBuilder = {\n      id: topic + \"/id\",\n      pulses: topic + \"/pulses\",\n      voltage: topic + \"/voltage\",\n      a1: topic + \"/a1\",\n      a2: topic + \"/a2\",\n      a3: topic + \"/a3\",\n      rssi: topic + \"/rssi\",\n      snr: topic + \"/snr\"\n    }\n    let lastMessage = null;\n    lastMessage = this.lastMessageTimeStamp()\n    return {\n      id: data.substring(0, 8),\n      pulses: parseInt(data.substring(8, 16), 16),\n      voltage: parseInt(data.substring(16, 18), 16) / 50,\n      a1: parseInt(data.substring(18, 22), 16),\n      a2: parseInt(data.substring(22, 26), 16),\n      a3: parseInt(data.substring(26, 30), 16),\n      rssi: Buffer.from(data.substring(data.length - 4, data.length - 2), 'hex').readInt8(0),\n      // rssi: (parseInt(data.substring(data.length - 4, data.length - 2), 16) & 127) * -1,\n      snr: parseInt(data.substring(data.length - 2, data.length), 16) / 10,\n      nodeName: this.name,\n      topic: topicsBuilder,\n      lastMessage: lastMessage\n    };\n  }\n\n  dropletDecode(data: string): B0Sensor {\n    const topic = this.getInputData(2)\n    const topicsBuilder = {\n      id: topic + \"/id\",\n      temp: topic + \"/temp\",\n      pressure: topic + \"/pressure\",\n      humidity: topic + \"/humidity\",\n      lux: topic + \"/lux\",\n      movement: topic + \"/movement\",\n      voltage: topic + \"/voltage\",\n      rssi: topic + \"/rssi\",\n      snr: topic + \"/snr\"\n    }\n    let lastMessage = null;\n    lastMessage = this.lastMessageTimeStamp()\n\n    let output: B0Sensor = {\n      id: data.substring(0, 8),\n      temp: parseInt(data.substring(10, 12) + data.substring(8, 10), 16) / 100,\n      pressure: parseInt(data.substring(14, 16) + data.substring(12, 14), 16) / 10,\n      humidity: parseInt(data.substring(16, 18), 16) % 128,\n      voltage: parseInt(data.substring(22, 24), 16) / 50,\n      rssi: Buffer.from(data.substring(data.length - 4, data.length - 2), 'hex').readInt8(0),\n      // rssi: (parseInt(data.substring(data.length - 4, data.length - 2), 16) & 127) * -1,\n      snr: parseInt(data.substring(data.length - 2, data.length), 16) / 10,\n      nodeName: this.name,\n      topic: topicsBuilder,\n      lastMessage: lastMessage\n    };\n    if (data.substring(2, 4) === 'B1' || data.substring(2, 4) === 'B2') {\n      const b1Sensor: B1Sensor = output as B1Sensor;\n      b1Sensor.lux = parseInt(data.substring(20, 22) + data.substring(18, 20), 16);\n      output = b1Sensor;\n      if (data.substring(2, 4) == 'B2') {\n        const b2_sensor: B2Sensor = b1Sensor as B2Sensor;\n        b2_sensor.movement = parseInt(data.substring(16, 18), 16) > 127;\n        output = b2_sensor;\n      }\n    }\n    return output;\n  }\n\n  resetWatchdog() {\n    this.setOutputData(5, false, true);\n    clearInterval(this.timeoutFunc);\n    let watchdogTime = this.settings['watchdog'].value;\n    watchdogTime = TimeUtils.timeConvert(watchdogTime, this.settings['time'].value);\n    this.watchdogDelay = watchdogTime;\n    this.timeoutFunc = setTimeout(() => {\n      this.setOutputData(5, true, true);\n    }, watchdogTime);\n  }\n\n  setOutputs() {\n    const currentSensorType = this.settings['sensorType'].value;\n    if (this.sensorType != currentSensorType) {\n      switch (currentSensorType) {\n        case SensorType.Droplet:\n          this.removeOutput(6);\n          this.removeOutput(7);\n          this.removeOutput(8);\n          this.removeOutput(9);\n          if (this.outputs[10]) this.removeOutput(10);\n          this.addOutput('temperature', Type.NUMBER);\n          this.addOutput('humidity', Type.NUMBER);\n          this.addOutput('lux', Type.NUMBER);\n          this.addOutput('pressure', Type.NUMBER);\n          this.addOutput('movement', Type.BOOLEAN);\n          this.clearOutputs();\n          break;\n\n        case SensorType.MicroEdge:\n          this.removeOutput(6);\n          this.removeOutput(7);\n          this.removeOutput(8);\n          this.removeOutput(9);\n          this.removeOutput(10);\n          if (this.outputs[11]) this.removeOutput(11);\n          this.addOutput('pulses', Type.NUMBER);\n          this.addOutput('a1', Type.NUMBER);\n          this.addOutput('a2', Type.NUMBER);\n          this.addOutput('a3', Type.NUMBER);\n          this.clearOutputs();\n          break;\n      }\n    }\n    if (currentSensorType == SensorType.MicroEdge) {\n      this.outputs[7].name = `a1 (${this.settings['microEdgeA1'].value})`;\n      this.outputs[8].name = `a2 (${this.settings['microEdgeA2'].value})`;\n      this.outputs[9].name = `a3 (${this.settings['microEdgeA3'].value})`;\n    }\n    this.sensorType = currentSensorType;\n    this.updateTitle();\n  }\n\n  updateTitle() {\n    if (this.nodeID) this.title = `Lora Sensor Decoder (${this.sensorType} | ${this.nodeID})`;\n    else this.title = `Lora Sensor Decoder (${this.sensorType} | ALL)`;\n  }\n\n  clearOutputs() {\n    this.setOutputData(0, null);\n    this.setOutputData(1, null);\n    this.setOutputData(2, null);\n    this.setOutputData(3, null);\n    this.setOutputData(4, null);\n    this.setOutputData(5, null);\n    this.setOutputData(6, null);\n    this.setOutputData(7, null);\n    this.setOutputData(8, null);\n    this.setOutputData(9, null);\n    if (this.settings['sensorType'].value === SensorType.Droplet) this.setOutputData(10, null);\n  }\n}\nContainer.registerNodeType('protocols/lora-raw-v2/lora-raw-sensor-decoder-legacy', LoraSensorLegacyDecoderNode);\n","import { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport { NODE_INFO } from '../../../node-info';\n\nlet ModbusRTU = require('modbus-serial');\n\n// guide and code for converting modbus data types\n//https://github.com/ioBroker/ioBroker.modbus\n\nclass ModbusServerNode extends Node {\n  tcpServer = null;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/modbus\"][\"modbus-server\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO[\"protocols/modbus\"][\"modbus-server\"].description + `\\n ` +\n      `   \\n ` +\n      `## Point Address\\n ` +\n      `   \\n ` +\n      `### Coils\\n ` +\n      `   \\n ` +\n      ` Valid Coil range is between 0 and 10001. This will allow any modbus client to read and write to those coli ranges\\n ` +\n      `   \\n ` +\n      `### Holding Register\\n ` +\n      `   \\n ` +\n      ` Valid Holding Register range is between 10001 and 19999. This will allow any modbus client to read and write to those coli ranges\\n ` +\n      `   \\n ` +\n      `### Enable\\n ` +\n      `   \\n ` +\n      ` This will enable/disable the modbus server \\n ` +\n      `   \\n ` +\n      `### Port\\n ` +\n      `   \\n ` +\n      ` This is the setting that the modbus server will listen on \\n ` +\n      `   \\n ` +\n      `### Modbus address\\n ` +\n      `   \\n ` +\n      ` This will set the modbus server modbus address (valid range between 0 and 255) \\n ` +\n      `   \\n `;\n    this.addInput('connect', Type.BOOLEAN);\n    this.addOutput('status', Type.BOOLEAN);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('message', Type.STRING);\n    this.settings['serverEnable'] = NodeSetting.create({\n      description: 'Server enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['port'] = NodeSetting.create({ description: 'port', value: 8502, type: SettingType.NUMBER });\n    this.settings['address'] = NodeSetting.create({\n      description: 'Modbus address',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n  }\n\n  onAdded() {\n    this.createModbusServer();\n  }\n\n  onInputUpdated() {\n    this.createModbusServer();\n  }\n\n  onAfterSettingsChange() {\n    this.createModbusServer();\n  }\n\n  onRemoved() {\n    this.closeTcpServer();\n  }\n\n  private createModbusServer() {\n    if (this.side !== Side.server) return; // only execute on server\n    this.closeTcpServer();\n    this.emitResult(false, false, 'close connection');\n\n    if (this.settings['serverEnable'].value) {\n      // set the server to answer for modbus requests\n      const coils = Buffer.alloc(160008, 0); // coils and discrete inputs\n      const registers = Buffer.alloc(160008, 0); // input and holding registers\n\n      let unitId = this.settings['address'].value;\n      unitId = parseInt(unitId);\n      const minAddress = 0;\n      const maxInputAddress = 10001;\n      const maxAddress = 20001;\n      const bufferFactor = 8;\n\n      // 1...10000*      address - 1      Coils (outputs)    0   Read/Write\n      // 10001...20000*  address - 10001  Discrete Inputs    01  Read\n      // 30001...40000*  address - 30001  Input Registers    04  Read\n      // 40001...50000*  address - 40001  Holding Registers  03  Read/Write\n\n      const vector = {\n        getCoil: function(addr, unitID) {\n          if (unitID === unitId && addr >= minAddress && addr < maxAddress) {\n            // console.log('get coils', coils.readUInt8(addr * bufferFactor));\n            return coils.readUInt8(addr * bufferFactor);\n          }\n        },\n        getInputRegister: function(addr, unitID) {\n          if (unitID === unitId && addr >= minAddress && addr < maxInputAddress) {\n            // 0 to 10001\n            // console.log('get getInputRegister', registers.readUInt16BE(addr * bufferFactor));\n            return registers.readUInt16BE(addr * bufferFactor);\n          }\n        },\n        getHoldingRegister: function(addr, unitID) {\n          if (unitID === unitId && addr >= maxInputAddress && addr < maxAddress) {\n            // 10001 to 20001\n            // console.log('get getHoldingRegister', registers.readUInt16BE(addr * bufferFactor));\n            return registers.readUInt16BE(addr * bufferFactor);\n          }\n        },\n        setCoil: function(addr, value, unitID) {\n          if (unitID === unitId && addr >= minAddress && addr < maxAddress) {\n            // console.log('set coil', addr, value, unitID);\n            coils.writeUInt8(value, addr * bufferFactor);\n          }\n        },\n        setRegister: function(addr, value, unitID) {\n          if (unitID === unitId && addr >= minAddress && addr < maxAddress) {\n            // console.log(' setRegister', addr, value, unitID);\n            registers.writeUInt16BE(value, addr * bufferFactor);\n          }\n        },\n        readDeviceIdentification: function(unitID) {\n          return new Promise(function(resolve) {\n            setTimeout(function() {\n              resolve({\n                0x00: 'Nube-IO',\n                0x01: 'wires-server',\n                0x02: '1',\n                0x05: 'wires-server',\n              });\n            }, 10);\n          });\n        },\n      };\n\n      //make a server to test the port\n      var net = require('net');\n      var server = net.createServer();\n      let port = this.settings['port'].value;\n      let salveAddress = this.settings['address'].value;\n      //make sure port size is >= 4\n      if (port.toString().length >= 3) {\n        server.once('error', err => {\n          if (err.code === 'EADDRINUSE') {\n            this.emitResult(false, false, 'port in use');\n            server.close();\n          }\n        });\n        //check if port is in use\n        server.once('listening', () => {\n          //make a modbus server\n          this.tcpServer = new ModbusRTU.ServerTCP(vector, {\n            host: '0.0.0.0',\n            port: port,\n            debug: true,\n            unitID: parseInt(salveAddress),\n          });\n\n          this.tcpServer.on('socketError', err => {\n            this.emitResult(false, err, 'server error');\n          });\n\n          this.tcpServer.on('initialized', () => {\n            this.emitResult(true, false, 'initialized');\n          });\n          //close test port\n          server.close();\n        });\n        //check port\n        server.listen(port);\n      } else if (port.toString().length < 3) {\n        this.emitResult(null, false, 'use a port >= 3');\n      }\n    }\n  }\n\n  private closeTcpServer() {\n    this.tcpServer &&\n      this.tcpServer.close(() => {\n        this.emitResult(false, false, 'closed');\n      });\n  }\n\n  emitResult(out, err, msg) {\n    this.setOutputData(0, out);\n    this.setOutputData(1, err);\n    this.setOutputData(2, msg);\n  }\n}\nContainer.registerNodeType('protocols/modbus/modbus-server', ModbusServerNode);\n","module.exports = require(\"modbus-serial\");","module.exports = require(\"net\");","import * as mqtt from 'mqtt';\nimport config from '../../../../config';\nimport { isNull } from '../../../../utils/helper';\nimport { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport CryptoUtils from '../../../utils/crypto-utils';\nimport { MQTTMessage } from './core/mqtt-model';\n\nconst matchMQTT = require('mqtt-match');\n\n//import { themes } from 'src/client/editor/renderer-themes';\n\nclass MqttClientNode extends Node {\n  client: any;\n  topicsCount = 0;\n  messageQueue: Array<MQTTMessage> = [];\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/mqtt\"].client.title;\n    this.description = NODE_INFO[\"protocols/mqtt\"].client.description;\n\n    this.addInput('[enable]', Type.BOOLEAN);\n    this.addOutput('connected', Type.BOOLEAN);\n    this.settings['enable'] = NodeSetting.create({ description: 'Enable', value: false, type: SettingType.BOOLEAN });\n    this.settings['broker_group'] = NodeSetting.create({\n      description: 'Broker settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['broker_group'] = NodeSetting.create({\n      description: 'Broker settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['useEnv'] = NodeSetting.create({ description: 'Dont use env settings', value: false, type: SettingType.BOOLEAN });\n    this.settings['server'] = NodeSetting.create({ description: 'Broker URL', value: '0.0.0.0', type: SettingType.STRING });\n    this.settings['port'] = NodeSetting.create({ description: 'Broker port', value: '1883', type: SettingType.STRING });\n    this.settings['authentication'] = NodeSetting.create({\n      description: 'Use Authentication',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['username'] = NodeSetting.create({ description: 'User name', value: '', type: SettingType.STRING });\n    this.settings['password'] = NodeSetting.create({ description: 'Password', value: '', type: SettingType.PASSWORD });\n    this.settings['topics_group'] = NodeSetting.create({\n      description: 'Topic settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['topics_count'] = NodeSetting.create({\n      description: 'Number of Topics',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n    this.settings['decimals'] = NodeSetting.create({\n      description: 'Decimal Places (Numerics)',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: '0' },\n          { value: 1, text: '1' },\n          { value: 2, text: '2' },\n          { value: 3, text: '3' },\n          { value: 4, text: '4' },\n          { value: 5, text: '5' },\n          { value: 6, text: '6' },\n          { value: 7, text: '7' },\n          { value: 8, text: '8' },\n          { value: 9, text: '9' },\n          { value: 10, text: '10' },\n        ],\n      },\n      value: 3,\n    });\n\n    this.setSettingsConfig({\n      groups: [\n        { server: { weight: 3 }, port: { weight: 1 } },\n        { useEnv: {}, authentication: {} },\n        { username: {}, password: {} },\n        { topics_count: {}, decimals: {} },\n      ],\n      conditions: {\n        server: setting => {\n          return !!setting['useEnv'].value;\n        },\n        port: setting => {\n          return !!setting['useEnv'].value;\n        },\n        authentication: setting => {\n          return !!setting['useEnv'].value;\n        },\n        username: setting => {\n          return !!setting['authentication'].value;\n        },\n        password: setting => {\n          return !!setting['authentication'].value;\n        },\n      },\n    });\n  }\n\n  init() {\n    this.changeTopicsCount(this.settings['topics_count'].value);\n  }\n\n  onCreated() {\n    this.renameInputsOutputs();\n  }\n\n  onAdded() {\n    this.EXECUTE_INTERVAL = 200;\n\n    this.topicsCount = this.settings['topics_count'].value;\n    if (this.side == Side.server) {\n      this.setOutputData(0, false);\n      // connect if \"connect\" input disconnected or input data==true\n      if (this.settings['enable'].value && (this.inputs[0].link == null || this.inputs[0].data == true)) {\n        this.connectToBroker();\n      }\n    }\n  }\n\n  connectToBroker() {\n    let { host, port, username, password } = config.mqtt;\n    let options: any = {};\n\n    if (this.settings['useEnv'].value) {\n      // dont use env\n      if (this.settings['server'].value != null && this.settings['server'].value != '')\n        options.host = this.settings['server'].value;\n\n      if (this.settings['port'].value != null && this.settings['port'].value != '')\n        options.port = this.settings['port'].value;\n\n      if (this.settings['username'].value != null && this.settings['username'].value != '')\n        options.username = this.settings['username'].value;\n\n      if (this.settings['password'].value != null && this.settings['password'].value != '')\n        options.password = CryptoUtils.decrypt(this.settings['password'].value);\n    } else {\n      // use use env\n      if (isNull(host)) return;\n      if (isNull(port)) return;\n      options.host = host;\n      options.port = port;\n      if (this.settings['authentication'].value === true) {\n        if (!isNull(options.username)) {\n          options.username = username;\n        }\n        if (!isNull(options.password)) {\n          options.password = CryptoUtils.decrypt(password);\n        }\n      }\n    }\n\n    this.disconnectFromBroker();\n    this.client = mqtt.connect(options);\n    this.client.on('connect', () => {\n      this.setOutputData(0, true);\n      // subscribe\n      for (let i = 1; i <= this.topicsCount; i++) {\n        let topic = this.settings['topic' + i].value;\n        if (topic && topic != '') {\n          this.client.subscribe(topic);\n        }\n      }\n    });\n\n    this.client.on('close', () => {\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, null, true);\n    });\n\n    this.client.on('error', error => {\n      this.debugWarn(error);\n    });\n\n    this.client.on('message', (topic, message) => {\n      let obj: MQTTMessage = { topic: topic, message: message.toString() };\n      this.messageQueue.push(obj);\n    });\n  }\n\n  disconnectFromBroker() {\n    if (this.client) this.client.end();\n  }\n\n  onInputUpdated() {\n    // connect/disconnect\n    if (this.inputs[0].updated) {\n      if (this.inputs[0].data == false) this.disconnectFromBroker();\n      // auto connect when input disconnected\n      else if (this.settings['enable'].value && (this.inputs[0].link == null || this.inputs[0].data == true))\n        this.connectToBroker();\n    }\n\n    // publish message\n    if (this.settings['enable'].value && this.client && this.client.connected) {\n      for (let i = 1; i < this.getInputsCount(); i++) {\n        let data = this.inputs[i].data;\n        if (data && this.inputs[i].updated) {\n          let isJSON = true;\n          try {\n            data = JSON.parse(data);\n          } catch {\n            console.log('Not a valid JSON');\n            isJSON = false;\n          }\n          let topic: string;\n          let payload: string = '';\n\n          if (\n            isJSON &&\n            data.hasOwnProperty('topic') &&\n            typeof data.topic === Type.STRING &&\n            data.hasOwnProperty('payload')\n          ) {\n            payload = JSON.stringify(data.payload);\n            this.client.publish(data.topic, '' + payload);\n          } else {\n            topic = this.settings['topic' + i].value;\n            if (isJSON) payload = JSON.stringify(data);\n            else payload = String(data);\n            this.client.publish(topic, '' + payload);\n          }\n        }\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    let topics = this.settings['topics_count'].value;\n    topics = Utils.clamp(topics, 1, 100);\n    this.settings['topics_count'].value = topics;\n\n    if (this.topicsCount != topics) this.changeTopicsCount(topics);\n\n    this.renameInputsOutputs();\n\n    if (this.container.db)\n      this.container.db.updateNode(this.id, this.container.id, {\n        $set: { inputs: this.inputs, outputs: this.outputs, settings: this.settings },\n      });\n\n    if (this.side == Side.server) {\n      this.disconnectFromBroker();\n\n      if (this.settings['enable'].value) this.connectToBroker();\n    }\n  }\n\n  onRemoved() {\n    this.disconnectFromBroker();\n  }\n\n  changeTopicsCount(target_count) {\n    let diff = target_count - this.topicsCount;\n    if (diff == 0) return;\n\n    // add inputs, outputs\n    this.changeInputsCount(target_count + 1, Type.STRING);\n    this.changeOutputsCount(target_count + 1, Type.STRING);\n\n    // change settings for topics\n    if (diff > 0) {\n      for (let i = this.topicsCount + 1; i <= target_count; i++) {\n        this.settings['outputType' + i] = NodeSetting.create({\n          description: 'Output Type',\n          type: SettingType.DROPDOWN,\n          config: {\n            items: [\n              { value: false, text: 'Payload' },\n              { value: true, text: 'JSON' },\n            ],\n          },\n          value: false,\n        });\n        this.settings['topic' + i] = NodeSetting.create({\n          description: 'Topic ' + i,\n          value: '',\n          type: SettingType.STRING,\n        });\n        for (let i = this.topicsCount + 1; i <= target_count; i++) {\n          this.settingConfigs.groups.push({\n            [`outputType${i}`]: { weight: 2 },\n            [`topic${i}`]: { weight: 5 },\n          });\n        }\n      }\n    } else if (diff < 0) {\n      for (let i = this.topicsCount; i > target_count; i--) {\n        delete this.settings['topic' + i];\n        this.settingConfigs.groups.pop();\n      }\n    }\n\n    this.topicsCount = target_count;\n  }\n\n  renameInputsOutputs() {\n    for (let i = 1; i <= this.topicsCount; i++) {\n      //this.inputs[i].name = '[' + i + ']';\n      let topic = this.settings['topic' + i].value;\n      if (topic.length > 20) topic = '...' + topic.substr(topic.length - 20, 20);\n      this.inputs[i].name = '' + i + ' | ' + topic;\n      this.outputs[i].name = topic + ' | ' + i;\n    }\n\n    if (this.side == Side.editor) {\n      for (let i = 1; i <= this.topicsCount; i++) {\n        this.inputs[i].label = this.inputs[i].name;\n        this.outputs[i].label = this.outputs[i].name;\n      }\n      this.setDirtyCanvas(true, true);\n    }\n  }\n\n  // TODO: queue for each output\n  onExecute() {\n    if (this.messageQueue && this.messageQueue.length > 0) {\n      this.processQueue(this.messageQueue.shift());\n    }\n  }\n\n  setMQTTOutput(mqttMessage: MQTTMessage, outputNum: number) {\n    if (this.settings['outputType' + outputNum].value) {\n      this.setOutputData(outputNum, { topic: mqttMessage.topic, payload: mqttMessage.message }, true);\n      return;\n    } else {\n      let msgAsNum = Number(mqttMessage.message);\n      if (isNaN(msgAsNum)) {\n        this.setOutputData(outputNum, mqttMessage.message);\n        return;\n      }\n      this.setOutputData(outputNum, Utils.toFixedNumber(msgAsNum, this.settings['decimals'].value).toString(), true);\n    }\n  }\n\n  processQueue(mqttMessage: MQTTMessage) {\n    // look into using mqtt-match library. (https://www.npmjs.com/package/mqtt-match)\n    for (let outInd = 1; outInd <= this.topicsCount; outInd++) {\n      if (matchMQTT(this.settings['topic' + outInd].value, mqttMessage.topic)) this.setMQTTOutput(mqttMessage, outInd);\n    }\n  }\n}\nContainer.registerNodeType('protocols/mqtt/client', MqttClientNode);\n","import * as mqtt from 'mqtt';\nimport config from '../../../../config';\nimport { isNull } from '../../../../utils/helper';\nimport { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport CryptoUtils from '../../../utils/crypto-utils';\nimport { MQTTMessage } from './core/mqtt-model';\n\nconst matchMQTT = require('mqtt-match');\n\nclass MqttClientSingleNode extends Node {\n  client: any;\n  enableDebug: boolean;\n  //node inputs\n  inName = 0;\n  inEnable = 1;\n  inData = 2;\n  inTopic = 3;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/mqtt\"][\"client-single\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO[\"protocols/mqtt\"][\"client-single\"].description + '\\n' +\n      `   \\n ` +\n      `### Enable\\n ` +\n      `   \\n ` +\n      ` This will enable/disable the device from broker \\n ` +\n      `   \\n ` +\n      `### Use env settings\\n ` +\n      `   \\n ` +\n      ` If set to true this will allow you to use the MQTT broker details set from the .env configuration file in the device\\n ` +\n      ` If set to false this will allow you to set the MQTT broker details manually\\n ` +\n      `   \\n ` +\n      `### Node input\\n ` +\n      `   \\n ` +\n      ` The input named \"input\" can accept a json input or an mqtt payload to send when the topic is set in the node setting called \"[topic]\".\\n ` +\n      ` The input named \"input\" can accept a json payload input with the name, topic, and mqtt payload. See example below.\\n ` +\n      ` { \"payload\": 22, \"topic\": \"my topic\", \"name\": \"my node node\"}\\n ` +\n      `   \\n `;\n    this.addInput('[name]', Type.STRING);\n    this.addInputWithSettings('enable', Type.BOOLEAN, false, 'enable broker');\n    this.addInputWithSettings('input', Type.STRING, '', 'JSON input or input value');\n    this.addInputWithSettings('topic', Type.STRING, '', 'enter topic if not used from input');\n    this.addOutput('connected', Type.BOOLEAN);\n    this.addOutput('output', Type.ANY);\n    this.addOutput('output-json', Type.JSON);\n    this.settings['retain'] = NodeSetting.create({ description: 'Retain message on publish', value: true, type: SettingType.BOOLEAN });\n    this.settings['payloadJson'] = NodeSetting.create({ description: 'Send payload ', value: false, type: SettingType.BOOLEAN });\n    this.settings['enableDebug'] = NodeSetting.create({ description: 'Log debug messages (view logs in platform)', value: false, type: SettingType.BOOLEAN });\n    this.settings['qos'] = NodeSetting.create({\n      description: 'MQTT Quality Of Service (QoS)',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: -1, text: 'na' },\n          { value: 0, text: 'QoS 0' },\n          { value: 1, text: 'QoS 1' },\n          { value: 2, text: 'QoS 2' },\n        ],\n      },\n      value: 0,\n    });\n    this.settings['broker_group'] = NodeSetting.create({\n      description: 'Broker settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['useEnv'] = NodeSetting.create({ description: 'Dont use env settings', value: false, type: SettingType.BOOLEAN });\n    this.settings['server'] = NodeSetting.create({ description: 'Broker URL', value: '0.0.0.0', type: SettingType.STRING });\n    this.settings['port'] = NodeSetting.create({ description: 'Broker port', value: '1883', type: SettingType.STRING });\n    this.settings['authentication'] = NodeSetting.create({\n      description: 'Use Authentication',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['username'] = NodeSetting.create({ description: 'User name', value: '', type: SettingType.STRING });\n    this.settings['password'] = NodeSetting.create({ description: 'Password', value: '', type: SettingType.PASSWORD });\n    this.setSettingsConfig({\n      groups: [\n        { server: { weight: 3 }, port: { weight: 1 } },\n        { username: {}, password: {} },\n      ],\n      conditions: {\n        server: setting => {\n          return !!setting['useEnv'].value;\n        },\n        port: setting => {\n          return !!setting['useEnv'].value;\n        },\n        authentication: setting => {\n          return !!setting['useEnv'].value;\n        },\n        username: setting => {\n          return !!setting['authentication'].value;\n        },\n        password: setting => {\n          return !!setting['authentication'].value;\n        },\n      },\n    });\n  }\n\n  onAdded() {\n    this.EXECUTE_INTERVAL = 200;\n    if (this.side == Side.server) {\n      this.setOutputData(0, false);\n      if (this.getInputData(this.inEnable) === true) {\n        this.connectToBroker();\n        this.enableDebug = this.settings['enableDebug'].value;\n        if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: connect to Broker`);\n      }\n    }\n  }\n\n  connectToBroker() {\n    let { host, port, username, password } = config.mqtt;\n    let options: any = {};\n    const qos = this.settings['qos'].value;\n    if (qos !== -1) {\n      options.qos = qos;\n    }\n    if (this.settings['useEnv'].value) {\n      //dont use env\n      if (this.settings['server'].value != null && this.settings['server'].value != '')\n        options.host = this.settings['server'].value;\n      if (this.settings['port'].value != null && this.settings['port'].value != '')\n        options.port = this.settings['port'].value;\n      if (this.settings['username'].value != null && this.settings['username'].value != '')\n        options.username = this.settings['username'].value;\n      if (this.settings['password'].value != null && this.settings['password'].value != '')\n        options.password = CryptoUtils.decrypt(this.settings['password'].value);\n    } else {\n      //use use env\n      if (isNull(host)) return;\n      if (isNull(port)) return;\n      options.host = host;\n      options.port = port;\n      if (this.settings['authentication'].value === true) {\n        if (!isNull(options.username)) {\n          options.username = username;\n        }\n        if (!isNull(options.password)) {\n          options.password = CryptoUtils.decrypt(password);\n        }\n      }\n    }\n    this.disconnectFromBroker();\n    this.client = mqtt.connect(options);\n    this.client.on('connect', () => {\n      if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: this.client = mqtt.connect options: ${JSON.stringify(options)}`);\n      this.setOutputData(0, true);\n      let data = this.getInputData(this.inData);\n      let topic = this.getInputData(this.inTopic);\n      if (data || topic) {\n        let isJSON = true;\n        try {\n          data = JSON.parse(data);\n        } catch {\n          if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: input isn't JSON`);\n          isJSON = false;\n        }\n        if (isJSON && data.hasOwnProperty('topic') && typeof data.topic === Type.STRING) {\n          if (data.topic != '') {\n            this.client.subscribe(data.topic);\n            if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE:  subscribe on json topic ${data.topic}`);\n          }\n        } else {\n          // if no json topic use input 2 topic\n          if (data.topic != '') {\n            if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE:  subscribe on node input topic ${topic}`);\n            this.client.subscribe(topic);\n          }\n        }\n      }\n    });\n    this.client.on('close', () => {\n      this.setOutputData(0, false, true);\n    });\n\n    this.client.on('error', error => {\n      this.debugWarn(error);\n    });\n    this.client.on('message', (topic, message) => {\n      let obj: MQTTMessage = { topic: topic, message: message.toString() };\n      if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE:  this.client.on('message' ${JSON.stringify(obj)}`);\n      this.processMessage(obj);\n    });\n  }\n\n  disconnectFromBroker() {\n    if (this.client) this.client.end();\n  }\n\n  onInputUpdated() {\n    //connect/disconnect\n    if (this.inputs[this.inEnable].updated) {\n      if (this.getInputData(this.inEnable) === true) {\n        this.connectToBroker();\n        if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: connect to Broker`);\n      } else if (this.getInputData(this.inEnable) === false) {\n        this.disconnectFromBroker();\n        if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: disconnect From Broker`);\n      } else if (isNull(this.getInputData(this.inEnable))) {\n        this.onAfterSettingsChange();\n        if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: disconnect enable input from node`);\n      }\n    }\n\n    //update node name\n    if (this.inputs[this.inName].updated) {\n      let nodeName = this.getInputData(this.inName);\n      if (!isNull(nodeName)) {\n        this.name = nodeName;\n        this.broadcastNameToClients();\n      }\n    }\n\n    //update topic\n    if (this.getInputData(this.inEnable) && this.inputs[this.inTopic].updated) {\n      this.connectToBroker();\n      if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: node input topic updated`);\n    }\n\n    //publish message\n    if (this.getInputData(this.inEnable) && this.client && this.client.connected) {\n      let data = this.getInputData(this.inData);\n      if (data && this.inputs[this.inData].updated) {\n        let isJSON = true;\n        try {\n          data = JSON.parse(data);\n        } catch {\n          if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: input isn't JSON`);\n          isJSON = false;\n        }\n        let topic: string;\n        let payload: string = '';\n        if (\n          isJSON &&\n          data.hasOwnProperty('topic') &&\n          typeof data.topic === Type.STRING &&\n          data.hasOwnProperty('payload') || data.hasOwnProperty('fields')\n        ) {\n          if (data.hasOwnProperty('payload')) {\n            payload = JSON.stringify(data.payload);\n          } else if (data.hasOwnProperty('fields')) {\n            payload = JSON.stringify(data.fields.value); //influx db uses fields\n          }\n          if (data.topic == '') {\n            return;\n          }\n          this.publish(data.topic, payload)\n        } else {\n          topic = this.getInputData(this.inTopic);\n          if (isJSON) payload = JSON.stringify(data);\n          else payload = String(data);\n          if (topic == '') {\n            return;\n          }\n          this.publish(topic, payload)\n        }\n      }\n    }\n  }\n\n  publish(topic, payload) {\n    const retain = this.settings['retain'].value\n    const payloadJson = this.settings['payloadJson'].value\n    if (payloadJson) {\n      let out = JSON.stringify({ value: payload })\n      this.client.publish(topic, '' + out, { retain: retain });\n      if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: publish on input topic from json ${topic}, '' + ${out}`);\n    } else {\n      this.client.publish(topic, '' + payload, { retain: retain });\n      if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: publish on input topic from node input ${topic}, '' + ${payload}`);\n    }\n  }\n\n  onAfterSettingsChange() {\n    //update db\n    if (this.container.db)\n      this.container.db.updateNode(this.id, this.container.id, {\n        $set: { inputs: this.inputs, outputs: this.outputs, settings: this.settings },\n      });\n\n    if (this.side == Side.server) {\n      this.disconnectFromBroker();\n      if (this.getInputData(this.inEnable)) {\n        this.connectToBroker();\n        if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: connect to Broker from settings`);\n      }\n    }\n  }\n\n  onRemoved() {\n    this.disconnectFromBroker();\n  }\n\n  processMessage(mqttMessage: MQTTMessage) {\n    // look into using mqtt-match library. (https://www.npmjs.com/package/mqtt-match)\n    let topic = this.getInputData(this.inTopic);\n    if (matchMQTT(topic, mqttMessage.topic)) {\n      this.setOutputData(1, mqttMessage.message);\n      this.setOutputData(2, mqttMessage);\n    }\n  }\n}\nContainer.registerNodeType('protocols/mqtt/client-single', MqttClientSingleNode);\n","import { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { Type } from '../../../node-io';\nimport { NODE_INFO } from '../../../node-info';\n\nclass MqttTopicPartsNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/mqtt\"][\"mqtt-topic-extractor\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO[\"protocols/mqtt\"][\"mqtt-topic-extractor\"]+ `\\n `+\n      `## Settings\\n ` +\n      ` Index will let you select the part of the topic that you want to extract ***topic/abc/123*** \\n `+\n      ` For example if the ***topic*** = ***topic/abc/123***  and ***index*** = 1 the the node ***output*** will = ***abc*** \\n `+\n      `## Inputs\\n ` +\n      ` The input data must be a sting and in a topic format like ***topic/abc/123*** \\n `+\n      `## Outputs\\n ` +\n      ` ***output*** will return the ***index*** selection \\n `+\n      ` ***output-all*** (Returns an array) will return all the topic parts\\n `+\n      ` For example if the ***topic*** = ***topic/abc/123***  the  ***output-all*** will return ***[topic, abc, 123]***\\n `\n    this.addInput('input', Type.STRING);\n    this.addInputWithSettings('index', Type.NUMBER, 0, 'Index', false);\n    this.addOutput('output', Type.STRING);\n    this.addOutput('output-all', Type.JSON);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const text = this.getInputData(0);\n    const index = this.getInputData(1);\n    if (text != null && index != null) {\n      const topic = text.split('/')\n      this.setOutputData(0, topic[index], true);\n      this.setOutputData(1, topic, true);\n    } else {\n      this.setOutputData(0, null, true);\n      this.setOutputData(1, null, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType('protocols/mqtt/mqtt-topic-extractor', MqttTopicPartsNode);\n","import { Container } from '../../../container';\nimport { FlexibleNode } from '../../../flexible-node';\nimport { Type } from '../../../node-io';\nimport { NODE_INFO } from '../../../node-info';\n\nclass MQTTTopicBuilderNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.STRING;\n    super.dynamicInputsStartName = 'string';\n    this.title = NODE_INFO[\"protocols/mqtt\"][\"topic-builder\"].title;\n    //TODO Should re-update\n    this.description = NODE_INFO[\"protocols/mqtt\"][\"topic-builder\"].description; \n   \n    this.addOutput('output', Type.STRING);\n    this.setOutputData(0, null);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const inputs = this.getInputsCount();\n    let output = '';\n    for (let i = this.dynamicInputStartPosition; i < inputs; i++) {\n      const value = (this.getInputData(i) || '').toString(); // making string null i.e `''` and other `null` same\n      if (value != ''){\n        if(output != '') output = output.concat('/');\n        output = output.concat(value);\n        //if(i !== (inputs - 1)) output = output.concat('/');\n      }\n    }\n    this.setOutputData(0, output, true);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType('protocols/mqtt/topic-builder', MQTTTopicBuilderNode);\n","import { isNull } from '../../../../utils/helper';\nimport { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport SerialUtils from '../../../utils/serial-utils';\n\nconst SerialPort = require('serialport');\n\nclass SerialConnectorNode extends Node {\n  baudRates = [110, 300, 600, 1200, 2400, 4800, 9600, 14400, 19200, 38400, 57600, 115200, 128000, 256000];\n  isConnected = false;\n  port = null;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/misc\"][\"serial-connector\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO[\"protocols/misc\"][\"serial-connector\"].description + `\\n ` +\n      `   \\n ` +\n      `## Nube LoRa Raw Baud Rate\\n ` +\n      ` Default Baud Rate For Nube LoRa Raw is ***38400*** \\n `\n    this.addInput('writeValue', Type.STRING);\n    this.addInput('enable', Type.BOOLEAN);\n    this.addInput('list-ports', Type.BOOLEAN);\n    // this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addOutput('output', Type.STRING);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('status', Type.BOOLEAN);\n    this.addOutput('last-message', Type.STRING);\n    this.addOutput('active-ports', Type.BOOLEAN);\n    this.settings['manualPort'] = NodeSetting.create({\n      description: 'Enter port manually',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['port'] = NodeSetting.create({\n      description: 'Serial Port',\n      value: '/dev/ttyUSB2',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: '/dev/ttyUSB2', text: 'RS485-1 (/dev/ttyUSB2)' },\n          { value: '/dev/ttyUSB3', text: 'RS485-2 (/dev/ttyUSB3)' },\n          { value: '/dev/ttyUSB1', text: 'Xbee-1 (/dev/ttyUSB1)' },\n          { value: '/dev/ttyUSB0', text: 'Xbee-2 (/dev/ttyUSB0)' },\n          { value: '/dev/ttyAMA0', text: 'Xbee-3 (/dev/ttyAMA0)' },\n          { value: '/dev/ttyUSB4', text: 'USB Port (/dev/ttyUSB4)' },\n          { value: '/dev/ttyS1', text: 'Edge28 Expansion (/dev/ttyS1)' },\n        ],\n      },\n    });\n    this.settings['manualPortNum'] = NodeSetting.create({\n      description: 'Enter port number',\n      value: '/dev/ttyACM0',\n      type: SettingType.STRING,\n    });\n    this.settings['baudRate'] = NodeSetting.create({\n      description: 'Baud rate',\n      value: this.baudRates[6],\n      type: SettingType.DROPDOWN,\n      config: {\n        items: this.baudRates.map(baudRate => {\n          return { value: baudRate, text: baudRate };\n        }),\n      },\n    });\n    this.setOutputData(0, null);\n    this.setOutputData(1, false);\n    this.setOutputData(2, null);\n\n    this.setSettingsConfig({\n      conditions: {\n        manualPortNum: setting => {\n          return setting['manualPort'].value;\n        },\n        port: setting => {\n          return !setting['manualPort'].value;\n        },\n      },\n    });\n\n  }\n\n  onInputUpdated() {\n    if (!this.isConnected) {\n      this.connectToSerialPort();\n    } else if (this.isConnected && !this.getInputData(1)) {\n      this.isConnected = false;\n      this.clearOutputs();\n      this.closePort();\n      return;\n    }\n\n    this.writePortData(this.getInputData(0));\n\n    if (this.getInputData(2) === true) {\n      this.listPorts();\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.connectToSerialPort();\n  }\n\n  onRemoved() {\n    this.closePort();\n  }\n\n  connectToSerialPort() {\n    if (this.side !== Side.server) return;\n\n    this.clearOutputs();\n    this.closePort();\n\n    if (!this.getInputData(1)) return;\n    let portName = this.settings['port'].value;\n    const manualPort = this.settings['manualPort'].value;\n    const manualPortNum = this.settings['manualPortNum'].value;\n\n    if (manualPort) {\n      if (manualPort === isNull) {\n        portName = portName\n      } else portName = manualPortNum\n    }\n\n    let baudRate = this.settings['baudRate'].value;\n\n    if (!portName) {\n      this.debugErr('Port name is not defined!');\n      this.setOutputData(1, 'Port name is not defined!');\n      return;\n    }\n\n    this.port = new SerialPort(portName, { baudRate: baudRate, autoOpen: false });\n\n    this.port.on('open', () => {\n      this.isConnected = true;\n      this.setOutputData(2, this.isConnected);\n      this.debugInfo('Port connected');\n    });\n\n    this.port.on('error', err => {\n      this.port = null; // this.port contains a serial object but it can't close since it never been opened\n      this.isConnected = false;\n      this.setOutputData(1, err.message);\n      this.setOutputData(2, this.isConnected);\n      this.debugErr(err.message);\n    });\n\n    this.port.on('close', () => {\n      this.debugInfo(this.isConnected ? 'Port closed. Gateway disconnected.' : 'Port closed');\n      this.isConnected = false;\n      this.setOutputData(2, this.isConnected);\n    });\n\n    this.port.on('disconnect', () => {\n      this.isConnected = false;\n      this.setOutputData(2, this.isConnected);\n      this.debugInfo('Disconnected');\n    });\n\n    const Readline = SerialPort.parsers.Readline;\n    const parser = this.port.pipe(new Readline({ delimiter: '\\n' }));\n    parser.on('data', data => this.readPortData(data));\n\n    this.debugInfo('Connecting to ' + portName + ' at ' + baudRate + '...');\n    this.port.open();\n  }\n\n  private clearOutputs() {\n    this.setOutputData(0, null);\n    this.setOutputData(1, null);\n    this.setOutputData(2, false);\n  }\n\n  private listPorts() {\n    SerialUtils.listPorts()\n      .then(e => {\n        this.setOutputData(4, e);\n      })\n      .catch(err => {\n        this.setOutputData(4, err);\n      });\n  }\n\n  private closePort() {\n    if (this.port) {\n      this.port.close();\n    }\n    this.port = null;\n  }\n\n  private readPortData(data) {\n    this.setOutputData(0, data);\n    this.setOutputData(3, this.formattedExecutionTime());\n  }\n\n  private writePortData(message) {\n    if (message) {\n      //TODO: temporary fix\n      //  any byte over 128 gets message up (nodejs serialPort must use signed bytes for strings for some dumb reason...)\n      //  best solution is to be able to send an array to this (typeof [1,2,3] === 'object')\n      //  couldn't get it working for now so sending to this node as a JSON string for now\n      try {\n        message = Buffer.from(JSON.parse(message));\n      } catch (e) { }\n\n      try {\n        this.port.write(message);\n      } catch (e) {\n        this.setOutputData(1, e.message);\n      }\n    }\n  }\n}\n\nContainer.registerNodeType('protocols/misc/serial-connector', SerialConnectorNode);\n","const SerialPort = require('serialport');\n\nexport default class SerialUtils {\n  /**\n   * Get a list of active serial ports on linux\n   * @returns {object}\n   */\n\n  static listPorts() {\n    return new Promise<Array<any>>((resolve, reject) => {\n      try {\n        let portList = [];\n        SerialPort.list().then(ports => {\n          ports.forEach(port => {\n            portList.push(port);\n          });\n          resolve(portList);\n        });\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n}\n","import * as moment from 'moment-timezone';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport UuidUtils from '../../utils/uuid-utils';\n\nclass WeeklyScheduleNode extends Node {\n  daysArray = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.schedule[\"weekly-schedule\"].title;\n    this.description = NODE_INFO.schedule[\"weekly-schedule\"].description;\n\n    this.addOutput('output', Type.BOOLEAN);\n\n    this.settings['enable'] = NodeSetting.create({\n      description: 'Schedule Enable',\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.settings['stringScheduleName'] = NodeSetting.create({\n      //description: 'Schedule Name String',\n      description: 'Schedule Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n\n    this.settings['timezone'] = NodeSetting.create({\n      description: 'TIMEZONE: Enter the timezone',\n      value: moment.tz.guess(),\n      type: SettingType.STRING,\n    });\n\n    this.settings['startHour'] = NodeSetting.create({\n      description: 'Start Time',\n      value: 7,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: this.makeHoursDropdown(),\n      },\n    });\n    this.settings['startMin'] = NodeSetting.create({\n      description: '',\n      value: 0,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: this.makeMinsDropdown(),\n      },\n    });\n\n    this.settings['endHour'] = NodeSetting.create({\n      description: 'End Time',\n      value: 19,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: this.makeHoursDropdown(),\n      },\n    });\n    this.settings['endMin'] = NodeSetting.create({\n      description: '',\n      value: 0,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: this.makeMinsDropdown(),\n      },\n    });\n\n    this.settings['sunday'] = NodeSetting.create({\n      description: 'sunday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['monday'] = NodeSetting.create({\n      description: 'monday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['tuesday'] = NodeSetting.create({\n      description: 'tuesday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['wednesday'] = NodeSetting.create({\n      description: 'wednesday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['thursday'] = NodeSetting.create({\n      description: 'thursday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['friday'] = NodeSetting.create({\n      description: 'friday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['saturday'] = NodeSetting.create({\n      description: 'saturday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.settings['payload'] = NodeSetting.create({\n      description: 'Schedule Payload',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n\n    this.setSettingsConfig({\n      groups: [\n        { startHour: {}, startMin: {} },\n        { endHour: {}, endMin: {} },\n      ],\n    });\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    var scheduleOutput = { weekly: {}, events: {} };\n    if (!this.settings['enable'].value) return scheduleOutput;\n    const schedID = UuidUtils.createUUID();\n    const tzOffset = moment.tz(this.settings['timezone'].value).utcOffset();\n    const offsetHours = Math.floor(tzOffset / 60);\n    const offsetMins = tzOffset % 60;\n    var rolloverFlag = 0;\n    var startHourUTC = this.settings['startHour'].value - offsetHours;\n    if (startHourUTC < 0) {\n      rolloverFlag = -1;\n      startHourUTC = startHourUTC + 24;\n    } else if (startHourUTC > 24) {\n      rolloverFlag = 1;\n      startHourUTC = startHourUTC - 24;\n    }\n    var startMinsUTC = this.settings['startMin'].value - offsetMins;\n    if (startMinsUTC < 0) startMinsUTC = startMinsUTC + 60;\n    else if (startMinsUTC >= 60) startMinsUTC = startMinsUTC - 60;\n    var endHourUTC = this.settings['endHour'].value - offsetHours;\n    if (endHourUTC < 0) {\n      endHourUTC = endHourUTC + 24;\n    } else if (endHourUTC > 24) {\n      endHourUTC = endHourUTC - 24;\n    }\n    var endMinsUTC = this.settings['endMin'].value - offsetMins;\n    if (endMinsUTC < 0) endMinsUTC = endMinsUTC + 60;\n    else if (endMinsUTC >= 60) endMinsUTC = endMinsUTC - 60;\n\n    const sundayIndex = this.settings['sunday'].value && rolloverFlag == -1 ? 7 : 0;\n    const saturdayIndex = this.settings['saturday'].value && rolloverFlag == 1 ? -1 : 6;\n    var daysOutput = [];\n    this.settings['sunday'].value ? daysOutput.push(this.daysArray[sundayIndex + rolloverFlag]) : null;\n    this.settings['monday'].value ? daysOutput.push(this.daysArray[1 + rolloverFlag]) : null;\n    this.settings['tuesday'].value ? daysOutput.push(this.daysArray[2 + rolloverFlag]) : null;\n    this.settings['wednesday'].value ? daysOutput.push(this.daysArray[3 + rolloverFlag]) : null;\n    this.settings['thursday'].value ? daysOutput.push(this.daysArray[4 + rolloverFlag]) : null;\n    this.settings['friday'].value ? daysOutput.push(this.daysArray[5 + rolloverFlag]) : null;\n    this.settings['saturday'].value ? daysOutput.push(this.daysArray[saturdayIndex + rolloverFlag]) : null;\n\n    scheduleOutput.weekly = {\n      [schedID]: {\n        colour: '#FFFFFF',\n        name: this.settings['stringScheduleName'].value || 'unknownSchedule',\n        start: `${String(startHourUTC).padStart(2, '0')}:${String(startMinsUTC).padStart(2, '0')}`,\n        end: `${String(endHourUTC).padStart(2, '0')}:${String(endMinsUTC).padStart(2, '0')}`,\n        days: daysOutput,\n        value: this.settings['payload'].value,\n        id: schedID,\n      },\n    };\n    this.setOutputData(0, scheduleOutput);\n  }\n\n  makeHoursDropdown() {\n    var hoursArray = [];\n    for (var h = 0; h < 24; h++) {\n      hoursArray.push({ value: h, text: String(h).padStart(2, '0') });\n    }\n    return hoursArray;\n  }\n\n  makeMinsDropdown() {\n    var minsArray = [];\n    for (var m = 0; m < 60; m++) {\n      minsArray.push({ value: m, text: String(m).padStart(2, '0') });\n    }\n    return minsArray;\n  }\n}\n\nContainer.registerNodeType('schedule/weekly-schedule', WeeklyScheduleNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\n\nclass ScheduleMergeNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicSettingsExist = false;\n    this.dynamicInputsType = Type.STRING;\n    this.title = NODE_INFO.schedule[\"schedule-merge\"].title;\n    this.description = NODE_INFO.schedule[\"schedule-merge\"].description;\n\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('error', Type.STRING);\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    var weeklyOutput = {};\n    var eventOutput = {};\n    var inputString;\n    var inputObject;\n    for (var i = 0; i < this.getInputsCount(); i++) {\n      inputString = this.getInputData(i);\n      if (!inputString) continue;\n      try {\n        inputObject = JSON.parse(inputString);\n        for (var weeklySched in inputObject.weekly) {\n          weeklyOutput[weeklySched] = inputObject.weekly[weeklySched];\n        }\n        for (var eventSched in inputObject.events) {\n          weeklyOutput[eventSched] = inputObject.events[eventSched];\n        }\n        this.setOutputData(0, { weekly: weeklyOutput, events: eventOutput });\n      } catch (e) {\n        this.setOutputData(1, e);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType('schedule/schedule-merge', ScheduleMergeNode);\n","//import * as moment from 'moment';\nimport * as moment from 'moment-timezone';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { ScheduleUtils } from './schedule-utils';\n\n/**\n * ScheduleChecker checks the schedule is active or not on current time\n * This node is for checking a formatted schedule JSON: SCHEDULE_MODE.INPUT\n * https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\n */\nexport class ScheduleChecker extends Node {\n  nextStart;\n  nextStop;\n  schedulePayload;\n  constructor() {\n    super();\n    this.title = NODE_INFO.schedule[\"schedule-checker\"].title;\n    this.description = NODE_INFO.schedule[\"schedule-checker\"].description;\n\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable', false);\n    this.addInput('schedules', Type.JSON);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('payload', Type.BOOLEAN);\n    this.addOutput('nextStart', Type.STRING);\n    this.addOutput('nextStop', Type.STRING);\n    this.addOutput('lastCheck', Type.STRING);\n    this.addOutput('error', Type.STRING);\n    /*\n    this.settings['scheduleName'] = NodeSetting.create({\n      description: 'Select Schedule',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [],\n      },\n      value: '',\n    });\n    this.settings['includeStringName'] = NodeSetting.create({\n      description: \"Use 'Schedule Name String' from Below\",\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    */\n\n    this.settings['stringScheduleName'] = NodeSetting.create({\n      //description: 'Schedule Name String',\n      description: 'Schedule Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n\n    this.settings['timezone'] = NodeSetting.create({\n      description: 'TIMEZONE: Enter the timezone',\n      value: moment.tz.guess(),\n      type: SettingType.STRING,\n    });\n\n    this.settings['interval'] = NodeSetting.create({\n      description: 'Schedule Check Interval (minimum 10 seconds)',\n      value: 30,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n\n    this.settings['numericTimeFormat'] = NodeSetting.create({\n      description: 'Timestamp Output Format',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: false, text: 'Timestamps as Strings' },\n          { value: true, text: 'Timestamps as Epoch Numerics' },\n        ],\n      },\n      value: false,\n    });\n\n    this.nextStart = null;\n    this.nextStop = null;\n    this.schedulePayload = null;\n    this.EXECUTE_INTERVAL = 10000;\n  }\n\n  async onAdded() {\n    await this.updateTitle();\n    await this.onInputUpdated();\n  }\n\n  async onInputUpdated() {\n    if (this.side !== Side.server) return;\n    let input = this.getInputData(1) || { weekly: {}, events: {} };\n\n    /*  FOR USE WITH DROPDOWN SCHEDULE SELECTION\n    let weeklyInput = input['weekly'];\n    let eventsInput = input['events'];\n    console.log(weeklyInput, 'schedule weeklyInput');\n    console.log(eventsInput, 'schedule eventsInput');\n    const scheduleNameItems = [];\n    weeklyInput &&\n      Object.keys(weeklyInput).forEach(key => {\n        scheduleNameItems.push(weeklyInput[key].name);\n      });\n    eventsInput &&\n      Object.keys(eventsInput).forEach(key => {\n        if (!scheduleNameItems.includes(eventsInput[key]['name'])) {\n          scheduleNameItems.push(eventsInput[key]['name']);\n        }\n      });\n    // What if the intended schedule isn't in the current JSON when configuring? Can set a 'Schedule Name String' from settings.\n    if (\n      this.settings['includeStringName'].value &&\n      this.settings['stringScheduleName'].value != '' &&\n      !scheduleNameItems.includes(this.settings['stringScheduleName'].value)\n    ) {\n      scheduleNameItems.push(this.settings['stringScheduleName'].value);\n    }\n    console.log(scheduleNameItems, 'scheduleNameItems');\n    let settingsItems = [];\n    scheduleNameItems.forEach(scheduleName => {\n      settingsItems.push({\n        value: scheduleName,\n        text: scheduleName,\n      });\n    });\n    this.settings['scheduleName'].config.items = settingsItems;\n    this.broadcastSettingsToClients();\n    if (scheduleNameItems.length == 0) {\n      this.settings['scheduleName'].value = null;\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, null, true);\n      this.setOutputData(2, null, true);\n      this.setOutputData(3, null, true);\n      this.setOutputData(4, moment(this.executeLastTime).format('YYYY-MM-DDTHH:MM:ss'), true);\n      this.setOutputData(5, true, true);\n      console.log('Schedule Checker Error: no schedule selected');\n      return;\n    } else if (!scheduleNameItems.includes(this.settings['scheduleName'].value)) {\n      this.settings['scheduleName'].value = null;\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, null, true);\n      this.setOutputData(2, null, true);\n      this.setOutputData(3, null, true);\n      this.setOutputData(4, moment(this.executeLastTime).format('YYYY-MM-DDTHH:MM:ss'), true);\n      this.setOutputData(5, false, true);\n      return;\n    }\n    */\n\n    await this.setOutput(input);\n  }\n\n  async onExecute() {\n    await this.setOutput();\n  }\n\n  async updateTitle() {\n    if (\n      this.settings['stringScheduleName'].value != null &&\n      this.settings['stringScheduleName'].value != ''\n    ) {\n      this.title = `Schedule Checker (${this.settings['stringScheduleName'].value})`;\n    } else this.title = 'Schedule Checker (unconfigured)';\n    this.broadcastTitleToClients();\n  }\n\n  async onAfterSettingsChange() {\n    await this.updateTitle();\n    let interval = this.settings['interval'].value;\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    this.EXECUTE_INTERVAL = Math.max(interval, 10000);\n    await this.onInputUpdated();\n  }\n\n  private async setOutput(input = null) {\n    this.nextStart = null;\n    this.nextStop = null;\n    this.schedulePayload = null;\n    if (!input) input = this.getInputData(1) || { weekly: {}, events: {} };\n    //console.log('input1', input)\n\n\n    //const key = this.settings['scheduleName'].value;   FOR USE WITH DROPDOWN SCHEDULE SELECTION\n    const key = this.settings['stringScheduleName'].value;\n    //console.log('key', key)\n    if (key == null || key === '') {\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, null, true);\n      this.setOutputData(2, null, true);\n      this.setOutputData(3, null, true);\n      this.setOutputData(4, moment(this.executeLastTime).format('YYYY-MM-DDTHH:MM:ss'), true);\n      this.setOutputData(5, 'Schedule Checker Error: invalid schedule selected', true);\n      return;\n    }\n\n    //const now = moment();\n    let timeZone = this.settings['timezone'].value;\n    if (!moment.tz.zone(timeZone)) {\n      timeZone = moment.tz.guess();\n    }\n    const now = moment.tz(timeZone);\n    //console.log('now', now.format())\n    //const now = moment('2020-01-21T07:00:00.000+05:00')\n    //const now = moment.tz(\"2020-03-27T01:30\", 'Canada/Pacific');    //for testing\n    //const now = moment.tz(\"2020-03-26T12:30\", 'Australia/Sydney');  //for testing\n    //const now = moment.tz(\"2020-09-25T04:30\", timeZone);            //for testing\n    //console.log(\"now\", now.format())\n\n    const isEnabled = this.getInputData(0);\n    if (input && key && isEnabled) {\n      let weeklyOutput = false;\n      let weeklyScheduleOutput = null;\n      for (var sched in input['weekly']) {\n        if (input['weekly'][sched]['name'] === key) {\n          weeklyScheduleOutput = ScheduleUtils.checkWeeklySchedule(input['weekly'][sched], now); // returns {scheduleStatus, nextStart, nextStop value}\n          weeklyOutput = weeklyScheduleOutput.scheduleStatus || weeklyOutput;\n          this.schedulePayload = weeklyScheduleOutput.value || this.schedulePayload;\n          if (weeklyScheduleOutput.nextStop != null) {\n            if (this.nextStop == null || weeklyScheduleOutput.nextStop.isBefore(this.nextStop)) {\n              this.nextStop = weeklyScheduleOutput.nextStop;\n            }\n          }\n          if(weeklyScheduleOutput.nextStart != null){\n            if (this.nextStart == null || weeklyScheduleOutput.nextStart.isBefore(this.nextStart)) {\n              this.nextStart = weeklyScheduleOutput.nextStart;\n            }\n          }\n        }\n      }\n\n      let eventsOutput = false;\n      let eventScheduleOutput = null;\n      for (var sched in input['events']) {\n        if (input['events'][sched]['name'] === key) {\n          eventScheduleOutput = ScheduleUtils.checkEventsSchedule(input['events'][sched], now); // returns {scheduleStatus, nextStart, nextStop, value}\n          eventsOutput = eventScheduleOutput.scheduleStatus || eventsOutput;\n          this.schedulePayload = eventScheduleOutput.value || this.schedulePayload;\n          if (eventScheduleOutput.nextStop != null) {\n            if (eventScheduleOutput.nextStop.isBefore(this.nextStop) || this.nextStop == null)\n              this.nextStop = eventScheduleOutput.nextStop;\n          }\n          if (eventScheduleOutput.nextStart != null) {\n            if (eventScheduleOutput.nextStart.isBefore(this.nextStart) || this.nextStart == null)\n              this.nextStart = eventScheduleOutput.nextStart;\n          }\n        }\n      }\n      const output = weeklyOutput || eventsOutput;\n\n      this.setOutputData(0, output, true);\n      this.setOutputData(1, this.schedulePayload, true);\n      if (this.nextStart != null) {\n        if (!this.settings['numericTimeFormat'].value)\n          this.setOutputData(2, this.nextStart.tz(timeZone).format(), true);\n        else this.setOutputData(2, this.nextStart.valueOf(), true);\n      } else this.setOutputData(2, null, true);\n\n      if (this.nextStop != null) {\n        if (!this.settings['numericTimeFormat'].value)\n          this.setOutputData(3, this.nextStop.tz(timeZone).format(), true);\n        else this.setOutputData(3, this.nextStop.valueOf(), true);\n      } else this.setOutputData(3, null, true);\n    } else {\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, null, true);\n      this.setOutputData(2, null, true);\n      this.setOutputData(3, null, true);\n    }\n    if (!this.settings['numericTimeFormat'].value) {\n      this.setOutputData(\n        4,\n        moment(this.executeLastTime)\n          .tz(timeZone)\n          .format(),\n      );\n    } else this.setOutputData(4, moment(this.executeLastTime).valueOf());\n    this.setOutputData(5, false);\n  }\n}\nContainer.registerNodeType('schedule/schedule-checker', ScheduleChecker);\n","import * as moment from 'moment-timezone';\nimport Utils from '../../utils';\n\nexport class ScheduleUtils {\n  /**\n   * @param eventSchedule\n   * @param dt: {moment} datetime which is to be compared\n   */\n  static checkEventsSchedule(eventSchedule, dt: moment) {\n    if (eventSchedule && Object.prototype.hasOwnProperty.call(eventSchedule, 'dates')) {\n      let eventOutput = false;\n      let nextOn = null;\n      let nextOff = null;\n      let scheduleValue = null;\n      for (let i = 0; i < eventSchedule.dates.length; i++) {\n        const dtUTC = dt.clone().tz('Etc/UTC'); // remove this line and replace dtUTC with dt once testing is complete\n        const startMoment = moment.tz(eventSchedule.dates[i].start, 'Etc/UTC');\n        const endMoment = moment.tz(eventSchedule.dates[i].end, 'Etc/UTC');\n        //console.log('dtUTC', dtUTC.format('YYYY-MM-DDTHH:MM:ss'));\n        //console.log('startMoment', startMoment.format('YYYY-MM-DDTHH:MM:ss'));\n        //console.log('endMoment', endMoment.format('YYYY-MM-DDTHH:MM:ss'));\n        if (dtUTC.isAfter(startMoment) && dtUTC.isBefore(endMoment)) {\n          //return [true, null, endMoment];\n          eventOutput = true;\n          if (eventSchedule && Object.prototype.hasOwnProperty.call(eventSchedule, 'value'))\n            scheduleValue = eventSchedule.value;\n          if (nextOff == null || endMoment.isBefore(nextOff)) {\n            nextOff = endMoment;\n          }\n        } else if (dtUTC.isBefore(startMoment) && dtUTC.isBefore(endMoment)) {\n          //return [false, startMoment, endMoment];\n          if (nextOn == null || startMoment.isBefore(nextOn)) {\n            nextOn = startMoment;\n          }\n          if (nextOff == null || endMoment.isBefore(nextOff)) {\n            nextOff = endMoment;\n          }\n        }\n      }\n      //return [eventOutput, nextOn, nextOff];\n      return {\n        scheduleStatus: eventOutput,\n        nextStart: nextOn,\n        nextStop: nextOff,\n        value: scheduleValue,\n      };\n    }\n    //return [false, null, null];\n    return { scheduleStatus: false, nextStart: null, nextStop: null, value: null };\n  }\n\n  /**\n   * @param weeklySchedule\n   * @param dt: {moment} datetime which is to be compared\n   */\n  static checkWeeklySchedule(weeklySchedule, dt: moment) {\n    let weeklyOutput = false;\n    let nextOn = null;\n    let nextOff = null;\n    let scheduleValue = null;\n\n    if (weeklySchedule) {\n      //console.log(dt)\n      //console.log('dt', dt.format());\n      const dtUTC = dt.clone().tz('Etc/UTC'); // remove this line and replace dtUTC with dt once testing is complete\n      //console.log(\"dtUTC\", dtUTC.format());\n      //console.log(\"dtUTCday\", dtUTC.isoWeekday());\n      //console.log(\"weeklySchedule.days\", weeklySchedule.days);\n      let daysArray = weeklySchedule.days.map(day => {\n        return Utils.getISOday(day);\n      });\n      //console.log(\"daysArray\", daysArray);\n\n      let startArray = weeklySchedule.start.split(':').map(part => {\n        return Number(part);\n      }); // make the start string into an array of numbers [hour,min]\n      let endArray = weeklySchedule.end.split(':').map(part => {\n        return Number(part);\n      }); // make the end string into an array of numbers [hour,min]\n\n      let rolloverFlag = 0;\n      if (startArray[0] > endArray[0]) {\n        // schedule period runs into next day on UTC\n        rolloverFlag = 1;\n      }\n      //console.log('rolloverFlag', rolloverFlag)\n\n      const date = dtUTC.format('YYYY-MM-DD'); //current date in local (tz) time.\n      //console.log('date', date);\n\n      let startMomentArray = daysArray.map(day => {\n        return moment.tz(`${date}T${weeklySchedule.start}:00.000Z`, 'Etc/UTC').isoWeekday(day);\n      });\n      //console.log(\"startMomentArray\", startMomentArray.map((day)=>{return day.format()}));\n\n      let endMomentArray = daysArray.map(day => {\n        return moment\n          .tz(`${date}T${weeklySchedule.end}:00.000Z`, 'Etc/UTC')\n          .isoWeekday(day + rolloverFlag);\n      });\n      //console.log(\"endMomentArray\", endMomentArray.map((day)=>{return day.format()}));\n\n      // check if any of the end moments are more than a week past current moment.\n      // This is for the edge case where there is a sunday that rolls over into a monday.\n      //if (rolloverFlag && endMomentArray.some((end)=>{return dtUTC.add(1, 'week').isBefore(end)})){\n      if (rolloverFlag) {\n        for (let i = 0; i < endMomentArray.length; i++) {\n          if (\n            dtUTC\n              .clone()\n              .add(1, 'weeks')\n              .isBefore(endMomentArray[i])\n          ) {\n            //endMomentArray[i] = endMomentArray[i].subtract(1, 'weeks');\n            endMomentArray[i].subtract(1, 'weeks');\n            //startMomentArray[i] = startMomentArray[i].subtract(1, 'weeks');\n            startMomentArray[i].subtract(1, 'weeks');\n            //console.log(\"Sunday->Monday Rollover Edge Case\")\n            //console.log(\"startMomentArray\", startMomentArray.map((day)=>{return day.format()}));\n            //console.log(\"endMomentArray\", endMomentArray.map((day)=>{return day.format()}));\n            break;\n          }\n        }\n      }\n\n      // check if all of the start and end moments are before the current moment\n      if (\n        startMomentArray.every(start => {\n          return start.isBefore(dtUTC);\n        }) &&\n        endMomentArray.every(end => {\n          return end.isBefore(dtUTC);\n        })\n      ) {\n        // if so then add a week to all start and end moments\n        //startMomentArray = startMomentArray.map((start)=>{return start.add(1, 'weeks')});\n        startMomentArray.map(start => {\n          return start.add(1, 'weeks');\n        });\n        //endMomentArray = endMomentArray.map((end)=>{return end.add(1, 'weeks')});\n        endMomentArray.map(end => {\n          return end.add(1, 'weeks');\n        });\n        //console.log(\"Added a week to all START and END moments\")\n        //console.log(\"startMomentArray\", startMomentArray.map((day)=>{return day.format()}));\n        //console.log(\"endMomentArray\", endMomentArray.map((day)=>{return day.format()}));\n      }\n      // check if all of the start moments are before the current moment.\n      // This means that the last schedule period is active. There will only be one End time after the last start time.\n      else if (\n        startMomentArray.every(start => {\n          return start.isBefore(dtUTC);\n        })\n      ) {\n        for (let j = 0; j < endMomentArray.length; j++) {\n          if (endMomentArray[j].isBefore(dtUTC)) {\n            endMomentArray[j].add(1, 'weeks');\n            startMomentArray[j].add(1, 'weeks');\n          }\n        }\n      }\n\n      // search the Start and End moments for active schedules, and get nextOn and nextOff times.\n      for (let x = 0; x < startMomentArray.length; x++) {\n        //console.log(\"dtUTC\", dtUTC.format())\n        //console.log(\"startMomentArray[x]\", startMomentArray[x].format())\n        //console.log(\"endMomentArray[x]\", endMomentArray[x].format())\n        if (startMomentArray[x].isBefore(dtUTC) && endMomentArray[x].isAfter(dtUTC)) {\n          weeklyOutput = true;\n          if (weeklySchedule && Object.prototype.hasOwnProperty.call(weeklySchedule, 'value'))\n            scheduleValue = weeklySchedule.value;\n          nextOff = endMomentArray[x];\n          nextOn = startMomentArray[x].add(1, 'weeks');\n        } else if (\n          startMomentArray[x].isAfter(dtUTC) &&\n          (nextOn == null || startMomentArray[x].isBefore(nextOn))\n        ) {\n          nextOn = startMomentArray[x];\n        }\n        if (\n          endMomentArray[x].isAfter(dtUTC) &&\n          (nextOff == null || endMomentArray[x].isBefore(nextOff))\n        ) {\n          nextOff = endMomentArray[x];\n        }\n      }\n      //console.log(\"weeklyOutput\", weeklyOutput)\n      //console.log(\"nextOn\", nextOn.format())\n      //console.log(\"nextOff\", nextOff.format())\n    }\n    //return [weeklyOutput, nextOn, nextOff];\n    return {\n      scheduleStatus: weeklyOutput,\n      nextStart: nextOn,\n      nextStop: nextOff,\n      value: scheduleValue,\n    };\n  }\n}\n\n/*\n * @param weeklySchedule\n * @param dt: {moment} datetime which is to be compared\n */\n/*\n/*\n  static checkWeeklySchedule(weeklySchedule, dt:moment): boolean {\n    // Helper function that shifts the schedule days (weeklySchedule.days): shiftDaysArray(['monday', 'tuesday'], 1) => ['tuesday', 'wednesday']\n    function shiftDaysArray(daysArray:string[], shiftNumber:number) {\n       return daysArray.map((string) => {\n        return moment().day(string).add(shiftNumber,'days').format('dddd').toLowerCase();\n      });\n    }\n    if (weeklySchedule) {\n      //console.log(dt)\n      let tzOffset:number = null;\n      if(dt.hasOwnProperty('_offset')) tzOffset = dt._offset;\n      else tzOffset = 0;\n      const tzOffsetHours = Math.floor(tzOffset/60);\n      const tzOffsetMins = (tzOffset % 60) * Math.sign(tzOffsetHours);\n      let tzone = null;\n      if(dt.hasOwnProperty('_z')){\n        if(dt._z != null){\n          if(dt._z.hasOwnProperty('name')) tzone = dt._z.name;\n        }\n      }\n      if(tzone == null) tzone = 'Etc/UTC';\n      //console.log('tzone', tzone)\n      let daysArray = weeklySchedule.days.map(day => day.toLowerCase());\n      //console.log(\"daysArray1\", daysArray)\n      let startArray = weeklySchedule.start.split(':').map((part)=>{return Number(part)});  // make the start string into an array of numbers [hour,min]\n      let endArray = weeklySchedule.end.split(':').map((part)=>{return Number(part)});  // make the end string into an array of numbers [hour,min]\n      //console.log(\"startArray 1\", startArray)\n      //console.log(\"endArray 1\", endArray)\n      startArray[0] += tzOffsetHours;\n      startArray[1] += tzOffsetMins;\n      endArray[0] += tzOffsetHours;\n      endArray[1] += tzOffsetMins;\n      //console.log(\"startArray 2\", startArray)\n      //console.log(\"endArray 2\", endArray)\n      if (startArray[0] >= 24 && endArray[0] >= 24){\n        startArray[0] -= 24;\n        endArray[0] -= 24;\n        daysArray = shiftDaysArray(daysArray, 1);  //shift days array +1\n      }\n      else if (startArray[0] >= 24 && endArray[0] < 24 && endArray[0] >= 0){\n        startArray[0] -= 24;\n        daysArray = shiftDaysArray(daysArray, 1);  //shift days array +1\n      }\n      else if (startArray[0] < 0 && endArray[0] < 0){\n        startArray[0] += 24;\n        endArray[0] += 24;\n        daysArray = shiftDaysArray(daysArray, -1);  //shift days array -1\n      }\n      else if (endArray[0] < 0 && startArray[0] < 24 && startArray[0] >= 0){\n        endArray[0] += 24;\n      }\n      else if (startArray[0] < 0 && endArray[0] < 24 && endArray[0] >= 0){\n        startArray[0] += 24;\n        daysArray = shiftDaysArray(daysArray, -1);  //shift days array -1\n      }\n      else if (endArray[0] >= 24 && startArray[0] < 24 && startArray[0] >= 0){\n        endArray[0] -= 24;\n      }\n      //console.log(\"daysArray2\", daysArray)\n      //console.log('startArray 3', startArray)\n      //console.log('endArray 3', endArray)\n      \n      const date = dt.format('YYYY-MM-DD');  //current date in local (tz) time.\n      //console.log('date', date);\n      let day = dt.tz(tzone).format('dddd').toLowerCase(); // Sunday, or Monday, or ..\n      //console.log('day', day)\n      //console.log(\"dt\", dt.tz(tzone).format())\n      // make moment objects with the start and end times and the current date\n      const start = moment.tz(`${date}T${startArray[0].toString().padStart(2,'0')}:${startArray[1].toString().padStart(2,'0')}:00`, tzone); \n      //console.log('start', start.format())\n      const end = moment.tz(`${date}T${endArray[0].toString().padStart(2,'0')}:${endArray[1].toString().padStart(2,'0')}:00`, tzone);\n      //console.log('end1', end.format());\n      if (start.isAfter(end)) {   // if the scheduled period runs over into the next day\n        if (daysArray.includes(moment().day(day).subtract(1,'days').format('dddd').toLowerCase())) {    //If daysArray includes the previous day\n          if (dt.isBefore(end)) return true;  // check if we are in the overlap period from the previous day\n        }\n        if (daysArray.includes(day && dt.isAfter(start))) return true; //If we are between the start time and end of the day\n        return false;\n      }\n      else if (daysArray.includes(day)){  \n        if (dt.isAfter(start) && dt.isBefore(end)) return true;\n      }\n  \n    }\n    return false;\n  }\n  */\n","import { Container } from '../../container';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport Statistics from './statistics';\nimport { NODE_INFO } from '../../node-info';\n\nclass MinMaxAvgNode extends Statistics {\n  constructor() {\n    super();\n    this.title = NODE_INFO.statistics[\"min-max-avg\"].title;\n    this.description = NODE_INFO.statistics[\"min-max-avg\"].description;\n    this.addOutput('Min', Type.NUMBER);\n    this.addOutput('Max', Type.NUMBER);\n    this.addOutput('Avg', Type.NUMBER);\n  }\n\n  onInputUpdated() {\n    const data = this.getDefinedInputsOrSettingsValues();\n    const min = Math.min.apply(Math, data);\n    const max = Math.max.apply(Math, data);\n    const count = data.length;\n    const sum = Utils.sum(data);\n    const avg = sum / count;\n\n    this.setOutputData(0, min);\n    this.setOutputData(1, max);\n    this.setOutputData(2, avg);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType('statistics/min-max-avg', MinMaxAvgNode);\n","import { Container } from '../../container';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport Statistics from './statistics';\nimport { NODE_INFO } from '../../node-info';\n\nclass AvgNode extends Statistics {\n  constructor() {\n    super();\n    this.title = NODE_INFO.statistics.avg.title;\n    this.description = NODE_INFO.statistics.avg.description;\n    this.addOutput('Avg', Type.NUMBER);\n    this.addOutput('Count', Type.STRING);\n    this.addOutput('Sum', Type.STRING);\n  }\n\n  onInputUpdated() {\n    const data = this.getDefinedInputsOrSettingsValues();\n    const count = data.length;\n    const sum = Utils.sum(data);\n    let avg = 0;\n    if (count !== 0) {\n      avg = sum / count;\n    }\n\n    this.setOutputData(0, avg);\n    this.setOutputData(1, count);\n    this.setOutputData(2, sum);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('statistics/avg', AvgNode);\n","import { Container } from '../../container';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport Statistics from './statistics';\nimport { NODE_INFO } from '../../node-info';\n\nclass MinNode extends Statistics {\n  constructor() {\n    super();\n    this.title = NODE_INFO.statistics.min.title;\n    this.description = NODE_INFO.statistics.min.description;\n    this.addOutput('min', Type.NUMBER);\n  }\n\n  onInputUpdated() {\n    const data = this.getDefinedInputsOrSettingsValues();\n    const min = Utils.stat.min(data);\n    this.setOutputData(0, min);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('statistics/min', MinNode);\n","import { Container } from '../../container';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport Statistics from './statistics';\nimport { NODE_INFO } from '../../node-info';\n\nclass MaxNode extends Statistics {\n  constructor() {\n    super();\n    this.title = NODE_INFO.statistics.max.title;\n    this.description = NODE_INFO.statistics.max.description;\n    this.addOutput('max', Type.NUMBER);\n  }\n\n  onInputUpdated() {\n    const data = this.getDefinedInputsOrSettingsValues();\n    const max = Utils.stat.max(data);\n    this.setOutputData(0, max);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('statistics/max', MaxNode);\n","import { Container } from '../../container';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport Statistics from './statistics';\nimport { NODE_INFO } from '../../node-info';\n\nclass SumNode extends Statistics {\n  constructor() {\n    super();\n    this.title = NODE_INFO.statistics.sum.title;\n    this.description = NODE_INFO.statistics.sum.description;\n    this.addOutput('sum', Type.NUMBER);\n  }\n\n  onInputUpdated() {\n    const data = this.getDefinedInputsOrSettingsValues();\n    const sum = Utils.stat.sum(data);\n    this.setOutputData(0, sum);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('statistics/sum', SumNode);\n","import { Container } from '../../container';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport Statistics from './statistics';\nimport { NODE_INFO } from '../../node-info';\n\nclass MedianNode extends Statistics {\n  constructor() {\n    super();\n    this.title = NODE_INFO.statistics.median.title;\n    this.description = NODE_INFO.statistics.median.description;\n    this.addOutput('median', Type.NUMBER);\n  }\n\n  onInputUpdated() {\n    const data = this.getDefinedInputsOrSettingsValues();\n    const median = Utils.stat.median(data);\n    this.setOutputData(0, median);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('statistics/median', MedianNode);\n","import { Container } from '../../container';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport Statistics from './statistics';\nimport { NODE_INFO } from '../../node-info';\n\nclass RangeNode extends Statistics {\n  constructor() {\n    super();\n    this.title = NODE_INFO.statistics.range.title;\n    this.description = NODE_INFO.statistics.range.description;\n    this.addOutput('range', Type.NUMBER);\n  }\n\n  onInputUpdated() {\n    const data = this.getDefinedInputsOrSettingsValues();\n    const range = Utils.stat.range(data);\n    this.setOutputData(0, range);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('statistics/range', RangeNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass RankNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicOutputsExist = true;\n    this.dynamicSettingsExist = false;\n    this.dynamicInputsType = Type.NUMBER;\n    super.dynamicOutputsType = Type.NUMBER;\n    this.dynamicDefaultInputs = 5;\n    this.dynamicDefaultOutputs = 3;\n    this.title = NODE_INFO.statistics.rank.title;\n    this.description = NODE_INFO.statistics.rank.description;\n    this.settings['rank'] = NodeSetting.create({\n      description: 'Highest or Lowest',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'top', text: 'Rank Highest' },\n          { value: 'bottom', text: 'Rank Lowest' },\n        ],\n      },\n      value: 'top',\n    });\n  }\n\n  onAdded() {\n    this.updateTitle();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let data = this.getDefinedInputValues();\n    data = data.sort((a, b) => a - b);\n    const outputCount = this.getOutputsCount();\n    if (this.settings['rank'].value === 'bottom') {\n      for (let i = 0; i < outputCount; i++) {\n        this.setOutputData(i, data[i]);\n      }\n    } else {\n      for (let i = 0; i < outputCount; i++) {\n        this.setOutputData(i, data[data.length - (i + 1)]);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    if (Number(this.settings['outputs'].value) > Number(this.settings['inputs'].value)) {\n      this.settings['outputs'].value = Number(this.settings['inputs'].value);\n    }\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n    this.updateTitle();\n  }\n\n  private updateTitle() {\n    if (this.settings['rank'].value === 'top') this.title = 'Rank (Highest)';\n    else if (this.settings['rank'].value === 'bottom') this.title = 'Rank (Lowest)';\n  }\n}\nContainer.registerNodeType('statistics/rank', RankNode);\n","import { Container } from '../../container';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport Statistics from './statistics';\nimport { NODE_INFO } from '../../node-info';\n\nclass AnyStatAllNode extends Statistics {\n  constructor() {\n    super();\n    this.title = NODE_INFO.statistics[\"stats-all\"].title;\n    this.description = NODE_INFO.statistics[\"stats-all\"].description;\n    this.addOutput('max', Type.NUMBER);\n    this.addOutput('min', Type.NUMBER);\n    this.addOutput('range', Type.NUMBER);\n    this.addOutput('sum', Type.NUMBER);\n    this.addOutput('mean', Type.NUMBER);\n    this.addOutput('median', Type.NUMBER);\n    this.addOutput('modes', Type.NUMBER);\n    this.addOutput('variance', Type.NUMBER);\n    this.addOutput('standardDeviation', Type.NUMBER);\n    this.addOutput('meanAbsoluteDeviation', Type.NUMBER);\n    this.addOutput('zScores', Type.NUMBER);\n  }\n\n  onInputUpdated() {\n    const a = this.getDefinedInputsOrSettingsValues();\n    this.setOutputData(0, Utils.stat.max(a));\n    this.setOutputData(1, Utils.stat.min(a));\n    this.setOutputData(2, Utils.stat.range(a));\n    this.setOutputData(3, Utils.stat.sum(a));\n    this.setOutputData(4, Utils.stat.mean(a));\n    this.setOutputData(5, Utils.stat.median(a));\n    this.setOutputData(6, Utils.stat.modes(a));\n    this.setOutputData(7, Utils.stat.variance(a));\n    this.setOutputData(8, Utils.stat.standardDeviation(a));\n    this.setOutputData(9, Utils.stat.meanAbsoluteDeviation(a));\n    this.setOutputData(10, Utils.stat.zScores(a));\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType('statistics/stats-all', AnyStatAllNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass NumbersAverageNode extends Node {\n  values = [];\n  lastReset: boolean;\n  avg: number;\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams[\"stream-average\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO.streams[\"stream-average\"].description + ` \\n ` +\n      ` ## Reset to null\\n ` +\n      `***Reset to null*** if set to option true and a true value on the node ***reset*** this will reset the node ***output*** to a value of null, If set to false it will keep the last node ***output*** value \\n `\n    this.addInput('value', Type.NUMBER);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n    this.settings['null'] = NodeSetting.create({\n      description: 'Reset to null',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.lastReset = false;\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(1);\n    let val = this.getInputData(0);\n    const resetToNull = this.settings['null'].value;\n    if (reset && !this.lastReset) {\n      if (resetToNull) {\n        this.setOutputData(0, null);\n        this.values = [];\n        this.lastReset = reset;\n      } else {\n        this.values = [];\n        this.setOutputData(0, this.avg);\n        this.lastReset = reset;\n      }\n      return;\n    } else if (!reset && this.lastReset) {\n      this.lastReset = reset;\n      return;\n    }\n    if (val == null) return;\n    this.values.push(val);\n    let sum = this.values.reduce(function (a, b) {\n      return a + b;\n    });\n    let avg = sum / this.values.length;\n    this.avg = avg\n    this.setOutputData(0, this.avg);\n  }\n}\nContainer.registerNodeType('streams/stream-average', NumbersAverageNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass NumbersHighestNode extends Node {\n  val: number;\n  lastReset: boolean;\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams[\"stream-highest\"].title;\n    this.description = NODE_INFO.streams[\"stream-highest\"].description;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO.streams[\"stream-highest\"].description + ` \\n ` +\n      ` ## Reset to null\\n ` +\n      `***Reset to null*** if set to option true and a true value on the node ***reset*** this will reset the node ***output*** to a value of null, If set to false it will keep the last node ***output*** value \\n `\n\n    this.addInput('input', Type.NUMBER);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n    this.settings['null'] = NodeSetting.create({\n      description: 'Reset to null',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.lastReset = false;\n    this.val = null;\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(1);\n    const resetToNull = this.settings['null'].value;\n    if (reset && !this.lastReset) {\n      if (resetToNull) {\n        this.setOutputData(0, null);\n        this.val = null\n        this.lastReset = reset;\n      } else {\n        this.setOutputData(0, this.val);\n        this.val = null\n        this.lastReset = reset;\n      }\n      return;\n    } else if (!reset && this.lastReset) {\n      this.lastReset = reset;\n      return;\n    }\n\n    let inputVal = this.getInputData(0);\n    if (inputVal == null) return;\n\n    if (this.val == null || this.val < inputVal) {\n      this.val = inputVal;\n      this.setOutputData(0, this.val);\n    }\n  }\n}\nContainer.registerNodeType('streams/stream-highest', NumbersHighestNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass NumbersLowestNode extends Node {\n  val: number;\n  lastReset: boolean;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams.stack.title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO.streams.stack.description + ` \\n ` +\n      ` ## Reset to null\\n ` +\n      `***Reset to null*** if set to option true and a true value on the node ***reset*** this will reset the node ***output*** to a value of null, If set to false it will keep the last node ***output*** value \\n `\n\n    this.addInput('input', Type.NUMBER);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n    this.settings['null'] = NodeSetting.create({\n      description: 'Reset to null',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.val = null;\n    this.lastReset = false;\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(1);\n    const resetToNull = this.settings['null'].value;\n    if (reset && !this.lastReset) {\n      if (resetToNull) {\n        this.setOutputData(0, null);\n        this.val = null\n        this.lastReset = reset;\n      } else {\n        this.setOutputData(0, this.val);\n        this.val = null\n        this.lastReset = reset;\n      }\n      return;\n    } else if (!reset && this.lastReset) {\n      this.lastReset = reset;\n      return;\n    }\n\n    let inputVal = this.getInputData(0);\n    if (inputVal == null) return;\n\n    if (this.val == null || this.val > inputVal) {\n      this.val = inputVal;\n      this.setOutputData(0, this.val);\n    }\n  }\n}\nContainer.registerNodeType('streams/stream-lowest', NumbersLowestNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass NumbersSumNode extends Node {\n  val = 0;\n  lastReset: boolean;\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams[\"stream-sum\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO.streams[\"stream-sum\"].description + ` \\n ` +\n      ` ## Reset to null\\n ` +\n      `***Reset to null*** if set to option true and a true value on the node ***reset*** this will reset the node ***output*** to a value of null, If set to false it will keep the last node ***output*** value \\n `\n    this.addInput('input', Type.NUMBER);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n    this.settings['null'] = NodeSetting.create({\n      description: 'Reset to null',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.lastReset = false;\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(1);\n    const resetToNull = this.settings['null'].value;\n    if (reset && !this.lastReset) {\n      if (resetToNull) {\n        this.setOutputData(0, null);\n        this.val = null\n        this.lastReset = reset;\n      } else {\n        this.setOutputData(0, this.val);\n        this.val = 0\n        this.lastReset = reset;\n      }\n      return;\n    } else if (!reset && this.lastReset) {\n      this.lastReset = reset;\n      return;\n    }\n    if (this.inputs[0].updated && this.inputs[0].data != null) this.val += this.inputs[0].data;\n    this.setOutputData(0, this.val, true);\n  }\n}\nContainer.registerNodeType('streams/stream-sum', NumbersSumNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\n\nclass StreamMergeNode extends FlexibleNode {\n  val: number;\n  lastReset: boolean;\n\n  constructor() {\n    super();\n    this.dynamicSettingsExist = false;\n    this.dynamicInputsType = Type.ANY;\n    this.title = NODE_INFO.streams[\"stream-merge\"].title;\n    this.description = NODE_INFO.streams[\"stream-merge\"].description;\n    this.addOutput('output', Type.ANY);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n    this.size = this.computeSize();\n  }\n\n  onInputUpdated() {\n    const inputs = this.getInputsCount();\n    for (let i = this.dynamicInputStartPosition; i < inputs; i++) {\n      let inputValue = this.getInputData(i);\n      if (Utils.hasInput(inputValue)) {\n        if (this.inputs[i].updated) {\n          this.setOutputData(0, this.inputs[i].data);\n          return;\n        }\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('streams/stream-merge', StreamMergeNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass GateNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams.gate.title;\n    this.description = NODE_INFO.streams.gate.description;\n    this.addInput('input', Type.STRING);\n    this.addInput('open', Type.BOOLEAN);\n    this.addOutput('output', Type.STRING);\n    this.settings['send-null'] = NodeSetting.create({\n      description: 'Send null when closed',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onInputUpdated() {\n    let key = this.getInputData(1);\n\n    if (key) this.setOutputData(0, this.getInputData(0));\n    else if (this.settings['send-null'].value && this.outputs[0].data != null)\n      this.setOutputData(0, null);\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('streams/gate', GateNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass StackNode extends Node {\n  data = [];\n  lastReset: boolean;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams.stack.title;\n    this.description = NODE_INFO.streams.stack.description;\n    this.addInput('input');\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInput('clear', Type.BOOLEAN);\n    this.addOutput('output');\n    this.addOutput('count', Type.NUMBER);\n    this.lastReset = false;\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(2);\n    if (reset && !this.lastReset) {\n      this.data = [];\n      this.setOutputData(0, null);\n      this.setOutputData(1, 0);\n      this.lastReset = reset;\n      return;\n    } else if (!reset && this.lastReset) {\n      this.lastReset = reset;\n      return;\n    }\n\n    if (this.inputs[0].updated && this.inputs[0].data != null) {\n      this.data.push(this.inputs[0].data);\n      this.setOutputData(1, this.data.length);\n    }\n\n    if (this.inputs[1].updated && this.inputs[1].data == true) {\n      let val = this.data.length > 0 ? this.data.pop() : null;\n      this.setOutputData(0, val);\n      this.setOutputData(1, this.data.length);\n    }\n  }\n}\nContainer.registerNodeType('streams/stack', StackNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass QueueNode extends Node {\n  data = [];\n  lastReset: boolean;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams.queue.title;\n    this.description = NODE_INFO.streams.queue.description;\n    this.addInput('input');\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInput('clear', Type.BOOLEAN);\n    this.addOutput('output');\n    this.addOutput('count', Type.NUMBER);\n    this.lastReset = false;\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(2);\n    if (reset && !this.lastReset) {\n      this.data = [];\n      this.setOutputData(0, null);\n      this.setOutputData(1, 0);\n      this.lastReset = reset;\n      return;\n    } else if (!reset && this.lastReset) {\n      this.lastReset = reset;\n      return;\n    }\n\n    if (this.inputs[0].updated && this.inputs[0].data != null) {\n      this.data.unshift(this.inputs[0].data);\n      this.setOutputData(1, this.data.length);\n    }\n\n    if (this.inputs[1].updated && this.inputs[1].data == true) {\n      let val = this.data.length > 0 ? this.data.pop() : null;\n      this.setOutputData(0, val);\n      this.setOutputData(1, this.data.length);\n    }\n  }\n}\nContainer.registerNodeType('streams/queue', QueueNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass DelayNode extends Node {\n  delayedValues = [];\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams[\"stream-delay\"].title;\n    this.description = NODE_INFO.streams[\"stream-delay\"].description;\n    this.addInput('input');\n    this.addInputWithSettings('delay', Type.NUMBER, 1000, 'Delay (millis)', false);\n    this.addOutput('output');\n\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ delay: { weight: 2 }, time: {} }],\n    });\n  }\n\n  onAdded() {\n    this.inputs[1]['name'] = `[delay] (${this.settings['time'].value})`;\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[1]['name'] = `[delay] (${this.settings['time'].value})`;\n  }\n\n  onInputUpdated() {\n    if (this.inputs[0].updated)\n      this.delayedValues.push({\n        val: this.inputs[0].data,\n        time: Date.now(),\n      });\n  }\n\n  onExecute() {\n    if (this.delayedValues.length == 0) return;\n    let delay = this.getInputData(1);\n    delay = TimeUtils.timeConvert(delay, this.settings['time'].value);\n    const val = this.delayedValues[0];\n    if (Date.now() - val.time >= delay) {\n      this.delayedValues.shift();\n      this.setOutputData(0, val.val);\n      return;\n    }\n  }\n}\nContainer.registerNodeType('streams/stream-delay', DelayNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass DelayMeterNode extends Node {\n  lastTime;\n  lastReset: boolean;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams[\"stream-delay-meter\"].title;\n    this.description = NODE_INFO.streams[\"stream-delay-meter\"].description;\n    this.addInput('input');\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('ms', Type.NUMBER);\n    this.lastReset = false;\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(1);\n    if (reset && !this.lastReset) {\n      this.lastTime = null;\n      this.setOutputData(0, null);\n      this.lastReset = reset;\n      return;\n    } else if (!reset && this.lastReset) {\n      this.lastReset = reset;\n      return;\n    }\n\n    if (this.inputs[0].updated && this.inputs[0].data != null) {\n      if (this.lastTime != null) {\n        let delay = Date.now() - this.lastTime;\n        this.setOutputData(0, delay);\n      }\n\n      this.lastTime = Date.now();\n    }\n  }\n}\nContainer.registerNodeType('streams/stream-delay-meter', DelayMeterNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass TimeFrequencyMeterNode extends Node {\n  count = 0;\n  countWas = 0;\n  lastReset: boolean;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams[\"frequency-meter\"].title;\n    this.description = NODE_INFO.streams[\"frequency-meter\"].description;\n    this.addInput('input');\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('events/sec', Type.NUMBER, undefined, { data: 0 });\n    this.lastReset = false;\n\n    setInterval(() => {\n      if (this.count != this.countWas) {\n        this.setOutputData(0, this.count);\n      }\n      this.countWas = this.count;\n      this.count = 0;\n    }, 1000);\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(1);\n    if (reset && !this.lastReset) {\n      this.count = 0;\n      this.countWas = 0;\n      this.setOutputData(0, null);\n      this.lastReset = reset;\n      return;\n    } else if (!reset && this.lastReset) {\n      this.lastReset = reset;\n      return;\n    }\n\n    this.count++;\n  }\n}\nContainer.registerNodeType('streams/frequency-meter', TimeFrequencyMeterNode);\n","import { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass FlatlineNode extends Node {\n  lastValue;\n  timeoutFunc;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams[\"flatline\"].title;\n    this.description = NODE_INFO.streams[\"flatline\"].description;\n    this.addInput('input', Type.ANY);\n    this.addInputWithSettings('interval', Type.NUMBER, 30, 'Interval');\n    this.addOutput('output', Type.BOOLEAN);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.MILLISECONDS, text: 'Milliseconds' },\n          { value: TIME_TYPE.SECONDS, text: 'Seconds' },\n          { value: TIME_TYPE.MINUTES, text: 'Minutes' },\n          { value: TIME_TYPE.HOURS, text: 'Hours' },\n        ],\n      },\n      value: TIME_TYPE.MINUTES,\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n  \n//\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    if (this.inputs[0].updated && input !== this.lastValue) {\n      this.lastValue = input;\n      this.setOutputData(0, false);\n      const interval = TimeUtils.timeConvert(this.getInputData(1), this.settings['time'].value);\n      if (this.timeoutFunc) clearTimeout(this.timeoutFunc);\n      this.timeoutFunc = setTimeout(() => {\n        this.setOutputData(0, true);\n      }, interval);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.setOutputData(0, false);\n    const interval = TimeUtils.timeConvert(this.getInputData(1), this.settings['time'].value);\n    if (this.timeoutFunc) clearTimeout(this.timeoutFunc);\n    this.timeoutFunc = setTimeout(() => {\n      this.setOutputData(0, true);\n    }, interval);\n  }\n}\nNodeTypeRegistry.registerNodeType('streams/flatline', FlatlineNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport jsonStringCompare from '../../utils/string-json-compare-utils';\nimport { NODE_INFO } from '../../node-info';\n\nenum compareType {\n  Equals = 'Equals',\n  NotEquals = 'Not Equal',\n  GreaterThanEqual = 'Greater Than Equal',\n  GreaterThan = 'Greater Than',\n  LessThanEqual = 'Less Than Equal',\n  LessThan = 'Less Than',\n  Includes = 'Includes',\n  startsWith = 'Starts With',\n  endsWith = 'Ends With'\n}\nclass StringCompareNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"string-compare\"].title;\n    this.description = NODE_INFO.string[\"string-compare\"].description;\n    this.addInput('input', Type.STRING);\n    this.addInputWithSettings('comparison-to', Type.STRING, '', 'Comparison Value');\n    this.addOutput('match', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.setOutputData(0, null);\n    this.setOutputData(1, null);\n    this.settings['function'] = NodeSetting.create({\n      description: 'Comparison Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: compareType.Equals, text: compareType.Equals },\n          { value: compareType.NotEquals, text: compareType.NotEquals },\n          { value: compareType.GreaterThanEqual, text: compareType.GreaterThanEqual },\n          { value: compareType.GreaterThan, text: compareType.GreaterThan },\n          { value: compareType.LessThanEqual, text: compareType.LessThanEqual },\n          { value: compareType.LessThan, text: compareType.LessThan },\n          { value: compareType.Includes, text: compareType.Includes },\n          { value: compareType.startsWith, text: compareType.startsWith },\n          { value: compareType.endsWith, text: compareType.endsWith },\n        ],\n      },\n      value: compareType.Equals,\n    });\n    this.settings['isNumber'] = NodeSetting.create({\n      description: 'Comparison value is a number',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['passNull'] = NodeSetting.create({\n      description: 'Send null if not a match',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['null'] = NodeSetting.create({\n      description: 'Block null messages on input',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const string1 = this.getInputData(0);\n    const string2 = this.getInputData(1);\n    const resetToNull = this.settings['null'].value;\n    if (!Utils.hasInput(string1)) {\n      this.setOutputData(0, null);\n      return;\n    }\n    if (string1 === null && !resetToNull) {\n      return;\n    }\n    const out = jsonStringCompare.compare(this, string1, string2)\n    if (out) {\n      this.setOutputData(0, true);\n      this.setOutputData(1, string1);\n    } else if (this.settings['passNull'].value === true) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n    } else {\n      this.setOutputData(0, false);\n      this.setOutputData(1, string1);\n    }\n\n  }\n\n  onAfterSettingsChange() {\n    const inputType = this.settings['function'].value\n    const title = \"String Comparison\"\n    this.title = `${title} Compare (${inputType})`;\n    this.broadcastTitleToClients();\n    this.onInputUpdated();\n  }\n\n\n}\nContainer.registerNodeType('string/string-compare', StringCompareNode);\n\n\n\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass TextCutSubstringNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"cut-substring\"].title;\n    this.description = NODE_INFO.string[\"cut-substring\"].description;\n    this.addInput('input', Type.STRING);\n    this.addInputWithSettings('start', Type.NUMBER, 0, 'Start', false);\n    this.addInputWithSettings('length', Type.NUMBER, 1, 'Length', false);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const text = this.getInputData(0);\n    const start = this.getInputData(1);\n    const length = this.getInputData(2);\n    if (text != null && start != null && length != null) {\n      this.setOutputData(0, text.substr(start, length));\n    } else this.setOutputData(0, null);\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('string/cut-substring', TextCutSubstringNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass StringJoinNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.STRING;\n    super.dynamicInputsStartName = 'string';\n    this.title = NODE_INFO.string[\"string-join\"].title;\n    this.description = NODE_INFO.string[\"string-join\"].description;\n    this.addOutput('output', Type.STRING);\n    this.setOutputData(0, null);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const inputs = this.getInputsCount();\n    let output = '';\n    for (let i = this.dynamicInputStartPosition; i < inputs; i++) {\n      output = output.concat(this.getInputData(i));\n    }\n    this.setOutputData(0, output, true);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType('string/string-join', StringJoinNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass TextStringLengthNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"string-length\"].title;\n    this.description = NODE_INFO.string[\"string-length\"].description;\n    this.addInput('input', Type.STRING);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, val.length);\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('string/string-length', TextStringLengthNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass StringIndexOfNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"string-index-of\"].title;\n    this.description = NODE_INFO.string[\"string-index-of\"].description;\n    this.addInputWithSettings('input', Type.STRING, '', 'Input Value', false);\n    this.addInputWithSettings('searchFor', Type.STRING, '', 'Search For Value', false);\n    this.addOutput('startIndex', Type.NUMBER);\n    this.addOutput('endIndex', Type.NUMBER);\n    this.setOutputData(0, null);\n    this.setOutputData(1, null);\n    this.settings['input'] = NodeSetting.create({\n      description: 'string1 Value',\n      value: '',\n      type: SettingType.STRING,\n    });\n    this.settings['searchFor'] = NodeSetting.create({\n      description: 'Search For Value',\n      value: '',\n      type: SettingType.STRING,\n    });\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    const searchFor = this.getInputData(1);\n    const index = input.indexOf(searchFor);\n    const length = searchFor.length;\n    if (index < 0) {\n      this.setOutputData(0, null, true);\n      this.setOutputData(1, null, true);\n    } else {\n      this.setOutputData(0, index, true);\n      this.setOutputData(1, index + length, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('string/string-index-of', StringIndexOfNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass TextCharAtIndexNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"char-at-index\"].title;\n    this.description = NODE_INFO.string[\"char-at-index\"].description;\n    this.addInput('input', Type.STRING);\n    this.addInputWithSettings('index', Type.NUMBER, 0, 'Index', false);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const text = this.getInputData(0);\n    const index = this.getInputData(1);\n    if (text != null && index != null) {\n      if (index === -1) this.setOutputData(0, text.slice(-1));\n      else this.setOutputData(0, text.slice(index, index + 1));\n    } else this.setOutputData(0, null);\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('string/char-at-index', TextCharAtIndexNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass TextSplitStringsNode extends Node {\n  currentIndex = 0;\n  lastStart:boolean;\n  lastNext:boolean;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"string-split\"].title;\n    this.description = NODE_INFO.string[\"string-split\"].description;\n    this.addInput('input', Type.STRING);\n    this.addInputWithSettings('separator', Type.STRING, '', 'Separator Value', false);\n    this.addInput('start', Type.BOOLEAN);\n    this.addInput('next', Type.BOOLEAN);\n    this.addOutput('output', Type.STRING);\n    this.addOutput('left', Type.NUMBER);\n    this.setOutputData(0, null);\n    this.setOutputData(1, 0);\n  }\n\n  onCreated() {\n    this.lastStart = false;\n    this.lastNext = false;\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const start = this.getInputData(2) || false;\n    const next = this.getInputData(3) || false;\n\n    if (this.inputs[2].updated && start && !this.lastStart) {\n      this.currentIndex = 0;\n      this.splitNext();\n    }\n    this.lastStart = start;\n\n    if (this.inputs[3].updated && next && !this.lastNext) this.splitNext();\n    this.lastNext = next;\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n\n  splitNext() {\n    const text = this.getInputData(0);\n    const separator = this.getInputData(1);\n    if (text == null || separator == null) return;\n\n    const splittedText = text.split(separator);\n    if (this.currentIndex >= splittedText.length) return;\n\n    this.setOutputData(0, splittedText[this.currentIndex]);\n    this.setOutputData(1, splittedText.length - this.currentIndex - 1);\n\n    this.currentIndex++;\n  }\n}\nContainer.registerNodeType('string/string-split', TextSplitStringsNode);\n","import { isNull, isString } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\n\nclass StringCaseChangeNode extends Node {\n  conversionFunction;\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"string-case\"].title;\n    this.description = NODE_INFO.string[\"string-case\"].description;\n    this.addInput('input', Type.STRING);\n    this.addOutput('output', Type.STRING);\n    this.setOutputData(0, null);\n    this.settings['function'] = NodeSetting.create({\n      description: 'Select Case',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'lower', text: 'Lower Case' },\n          { value: 'upper', text: 'Upper Case' },\n          { value: 'first_upper', text: 'First Characters to Upper Case' },\n        ],\n      },\n      value: 'lower',\n    });\n  }\n\n  onAdded() {\n    this.setTitleAndConversionFunction();\n    this.onInputUpdated();\n  }\n\n  toTitleCase = (phrase: string): string => {\n    if (isString(phrase) && !isNull(phrase)) {\n      return phrase\n        .toLowerCase()\n        .split(' ')\n        .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n        .join(' ');\n    } else return null\n  };\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    if (!Utils.hasInput(input)) {\n      this.setOutputData(0, null, true);\n      return;\n    }\n    this.setOutputData(0, this.conversionFunction(input), true);\n  }\n\n  onAfterSettingsChange() {\n    this.setTitleAndConversionFunction();\n    this.onInputUpdated();\n  }\n\n  setTitleAndConversionFunction() {\n    const inputType = this.settings['function'].value;\n    switch (inputType) {\n      case 'first_upper':\n        this.title = 'String Case (First Character to Upper)';\n        this.conversionFunction = s1 => {\n          return this.toTitleCase(s1);\n        };\n        break;\n      case 'lower':\n        this.title = 'String Case (Lower)';\n        this.conversionFunction = s1 => {\n          return s1.toLowerCase();\n        };\n        break;\n      case 'upper':\n        this.title = 'String Case (Upper)';\n        this.conversionFunction = s1 => {\n          return s1.toUpperCase();\n        };\n        break;\n      default:\n        this.title = 'String Case (Lower)';\n        this.conversionFunction = s1 => {\n          return s1.toLowerCase();\n        };\n    }\n  }\n}\nContainer.registerNodeType('string/string-case', StringCaseChangeNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass TextASCIICodeNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"char-to-ascii\"].title;\n    this.description = NODE_INFO.string[\"char-to-ascii\"].description;\n    this.addInput('input', Type.STRING);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    if (val != null) this.setOutputData(0, val.charCodeAt(0));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('string/char-to-ascii', TextASCIICodeNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass TextASCIICharNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"ascii-to-char\"].title;\n    this.description = NODE_INFO.string[\"ascii-to-char\"].description;\n    this.addInput('input', Type.NUMBER);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    if (val != null) this.setOutputData(0, String.fromCharCode(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('string/ascii-to-char', TextASCIICharNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass StringBufferNode extends Node {\n  useTrigger: boolean;\n  bufferData: string;\n  lastSend:boolean;\n  lastClear:boolean;\n  lastAdd:boolean;\n\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.string[\"string-buffer\"].title;\n    this.description = NODE_INFO.string[\"string-buffer\"].description;\n\n    this.addInput('input', Type.STRING);\n    this.addInput('sendBuffer', Type.BOOLEAN);\n    this.addInput('clearBuffer', Type.BOOLEAN);\n    this.addInput('addToBuffer', Type.BOOLEAN);\n    this.addOutput('output', Type.STRING);\n    this.addOutput('currentBuffer', Type.STRING);\n\n    this.settings['useTrigger'] = NodeSetting.create({\n      description: 'Select a Buffer Input Method',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Add Input to Buffer When Triggered' },\n          { value: false, text: 'Collect all Input Messages (no Trigger)' },\n        ],\n      },\n      value: true,\n    });\n    this.useTrigger = true;\n    this.bufferData = '';\n  }\n\n  onCreated() {\n    this.lastSend = false;\n    this.lastClear = false;\n    this.lastAdd = false;\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const send = this.getInputData(1) || false;\n    const clear = this.getInputData(2) || false;\n    let addTrigger = false;\n    if (this.useTrigger) addTrigger = this.getInputData(3) || false;\n\n    if (this.inputs[1].updated && send && !this.lastSend) {\n      this.setOutputData(0, this.bufferData);\n      this.bufferData = '';\n    }\n    this.lastSend = send;\n\n    if (this.inputs[2].updated && clear && !this.lastClear) this.bufferData = '';\n    this.lastClear = clear;\n\n    if (\n      (!this.useTrigger && this.inputs[0].updated) ||\n      (this.useTrigger && this.inputs[3].updated && addTrigger && !this.lastAdd)\n    ) {\n      const input = this.getInputData(0);\n      if (input == null) return;\n      this.bufferData += String(input);\n    }\n    this.lastAdd = addTrigger;\n\n    this.setOutputData(1, this.bufferData);\n  }\n\n  onAfterSettingsChange() {\n    const triggerInput = this.settings['useTrigger'].value;\n    if (triggerInput !== this.useTrigger) {\n      if (triggerInput) this.addInput('addToBuffer', Type.BOOLEAN);\n      else this.removeInput(3);\n    }\n    this.useTrigger = triggerInput;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('string/string-buffer', StringBufferNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass BoolSwitchNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.switch[\"bool-switch\"].title;\n    this.description = NODE_INFO.switch[\"bool-switch\"].description;\n    this.addInput('switch', Type.BOOLEAN);\n    this.addInput('[inTrue]', Type.BOOLEAN);\n    this.addInput('[inFalse]', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.settings['inTrue'] = NodeSetting.create({\n      description: 'True Value',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: false, text: 'false' },\n          { value: true, text: 'true' },\n          { value: null, text: 'null' },\n        ],\n      },\n      value: null,\n    });\n    this.settings['inFalse'] = NodeSetting.create({\n      description: 'False Value',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: false, text: 'false' },\n          { value: true, text: 'true' },\n          { value: null, text: 'null' },\n        ],\n      },\n      value: null,\n    });\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    let select = this.getInputData(0);\n    if (!Utils.hasInput(select)) {\n      this.setOutputData(0, null);\n      return;\n    }\n    let inA = this.getInputData(1);\n    if (!Utils.hasInput(inA)) inA = this.settings['inTrue'].value;\n    let inB = this.getInputData(2);\n    if (!Utils.hasInput(inB)) inB = this.settings['inFalse'].value;\n\n    if (select) this.setOutputData(0, inA, true);\n    else this.setOutputData(0, inB, true);\n  }\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('switch/bool-switch', BoolSwitchNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass NumSwitchNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.switch[\"num-switch\"].title;\n    this.description = NODE_INFO.switch[\"num-switch\"].description;\n    this.addInput('switch', Type.BOOLEAN);\n    this.addInputWithSettings('inTrue', Type.NUMBER, null, 'True Value');\n    this.addInputWithSettings('inFalse', Type.NUMBER, null, 'False Value');\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    let select = this.getInputData(0);\n    if (!Utils.hasInput(select)) {\n      this.setOutputData(0, null, true);\n      return;\n    }\n    const inA = this.getInputData(1);\n    const inB = this.getInputData(2);\n    if (select) this.setOutputData(0, inA, true);\n    else this.setOutputData(0, inB, true);\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('switch/num-switch', NumSwitchNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass StringSwitchNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.switch[\"string-switch\"].title;\n    this.description = NODE_INFO.switch[\"string-switch\"].description;\n    this.addInput('switch', Type.BOOLEAN);\n    this.addInputWithSettings('inTrue', Type.STRING, '', 'True Value');\n    this.addInputWithSettings('inFalse', Type.STRING, '', 'False Value');\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    let select = this.getInputData(0);\n    if (!Utils.hasInput(select)) {\n      this.setOutputData(0, null);\n      return;\n    }\n    const inA = this.getInputData(1);\n    const inB = this.getInputData(2);\n    if (select) this.setOutputData(0, inA);\n    else this.setOutputData(0, inB);\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('switch/string-switch', StringSwitchNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\n\nclass BoolSelectNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.BOOLEAN;\n    super.dynamicInputStartPosition = 1;\n    this.title = NODE_INFO.switch[\"bool-select\"].title;\n    this.description = NODE_INFO.switch[\"bool-select\"].description;\n    this.addInput('select', Type.NUMBER);\n    this.addOutput('output', Type.BOOLEAN);\n  }\n\n  onAdded() {\n \n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    const select = this.getInputData(0);\n    if (\n      !Utils.hasInput(select) ||\n      select < this.dynamicInputStartPosition ||\n      select > this.getInputsCount() - this.dynamicInputStartPosition\n    ) {\n      this.setOutputData(0, null, true);\n      return;\n    }\n    this.setOutputData(0, this.getInputData(select), true);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('switch/bool-select', BoolSelectNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\n\nclass NumSelectNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    super.dynamicInputStartPosition = 1;\n    this.title = NODE_INFO.switch[\"num-select\"].title;\n    this.description = NODE_INFO.switch[\"num-select\"].description;\n    this.addInput('select', Type.NUMBER);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    const select = this.getInputData(0);\n    if (\n      !Utils.hasInput(select) ||\n      select < this.dynamicInputStartPosition ||\n      select > this.getInputsCount() - this.dynamicInputStartPosition\n    ) {\n      this.setOutputData(0, null, true);\n      return;\n    }\n    this.setOutputData(0, this.getInputData(select), true);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('switch/num-select', NumSelectNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\n\nclass StringSelectNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.STRING;\n    super.dynamicInputStartPosition = 1;\n    this.title = NODE_INFO.switch[\"string-select\"].title;\n    this.description = NODE_INFO.switch[\"string-select\"].description; \n    this.addInput('select', Type.NUMBER);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n \n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n//\n\n  onInputUpdated() {\n    const select = this.getInputData(0);\n    if (\n      !Utils.hasInput(select) ||\n      select < this.dynamicInputStartPosition ||\n      select > this.getInputsCount() - this.dynamicInputStartPosition\n    ) {\n      this.setOutputData(0, null, true);\n      return;\n    }\n    this.setOutputData(0, this.getInputData(select));\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('switch/string-select', StringSelectNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nexport class BoolOutputSelectNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicOutputsExist = true;\n    this.dynamicInputsExist = false;\n    this.dynamicSettingsExist = false;\n    super.dynamicOutputsType = Type.BOOLEAN;\n    this.title = NODE_INFO.switch[\"bool-output-select\"].title;\n    this.description = NODE_INFO.switch[\"bool-output-select\"].description;\n    this.addInput('select', Type.NUMBER);\n    this.addInput('input', Type.BOOLEAN);\n  }\n\n  onInputUpdated() {\n    let active = this.getInputData(0);\n    let val = this.getInputData(1);\n\n    if (active < 0 || active >= this.getOutputsCount()) {\n      this.debugWarn('Defined active output does not exist');\n      return;\n    }\n\n    this.setOutputData(active, val);\n  }\n}\nContainer.registerNodeType('switch/bool-output-select', BoolOutputSelectNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nexport class NumOutputSelectNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicOutputsExist = true;\n    this.dynamicInputsExist = false;\n    this.dynamicSettingsExist = false;\n    super.dynamicOutputsType = Type.NUMBER;\n    this.title = NODE_INFO.switch[\"num-output-select\"].title;\n    this.description = NODE_INFO.switch[\"num-output-select\"].description;\n     this.addInput('select', Type.NUMBER);\n    this.addInput('input', Type.NUMBER);\n  }\n\n  onInputUpdated() {\n    let active = this.getInputData(0);\n    let val = this.getInputData(1);\n\n    if (active < 0 || active >= this.getOutputsCount()) {\n      this.debugWarn('Defined active output does not exist');\n      return;\n    }\n\n    this.setOutputData(active, val);\n  }\n}\nContainer.registerNodeType('switch/num-output-select', NumOutputSelectNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nexport class StringOutputSelectNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicOutputsExist = true;\n    this.dynamicInputsExist = false;\n    this.dynamicSettingsExist = false;\n    super.dynamicOutputsType = Type.STRING;\n    this.title = NODE_INFO.switch[\"string-output-select\"].title;\n    this.description = NODE_INFO.switch[\"string-output-select\"].description;\n    this.addInput('select', Type.NUMBER);\n    this.addInput('input', Type.STRING);\n  }\n\n  onInputUpdated() {\n    let active = this.getInputData(0);\n    let val = this.getInputData(1);\n\n    if (active < 0 || active >= this.getOutputsCount()) {\n      this.debugWarn('Defined active output does not exist');\n      return;\n    }\n    this.setOutputData(active, val);\n  }\n}\nContainer.registerNodeType('switch/string-output-select', StringOutputSelectNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\nimport OsUtils from '../../utils/os-utils';\n\nclass HostInfo extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.system[\"host-info\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO.system[\"host-info\"].description + `   \\n ` +\n      `## On change of settings\\n ` +\n      `   \\n ` +\n      ` On change of settings output ***system-info*** will return data in json format\\n ` +\n      `## On active Input\\n ` +\n      `   \\n ` +\n      ` On an active input ***trigger*** the outputs ***cpu-temp***, ***disc-usage***, ***system-time***, ***system-memory*** will return data in json format\\n ` +\n      `## The data returned\\n ` +\n      `   \\n ` +\n      ` On change of settings output ***system-info*** will return data in json format\\n ` +\n      `   \\n `;\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('system-info', Type.JSON);\n    this.addOutput('cpu-temp', Type.JSON);\n    this.addOutput('disc-usage', Type.JSON);\n    this.addOutput('system-time', Type.JSON);\n    this.addOutput('system-memory', Type.JSON);\n    this.addOutput('error', Type.STRING);\n  }\n\n  onCreated() {\n    this.onAfterSettingsChange();\n  }\n\n  callSystemInfo() {\n    OsUtils.systemInfo()\n      .then(e => this.setOutputData(0, e))\n      .catch(err => this.setOutputData(5, err));\n  }\n\n  callInfo() {\n    OsUtils.cpuTemperature()\n      .then(e => this.setOutputData(1, e))\n      .catch(err => this.setOutputData(5, err));\n    OsUtils.fsSize()\n      .then(e => this.setOutputData(2, e))\n      .catch(err => this.setOutputData(5, err));\n    OsUtils.systemTime()\n      .then(e => this.setOutputData(3, e))\n      .catch(err => this.setOutputData(5, err));\n    OsUtils.systemMem()\n      .then(e => this.setOutputData(4, e))\n      .catch(err => this.setOutputData(5, err));\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return;\n    this.callSystemInfo();\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return;\n    this.callInfo();\n  }\n}\nContainer.registerNodeType('system/host-info', HostInfo);\n","import PlatformDataSource from '../../../database/datasource/PlatformDataSource';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport OsUtils from '../../utils/os-utils';\n\nclass PlatNode extends Node {\n  haystackAbout = {\n    serverName: OsUtils.hostName(),\n    productVersion: OsUtils.getCurrentWiresVersion(),\n  };\n  constructor() {\n    super();\n    this.title = NODE_INFO.system.platform.title;\n    this.description = NODE_INFO.system.platform.description;\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('wires-version', Type.STRING);\n    this.addOutput('output-json', Type.JSON);\n    this.settings['serverName'] = NodeSetting.create({\n      description: 'serverName',\n      value: '',\n      type: SettingType.READONLY,\n    });\n    this.settings['productVersion'] = NodeSetting.create({\n      description: 'productVersion',\n      value: '',\n      type: SettingType.READONLY,\n    });\n\n\n  }\n\n  async onAdded() {\n    await this.haystackAbout.serverName.then(e => {\n      this.settings['serverName'].value = e;\n      this.broadcastSettingsToClients();\n    }).catch(err => {\n      this.debugInfo(`PLATFORM NODE: try/catch  serverName info, ${err}`);\n    })\n    await this.haystackAbout.productVersion.then(e => {\n      this.settings['productVersion'].value = e;\n      this.broadcastSettingsToClients();\n      this.setOutputData(0, e); // wires version\n    }).catch(err => {\n      this.debugInfo(`PLATFORM NODE: try/catch  productVersion info, ${err}`);\n    })\n\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return; // only execute on server\n    PlatformDataSource.getPlatform().then(e => {\n      this.setOutputData(1, e)\n    }).catch(err => {\n      this.debugInfo(`PLATFORM NODE: try/catch  getPlatform info, ${err}`);\n    })\n\n  }\n\n}\nContainer.registerNodeType('system/platform', PlatNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass SystemBeepNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.system.beep.title;\n    this.description = NODE_INFO.system.beep.description;\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('error', Type.STRING);\n  }\n\n  onInputUpdated() {\n    try {\n      if (this.getInputData(0) == true) process.stderr.write('\\x07');\n      this.setOutputData(0, false);\n    } catch (e) {\n      this.setOutputData(0, true);\n    }\n  }\n}\nContainer.registerNodeType('system/beep', SystemBeepNode);\n","import { exec } from 'child_process';\nimport { isNull } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\n\nclass SystemExecuteNode extends Node {\n  lastTrigger:boolean;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.system[\"execute-cmd\"].title;\n    this.description = NODE_INFO.system[\"execute-cmd\"].description;\n    this.addInputWithSettings('command', Type.STRING, 'pwd', 'Linux Command', false);\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('out stdout', Type.STRING);\n    this.addOutput('out err', Type.STRING);\n    this.addOutput('out stderr', Type.STRING);\n    this.addOutput('error', Type.STRING);\n  }\n\n  onCreated(){\n    this.lastTrigger = false;\n  }\n\n  // example cmd to run a nodejs script cd /home/aidan/ && node lora-reset.js\n  onInputUpdated() {\n    const trigger = this.getInputData(1) || false;\n    if (this.inputs[1].updated && trigger && !this.lastTrigger) {\n      const command = this.getInputData(0);\n      if(isNull(command))return;\n\n      try {\n        exec(command, (err, stdout, stderr) => {\n          if (stdout) {\n            // this.debugErr(stdout);\n            this.setOutputData(0, stdout);\n            this.setOutputData(3, false);\n          }\n          if (err) {\n            // this.debugInfo(err);\n\n            this.setOutputData(1, err);\n            this.setOutputData(3, true);\n          }\n          if (stderr) {\n            this.setOutputData(2, stderr);\n            this.setOutputData(3, true);\n          }\n        });\n      } catch (e) {\n        this.setOutputData(3, true);\n      }\n    }\n    this.lastTrigger = trigger;\n  }\n}\nContainer.registerNodeType('system/execute-cmd', SystemExecuteNode);\n","import { Container, ContainerRegistry } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass FlowExport extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.system[\"flow-export\"].title;\n    this.description = NODE_INFO.system[\"flow-export\"].description;\n    this.addOutput('output', Type.STRING);\n    this.addInput('trigger', Type.BOOLEAN);\n  }\n\n  init() {\n    if (!this.properties) {\n      this.properties['lastTrigger'] = false;\n    }\n  }\n\n  onInputUpdated() {\n    if (this.side != Side.server) return;\n    const input: boolean = this.getInputData(0);\n    if (this.properties['lastTrigger'] !== input && input) {\n      const container = ContainerRegistry.instance().rootContainer();\n      container.db.getNodes((err, docs) => {\n        if (!err) {\n          this.setOutputData(0, JSON.stringify(docs));\n        } else {\n          this.debugErr(` Node id [ ${this.cid}/${this.id} ] has error: ${err.message}.`);\n        }\n      });\n    }\n    this.properties['lastTrigger'] = input;\n    this.persistProperties(false, true);\n  }\n}\nContainer.registerNodeType('system/flow-export', FlowExport);\n","import { exec } from 'child_process';\nimport { Container } from '../../../container';\nimport { Node, NodeState } from '../../../node';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport IpAddressUtils from '../../../utils/ip-address-utils';\nimport NodeColours from '../../../utils/nodes/node-colour-change';\nimport OsUtils from '../../../utils/os-utils';\n\nclass UpdateIPEdge28 extends Node {\n  timeStamp = Utils.getTimeStamp();\n  interfaceEth0 = 'eth0'; //eth0 //wlp3s0\n\n  //outputs\n  eth0Ip = 0;\n  messageOutput = 2;\n  errorOutput = 3;\n\n  constructor() {\n    super();\n    this.title = 'Network Interface EdgeIO-28';\n    this.description =\n      'This node is used to configure the network (IP) interface for edge28 controllers.  Changes made to settings will only be saved if ‘Save changes on save’ is toggled ON.  In some cases a reboot will be required to save the changes, if ‘Reboot’ is toggled ON, then clicking ‘save’ will reboot the controller.        NOTE: Making changes on a remote device could cause the device to become inaccessible.';\n    this.addInput('get interface address', Type.BOOLEAN);\n    this.addInput('enable eth0 ', Type.BOOLEAN);\n    this.addOutput('ip eth0', Type.STRING);\n    this.addOutput('message', Type.STRING);\n    this.addOutput('error', Type.STRING);\n\n    this.settings['writeChanges'] = NodeSetting.create({\n      description: 'Save changes on save',\n      type: SettingType.BOOLEAN,\n      value: false,\n    });\n\n    this.settings['reboot'] = NodeSetting.create({\n      description: 'Optional Reboot. Warning this will reboot the device',\n      type: SettingType.BOOLEAN,\n      value: false,\n    });\n\n    this.settings['eth0_group'] = NodeSetting.create({\n      description: 'Eth Port 0',\n      value: '',\n      type: SettingType.GROUP,\n    });\n\n    this.settings['interfaceTypeEth0'] = NodeSetting.create({\n      description: 'Interface Type eth0',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'DHCP' },\n          { value: 1, text: 'Static' },\n        ],\n      },\n      value: 0,\n    });\n    this.settings['newIpEth0'] = NodeSetting.create({\n      description: 'IP',\n      value: '192.168.0.40',\n      type: SettingType.STRING,\n    });\n\n    this.settings['netNetmaskEth0'] = NodeSetting.create({\n      description: 'Netmask eth0',\n      value: '255.255.255.0',\n      type: SettingType.STRING,\n    });\n    this.settings['newGatewayEth0'] = NodeSetting.create({\n      description: 'Gateway',\n      value: '192.168.0.1',\n      type: SettingType.STRING,\n    });\n\n    this.settings['newNameServerEth0'] = NodeSetting.create({\n      description: 'Name Servers eth0',\n      value: '8.8.8.8',\n      type: SettingType.STRING,\n    });\n\n    this.setSettingsConfig({\n      groups: [\n        { newIpEth0: {}, netNetmaskEth0: {} },\n        { newGatewayEth0: {}, newNameServerEth0: {} },\n      ],\n      conditions: {\n        newIpEth0: setting => {\n          const val = setting['interfaceTypeEth0'].value;\n          return ![0].includes(val);\n        },\n        netNetmaskEth0: setting => {\n          const val = setting['interfaceTypeEth0'].value;\n          return ![0].includes(val);\n        },\n        newGatewayEth0: setting => {\n          const val = setting['interfaceTypeEth0'].value;\n          return ![0].includes(val);\n        },\n        newNameServerEth0: setting => {\n          const val = setting['interfaceTypeEth0'].value;\n          return ![0].includes(val);\n        },\n      },\n    });\n  }\n\n  onAdded() {\n    setTimeout(() => {\n      this.getInterfaces();\n    }, 2000);\n  }\n\n  onInputUpdated() {\n    let enableInterfaceEth0 = this.getInputData(1);\n\n    //refresh the interfaces\n    if (this.inputs[0].updated) {\n      this.msgOut(this.messageOutput, 'called getInterfaces' + ' ' + this.timeStamp);\n      setTimeout(() => {\n        this.getInterfaces();\n      }, 2000);\n    }\n    // enable/disable eth0\n    if (this.inputs[1].updated) {\n      if (enableInterfaceEth0 === true) {\n        this.msgOut(this.messageOutput, 'called enable Eth0 true' + ' ' + this.timeStamp);\n        this.enableNetwork(this.interfaceEth0);\n      } else if (enableInterfaceEth0 === false) {\n        this.msgOut(this.messageOutput, 'called disable Eth0 false' + ' ' + this.timeStamp);\n        this.disableNetwork(this.interfaceEth0);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return; // only execute on server\n    const newIpEth0 = this.settings['newIpEth0'].value;\n    const netNetmaskEth0 = this.settings['netNetmaskEth0'].value;\n    const newGatewayEth0 = this.settings['newGatewayEth0'].value;\n    const newNameServerEth0 = this.settings['newNameServerEth0'].value;\n    const interfaceTypeEth0 = this.settings['interfaceTypeEth0'].value;\n    const writeChanges = this.settings['writeChanges'].value;\n    const reboot = this.settings['reboot'].value;\n\n    const checkIpSettingsEth0 = IpAddressUtils.checkIpValid(\n      newIpEth0,\n      netNetmaskEth0,\n      newGatewayEth0,\n      newNameServerEth0,\n    );\n\n    //device reboot\n    if (reboot) {\n      this.msgOut(this.messageOutput, 'called sudo reboot will reboot in 10 sec' + ' ' + this.timeStamp);\n      //set setting back to false so its not ticked after reboot\n      this.settings['reboot'].value = false;\n      this.broadcastSettingsToClients();\n      //reboot after 10 sec\n      setTimeout(() => {\n        this.execCommand(`sudo reboot`);\n      }, 10000);\n    }\n    // check if OS is the BBB\n    OsUtils.systemInfo()\n      .then(e => {\n        if (e.system.model === \"GENERIC AM33XX (FLATTENED DEVICE TREE)\") {\n          if (checkIpSettingsEth0 && writeChanges) {\n            //network update\n            if (interfaceTypeEth0 == 0) {\n              //DHCP\n              this.title = 'Adapter' + +' ' + '(DHCP)';\n              IpAddressUtils.bbbGetInterfaceDetails()\n                .then(e => {\n                  this.msgOut(this.messageOutput, `'MSG: get interface ID' ${e}`);\n                  IpAddressUtils.bbbSetIPDHCP(e)\n                    .then(e => {\n                      this.msgOut(this.messageOutput, `'MSG: set ip to DHCP' ${e}`);\n                    })\n                    .catch(err => {\n                      this.msgOut(this.messageOutput, `'ERROR: setting to DHCP' ${err}`);\n                    });\n                })\n                .catch(err => {\n                  this.msgOut(this.messageOutput, `'ERROR: setting to DHCP' ${err}`);\n                });\n            } else if (interfaceTypeEth0 == 1) {\n              //Static\n              this.title = 'Adapter' + ' ' + '(Static)';\n              IpAddressUtils.bbbGetInterfaceDetails()\n                .then(iface => {\n                  //iface, ipAddress, subnetMask, gateway\n                  IpAddressUtils.bbbSetIPFixed(iface, newIpEth0, netNetmaskEth0, newGatewayEth0)\n                    .then(e => {\n                      this.msgOut(this.messageOutput, `'MSG: set ip to fixed IP' ${e}`);\n                    })\n                    .catch(err => {\n                      this.msgOut(this.messageOutput, `'ERROR: setting to fixed IP' ${err}`);\n                    });\n                })\n                .catch(err => {\n                  this.msgOut(this.messageOutput, `'ERROR: setting to fixed IP' ${err}`);\n                });\n            }\n          } else {\n            this.msgOut(this.messageOutput, 'invalid ip settings');\n          }\n        } else {\n          // set node to red to show its the incorrect device type\n          NodeColours.nodeColourChange(this, NodeState.ERROR);\n          this.msgOut(this.messageOutput, `'ERROR: incorrect device type ${e.system.model}`)\n        }\n      }).catch(err => this.msgOut(this.messageOutput, `'ERROR: incorrect device type' ${err}`));\n\n    if (!writeChanges) {\n      // user didnt toggle the save button\n      this.msgOut(this.messageOutput, 'nothing saved' + ' ' + this.timeStamp);\n      this.msgOut(this.errorOutput, true);\n    }\n\n\n  }\n\n  //msg output\n  msgOut = (num: number, msg: any) => {\n    this.setOutputData(num, msg);\n  };\n\n  execCommand(command: string) {\n    if (this.side !== Side.server) return;\n    try {\n      exec(command, (err, stdout, stderr) => {\n        this.msgOut(this.messageOutput, 'called command' + ' ' + command + ' ' + this.timeStamp);\n        if (stdout) {\n          this.msgOut(this.messageOutput, stdout + ' ' + this.timeStamp);\n          this.msgOut(this.errorOutput, false);\n        }\n        if (err) {\n          this.msgOut(this.messageOutput, err + ' ' + this.timeStamp);\n          this.msgOut(this.errorOutput, true);\n        }\n        if (stderr) {\n          this.msgOut(this.messageOutput, stderr + ' ' + this.timeStamp);\n          this.msgOut(this.errorOutput, true);\n        }\n      });\n    } catch (e) {\n      this.msgOut(this.messageOutput, e + ' ' + this.timeStamp);\n      this.msgOut(this.errorOutput, true);\n      // this.debugInfo(e);\n    }\n  }\n\n  getInterfaces() {\n    IpAddressUtils.getActiveNetworks()\n      .then(list => {\n        //eth0\n        const getInterfaceEth0 = list.filter(e => {\n          return e.name == this.interfaceEth0;\n        });\n        this.msgOut(this.eth0Ip, getInterfaceEth0[0].ip_address); //ip\n        this.msgOut(this.errorOutput, false); //error\n      })\n      .catch(err => {\n        this.msgOut(this.messageOutput, err);\n        this.msgOut(this.errorOutput, true);\n      });\n  }\n\n  enableNetwork(iface: string) {\n    try {\n      IpAddressUtils.networkUpDown(iface, 'up')\n        .then(r => {\n          console.log(r);\n          setTimeout(() => {\n            this.getInterfaces();\n          }, 5000);\n        })\n        .catch(e => console.log(e));\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  disableNetwork(iface: string) {\n    try {\n      IpAddressUtils.networkUpDown(iface, 'down')\n        .then(r => {\n          console.log(r);\n        })\n        .catch(err => console.log(err));\n    } catch (err) {\n      console.log(err);\n    }\n  }\n}\nContainer.registerNodeType('system/network-interface-edge-28', UpdateIPEdge28);\n","module.exports = require(\"network\");","import { exec } from 'child_process';\nimport { Container } from '../../../container';\nimport { Node, NodeState } from '../../../node';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport IpAddressUtils from '../../../utils/ip-address-utils';\nimport NodeColours from '../../../utils/nodes/node-colour-change';\nimport OsUtils from '../../../utils/os-utils';\n\nconst set_ip_address = require('set-ip-address'); //for setting IPs\nconst ip = require('ip'); //for checking if IPs are valid\n\nclass UpdateIP extends Node {\n  timeStamp = Utils.getTimeStamp();\n\n  interfaceEth0 = 'eth0'; //eth0 //wlp3s0\n  interfaceEth1 = 'eth1'; //eth0 //enp0s31f6\n\n  //outputs\n  eth0Ip = 0;\n  eth1Ip = 1;\n  messageOutput = 2;\n  errorOutput = 3;\n\n  constructor() {\n    super();\n    this.title = 'Network Interfaces';\n    this.description =\n      'This node is used to configure the network (IP) interfaces for the device.  Changes made to settings will only be saved if ‘Save changes on save’ is toggled ON.  In some cases a reboot will be required to save the changes, if ‘Reboot’ is toggled ON, then clicking ‘save’ will reboot the controller.      NOTE: Making changes on a remote device could cause the device to become inaccessible.';\n    this.addInput('get interface address', Type.BOOLEAN);\n    this.addInput('enable eth0 ', Type.BOOLEAN);\n    this.addInput('enable eth1 ', Type.BOOLEAN);\n    this.addOutput('ip eth0', Type.STRING);\n    this.addOutput('ip eth1', Type.STRING);\n    this.addOutput('message', Type.STRING);\n    this.addOutput('error', Type.STRING);\n\n    this.settings['writeChanges'] = NodeSetting.create({\n      description: 'Save changes on save',\n      type: SettingType.BOOLEAN,\n      value: false,\n    });\n\n    this.settings['reboot'] = NodeSetting.create({\n      description: 'Reboot. Warning this will reboot the device',\n      type: SettingType.BOOLEAN,\n      value: false,\n    });\n\n    this.settings['eth0_group'] = NodeSetting.create({\n      description: 'ETH-1', //rubix port 1\n      value: '',\n      type: SettingType.GROUP,\n    });\n\n    this.settings['interfaceTypeEth0'] = NodeSetting.create({\n      description: 'Interface Type eth0',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'DHCP' },\n          { value: 1, text: 'Static' },\n        ],\n      },\n      value: 0,\n    });\n    this.settings['newIpEth0'] = NodeSetting.create({\n      description: 'IP',\n      value: '192.168.0.40',\n      type: SettingType.STRING,\n    });\n\n    this.settings['netNetmaskEth0'] = NodeSetting.create({\n      description: 'Netmask eth0',\n      value: '255.255.255.0',\n      type: SettingType.STRING,\n    });\n    this.settings['newGatewayEth0'] = NodeSetting.create({\n      description: 'Gateway',\n      value: '192.168.0.1',\n      type: SettingType.STRING,\n    });\n\n    this.settings['newNameServerEth0'] = NodeSetting.create({\n      description: 'Name Servers eth0',\n      value: '8.8.8.8',\n      type: SettingType.STRING,\n    });\n\n    this.settings['eth1_group'] = NodeSetting.create({\n      description: 'ETH-2', //rubix port 2\n      value: '',\n      type: SettingType.GROUP,\n    });\n\n    this.settings['interfaceTypeEth1'] = NodeSetting.create({\n      description: 'Interface Type eth1',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'DHCP' },\n          { value: 1, text: 'Static' },\n        ],\n      },\n      value: 0,\n    });\n    this.settings['newIpEth1'] = NodeSetting.create({\n      description: 'IP',\n      value: '192.168.1.40',\n      type: SettingType.STRING,\n    });\n\n    this.settings['netNetmaskEth1'] = NodeSetting.create({\n      description: 'Netmask eth1',\n      value: '255.255.255.0',\n      type: SettingType.STRING,\n    });\n    this.settings['newGatewayEth1'] = NodeSetting.create({\n      description: 'Gateway',\n      value: '192.168.1.1',\n      type: SettingType.STRING,\n    });\n\n    this.settings['newNameServerEth1'] = NodeSetting.create({\n      description: 'Name Servers eth1',\n      value: '8.8.8.8',\n      type: SettingType.STRING,\n    });\n\n    this.setSettingsConfig({\n      groups: [\n        { newIpEth0: {}, netNetmaskEth0: {} },\n        { newGatewayEth0: {}, newNameServerEth0: {} },\n        { newIpEth1: {}, netNetmaskEth1: {} },\n        { newGatewayEth1: {}, newNameServerEth1: {} },\n      ],\n      conditions: {\n        newIpEth0: setting => {\n          const val = setting['interfaceTypeEth0'].value;\n          return ![0].includes(val);\n        },\n        netNetmaskEth0: setting => {\n          const val = setting['interfaceTypeEth0'].value;\n          return ![0].includes(val);\n        },\n        newGatewayEth0: setting => {\n          const val = setting['interfaceTypeEth0'].value;\n          return ![0].includes(val);\n        },\n        newNameServerEth0: setting => {\n          const val = setting['interfaceTypeEth0'].value;\n          return ![0].includes(val);\n        },\n        newIpEth1: setting => {\n          const val = setting['interfaceTypeEth1'].value;\n          return ![0].includes(val);\n        },\n        netNetmaskEth1: setting => {\n          const val = setting['interfaceTypeEth1'].value;\n          return ![0].includes(val);\n        },\n        newGatewayEth1: setting => {\n          const val = setting['interfaceTypeEth1'].value;\n          return ![0].includes(val);\n        },\n        newNameServerEth1: setting => {\n          const val = setting['interfaceTypeEth1'].value;\n          return ![0].includes(val);\n        },\n      },\n    });\n  }\n\n  onAdded() {\n    setTimeout(() => {\n      this.getInterfaces();\n    }, 2000);\n  }\n\n  onInputUpdated() {\n    let enableInterfaceEth0 = this.getInputData(1);\n    let enableInterfaceEth1 = this.getInputData(2);\n\n    //refresh the interfaces\n    if (this.inputs[0].updated) {\n      this.msgOut(this.messageOutput, 'called getInterfaces' + ' ' + this.timeStamp);\n      setTimeout(() => {\n        this.getInterfaces();\n      }, 2000);\n    }\n    // enable/disable eth0\n    if (this.inputs[1].updated) {\n      if (enableInterfaceEth0 === true) {\n        this.msgOut(this.messageOutput, 'called enable ETH-1 true' + ' ' + this.timeStamp);\n        this.enableNetwork(this.interfaceEth0);\n      } else if (enableInterfaceEth0 === false) {\n        this.msgOut(this.messageOutput, 'called disable ETH-1 false' + ' ' + this.timeStamp);\n        this.disableNetwork(this.interfaceEth0);\n      }\n    }\n    // enable/disable eth1\n    if (this.inputs[2].updated) {\n      if (enableInterfaceEth1 === true) {\n        this.msgOut(this.messageOutput, 'called enable ETH-2 true' + ' ' + this.timeStamp);\n        this.enableNetwork(this.interfaceEth1);\n      } else if (enableInterfaceEth1 === false) {\n        this.msgOut(this.messageOutput, 'called disable ETH-2 false' + ' ' + this.timeStamp);\n        this.disableNetwork(this.interfaceEth1);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return; // only execute on server\n    const newIpEth0 = this.settings['newIpEth0'].value;\n    const netNetmaskEth0 = this.settings['netNetmaskEth0'].value;\n    const newGatewayEth0 = this.settings['newGatewayEth0'].value;\n    const newNameServerEth0 = this.settings['newNameServerEth0'].value;\n    const interfaceTypeEth0 = this.settings['interfaceTypeEth0'].value;\n\n    const newIpEth1 = this.settings['newIpEth1'].value;\n    const netNetmaskEth1 = this.settings['netNetmaskEth1'].value;\n    const newGatewayEth1 = this.settings['newGatewayEth1'].value;\n    const newNameServerEth1 = this.settings['newNameServerEth1'].value;\n    const interfaceTypeEth1 = this.settings['interfaceTypeEth1'].value;\n\n    const writeChanges = this.settings['writeChanges'].value;\n    const reboot = this.settings['reboot'].value;\n\n    const checkIpSettingsEth0 = IpAddressUtils.checkIpValid(\n      newIpEth0,\n      netNetmaskEth0,\n      newGatewayEth0,\n      newNameServerEth0,\n    );\n    const checkIpSettingsEth1 = IpAddressUtils.checkIpValid(\n      newIpEth1,\n      netNetmaskEth1,\n      newGatewayEth1,\n      newNameServerEth1,\n    );\n    //device reboot\n    if (reboot) {\n      this.msgOut(\n        this.messageOutput,\n        'called sudo reboot will reboot in 10 sec' + ' ' + this.timeStamp,\n      );\n      //set setting back to false so its not ticked after reboot\n      this.settings['reboot'].value = false;\n      this.broadcastSettingsToClients();\n      //reboot after 10 sec\n      setTimeout(() => {\n        this.execCommand(`sudo reboot`);\n      }, 10000);\n    }\n\n    // check if OS is the PI\n    OsUtils.systemInfo()\n      .then(e => {\n        if (e.system.model === \"BCM2835\") {\n          if (checkIpSettingsEth0 && checkIpSettingsEth1 && writeChanges) {\n            //network update\n            let interfacesArray = [];\n            if (interfaceTypeEth0 == 0) {\n              //DHCP\n              this.title = 'Adapter' + +' ' + '(DHCP)';\n              let eth0 = {\n                interface: this.interfaceEth0,\n                dhcp: true,\n              };\n              interfacesArray.push(eth0);\n            }\n            if (interfaceTypeEth0 == 1) {\n              //Static\n              this.title = 'Adapter' + ' ' + '(Static)';\n              let subnetMaskLength = ip.subnet(newIpEth0, netNetmaskEth0);\n              let eth0 = {\n                interface: this.interfaceEth0,\n                ip_address: newIpEth0,\n                prefix: subnetMaskLength.subnetMaskLength,\n                gateway: newGatewayEth0,\n                nameservers: [newNameServerEth0],\n              };\n              interfacesArray.push(eth0);\n            }\n\n            if (interfaceTypeEth1 == 0) {\n              //DHCP\n              this.title = 'Adapter' + +' ' + '(DHCP)';\n              let eth1 = {\n                interface: this.interfaceEth1,\n                dhcp: true,\n              };\n              interfacesArray.push(eth1);\n            }\n\n            if (interfaceTypeEth1 == 1) {\n              //Static\n              this.title = 'Adapter' + ' ' + '(Static)';\n              let subnetMaskLength = ip.subnet(newIpEth1, netNetmaskEth1);\n              let eth1 = {\n                interface: this.interfaceEth1,\n                ip_address: newIpEth1,\n                prefix: subnetMaskLength.subnetMaskLength,\n                gateway: newGatewayEth1,\n                nameservers: [newNameServerEth1],\n              };\n              interfacesArray.push(eth1);\n            }\n            set_ip_address.configure(interfacesArray).then(() => {\n              this.msgOut(this.messageOutput, 'updated' + ' ' + this.timeStamp);\n              this.msgOut(this.errorOutput, false);\n            });\n          } else this.msgOut(this.messageOutput, 'invalid ip settings');\n        } else {\n          // set node to red to show its the incorrect device type\n          NodeColours.nodeColourChange(this, NodeState.ERROR);\n          this.msgOut(this.messageOutput, `'ERROR: incorrect device type ${e.system.model}`)\n        }\n      }).catch(err => this.msgOut(this.messageOutput, `'ERROR: incorrect device type' ${err}`));\n\n    if (!writeChanges) {\n      // user didnt toggle the save button\n      this.msgOut(this.messageOutput, 'nothing saved' + ' ' + this.timeStamp);\n      this.msgOut(this.errorOutput, true);\n    }\n  }\n  //msg output\n  msgOut = (num: number, msg: any) => {\n    this.setOutputData(num, msg);\n  };\n\n  execCommand(command: string) {\n    if (this.side !== Side.server) return;\n    try {\n      exec(command, (err, stdout, stderr) => {\n        this.msgOut(this.messageOutput, 'called command' + ' ' + command + ' ' + this.timeStamp);\n        if (stdout) {\n          this.msgOut(this.messageOutput, stdout + ' ' + this.timeStamp);\n          this.msgOut(this.errorOutput, false);\n        }\n        if (err) {\n          this.msgOut(this.messageOutput, err + ' ' + this.timeStamp);\n          this.msgOut(this.errorOutput, true);\n        }\n        if (stderr) {\n          this.msgOut(this.messageOutput, stderr + ' ' + this.timeStamp);\n          this.msgOut(this.errorOutput, true);\n        }\n      });\n    } catch (e) {\n      this.msgOut(this.messageOutput, e + ' ' + this.timeStamp);\n      this.msgOut(this.errorOutput, true);\n      // this.debugInfo(e);\n    }\n  }\n\n  getInterfaces() {\n    IpAddressUtils.getActiveNetworks()\n      .then(list => {\n        //eth0\n        const getInterfaceEth0 = list.filter(e => {\n          return e.name == this.interfaceEth0;\n        });\n        this.msgOut(this.eth0Ip, getInterfaceEth0[0].ip_address); //ip\n        this.msgOut(this.errorOutput, false); //error\n\n        //eth1\n        const getInterfaceEth1 = list.filter(e => {\n          return e.name == this.interfaceEth1;\n        });\n        this.msgOut(this.eth1Ip, getInterfaceEth1[0].ip_address); //ip\n        this.msgOut(this.errorOutput, false); //error\n      })\n      .catch(err => {\n        this.msgOut(this.messageOutput, err);\n        this.msgOut(this.errorOutput, true);\n      });\n  }\n\n  enableNetwork(iface: string) {\n    try {\n      IpAddressUtils.networkUpDown(iface, 'up')\n        .then(r => {\n          console.log(r);\n          setTimeout(() => {\n            this.getInterfaces();\n          }, 5000);\n        })\n        .catch(e => console.log(e));\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  disableNetwork(iface: string) {\n    try {\n      IpAddressUtils.networkUpDown(iface, 'down')\n        .then(r => {\n          console.log(r);\n        })\n        .catch(err => console.log(err));\n    } catch (err) {\n      console.log(err);\n    }\n  }\n}\nContainer.registerNodeType('system/network-interfaces', UpdateIP);\n","import { exec } from 'child_process';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nconst pkg = require('../../../../package.json');\n\nclass WiresVersion extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.system[\"system-build-version\"].title;\n    this.description = NODE_INFO.system[\"system-build-version\"].description;\n    this.addInput('in1', Type.STRING);\n    this.addOutput('wires-version', Type.STRING);\n    this.addOutput('nodejs-version', Type.STRING);\n    this.addOutput('npm-version', Type.STRING);\n    this.addOutput('json out', Type.STRING);\n    this.addOutput('error', Type.STRING);\n  }\n\n  getCurrentWiresVersion() {\n    return new Promise(function(resolve) {\n      return resolve({\n        version: pkg.version,\n      });\n    });\n  }\n\n  getNodeJsVersion() {\n    return new Promise((resolve, reject) => {\n      exec('node -v', (err, stdout, stderr) => {\n        if (err) {\n          reject(err);\n          return;\n        } else {\n          resolve({\n            stdout,\n          });\n        }\n      });\n    });\n  }\n\n  getNPMVersion() {\n    return new Promise((resolve, reject) => {\n      exec('npm -v', (err, stdout, stderr) => {\n        if (err) {\n          reject(err);\n          return;\n        } else {\n          resolve({\n            stdout,\n          });\n        }\n      });\n    });\n  }\n\n  onInputUpdated() {\n    let arr = [];\n\n    // wires build\n    this.getCurrentWiresVersion()\n      .then(r => {\n        r = JSON.stringify(r)\n          .replace(/\\\\n/g, '')\n          .split('version')\n          .join('wires version');\n        arr.push(r);\n        this.setOutputData(0, r);\n      })\n      .catch(e => {\n        this.setOutputData(4, e);\n      });\n    // nodejs version\n    this.getNodeJsVersion()\n      .then(r => {\n        r = JSON.stringify(r)\n          .replace(/\\\\n/g, '')\n          .split('stdout')\n          .join('nodejs version');\n        arr.push(r);\n        this.setOutputData(1, r);\n      })\n      .catch(e => {\n        this.setOutputData(4, e);\n      });\n    // npm version\n    this.getNPMVersion()\n      .then(r => {\n        r = JSON.stringify(r)\n          .replace(/\\\\n/g, '')\n          .split('stdout')\n          .join('npm version');\n        arr.push(r);\n        this.setOutputData(3, arr); //json out\n        this.setOutputData(2, r);\n      })\n      .catch(e => {\n        this.setOutputData(4, e);\n      });\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('system/system-build-version', WiresVersion);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nexport class TimeConvertNode extends Node {\n  conversionFunction;\n  constructor() {\n    super();\n    this.title = NODE_INFO.time.conversion.title;\n    this.description = NODE_INFO.time.conversion.description;\n    this.addInput('min', Type.NUMBER);\n    this.addOutput('day', Type.NUMBER);\n    this.addOutput('hour', Type.NUMBER);\n    this.addOutput('sec', Type.NUMBER);\n    this.addOutput('milli', Type.NUMBER);\n    this.settings['inputType'] = NodeSetting.create({\n      description: 'Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'day', text: 'Days (day)' },\n          { value: 'hour', text: 'Hours (hour)' },\n          { value: 'min', text: 'Minutes (min)' },\n          { value: 'sec', text: 'Seconds (sec)' },\n          { value: 'milli', text: 'Milliseconds(milli)' },\n        ],\n      },\n      value: 'min',\n    });\n    this.settings['precision'] = NodeSetting.create({ description: 'Precision', type: SettingType.NUMBER, value: '2' });\n    this.conversionFunction = input => {\n      let outputArray: number[] = [null, null, null, null];\n      outputArray[0] = input * 0.000694444;\n      outputArray[1] = input * 0.016666667;\n      outputArray[2] = input * 60;\n      outputArray[3] = input * 60000;\n      return outputArray;\n    };\n  }\n\n  onAdded() {\n    this.setConversionFunction();\n    this.onAfterSettingsChange()\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.setConversionFunction();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    const input = this.getInputData(0);\n    if (!Utils.hasInput(input)) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n      this.setOutputData(2, null);\n      this.setOutputData(3, null);\n      this.setOutputData(4, null);\n      return;\n    }\n    const output = this.conversionFunction(input);\n    const precision = Math.abs(this.settings['precision'].value);\n    this.setOutputData(0, Number(output[0]).toFixed(precision));\n    this.setOutputData(1, Number(output[1]).toFixed(precision));\n    this.setOutputData(2, Number(output[2]).toFixed(precision));\n    this.setOutputData(3, Number(output[3]).toFixed(precision));\n    this.setOutputData(4, Number(output[4]).toFixed(precision));\n  }\n\n  setConversionFunction() {\n    const inputType = this.settings['inputType'].value;\n    switch (inputType) {\n      case 'min':\n        this.title = 'Time Conversion (min)';\n        this.inputs[0].name = 'min';\n        this.outputs[0].name = 'day';\n        this.outputs[1].name = 'hour';\n        this.outputs[2].name = 'sec';\n        this.outputs[3].name = 'milli';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null];\n          outputArray[0] = input * 0.000694444;\n          outputArray[1] = input * 0.016666667;\n          outputArray[2] = input * 60;\n          outputArray[3] = input * 60000;\n          return outputArray;\n        };\n        break;\n      case 'sec':\n        this.title = 'Time Conversion (sec)';\n        this.inputs[0].name = 'sec';\n        this.outputs[0].name = 'day';\n        this.outputs[1].name = 'hour';\n        this.outputs[2].name = 'min';\n        this.outputs[3].name = 'milli';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null];\n          outputArray[0] = input * 1.1574e-5;\n          outputArray[1] = input * 0.000277778;\n          outputArray[2] = input * 0.016666667;\n          outputArray[3] = input * 1000;\n          return outputArray;\n        };\n        break;\n      case 'milli':\n        this.title = 'Time Conversion (milli)';\n        this.inputs[0].name = 'milli';\n        this.outputs[0].name = 'day';\n        this.outputs[1].name = 'hour';\n        this.outputs[2].name = 'min';\n        this.outputs[3].name = 'sec';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null];\n          outputArray[0] = input * 1.1574e-8;\n          outputArray[1] = input * 2.7778e-7;\n          outputArray[2] = input * 1.6667e-5;\n          outputArray[3] = input * 0.00100002;\n          return outputArray;\n        };\n        break;\n      case 'day':\n        this.title = 'Time Conversion (day)';\n        this.inputs[0].name = 'day';\n        this.outputs[0].name = 'hour';\n        this.outputs[1].name = 'min';\n        this.outputs[2].name = 'sec';\n        this.outputs[3].name = 'milli';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null];\n          outputArray[0] = input * 24;\n          outputArray[1] = input * 1440;\n          outputArray[2] = input * 86400;\n          outputArray[3] = input * 8.64e7;\n          return outputArray;\n        };\n        break;\n      case 'hour':\n        this.title = 'Time Conversion (hour)';\n        this.inputs[0].name = 'hour';\n        this.outputs[0].name = 'day';\n        this.outputs[1].name = 'min';\n        this.outputs[2].name = 'sec';\n        this.outputs[3].name = 'milli';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null];\n          outputArray[0] = input * 0.0416667;\n          outputArray[1] = input * 60;\n          outputArray[2] = input * 3600;\n          outputArray[3] = input * 3.6e6;\n          return outputArray;\n        };\n        break;\n      default:\n        this.title = 'Time Conversion (min)';\n        this.inputs[0].name = 'min';\n        this.outputs[0].name = 'day';\n        this.outputs[1].name = 'hour';\n        this.outputs[2].name = 'sec';\n        this.outputs[3].name = 'milli';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null];\n          outputArray[0] = input * 0.000694444;\n          outputArray[1] = input * 0.016666667;\n          outputArray[2] = input * 60;\n          outputArray[3] = input * 60000;\n          return outputArray;\n        };\n    }\n  }\n}\nContainer.registerNodeType('time/conversion', TimeConvertNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nenum TIME_TYPE {\n  TIME = 'time string as input',\n  EPOCH = 'time epoch as input',\n  NEW_TS = 'time now',\n}\n\nexport class TimeConvertPlusNode extends Node {\n  conversionFunction;\n  constructor() {\n    super();\n    this.title = NODE_INFO.time[\"conversion-plus\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO.time[\"conversion-plus\"].description +` \\n ` +\n      ` ## Example output\\n ` +\n      ` ***{\"date\":\"Mon Aug 17 2020\",\"yearMonthDay\":\"2020-08-17\",\"year\":\"2020\",\"month\":\"Aug\",\"monthAsNumber\":\"08\",\"dayAsNumber\":\"17\",\"dayOfYearNumber\":\"230\",\"day\":\"Mon\",\"pmOrAm\":\"PM\",\"hourAsAmPm\":\"8\",\"hour\":\"20\",\"timeHourMin\":\"20:26\",\"time\":\"20:26:49\",\"minute\":\"26\",\"minutesSeconds\":\"26:49\",\"seconds\":\"49\",\"milliseconds\":\"000\",\"epoch\":\"1597660009000\",\"rawDate\":\"2020-08-17T10:26:49.000Z\"}***\\n `\n\n    this.addInput('input', Type.ANY);\n    this.addOutput('out-json', Type.JSON);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Time',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.TIME, text: TIME_TYPE.TIME },\n          { value: TIME_TYPE.EPOCH, text: TIME_TYPE.EPOCH },\n          { value: TIME_TYPE.NEW_TS, text: TIME_TYPE.NEW_TS },\n        ],\n      },\n      value: TIME_TYPE.TIME,\n    });\n  }\n\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    const result = this.timeSelection(input)\n    const out = TimeUtils.timeConvertPlus(result)\n    this.setOutputData(0, out);\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated()\n\n  }\n\n  timeSelection(input: any){\n    const timeType = this.settings['time'].value\n    let timeSelection = null;\n    if (timeType === TIME_TYPE.TIME) {\n      timeSelection = new Date(input);\n    } else if (timeType === TIME_TYPE.EPOCH) {\n      timeSelection = new Date(parseInt(input));\n    } else if (timeType === TIME_TYPE.NEW_TS) {\n      timeSelection = new Date();\n    }\n    return timeSelection;\n  }\n\n}\nContainer.registerNodeType('time/conversion-plus', TimeConvertPlusNode);\n","import * as moment from 'moment-timezone';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimezoneUtils from '../../utils/timezone-utils';\n\nexport class TimezoneConvertNode extends Node {\n  conversionFunction;\n  constructor() {\n    super();\n    this.title = NODE_INFO.time[\"timezone-conversion\"].title;\n    this.description = NODE_INFO.time[\"timezone-conversion\"].description;\n\n    this.addInput('input', Type.ANY);\n    this.addOutput('out-time-converted', Type.ANY);\n    this.addOutput('out-local-converted', Type.ANY);\n\n    this.settings['region'] = NodeSetting.create({\n      description: 'Select Region',\n      type: SettingType.AUTOCOMPLETE,\n      config: {\n        items: TimezoneUtils.tsCategory,\n      },\n    });\n    this.settings['timezone'] = NodeSetting.create({\n      description: 'Select TimeZone (Hit save to refresh)',\n      value: \"Sydney/Australia\",\n      type: SettingType.DROPDOWN,\n    });\n\n  }\n  onAdded() {\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    try {\n      const m = moment.tz(input, this.settings['timezone'].value);\n      const local = moment(input);\n      this.setOutputData(0, m.format());\n      this.setOutputData(1, local.format());\n    } catch (e) {\n      this.debugWarn(`ERROR: trying to convert a timezone${e}`);\n    }\n\n  }\n\n  onAfterSettingsChange() {\n    const region = this.settings['region'].value;\n    this.settings['timezone'].config = {\n      items: TimezoneUtils.tsType(region),\n    };\n    this.broadcastSettingsToClients();\n    this.onInputUpdated()\n\n  }\n\n\n\n}\nContainer.registerNodeType('time/timezone-conversion', TimezoneConvertNode);\n","enum TIME_TYPE {\n    africaZones = 'Africa',\n    americaZones = 'America',\n    antarcticaZones = 'Antarctica',\n    asiaZones = 'Asia',\n    atlanticZones = 'Atlantic',\n    australiaZones = 'Australia',\n    europeZones = 'Europe',\n    indianZones = 'Indian',\n    pacificZones = 'Pacific',\n}\n\nexport default class TimezoneUtils {\n    static tsCategory = [TIME_TYPE.africaZones, TIME_TYPE.americaZones, TIME_TYPE.antarcticaZones, TIME_TYPE.asiaZones, TIME_TYPE.atlanticZones, TIME_TYPE.australiaZones, TIME_TYPE.europeZones, TIME_TYPE.indianZones, TIME_TYPE.pacificZones].map(\n        point => {\n            return { value: point, text: point };\n        },\n    );\n\n    static tsType(type: string) {\n        switch (type) {\n            case TIME_TYPE.africaZones:\n                return Object.values(this.africaZones);\n            case TIME_TYPE.americaZones:\n                return Object.values(this.americaZones);\n            case TIME_TYPE.antarcticaZones:\n                return Object.values(this.antarcticaZones);\n            case TIME_TYPE.asiaZones:\n                return Object.values(this.asiaZones);\n            case TIME_TYPE.atlanticZones:\n                return Object.values(this.atlanticZones);\n            case TIME_TYPE.australiaZones:\n                return Object.values(this.australiaZones);\n            case TIME_TYPE.europeZones:\n                return Object.values(this.europeZones);\n            case TIME_TYPE.indianZones:\n                return Object.values(this.indianZones);\n            case TIME_TYPE.pacificZones:\n                return Object.values(this.pacificZones);\n        }\n    }\n\n    static europeZones = [\n        'Europe/Amsterdam',\n        'Europe/Andorra',\n        'Europe/Astrakhan',\n        'Europe/Athens',\n        'Europe/Belgrade',\n        'Europe/Berlin',\n        'Europe/Brussels',\n        'Europe/Bucharest',\n        'Europe/Budapest',\n        'Europe/Chisinau',\n        'Europe/Copenhagen',\n        'Europe/Dublin',\n        'Europe/Gibraltar',\n        'Europe/Helsinki',\n        'Europe/Istanbul',\n        'Europe/Kaliningrad',\n        'Europe/Kiev',\n        'Europe/Kirov',\n        'Europe/Lisbon',\n        'Europe/London',\n        'Europe/Luxembourg',\n        'Europe/Madrid',\n        'Europe/Malta',\n        'Europe/Minsk',\n        'Europe/Monaco',\n        'Europe/Moscow',\n        'Europe/Oslo',\n        'Europe/Paris',\n        'Europe/Prague',\n        'Europe/Riga',\n        'Europe/Rome',\n        'Europe/Samara',\n        'Europe/Saratov',\n        'Europe/Simferopol',\n        'Europe/Sofia',\n        'Europe/Stockholm',\n        'Europe/Tallinn',\n        'Europe/Tirane',\n        'Europe/Ulyanovsk',\n        'Europe/Uzhgorod',\n        'Europe/Vienna',\n        'Europe/Vilnius',\n        'Europe/Volgograd',\n        'Europe/Warsaw',\n        'Europe/Zaporozhye',\n        'Europe/Zurich',\n    ];\n\n    static africaZones = [\n        'Africa/Abidjan',\n        'Africa/Accra',\n        'Africa/Algiers',\n        'Africa/Bissau',\n        'Africa/Cairo',\n        'Africa/Casablanca',\n        'Africa/Ceuta',\n        'Africa/El_Aaiun',\n        'Africa/Johannesburg',\n        'Africa/Juba',\n        'Africa/Khartoum',\n        'Africa/Lagos',\n        'Africa/Maputo',\n        'Africa/Monrovia',\n        'Africa/Nairobi',\n        'Africa/Ndjamena',\n        'Africa/Sao_Tome',\n        'Africa/Tripoli',\n        'Africa/Tunis',\n        'Africa/Windhoek',\n    ];\n\n    static asiaZones = [\n        'Asia/Almaty',\n        'Asia/Amman',\n        'Asia/Anadyr',\n        'Asia/Aqtau',\n        'Asia/Aqtobe',\n        'Asia/Ashgabat',\n        'Asia/Atyrau',\n        'Asia/Baghdad',\n        'Asia/Baku',\n        'Asia/Bangkok',\n        'Asia/Barnaul',\n        'Asia/Beirut',\n        'Asia/Bishkek',\n        'Asia/Brunei',\n        'Asia/Chita',\n        'Asia/Choibalsan',\n        'Asia/Colombo',\n        'Asia/Damascus',\n        'Asia/Dhaka',\n        'Asia/Dili',\n        'Asia/Dubai',\n        'Asia/Dushanbe',\n        'Asia/Famagusta',\n        'Asia/Gaza',\n        'Asia/Hebron',\n        'Asia/Ho_Chi_Minh',\n        'Asia/Hong_Kong',\n        'Asia/Hovd',\n        'Asia/Irkutsk',\n        'Asia/Jakarta',\n        'Asia/Jayapura',\n        'Asia/Jerusalem',\n        'Asia/Kabul',\n        'Asia/Kamchatka',\n        'Asia/Karachi',\n        'Asia/Kathmandu',\n        'Asia/Khandyga',\n        'Asia/Kolkata',\n        'Asia/Krasnoyarsk',\n        'Asia/Kuala_Lumpur',\n        'Asia/Kuching',\n        'Asia/Macau',\n        'Asia/Magadan',\n        'Asia/Makassar',\n        'Asia/Manila',\n        'Asia/Nicosia',\n        'Asia/Novokuznetsk',\n        'Asia/Novosibirsk',\n        'Asia/Omsk',\n        'Asia/Oral',\n        'Asia/Pontianak',\n        'Asia/Pyongyang',\n        'Asia/Qatar',\n        'Asia/Qostanay',\n        'Asia/Qyzylorda',\n        'Asia/Riyadh',\n        'Asia/Sakhalin',\n        'Asia/Samarkand',\n        'Asia/Seoul',\n        'Asia/Shanghai',\n        'Asia/Singapore',\n        'Asia/Srednekolymsk',\n        'Asia/Taipei',\n        'Asia/Tashkent',\n        'Asia/Tbilisi',\n        'Asia/Tehran',\n        'Asia/Thimphu',\n        'Asia/Tokyo',\n        'Asia/Tomsk',\n        'Asia/Ulaanbaatar',\n        'Asia/Urumqi',\n        'Asia/Ust-Nera',\n        'Asia/Vladivostok',\n        'Asia/Yakutsk',\n        'Asia/Yangon',\n        'Asia/Yekaterinburg',\n        'Asia/Yerevan',\n    ];\n\n    static antarcticaZones = [\n        'Antarctica/Casey',\n        'Antarctica/Davis',\n        'Antarctica/DumontDUrville',\n        'Antarctica/Macquarie',\n        'Antarctica/Mawson',\n        'Antarctica/Palmer',\n        'Antarctica/Rothera',\n        'Antarctica/Syowa',\n        'Antarctica/Troll',\n        'Antarctica/Vostok',\n    ];\n\n    static americaZones = [\n        'America/Adak',\n        'America/Anchorage',\n        'America/Araguaina',\n        'America/Argentina/Buenos_Aires',\n        'America/Argentina/Catamarca',\n        'America/Argentina/Cordoba',\n        'America/Argentina/Jujuy',\n        'America/Argentina/La_Rioja',\n        'America/Argentina/Mendoza',\n        'America/Argentina/Rio_Gallegos',\n        'America/Argentina/Salta',\n        'America/Argentina/San_Juan',\n        'America/Argentina/San_Luis',\n        'America/Argentina/Tucuman',\n        'America/Argentina/Ushuaia',\n        'America/Asuncion',\n        'America/Atikokan',\n        'America/Bahia',\n        'America/Bahia_Banderas',\n        'America/Barbados',\n        'America/Belem',\n        'America/Belize',\n        'America/Blanc-Sablon',\n        'America/Boa_Vista',\n        'America/Bogota',\n        'America/Boise',\n        'America/Cambridge_Bay',\n        'America/Campo_Grande',\n        'America/Cancun',\n        'America/Caracas',\n        'America/Cayenne',\n        'America/Chicago',\n        'America/Chihuahua',\n        'America/Costa_Rica',\n        'America/Creston',\n        'America/Cuiaba',\n        'America/Curacao',\n        'America/Danmarkshavn',\n        'America/Dawson',\n        'America/Dawson_Creek',\n        'America/Denver',\n        'America/Detroit',\n        'America/Edmonton',\n        'America/Eirunepe',\n        'America/El_Salvador',\n        'America/Fort_Nelson',\n        'America/Fortaleza',\n        'America/Glace_Bay',\n        'America/Godthab',\n        'America/Goose_Bay',\n        'America/Grand_Turk',\n        'America/Guatemala',\n        'America/Guayaquil',\n        'America/Guyana',\n        'America/Halifax',\n        'America/Havana',\n        'America/Hermosillo',\n        'America/Indiana/Indianapolis',\n        'America/Indiana/Knox',\n        'America/Indiana/Marengo',\n        'America/Indiana/Petersburg',\n        'America/Indiana/Tell_City',\n        'America/Indiana/Vevay',\n        'America/Indiana/Vincennes',\n        'America/Indiana/Winamac',\n        'America/Inuvik',\n        'America/Iqaluit',\n        'America/Jamaica',\n        'America/Juneau',\n        'America/Kentucky/Louisville',\n        'America/Kentucky/Monticello',\n        'America/La_Paz',\n        'America/Lima',\n        'America/Los_Angeles',\n        'America/Maceio',\n        'America/Managua',\n        'America/Manaus',\n        'America/Martinique',\n        'America/Matamoros',\n        'America/Mazatlan',\n        'America/Menominee',\n        'America/Merida',\n        'America/Metlakatla',\n        'America/Mexico_City',\n        'America/Miquelon',\n        'America/Moncton',\n        'America/Monterrey',\n        'America/Montevideo',\n        'America/Nassau',\n        'America/New_York',\n        'America/Nipigon',\n        'America/Nome',\n        'America/Noronha',\n        'America/North_Dakota/Beulah',\n        'America/North_Dakota/Center',\n        'America/North_Dakota/New_Salem',\n        'America/Ojinaga',\n        'America/Panama',\n        'America/Pangnirtung',\n        'America/Paramaribo',\n        'America/Phoenix',\n        'America/Port-au-Prince',\n        'America/Port_of_Spain',\n        'America/Porto_Velho',\n        'America/Puerto_Rico',\n        'America/Punta_Arenas',\n        'America/Rainy_River',\n        'America/Rankin_Inlet',\n        'America/Recife',\n        'America/Regina',\n        'America/Resolute',\n        'America/Rio_Branco',\n        'America/Santarem',\n        'America/Santiago',\n        'America/Santo_Domingo',\n        'America/Sao_Paulo',\n        'America/Scoresbysund',\n        'America/Sitka',\n        'America/St_Johns',\n        'America/Swift_Current',\n        'America/Tegucigalpa',\n        'America/Thule',\n        'America/Thunder_Bay',\n        'America/Tijuana',\n        'America/Toronto',\n        'America/Vancouver',\n        'America/Whitehorse',\n        'America/Winnipeg',\n        'America/Yakutat',\n        'America/Yellowknife',\n    ];\n\n    static pacificZones = [\n        'Pacific/Apia',\n        'Pacific/Auckland',\n        'Pacific/Bougainville',\n        'Pacific/Chatham',\n        'Pacific/Chuuk',\n        'Pacific/Easter',\n        'Pacific/Efate',\n        'Pacific/Enderbury',\n        'Pacific/Fakaofo',\n        'Pacific/Fiji',\n        'Pacific/Funafuti',\n        'Pacific/Galapagos',\n        'Pacific/Gambier',\n        'Pacific/Guadalcanal',\n        'Pacific/Guam',\n        'Pacific/Honolulu',\n        'Pacific/Kiritimati',\n        'Pacific/Kosrae',\n        'Pacific/Kwajalein',\n        'Pacific/Majuro',\n        'Pacific/Marquesas',\n        'Pacific/Nauru',\n        'Pacific/Niue',\n        'Pacific/Norfolk',\n        'Pacific/Noumea',\n        'Pacific/Pago_Pago',\n        'Pacific/Palau',\n        'Pacific/Pitcairn',\n        'Pacific/Pohnpei',\n        'Pacific/Port_Moresby',\n        'Pacific/Rarotonga',\n        'Pacific/Tahiti',\n        'Pacific/Tarawa',\n        'Pacific/Tongatapu',\n        'Pacific/Wake',\n        'Pacific/Wallis',\n    ];\n\n    static australiaZones = [\n        'Australia/Adelaide',\n        'Australia/Brisbane',\n        'Australia/Broken_Hill',\n        'Australia/Currie',\n        'Australia/Darwin',\n        'Australia/Eucla',\n        'Australia/Hobart',\n        'Australia/Lindeman',\n        'Australia/Lord_Howe',\n        'Australia/Melbourne',\n        'Australia/Perth',\n        'Australia/Sydney',\n    ];\n\n    static atlanticZones = [\n        'Atlantic/Azores',\n        'Atlantic/Bermuda',\n        'Atlantic/Canary',\n        'Atlantic/Cape_Verde',\n        'Atlantic/Faroe',\n        'Atlantic/Madeira',\n        'Atlantic/Reykjavik',\n        'Atlantic/South_Georgia',\n        'Atlantic/Stanley',\n    ];\n\n    static indianZones = [\n        'Indian/Chagos',\n        'Indian/Christmas',\n        'Indian/Cocos',\n        'Indian/Kerguelen',\n        'Indian/Mahe',\n        'Indian/Maldives',\n        'Indian/Mauritius',\n        'Indian/Reunion',\n    ];\n\n\n}\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nconst moment = require('moment');\n\nexport class ClockNode extends Node {\n  lastInterval = 1000;\n  timeoutFunc;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.time.clock.title;\n    this.description = NODE_INFO.time.clock.description;\n    this.addOutput('timeString', Type.STRING);\n    this.addOutput('hour', Type.NUMBER);\n    this.addOutput('min', Type.NUMBER);\n    this.addOutput('sec', Type.NUMBER);\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Interval');\n\n    this.settings['time'] = NodeSetting.create({\n      description: 'Time',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ time: {}, interval: { weight: 2 } }],\n    });\n\n    this.settings['advanced'] = NodeSetting.create({\n      description: 'Show Advanced Options',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.properties['advancedOutputs'] = false;\n  }\n\n  init() {\n    if (this.settings['advanced'].value) {\n      this.addOutputs();\n    }\n  }\n\n  onAdded() {\n    this.inputs[0]['name'] = `[interval] (${this.settings['time'].value})`;\n    clearInterval(this.timeoutFunc);\n    let interval = this.getInputData(0);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    this.timeoutFunc = setInterval(() => {\n      this.recalculate();\n    }, interval);\n    this.lastInterval = interval;\n    this.recalculate();\n  }\n\n  onInputUpdated() {\n    let interval = this.getInputData(0);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    if (interval != this.lastInterval) {\n      this.lastInterval = interval;\n      clearInterval(this.timeoutFunc);\n      this.timeoutFunc = setInterval(() => {\n        this.recalculate();\n      }, interval);\n    }\n  }\n\n  recalculate() {\n    if (this.side !== Side.server) return;\n    const advanced = this.settings['advanced'].value;\n    const now = moment();\n    this.setOutputData(0, now.format('HH:mm:ss'), true);\n    this.setOutputData(1, now.hours(), true);\n    this.setOutputData(2, now.minutes(), true);\n    this.setOutputData(3, now.seconds(), true);\n    if (advanced) {\n      this.setOutputData(4, now.milliseconds(), true);\n      this.setOutputData(5, now.toString(), true);\n      this.setOutputData(6, now.utcOffset() / 60, true);\n      this.setOutputData(7, now.valueOf(), true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    const advanced = this.settings['advanced'].value;\n    this.inputs[0]['name'] = `[interval] (${this.settings['time'].value})`;\n    if (advanced && !this.properties['advancedOutputs']) {\n      this.addOutputs();\n      this.properties['advancedOutputs'] = true;\n      this.persistProperties(false, true);\n    } else if (!advanced && this.properties['advancedOutputs']) {\n      this.removeOutput(4);\n      this.removeOutput(5);\n      this.removeOutput(6);\n      this.removeOutput(7);\n      this.properties['advancedOutputs'] = false;\n      this.persistProperties(false, true);\n    }\n    this.updateNodeOutput();\n    this.onInputUpdated();\n  }\n\n  private addOutputs() {\n    this.addOutput('millis', Type.NUMBER);\n    this.addOutput('longString', Type.STRING);\n    this.addOutput('TZOffset', Type.NUMBER);\n    this.addOutput('epoch', Type.NUMBER);\n  }\n}\nContainer.registerNodeType('time/clock', ClockNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nexport class DateNode extends Node {\n  interval = 5000;\n  timeoutFunc;\n  constructor() {\n    super();\n    this.title = NODE_INFO.time.date.title;\n    this.description = NODE_INFO.time.date.description;\n    this.addOutput('dateString', Type.STRING);\n    this.addOutput('dayString', Type.STRING);\n    this.addOutput('dayOfWeek', Type.NUMBER);\n    this.addOutput('date', Type.NUMBER);\n    this.addOutput('month', Type.NUMBER);\n    this.addOutput('year', Type.NUMBER);\n  }\n\n  onAdded() {\n    clearInterval(this.timeoutFunc);\n    this.timeoutFunc = setInterval(() => {\n      this.recalculate();\n    }, this.interval);\n    this.recalculate();\n  }\n\n  recalculate() {\n    let now = new Date();\n    const day = now.getDay();\n    let dayString: string = null;\n    switch (day) {\n      case 0:\n        dayString = 'Sunday';\n        break;\n      case 1:\n        dayString = 'Monday';\n        break;\n      case 2:\n        dayString = 'Tuesday';\n        break;\n      case 3:\n        dayString = 'Wednesday';\n        break;\n      case 4:\n        dayString = 'Thursday';\n        break;\n      case 5:\n        dayString = 'Friday';\n        break;\n      case 6:\n        dayString = 'Saturday';\n        break;\n    }\n    this.setOutputData(0, now.toLocaleDateString(), true);\n    this.setOutputData(1, dayString, true);\n    this.setOutputData(2, day, true);\n    this.setOutputData(3, now.getDate(), true);\n    this.setOutputData(4, now.getMonth() + 1, true);\n    this.setOutputData(5, now.getFullYear(), true);\n  }\n}\nContainer.registerNodeType('time/date', DateNode);\n","import * as moment from 'moment';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nenum TIME_TYPE {\n  TIME = 'time string as input (YY:MM:DD)',\n  EPOCH = 'time epoch as input (1597662977823)'\n}\n\nexport class TimeDiffNode extends Node {\n  conversionFunction;\n  constructor() {\n    super();\n    this.title = NODE_INFO.time[\"date-difference\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO.time[\"date-difference\"].description + ` \\n ` +\n      `## Inputs\\n ` +\n      ` The inputs can be sent as a unix timestamp ***epoch***. Change the settings ***Time input type*** for different input type \\n ` +\n      `## Outputs (return data type is ***JSON***)\\n ` +\n      ` ***out-difference-time*** will return the time difference in for example: ***hours: 1, minutes: 30 ***\\n ` +\n      ` ***out-difference-totals*** will return the time difference in for example: ***hours: 1, minutes: 90 ***\\n `\n\n    this.addInput('time-compare-1', Type.ANY);\n    this.addInput('time-compare-2', Type.ANY);\n    this.addOutput('out-difference-time', Type.ANY);\n    this.addOutput('out-difference-totals', Type.ANY);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Time input type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          // { value: TIME_TYPE.TIME, text: TIME_TYPE.TIME },\n          { value: TIME_TYPE.EPOCH, text: TIME_TYPE.EPOCH },\n        ],\n      },\n      value: TIME_TYPE.TIME,\n    });\n\n\n  }\n  onAdded() {\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    const date1 = this.getInputData(0);\n    const date2 = this.getInputData(1);\n    const timeType = this.settings['time'].value\n    try {\n      if (timeType === TIME_TYPE.TIME) {\n        this.setOutputData(0, this.diffTime(moment(date1), date2));\n        this.setOutputData(1, this.diffTotals(moment(date1), date2));\n      } else if (timeType === TIME_TYPE.EPOCH) {\n        this.setOutputData(0, this.diffTime(moment(parseInt(date1)), moment(parseInt(date2))));\n        this.setOutputData(1, this.diffTotals(moment(parseInt(date1)), moment(parseInt(date2))));\n      }\n    } catch (e) {\n      this.debugWarn(`ERROR: trying to convert a timezone ${e}`);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated()\n  }\n\n\n  diffTime(date1: any, date2: any) {\n    let years = date1.diff(date2, 'year');\n    date2.add(years, 'years');\n    let months = date1.diff(date2, 'months');\n    date2.add(months, 'months');\n    let days = date1.diff(date2, 'days');\n    date2.add(days, 'days');\n    let hours = date1.diff(date2, 'hours');\n    date2.add(hours, 'hours');\n    let minutes = date1.diff(date2, 'minutes');\n    date2.add(minutes, 'minutes');\n    let seconds = date1.diff(date2, 'seconds');\n    let ms = date1.diff(date2);\n    return { years, months, days, hours, minutes, seconds, ms };\n  }\n\n  diffTotals(date1: any, date2: any) {\n    let years = date1.diff(date2, 'year');\n    let months = date1.diff(date2, 'months');\n    let days = date1.diff(date2, 'days');\n    let hours = date1.diff(date2, 'hours');\n    let minutes = date1.diff(date2, 'minutes');\n    let seconds = date1.diff(date2, 'seconds');\n    let ms = date1.diff(date2);\n    return { years, months, days, hours, minutes, seconds, ms };\n  }\n\n}\n\nContainer.registerNodeType('time/date-difference', TimeDiffNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass StopwatchNode extends Node {\n  lastRunVal = false;\n  lastResetVal = false;\n  lastInterval = 100;\n  runState = false;\n  startTime = null;\n  elapsed = 0;\n  units = 1;\n  digits = 3;\n  timeoutFunc;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.time.stopwatch.title;\n    this.description = NODE_INFO.time.stopwatch.description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, 0, 'Enable', false);\n    this.addInput('reset', Type.BOOLEAN);\n\n    this.settings['units'] = NodeSetting.create({\n      description: 'Output Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 1, text: 'Milliseconds' },\n          { value: 1000, text: 'Seconds' },\n          { value: 60000, text: 'Minutes' },\n          { value: 3.6e6, text: 'Hours' },\n          { value: 8.64e7, text: 'Days' },\n        ],\n      },\n      value: 1,\n    });\n    this.addInputWithSettings('interval', Type.NUMBER, 200, 'Count Interval', false);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'milliseconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n    this.addOutput('elapsed', Type.NUMBER);\n\n    this.setOutputData(0, null);\n    this.elapsed = 0;\n  }\n\n  onAdded() {\n    this.runState = false;\n    this.setOutputData(0, this.elapsed);\n    this.inputs[2]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.outputs[0]['name'] = '[elapsed] (milliseconds)';\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    let run = this.getInputData(0);\n    let reset = this.getInputData(1);\n\n    if (reset && !this.lastResetVal) {\n      this.elapsed = 0;\n      this.startTime = Date.now();\n      this.setOutputData(0, 0, true);\n    }\n    this.lastResetVal = reset;\n\n    let interval = this.getInputData(2);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    if (interval != this.lastInterval && this.runState) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, Date.now() - this.startTime + this.elapsed, true);\n      this.timeoutFunc = setInterval(() => {\n        const output = (Date.now() - this.startTime + this.elapsed) / this.units;\n        this.setOutputData(0, Utils.toFixedNumber(output, this.digits), true);\n      }, interval);\n      this.lastInterval = interval;\n    }\n\n    if (run && !this.lastRunVal) {\n      this.setOutputData(0, this.elapsed, true);\n      this.runState = true;\n      this.startTime = Date.now();\n      this.timeoutFunc = setInterval(() => {\n        const output = (Date.now() - this.startTime + this.elapsed) / this.units;\n        this.setOutputData(0, Utils.toFixedNumber(output, this.digits), true);\n      }, interval);\n      this.lastRunVal = run;\n    } else if (!run && this.lastRunVal) {\n      clearInterval(this.timeoutFunc);\n      this.elapsed = Date.now() - this.startTime + this.elapsed;\n      this.runState = false;\n      this.setOutputData(0, this.elapsed, true);\n      this.lastRunVal = run;\n    }\n\n    /*\n    if (run && run != this.lastRunVal) {\n      this.runState = true;\n      this.startTime = Date.now();\n      this.timeoutFunc = setInterval(() => {\n        const output = (Date.now() - this.startTime + this.elapsed) / this.units;\n        this.setOutputData(0, Utils.toFixedNumber(output, this.digits), true);\n      }, interval);\n      this.lastRunVal = run;\n    } else if (!run && run != this.lastRunVal) {\n      this.elapsed = Date.now() - this.startTime + this.elapsed;\n      this.runState = false;\n      clearInterval(this.timeoutFunc);\n      this.lastRunVal = run;\n    }\n\n*/\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[2]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.units = Number(this.settings['units'].value);\n    switch (this.units) {\n      case 1:\n        this.outputs[0]['name'] = '[elapsed] (milliseconds)';\n        break;\n      case 1000:\n        this.outputs[0]['name'] = '[elapsed] (seconds)';\n        break;\n      case 60000:\n        this.outputs[0]['name'] = '[elapsed] (minutes)';\n        break;\n      case 3.6e6:\n        this.outputs[0]['name'] = '[elapsed] (hours)';\n        break;\n      case 8.64e7:\n        this.outputs[0]['name'] = '[elapsed] (days)';\n        break;\n      default:\n        this.outputs[0]['name'] = '[elapsed] (milliseconds)';\n    }\n\n    const output = Number(this.outputs[0].data) / this.units;\n    this.setOutputData(0, Utils.toFixedNumber(output, this.digits), true);\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('time/stopwatch', StopwatchNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nconst CronJob = require('cron').CronJob;\n// const parser = require('cron-parser');\n//const cronTime = require('cron-time-generator');\nconst jsonata = require('jsonata');\nconst construe = require('cronstrue');\n\nexport class CronIntervalNode extends Node {\n  job = null;\n  jobCronExp = '';\n  timeoutFunc;\n  constructor() {\n    super();\n    this.title = NODE_INFO.time[\"cron-interval\"].title;\n    this.description = NODE_INFO.time[\"cron-interval\"].description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, false, 'Enable', false);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('info', Type.STRING);\n    this.addOutput('cronExpression', Type.STRING);\n    this.addOutput('cronDescription', Type.STRING);\n    this.addOutput('nextExecution', Type.STRING);\n\n    this.settings['timezone'] = NodeSetting.create({\n      description: 'Enter the cron time zone',\n      value: 'Australia/Sydney',\n      type: SettingType.STRING,\n    });\n    this.settings['cron-type'] = NodeSetting.create({\n      description: 'Cron Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'Every Minutes (At every xth minute)' },\n          { value: 1, text: 'Every Hours (At minute x past every xth hour.)' },\n          { value: 2, text: 'Every Days (At x:xx every x days)' },\n          { value: 8, text: 'Every Day At Time (x:xx)' },\n          { value: 3, text: 'Every Month (Start of every month)' },\n          { value: 4, text: 'Every Month On (On x Day at x:xx)' },\n          { value: 5, text: 'Every Year (Start of every year)' },\n          { value: 6, text: 'Every Year On (On x month x day at x:xx)' },\n          { value: 7, text: 'Between Days (At x:xx between x and x day of the month)' },\n        ],\n      },\n      value: 0,\n    });\n    this.settings['min'] = NodeSetting.create({\n      description: 'Set minute',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n    this.settings['hour'] = NodeSetting.create({\n      description: 'Set hour',\n      value: 13,\n      type: SettingType.NUMBER,\n    });\n    this.settings['day'] = NodeSetting.create({\n      description: 'Set day',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n    this.settings['dayBetweenStart'] = NodeSetting.create({\n      description: 'Day Range Start',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n    this.settings['dayBetweenEnd'] = NodeSetting.create({\n      description: 'Day Range End',\n      value: 15,\n      type: SettingType.NUMBER,\n    });\n    this.settings['month'] = NodeSetting.create({\n      description: 'Set month',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n\n    this.setSettingsConfig({\n      groups: [{ dayBetweenStart: {}, dayBetweenEnd: {} }],\n      conditions: {\n        min: setting => {\n          const cronSetting = setting['cron-type'].value;\n          return (\n            cronSetting == 0 ||\n            cronSetting == 1 ||\n            cronSetting == 2 ||\n            cronSetting == 4 ||\n            cronSetting == 6 ||\n            cronSetting == 7 ||\n            cronSetting == 8\n          );\n        },\n        hour: setting => {\n          const cronSetting = setting['cron-type'].value;\n          return (\n            cronSetting == 1 ||\n            cronSetting == 2 ||\n            cronSetting == 4 ||\n            cronSetting == 6 ||\n            cronSetting == 7 ||\n            cronSetting == 8\n          );\n        },\n        day: setting => {\n          const cronSetting = setting['cron-type'].value;\n          return cronSetting == 2 || cronSetting == 4 || cronSetting == 6 || cronSetting == 7;\n        },\n        dayBetweenStart: setting => {\n          const cronSetting = setting['cron-type'].value;\n          return cronSetting == 7;\n        },\n        dayBetweenEnd: setting => {\n          const cronSetting = setting['cron-type'].value;\n          return cronSetting == 7;\n        },\n        month: setting => {\n          const cronSetting = setting['cron-type'].value;\n          return cronSetting == 6;\n        },\n      },\n    });\n  }\n\n  onAdded() {\n    clearInterval(this.timeoutFunc);\n    this.setOutputData(0, false);\n    this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n\n  onRemoved() {\n    //remove the job on delete of the node\n    if (this.job) this.job.stop();\n  }\n\n  jsonataQuery(nextJobs) {\n    //use jsonata to filter the next scheduled time\n    let expression = jsonata('_d');\n    return expression.evaluate(nextJobs);\n  }\n\n  onInputUpdated() {\n    const enable = this.getInputData(0);\n    const minute = parseInt(this.settings['min'].value);\n    const hour = parseInt(this.settings['hour'].value);\n    const day = parseInt(this.settings['day'].value);\n    const dayBetweenStart = parseInt(this.settings['dayBetweenStart'].value);\n    const dayBetweenEnd = parseInt(this.settings['dayBetweenEnd'].value);\n    const month = parseInt(this.settings['month'].value);\n    const timezone = this.settings['timezone'].value;\n    const cronType = this.settings['cron-type'].value;\n    let cronExp = null;\n\n    if (enable) {\n      cronExp = 'invalid';\n      //build the cronjob string\n      if (cronType == 0 && minute >= 0 && minute < 60) {\n        // 'Every Minutes (At every xth minute)'\n        // cronExp = cronTime.every(minute).minutes();\n        cronExp = '*/' + minute + ' * * * *';\n      } else if (cronType == 1 && minute >= 0 && minute < 60 && hour >= 0 && hour < 24) {\n        // 'Every Hours (At minute x past every xth hour.)'\n        //cronExp = cronTime.every(hour).hours();\n        cronExp = minute + ' */' + hour + ' * * *';\n      } else if (cronType == 2 && minute >= 0 && minute < 60 && hour >= 0 && hour < 24 && day > 0 && day <= 31) {\n        // 'Every Days (At x:xx every x days)'\n        //cronExp = cronTime.every(day).days(hour, minute);\n        cronExp = minute + ' ' + hour + ' */' + day + ' * *';\n      } else if (cronType == 3) {\n        // 'Every Month (Start of every month)'\n        //cronExp = cronTime.everyMonth();\n        cronExp = '0 0 1 * *';\n      } else if (cronType == 4 && minute >= 0 && minute < 60 && hour >= 0 && hour < 24 && day > 0 && day <= 31) {\n        // 'Every Month On (On x Day at x:xx)'\n        //cronExp = cronTime.everyMonthOn(day, hour, minute);\n        cronExp = minute + ' ' + hour + ' ' + day + ' * *';\n      } else if (cronType == 5) {\n        // 'Every Year (Start of every year)'\n        //cronExp = cronTime.everyYear();\n        cronExp = '0 0 1 1 *';\n      } else if (\n        cronType == 6 &&\n        minute >= 0 &&\n        minute < 60 &&\n        hour >= 0 &&\n        hour < 24 &&\n        day > 0 &&\n        day <= 31 &&\n        month >= 0 &&\n        month <= 12\n      ) {\n        // 'Every Year On (On x month x day at x:xx)'\n        //cronExp = cronTime.everyYearIn(month, day, hour, minute);\n        cronExp = minute + ' ' + hour + ' ' + day + ' ' + month + ' *';\n      } else if (\n        cronType == 7 &&\n        minute >= 0 &&\n        minute < 60 &&\n        hour >= 0 &&\n        hour < 24 &&\n        dayBetweenStart < dayBetweenEnd &&\n        dayBetweenStart >= 1 &&\n        dayBetweenStart <= 30 &&\n        dayBetweenEnd >= 2 &&\n        dayBetweenEnd <= 31\n      ) {\n        //'Between Days (Between  x - x th day of the month)'\n        //cronExp = cronTime.between(day, dayBetween).days();\n        cronExp = minute + ' ' + hour + ' ' + dayBetweenStart + '-' + dayBetweenEnd + ' * *';\n      } else if (cronType == 8 && minute >= 0 && minute < 60 && hour >= 0 && hour < 24) {\n        // 'Every Day At Time (x:xx)'\n        cronExp = minute + ' ' + hour + ' * * *';\n      }\n    }\n    if (!enable || cronExp == null || cronExp === 'invalid') {\n      if (cronExp === 'invalid') this.setOutputData(1, 'invalid configuration');\n      else this.setOutputData(1, 'CRON job stopped');\n      try {\n        if (this.job) this.job.stop();\n      } catch (err) {\n        this.setOutputData(1, err);\n      }\n      this.job = null;\n      this.jobCronExp = '';\n      this.setOutputData(0, false, true);\n      this.setOutputData(2, null, true);\n      this.setOutputData(3, null, true);\n      this.setOutputData(4, null, true);\n      return;\n    }\n\n    if (this.job && cronExp !== this.jobCronExp) {\n      this.setOutputData(1, 'CRON job stopped');\n      this.job.stop();\n      this.job = null;\n      this.jobCronExp = '';\n    }\n    try {\n      this.jobCronExp = cronExp;\n      this.setOutputData(2, cronExp);\n      this.setOutputData(3, construe.toString(cronExp));\n      this.job = new CronJob(\n        cronExp,\n        () => {\n          this.setOutputData(0, true);\n          this.timeoutFunc = setTimeout(() => {\n            this.setOutputData(0, false);\n          }, 500);\n          //get next job\n          let nextJobs = this.job.nextDates(1);\n          this.setOutputData(4, this.jsonataQuery(nextJobs));\n        },\n        null,\n        null,\n        timezone,\n      );\n      setTimeout(function() {}, 500);\n      this.setOutputData(1, 'CRON job started');\n      this.job.start();\n      let nextJobs = this.job.nextDates(1);\n      this.setOutputData(4, this.jsonataQuery(nextJobs));\n    } catch (err) {\n      this.setOutputData(1, err);\n    }\n  }\n}\nContainer.registerNodeType('time/cron-interval', CronIntervalNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nconst CronJob = require('cron').CronJob;\n//const parser = require('cron-parser');\n//const cb = require('dx-cron-builder');\nconst jsonata = require('jsonata');\nconst construe = require('cronstrue');\n\nexport class CronWeeklyNode extends Node {\n  job = null;\n  jobCronExp = '';\n  timeoutFunc;\n  constructor() {\n    super();\n    this.title = NODE_INFO.time[\"cron-weekly\"].title;\n    this.description = NODE_INFO.time[\"cron-weekly\"].description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, false, 'Enable', false);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('info', Type.STRING);\n    this.addOutput('cronExpression', Type.STRING);\n    this.addOutput('cronDescription', Type.STRING);\n    this.addOutput('nextExecution', Type.STRING);\n    this.settings['timezone'] = NodeSetting.create({\n      description: 'Enter the cron time zone',\n      value: 'Australia/Sydney',\n      type: SettingType.STRING,\n    });\n\n    this.settings['min'] = NodeSetting.create({\n      description: 'Set minute',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.settings['hour'] = NodeSetting.create({\n      description: 'Set hour',\n      value: 6,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['sunday'] = NodeSetting.create({\n      description: 'sunday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['monday'] = NodeSetting.create({\n      description: 'monday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['tuesday'] = NodeSetting.create({\n      description: 'tuesday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['wednesday'] = NodeSetting.create({\n      description: 'wednesday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['thursday'] = NodeSetting.create({\n      description: 'thursday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['friday'] = NodeSetting.create({\n      description: 'friday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['saturday'] = NodeSetting.create({\n      description: 'saturday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n    clearInterval(this.timeoutFunc);\n    this.setOutputData(0, false);\n    this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n\n  onRemoved() {\n    //remove the job on delete of the node\n    if (this.job) this.job.stop();\n  }\n\n  jsonataQuery(nextJobs) {\n    //use jsonata to filter the next scheduled time\n    let expression = jsonata('_d');\n    return expression.evaluate(nextJobs);\n  }\n\n  onInputUpdated() {\n    const enable = this.getInputData(0);\n    let cronExp = null;\n    //make sure the times are correct\n    if (enable) {\n      cronExp = 'invalid';\n      const minute = this.settings['min'].value;\n      const hour = this.settings['hour'].value;\n      if (minute >= 0 && minute <= 59 && hour >= 0 && hour < 24) {\n        cronExp = minute + ' ' + hour + ' * * ';\n        let daysArray = [];\n        if (this.settings['sunday'].value) daysArray.push('0');\n        if (this.settings['monday'].value) daysArray.push('1');\n        if (this.settings['tuesday'].value) daysArray.push('2');\n        if (this.settings['wednesday'].value) daysArray.push('3');\n        if (this.settings['thursday'].value) daysArray.push('4');\n        if (this.settings['friday'].value) daysArray.push('5');\n        if (this.settings['saturday'].value) daysArray.push('6');\n        cronExp += daysArray.join(',');\n      }\n    }\n    if (!enable || cronExp == null || cronExp === 'invalid') {\n      if (cronExp === 'invalid') this.setOutputData(1, 'invalid configuration');\n      else this.setOutputData(1, 'CRON job stopped');\n      try {\n        if (this.job) this.job.stop();\n      } catch (err) {\n        this.setOutputData(1, err);\n      }\n      this.job = null;\n      this.jobCronExp = '';\n      this.setOutputData(0, false, true);\n      this.setOutputData(2, null, true);\n      this.setOutputData(3, null, true);\n      this.setOutputData(4, null, true);\n      return;\n    }\n    const timezone = this.settings['timezone'].value;\n    if (this.job && cronExp !== this.jobCronExp) {\n      this.setOutputData(1, 'CRON job stopped');\n      this.job.stop();\n      this.job = null;\n      this.jobCronExp = '';\n    }\n    try {\n      this.jobCronExp = cronExp;\n      this.setOutputData(2, cronExp);\n      this.setOutputData(3, construe.toString(cronExp));\n      this.job = new CronJob(\n        cronExp,\n        () => {\n          this.setOutputData(0, true);\n          this.timeoutFunc = setTimeout(() => {\n            this.setOutputData(0, false);\n          }, 500);\n          //get next job\n          let nextJobs = this.job.nextDates(1);\n          this.setOutputData(4, this.jsonataQuery(nextJobs));\n        },\n        null,\n        null,\n        timezone,\n      );\n      setTimeout(function() {}, 500);\n      this.setOutputData(1, 'CRON job started');\n      this.job.start();\n      let nextJobs = this.job.nextDates(1);\n      this.setOutputData(4, this.jsonataQuery(nextJobs));\n    } catch (err) {\n      this.setOutputData(1, err);\n    }\n  }\n}\nContainer.registerNodeType('time/cron-weekly', CronWeeklyNode);\n","import { isNull } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nconst CronJob = require('cron').CronJob;\nconst jsonata = require('jsonata');\nconst construe = require('cronstrue');\nconst cronValidator = require('cron-validator');\nimport { NODE_INFO } from '../../node-info';\n\nexport class CronExpressionNode extends Node {\n  job = null;\n  jobCronExp = '';\n  timeoutFunc;\n  constructor() {\n    super();\n    this.title = NODE_INFO.time[\"cron-expression\"].title;\n    this.description = NODE_INFO.time[\"cron-expression\"].description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable', false);\n    this.addInputWithSettings('cronExpression', Type.STRING, '', 'Cron Expression');\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('info', Type.STRING);\n    this.addOutput('cronDescription', Type.STRING);\n    this.addOutput('nextExecution', Type.STRING);\n    this.settings['timezone'] = NodeSetting.create({\n      description: 'Enter the cron time zone',\n      value: 'Australia/Sydney',\n      type: SettingType.STRING,\n    });\n  }\n\n  onAdded() {\n    clearInterval(this.timeoutFunc);\n    this.setOutputData(0, false);\n    this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n\n  onRemoved() {\n    //remove the job on delete of the node\n    if (this.job) this.job.stop();\n  }\n\n  jsonataQuery(nextJobs) {\n    //use jsonata to filter the next scheduled time\n    let expression = jsonata('_d');\n    return expression.evaluate(nextJobs);\n  }\n\n  onInputUpdated() {\n    const enable = this.getInputData(0);\n    const cronExp = this.getInputData(1);\n    const valid = cronValidator.isValidCron(cronExp);\n    // console.log('valid?', valid)\n    if (!enable || !valid) {\n      if (!valid) {\n        this.setOutputData(1, 'invalid CRON Expression');\n        // console.log('I set the info')\n      }\n      else this.setOutputData(1, 'CRON job stopped');\n      try {\n        if (this.job) this.job.stop();\n      } catch (err) {\n        // console.log('err', err)\n        this.setOutputData(1, err);\n      }\n      this.job = null;\n      this.jobCronExp = '';\n      this.setOutputData(0, false, true);\n      this.setOutputData(2, null, true);\n      this.setOutputData(3, null, true);\n      return;\n    }\n\n    const timezone = this.settings['timezone'].value;\n    if (this.job && cronExp !== this.jobCronExp) {\n      this.setOutputData(1, 'CRON job stopped');\n      this.job.stop();\n      this.job = null;\n      this.jobCronExp = '';\n    }\n    try {\n      this.jobCronExp = cronExp;\n      this.setOutputData(2, construe.toString(cronExp));\n      this.job = new CronJob(\n        cronExp,\n        () => {\n          this.setOutputData(0, true);\n          this.timeoutFunc = setTimeout(() => {\n            this.setOutputData(0, false);\n          }, 500);\n          //get next job\n          if (isNull(this.job)) return\n          let nextJobs = this.job.nextDates(1);\n          this.setOutputData(3, this.jsonataQuery(nextJobs));\n        },\n        null,\n        null,\n        timezone,\n      );\n      setTimeout(function () { }, 500);\n      this.setOutputData(1, 'CRON job started');\n      this.job.start();\n      let nextJobs = this.job.nextDates(1);\n      this.setOutputData(3, this.jsonataQuery(nextJobs));\n    } catch (err) {\n      this.setOutputData(1, err);\n    }\n  }\n}\nContainer.registerNodeType('time/cron-expression', CronExpressionNode);\n","module.exports = require(\"cron-validator\");","import * as moment from 'moment';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nexport class TimestampGeneratorNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.time[\"timestamp-generator\"].title;\n    this.description =\n    `## Description\\n ` +\n    NODE_INFO.time[\"timestamp-generator\"].description +` \\n `+\n    `## Inputs\\n ` +\n    ` The an active input a timestamp will be generated based of the device time \\n `+\n    `## Outputs (return data type is ***JSON***)\\n ` +\n    ` ***date-string*** will return the timestamp: **\"2019-08-31T11:54:27+10:00\" ***\\n `+\n    ` ***date-unix*** will return the timestamp: **1598838867***\\n `+\n    ` ***date-format*** will return the time that is formatted as per moment js format options https://momentjs.com/docs/#/displaying/format/*\\n `+\n    `### Formatting options examples\\n ` +\n    `-ENTER in settings\t***LT*** with return 8:30 PM\\n ` +\n    `-ENTER in settings\t***LTS*** with return 8:30:25 PM\\n ` +\n    `-ENTER in settings\t***LLLL*** with return \tThursday, September 4, 1986 8:30 PM\\n `\n    this.addInput('input', Type.ANY);\n    this.addOutput('date-string', Type.STRING);\n    this.addOutput('date-unix', Type.STRING);\n    this.addOutput('date-format', Type.STRING);\n    this.settings['format'] = NodeSetting.create({\n      description: 'Formatting options',\n      value: \"x\",\n      type: SettingType.STRING,\n    });\n  }\n\n  onAfterSettingsChange() {\n    // this.onInputUpdated()\n  }\n\n  onInputUpdated() {\n    const format = this.settings['format'].value\n    let date = moment()\n    this.setOutputData(0, date.format());\n    this.setOutputData(1, date.unix());\n    this.setOutputData(2, date.format(format));\n  }\n\n\n\n}\nContainer.registerNodeType('time/timestamp-generator', TimestampGeneratorNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass COVNode extends Node {\n  lastValue;\n  timeoutFunc;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.trigger[\"change-of-value\"].title;\n    this.description = NODE_INFO.trigger[\"change-of-value\"].description;\n    this.addInput('input', Type.ANY);\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Interval');\n    this.addInputWithSettings('threshold', Type.NUMBER, 0, 'COV Threshold');\n    this.addOutput('output', Type.BOOLEAN);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n  }\n\n  onAdded() {\n \n    this.setOutputData(0, false);\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n  }\n  \n//\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    const isNumber = typeof input === 'number';\n    if (this.inputs[0].updated && input !== this.lastValue) {\n      if (\n        typeof this.lastValue !== 'number' ||\n        !isNumber ||\n        (isNumber && Math.abs(input - this.lastValue) >= this.getInputData(2))\n      ) {\n        this.lastValue = input;\n        this.setOutputData(0, true);\n        const interval = TimeUtils.timeConvert(this.getInputData(1), this.settings['time'].value);\n        if (this.timeoutFunc) clearTimeout(this.timeoutFunc);\n        this.timeoutFunc = setTimeout(() => {\n          this.setOutputData(0, false);\n        }, interval);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n  }\n}\nContainer.registerNodeType('trigger/change-of-value', COVNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\n\nclass RandomNode extends Node {\n  state = false;\n  lastVal;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.trigger.random.title;\n    this.description = NODE_INFO.trigger.random.description;\n    this.settings['digits'] = NodeSetting.create({\n      description: 'Number of decimal places',\n      value: 3,\n      type: SettingType.NUMBER,\n    });\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInputWithSettings('max', Type.NUMBER, 1, 'Maximum Value');\n    this.addInputWithSettings('min', Type.NUMBER, 0, 'Minimum Value');\n    this.addOutput('output', Type.NUMBER);\n    this.setOutputData(0, null);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let trigger = this.getInputData(0);\n    if (trigger == null) {\n      this.lastVal = false;\n      this.setOutputData(0, null);\n      this.state = false;\n    } else if (trigger == this.lastVal) return;\n    if (trigger == true) {\n      const max = this.getInputData(1);\n      const min = this.getInputData(2);\n      this.settings['digits'].value;\n      let digits = this.settings['digits'].value;\n      let result = Math.random() * (max - min) + min;\n      result = Utils.toFixedNumber(result, digits);\n      this.setOutputData(0, result);\n    }\n    this.lastVal = trigger;\n  }\n}\nContainer.registerNodeType('trigger/random', RandomNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\n\nexport class TriggeredInjectNode extends Node {\n  lastTrigger;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.trigger.inject.title;\n    this.description = NODE_INFO.trigger.inject.description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addInputWithSettings('message', Type.STRING, 'true', 'Message');\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n  }\n\n  onCreated() {\n    this.lastTrigger = false;\n  }\n\n  onAdded() {\n    const enable = this.getInputData(0);\n    if (!enable) {\n      this.setOutputData(0, null);\n      return;\n    }\n  }\n\n  onInputUpdated() {\n    const enable = this.getInputData(0);\n    if (!enable) {\n      this.setOutputData(0, null, true);\n      return;\n    }\n    let trigger = this.getInputData(2);\n    if (trigger && !this.lastTrigger) {\n      const message = this.getInputData(1);\n      this.setOutputData(0, message, false);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  onAfterSettingsChange() {}\n}\nContainer.registerNodeType('trigger/inject', TriggeredInjectNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nexport class InjectNode extends Node {\n  lastInterval = 1000;\n  runState: boolean = true;\n  timeoutFunc;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.trigger[\"interval-inject\"].title;\n    this.description = NODE_INFO.trigger[\"interval-inject\"].description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addInputWithSettings('message', Type.ANY, 'true', 'Message');\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Interval');\n    this.addOutput('output', Type.BOOLEAN);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n  }\n\n  onAdded() {\n    clearInterval(this.timeoutFunc);\n    this.inputs[2]['name'] = `[interval] (${this.settings['time'].value})`;\n    const enable = this.getInputData(0);\n    if (!enable) {\n      this.setOutputData(0, null);\n      this.runState = false;\n      return;\n    }\n    let interval = this.getInputData(2);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    this.timeoutFunc = setInterval(() => {\n      const message = this.getInputData(1);\n      this.setOutputData(0, message);\n    }, interval);\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const enable = this.getInputData(0);\n    if (!enable && this.runState) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, null, true);\n      this.runState = false;\n      return;\n    } else if (!enable && !this.runState) {\n      this.setOutputData(0, null, true);\n      this.runState = false;\n      return;\n    } else if (enable) {\n      let interval = this.getInputData(2);\n      interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n      if (this.runState) {\n        if (interval != this.lastInterval) {\n          this.lastInterval = interval;\n          clearInterval(this.timeoutFunc);\n          this.timeoutFunc = setInterval(() => {\n            const message = this.getInputData(1);\n            this.setOutputData(0, message);\n          }, interval);\n        }\n        return;\n      } else if (!this.runState) {\n        this.runState = true;\n        this.timeoutFunc = setInterval(() => {\n          const message = this.getInputData(1);\n          this.setOutputData(0, message);\n        }, interval);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[2]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('trigger/interval-inject', InjectNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\n\nexport class TimeIteratorNode extends Node {\n  state: boolean = false;\n  runState: boolean = true;\n  complete: boolean = false;\n  lastStart: boolean = false;\n  lastStop: boolean = false;\n  timeoutFunc;\n  count = 0;\n  reqInterval = null;\n  reqIterations = null;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.trigger.iterator.title;\n    this.description = NODE_INFO.trigger.iterator.description;\n    this.addInputWithSettings('interval', Type.NUMBER, 10, 'Interval', false);\n    this.addInputWithSettings('iterations', Type.NUMBER, 5, 'Iterations', false);\n    this.addInput('start', Type.BOOLEAN);\n    this.addInput('stop', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('complete', Type.BOOLEAN);\n    this.addOutput('count', Type.NUMBER);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n    this.settings['false'] = NodeSetting.create({\n      description: 'Generate False',\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n    clearInterval(this.timeoutFunc);\n    this.setOutputData(0, false);\n    this.setOutputData(1, false);\n    this.inputs[0]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.lastStart = false;\n    this.lastStop = false;\n    this.complete = true;\n    this.count = 0;\n    this.onInputUpdated();\n  }\n\n  start() {\n    this.runState = true;\n    if (this.settings['false'].value) {\n      this.timeoutFunc = setInterval(() => {\n        if (this.state == true) {\n          this.state = false;\n          this.setOutputData(0, false);\n          if (this.count >= this.reqIterations) {\n            clearInterval(this.timeoutFunc);\n            this.setOutputData(1, false);\n            this.complete = true;\n            this.runState = false;\n          }\n        } else {\n          this.state = true;\n          this.setOutputData(0, true);\n          this.count++;\n          this.setOutputData(2, this.count);\n        }\n      }, this.reqInterval / (this.reqIterations * 2 - 1));\n    } else {\n      this.timeoutFunc = setInterval(() => {\n        this.state = true;\n        this.setOutputData(0, true);\n        this.count++;\n        this.setOutputData(2, this.count);\n        if (this.count >= this.reqIterations) {\n          clearInterval(this.timeoutFunc);\n          this.complete = true;\n          this.runState = false;\n        }\n      }, this.reqInterval / (this.reqIterations - 1));\n    }\n  }\n\n  onInputUpdated() {\n    let stop = this.getInputData(3);\n    if (stop && !this.lastStop && !this.complete) {\n      this.lastStop = stop;\n      if (this.settings['false'].value) {\n        this.state = false;\n        this.setOutputData(0, false);\n      }\n      clearInterval(this.timeoutFunc);\n      this.runState = false;\n      return;\n    }\n\n    if (!stop && this.lastStop && !this.complete) {\n      this.lastStop = stop;\n      this.start();\n      return;\n    }\n    this.lastStop = stop;\n\n    let start = this.getInputData(2);\n    if (start && !this.lastStart) {\n      this.lastStart = start;\n      clearInterval(this.timeoutFunc);\n      this.count = 0;\n      if (this.settings['false'].value) {\n        this.state = false;\n        this.setOutputData(0, false);\n      }\n      let interval = this.getInputData(0);\n      interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n      const iterations = this.getInputData(1);\n      if (iterations <= 0 || interval <= 0) {\n        this.runState = false;\n        return;\n      }\n      this.reqInterval = interval;\n      this.reqIterations = iterations;\n      this.setOutputData(0, true);\n      this.state = true;\n      this.complete = false;\n      this.count++;\n      this.setOutputData(2, this.count);\n      if (stop) {\n        if (this.settings['false'].value) {\n          setTimeout(() => {\n            this.runState = false;\n            this.state = false;\n            this.setOutputData(0, false);\n          }, interval / (iterations * 2 - 1));\n          return;\n        }\n        this.runState = false;\n        return;\n      } else this.start();\n    }\n    this.lastStart = start;\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[0]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('trigger/iterator', TimeIteratorNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass ScheduleAfterhoursOffWidgetNode extends Node {\n  currentMode: string = 'SCHEDULE';\n  remainingRuntime: number = 0;\n  AHRuntime: number;\n  timeoutFunc;\n  updateInterval: number = 5000;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.widget[\"schedule-afterhours-off\"].title;\n    this.description = NODE_INFO.widget[\"schedule-afterhours-off\"].description;\n    this.addInput('modeInput', Type.STRING);\n    this.addInput('scheduleInput', Type.BOOLEAN);\n    this.addInput('scheduleNextStop', Type.NUMBER);\n    this.addInputWithSettings('AH duration (mins)', Type.NUMBER, 120, 'Afterhours Duration (minutes)');\n    this.addOutput('modeOutput', Type.STRING);\n    this.addOutput('enableOutput', Type.BOOLEAN);\n    this.addOutput('remainingRuntime (ms)', Type.NUMBER);\n    this.AHRuntime = TimeUtils.timeConvert(120, 'minutes');\n  }\n\n  onCreated() {\n    this.currentMode = 'OFF';\n    this.onInputUpdated();\n  }\n\n  onAdded() {\n    this.currentMode = 'OFF';\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const modeInput = this.getInputData(0);\n    if (modeInput == null) {\n      this.currentMode = null;\n      this.setOutputData(0, '');\n      this.setOutputData(1, null);\n      if (this.timeoutFunc) clearInterval(this.timeoutFunc);\n      this.remainingRuntime = 0;\n      this.setOutputData(2, null);\n      return;\n    } else if (modeInput == 'OFF') {\n      this.currentMode = 'OFF';\n      this.setOutputData(0, 'OFF');\n      this.setOutputData(1, false);\n      if (this.timeoutFunc) clearInterval(this.timeoutFunc);\n      this.remainingRuntime = 0;\n      this.setOutputData(2, 0);\n      return;\n    } else if (modeInput == 'SCHEDULE' && this.currentMode !== modeInput) {\n      this.currentMode = 'SCHEDULE';\n      this.setOutputData(0, 'SCHEDULE');\n      if (this.getInputData(1)) this.startSchedule();\n      else {\n        if (this.timeoutFunc) clearInterval(this.timeoutFunc);\n        this.setOutputData(1, false);\n        this.setOutputData(2, 0);\n      }\n    } else if (modeInput == 'AFTERHOURS' && this.currentMode !== modeInput) {\n      this.startAfterhours();\n    }\n    if (this.currentMode === 'SCHEDULE') {\n      const schedInput = this.getInputData(1);\n      if(!schedInput) this.setOutputData(2, 0);\n      if (this.inputs[1].updated) {\n        if (schedInput) {\n          this.setOutputData(1, true);\n          this.startSchedule();\n        } else {\n          this.setOutputData(1, false);\n          if (this.timeoutFunc) clearInterval(this.timeoutFunc);\n          this.setOutputData(2, 0);\n        }\n      }\n      if (this.getInputData(2) == null) this.setOutputData(2, null);\n      else if (this.inputs[2].updated) {\n        const nextStop = this.getInputData(2);\n        if (nextStop) this.setOutputData(2, nextStop - Date.now());\n      }\n    } else if (\n      TimeUtils.timeConvert(this.getInputData(3), 'minutes') !== this.AHRuntime &&\n      this.currentMode === 'AFTERHOURS'\n    ) {\n      this.startAfterhours();\n    }\n  }\n\n  startSchedule() {\n    if (this.timeoutFunc) clearInterval(this.timeoutFunc);\n    const nextStop = this.getInputData(2);\n    if (nextStop) {\n      this.remainingRuntime = nextStop - Date.now();\n      this.setOutputData(2, this.remainingRuntime);\n      this.timeoutFunc = setInterval(() => {\n        this.remainingRuntime -= this.updateInterval;\n        this.setOutputData(2, this.remainingRuntime);\n      }, this.updateInterval);\n    } else this.setOutputData(2, null);\n    this.setOutputData(1, true);\n  }\n\n  startAfterhours() {\n    this.currentMode = 'AFTERHOURS';\n    this.setOutputData(0, 'AFTERHOURS');\n    this.setOutputData(1, true);\n    clearInterval(this.timeoutFunc);\n    const AHDuration = TimeUtils.timeConvert(this.getInputData(3) || 120, 'minutes');\n    this.AHRuntime = AHDuration;\n    this.remainingRuntime = AHDuration;\n    this.setOutputData(2, AHDuration);\n    this.timeoutFunc = setInterval(() => {\n      this.remainingRuntime -= this.updateInterval;\n      if (this.remainingRuntime <= 0) {\n        this.setOutputData(1, false);\n        this.setOutputData(2, 0);\n        this.currentMode = 'SCHEDULE';\n        this.setOutputData(0, 'SCHEDULE');\n        clearInterval(this.timeoutFunc);\n        if (this.getInputData(1)) this.startSchedule();\n        return;\n      }\n      this.setOutputData(2, this.remainingRuntime);\n    }, this.updateInterval);\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('widget/schedule-afterhours-off', ScheduleAfterhoursOffWidgetNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass SchedulePrestartFixedNode extends Node {\n  enabled;\n  nextStart;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.widget[\"schedule-prestart-fixed\"].title;\n    this.description = NODE_INFO.widget[\"schedule-prestart-fixed\"].description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addInput('temp', Type.NUMBER);\n    this.addInput('SP', Type.NUMBER);\n    this.addInput('scheduleNextStart', Type.NUMBER);\n    this.addInput('reset', Type.NUMBER);\n    this.addOutput('output', Type.STRING);\n\n    this.settings['condition1_range1'] = NodeSetting.create({\n      description: 'temp > (SP + ?):',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition1_range2'] = NodeSetting.create({\n      description: 'temp <= (SP + ?)',\n      value: 2.5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition1_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: 20,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition2_range1'] = NodeSetting.create({\n      description: 'temp > (SP + ?):',\n      value: 2.5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition2_range2'] = NodeSetting.create({\n      description: 'temp <= (SP + ?)',\n      value: 5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition2_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: 40,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition3_range1'] = NodeSetting.create({\n      description: 'temp > (SP + ?):',\n      value: 5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition3_range2'] = NodeSetting.create({\n      description: 'temp <= (SP + ?)',\n      value: 100,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition3_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: 60,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition4_range1'] = NodeSetting.create({\n      description: 'temp > (SP + ?):',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition4_range2'] = NodeSetting.create({\n      description: 'temp <= (SP + ?)',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition4_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition5_range1'] = NodeSetting.create({\n      description: 'temp > (SP + ?):',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition5_range2'] = NodeSetting.create({\n      description: 'temp <= (SP + ?)',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition5_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition6_range1'] = NodeSetting.create({\n      description: 'temp < (SP + ?):',\n      value: -1,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition6_range2'] = NodeSetting.create({\n      description: 'temp >= (SP + ?)',\n      value: -2.5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition6_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: 30,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition7_range1'] = NodeSetting.create({\n      description: 'temp < (SP + ?):',\n      value: -2.5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition7_range2'] = NodeSetting.create({\n      description: 'temp >= (SP + ?)',\n      value: -5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition7_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: 40,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition8_range1'] = NodeSetting.create({\n      description: 'temp < (SP + ?):',\n      value: -5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition8_range2'] = NodeSetting.create({\n      description: 'temp >= (SP + ?)',\n      value: -100,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition8_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: 60,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition9_range1'] = NodeSetting.create({\n      description: 'temp < (SP + ?):',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition9_range2'] = NodeSetting.create({\n      description: 'temp >= (SP + ?)',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition9_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition10_range1'] = NodeSetting.create({\n      description: 'temp < (SP + ?):',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition10_range2'] = NodeSetting.create({\n      description: 'temp >= (SP + ?)',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition10_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n\n    this.setSettingsConfig({\n      groups: [\n        { condition1_range1: {}, condition1_range2: {}, condition1_time: {} },\n        { condition2_range1: {}, condition2_range2: {}, condition2_time: {} },\n        { condition3_range1: {}, condition3_range2: {}, condition3_time: {} },\n        { condition4_range1: {}, condition4_range2: {}, condition4_time: {} },\n        { condition5_range1: {}, condition5_range2: {}, condition5_time: {} },\n        { condition6_range1: {}, condition6_range2: {}, condition6_time: {} },\n        { condition7_range1: {}, condition7_range2: {}, condition7_time: {} },\n        { condition8_range1: {}, condition8_range2: {}, condition8_time: {} },\n        { condition9_range1: {}, condition9_range2: {}, condition9_time: {} },\n        { condition10_range1: {}, condition10_range2: {}, condition10_time: {} },\n      ],\n    });\n  }\n\n  onCreated() {\n    this.enabled = false;\n    this.EXECUTE_INTERVAL = 30000;\n  }\n\n  onAdded() {\n    this.EXECUTE_INTERVAL = 30000;\n    this.onInputUpdated();\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n    this.onExecute();\n  }\n\n  onExecute() {\n    const now = new Date().valueOf();\n    const enable = this.getInputData(0);\n    if (!enable || this.nextStart == null || this.nextStart - now < 0) {\n      this.setOutputData(0, false);\n      this.enabled = false;\n      return;\n    }\n    if (this.enabled) return;\n    const temp = this.getInputData(1);\n    const setpoint = this.getInputData(2);\n    if (temp == null || setpoint == null) return;\n    for (var i = 1; i <= 10; i++) {\n      var fromRange = this.settings[`condition${i}_range1`].value;\n      var toRange = this.settings[`condition${i}_range2`].value;\n      var time = this.settings[`condition${i}_time`].value;\n      if (fromRange == null || toRange == null || time == null) continue;\n      time = TimeUtils.timeConvert(time, 'minutes');\n      if (this.nextStart - now <= time) {\n        if (i <= 5 && temp > setpoint + fromRange && temp <= setpoint + toRange) {\n          this.enabled = true;\n          this.setOutputData(0, true);\n          return;\n        }\n        if (i > 5 && temp < setpoint + fromRange && temp >= setpoint + toRange) {\n          this.enabled = true;\n          this.setOutputData(0, true);\n          return;\n        }\n      }\n    }\n  }\n\n  onInputUpdated() {\n    const enable = this.getInputData(0);\n    if (!enable) {\n      this.setOutputData(0, false);\n      this.enabled = false;\n      return;\n    }\n    const reset = this.getInputData(4);\n    if (reset && this.inputs[4].updated) {\n      this.enabled = false;\n      this.setOutputData(0, false);\n    }\n    const nextStart = this.getInputData(3);\n    if (nextStart == null || nextStart !== this.nextStart) {\n      this.nextStart = nextStart;\n      this.setOutputData(0, false);\n      this.enabled = false;\n    }\n  }\n}\nContainer.registerNodeType('widget/schedule-prestart-fixed', SchedulePrestartFixedNode);\n","import { UNKNOWN_NODE } from '../../constants';\nimport { Container } from '../../container';\nimport { UnknownNode } from './unknown';\n\nContainer.registerNodeType(UNKNOWN_NODE, UnknownNode, null, false);\n","import { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\n\nexport class UnknownNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.unknown.unknown.title;\n    this.description = NODE_INFO.unknown.unknown.description;\n  }\n}\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 16.02.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\nimport { Node } from '../nodes/node';\nimport { SerializedNode } from '../nodes/node-interface';\nimport { UiPanel } from '../server/dashboard';\nimport { db_logger as logger } from '../utils/loggers';\nimport { Database } from './database';\nimport AuthUserDatabase from './database/AuthUserDatabase';\nimport DashboardDatabase from './database/DashboardDatabase';\nimport HistorianDatabase from './database/HistorianDatabase';\nimport NodeDatabase from './database/NodeDatabase';\nimport ScheduleDatabase from './database/ScheduleDatabase';\nimport UserDatabase from './database/UserDatabase';\nimport AuthUserDataSource from './datasource/AuthUserDataSource';\nimport DashboardDataSource from './datasource/DashboardDataSource';\nimport HistorianDataSource from './datasource/HistorianDataSource';\nimport NodeDataSource from './datasource/NodeDataSource';\nimport ScheduleDataSource from './datasource/ScheduleDataSource';\nimport UserDataSource from './datasource/UserDataSource';\nimport { AuthUser } from './models/AuthUser';\nimport { History } from './models/historian';\nimport { Schedule } from './models/schedule';\nimport { User } from './models/user';\n\nclass NeDbDatabase implements Database {\n  private static CLEANUP_INTERVAL = 5 * 60 * 1000;\n  private authUserDatabase: AuthUserDatabase;\n  private userDatabase: UserDatabase;\n  private nodeDatabase: NodeDatabase;\n  private dashboardDatabase: DashboardDatabase;\n  private scheduleDatabase: ScheduleDatabase;\n  private historianDatabase: HistorianDatabase;\n\n  constructor() {\n    this.authUserDatabase = new AuthUserDataSource();\n    this.userDatabase = new UserDataSource();\n    this.nodeDatabase = new NodeDataSource();\n    this.dashboardDatabase = new DashboardDataSource();\n    this.scheduleDatabase = new ScheduleDataSource();\n    this.historianDatabase = new HistorianDataSource();\n  }\n\n  async asyncLoadDatabase(dataPath: string, cleanUpInterval: any = NeDbDatabase.CLEANUP_INTERVAL): Promise<any> {\n    return Promise.all([this.authUserDatabase.asyncLoadDatabase(dataPath, cleanUpInterval),\n                        this.userDatabase.asyncLoadDatabase(dataPath, cleanUpInterval),\n                        this.nodeDatabase.asyncLoadDatabase(dataPath, cleanUpInterval),\n                        this.dashboardDatabase.asyncLoadDatabase(dataPath, cleanUpInterval),\n                        this.scheduleDatabase.asyncLoadDatabase(dataPath, cleanUpInterval),\n                        this.historianDatabase.asyncLoadDatabase(dataPath, cleanUpInterval)])\n                  .then(res => {\n                    logger.info(`Finish loading ${res.length} datasource`);\n                    return res;\n                  });\n  }\n\n  addUser(user: User, callback?: (err?: Error, doc?: User) => void) {\n    this.userDatabase.addUser(user, callback);\n  }\n\n  addOrUpdateUser(query: object, user: User): Promise<any> {\n    return this.userDatabase.addOrUpdateUser(query, user);\n  }\n\n  getUsers(callback?: (err?: Error, docs?: Array<User>) => void) {\n    this.userDatabase.getUsers(callback);\n  }\n\n  getUser(query: object, callback?: (err?: Error, doc?: User) => void) {\n    this.userDatabase.getUser(query, callback);\n  }\n\n  getAsyncUsers(): Promise<any> {\n    return this.userDatabase.getAsyncUsers();\n  }\n\n  updateUser(query: object, user: User, callback?: (err?: Error) => void) {\n    this.userDatabase.updateUser(query, user);\n  }\n\n  getUsersCount(callback?: (err?: Error, num?: number) => void) {\n    this.userDatabase.getUsersCount(callback);\n  }\n\n  removeUser(query: object, callback?: (err?: Error) => void) {\n    this.userDatabase.removeUser(query, callback);\n  }\n\n  dropUsers(callback?: (err?: Error) => void) {\n    this.userDatabase.dropUsers();\n  }\n\n  addNode(node: Node, callback?: (err?: Error, doc?: SerializedNode) => void) {\n    this.nodeDatabase.addNode(node, callback);\n  }\n\n  batchInsertNodes(nodes: SerializedNode[], callback?: (err?: Error, docs?: Array<SerializedNode>) => void) {\n    this.nodeDatabase.batchInsertNodes(nodes, callback);\n  }\n\n  batchDeleteNodes(query, callback?: (err?: Error, docs?: number) => void) {\n    this.nodeDatabase.batchDeleteNodes(query, callback);\n  }\n\n  getNodes(callback?: (err?: Error, docs?: Array<SerializedNode>) => void) {\n    this.nodeDatabase.getNodes(callback);\n  }\n\n  getNodeType(type: string, callback?: (err?: Error, docs?: Array<SerializedNode>) => void) {\n    this.nodeDatabase.getNodeType(type, callback);\n  }\n\n  listNodes(query, callback?: (err?: Error, docs?: Array<SerializedNode>) => void) {\n    this.nodeDatabase.listNodes(query, callback);\n  }\n\n  getNode(id: string | number, cid: string | number, callback?: (err?: Error, doc?: SerializedNode) => void) {\n    this.nodeDatabase.getNode(id, cid, callback);\n  }\n\n  updateNode(id: string | number, cid: string | number, update: any, callback?: (err?: Error) => void) {\n    this.nodeDatabase.updateNode(id, cid, update, callback);\n  }\n\n  removeNode(id: string | number, cid: string | number, callback?: (err?: Error) => void) {\n    this.nodeDatabase.removeNode(id, cid, callback);\n  }\n\n  dropNodes(callback?: (err?: Error) => void) {\n    this.nodeDatabase.dropNodes(callback);\n  }\n\n  addUiPanel(panel: UiPanel, callback?: (err?: Error, doc?: UiPanel) => void) {\n    this.dashboardDatabase.addUiPanel(panel, callback);\n  }\n\n  getUiPanels(callback?: (err?: Error, docs?: UiPanel[]) => void) {\n    this.dashboardDatabase.getUiPanels(callback);\n  }\n\n  getUiPanel(name: string, callback?: (err?: Error, doc?: UiPanel) => void) {\n    this.dashboardDatabase.getUiPanel(name, callback);\n  }\n\n  updateUiPanel(name: string, update: any, callback?: (err?: Error) => void) {\n    this.dashboardDatabase.updateUiPanel(name, update, callback);\n  }\n\n  dropUiPanels(callback?: (err?: Error) => void) {\n    this.dashboardDatabase.dropUiPanels(callback);\n  }\n\n  removeUiPanel(name: string, callback?: (err?: Error) => void) {\n    this.dashboardDatabase.removeUiPanel(name, callback);\n  }\n\n  addSchedule(schedule: Schedule, callback?: (err?: Error, doc?: Schedule) => void) {\n    this.scheduleDatabase.addSchedule(schedule, callback);\n  }\n\n  updateSchedule(query: object, schedule: Schedule, callback?: (err?: Error) => void) {\n    this.scheduleDatabase.updateSchedule(query, schedule, callback);\n  }\n\n  removeSchedule(query: object, callback?: (err?: Error) => void) {\n    this.scheduleDatabase.removeSchedule(query, callback);\n  }\n\n  //// HistorianDatabase historian history\n\n  addHistory(history: History, callback?: (err?: Error, doc?: History) => void) {\n    this.historianDatabase.addHistory(history, callback);\n  }\n\n  updateHistory(query: object, history: History, callback?: (err?: Error) => void) {\n    this.historianDatabase.updateHistory(query, history, callback);\n  }\n\n  removeHistory(query: object, callback?: (err?: Error) => void) {\n    this.historianDatabase.removeHistory(query, callback);\n  }\n\n  addAuthUser(authUser: AuthUser): Promise<AuthUser> {\n    return this.authUserDatabase.addAuthUser(authUser);\n  }\n\n  getAuthUser(): Promise<AuthUser> {\n    return this.authUserDatabase.getAuthUser();\n  }\n\n  deleteAuthUsers(): Promise<string> {\n    return this.authUserDatabase.deleteAuthUsers();\n  }\n\n  getAuthToken(authUser: AuthUser): Promise<string> {\n    return this.authUserDatabase.getAuthToken(authUser);\n  }\n\n  isAuthenticated(token: string): Promise<any> {\n    return this.authUserDatabase.isAuthenticated(token);\n  }\n\n}\n\nconst db = new NeDbDatabase();\nexport { db };\n","import config from '../../config';\nimport CryptoUtils from '../../nodes/utils/crypto-utils';\nimport { db_logger as logger } from '../../utils/loggers';\nimport AuthUserDatabase from '../database/AuthUserDatabase';\nimport { AbstractDatabase } from '../database/BaseDatabase';\nimport { AuthUser } from '../models/AuthUser';\n\nconst jwt = require('jsonwebtoken');\n\nexport default class AuthUserDataSource extends AbstractDatabase implements AuthUserDatabase {\n\n  addAuthUser(authUser: AuthUser): Promise<AuthUser> {\n    return new Promise((resolve, reject) => {\n      this.db.find({}, (err, doc: Array<AuthUser>) => {\n        if (doc.length) {\n          logger.warn('User is already inserted');\n          reject('User is already inserted');\n          return;\n        }\n        if (!config.secretKey) {\n          const error = 'Please provide secret key on environment';\n          logger.error(error);\n          reject(error);\n          return;\n        }\n        authUser.password = CryptoUtils.encrypt(authUser.password);\n        this.db.insert(authUser, (err, doc) => {\n          if (err) {\n            logger.error(err.message);\n            reject(err);\n          } else {\n            resolve(doc);\n          }\n        });\n      });\n    });\n  }\n\n  getAuthUser(): Promise<AuthUser> {\n    return new Promise((resolve, reject) => {\n      this.db.findOne({}, (err, doc) => {\n        if (err) {\n          logger.error(err.message);\n          reject(err);\n        } else {\n          resolve(doc);\n        }\n      });\n    });\n  }\n\n  deleteAuthUsers(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      this.db.remove({}, { multi: true }, err => {\n        if (err) {\n          logger.error(err.message);\n          reject(err);\n        } else {\n          resolve('Successfully removed');\n        }\n      });\n    });\n  }\n\n  getAuthToken(authUser: AuthUser): Promise<string> {\n    return new Promise((resolve, reject) => {\n      this.db.findOne({ username: authUser.username }, (err, doc) => {\n        if (err) {\n          logger.error(err.message);\n          reject(err);\n        } else if (doc && CryptoUtils.decrypt(doc.password) === authUser.password) {\n          try {\n            const token = jwt.sign({ username: doc.username }, config.secretKey, { expiresIn: 18000 });\n            resolve(`${token}`);\n          } catch (e) {\n            logger.error(`Error: ${e.message}`);\n            reject(e.message);\n          }\n        } else {\n          logger.warn('Invalid Credentials');\n          reject('Invalid Credentials');\n        }\n      });\n    });\n  }\n\n  isAuthenticated(token: string): Promise<any> {\n    return new Promise((resolve, reject) => {\n      jwt.verify(token, config.secretKey, (err, decoded) => {\n        if (err) {\n          logger.error(err);\n          reject(err);\n        } else {\n          resolve(decoded);\n        }\n      });\n    });\n  }\n\n  protected dbName(): string {\n    return `auth`;\n  }\n\n}\n","module.exports = require(\"nedb\");","module.exports = require(\"jsonwebtoken\");","import { UiPanel } from '../../server/dashboard';\nimport { db_logger as logger } from '../../utils/loggers';\nimport { AbstractDatabase } from '../database/BaseDatabase';\nimport DashboardDatabase from '../database/DashboardDatabase';\n\nexport default class DashboardDataSource extends AbstractDatabase implements DashboardDatabase {\n\n  addUiPanel(panel: UiPanel, callback?: (err?: Error, doc?: UiPanel) => void) {\n    this.db.insert(panel, function (err, doc) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  getUiPanels(callback?: (err?: Error, docs?: UiPanel[]) => void) {\n    this.db.find({}, function (err, docs) {\n      if (err) logger.error(err);\n      if (callback) callback(err, docs);\n    });\n  }\n\n  getUiPanel(name: string, callback?: (err?: Error, doc?: UiPanel) => void) {\n    this.db.findOne({ name: name }, function (err, doc: any) {\n      if (err) logger.warn(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  updateUiPanel(name: string, update: any, callback?: (err?: Error) => void) {\n    this.db.update({ name: name }, update, {}, function (err, updated) {\n      if (err) logger.error(err.message);\n      if (updated == 0) logger.error(`Cat't update dashboard panel [${name}]. Document not found.`);\n      if (callback) callback(err);\n    });\n  }\n\n  removeUiPanel(name: string, callback?: (err?: Error) => void) {\n    this.db.remove({ name: name }, {}, function (err, removed) {\n      if (err) logger.error(err.message);\n      if (removed == 0) logger.error('Cat\\'t remove. Document not found.');\n      if (callback) callback(err);\n    });\n  }\n\n  dropUiPanels(callback?: (err?: Error) => void) {\n    this.db.remove({}, { multi: true }, function (err) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err);\n    });\n  }\n\n  protected dbName(): string {\n    return `dashboard`;\n  }\n}\n","import { db_logger as logger } from '../../utils/loggers';\nimport { AbstractDatabase } from '../database/BaseDatabase';\nimport HistorianDatabase from '../database/HistorianDatabase';\nimport { History } from '../models/historian';\n\nexport default class HistorianDataSource extends AbstractDatabase implements HistorianDatabase {\n  addHistory(history: History, callback?: (err?: Error, doc?: History) => void) {\n    this.db.insert(history, function (err, doc) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  updateHistory(\n    query: object,\n    history: History,\n    callback?: (err?: Error) => void,\n    updatedCallback?: (updated?: number) => void,\n  ) {\n    this.db.update(query, history, {}, function (err, updated) {\n      if (err) {\n        logger.error(err.message);\n      } else {\n        updatedCallback(updated);\n      }\n      if (updated == 0) logger.error(`Can't update history [${name}]. Document not found.`);\n      if (callback) callback(err);\n    });\n  }\n\n  //remove\n  removeHistory(\n    query: object,\n    callback?: (err?: Error) => void,\n    removedCallback?: (removed?: number) => void,\n  ) {\n    this.db.remove(query, {}, function (err, removed) {\n      if (err) {\n        logger.error(err.message);\n      } else {\n        removedCallback(removed);\n      }\n      if (removed == 0) logger.debug('Cat\\'t remove. History Document not found.');\n      if (callback) callback(err);\n    });\n  }\n\n  protected dbName(): string {\n    return `history`;\n  }\n}\n\n// async function find(id) {\n//     return new Promise((resolve, reject) => {\n//         try {\n//             let ab = { pntId: id };\n//             db.find({ ...ab }, (err, docs) => {\n//                 let output = [];\n//                 if (!err) {\n//                     console.logger(docs);\n//                     resolve(docs);\n//                 } else {\n//                     reject(err);\n//                 }\n//             });\n//         } catch (error) {\n//             console.logger(error);\n//         }\n//     });\n// }\n\n// async function count(id) {\n//     return new Promise((resolve, reject) => {\n//         try {\n//             let ab = { pntId: id };\n//             db.count({ ...ab }, (err, docs) => {\n//                 let output = [];\n//                 if (!err) {\n//                     console.logger(docs);\n//                     resolve(docs);\n//                 } else {\n//                     reject(err);\n//                 }\n//             });\n//         } catch (error) {\n//             console.logger(error);\n//         }\n//     });\n// }\n\n// async function add(id, obj) {\n//     return new Promise((resolve, reject) => {\n//         try {\n//             let ab = { pntId: id, ts: obj}\n//             db.insert({ ...ab }, (err, docs) => {\n//                 let output = [];\n//                 if (!err) {\n//                     console.logger(docs);\n//                     resolve(docs);\n//                 } else {\n//                     reject(err);\n//                 }\n//             });\n//         } catch (error) {\n//             console.logger(error);\n//         }\n//     });\n// }\n// //   add(123, arr)\n\n// async function deleteHis(id, hisLimit) {\n//     return new Promise((resolve, reject) => {\n//         try {\n//             let ab = { pntId: id, hisCount: { $gte: hisLimit } }\n//             db.find({ ...ab }, (err, docs) => {\n//                 let output = [];\n//                 if (!err) {\n//                     docs.forEach(element => {\n//                         db.remove({ _id: element._id }, {}, function (err, numRemoved) {\n//                             // numRemoved = 1\n//                             console.logger(numRemoved + 'num rem')\n//                         });\n//                     });\n//                     resolve(docs);\n//                 } else {\n//                     reject(err);\n//                 }\n//             });\n//         } catch (error) {\n//             console.logger(error);\n//         }\n//     });\n// }\n// //   deleteHis(123, 0)\n","import { Node } from '../../nodes/node';\nimport { SerializedNode } from '../../nodes/node-interface';\nimport { SerializableHelper } from '../../nodes/serializable';\nimport { IdGenerator } from '../../utils/id-generator';\nimport { db_logger as logger } from '../../utils/loggers';\nimport { AbstractDatabase } from '../database/BaseDatabase';\nimport NodeDatabase from '../database/NodeDatabase';\n\nexport default class NodeDataSource extends AbstractDatabase implements NodeDatabase {\n\n  addNode(node: Node, callback?: (err?: Error, doc?: SerializedNode) => void) {\n    let ser_node = SerializableHelper.serialize<SerializedNode>(node);\n    ser_node['_id'] = IdGenerator.createNodeId(ser_node.cid, ser_node.id);\n\n    this.db.insert(ser_node, function (err, doc) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  batchInsertNodes(nodes: SerializedNode[], callback?: (err?: Error, docs?: SerializedNode[]) => void) {\n    this.db.insert(nodes.map(n => {\n      n['_id'] = IdGenerator.createNodeId(n.cid, n.id);\n      return SerializableHelper.serialize<SerializedNode>(n);\n    }), function (err, doc) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  batchDeleteNodes(query, callback?: (err?: Error, docs?: number) => void) {\n    this.db.remove(query, { multi: true }, function (err, docs) {\n      if (err) logger.warn(err.message);\n      if (callback) callback(err, docs);\n    });\n  }\n\n  getNodes(callback?: (err?: Error, docs?: Array<SerializedNode>) => void) {\n    this.db.find({}, function (err, docs) {\n      if (err) logger.warn(err);\n      if (callback) callback(err, docs);\n    });\n  }\n\n  getNode(id: string | number, cid: string | number, callback?: (err?: Error, doc?: SerializedNode) => void) {\n    let _id = IdGenerator.createNodeId(cid, id);\n    this.db.findOne({ _id: _id }, function (err, doc: any) {\n      if (err) logger.warn(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  getNodeType(type: string, callback?: (err?: Error, docs?: Array<SerializedNode>) => void) {\n    this.db.find({ type: type }, function (err, docs) {\n      if (err) logger.warn(err.message);\n      if (callback) callback(err, docs);\n    });\n  }\n\n  listNodes(query, callback?: (err?: Error, docs?: Array<any>) => void) {\n    this.db.find(query, function (err, docs) {\n      if (err) logger.warn(err.message);\n      if (callback) callback(err, docs);\n    });\n  }\n\n  updateNode(id: string | number, cid: string | number, update: any, callback?: (err?: Error) => void) {\n    let _id = IdGenerator.createNodeId(cid, id);\n    this.db.update({ _id: _id }, update, {}, function (err, updated) {\n      if (err) logger.error(err.message);\n      if (updated == 0) logger.warn(`Can't update node [${cid}/${id}]. Document not found.`);\n      if (callback) callback(err);\n    });\n  }\n\n  removeNode(id: string | number, cid: string | number, callback?: (err?: Error) => void) {\n    let _id = IdGenerator.createNodeId(cid, id);\n    this.db.remove({ _id: _id }, {}, function (err, removed) {\n      if (err) logger.error(err.message);\n      if (removed == 0) logger.warn(`Can't remove. Document not found.`);\n      if (callback) callback(err);\n    });\n  }\n\n  dropNodes(callback?: (err?: Error) => void) {\n    this.db.remove({}, { multi: true }, function (err) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err);\n    });\n  }\n\n  protected dbName(): string {\n    return `nodes`;\n  }\n}\n","import * as NeDBDataStore from 'nedb';\nimport { db_logger as logger } from '../../utils/loggers';\nimport { AbstractDatabase } from '../database/BaseDatabase';\nimport ScheduleDatabase from '../database/ScheduleDatabase';\nimport { Schedule } from '../models/schedule';\n\nexport default class ScheduleDataSource extends AbstractDatabase implements ScheduleDatabase {\n  db: NeDBDataStore;\n\n  addSchedule(schedule: Schedule, callback?: (err?: Error, doc?: Schedule) => void) {\n    this.db.insert(schedule, function (err, doc) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  updateSchedule(\n    query: object,\n    schedule: Schedule,\n    callback?: (err?: Error) => void,\n    updatedCallback?: (updated?: number) => void,\n  ) {\n    this.db.update(query, schedule, {}, function (err, updated) {\n      if (err) {\n        logger.error(err.message);\n      } else {\n        updatedCallback(updated);\n      }\n      if (updated == 0) logger.error(`Can't update schedule [${name}]. Document not found.`);\n      if (callback) callback(err);\n    });\n  }\n\n  //remove\n  removeSchedule(\n    query: object,\n    callback?: (err?: Error) => void,\n    removedCallback?: (removed?: number) => void,\n  ) {\n    this.db.remove(query, {}, function (err, removed) {\n      if (err) {\n        logger.error(err.message);\n      } else {\n        removedCallback(removed);\n      }\n      if (removed == 0) logger.debug('Cat\\'t remove. Schedule Document not found.');\n      if (callback) callback(err);\n    });\n  }\n\n  protected dbName(): string {\n    return `schedule`;\n  }\n}\n","import { db_logger as logger } from '../../utils/loggers';\nimport { AbstractDatabase } from '../database/BaseDatabase';\nimport UserDatabase from '../database/UserDatabase';\nimport { User } from '../models/user';\n\nexport default class UserDataSource extends AbstractDatabase implements UserDatabase {\n\n  addUser(user: User, callback?: (err?: Error, doc?: User) => void) {\n    this.db.insert(user, function (err, doc) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  getUser(query: object, callback?: (err?: Error, doc?: User) => void) {\n    this.db.findOne(query, function (err, doc: any) {\n      if (err) logger.warn(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  getUsers(callback?: (err?: Error, docs?: Array<User>) => void) {\n    this.db.find({}, function (err, docs) {\n      if (err) logger.error(err);\n      if (callback) callback(err, docs);\n    });\n  }\n\n  getAsyncUsers(): Promise<any> {\n    return new Promise((resolve, reject) => {\n      this.db.find({}, function (err, doc: any) {\n        if (err) {\n          logger.warn(err.message);\n          reject(err);\n        } else {\n          resolve(doc);\n        }\n      });\n    });\n  }\n\n  updateUser(query: object, user: User, callback?: (err?: Error) => void) {\n    this.db.update(query, user, {}, function (err, updated) {\n      if (err) logger.error(err.message);\n      if (updated == 0) logger.error(`Cat't update user [${name}]. Document not found.`);\n      if (callback) callback(err);\n    });\n  }\n\n  getUsersCount(callback?: (err?: Error, num?: number) => void) {\n    this.db.count({}, function (err, num) {\n      if (err) logger.warn(err.message);\n      if (callback) callback(err, num);\n    });\n  }\n\n  addOrUpdateUser(query: object, user: User): Promise<any> {\n    return new Promise((resolve, reject) => {\n      this.getUser(query, (err, usr) => {\n        if (usr) {\n          this.updateUser(query, user, err => {\n            if (err) {\n              reject(err);\n            } else {\n              resolve();\n            }\n          });\n        } else {\n          this.addUser(user, err => {\n            if (err) {\n              reject(err);\n            } else {\n              resolve();\n            }\n          });\n        }\n      });\n    });\n  }\n\n  removeUser(query: object, callback?: (err?: Error) => void) {\n    this.db.remove(query, {}, function (err, removed) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err);\n    });\n  }\n\n  dropUsers(callback?: (err?: Error) => void) {\n    this.db.remove({}, { multi: true }, function (err) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err);\n    });\n  }\n\n  protected dbName(): string {\n    return `users`;\n  }\n}\n"],"sourceRoot":""}