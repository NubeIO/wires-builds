{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./nodes/node-io.ts","webpack:///./nodes/container.ts","webpack:///./nodes/node-info.ts","webpack:///./nodes/node.ts","webpack:///./nodes/node-interface.ts","webpack:///./nodes/utils.ts","webpack:///./utils/helper.ts","webpack:///./nodes/utils/time-utils.ts","webpack:///./nodes/flexible-node.ts","webpack:///external \"logplease\"","webpack:///./config.ts","webpack:///./nodes/constants.ts","webpack:///./utils/loggers.ts","webpack:///./nodes/node-type-registry.ts","webpack:///./utils/id-generator.ts","webpack:///external \"moment-timezone\"","webpack:///external \"axios\"","webpack:///external \"lodash\"","webpack:///./nodes/container-node.ts","webpack:///./utils/decorators.ts","webpack:///./nodes/node-link.ts","webpack:///external \"express\"","webpack:///external \"child_process\"","webpack:///./utils/errors.ts","webpack:///./nodes/node-db-helper.ts","webpack:///./nodes/utils/crypto-utils.ts","webpack:///./nodes/nodes/dashboard/ui-node.ts","webpack:///external \"node-bacnet\"","webpack:///./nodes/nodes/statistics/statistics.ts","webpack:///./nodes/serializable.ts","webpack:///./nodes/node-registry.ts","webpack:///./app.ts","webpack:///./nodes/node-factory.ts","webpack:///external \"fs\"","webpack:///./nodes/utils/os-utils.ts","webpack:///./database/database/BaseDatabase.ts","webpack:///external \"moment\"","webpack:///./shared/validator.ts","webpack:///./promise-actor.ts","webpack:///./nodes/utils/file-utils.ts","webpack:///./database/datasource/PlatformDataSource.ts","webpack:///./nodes/nodes/protocols/edge-28/edge-constant.ts","webpack:///./backend/models/point-model.ts","webpack:///external \"enumify\"","webpack:///./shared/websocket-events.ts","webpack:///./nodes/registry.ts","webpack:///./pub-sub/PubSubHelpers.ts","webpack:///./nodes/node-icons.ts","webpack:///./nodes/nodes/IoT/shared/mixin.ts","webpack:///./nodes/nodes/system/system-utils.ts","webpack:///./nodes/nodes/history/HistoryBase.ts","webpack:///external \"jsonata\"","webpack:///./nodes/nodes/protocols/edge-28/edge-utils.ts","webpack:///./nodes/nodes/protocols/bacnet/bacnet-constant.ts","webpack:///./nodes/nodes/protocols/model/point-node.ts","webpack:///./utils/pattern.ts","webpack:///./nodes/nodes/protocols/connection-node-mixin.ts","webpack:///external \"path\"","webpack:///./database/database.ts","webpack:///./nodes/node-hook.ts","webpack:///./backend/entry.ts","webpack:///./server/service/node-service.ts","webpack:///./nodes/utils/ip-address-utils.ts","webpack:///./nodes/utils/uuid-utils.ts","webpack:///./nodes/nodes/protocols/modbus/modbus-fc/modbus-point-byte-order.ts","webpack:///./nodes/nodes/bsa/bsa-client-config.ts","webpack:///external \"influx\"","webpack:///./nodes/lib/psychrolib.ts","webpack:///./nodes/utils/points/BACnet-enums-units.ts","webpack:///./nodes/nodes/protocols/bacnet/bacnet-utils.ts","webpack:///./nodes/nodes/protocols/bacnet-server/core/util.js","webpack:///external \"mqtt\"","webpack:///./nodes/nodes/protocols/mqtt/mqtt-client-node.ts","webpack:///external \"cron\"","webpack:///external \"cronstrue\"","webpack:///./shared/link-result-visitor.ts","webpack:///external \"@hapi/joi\"","webpack:///./nodes/node-presenter.ts","webpack:///./pub-sub/DispatchNode.ts","webpack:///./pub-sub/DispatcherRegistry.ts","webpack:///./pub-sub/PubSub.ts","webpack:///./backend/api.ts","webpack:///./nodes/nodes/IoT/shared/api-container-node.ts","webpack:///./nodes/nodes/IoT/shared/top-level-api-container-node.ts","webpack:///external \"lodash-decorators/debounce\"","webpack:///external \"socket.io\"","webpack:///./server/middleware.ts","webpack:///./server/routes/handler/api-handler.ts","webpack:///./server/service/NodeCRUDService.ts","webpack:///./shared/etl-result.ts","webpack:///./nodes/nodes/container/folder.ts","webpack:///external \"os\"","webpack:///external \"set-ip-address\"","webpack:///external \"ip\"","webpack:///external \"util\"","webpack:///./nodes/nodes/container/abstract-folder-io.ts","webpack:///./nodes/utils/setting-utils.ts","webpack:///./nodes/utils/points/point-ref-utils.ts","webpack:///./nodes/utils/string-json-compare-utils.ts","webpack:///./nodes/utils/node-utils.ts","webpack:///./nodes/utils/MathUtils.ts","webpack:///./nodes/nodes/protocols/edge-28/edge-gpio-utils.ts","webpack:///./nodes/nodes/protocols/bacnet-server/bacnet-server-node.ts","webpack:///./nodes/nodes/protocols/model/container-node-store.ts","webpack:///./nodes/nodes/protocols/ProtocolDeviceNode.ts","webpack:///./utils/enums.ts","webpack:///./nodes/nodes/node-mixin.ts","webpack:///./nodes/nodes/protocols/bacnet-server/core/bacnet-object-property.js","webpack:///./nodes/nodes/protocols/bacnet-server/core/bacnet-model.ts","webpack:///./nodes/nodes/protocols/lora-raw/lora-two-way-in.ts","webpack:///external \"crypto\"","webpack:///external \"modbus-serial\"","webpack:///external \"net\"","webpack:///external \"mqtt-match\"","webpack:///./nodes/nodes/protocols/mqtt/mqtt-client-node-store.ts","webpack:///external \"serialport\"","webpack:///./nodes/utils/nodes/node-colour-change.ts","webpack:///external \"source-map-support\"","webpack:///external \"process\"","webpack:///external \"minimist\"","webpack:///external \"dotenv\"","webpack:///./backend/backend.ts","webpack:///./shared/link-result.ts","webpack:///./pub-sub/IPubSub.ts","webpack:///./nodes/utils/help/protocols/edge-28.ts","webpack:///./nodes/nodes/IoT/datapoint-node.ts","webpack:///./backend/datapoint.ts","webpack:///./nodes/nodes/IoT/installer-node.ts","webpack:///./backend/installer.ts","webpack:///./nodes/nodes/IoT/shared/api-node.ts","webpack:///./server/dashboard.ts","webpack:///./server/server.ts","webpack:///external \"body-parser\"","webpack:///external \"cookie-parser\"","webpack:///external \"http\"","webpack:///external \"morgan\"","webpack:///./server/dashboard-server-socket.ts","webpack:///./server/editor-server-socket.ts","webpack:///./nodes/node-utils.ts","webpack:///./server/ping-pong-server-socket.ts","webpack:///./server/routes/api-editor.ts","webpack:///./server/routes/handler/api-link-handler.ts","webpack:///./server/service/NodeLinkService.ts","webpack:///./server/routes/handler/api-node-handler.ts","webpack:///./server/service/NodeETLService.ts","webpack:///./server/wire-name-server-socket.ts","webpack:///external \"express-validator\"","webpack:///./server/routes/dashboard.ts","webpack:///./server/routes/api-dashboard.ts","webpack:///./server/routes/editor.ts","webpack:///./server/routes/api-wire-name.ts","webpack:///./database/datasource/WireNameDataSource.ts","webpack:///./server/routes/auth.ts","webpack:///external \"crypto-js\"","webpack:///./server/routes/api-help.ts","webpack:///./database/datasource/HelpDataSource.ts","webpack:///./server/routes/api-platform.ts","webpack:///external \"systeminformation\"","webpack:///external \"network\"","webpack:///./utils/wires-plat.ts","webpack:///./nodes/nodes/index.ts","webpack:///./nodes/nodes/boolean/and.ts","webpack:///./nodes/nodes/boolean/or.ts","webpack:///./nodes/nodes/boolean/xor.ts","webpack:///./nodes/nodes/boolean/not.ts","webpack:///./nodes/nodes/boolean/toggle.ts","webpack:///./nodes/nodes/boolean/one-shot.ts","webpack:///./nodes/nodes/boolean/min-on-off.ts","webpack:///./nodes/nodes/boolean/on-delay.ts","webpack:///./nodes/nodes/boolean/off-delay.ts","webpack:///./nodes/nodes/boolean/ticker.ts","webpack:///./nodes/nodes/compare/equal.ts","webpack:///./nodes/nodes/compare/greater-than.ts","webpack:///./nodes/nodes/compare/less-than.ts","webpack:///./nodes/nodes/compare/between.ts","webpack:///./nodes/nodes/compare/hysteresis.ts","webpack:///./nodes/nodes/compare/type-check.ts","webpack:///./nodes/nodes/connection/DispatchListener.ts","webpack:///./pub-sub/Decorators.ts","webpack:///./nodes/nodes/connection/local-transmitter-single.ts","webpack:///./nodes/nodes/connection/local-receiver-single.ts","webpack:///./nodes/nodes/connection/local-transmitter.ts","webpack:///./nodes/nodes/connection/local-receiver.ts","webpack:///./nodes/nodes/connection/hub.ts","webpack:///./nodes/nodes/container/folder-input.ts","webpack:///./nodes/nodes/container/folder-output.ts","webpack:///./nodes/nodes/conversion/bit-mask.ts","webpack:///./nodes/nodes/conversion/bit-split.ts","webpack:///./nodes/nodes/conversion/bool-to-int.ts","webpack:///./nodes/nodes/conversion/buffer-to-hex-string.ts","webpack:///./nodes/nodes/conversion/buffer-to-num.ts","webpack:///./nodes/nodes/conversion/data-conversion.ts","webpack:///external \"convert-units\"","webpack:///./nodes/nodes/conversion/hex-string-to-buffer.ts","webpack:///./nodes/nodes/conversion/int-to-byte-four-array.ts","webpack:///./nodes/nodes/count/any-event-counter.ts","webpack:///./nodes/nodes/count/counter.ts","webpack:///./nodes/nodes/count/triggered-ramp.ts","webpack:///./nodes/nodes/count/interval-ramp.ts","webpack:///./nodes/nodes/count/waveform.ts","webpack:///./nodes/nodes/csv/csv-merge-rows.ts","webpack:///./nodes/nodes/csv/csv-merge-columns.ts","webpack:///./nodes/nodes/bsa/bsa-cumulocity-device.ts","webpack:///./nodes/nodes/bsa/bsa-cumulocity-point.ts","webpack:///./nodes/nodes/bsa/bsa-cumulocity-alarm.ts","webpack:///./nodes/nodes/custom-function/function.ts","webpack:///./nodes/nodes/custom-function/base-function-node.ts","webpack:///external \"vm2\"","webpack:///./nodes/nodes/custom-function/uuid.ts","webpack:///./nodes/nodes/dashboard/label.ts","webpack:///./nodes/nodes/dashboard/button.ts","webpack:///./nodes/nodes/dashboard/switch.ts","webpack:///./nodes/nodes/dashboard/progress.ts","webpack:///./nodes/nodes/dashboard/slider.ts","webpack:///./nodes/nodes/dashboard/text-box.ts","webpack:///./nodes/nodes/dashboard/log.ts","webpack:///./nodes/nodes/dashboard/chart.ts","webpack:///./nodes/nodes/debug/console.ts","webpack:///./nodes/nodes/debug/notes.ts","webpack:///./nodes/nodes/debug/watch.ts","webpack:///./nodes/nodes/error/link-error-check.ts","webpack:///./nodes/nodes/error/output-error-check.ts","webpack:///./nodes/nodes/filter/only-true.ts","webpack:///./nodes/nodes/filter/only-false.ts","webpack:///./nodes/nodes/filter/only-between.ts","webpack:///./nodes/nodes/filter/only-greater.ts","webpack:///./nodes/nodes/filter/only-lower.ts","webpack:///./nodes/nodes/filter/only-equal.ts","webpack:///./nodes/nodes/filter/prevent-null.ts","webpack:///./nodes/nodes/filter/prevent-equal.ts","webpack:///./nodes/nodes/filter/prevent-duplicates.ts","webpack:///./nodes/nodes/history/data-store.ts","webpack:///./nodes/nodes/history/influx-db.ts","webpack:///./nodes/nodes/history/influx-db-2.ts","webpack:///external \"@influxdata/influxdb-client\"","webpack:///external \"@influxdata/influxdb-client-apis\"","webpack:///./nodes/nodes/history/history.ts","webpack:///./nodes/nodes/history/point-persistence.ts","webpack:///./nodes/nodes/history/point-tag.ts","webpack:///./nodes/nodes/hvac/deadband.ts","webpack:///./nodes/nodes/hvac/thermostat.ts","webpack:///./nodes/nodes/hvac/lead-lag-staging.ts","webpack:///./nodes/nodes/hvac/lead-lag-switch.ts","webpack:///./nodes/nodes/hvac/pac-unit-control.ts","webpack:///./nodes/nodes/hvac/PID.ts","webpack:///./nodes/lib/pid-controller.ts","webpack:///./nodes/nodes/hvac/toggle-duration.ts","webpack:///./nodes/nodes/hvac/psychometrics.ts","webpack:///./nodes/nodes/hvac/energy-conversion.ts","webpack:///./nodes/nodes/hvac/power-conversion.ts","webpack:///./nodes/nodes/hvac/volume-conversion.ts","webpack:///./nodes/nodes/hvac/temperature-conversion.ts","webpack:///./nodes/nodes/hvac/atm-pressure-conversion.ts","webpack:///./nodes/nodes/hvac/pressure-conversion.ts","webpack:///./nodes/nodes/hvac/actuator-sizing.ts","webpack:///./nodes/nodes/hvac/k-factor.ts","webpack:///./nodes/nodes/hvac/dp-airflow.ts","webpack:///./nodes/nodes/json/array-builder.ts","webpack:///./nodes/nodes/json/array-builder-num.ts","webpack:///./nodes/nodes/json/array-combine.ts","webpack:///./nodes/nodes/json/json-builder.ts","webpack:///./nodes/nodes/json/json-enum-builder.ts","webpack:///./nodes/nodes/json/json-filter.ts","webpack:///./nodes/nodes/json/json-obj-filter.ts","webpack:///./nodes/nodes/json/json-filter-compare.ts","webpack:///./nodes/nodes/json/json-filter-multiple.ts","webpack:///./nodes/nodes/json/json-checker.ts","webpack:///./nodes/nodes/json/json-parse.ts","webpack:///./nodes/nodes/json/json-prevent-duplicates.ts","webpack:///./nodes/nodes/json/json-query.ts","webpack:///./nodes/nodes/latch/any-latch.ts","webpack:///./nodes/nodes/latch/bool-latch.ts","webpack:///./nodes/nodes/latch/num-latch.ts","webpack:///./nodes/nodes/latch/string-latch.ts","webpack:///./nodes/nodes/latch/set-reset.ts","webpack:///./nodes/nodes/math/add.ts","webpack:///./nodes/nodes/math/subtract.ts","webpack:///./nodes/nodes/math/multiply.ts","webpack:///./nodes/nodes/math/divide.ts","webpack:///./nodes/nodes/math/absolute.ts","webpack:///./nodes/nodes/math/modulus.ts","webpack:///./nodes/nodes/math/power.ts","webpack:///./nodes/nodes/math-advanced/acos.ts","webpack:///./nodes/nodes/math-advanced/asin.ts","webpack:///./nodes/nodes/math-advanced/atan.ts","webpack:///./nodes/nodes/math-advanced/cbrt.ts","webpack:///./nodes/nodes/math-advanced/cos.ts","webpack:///./nodes/nodes/math-advanced/exp.ts","webpack:///./nodes/nodes/math-advanced/log.ts","webpack:///./nodes/nodes/math-advanced/log10.ts","webpack:///./nodes/nodes/math-advanced/sin.ts","webpack:///./nodes/nodes/math-advanced/sqrt.ts","webpack:///./nodes/nodes/math-advanced/tan.ts","webpack:///./nodes/nodes/math-trigger/trigger-add.ts","webpack:///./nodes/nodes/math-trigger/trigger-subtract.ts","webpack:///./nodes/nodes/math-trigger/trigger-multiply.ts","webpack:///./nodes/nodes/math-trigger/trigger-divide.ts","webpack:///./nodes/nodes/math-trigger/trigger-modulus.ts","webpack:///./nodes/nodes/math-trigger/trigger-power.ts","webpack:///./nodes/nodes/miscellaneous/geo-hash.ts","webpack:///external \"ngeohash\"","webpack:///./nodes/nodes/miscellaneous/num-series-generator.ts","webpack:///./nodes/nodes/miscellaneous/append-to-strings.ts","webpack:///./nodes/nodes/nube/get-schedules.ts","webpack:///external \"btoa\"","webpack:///./nodes/nodes/num-transform/round.ts","webpack:///./nodes/nodes/num-transform/floor.ts","webpack:///./nodes/nodes/num-transform/ceil.ts","webpack:///./nodes/nodes/num-transform/limit.ts","webpack:///./nodes/nodes/num-transform/scale.ts","webpack:///./nodes/nodes/num-transform/linear-shaper.ts","webpack:///./nodes/nodes/num-transform/fade.ts","webpack:///./nodes/nodes/num-transform/rate-limit.ts","webpack:///./nodes/nodes/point/bool-constant.ts","webpack:///./nodes/nodes/point/num-constant.ts","webpack:///./nodes/nodes/point/string-constant.ts","webpack:///./nodes/nodes/point/json-constant.ts","webpack:///./nodes/nodes/point/bool-writable.ts","webpack:///./nodes/nodes/point/num-writable.ts","webpack:///./nodes/nodes/point/string-writable.ts","webpack:///./nodes/nodes/point/generic-point.ts","webpack:///./nodes/utils/points/history-config.ts","webpack:///./nodes/utils/points/priority-config.ts","webpack:///./nodes/nodes/protocols/email/email.ts","webpack:///external \"nodemailer\"","webpack:///./nodes/nodes/protocols/http/http-client.ts","webpack:///./nodes/nodes/protocols/edge-28/edge-28-network.ts","webpack:///./nodes/nodes/protocols/edge-28/edge-28-input.ts","webpack:///./nodes/nodes/protocols/edge-28/edge-10k-sensor-calc.ts","webpack:///./nodes/nodes/protocols/edge-28/edge-28-output.ts","webpack:///./nodes/nodes/protocols/edge-28/edge-28-lora-reset.ts","webpack:///./nodes/nodes/protocols/bacnet/bacnet-network.ts","webpack:///./nodes/nodes/protocols/bacnet/bacnet-device.ts","webpack:///./nodes/nodes/protocols/bacnet/bacnet-point.ts","webpack:///./nodes/nodes/protocols/model/point-node-utils.ts","webpack:///./nodes/nodes/protocols/bacnet-server/core/bacnet-device.js","webpack:///external \"assert\"","webpack:///./nodes/nodes/protocols/bacnet-server/core/bacnet-object.js","webpack:///./nodes/nodes/protocols/bacnet-server/core/typemap-property.js","webpack:///./nodes/nodes/protocols/bacnet-server/core/mandatory-properties.js","webpack:///./nodes/nodes/protocols/bacnet-server/bacnet-server-point.ts","webpack:///./nodes/nodes/protocols/lora-raw/lora.ts","webpack:///./nodes/nodes/protocols/lora-raw/lora-two-way-out.ts","webpack:///./nodes/nodes/protocols/lora-raw-v2/lora-raw-points.ts","webpack:///./nodes/nodes/protocols/lora-raw-v2/lora-raw-crypt.ts","webpack:///external \"node-aes-cmac\"","webpack:///./nodes/nodes/protocols/lora-raw-v2/lora-raw-sensor-legacy.ts","webpack:///./nodes/nodes/protocols/modbus/modbus-server.ts","webpack:///./nodes/nodes/protocols/modbus/modbus-rtu-device.ts","webpack:///./nodes/nodes/protocols/modbus/modbus-rtu-point.ts","webpack:///./nodes/nodes/protocols/modbus/modbus-rtu-network.ts","webpack:///./nodes/nodes/protocols/modbus/modbus-fc/modbus-point-methods.ts","webpack:///./nodes/nodes/protocols/modbus/modbus-functions.ts","webpack:///./nodes/nodes/protocols/mqtt/mqtt-client.ts","webpack:///./nodes/nodes/protocols/mqtt/mqtt-client-single.ts","webpack:///./nodes/nodes/protocols/mqtt/core/mqtt-device.ts","webpack:///./nodes/nodes/protocols/mqtt/mqtt-point-node.ts","webpack:///./nodes/nodes/protocols/mqtt/core/mqtt-model.ts","webpack:///./nodes/nodes/protocols/mqtt/mqtt-generic-node.ts","webpack:///./nodes/nodes/protocols/mqtt-broker/mqtt-broker.ts","webpack:///./nodes/nodes/protocols/mqtt/topic-parts.ts","webpack:///./nodes/nodes/protocols/mqtt/topic-builder.ts","webpack:///./nodes/nodes/protocols/serial-connector/serial-connector.ts","webpack:///./nodes/utils/serial-utils.ts","webpack:///./nodes/nodes/schedule/weekly-schedule.ts","webpack:///./nodes/nodes/schedule/schedule-merge.ts","webpack:///./nodes/nodes/schedule/schedule-checker.ts","webpack:///./nodes/nodes/schedule/schedule-utils.ts","webpack:///./nodes/nodes/statistics/min-max-avg.ts","webpack:///./nodes/nodes/statistics/avg.ts","webpack:///./nodes/nodes/statistics/min.ts","webpack:///./nodes/nodes/statistics/max.ts","webpack:///./nodes/nodes/statistics/sum.ts","webpack:///./nodes/nodes/statistics/median.ts","webpack:///./nodes/nodes/statistics/range.ts","webpack:///./nodes/nodes/statistics/rank.ts","webpack:///./nodes/nodes/statistics/stats-all.ts","webpack:///./nodes/nodes/streams/stream-average.ts","webpack:///./nodes/nodes/streams/stream-highest.ts","webpack:///./nodes/nodes/streams/stream-lowest.ts","webpack:///./nodes/nodes/streams/stream-sum.ts","webpack:///./nodes/nodes/streams/stream-merge.ts","webpack:///./nodes/nodes/streams/gate.ts","webpack:///./nodes/nodes/streams/stack.ts","webpack:///./nodes/nodes/streams/queue.ts","webpack:///./nodes/nodes/streams/stream-delay.ts","webpack:///./nodes/nodes/streams/stream-delay-meter.ts","webpack:///./nodes/nodes/streams/frequency-meter.ts","webpack:///./nodes/nodes/streams/flatline.ts","webpack:///./nodes/nodes/string/string-acronyms.ts","webpack:///./nodes/nodes/string/string-compare.ts","webpack:///./nodes/nodes/string/substring-cut.ts","webpack:///./nodes/nodes/string/string-join.ts","webpack:///./nodes/nodes/string/string-length.ts","webpack:///./nodes/nodes/string/string-index-of.ts","webpack:///./nodes/nodes/string/char-at-index.ts","webpack:///./nodes/nodes/string/string-split.ts","webpack:///./nodes/nodes/string/string-case.ts","webpack:///./nodes/nodes/string/char-to-ascii.ts","webpack:///./nodes/nodes/string/ascii-to-char.ts","webpack:///./nodes/nodes/string/string-buffer.ts","webpack:///./nodes/nodes/switch/bool-switch.ts","webpack:///./nodes/nodes/switch/num-switch.ts","webpack:///./nodes/nodes/switch/string-switch.ts","webpack:///./nodes/nodes/switch/bool-select.ts","webpack:///./nodes/nodes/switch/num-select.ts","webpack:///./nodes/nodes/switch/string-select.ts","webpack:///./nodes/nodes/switch/bool-output-select.ts","webpack:///./nodes/nodes/switch/num-output-select.ts","webpack:///./nodes/nodes/switch/string-output-select.ts","webpack:///./nodes/nodes/system/host-info.ts","webpack:///./nodes/nodes/system/platform.ts","webpack:///./nodes/nodes/system/system-info.ts","webpack:///./nodes/nodes/system/beep.ts","webpack:///./nodes/nodes/system/execute-cmd.ts","webpack:///./nodes/nodes/system/flow-export.ts","webpack:///./nodes/nodes/system/ip/network-interfaces-bbb.ts","webpack:///./nodes/nodes/system/ip/network-interfaces.ts","webpack:///./nodes/nodes/system/wires-version.ts","webpack:///./nodes/nodes/time/time-conversion.ts","webpack:///./nodes/nodes/time/time-conversion-plus.ts","webpack:///./nodes/nodes/time/timezone-conversion.ts","webpack:///./nodes/utils/timezone-utils.ts","webpack:///./nodes/nodes/time/clock.ts","webpack:///./nodes/nodes/time/date.ts","webpack:///./nodes/nodes/time/time-diff.ts","webpack:///./nodes/nodes/time/stopwatch.ts","webpack:///./nodes/nodes/time/cron-interval.ts","webpack:///./nodes/nodes/time/cron-weekly.ts","webpack:///./nodes/nodes/time/cron-expression.ts","webpack:///external \"cron-validator\"","webpack:///./nodes/nodes/time/timestamp-generator.ts","webpack:///./nodes/nodes/trigger/change-of-value.ts","webpack:///./nodes/nodes/trigger/random.ts","webpack:///./nodes/nodes/trigger/inject.ts","webpack:///./nodes/nodes/trigger/interval-inject.ts","webpack:///./nodes/nodes/trigger/iterator.ts","webpack:///./nodes/nodes/widget/schedule-afterhours-off.ts","webpack:///./nodes/nodes/widget/schedule-prestart-fixed.ts","webpack:///./nodes/nodes/unknown/unknown-export.ts","webpack:///./nodes/nodes/unknown/unknown.ts","webpack:///./database/neDbDatabase.ts","webpack:///./database/datasource/AuthUserDataSource.ts","webpack:///external \"nedb\"","webpack:///external \"jsonwebtoken\"","webpack:///./database/datasource/DashboardDataSource.ts","webpack:///./database/datasource/HistorianDataSource.ts","webpack:///./database/datasource/NodeDataSource.ts","webpack:///./database/datasource/ScheduleDataSource.ts","webpack:///./database/datasource/UserDataSource.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Type","SettingType","NodeSetting","description","type","config","validation","toJSON","this","SerializableHelper","serialize","serializedObj","AbstractNodeIO","label","locked","pos","round","data","updated","subNodeId","NodeOutput","links","super","isEmpty","map","Link","NodeInput","setting","link","isOptional","isNull","convertStringToType","STRING","NUMBER","BOOLEAN","JSON","ANY","convertSettingType","convertType","DROPDOWN","logger","color","Colors","Magenta","ContainerRegistry","DefaultContainerRegistry","_instance","rootContainer","force","container","optimizeBeforeRegister","id","server_dashboard_socket","server_editor_socket","client_socket","db","dashboard","ErrorHandler","NodeInContainerRegistry","DefaultSubNodeRegistry","parent","containerRegistry","globalNodeRegistry","node","isCaching","sNode","NodeFactory","toSimpleNode","nodeId","IdGenerator","createNodeId","cid","logInfo","side","isFolderNode","sub_container","Promise","resolve","isNode","then","NodeHookHelper","execute","createNodeDbHelper","delete","_","remove","validate","nodeItself","shouldRejectNodeType","RegistryError","getReadableId","k","insert","doRegister","reassignContainer","globalRegistry","Container","folderNode","properties","renderers","UNINITIALIZED","ROOT","cloneObject","_itself","_nodeRegistry","clear","obj","serializedNodes","node_class","parentContainerNodeType","show_in_menu","recursive","alwaysInsideContainer","NodeTypeRegistry","registerNodeType","nodeRegistry","list","stop","isRunning","iteration","globaltime","runningtime","fixedtime","fixedtime_lapse","elapsed_time","starttime","sendActionToRenderer","onStopEvent","execution_timer_id","clearInterval","renderer","deselectAllNodes","detachRenderer","push","boxcolor","theme","NODE_DEFAULT_BOXCOLOR","setDirtyCanvas","indexOf","splice","length","interval","onPlayEvent","getTime","that","setInterval","runStep","steps","start","transferDataBetweenNodes","now","Date","EXECUTE_INTERVAL","executeLastTime","isUpdated","UPDATE_INPUTS_INTERVAL","updateInputsLastTime","inputs","onExecuteStep","onAfterExecute","elapsed","outputs","output","target_node","debugErr","target_id","ioId","slot","target_input","parseValue","action","params","apply","includeSubContainers","nodes","addNodes","_nodes","toLowerCase","ContainerNode","getNodesByType","forEach","nodeClass","getNodesByClass","parentId","getAllNodes","isContainer","iconImageUrl","icon","title","sort","a","b","foreground","background","f","editor","message","info","debug","warn","error","NODE_INFO","aiIcon","frog","inputsDesc","outputsDesc","doNothing","BROADCAST","NodeState","Node","settings","flags","MIN_WIDTH","settingConfigs","contextMenu","clonable","showIcon","convertInput","input","dataType","decimals","inputDataType","Number","isNaN","toFixed","stringify","oldSettings","oldName","oldIcon","size","Shape2D","isDisplayable","computeSize","entries","filter","isNotNull","disconnectInputLink","disconnectOutputLinks","selected_nodes","node_dragged","mapToObjectSameKey","onSerialize","serializedNode","isNew","doMerge","o1","o2","shouldMerge","serialized","merge","instance","debugWarn","UNKNOWN_NODE","category","getParent","keys","v","callback","val","getInputData","setOutputData","update","saveSettings","saveProperties","saveInputs","saveOutputs","props","output_id","only_if_new","undefined","isRecentlyActive","dispatch","slotId","exist","hasValidInput","nullable","settingName","match","items","x","includes","err","stack","extra_info","getFreeOutputId","hidden","getFreeInputId","defaultValue","addInput","position","inputsCount","getInputsCount","myID","outputNode","getSubNode","linksArray","replaceLinkIndex","findIndex","target_node_id","target_slot","updateNodeOutput","immediateDirtyCanvas","ids","redrawNode","target_count","diff","removeInput","getOutputsCount","addOutput","removeOutput","values","Math","max","getLastInputIndex","getLastOutputIndex","changeWidth","computeHeight","title_width","compute_text_size","maxLabelWidth","maxNameWidth","labelWidth","nameWidth","text","width","nodeIO","registry","BackendLinkVisitor","visit","createLinkHandler","disconnectOutput","input_slot","input_id","disconnectInput","dirty_foreground","dirty_background","collapsed","Side","server","emit","onlyConnectedUsers","socket","in","inputs_values","outputs_values","inputId","outputId","slots_values","sendMessageToEditorSide","UPDATE_SETTINGS","payload","UPDATE_PROPERTIES","UPDATE_OUTPUTS","UPDATE_STATE","nodeState","UPDATE_TITLE","UPDATE_NAME","UPDATE_VALUE","moment","format","state","broadcastNodeStateToClients","inputSettings","outputSettings","tempNode","e","ERROR","extractErrorMessage","NOTIFICATION","PubSubHelpers","Enumify","closeEnum","isSerializedContainer","isFunction","Utils","getFullYear","getMonth","getDate","getHours","getMinutes","parse","target","typeofVal","parseFloat","test","originalVal","formatAsPerValueType","toString","performance","digits","pow","substr","textarea","document","createElement","textContent","style","body","appendChild","select","execCommand","ex","removeChild","filename","element","setAttribute","encodeURIComponent","display","click","day","WEEKDAYS","operatorsBoolName","operatorsMathName","operatorsBool","eq","neq","lt","lte","gt","gte","btwn","contains","regex","RegExp","true","false","null","notNull","empty","Array","isArray","Buffer","isBuffer","notEmpty","operatorsStatName","stat","array","min","range","midRange","sum","num","mean","median","mid","modes","modeMap","maxCount","variance","standardDeviation","sqrt","meanAbsoluteDeviation","abs","zScores","buildUrl","host","port","schema","reduce","cv","pv","clamp","remap","inMin","inMax","outMin","outMax","renameKey","old_key","new_key","cloned","pSBC","percentageChange","fromColor","toColor","useLinear","g","P","h","parseInt","isToColorString","pSBCr","split","slice","sleep","ms","setTimeout","isJSON","isString","String","isGreaterThanZero","isNumeric","trim","toLowerSnakeCase","replace","str","func","isFinite","convertToNumber","strict","inString","Error","Generator","generator","mapper","args","from","to","step","union","collections","Set","unionToArray","mapToObject","keyMapper","valMapper","arrayToObject","arr","idx","objectOf","TIME_TYPE","TimeUtils","timeOut","timeType","DAYS","HOURS","MINUTES","SECONDS","MILLISECONDS","momentValue","roundedMinutes","ceil","minute","clone","second","millisecond","timeInMs","duration","timeConvert","mm","days","hours","minutes","seconds","milliseconds","padStart","monthNames","dayNames","dts","toDateString","mnu","pad","mn","dy","getDay","dt","yr","hr","mi","ny","getSeconds","mil","getMilliseconds","thr","amp","date","yearMonthDay","year","month","monthAsNumber","dayAsNumber","dayOfYearNumber","pmOrAm","hourAsAmPm","hour","timeHourMin","time","minutesSeconds","epoch","rawDate","console","log","FlexibleNode","nullableInputs","dynamicInputsExist","dynamicOutputsExist","dynamicSettingsExist","dynamicInputsField","dynamicOutputsField","dynamicInputStartPosition","dynamicInputsStartName","dynamicOutputsStartName","dynamicInputsType","dynamicOutputsType","dynamicMinInputs","dynamicMaxInputs","dynamicMinOutputs","dynamicMaxOutputs","dynamicDefaultInputs","dynamicDefaultOutputs","addDynamicInputsOnRange","save","count","dynamicInputsCount","addedInputsCount","addInputWithName","inputCount","updateNodeInput","addDynamicOutputsOnRange","dynamicOutputsCount","addedOutputsCount","addOutputWithName","settingWiseDynamicInputsAndSettingsUpdate","startingCount","targetCount","addDynamicSettings","settingWiseDynamicInputsAndSettingsUpdateForBoolean","dynamicIndex","getInputSetting","changeDynamicInputsAndSettings","require","env","process","rubix","version","buildNb","secretKey","SECRET_KEY","PORT","dataDir","DATA_DIR","loopInterval","LOOP_INTERVAL","backendSync","enabled","BACKEND_ENABLED","baseUrl","BACKEND_API","nodeRefreshIntervalSeconds","NODE_DISTANCE","pointRefreshIntervalSeconds","NODE_REFRESH_INTERVAL_SEC","nodeDistance","POINT_REFRESH_INTERVAL_SEC","bsa","baseURL","BSA_BASEURL","username","BSA_USERNAME","password","BSA_PASSWORD","paths","measurement","path","BSA_PATHS_MEASUREMENT_PATH","accept","BSA_PATHS_MEASUREMENT_ACCEPT","alarm","BSA_PATHS_ALARM_PATH","BSA_PATHS_ALARM_ACCEPT","contentType","BSA_PATHS_ALARM_CONTENTTYPE","device","BSA_PATHS_DEVICE_PATH","ditto","DITTO_BASEURL","DITTO_USERNAME","DITTO_PASSWORD","pg","PG_BASEURL","influxDb","protocol","INFLUX_DB_PROTOCOL","INFLUX_DB_HOST","INFLUX_DB_PORT","databaseName","INFLUX_DB_DB_NAME","INFLUX_DB_USERNAME","INFLUX_DB_PASSWORD","influxDb2","INFLUX_DB_2_PROTOCOL","url","INFLUX_DB_2_URL","token","INFLUX_DB_2_TOKEN","bucket","INFLUX_DB_2_BUCKET","org","INFLUX_DB_2_ORG","INFLUX_DB_2_USERNAME","INFLUX_DB_2_PASSWORD","edge28","EDGE_28_BASEURL","EDGE_28_PORT","apiVer","EDGE_28_API_VER","mqtt","MQTT_PROTOCOL","MQTT_HOST","MQTT_PORT","MQTT_USERNAME","MQTT_PASSWORD","RUBIX_VERSION","EDGES_PARENT_CONTAINER_TYPE","MODULES_PARENT_CONTAINER_TYPE","SERVICES_PARENT_CONTAINER_TYPE","EDGE_CONTAINER_TYPE","NETWORK_CONTAINER_TYPE","DEVICE_CONTAINER_TYPE","GROUP_CONTAINER_TYPE","POINT_NODE_TYPE","SERVICE_NODE_TYPE","MODULE_NODE_TYPE","IOT_TYPES","MODBUS_RTU_NETWORK","MODBUS_RTU_DEVICE","MODBUS_RTU_POINT","BACNET_NETWORK","BACNET_DEVICE","BACNET_POINT","EDGE_28_NETWORK","EDGE_28_INPUT","EDGE_28_OUTPUT","MQTT_NETWORK","MQTT_POINT_WRITE","MQTT_POINT_READ","db_logger","Blue","registry_logger","reliability_logger","Red","node_service_logger","Cyan","AbstractRegistry","lastIndexOf","node_name","onlyInsideContainer","headerColor","register","has","_registry","startingIdx","createGuardId","NODE_HASH_KEY","PRIME","CONTAINER_HASH_KEY","cId","nId","hashKey","hash","guardKey","startIdx","folder","deserialize","applyTitle","onAdded","afterAdded","content","openContainer","NAME","logError","alert","propertyKey","descriptor","fn","ErrorCallbackHandler","errHandler","AsyncErrorHandler","createNodeLink","source","targets","nodeIOtoMsg","msg","io","join","compareNodeIO","io1","io2","target_input_id","createLegacyLinkHandler","dbHelper","DefaultLinkHandler","targetNode","outputSlot","number","oId","iId","DefaultNodeLinkHandler","bT","base","rT","references","len","direction","first","next","last","nodeLink","lenient","msg1","doCreate","ContainerRegistryValidator","check","doDisconnectOutput","some","fromNode","toAnother","newOne","slimIO","doDisconnectInput","skipSourceLinks","validateSource","doConnect","prev","current","LinkResult","NodeRegistryValidator","NotFoundError","hasInput","targetIO","validateTarget","sourceIO","result","item","DefaultNodeDbHelper","database","AsyncDbHelper","oneArgs","listNodes","_id","$in","updateNode","$set","threeArgs","addNode","batchInsertNodes","insertedNodes","batchDeleteNodes","total","twoArgs","removeNode","CryptoJS","CryptoUtils","encrypt","AES","decrypt","cipherText","enc","Utf8","UiNode","defaultTitle","uiElementType","titlePrefix","isDashboardNode","uiPanelValue","onNodeChangePanelOrTitle","changeTitle","newSettings","newName","onNodeRemoved","sendToDashboard","panelName","storeInDatabase","mess","Statistics","onInputUpdated","SerializedObject","DefaultGlobalNodeRegistry","createKey","GlobalNodeRegistry","NodeRegistryHelper","allSettled","n1","n2","registerNode","results","accumulate","RegistryResult","standardize","unregisterNode","reject","status","reason","errors","objects","_last_container_id","findLastId","genContainerId","_parent","_last_node_id","genNodeId","cNode","promises","all","flatMap","concat","y","xs","install","Green","argv","envFile","envFileAbsPath","isAbsolute","cwd","global","__rootdirname","__dirname","NODE_ENV","App","Server","Dashboard","dashboardSocket","initRoot","configApp","registerNodeTypes","connectDatabase","asyncLoadDatabase","onDatabaseReady","catch","onDatabaseError","editorSocket","dataBase","enable","useInternalDb","Backend","initNodeContext","loadFromDatabase","startBackend","run","noArgs","getNodes","registerNodes","exit","app","nn","os","si","pkg","OsUtils","command","options","exec","stdout","stderr","hostname","cpuTemperature","fsSize","valueObject","cpu","osInfo","system","systemInfo","model","mem","systemTime","hostName","getCurrentWiresVersion","dataPath","cleanUpInterval","dbPath","dbName","NeDBDataStore","persistence","setAutocompactionInterval","load","loadDatabase","Joi","string","required","mustExisted","ListValidator","PromiseActor","singleton","FileUtils","dirname","__filename","dirPath","fs","readdir","files","file","fileName","existsSync","open","fd","writeFile","directoryPath","directory","normalize","code","mkdir","mkdirSync","filePath","readFile","buff","fileContent","Boolean","line","index","objStringify","json","appendFile","filepath","checkFileExists","unlink","ipDb","createFile","encoding","edgeApi","SEND_PAYLOAD_TO_CHILD","ADD_POINT","REMOVE_POINT","edgeIp","edgePort","edgeApiVer","PointValueCreator","init","presentValue","priority","priorityArray","DefaultPointValue","normalizePriorityArray","by","pa","highestValue","find","isResetState","createPriorityArray","PACK_UP_NODES","IMPORT_NODES","EXPORT_NODES","CLONE_NODES","REMOVE_NODES","CREATE_NODE","CREATE_LINK","REMOVE_LINK","MOVE_LINK","ADD_NODE_INPUT","ADD_NODE_OUTPUT","REMOVE_NODE_INPUT","REMOVE_NODE_OUTPUT","enableDebug","itemName","itemNullable","RegistryItemExistedError","DispatchNode","point","getPoint","pubSubSingleton","addPoint","getDisplayPointName","removePoint","renamePoint","getSelectedProtocol","getSelectedPoint","pointName","getSelectedPointName","connect","disconnect","names","parentNode","getParentNode","reverse","UNKNOWN_POINT_NAME","Icons","aiColour","uiMainIcon","uiMainColour","logicMainColour","logicAndIcon","logicOrIcon","logicNotIcon","compareGreaterIcon","mathMainColour","mathMainIcon","mathAddIcon","mathSubIcon","mathDivideIcon","mathTimesIcon","edgeNetwork","Mixin","entry","entryId","assign","entryFactory","namePrefix","createSettingForm","broadcastSettingsToClients","broadcastTitleToClients","settingFields","applyEntry","createEntry","displayError","deactivate","READONLY","isEqual","updateEntry","deleteEntry","getTakenIdentifiers","takenIdentifiers","identifier","makeIdentifier","globalSiblings","constructor","toUpperCase","self","getNodeType","docs","deviceID","getPlatform","clientId","Influx","HistoryMode","DataBaseType","HistoryBase","alarmCount","tagCount","lastTrigger","GROUP","POSTGRES","InfluxDB","addInputWithSettings","COV","PERIODIC","TRIGGER_ONLY","addHistoryConfiguration","historyFunctionsForAfterSettingsChange","assignInputsOutputs","tableNameInput","pointNameInput","resetOutputs","doPeriodicHistoryFunctions","clearStoredHisInput","updateHistoryCountOutput","doNonPeriodicHistoryFunctions","timeoutFunc","histTriggerInput","histErrorOutput","storedHistCountOutput","lastHistExportOutput","valueInput","takeValueFromInput","setSettingsConfig","groups","conditions","period","weight","periodUnits","checkTriggered","storeLogEntry","checkCOV","trySendStoredData","points","tagList","fields","timestamp","valueOf","tags","errorFlag","clientIdFromPlat","deviceIdFromPlat","getClientIdDb","getDeviceIdDb","multiPointPost","deviceid","clientid","ts","toISOString","pgUrl","method","writeOptions","client","writePoints","configSettings","changeInputDynamically","changeAlarmsCount","renameAlarmInputs","changeTagsCount","persistProperties","storageLimit","minuteRound","nearestFutureMinutes","alarmNum","j","shift","trigger","threshold","isPeriodic","debugInfo","changeInputsCount","alarmsToAdd","insertIntoObjectAtPosition","tagsToAdd","Grey","childNode","createMessage","pointType","pointId","GET_BACNET_CLIENT","GET_NETWORK_NODE","GET_POINTS","GET_PRESENT_VALUE","SEND_POINT_VALUE","ADD_DEVICE","REMOVE_DEVICE","WRITE_PRESENT_VALUE","Yellow","MockHasPointOutputObservers","MOCK","PointOutputObserver","outputSlots","connStatus","pointValue","convert","Base","PointNodeMixinBase","_iPresentValue","_iPriority","_iPriorityArrayLot","_iPriorityArrayJson","_sInputGroup","_sInputMethod","_sDecimal","_oOut","_oPriority","_oPriorityArray","flowHandler","initializePointBySettingObject","notifyOutput","handleOnUpdate","pointObservers","updateTitle","handleDynamicInput","initializePointBySettingInput","reEvaluateSettingByInput","inputMethod","InputMethod","enumValueOf","VALUE_PRIORITY","valueInputIdx","priorityInputIdx","PRIORITY_ARRAY_LOT","priorityArrayInputIdx","PRIORITY_ARRAY_JSON","valueOutputIdx","priorityOutputIdx","priorityArrayOutputIdx","modelSettingKey","enumKey","presentValueType","cfg","computeTitle","st","cur","oldInputMethod","newInputMethod","hideInput","showInput","show","recomputeInputLinks","MockCentralizedListener","LISTENER","eventSourceId","observers","observer","ConnectionOutput","ConnectionOutputObserver","ConnectionStatus","lookupByLabel","itselfConnected","isError","ExternalConnectionNodeMixin","ExternalConnectionNodeMixinBase","AbleEnableNode","connectionStatus","UNCONNECTED","statusOutputIdx","errorOutputIdx","isEnabled","isConnConnected","CONNECTED","DISCONNECTED","getConnectionStatus","DependantConnectionNodeMixinBase","executeFunction","isParentConnected","parentConnectionNode","isConnected","statusObserver","handleError","cbHandler","param","param1","param2","param3","funcName","NormalEntry","_nodeType","service_id","service_name","cRegistry","listByContainer","getNodesInContainer","network","cp","set_ip_address","ip","IpAddressUtils","get_interfaces_list","iface","upDown","newIP","netNetmask","newGateway","newNameserver","checkIP","isV4Format","checkNetMask","checkGateway","nameserver","execSync","substring","setIpDHCP","ipAddress","subnetMask","gateway","setIP","interface1Eth","dhcp1Eth","eth1Ip","eth1Sub","eth1Gate","eth1NameServer","interface2Eth","dhcp2Eth","eth2Ip","eth2Sub","eth2Gate","eth2NameServer","msgFailToUpdate","interfaceEth1","dhcpEth1","ethIp1","ethSub1","ethGate1","ethNameServer1","interfaceEth2","dhcpEth2","ethIp2","ethSub2","ethGate2","ethNameServer2","checkIpValidEth1","checkIpValid","checkIpValidEth2","interfacesArray","eth1","interface","dhcp","eth2","subnetMaskLength","subnet","ip_address","prefix","nameservers","configure","UuidUtils","dataArray","isUUID","createDirectory","create8DigId","createUUID","random","create12DigId","ModbusByteOrder","TYPES","INT16","UINT16","INT32","UINT32","FLOAT32","INT64","UINT64","DOUBLE64","ENDIAN","LEB_BEW","LEB_LEW","BEB_LEW","BEB_BEW","readByteOrder","buffer","offset","endian","buf","swap16","swap32","swap64","readInt16LE","readUInt16LE","readInt32LE","readUInt32LE","readFloatLE","readDoubleLE","writeValue","alloc","writeInt16LE","writeUInt16LE","writeInt32LE","writeUInt32LE","writeFloatLE","writeDoubleLE","bsaClientConfig","auth","headers","exp","PSYCHROLIB_UNITS","PSYCHROLIB_TOLERANCE","IP","SI","SetUnitSystem","UnitSystem","GetUnitSystem","isIP","GetTRankineFromTFahrenheit","T_F","GetTFahrenheitFromTRankine","T_R","GetTKelvinFromTCelsius","T_C","GetTCelsiusFromTKelvin","T_K","GetTCelsiusFromTFahrenheit","GetTFahrenheitFromTCelsius","GetTRankineFromTCelsius","GetTKelvinFromTFahrenheit","GetTFahrenheitFromTKelvin","GetTRankineFromTKelvin","GetTCelsiusFromTRankine","GetTKelvinFromTRankine","GetTWetBulbFromTDewPoint","TDryBulb","TDewPoint","Pressure","HumRatio","GetHumRatioFromTDewPoint","GetTWetBulbFromHumRatio","GetTWetBulbFromRelHum","RelHum","GetHumRatioFromRelHum","GetRelHumFromTDewPoint","GetSatVapPres","GetRelHumFromTWetBulb","TWetBulb","GetHumRatioFromTWetBulb","GetRelHumFromHumRatio","GetTDewPointFromRelHum","VapPres","GetVapPresFromRelHum","GetTDewPointFromVapPres","GetTDewPointFromTWetBulb","GetTDewPointFromHumRatio","GetRelHumFromVapPres","dLnPws_","dLnPws","T","BOUNDS","TDewPoint_iter","lnVP_iter","lnVP","d_lnVP","GetVapPresFromTDewPoint","TWetBulbSup","TWetBulbInf","BoundedHumRatio","Wsstar","GetSatHumRatio","GetHumRatioFromVapPres","GetVapPresFromHumRatio","GetSpecificHumFromHumRatio","GetHumRatioFromSpecificHum","SpecificHum","GetDryAirEnthalpy","GetDryAirDensity","GetDryAirVolume","GetTDryBulbFromEnthalpyAndHumRatio","MoistAirEnthalpy","GetHumRatioFromEnthalpyAndTDryBulb","LnPws","SatVaporPres","GetSatAirEnthalpy","GetMoistAirEnthalpy","GetVaporPressureDeficit","GetDegreeOfSaturation","GetMoistAirVolume","GetTDryBulbFromMoistAirVolumeAndHumRatio","MoistAirVolume","GetMoistAirDensity","GetStandardAtmPressure","Altitude","GetStandardAtmTemperature","GetSeaLevelPressure","StnPressure","TColumn","H","GetStationPressure","SeaLevelPressure","CalcPsychrometricsFromTWetBulb","CalcPsychrometricsFromTDewPoint","CalcPsychrometricsFromRelHum","BACnetEnumsUnits","COMMON_METRIC","COMMON_IMPERIAL","Electrical","Energy","Enthalpy","Entropy","Force","Frequency","Humidity","Length","Light","Mass","Flow","Temperature","Time","Torque","Velocity","Volume","VolumetricFlow","Other","unitCategory","NO_UNITS","PERCENT","PERCENT_RELATIVE_HUMIDITY","DEGREES_CELSIUS","KILOPASCALS","DEGREES_FAHRENHEIT","POUNDS_FORCE_PER_SQUARE_INCH","MILLIAMPERES","AMPERES","AMPERES_PER_METER","AMPERES_PER_SQUARE_METER","AMPERE_SQUARE_METERS","DECIBELS","DECIBELS_MILLIVOLT","DECIBELS_VOLT","FARADS","HENRYS","OHMS","OHM_METERS","MILLIOHMS","KILOHMS","MEGOHMS","MICROSIEMENS","MILLISIEMENS","SIEMENS","SIEMENS_PER_METER","TESLAS","VOLTS","MILLIVOLTS","KILOVOLTS","MEGAVOLTS","VOLT_AMPERES","KILOVOLT_AMPERES","MEGAVOLT_AMPERES","VOLT_AMPERES_REACTIVE","KILOVOLT_AMPERES_REACTIVE","MEGAVOLT_AMPERES_REACTIVE","VOLTS_PER_DEGREE_KELVIN","VOLTS_PER_METER","DEGREES_PHASE","POWER_FACTOR","WEBERS","JOULES","KILOJOULES","KILOJOULES_PER_KILOGRAM","MEGAJOULES","WATT_HOURS","KILOWATT_HOURS","MEGAWATT_HOURS","WATT_HOURS_REACTIVE","KILOWATT_HOURS_REACTIVE","MEGAWATT_HOURS_REACTIVE","BTUS","KILO_BTUS","MEGA_BTUS","THERMS","TON_HOURS","JOULES_PER_KILOGRAM_DRY_AIR","KILOJOULES_PER_KILOGRAM_DRY_AIR","MEGAJOULES_PER_KILOGRAM_DRY_AIR","BTUS_PER_POUND_DRY_AIR","BTUS_PER_POUND","JOULES_PER_DEGREE_KELVIN","KILOJOULES_PER_DEGREE_KELVIN","MEGAJOULES_PER_DEGREE_KELVIN","JOULES_PER_KILOGRAM_DEGREE_KELVIN","NEWTON","CYCLES_PER_HOUR","CYCLES_PER_MINUTE","HERTZ","KILOHERTZ","MEGAHERTZ","PER_HOUR","GRAMS_OF_WATER_PER_KILOGRAM_DRY_AIR","MICROMETERS","MILLIMETERS","CENTIMETERS","KILOMETERS","METERS","INCHES","FEET","CANDELAS","CANDELAS_PER_SQUARE_METER","WATTS_PER_SQUARE_FOOT","WATTS_PER_SQUARE_METER","LUMENS","LUXES","FOOT_CANDLES","MILLIGRAMS","GRAMS","KILOGRAMS","POUNDS_MASS","TONS","GRAMS_PER_SECOND","GRAMS_PER_MINUTE","KILOGRAMS_PER_SECOND","KILOGRAMS_PER_MINUTE","KILOGRAMS_PER_HOUR","POUNDS_MASS_PER_SECOND","POUNDS_MASS_PER_MINUTE","POUNDS_MASS_PER_HOUR","TONS_PER_HOUR","Power","MILLIWATTS","WATTS","KILOWATTS","MEGAWATTS","BTUS_PER_HOUR","KILO_BTUS_PER_HOUR","HORSEPOWER","TONS_REFRIGERATION","PASCALS","HECTOPASCALS","MILLIBARS","BARS","MILLIMETERS_OF_WATER","CENTIMETERS_OF_WATER","INCHES_OF_WATER","MILLIMETERS_OF_MERCURY","CENTIMETERS_OF_MERCURY","INCHES_OF_MERCURY","DEGREES_KELVIN","DEGREES_KELVIN_PER_HOUR","DEGREES_KELVIN_PER_MINUTE","DEGREE_DAYS_CELSIUS","DEGREE_DAYS_FAHRENHEIT","DELTA_DEGREES_FAHRENHEIT","DELTA_DEGREES_KELVIN","YEARS","MONTHS","WEEKS","HUNDREDTHS_SECONDS","NEWTON_METERS","MILLIMETERS_PER_SECOND","MILLIMETERS_PER_MINUTE","METERS_PER_SECOND","METERS_PER_MINUTE","METERS_PER_HOUR","KILOMETERS_PER_HOUR","FEET_PER_SECOND","FEET_PER_MINUTE","MILES_PER_HOUR","CUBIC_FEET","CUBIC_METERS","IMPERIAL_GALLONS","MILLILITERS","LITERS","US_GALLONS","CUBIC_FEET_PER_SECOND","CUBIC_FEET_PER_MINUTE","CUBIC_FEET_PER_HOUR","CUBIC_METERS_PER_SECOND","CUBIC_METERS_PER_MINUTE","CUBIC_METERS_PER_HOUR","IMPERIAL_GALLONS_PER_MINUTE","MILLILITERS_PER_SECOND","LITERS_PER_SECOND","LITERS_PER_MINUTE","LITERS_PER_HOUR","US_GALLONS_PER_MINUTE","US_GALLONS_PER_HOUR","DEGREES_ANGULAR","DEGREES_CELSIUS_PER_HOUR","DEGREES_CELSIUS_PER_MINUTE","DEGREES_FAHRENHEIT_PER_HOUR","DEGREES_FAHRENHEIT_PER_MINUTE","JOULE_SECONDS","KILOGRAMS_PER_CUBIC_METER","KW_HOURS_PER_SQUARE_METER","KW_HOURS_PER_SQUARE_FOOT","MEGAJOULES_PER_SQUARE_METER","MEGAJOULES_PER_SQUARE_FOOT","NEWTON_SECONDS","NEWTONS_PER_METER","PARTS_PER_MILLION","PARTS_PER_BILLION","PERCENT_OBSCURATION_PER_FOOT","PERCENT_OBSCURATION_PER_METER","PERCENT_PER_SECOND","PER_MINUTE","PER_SECOND","PSI_PER_DEGREE_FAHRENHEIT","RADIANS","RADIANS_PER_SECOND","REVOLUTIONS_PER_MINUTE","SQUARE_METERS_PER_NEWTON","WATTS_PER_METER_PER_DEGREE_KELVIN","WATTS_PER_SQUARE_METER_DEGREE_KELVIN","PER_MILLE","GRAMS_PER_GRAM","KILOGRAMS_PER_KILOGRAM","GRAMS_PER_KILOGRAM","MILLIGRAMS_PER_GRAM","MILLIGRAMS_PER_KILOGRAM","GRAMS_PER_MILLILITER","GRAMS_PER_LITER","MILLIGRAMS_PER_LITER","MICROGRAMS_PER_LITER","GRAMS_PER_CUBIC_METER","MILLIGRAMS_PER_CUBIC_METER","MICROGRAMS_PER_CUBIC_METER","NANOGRAMS_PER_CUBIC_METER","GRAMS_PER_CUBIC_CENTIMETER","BECQUERELS","MEGABECQUERELS","GRAY","MILLIGRAY","MICROGRAY","SIEVERTS","MILLISIEVERTS","MICROSIEVERTS","MICROSIEVERTS_PER_HOUR","DECIBELS_A","NEPHELOMETRIC_TURBIDITY_UNIT","PH","GRAMS_PER_SQUARE_METER","MINUTES_PER_DEGREE_KELVIN","networkNode","deviceNode","pointNode","bacnet","Util","group","propertyId","getEnumName","enum","PropertyIdentifier","MQTT_CLIENT_NODE","REGISTER_MQTT_PUBLISHER","UNREGISTER_MQTT_PUBLISHER","UPDATE_MQTT_PUBLISHER","PUBLISH_MQTT_DATA","REGISTER_MQTT_SUBSCRIBER","UPDATE_MQTT_SUBSCRIBER","UNREGISTER_MQTT_SUBSCRIBER","REGISTER_MQTT_POINT","UPDATE_MQTT_POINT","UNREGISTER_MQTT_POINT","MqttCentralizedPointOutputObserver","CentralizedPointOutputObserver","publisherTopic","publishedTopic","subscriberTopic","subscribedTopic","MqttClientNode","ProtocolDeviceNode","_oTopicsSlot","publishers","MqttPublisherStore","subscribers","MqttSubscriberStore","mqttClient","retriedItems","mixinEnableInputSetting","PASSWORD","authentication","registerMqttPoint","updateMqttPoint","unregisterMqttPoint","afterUnregister","unregister","registerMqttSubscriber","updateMqttSubscriber","unregisterMqttSubscriber","publishMqttData","listNodeIds","subscribersByTopic","lookup","topic","createMqttConnectionOptions","DefaultMqttClient","retryConnection","updateClientStatus","onReceiveMessage","errMsg","notifyConnStatusOutput","listen","converter","publish","subscribe","mqttClientDoUnsubscribe","unsubscribe","toPublisher","toSubscriber","BaseNodeLinkVisitor","DefaultLinkVisitor","ioKey","ios","nid","inputVisitor","outputVisitor","nodeVisitor","updateAsync","perNode","containerVisitor","TWEAK_POS","pos1","pos2","relative","p1","guard","p2","origin","bottomRight","positions","avg","eventPos","bottomRightPos","fallbackX","fallbackY","left","top","height","aLeft","aBottom","aRight","aTop","bLeft","bBottom","bRight","bTop","delta","x1","cos","acos","x2","PI","x3","cbrt","DispatcherRegistry","unMap","store","soft","listeners","updateProtocols","storePoint","respKey","extractData","assignAllTo","factoryEntry","response","factory","ApiContainerNode","extra_node_types","childNodeType","movable","findFreeIdentifier","api","initAPI","old","onAfterSettingsChange","onCreated","nameSuffix","onRemoved","fetchChildren","children","childIds","childNodes","collectChildNodes","existingChildNodes","obsoleteChildNodes","is_protected","processNextChildEntry","onGetMessageToEditorSide","runWithEditor","remaining","pop","existingNode","syncWithBackend","persistConfiguration","nodeType","TopLevelApiContainerNode","ignore_remove","removable","schemaMiddleware","req","res","details","authMiddleware","isAuthenticated","resp","event","send","errorFunc","NodeCRUDService","NodeService","reg","CreationResult","metadata","findNodes","batchDeleteByIds","initETLResult","RemoveResult","ETLResult","containerId","genMessage","className","cleanupResult","rr","CONTAINER_NODE_TYPE","AbstractFolderIONode","isUnderContainer","correctParentIO","inputOrOutput","findParentIOById","after","before","newObj","insertAfter","matchBoth","foundFlag","prop","TAGNAME","CHILLER","CHWP","PlantChilledWater","BuildingInfo","HeatExchanger","CoolingTower","CWP","PlantCoolingTower","Boiler","HWP","BoilerPlant","FloorControl","AHU_VAV","AHU_CAV","FCU","FTU","PAC_HotWaterReheat","PAC_ReverseCycle","PAC_ElectricReheat","PAC_Electric_Reheat_WaterCooled","OutsideAirFan","SupplyAirFan","ReturnAirFan","AHUReturnAirFan","CarParkSupplyAirFan","CarParkExhaustAirFan","ToiletExhaustAirFan","KitchenExhaustAirFan","ExhaustAirFan","GeneralExhaustAirFan","VAV","Power_SubMeter","PowerSiteMeter","Gas_SubMeter","Gas_SiteMeter","Water_subMeter","Water_SiteMeter","tagRefs","acronyms","BMS","RTD","AHU","CW","RTU","RH","EVP","CT","CTF","RT","RAT","SAT","ZT","CHL","BLR","AC","RAC","EVAP","HVAC","HLI","BTU","CMD","REM","SYS","RV","SOL","DX","BACnet","LoRa","KNX","LoRaWAN","Modbus","LON","N2","SP","SETP","LIQ","PMP","TEMP","TMP","PRESS","EEV","DISCH","tagCategory","kind","unit","equipType","compareType","s1","s2","inputType","Equals","NotEquals","GreaterThanEqual","GreaterThan","LessThanEqual","LessThan","Includes","startsWith","endsWith","valueWithKey","findVal","setProps","MATH_FUNC_TYPE","MathUtils","out","mathFuncType","mathValue","NA","ADD","SUBTRACT","MULTIPLY","DIVIDE","REMAINDER","EXP","BOOL_INVERT","invert","ONE_TO_TRUE","oneToTrue","TRUE_TO_ONE","trueToOne","NUMBER_INVERT","numInvert","validateNumbers","every","EdgeGPIOUtils","value_420","min_target","max_target","ui_value","min_range","max_range","scaleToGPIOValue","minOutput","maxOutput","minInput","maxInput","pinValue","scaleFromGPIOValue","uiAsDI","diInvert","BACNET_SERVER_NODE_TYPE","REGISTER_BACNET_POINT","UPDATE_BACNET_POINT","PUSH_BACNET_POINT_VALUE","UNREGISTER_BACNET_POINT","BACNetCentralizedPointOutputObserver","objectId","objectInstance","objectType","objectName","BacnetNodeServerStore","OneIdentifierOneNodeStore","BACnetServerNode","_oPointsSlot","afterRegister","afterUpdate","pushValue","PointKind","lookupByValue","bp","BacnetPointCreator","broadcastNameToClients","deviceId","databaseRevision","address","broadcast","apduTimeout","updatePoint","updateValue","delObject","DefaultContainerErrorNode","nodeIdErrors","add","AbstractContainerStore","cb","checkExistence","afterUnregisterIfExisted","addError","alreadyExistedMsg","removeError","listErrors","predicate","_title","mixinConnectionStatusOutput","startOrStop","DefaultObservable","kickoff","createThenStart","statusObservable","connObserverNodes","notify","handleErrorInKickOff","enumValues","enableSettingKey","enableDescription","enableInputIdx","parentIsEnabled","nodeUtil","propertyTypeMap","pi","typeEnumMap","OBJECT_TYPE","ObjectType","typeId","readOnly","subscriptions","getPropName","callbacks","_value","newValue","onPropertyChanged","valueAsString","inspect","custom","enumKeys","pk","ANALOG_INPUT","ANALOG_OUTPUT","ANALOG_VALUE","BINARY_INPUT","BINARY_OUTPUT","BINARY_VALUE","MULTI_STATE_INPUT","MULTI_STATE_OUTPUT","MULTI_STATE_VALUE","DefaultBacnetPoint","LORA_DATA_TYPE_NAMES","LORA_DATA_TYPE_LENGTHS","LoRaRawTwoWayInput","payloadDefinition","updateOutputs","stringToDataTypes","senderId","parseError","pointParsed","fill","readUInt8","type_length","INT8","readInt8","UINT8","FLOAT","outputsCount","publisher","subscriber","ps","OneIdentifierManyNodeStore","setNodeState","backendSyncCfg","ensureParentContainers","refreshPeriodically","findOrCreateNode","EdgesParentContainerNode","edgesContainer","ModulesParentContainerNode","modulesContainer","ServicesParentContainerNode","servicesContainer","type_name","root","refreshParentContainers","_map","u","EdgeHelp","NetworkDesc","EdgeContainerNode","EdgeAPI","customer_code","side_code","firmware_version","data_version","NetworkContainerNode","NetworkAPI","protocols","DeviceContainerNode","edge_node","errorMessage","DeviceAPI","manufacturer","GroupContainerNode","PointNode","network_node","edge_id","FolderAPI","device_node","PointAPI","edge","measure_unit","precision","backend","Point","fetchPointData","updatePointData","device_id","Api","_objId","fetchMany","objId","fetchOne","patch","newEntry","Edge","post","Network","Device","Folder","put","ModuleNode","ModuleAPI","ServiceNode","ServiceAPI","BaseServiceNode","required_settings","service_type","published_by","deploy_id","deploy_location","created_at","modified_at","settingsHeaderComponent","template","areSettingsValid","displayMessage","broadcastPropertiesToClients","ApplicationAPI","Service","ApiNode","uiPanels","getUiPanels","panels","removeElementForNode","removeEmptyPanels","sendUiPanel","newPanelName","newTitle","uiElemet","newPanel","getUiPanel","subPanels","uiElements","updateUiPanel","addUiPanel","getUiPanelsList","changed","panel","pan","removeUiPanel","oldPanel","subPanel","expressValidator","workingDir","express","locals","middleware","routes","handleErrors","start_io","webServer","use","morgan","skip","statusCode","bodyParser","limit","urlencoded","extended","cookieParser","publicFolder","static","apiEditorSetup","normalizePort","set","http","createServer","on","syscall","addr","io_root","EditorServerSocket","DashboardServerSocket","wireNameSocket","WireNameServerSocket","pingPongSocket","PingPongServerSocket","of","cont","renameFunction","room","leave","checkContainerNodeValidity","sendSlotsValues","connectedSocket","connected","rooms","slotsValues","getNodesIOValues","subNodes","formatAndTrimValue","httpServer","socketServer","SocketIO","handshake","ApiEditorRouter","router","Router","nodeHandler","onList","onRemove","onCreate","onPackUp","onExport","onClone","onImport","linkHandler","onMove","activeNodesIds","updateActiveNodes","getDb","subcontainers","headersSent","legacySetup","_nodeHandler","ApiNodeHandler","_linkHandler","ApiLinkHandler","setup","ApiHandler","linkService","NodeLinkService","emitSuccess","emitError","another","move","handler","persist","fromLink","re","crudService","etlService","NodeETLService","containers","createNode","removeNodes","packUpNodes","cloneNodes","exportNodes","NodeValidator","NodeArrayValidator","allowUnknown","importNodes","atPos","nodeIds","doExport","createFolder","doPackUp","doImport","CloneResult","ExportResult","ImportResult","listByIds","remapContainers","NodeTree","tree","compute","batchInsert","flatten","pNodes","pr","PackResult","lastId","remainContainers","dest","oldCid","build","computeRelativePos","NodeBranch","itself","relativePos","b1","b2","branch","avgPos","newNodeId","subNode","nnId","nId1","nId2","normalizeNodeBranch","flattenBranch","sub","normalizeBranch","lookupNodeType","normalizeNodeInputs","normalizeNodeOutputs","normalizeLink","lookupNode","normalizeOutputLinks","render","container_id","query","nodeEditor","redirect","wire","getWireName","changeWireName","wireName","authUserSchema","encryptTextSchema","route","encryptedText","authUser","addAuthUser","getAuthUser","deleteAuthUsers","getAuthToken","stringHtml","getHelpComment","changeHelpComment","platform","updatePlatform","hostFile","out8","wiresPlatUrlBuilder","EPWiresUpdate","systemAll","eth","getEth","updateEth","parseBool","updateIpRubixCompute","PLAT","ep","AndNode","boolean","and","allInputs","getDefinedInputValues","areAllInputsTrue","OrNode","or","anyTrue","XorNode","xor","in1","in2","NotNode","not","emitTransformedInput","ToggleNode","toggle","toggleOnAny","inputUpdated","lastVal","OneShotNode","clearTimers","lastFireValue","lastResetValue","timeUnits","reset","fire","delay","delayMilli","remainingFunc","remainingUpdateMillis","remainingUpdateSize","clearTimeout","MinOnOffNode","minOn","timeMinOn","minOff","timeMinOff","timeOn","timeOff","minOnEnabled","minOffEnabled","minOnTime","minOffTime","lastValue","DelayOnNode","lastInput","lastReset","DelayOffNode","TickerNode","lastInterval","runState","ticker","EqualNode","compare","equal","GreaterNode","LessThanNode","BetweenNode","between","HysteresisNode","hysteresis","inMsg","risingEdge","fallingEdge","TypeCheckNode","DispatchListener","originalHeaderColor","connection","TREE_SELECT","blockNull","sendMessageToServerSide","updateSubscriptionTree","getSelectedPointText","getStore","matchProtocolItem","getMatchProtocolItem","protocolsItems","protocolsItem","protocolItems","protocolItem","item1","item2","Disconnect","Connect","Map","UnMap","Rename","Dispatch","ConnectionLocalTransmitterNode","receivers","getReceivers","updateTransmitterTopics","isEnable","ifNew","receiver","ConnectionLocalReceiverNode","topicList","inputEnable","inputNumTopic","topicDropdown","setTopic","transmitterTopic","updateChannel","broadcastOutputsToClients","transmitters","transmitter","pushSettings","manualTopicOption","changeTopicsCount","renameInputs","triggerTransmitterNodeUpdate","HubNode","hub","inputValue","ContainerInputNode","hasItself","containerNode","FOLDER_INPUT","ContainerOutputNode","recomputeOutputLinks","FOLDER_OUTPUT","BitMaskSingle","conversion","BIT","BYTE","BitMaskMultiple","mask","updateMask","BIT_START","IntToBits","setNewOutputs","START","BYTES","outputIndex","outputsLen","BoolToIntNode","IntToBoolNode","StringToBool","BufferToHexString","BufferToNumNode","dataEndian","writeUInt16BE","UnitConversionNode","ensureFromToConfig","createTreeSelectItems","asItem","measures","unitType","possibilities","categoryName","units","HexStringToBuffer","IntToFourByteArrayNode","EventCounterNode","inputData","CounterNode","counter","lastUp","lastDown","up","down","setValue","TriggeredRamp","countUp","currentVal","IntervalRampNode","lastEnable","WaveformNode","waveform","intervalTime","periodTime","amplitude","startTime","lastTime","recalculate","signalType","sin","sign","CSVMergeRowsNode","csv","outputCSV","addCSV","CSVMergeColumnsNode","originalColumnsArray","mergeColumnsArray","originalColumnsCount","mergeColumnsCount","BSACumulocityDeviceNode","cumulocity","createDevice","checkDeviceExists","deviceName","getDeviceName","managedObjects","c8y_IsDevice","BSACumulocityNode","measurementName","measurementType","seriesName","measurements","ALARM_TYPE","alarmConfig","WARNING","MINOR","MAJOR","CRITICAL","BSACumulocityAlarmNode","postAlarm","alarmInput","alarmName","severity","alarmID","FunctionNode","BaseFunctionNode","function","mixinScriptSetting","executeConfiguredScript","getScriptInput","emitResult","variables","NodeVM","timeout","sandbox","defaultScript","CODE_AREA","UuidNode","uuid","out12","out28","UiLabelNode","formatValue","setState","UiButtonNode","button","buttonText","sendIOValuesToEditor","UiSwitchNode","switch","getState","UiProgressNode","progress","UiSliderNode","slider","UiTextBoxNode","UiLogNode","messagesPerSec","updateMessPerSec","maxRecords","removeOldRecords","sendMessageToDashboardSide","rec","unshift","records","del","dropped","record","$push","$each","$slice","$unset","UiChartNode","chart","ConsoleNode","MAX_MESS_PER_SEC","timer","NotesNode","comments","nodeColour","INFO","WatchNode","dataUpdated","UPDATE_INTERVAL","watch","startSending","lastData","showValueOnInput","LinkErrorCheckNode","subContainers","searchThisContainer","searchSubContainers","checkLinksForInputOutputData","searchContainer","isTopRecursion","currentContainer","nodeList","numNodes","getNodeById","outputLinks","linkInfo","containerName","containerErrors","nodeName","nodeErrors","outputName","outputNum","inputNode","inputNodeName","inputNodeSlot","containerNum","OutputErrorCheckNode","checkForOutputsWithNoData","FiltersOnlyTrueNode","FiltersOnlyFalseNode","FiltersOnlyFromRangeNode","FiltersOnlyGreaterNode","FiltersOnlyLowerNode","FiltersOnlyEqualNode","FiltersPreventNullNode","FiltersPreventEqualNode","FiltersPreventDuplicatesNode","AnyDataStoreNode","history","someMoment","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","dateTz","timeFormatedArray","tz","csvString","_d","formatOutputs","InfluxDBNode","inName","inJsonInput","outError","outLastExport","outMsg","user","createClient","hasMeasurement","hasMeasurementTags","hasMeasurementFields","HttpError","SetupAPI","InfluxDB2Node","inEnable","getWriteApi","useDefaultTags","location","tag","field","floatField","stringField","booleanField","writePoint","toLineProtocol","close","HistoryNode","addHistorySettingsConfig","PointPersistence","preventDuplicates","TOPIC_OPTIONS","PointTagNode","inputOneNum","inputTwoNum","inputThreeNum","pointFeedbackNum","inputJsonNum","pointIdNumIn","equipRefNumIn","measurementNumIn","manualTagsNum","pointValNumOut","nameNumOut","topicNumOut","jsonNumOut","errorNumOut","onWatchChange","eventType","clientName","siteId","siteName","siteAddress","city","zip","country","lat","lon","pointFeedback","jsonInput","inputOne","inputTwo","inputThree","pointValueIsJSON","pointArray","in3","equipRef","toLocaleLowerCase","manualSettings","manualEquip","manualSensor","manualTags","tagSetting","tagType","pointArr","pointTags","outOut","DeadbandNode","hvac","deadband","setpoint","ThermostatNode","thermostat","clgMode","htgMode","clgSP","LeadLagStagingNode","ENABLESLOT","ROTATESLOT","UPSLOT","DOWNSLOT","DELAYSLOT","MINONSLOT","FAULTSTARTSLOT","JSONSLOT","ORDERSLOT","STAGESLOT","OUTPUTSTARTSLOT","rotateLeadUnit","updateCount","initializeOutputJSON","rotate","lastRotate","stageUP","stageDOWN","upDelay","minOnDelay","currentStage","stageChange","fault","faultArray","convertNumToLetter","setOutputs","resetController","setOutputJSON","updateOutputsCount","updateInputsCount","generatePermutations","permutations","reorder","leadCombinations","factorial","copy","head","rest","requiredFaultInputs","convertNumber","fromCharCode","enableInput","rotateInput","stageUpInput","stageDownInput","stageUpDelay","order","orderIndex","numUnits","stageArray","useFaultInputs","changeLeadEveryRotation","currentTime","stageStartTime","LeadLagSwitchNode","PACUnitControl","ZTSLOT","SPSLOT","CLGOFSTSLOT","HTGOFSTSLOT","STGUPSLOT","MDLYSLOT","ECONOASLOT","OATSLOT","ECONHISLOT","ECONLOSLOT","FSSLOT","CLGMSLOT","HTGMSLOT","COMPSTGSLOT","ECONOMSLOT","OADMPSLOT","RVSLOT","COMPSTARTSLOT","econoLow","econoHigh","updateStageCount","updateFSInput","fanStatus","fanStatusInput","disable","clgOffset","htgOffset","htgSP","offSPInterval","OATemp","checkEconoConditions","temp","OAD","econoDB","zoneTemp","modeChangeDelay","econoAllow","econoHighLimit","econoLowLimit","fanStatusActual","fanStatusEffective","fanStatusOffTime","compStage","econoMode","OADamper","compArray","setpointMode","numCompressors","econoConditionsDB","requireFanStatus","fanStatusOffDelay","htgModeEnd","clgModeEnd","PID","PIDFunctionNode","lastResetVal","pid","minOut","maxOut","inP","inI","inD","setSampleTime","setOutputLimits","setMode","setOutput","setBias","getOutput","initialize","manual","processVariable","bias","setPoint","setTunings","setControllerDirection","setInput","calculatePidOutput","Input","Setpoint","Kp","Ki","Kd","ControllerDirection","mySetpoint","inAuto","SampleTime","millis","myBias","ITerm","myOutput","current_value","setDirection","ki","dInput","kp","kd","dispKp","dispKi","dispKd","SampleTimeInSec","NewSampleTime","ratio","Min","Max","Mode","newAuto","getKp","getKd","getKi","getMode","getDirection","controllerDirection","getInput","getSetPoint","getBias","ToggleDurationNode","runtime","offDelay","remainingMins","runtimeVal","startCountdown","onExecute","psychrolib","PsychrometricCalculationsNode","psychro","psychrometrics","setConversionFunction","onInputOrSettingsChange","input1","input2","input3","clearOutputs","outputArray","conversionFunction","EnergyUnitConversionNode","PowerUnitConversionNode","VolumeUnitConversionNode","TempConvertNode","AtmosphericPressureNode","updateTitleAndFunction","altitude","pressure","PressureConvertNode","ActuatorSizingNode","updateTitles","outputm2","outputft2","KFactorNode","area","DP","airflow","kFactor","DPAirflowNode","KFactor","airflowCFM","airflowLS","ArrayBuilderNode","ArrayBuilderNumNode","ArrayCombineNode","merged","JSONBuilderNode","filterKeys","addInputs","getFilterKeys","dynamicOutputStartPosition","updateInputs","diffKeyFromPos","fromPos","JSONEnumBuilderNode","definition","JsonFilter","JsonObjFilter","JsonFilterCompare","jsonCheck","string2","JsonFilterMultiple","inInput","outJsonOutput","outputs_count","changeOutputsAndSettings","renameInputsOutputs","outputJson","changeMyOutputsCount","targetOutputCount","changeOutputsCount","getOutputNumber","JsonCheckerNode","isJson","JsonParse","JsonPreventDuplicates","getChanges","oldArray","newArray","older","jsonata","JsonQueryNode","queryInput","evaluate","AnyLatchNode","latch","lastLatchValue","BoolLatchNode","NumLatchNode","StringLatchNode","SetResetNode","lock","AddNode","math","settingOutput","MathSubNode","subtract","MathMultiplyNode","multiply","MathDivideNode","divide","div","MathAbsNode","absolute","MathModulusNode","modulus","MathPowNode","power","MathAcosNode","MathAsinNode","asin","MathAtanNode","atan","MathCbrtNode","MathCosNode","MathExpNode","MathLogarithmNode","log10","MathSinNode","MathSqrtNode","MathTanNode","tan","TriggerAddNode","MathTriggerSubNode","MathTriggerMultiplyNode","MathTriggerDivideNode","MathTriggerModulusNode","MathTriggerPowNode","geohash","GeoHashNode","miscellaneous","encode","decode","NumSeriesGenerator","factor","AddressHelperString","prepend","append","btoa","GetSchedulesNode","nube","setExecuteInterval","getDittoSchedules","dittoUrl","MathDecimalPlaceNode","MathFloorNode","floor","MathCeilNode","LimitNode","ScaleNode","scale","LinearShaperNode","inputCountBefore","renameInputsAndSettings","updateInputsLabels","pointFormatted","stepSize","stepIndex","valueAtPosition","positionInStep","startValueIndex","startValue","endValue","TimeFadeNode","updateInterval","fade","timerFinished","RateLimitNode","BoolConstantNode","NumConstantNode","StringConstantNode","JsonConstantNode","passNull","BoolPriorityNode","NumWritableNode","StringPriorityNode","GenericNode","addPrioritySettings","addHistorySettings","addPrioritySettingsConfig","priorityOnCreated","historyOnCreated","doPriorityFunctions","doHistoryFunctions","priorityFunctionsForAfterSettingsChange","HistoryConfig","isOutput","history_group","databaseType","useInterval","clientIDfromPlat","deviceIDfromPlat","foundDeviceID","foundClientID","inputVal","typeOfVal","valAsNum","setPeriodicLogging","isNumber","findMainContainer","PriorityConfig","input_group","inputName","inputNumber","highestPriorityIndex","initializePriorityArray","removeInputAtPosition","updatePriorityInputsFromSettings","addInputAtPosition","removeAll","startPosition","settingsArray","inputsArray","inputArrayatY","inputArrayatX","EmailNode","services","service","email","pass","subject","nodemailer","createTransport","sendMail","HttpMethod","HttpClientNode","GET","methodsWithBody","PATCH","PUT","POST","getSanitizedUrl","getSanitizedMethod","input_data","validateMethod","request","Edge28ApiNode","pointNodes","inAlarmTrigger","inHistoryTrigger","outVal","outMessageJson","outAlarm","_ui","_di","UI_timeoutFunc","DI_timeoutFunc","startInputPolling","pollUIs","sendPayloadToPointNodesFunc","pollDIs","edgeReadUI_Store","fetchPointValue","edgeReadDI_Store","sendPayloadToChild","pointsDI","pointsUI","pollInputsAndSend","POINT_TYPE","POINT_TYPE_TEXT","Edge28InputPointNode","DIGITAL","UI_DIGITAL","_0_10DC","_0_20MA","_4_20MA","_10K_THERMISTOR","isDigitalType","pointEnable","pointDebug","pointNumber","lowScale","highScale","mathFunc","unitsType","sendPointValue","pointOffset","NORMAL","sendJson","pointTypeText","mathSwitch","pointCalcs","limitValDc","limitValMaZero","limitValMaFour","scaleUI420ma","scale420maToRange","calc10kThermistor","uiType","Edge10kSensorUtils","raw10K","temps10K","OUTPUT_POINT_TYPE","OUTPUT_POINT_TYPE_TEXT","Edge28OutputPointNode","deviceContainerID","newSetting","resendTime","DO","UO_AS_DIGITAL","UO_AS_0_10DC","lastSendTime","inputChange","apiCall","nodeVal","writePointValue","Edge28LORAResetNode","resetLORAConnect","BACnetNetwork","bacnetClient","deviceNodes","inNetworkEnable","inDiscover","initializeBacnetClient","iAm","whoIs","networkNumber","networkNumberWhoIs","net","closeBacnetClient","Bacnet","broadcastAddress","Poll","BACnetDevice","isFirst","isPolling","shouldPoll","delayBetweenDevice","delayBetweenPoint","setBacnetClient","setPayloadsToPointNodes","addDevice","updateNetworkSettings","requestPoll","removeDevice","getNetworkNode","persistSettings","pntList","currentPollValue","polling","STOP","outputMsg","scanDeviceFunc","getBacnetClient","deviceAddress","writeProperty","adr","requestArray","DEVICE","OBJECT_LIST","readPropertyMultiple","readObject","OBJECT_IDENTIFIER","OBJECT_NAME","DESCRIPTION","UNITS","PRESENT_VALUE","readProperty","errorClass","objectInfo","objectProperties","findValueById","readObjectList","objectArray","readObjectFull","deviceObjects","mapToDeviceObject","readPresentValue","writePresentValue","pollingFuncOrTimeout","race","pollingFunc","selectPoint","manualPoint","BACnetPoint","pollCount","pollCountFail","inputInNum","outputOutNum","jsonOutNum","errorOutNum","logsOutNum","pointsList","getPoints","setPointsListItems","getPresentValue","objectTag","pointWriteEnable","setPointValue","bacnetPointName","setJsonOutput","assert","BE","BACnetObject","BACnetObjectProperty","deviceInfo","hostInfo","covListener","dev","APDU_TIMEOUT","_settings","getProperty","header","expectingReply","sender","forwardedFrom","enumType","confirmedService","ConfirmedServiceChoice","UnconfirmedServiceChoice","errorResponse","invokeId","ErrorClass","SERVICES","ErrorCode","REJECT_UNRECOGNIZED_SERVICE","ttl","bdt","resultResponse","BvlcResultFormat","SUCCESSFUL_COMPLETION","lowLimit","highLimit","SEGMENTATION_SUPPORTED","VENDOR_IDENTIFIER","iAmResponse","getObject","OBJECT","UNKNOWN_OBJECT","property3","PRIORITY_ARRAY","value2","encodePropValue","PROPERTY","UNKNOWN_PROPERTY","priorityValue","priorityNum","priorityArr","q","aa","pri","arrType","addProperty","ApplicationTags","REAL","simpleAckResponse","INVALID_ARRAY_INDEX","propertyName","objectIdName","READ_PROPERTY","readPropertyResponse","responseList","propGroup","propListFriendly","ASN1_MAX_PROPERTY_ID","ObjectTypesSupported","propList","ALL","getAllPropertyIds","PROPERTY_LIST","ASN1_ARRAY_ALL","errorCode","readPropertyMultipleResponse","monitoredObjectId","subscriberAddress","subscriberProcessId","lifetime","issueConfirmedNotifications","sendPropertyCov","OPTIONAL_FUNCTIONALITY_NOT_SUPPORTED","monitoredProperty","monitoredIndex","confirmedCOVNotification","encodedValue","BIT_STRING","createBitstring","NULL","UNSIGNED_INTEGER","SIGNED_INTEGER","DOUBLE","CHARACTER_STRING","ENUMERATED","OBJECTIDENTIFIER","typeName","SYSTEM_STATUS","DeviceStatus","OPERATIONAL","VENDOR_NAME","MODEL_NAME","FIRMWARE_REVISION","APPLICATION_SOFTWARE_VERSION","PROTOCOL_VERSION","PROTOCOL_REVISION","PROTOCOL_SERVICES_SUPPORTED","ServicesSupported","CONFIRMED_COV_NOTIFICATION","SUBSCRIBE_COV","READ_PROPERTY_MULTIPLE","WRITE_PROPERTY","I_AM","WHO_IS","SUBSCRIBE_COV_PROPERTY","MAX_APDU_LENGTH_ACCEPTED","Segmentation","SEGMENTED_BOTH","NUMBER_OF_APDU_RETRIES","DEVICE_ADDRESS_BINDING","DATABASE_REVISION","dynamicProperties","adpuTimeout","onUnhandledEvent","onRegisterForeignDevice","onWhoIs","onWriteProperty","onReadProperty","onReadPropertyMultiple","onSubscribeCov","onSubscribeProperty","reinitializeDevice","ReinitializedState","COLDSTART","bacnetPoint","isInteger","PRIORITY","objectTypeId","MandatoryProperties","PROTOCOL_OBJECT_TYPES_SUPPORTED","STATUS_FLAGS","EVENT_STATE","EventState","OUT_OF_SERVICE","EngineeringUnits","ignoreProps","propertyList","selfTypeId","missingProperties","selfName","missingPropertyNames","objectList","objType","objectsOfType","typeList","onObjectPropertyChanged","fullPropList","keyName","typeGroup","DEVICE_TYPE","OCTET_STRING","RELIABILITY","RELINQUISH_DEFAULT","BACnetServerPointNode","DependantConnectionNodeMixin","PointNodeMixin","mixinPointValueInputOutput","cast","listener","createPayload","mightOnlyValueChanged","equals","cov","changedOfValue","createPointValue","SensorType","LoraSensorDecoderNode","watchdogDelay","nodeID","Droplet","MicroEdge","watchdog","microEdgeA1","microEdgeA2","microEdgeA3","sensorType","resetWatchdog","writeOutputs","dropletDecode","microEdgeDecode","watchdogTime","microEdgeOutputs","MicroEdgeAnalogs","analogInputs","Vref","V","R0","R","topicsBuilder","pulses","voltage","a1","a2","a3","rssi","snr","lastMessage","lastMessageTimeStamp","humidity","lux","movement","b1Sensor","b2_sensor","currentSensorType","LoRaRawTwoWayOutput","inputsUpdated","checkInputAndType","isOk","data_lengths","writeUInt8","writeInt8","LoRaRawPointsInput","addressPrefix","keyBuffer","nonce","outputOffset","updateSettings","encryptedBuffer","dataBuffer","loraRawCrypt","loraRawDecryptBuffer","LORA_RAW_ERROR","LRERR_NOERR","startPos","outputValues","pointCount","addrPrefix","LoRaRawPointsOutput","errorOutputIndex","nonceLen","encBuffer","loraRawEncryptBuffer","crypto","aesCmac","IV_DEFAULT","iv","LRERR_INVALID_KEY","LRERR_INVALID_IV","cipher","createCipheriv","setAutoPadding","final","cmacBlock","cmac","returnAsBuffer","LRERR_INVALID_PAYLOAD","LRERR_INVALID_CMAC","createDecipheriv","LoraSensorLegacyDecoderNode","keyHex","ModbusRTU","ModbusServerNode","tcpServer","createModbusServer","closeTcpServer","coils","registers","unitId","minAddress","maxInputAddress","maxAddress","bufferFactor","vector","getCoil","unitID","getInputRegister","readUInt16BE","getHoldingRegister","setCoil","setRegister","readDeviceIdentification","0","salveAddress","once","ServerTCP","ModbusSerialDeviceNode","outStatus","ipPort","ping","transport","sock","Socket","destroy","deviceEnable","DISABLED","ModbusPointNode","outModbusMessage","outArray","pointAddress","pointTimeout","pointLimitEnable","limitLow","limitHigh","valOffset","valPrecision","lastInputState","Transport","ModbusSerialNetworkNode","rs485DeviceName","isPortOk","isPortInUse","serialPortStatus","pollEnableSetting","tcpClients","outPortStatus","outPortMsg","TCP","manualPortNum","parity","dataBits","stopBits","devicePolling","registerDelay","baudRate","manualPort","container_db","devicesPoints","devices","getDevice","nodeDetailsMessage","sub_id","setupForPolling","poll","connectRTUBuffered","FIRST_START","pollDevicesPoints","getDevicesPoints","errorOnModbusDevicesExec","deviceCID","deviceAddressOffset","deviceObj","existingTcpClients","getTcpKey","isOpen","connectTCP","sendDeviceError","errorOnModbusPointsExec","pntAddr","pntType","pntOffset","pntVal","pntCid","pntId","pntDataType","pntDataEndian","modbusMethods","sendPointMessage","sendDeviceMessage","sendPointError","networkEnable","DO_NOT_INIT","ModbusMethods","regAddr","regLength","nodeInputValue","funcType","methodType","dataTypeCase","thisInstance","ft","pntSwitch","setID","readBool","nubeType","nubeAnalogueRead","typeDevice","cidDevice","doc","deviceSubCID","deviceTimeout","pntMathFunc","pntMathValue","pntTimeout","pointVal","matchMQTT","topicsCount","messageQueue","useEnv","topics_count","connectToBroker","disconnectFromBroker","end","topics","processQueue","mqttMessage","msgAsNum","toFixedNumber","outInd","setMQTTOutput","MqttClientSingleNode","inData","inTopic","qos","processMessage","retain","callbackWhenConnected","callbackWhenOffline","callbackIncomingMessage","connack","packet","cmd","onConnect","onClose","onDisconnect","onEnd","onError","onOffline","onPacketReceive","onPacketSend","onMessage","MqttPointNode","_iTopic","_sReqRes","mqttPoint","createMqttPointStoreItem","topicInputIdx","mqttTopic","isReqRes","SillyMqttPoint","MqttPointCreator","MqttPointValue","incomingMessage","MqttPointStoreItem","onConvertMessage","DefaultMqttPoint","MqttGenericNode","MqttGenericNodeMixinBase","unregisterAction","shouldRegister","registerAction","updateAction","doAfterUpdate","MqttGenericNodeMixin","mixinMqttTopicInputSetting","MqttBroker","stopBroker","decryptPass","statusBroker","startBroker","checkAuthentication","passwordFile","allowAnonymousIndex","allowAnonymous","allowAnonymousArray","passwordRefIndex","passwordRef","passwordRefArray","MqttTopicPartsNode","MQTTTopicBuilderNode","SerialPort","SerialConnectorNode","baudRates","closePort","connectToSerialPort","writePortData","listPorts","portName","autoOpen","Readline","parsers","pipe","delimiter","readPortData","formattedExecutionTime","write","portList","ports","WeeklyScheduleNode","daysArray","schedule","guess","makeHoursDropdown","makeMinsDropdown","startHour","startMin","endHour","endMin","scheduleOutput","weekly","events","schedID","tzOffset","utcOffset","offsetHours","offsetMins","rolloverFlag","startHourUTC","startMinsUTC","endHourUTC","endMinsUTC","sundayIndex","saturdayIndex","daysOutput","colour","hoursArray","minsArray","ScheduleMergeNode","inputString","inputObject","weeklyOutput","eventOutput","weeklySched","eventSched","ScheduleChecker","nextStart","nextStop","schedulePayload","zone","weeklyScheduleOutput","sched","ScheduleUtils","checkWeeklySchedule","scheduleStatus","isBefore","eventsOutput","eventScheduleOutput","checkEventsSchedule","eventSchedule","nextOn","nextOff","scheduleValue","dates","dtUTC","startMoment","endMoment","isAfter","weeklySchedule","getISOday","startArray","part","endArray","startMomentArray","isoWeekday","endMomentArray","MinMaxAvgNode","statistics","getDefinedInputsOrSettingsValues","AvgNode","MinNode","MaxNode","SumNode","MedianNode","RangeNode","RankNode","rank","outputCount","AnyStatAllNode","NumbersAverageNode","streams","resetToNull","NumbersHighestNode","NumbersLowestNode","NumbersSumNode","StreamMergeNode","GateNode","gate","StackNode","QueueNode","queue","DelayNode","delayedValues","DelayMeterNode","TimeFrequencyMeterNode","countWas","FlatlineNode","StringCaseAcronymsNode","StringCompareNode","string1","TextCutSubstringNode","StringJoinNode","TextStringLengthNode","StringIndexOfNode","searchFor","TextCharAtIndexNode","TextSplitStringsNode","currentIndex","lastStart","lastNext","splitNext","separator","splittedText","StringCaseChangeNode","toTitleCase","phrase","word","charAt","setTitleAndConversionFunction","TextASCIICodeNode","charCodeAt","TextASCIICharNode","StringBufferNode","useTrigger","bufferData","lastSend","lastClear","lastAdd","addTrigger","triggerInput","BoolSwitchNode","inA","inB","NumSwitchNode","StringSwitchNode","BoolSelectNode","NumSelectNode","StringSelectNode","BoolOutputSelectNode","active","NumOutputSelectNode","StringOutputSelectNode","HostInfo","systemMem","callSystemInfo","callInfo","PlatNode","haystackAbout","serverName","productVersion","SystemInfo","settingsConfig","settingsText","filteredNodeSettings","settingValue","outType","totalmem","freemem","networkInterfaces","uptime","homedir","arch","loadavg","getSysInfo","SystemBeepNode","beep","SystemExecuteNode","FlowExport","UpdateIPEdge28","timeStamp","getTimeStamp","interfaceEth0","eth0Ip","messageOutput","errorOutput","msgOut","newIpEth0","netNetmaskEth0","newGatewayEth0","newNameServerEth0","getInterfaces","enableInterfaceEth0","enableNetwork","disableNetwork","interfaceTypeEth0","writeChanges","reboot","checkIpSettingsEth0","bbbGetInterfaceDetails","bbbSetIPDHCP","bbbSetIPFixed","nodeColourChange","getActiveNetworks","getInterfaceEth0","networkUpDown","UpdateIP","newIpEth1","netNetmaskEth1","newGatewayEth1","newNameServerEth1","enableInterfaceEth1","interfaceTypeEth1","checkIpSettingsEth1","eth0","getInterfaceEth1","WiresVersion","getNodeJsVersion","getNPMVersion","TimeConvertNode","TimeConvertPlusNode","TIME","EPOCH","NEW_TS","timeSelection","timeConvertPlus","TimezoneConvertNode","tsCategory","local","region","tsType","TimezoneUtils","africaZones","americaZones","antarcticaZones","asiaZones","atlanticZones","australiaZones","europeZones","indianZones","pacificZones","ClockNode","clock","addOutputs","advanced","DateNode","dayString","toLocaleDateString","TimeDiffNode","date1","date2","diffTime","diffTotals","years","months","StopwatchNode","lastRunVal","stopwatch","CronJob","construe","CronIntervalNode","job","jobCronExp","dayBetweenStart","dayBetweenEnd","cronSetting","nextJobs","cronType","cronExp","nextDates","jsonataQuery","CronWeeklyNode","cronValidator","CronExpressionNode","valid","isValidCron","TimestampGeneratorNode","unix","COVNode","RandomNode","TriggeredInjectNode","inject","InjectNode","TimeIteratorNode","complete","lastStop","reqInterval","reqIterations","iterator","iterations","ScheduleAfterhoursOffWidgetNode","currentMode","remainingRuntime","widget","AHRuntime","modeInput","startSchedule","startAfterhours","schedInput","AHDuration","SchedulePrestartFixedNode","condition1_range1","condition1_range2","condition1_time","condition2_range1","condition2_range2","condition2_time","condition3_range1","condition3_range2","condition3_time","condition4_range1","condition4_range2","condition4_time","condition5_range1","condition5_range2","condition5_time","condition6_range1","condition6_range2","condition6_time","condition7_range1","condition7_range2","condition7_time","condition8_range1","condition8_range2","condition8_time","condition9_range1","condition9_range2","condition9_time","condition10_range1","condition10_range2","condition10_time","fromRange","toRange","UnknownNode","unknown","NeDbDatabase","authUserDatabase","userDatabase","nodeDatabase","dashboardDatabase","scheduleDatabase","historianDatabase","CLEANUP_INTERVAL","addUser","addOrUpdateUser","getUsers","getUser","getAsyncUsers","updateUser","getUsersCount","removeUser","dropUsers","getNode","dropNodes","dropUiPanels","addSchedule","updateSchedule","removeSchedule","addHistory","updateHistory","removeHistory","jwt","AuthUserDataSource","AbstractDatabase","findOne","multi","expiresIn","verify","decoded","DashboardDataSource","removed","HistorianDataSource","updatedCallback","removedCallback","NodeDataSource","ser_node","ScheduleDataSource","UserDataSource","usr"],"mappings":"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AIngC,OAAO,KAAKygC,KAAK,mBACpBn+B,MAAM9nB,IACP2S,QAAQC,IAAI,qBACZ+yC,EAAIngC,OAAO,KAAKygC,KAAKjmD,KAEvB,MAAOA,GACP2lD,EAAIngC,OAAO,KAAKygC,KAAKjmD,UAKzB1T,EAAOD,QAAU80E,G,cC9TjB70E,EAAOD,QAAU8oB,QAAQ,sB,cCAzB7oB,EAAOD,QAAU8oB,QAAQ,Y,8YCAzB,aACA,QAEA,MAAqB+zD,EAWnB,2BAA2BC,GAEzB,MADY,GAAG,UAAMt+D,SAASq+D,EAAKlwD,IAAKkwD,EAAKn+D,aAAam+D,EAAKrvD,UAAUsvD,IAQ3E,WAAiBnwD,G,yCACf,aAAa,UAAM5rB,IAAI4rB,OArB3B,YAES,EAAAjO,KAAO,KACP,EAAAiO,IAAM,YACN,EAAAa,OAAS,MACT,EAAA8uD,cAAgB,gB,8ECJzB,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,MACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OAGA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OAGA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OAKA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OAEA,OACA,OAGA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OAGA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OAEA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OAEA,OACA,OAGA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,MACA,OACA,OACA,OACA,OACA,OAIA,OAGA,OACA,OACA,OAGA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OAEA,OAEA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,Q,8EC3RA,aACA,OACA,OACA,OAEA,MAAMS,UAAgB,EAAAv2D,aAEpB,cACEhjB,QACAd,KAAKkkB,sBAAuB,EAC5BlkB,KAAKwkB,kBAAoB,EAAAhlB,KAAKkC,QAC9B1B,KAAKoL,MAAQ,EAAAa,UAAUquE,QAAQC,IAAInvE,MACnCpL,KAAKL,YAAc,EAAAsM,UAAUquE,QAAQC,IAAI56E,YACzCK,KAAK4S,UAAU,SAAU,EAAApT,KAAKkC,SAC9B1B,KAAK4S,UAAU,UAAW,EAAApT,KAAKkC,SAC/B1B,KAAK4P,cAAc,GAAG,GACtB5P,KAAK4P,cAAc,GAAG,GAGxB,UAEE5P,KAAKy1B,iBAGP,aAIA,iBACE,MAAM+kD,EAAYx6E,KAAKy6E,wBACvB,GAAwB,GAApBD,EAAUpyE,OAGZ,OAFApI,KAAK4P,cAAc,GAAG,QACtB5P,KAAK4P,cAAc,GAAG,GAGxB,MAAM8qE,EAAmBF,EAAU5Z,MAAMpxD,IAAW,IAANA,GAC9CxP,KAAK4P,cAAc,EAAG8qE,GACtB16E,KAAK4P,cAAc,GAAI8qE,GAGzB,wBACE55E,MAAMo0D,wBACNl1D,KAAKy1B,kBAGT,EAAAjwB,UAAU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MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAOh+F,SAASy+F,GAAc,OAC9E,IACE,IAAK,IAAI//F,IAAO,CAAC4F,GACfmqD,EAAM/vD,EAAIg/F,SAAS,SAAS1uG,KAAK0M,SAAsB,YAAEjO,OAAOiR,IAElE1P,KAAK2wG,OAAOtmE,EAAWo1B,EAAKnqD,GAC5B,MAAOrE,GACPjR,KAAK4J,SAASqH,QAEX,CACL,IAAK,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAOD,SAASy+F,GAAc,OAC9E,IACE,IAAK,IAAI//F,IAAO,CAAC4F,GACfmqD,EAAM/vD,EAAIi/F,SAAS,SAAS3uG,KAAK0M,SAAsB,YAAEjO,OAAOiR,IAChEwxD,EAAYxxD,EAAIi/F,SAAS,eAAe3uG,KAAK0M,SAAsB,YAAEjO,OACrE0iE,EAAYzxD,EAAIi/F,SAAS,eAAe3uG,KAAK0M,SAAsB,YAAEjO,OAEvEuB,KAAK2wG,OAAOtmE,EAAWo1B,EAAKyB,EAAWC,GACvC,MAAOlwD,GACPjR,KAAK4J,SAASqH,IAGlB,MACF,QACEjR,KAAKmP,UAAU,kCAKvB,EAAA3J,UAAUkB,iBAAiB,EAAA+lB,cAAesiF,EAAsB,EAAAviF,kB,8ECtYhE,MAAqBokF,GAArB,YAIS,EAAAF,kBAAqBhhG,IAC1B,MAAMmhG,EAAS,CACb,YACA,YACA,YACA,YACA,YACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,UACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,YACA,YACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,WACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,WACA,YACA,YACA,WACA,YACA,YACA,aACA,aACA,UACA,aACA,YACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,WACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,WACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,cAEIC,EAAW,EACd,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,EACD,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,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gBACA,oBACA,iBAGG,EAAAN,YAAc,CACjB,iBACA,eACA,iBACA,gBACA,eACA,oBACA,eACA,kBACA,sBACA,cACA,kBACA,eACA,gBACA,kBACA,iBACA,kBACA,kBACA,iBACA,eACA,mBAGG,EAAAG,UAAY,CACf,cACA,aACA,cACA,aACA,cACA,gBACA,cACA,eACA,YACA,eACA,eACA,cACA,eACA,cACA,aACA,kBACA,eACA,gBACA,aACA,YACA,aACA,gBACA,iBACA,YACA,cACA,mBACA,iBACA,YACA,eACA,eACA,gBACA,iBACA,aACA,iBACA,eACA,iBACA,gBACA,eACA,mBACA,oBACA,eACA,aACA,eACA,gBACA,cACA,eACA,oBACA,mBACA,YACA,YACA,iBACA,iBACA,aACA,gBACA,iBACA,cACA,gBACA,iBACA,aACA,gBACA,iBACA,qBACA,cACA,gBACA,eACA,cACA,eACA,aACA,aACA,mBACA,cACA,gBACA,mBACA,eACA,cACA,qBACA,gBAGG,EAAAD,gBAAkB,CACrB,mBACA,mBACA,4BACA,uBACA,oBACA,oBACA,qBACA,mBACA,mBACA,qBAGG,EAAAD,aAAe,CAClB,eACA,oBACA,oBACA,iCACA,8BACA,4BACA,0BACA,6BACA,4BACA,iCACA,0BACA,6BACA,6BACA,4BACA,4BACA,mBACA,mBACA,gBACA,yBACA,mBACA,gBACA,iBACA,uBACA,oBACA,iBACA,gBACA,wBACA,uBACA,iBACA,kBACA,kBACA,kBACA,oBACA,qBACA,kBACA,iBACA,kBACA,uBACA,iBACA,uBACA,iBACA,kBACA,mBACA,mBACA,sBACA,sBACA,oBACA,oBACA,kBACA,oBACA,qBACA,oBACA,oBACA,iBACA,kBACA,iBACA,qBACA,+BACA,uBACA,0BACA,6BACA,4BACA,wBACA,4BACA,0BACA,iBACA,kBACA,kBACA,iBACA,8BACA,8BACA,iBACA,eACA,sBACA,iBACA,kBACA,iBACA,qBACA,oBACA,mBACA,oBACA,iBACA,qBACA,sBACA,mBACA,kBACA,oBACA,qBACA,iBACA,mBACA,kBACA,eACA,kBACA,8BACA,8BACA,iCACA,kBACA,iBACA,sBACA,qBACA,kBACA,yBACA,wBACA,sBACA,sBACA,uBACA,sBACA,uBACA,iBACA,iBACA,mBACA,qBACA,mBACA,mBACA,wBACA,oBACA,uBACA,gBACA,mBACA,wBACA,sBACA,gBACA,sBACA,kBACA,kBACA,oBACA,qBACA,mBACA,kBACA,uBAGG,EAAAO,aAAe,CAClB,eACA,mBACA,uBACA,kBACA,gBACA,iBACA,gBACA,oBACA,kBACA,eACA,mBACA,oBACA,kBACA,sBACA,eACA,mBACA,qBACA,iBACA,oBACA,iBACA,oBACA,gBACA,eACA,kBACA,iBACA,oBACA,gBACA,mBACA,kBACA,uBACA,oBACA,iBACA,iBACA,oBACA,eACA,kBAGG,EAAAH,eAAiB,CACpB,qBACA,qBACA,wBACA,mBACA,mBACA,kBACA,mBACA,qBACA,sBACA,sBACA,kBACA,oBAGG,EAAAD,cAAgB,CACnB,kBACA,mBACA,kBACA,sBACA,iBACA,mBACA,qBACA,yBACA,oBAGG,EAAAG,YAAc,CACjB,gBACA,mBACA,eACA,mBACA,cACA,kBACA,mBACA,mB,iGC9ZR,aACA,OACA,OACA,OACA,OACA,OAEMltH,EAAS,EAAQ,IAEvB,MAAaotH,UAAkB,EAAAz2H,KAI7B,cACE3L,QAJF,KAAA08E,aAAe,IAKbx9E,KAAKoL,MAAQ,EAAAa,UAAUuX,KAAK2/G,MAAM/3H,MAClCpL,KAAKL,YAAc,EAAAsM,UAAUuX,KAAK2/G,MAAMxjI,YACxCK,KAAK4S,UAAU,aAAc,EAAApT,KAAKgC,QAClCxB,KAAK4S,UAAU,OAAQ,EAAApT,KAAKiC,QAC5BzB,KAAK4S,UAAU,MAAO,EAAApT,KAAKiC,QAC3BzB,KAAK4S,UAAU,MAAO,EAAApT,KAAKiC,QAC3BzB,KAAK0lC,qBAAqB,WAAY,EAAAlmC,KAAKiC,OAAQ,EAAG,YAEtDzB,KAAK0M,SAAe,KAAI,EAAAhN,YAAYZ,OAAO,CACzCa,YAAa,OACbC,KAAM,EAAAH,YAAYsC,S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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 119);\n","import { isEmpty, isNull } from '../utils/helper';\nimport { Link } from './node-link';\nimport { Deserializable, Serializable, SerializableHelper } from './serializable';\nimport Validation from './validation/Validation';\n\nexport enum Type {\n  STRING   = 'string',\n  NUMBER   = 'number',\n  BOOLEAN  = 'boolean',\n  ANY      = 'any',\n  JSON     = 'json',\n  DROPDOWN = 'dropdown', // it is same as `ANY`, but when it has setting as pair it checks for validity\n}\n\nexport type IOType = 'input' | 'output';\n\nexport interface SerializedNodeIO {\n  name: string;\n  type: Type;\n  label?: string;\n  locked?: boolean;\n  pos?: number;\n  round?: boolean;\n  subNodeId?: number | string;\n}\n\nexport interface SerializedNodeInput extends SerializedNodeIO {\n  link?: Link;\n  isOptional?: boolean;\n  setting: InputSetting;\n}\n\nexport interface SerializedNodeOutput extends SerializedNodeIO {\n  links?: Array<Link>;\n}\n\nexport interface NodeIO extends SerializedNodeIO {\n  data?: any;\n  updated?: boolean;\n}\n\nexport interface SerializedNodeSetting {\n\n  description: string;\n  type?: SettingType;\n  value?: any;\n  config?: any;\n}\n\nexport class NodeSetting implements SerializedNodeSetting, Serializable<SerializedNodeSetting>,\n                                    Deserializable<SerializedNodeSetting> {\n\n  description: string;\n  type?: SettingType;\n  value?: any;\n  config?: any;\n  validation?: Validation;\n  toJSON?: Function; // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#toJSON_behavior\n\n  constructor(description: string, type?: SettingType, value?: any, config?: any, validation?: Validation,\n              toJSON?: Function) {\n    this.description = description;\n    this.type = type;\n    this.value = value;\n    this.config = config;\n    this.validation = validation;\n    this.toJSON = toJSON;\n  }\n\n  static create(object: {\n    description: string, type?: SettingType, value?: any, config?: any, validation?: Validation, toJSON?: Function\n  }): NodeSetting {\n    return new NodeSetting(object.description, object.type, object.value, object.config, object.validation,\n                           object.toJSON);\n  };\n\n  serialize(): SerializedNodeSetting {\n    return {\n      description: this.description,\n      type: this.type,\n      config: SerializableHelper.serialize<object>(this.config),\n      value: SerializableHelper.serialize<object>(this.value),\n    };\n  }\n\n  deserialize(serializedObj: SerializedNodeSetting): NodeSetting {\n    return NodeSetting.create(serializedObj);\n  }\n}\n\nabstract class AbstractNodeIO implements NodeIO, Serializable<SerializedNodeIO> {\n\n  name: string;\n  type: Type;\n  label?: string;\n  locked?: boolean;\n  pos?: number;\n  round?: boolean;\n  subNodeId?: number | string;\n  data?: any;\n  updated?: boolean;\n\n  protected constructor(name: string, type: Type, label?: string, locked?: boolean, pos?: number,\n                        round?: boolean, data?: any, updated?: boolean, subNodeId?: number | string) {\n    this.name = name;\n    this.type = type;\n    this.label = label;\n    this.locked = locked;\n    this.pos = pos;\n    this.round = round;\n    this.subNodeId = subNodeId;\n    this.data = data;\n    this.updated = updated;\n  }\n\n  serialize(): SerializedNodeIO {\n    return {\n      name: this.name,\n      type: this.type,\n      label: this.label,\n      locked: this.locked,\n      pos: this.pos,\n      round: this.round,\n      subNodeId: this.subNodeId,\n    } as SerializedNodeIO;\n  }\n\n}\n\nexport class NodeOutput extends AbstractNodeIO\n  implements NodeIO, SerializedNodeOutput, Serializable<SerializedNodeOutput>, Deserializable<SerializedNodeOutput> {\n\n  links?: Link[];\n\n  constructor(name: string, type: Type, links?: Array<Link>, label?: string, locked?: boolean, pos?: number,\n              round?: boolean, data?: any, updated?: boolean, subNodeId?: number | string) {\n    super(name, type, label, locked, pos, round, data, updated, subNodeId);\n    this.links = isEmpty(links) ? [] : links.map(l => Link.create(l));\n  }\n\n  static create(object: {\n    name: string, type: Type, links?: Array<Link>, label?: string, locked?: boolean,\n    pos?: number, round?: boolean, data?: any, updated?: boolean, subNodeId?: number | string\n  }) {\n    return new NodeOutput(object.name, object.type, object.links, object.label, object.locked, object.pos, object.round,\n                          object.data, object.updated, object.subNodeId);\n  }\n\n  serialize(): SerializedNodeOutput {\n    return { ...super.serialize(), links: this.links?.map(l => SerializableHelper.serialize(l)) };\n  }\n\n  deserialize(serializedObj: SerializedNodeOutput): NodeOutput {\n    return NodeOutput.create({ ...serializedObj });\n  }\n\n}\n\nexport interface InputSetting {\n  exist: boolean; // bind setting exist or not\n  nullable: boolean; // whether null value is acceptable or not\n  hidden: boolean;\n}\n\nexport class NodeInput extends AbstractNodeIO\n  implements NodeIO, SerializedNodeInput, Serializable<SerializedNodeInput>, Deserializable<SerializedNodeInput> {\n\n  link?: Link;\n  isOptional?: boolean;\n  setting: InputSetting;\n\n  constructor(name: string, type: Type, setting: InputSetting, link?: Link, isOptional?: boolean, label?: string,\n              locked?: boolean, pos?: number, round?: boolean, data?: any, updated?: boolean,\n              subNodeId?: number | string) {\n    super(name, type, label, locked, pos, round, data, updated, subNodeId);\n    this.link = isNull(link) ? null : Link.create(link);\n    this.isOptional = isOptional;\n    this.setting = setting;\n  }\n\n  static create(object: {\n    name: string, type: Type, setting: InputSetting, link?: Link, isOptional?: boolean, label?: string,\n    locked?: boolean, pos?: number, round?: boolean, data?: any, updated?: boolean, subNodeId?: number | string\n  }) {\n    return new NodeInput(object.name, object.type, object.setting, object.link, object.isOptional, object.label,\n                         object.locked, object.pos, object.round, object.data, object.updated, object.subNodeId);\n  }\n\n  serialize(): SerializedNodeInput {\n    return {\n      ...super.serialize(),\n      link: SerializableHelper.serialize(this.link),\n      setting: SerializableHelper.serialize(this.setting),\n      isOptional: this.isOptional,\n    } as SerializedNodeInput;\n  }\n\n  deserialize(serializedObj: SerializedNodeInput): NodeInput {\n    return NodeInput.create({ ...serializedObj });\n  }\n}\n\nexport interface IInputInfo {\n  input: NodeInput;\n  slot: number;\n  link_pos: [number, number];\n  locked: boolean;\n}\n\nexport interface IOutputInfo {\n  output: NodeOutput;\n  slot: number;\n  link_pos: [number, number];\n  locked: boolean;\n}\n\nexport const convertStringToType = (type: string): Type => {\n  switch (type) {\n    case Type.STRING:\n      return Type.STRING;\n    case Type.NUMBER:\n      return Type.NUMBER;\n    case Type.BOOLEAN:\n      return Type.BOOLEAN;\n    case Type.JSON:\n      return Type.JSON;\n  }\n  return Type.ANY;\n};\n\nexport enum SettingType {\n  STRING      = 'string',\n  NUMBER      = 'number',\n  BOOLEAN     = 'boolean',\n  READONLY    = 'readonly',\n  DROPDOWN    = 'dropdown',\n  TREE_SELECT = 'treeselect',\n  CODE_AREA   = 'codearea',\n  PASSWORD    = 'password',\n  GROUP       = 'group',\n}\n\nexport const convertSettingType = (type: SettingType): Type => {\n  switch (type) {\n    case SettingType.STRING:\n      return Type.STRING;\n    case SettingType.NUMBER:\n      return Type.NUMBER;\n    case SettingType.BOOLEAN:\n      return Type.BOOLEAN;\n  }\n  return Type.ANY;\n};\n\nexport const convertType = (type: Type): SettingType => {\n  switch (type) {\n    case Type.STRING:\n      return SettingType.STRING;\n    case Type.NUMBER:\n      return SettingType.NUMBER;\n    case Type.BOOLEAN:\n      return SettingType.BOOLEAN;\n    case Type.DROPDOWN:\n      return SettingType.DROPDOWN;\n  }\n  return SettingType.STRING;\n};\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 04.07.2016.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\nimport { get } from 'lodash';\nimport { Colors, create } from 'logplease';\nimport { Renderer } from '../client/editor/renderer';\nimport { Database } from '../database/database';\nimport { Dashboard } from '../server/dashboard';\nimport { ErrorHandler } from '../utils/decorators';\nimport { RegistryError } from '../utils/errors';\nimport { IdGenerator } from '../utils/id-generator';\nimport { ContainerNode } from './container-node';\nimport { Node } from './node';\nimport { createNodeDbHelper } from './node-db-helper';\nimport { NodeFactory } from './node-factory';\nimport { NodeHookHelper } from './node-hook';\nimport {\n  ContainerRegistryMetadata,\n  GlobalNodeRegistryMetadata,\n  IContainer,\n  IFolderNode,\n  isFolderNode,\n  isNode,\n  SerializedContainer,\n  SerializedNode,\n  Side,\n} from './node-interface';\nimport { DefaultContainerRegistry, DefaultSubNodeRegistry } from './node-registry';\nimport { NodeTypeRegistry } from './node-type-registry';\nimport { Serializable, SerializableHelper } from './serializable';\nimport Utils from './utils';\nimport Namespace = SocketIO.Namespace;\n\nconst logger = create('container', { color: Colors.Magenta });\n\nexport class ContainerRegistry extends DefaultContainerRegistry<Container> {\n\n  private static _instance: ContainerRegistry;\n\n  private constructor() {\n    super();\n  }\n\n  public static instance(): ContainerRegistry {\n    if (!ContainerRegistry._instance) {\n      ContainerRegistry._instance = new ContainerRegistry();\n    }\n\n    return ContainerRegistry._instance;\n  }\n\n  rootContainer(): Container {\n    return <Container>super.rootContainer();\n  }\n\n  @ErrorHandler\n  protected optimizeBeforeRegister(c: Container, force: boolean): Container {\n    const container = super.optimizeBeforeRegister(c, force);\n    if (container.id !== 0) {\n      let rootContainer = this.rootContainer();\n      if (rootContainer.server_dashboard_socket) container.server_dashboard_socket = rootContainer.server_dashboard_socket;\n      if (rootContainer.server_editor_socket) container.server_editor_socket = rootContainer.server_editor_socket;\n      if (rootContainer.client_socket) container.client_socket = rootContainer.client_socket;\n      if (rootContainer.db) container.db = rootContainer.db;\n      if (rootContainer.dashboard) container.dashboard = rootContainer.dashboard;\n    }\n    return container;\n  }\n}\n\nexport class NodeInContainerRegistry extends DefaultSubNodeRegistry<Node> {\n\n  constructor(parent: Container, containerRegistry?: ContainerRegistryMetadata,\n              globalNodeRegistry?: GlobalNodeRegistryMetadata) {\n    super(<IContainer><unknown>parent, containerRegistry, globalNodeRegistry);\n  }\n\n  parent(): Container {\n    return <Container>super.parent();\n  }\n\n  remove(node: Node | number | string, isCaching?: boolean): Promise<Node> {\n    const sNode = NodeFactory.toSimpleNode(node['cid'] ?? this.parent().id, node['id'] ?? node);\n    const nodeId = IdGenerator.createNodeId(sNode.cid, sNode.id);\n    this.parent().logInfo(`Removing node ${nodeId} on ${this.parent().side}...`);\n    if (isFolderNode(node)) {\n      sNode['sub_container'] = (<ContainerNode>node).sub_container;\n    }\n    return Promise.resolve(isNode(node) ? <Node>node : sNode)\n                  .then(n => this.globalNodeRegistry.get(n) ?? n)\n                  .then(n => NodeHookHelper.execute(<Node>n, 'onRemoved') ?? n)\n                  .then(n => NodeHookHelper.execute(<Node>n, 'beforeRemoveNode') ?? n)\n                  .then(n => isCaching ? n : createNodeDbHelper().delete(this.parent().db, sNode).then(_ => n))\n                  .then(n => super.remove(<Node>n, isCaching))\n                  .then(n => NodeHookHelper.execute(n, 'afterRemoveNode') ?? n)\n                  .then(n => {\n                    this.parent().logInfo(`Node ${nodeId} is removed on ${this.parent().side}`);\n                    return n;\n                  });\n  }\n\n  protected validate(node: Node, force: boolean, key: string): Node {\n    const n = super.validate(node, force, key);\n    if (this.parent().nodeItself() && this.parent().nodeItself().shouldRejectNodeType(n?.type)) {\n      throw new RegistryError(`Trying to create non-compatible child node ${n.getReadableId()} with type ` +\n                              `${n.type} in container '${this.parent().id}'...`, n);\n    }\n    return n;\n  }\n\n  protected doRegister(k: string | number, node: Node, force: boolean = false, isCaching?: boolean): Promise<Node> {\n    this.parent().logInfo(`Creating new node ${node.getReadableId()} on ${this.parent().side}...`);\n    return Promise.resolve(node)\n                  .then(n => NodeHookHelper.execute(n, 'onCreated') ?? n)\n                  .then(n => isCaching ? n : createNodeDbHelper().insert(this.parent().db, n).then(_ => n))\n                  .then(n => super.doRegister(k, n, force, isCaching))\n                  .then(n => NodeHookHelper.execute(n, 'onAdded') ?? n)\n                  .then(n => NodeHookHelper.execute(n, 'afterAdded') ?? n)\n                  .then(n => {\n                    this.parent().logInfo(`New node ${node.getReadableId()} is created on ${this.parent().side}`);\n                    return n;\n                  });\n  }\n}\n\nexport const reassignContainer = <T extends IFolderNode>(node: T, container: SerializedContainer | IContainer,\n                                                         containerRegistry?: ContainerRegistryMetadata,\n                                                         globalRegistry?: GlobalNodeRegistryMetadata): T => {\n  node.sub_container = Container.create(node.side, container, node, containerRegistry, globalRegistry);\n  return node;\n};\n\nexport class Container implements IContainer, Serializable<SerializedContainer> {\n  id: number;\n  name?: string;\n  serializedNodes?: SerializedNode[];\n  config: {\n    links_ontop?: boolean;\n  };\n  side: Side;\n  client_socket: SocketIOClient.Socket; //SocketIOClient.Socket|SocketIO.Server;\n  server_dashboard_socket: Namespace;\n  server_editor_socket: Namespace;\n  db: Database;\n  dashboard: Dashboard;\n  renderers: Array<Renderer>;\n  isRunning: boolean;\n  iteration: number;\n  tag?: string;\n  globaltime: number;\n  runningtime: number;\n  fixedtime: number;\n  fixedtime_lapse: number;\n  elapsed_time: number;\n  starttime: number;\n  execution_timer_id: number | any;\n  onStopEvent: Function;\n  onExecuteStep: Function;\n  onAfterExecute: Function;\n  onPlayEvent: Function;\n  frame: number;\n  private readonly _itself: IFolderNode;\n  private readonly _nodeRegistry: NodeInContainerRegistry;\n\n  protected constructor(side: Side, id?: number, folderNode?: IFolderNode, properties?: any,\n                        containerRegistry?: ContainerRegistryMetadata,\n                        globalNodeRegistry?: GlobalNodeRegistryMetadata) {\n    this.renderers = null;\n    this.side = side;\n    this.id = id ?? folderNode?.id ?? IdGenerator.UNINITIALIZED;\n    this.name = this.id === IdGenerator.ROOT ? 'Main' : properties?.name ?? '';\n    this.config = Utils.cloneObject(properties?.config);\n    this._itself = folderNode;\n    this._nodeRegistry = new NodeInContainerRegistry(this, containerRegistry, globalNodeRegistry);\n    this.clear();\n  }\n\n  static initRoot(side: Side, containerRegistry?: ContainerRegistryMetadata,\n                  globalNodeRegistry?: GlobalNodeRegistryMetadata) {\n    return new Container(side, IdGenerator.ROOT, null, null, containerRegistry, globalNodeRegistry);\n  }\n\n  static create(side: Side,\n                obj?: { id: number; name?: string; config?: any; serializedNodes?: any[] },\n                folderNode?: IFolderNode,\n                containerRegistry?: ContainerRegistryMetadata,\n                globalNodeRegistry?: GlobalNodeRegistryMetadata): Container {\n    let container = new Container(side, obj?.id, folderNode, obj, containerRegistry, globalNodeRegistry);\n    container.serializedNodes = obj?.serializedNodes;\n    return container;\n  }\n\n  /**\n   * @deprecated Use {@link NodeTypeRegistry#registerNodeType}\n   */\n  static registerNodeType(\n    type: string,\n    node_class: any,\n    parentContainerNodeType: string = null,\n    show_in_menu: boolean           = true,\n    recursive: boolean              = false,\n    alwaysInsideContainer: boolean  = false,\n  ): void {\n    NodeTypeRegistry.registerNodeType(type, node_class, parentContainerNodeType, show_in_menu, recursive,\n                                      alwaysInsideContainer);\n  }\n\n  nodeItself(): ContainerNode {\n    return this.id === IdGenerator.ROOT ? null : <ContainerNode>this._itself;\n  }\n\n  nodeRegistry(): NodeInContainerRegistry {\n    return this._nodeRegistry;\n  }\n\n  /**\n   * @deprecated Use {@link #nodeRegistry()}\n   * @return {Node[]}\n   */\n  subNodes() {\n    return this.nodeRegistry().list();\n  }\n\n  /**\n   * @deprecated Use {@link #nodeRegistry()}\n   * @param {string | number | Node} node\n   * @return {Node}\n   */\n  getSubNode(node: string | number | Node): Node {\n    return this.nodeRegistry().get(node);\n  }\n\n  /**\n   * Removes all nodes from this container\n   */\n  clear(): void {\n    this.stop();\n    this.isRunning = false;\n\n    //nodes\n    this.nodeRegistry().clear();\n\n    //iterations\n    this.iteration = 0;\n\n    this.config = {};\n\n    //timing\n    this.globaltime = 0;\n    this.runningtime = 0;\n    this.fixedtime = 0;\n    this.fixedtime_lapse = 0.01;\n    this.elapsed_time = 0.01;\n    this.starttime = 0;\n\n    this.sendActionToRenderer('clear');\n  }\n\n  /**\n   * Stops the execution loop of the container\n   */\n  stop(): void {\n    if (!this.isRunning) return;\n\n    this.isRunning = false;\n\n    if (this.onStopEvent) this.onStopEvent();\n\n    if (this.execution_timer_id != null) clearInterval(this.execution_timer_id);\n    this.execution_timer_id = null;\n\n    for (let node of this.nodeRegistry().list()) {\n      if (node['onStopContainer']) node['onStopContainer']();\n    }\n  }\n\n  /**\n   * Attach renderer to this container\n   * @param renderer\n   */\n  attachRenderer(renderer: Renderer): void {\n    if (renderer.container && renderer.container != this) {\n      renderer.deselectAllNodes();\n      renderer.container.detachRenderer(renderer);\n    }\n\n    renderer.container = this;\n    if (!this.renderers) this.renderers = [];\n    this.renderers.push(renderer);\n\n    //reset active nodes\n    for (let node of renderer.container.nodeRegistry().list()) {\n      node.boxcolor = renderer.theme.NODE_DEFAULT_BOXCOLOR;\n      node.setDirtyCanvas(true, true);\n    }\n  }\n\n  /**\n   * Detach renderer from this container\n   * @param renderer\n   */\n  detachRenderer(renderer: Renderer): void {\n    if (!this.renderers) return;\n\n    let pos = this.renderers.indexOf(renderer);\n    if (pos == -1) return;\n\n    renderer.container = null;\n\n    this.renderers.splice(pos, 1);\n    if (this.renderers.length == 0) delete this.renderers;\n  }\n\n  /**\n   * Starts running this container every interval milliseconds.\n   * @param interval amount of milliseconds between executions\n   */\n  //STARTS from here\n  run(interval: number = 1): void {\n    if (this.isRunning) return;\n\n    this.isRunning = true;\n\n    if (this.onPlayEvent) this.onPlayEvent();\n\n    for (let node of this.nodeRegistry().list()) {\n      if (node['onRunContainer']) node['onRunContainer']();\n    }\n\n    //launch\n    this.starttime = Utils.getTime();\n    let that = this;\n\n    //on each loop interval this runStep gets calls for 1 time, currently the inter == 100ms\n    this.execution_timer_id = setInterval(() => that.runStep(1), interval);\n  }\n\n  /**\n   * Run N steps (cycles) of the container\n   * @param steps number of steps to run, default is 1\n   */\n  // THIS block gets called on LOOP_INTERVAL, CURRENTLY this is 100ms on .env and whatever comes in this 100ms inside, those outputs gets ignored, coz we only read value on 100ms\n  runStep(steps: number = 1): void {\n    let start = Utils.getTime();\n    this.globaltime = 0.001 * (start - this.starttime);\n\n    for (let i = 0; i < steps; i++) {\n      this.transferDataBetweenNodes(); // this one is the main block where we are doing all operation to see whether our in/out got changed or not //main block to calculate whether our in/out got changed or not\n\n      let now = Date.now();\n\n      for (let node of this.nodeRegistry().list()) {\n        // on each 100ms we are looping on this block, and we are seeing whether that interval is exceeded to EXECUTE_INTERVAL or not, if exceeded then call onExecute, so this block is only useful for the operation\n        // which should be greater than 100ms to perform some kind of action\n        if (\n          !node.EXECUTE_INTERVAL ||\n          (node.EXECUTE_INTERVAL && !node.executeLastTime) ||\n          (node.executeLastTime && now - node.executeLastTime >= node.EXECUTE_INTERVAL)\n        ) {\n          if (node['onExecute']) node['onExecute']();\n\n          if (node.EXECUTE_INTERVAL) node.executeLastTime = now;\n        }\n\n        // this updated is came from transferDataBetweenNodes\n        // these UPDATE_INPUTS_INTERVAL is also plays roles as Debounce, normally we don't have value on the node for this variable, so it directly enters into the block\n        if (node.isUpdated) {\n          if (\n            !node.UPDATE_INPUTS_INTERVAL ||\n            (node.UPDATE_INPUTS_INTERVAL && !node.updateInputsLastTime) ||\n            (node.updateInputsLastTime && now - node.updateInputsLastTime >= node.UPDATE_INPUTS_INTERVAL)\n          ) {\n            if (node['onInputUpdated']) node['onInputUpdated']();//here we get called our onInputUpdated\n\n            node.isUpdated = false;\n\n            for (let i in node.inputs) if (node.inputs[i].updated) node.inputs[i].updated = false;\n\n            if (node.UPDATE_INPUTS_INTERVAL) node.updateInputsLastTime = now; //this is for restricting multiple values on that interval and to act like Debounce\n          }\n        }\n      }\n\n      this.fixedtime += this.fixedtime_lapse;\n\n      if (this.onExecuteStep) this.onExecuteStep();\n    }\n\n    if (this.onAfterExecute) this.onAfterExecute();\n\n    let elapsed = Utils.getTime() - start;\n    if (elapsed == 0) elapsed = 1;\n    this.elapsed_time = 0.001 * elapsed;\n    this.globaltime += 0.001 * elapsed;\n    this.iteration += 1;\n  }\n\n  transferDataBetweenNodes() {\n    // it runs on each 100ms interval so\n    //all nodes\n    for (let node of this.nodeRegistry().list()) {\n      if (!node.outputs) continue;\n\n      //all outputs\n      for (let o in node.outputs) {\n        let output = node.outputs[o];\n        if (!output.updated) continue;// when updated is true from output of each node we dont break the loop and it will go down\n\n        output.updated = false; // make update false, hence we will not get as updated=true on next loop\n\n        if (output.links == null) continue;//if links is not no need to do any operation\n\n        //all output links\n        for (let link of output.links) { //loop on all links\n          let target_node = this.nodeRegistry().get(link.nodeId); // this is where we had an issue, coz node was deleted but link wasn't\n          if (!target_node) {\n            this.debugErr(`Can't transfer data from node ${node.getReadableId()}. Target node not found`);\n            continue;\n          }\n\n          let target_id = link.ioId ?? link.slot;\n          let target_input = target_node.inputs[target_id];\n\n          if (!target_input) return;\n          target_input.data = Utils.parseValue(output.data, target_input.type); // Now change the input of target node, which is connected wit the output\n\n          target_node.isUpdated = true; //now we made the target node also updated as like on setOutputData, so that target node will perform same operation for it's targeted nodes\n          target_input.updated = true; // plays important role for onInputUpdated()\n        }\n      }\n    }\n  }\n\n  /**\n   * Returns the amount of time the container has been running in milliseconds\n   * @method getTime\n   * @returns number of milliseconds the container has been running\n   */\n  getTime(): number {\n    return this.globaltime;\n  }\n\n  /**\n   * Sends action to renderer\n   * @param action\n   * @param params\n   */\n  sendActionToRenderer(action: string, params?: Array<any>): void {\n    if (!this.renderers) return;\n\n    for (let i = 0; i < this.renderers.length; ++i) {\n      let c = this.renderers[i];\n      if (c[action]) c[action].apply(c, params);\n    }\n  }\n\n  /**\n   * Get nodes\n   */\n  getNodes(includeSubContainers = false): Array<Node> {\n    let nodes = [];\n\n    addNodes(this.nodeRegistry().list());\n\n    function addNodes(_nodes: Node[]) {\n      for (let n of _nodes) {\n        nodes.push(n);\n\n        if (includeSubContainers && isFolderNode(n)) {\n          addNodes((<ContainerNode>n).sub_container.nodeRegistry().list());\n        }\n      }\n    }\n\n    return nodes;\n  }\n\n  /**\n   * Returns a list of nodes that matches a type\n   * @param type the name of the node type\n   * @param includeSubContainers\n   * @returns a list with all the nodes of this type\n   */\n  getNodesByType(type: string, includeSubContainers = false): Array<Node> {\n    type = type.toLowerCase();\n    let r = [];\n    //TODO: performance, refactor it\n    for (let node of this.nodeRegistry().list()) {\n      if (node.type.toLowerCase() == type) r.push(node);\n    }\n\n    if (includeSubContainers) {\n      for (let node of this.nodeRegistry().list()) {\n        if (node instanceof ContainerNode) {\n          let nodes = (<ContainerNode>node).sub_container.getNodesByType(type, true);\n          nodes.forEach(n => r.push(n));\n        }\n      }\n    }\n\n    return r;\n  }\n\n  /**\n   * Returns a list of nodes that are an instance of the provided node-class (or one of its subclasses)\n   * @returns a list with all the nodes of this type\n   * @param nodeClass\n   * @param includeSubContainers\n   */\n  getNodesByClass(nodeClass: Function, includeSubContainers = false): Array<Node> {\n    let r = [];\n    //TODO: performance, refactor it\n    for (let node of this.nodeRegistry().list()) {\n      if (node instanceof nodeClass) r.push(node);\n    }\n\n    if (includeSubContainers) {\n      for (let node of this.nodeRegistry().list()) {\n        if (node instanceof ContainerNode) {\n          let nodes = (<ContainerNode>node).sub_container.getNodesByClass(nodeClass, true);\n          nodes.forEach(n => r.push(n));\n        }\n      }\n    }\n\n    return r;\n  }\n\n  getAllNodes(parent?: Node[],\n              parentId: number = 0): Array<{ id: string; name: string; isContainer: boolean; list?: Array<{ id: string; name: string }>; }> {\n    let list = [];\n    let nodes = parent ?? this.nodeRegistry().list();\n    nodes.forEach(node => {\n      if (node instanceof ContainerNode) {\n        list.push({\n                    id: node.sub_container.id,\n                    name: node.sub_container.name,\n                    parentId,\n                    list: this.getAllNodes(node.sub_container.nodeRegistry().list(), node.sub_container.id),\n                    isContainer: true,\n                    iconImageUrl: node.iconImageUrl,\n                    icon: node.icon,\n                  });\n      } else {\n        list.push({\n                    id: node.id,\n                    parentId,\n                    name: node.name ? `${node.name}: ${node.title}` : node.title,\n                    isContainer: false,\n                    iconImageUrl: node.iconImageUrl,\n                    icon: node.icon,\n                  });\n      }\n    });\n    return list.sort((a, b) => {\n      if (a.isContainer && b.isContainer) {\n        return a.id - b.id;\n      } else if (a.isContainer && !b.isContainer) {\n        return -1;\n      } else {\n        return 1;\n      }\n    });\n  }\n\n  /**\n   * Set canvas to dirty for update\n   * @param foreground\n   * @param background\n   */\n  setDirtyCanvas(foreground?: boolean, background?: boolean): void {\n    this.sendActionToRenderer('setDirty', [foreground, background]);\n  }\n\n  /**\n   * Executes a callback with the editor instance if available\n   */\n  runWithEditor(f: (Editor) => void) {\n    const editor = get(this, 'renderers[0].editor');\n    if (editor) f(editor);\n  }\n\n  /**\n   * @returns serialized container\n   */\n  serialize(): SerializedContainer {\n    return {\n      id: this.id,\n      name: this.name,\n      config: this.config,\n      serializedNodes: this.nodeRegistry().list().map(node => SerializableHelper.serialize(node)),\n    };\n  }\n\n  logInfo(message: string): void {\n    logger.info(`[${this.id}] ${message}`);\n  }\n\n  /**\n   * Print debug message to console\n   * @param message\n   */\n  debug(message: string): void {\n    logger.debug(`[${this.id}] ${message}`);\n  }\n\n  /**\n   * Print error message to console\n   * @param message\n   */\n  debugWarn(message: string): void {\n    logger.warn(`[${this.id}] ${message}`);\n  }\n\n  /**\n   * Print error message to console\n   * @param message\n   */\n  debugErr(message: string): void {\n    logger.error(`[${this.id}] ${message}`);\n  }\n\n}\n","import Icons from \"./node-icons\";\nimport EdgeHelp from \"./utils/help/protocols/edge-28\";\n\n\n\nexport const NODE_INFO = {\n    'boolean': {\n        'and': { title: 'AND', description: \"Performs a logical 'AND' operation (output 'true' when ALL inputs are 'true'). You can specify the number of inputs in the node settings.\" },\n        'min-on-off': { title: 'Min On Off', description: \"output matches input but is delayed by the 'minOn' and 'minOff' durations. output will remain 'true' for 'minOn' duration then match the input value. output will remain 'false' for 'minOff' duration then match the input value. 'minOn' and 'minOff' delays are cancelled when 'reset' transitions from 'false' to 'true. minOn active is true during minOn periods. minOff active is true during minOff periods.  'minOn' and 'minOff' units can be configured from settings. Maximum minOn and 'minOff' setting is 587 hours.   (See Figure A.)\" },\n        'not': { title: 'NOT', description: \"Performs a logical 'NOT' operation (output will be the inverse of the input).\" },\n        'off-delay': { title: 'Off Delay', description: \"output matches input, but output transitions from 'true' to 'false' are delayed by 'delay' duration. The delay is cancelled when 'reset' transitions from 'false' to 'true. offDelay active is true during offDelay periods. 'delay' units can be configured from settings.  Maximum delay setting is 587 hours. (See Figure A.)\" },\n        'on-delay': { title: 'On Delay', description: \"output matches input, but output transitions from 'false' to 'true' are delayed by 'delay' duration. The delay is cancelled when 'reset' transitions from 'false' to 'true. onDelay active is true during onDelay periods. 'delay' units can be configured from settings. Maximum delay setting is 587 hours.  (See Figure A.)\" },\n        'one-shot': { title: 'One Shot', description: \"Triggers output to 'true' for 'interval' duration when 'trigger' input transitions from 'false' to 'true.  Output is reset to 'false' when 'reset' transitions from 'false' to 'true. 'interval' units can be configured from settings. Maximum interval setting is 587 hours. (See Figure A.).  If 'Retrigger While Output Is 'true'' setting is false, then 'fire' input transitions will have an effect when output is 'false'.\" },\n        'or': { title: 'OR', description: \"Performs a logical 'OR' operation (output 'true' when ANY input is 'true'). You can specify the number of inputs in the node settings.\" },\n        'ticker': { title: 'Ticker', description: \"While 'enable' is 'true', output will change to 'true' at every 'interval' period. If 'Generate False' setting is set to true, output will be 'false' for the second half of the 'interval' period. When 'enable' is 'false', output will be 'false'. 'interval' units can be configured from settings.  Maximum interval setting is 587 hours.  (See Figure A.)\" },\n        'toggle': { title: 'Toggle', description: \"When the 'input' transitions from 'false' to 'true', 'output' will switch between 'false'/'true'.   (See Figure A.)\" },\n        'xor': { title: 'XOR', description: \"Performs a logical 'XOR' operation (output 'true' when EITHER input is 'true', but not both). Limited to only 2 inputs.\" },\n    },\n    \"cumulocity\": {\n        \"cumulocity-device\": { title: 'Cumulocity Device', description: \"see https://cumulocity.com/guides/concepts/introduction/\" },\n        \"cumulocity-point\": { title: 'Cumulocity Point (History)', description: \"see https://cumulocity.com/guides/concepts/introduction/\" },\n        \"cumulocity-alarm\": { title: 'Cumulocity Alarm', description: \"see https://cumulocity.com/guides/concepts/introduction/\" },\n    },\n    'compare': {\n        'between': { title: 'Between', description: \"'output' is 'true' when 'in 1' is within the numeric range between 'from' value and 'to' value (exclusive), otherwise 'output' is 'false'.  'output' will be 'false' if either input is undefined. 'outp not' is always the opposite of 'output'.\" },\n        'equal': { title: 'Equal', description: \"'output equal' is 'true' when 'in 1' and 'in 2' are identical, otherwise 'output equal' is 'false'.  Can be used to compare boolean, numeric, and string values; it can also be used to compare 'null' values. 'output not equal' is always the opposite of 'out equal'.\" },\n        'greater-than': { title: 'Greater than', description: \"'out >' is 'true' when 'in 1' is greater than 'in 2', otherwise 'out >' is 'false'. 'out >=' is 'true' when 'in 1' is greater than or equal to 'in 2', otherwise 'out>=' is 'false'.  Both Outputs will be 'false' if either input is undefined.\" },\n        'hysteresis': { title: 'Hysteresis', description: \"Boolean 'output' based on 'input' in relation to 'risingEdge' and 'fallingEdge' setpoints.  There are 2 cases: 'risingEdge' greater than 'fallingEdge', and 'risingEdge' less than 'fallingEdge'. [For 'risingEdge' > 'fallingEdge'] => 'output' is 'true' when 'input' is greater than 'risingEdge'.  'output' is  'false' when 'input' is less than 'fallingEdge'. [For 'fallingEdge' < 'fallingEdge'] => 'output' is 'false' when 'input' is greater than 'risingEdge'.  'output' is 'true' when 'input' is less than 'fallingEdge'.  In both cases, when 'input' is between 'risingEdge' and 'fallingEdge', 'output' will remain in its current state.\" },\n        'less-than': { title: 'Less than', description: \"'out <' is 'true' when 'in 1' is less than 'in 2', otherwise 'out <' is 'false'.  'out <=' is 'true' when 'in 1' is less than or equal to 'in 2', otherwise 'out <=' is 'false'.  Both outputs will be 'false' if either input is undefined.\" },\n        'type-check': { title: 'Type Check (string)', description: \"'output' is 'true' when 'input' type matches 'Type to check' setting.  'isType' outputs the type of the 'input' value.\" },\n    },\n    \"connection\": {\n        \"dispatch-listener\": { title: \"Dispatch Listener\", description: \"Listens dispatch values\", iconImageUrl: Icons.aiIcon },\n        \"link-transmitter-single\": { title: \"Link Transmitter Single\", description: \"This node works in conjunction with link-receiver node, and provides a connection of nodes without the graphical wires. in # inputs will be sent to the corresponding out # output on link-receiver nodes with matching Channel Number settings. The number of inputs is configurable from settings.\", iconImageUrl: Icons.aiIcon },\n        \"link-receiver-single\": { title: 'Link Receiver Single', description: \"This node works in conjunction with link-transmitter node and provides a connection of nodes without the graphical wires. out # outputs will match the corresponding in # input from link-transmitter nodes with matching Channel Number settings. The number of outputs is configurable from settings.\", iconImageUrl: Icons.aiIcon },\n        \"link-transmitter\": { title: 'Link Transmitter', description: \"This node works in conjunction with link-receiver node, and provides a connection of nodes without the graphical wires. in # inputs will be sent to the corresponding out # output on link-receiver nodes with matching Channel Number settings. The number of inputs is configurable from settings.\" },\n        \"link-receiver\": { title: 'Link Receiver ', description: \"This node works in conjunction with link-transmitter node and provides a connection of nodes without the graphical wires. out # outputs will match the corresponding in # input from link-transmitter nodes with matching Channel Number settings. The number of outputs is configurable from settings.\" },\n        'hub': { title: 'Hub', description: \"This node merges multiple inputs into a single stream/output.  Any new 'input' ('in #') value will be passed to 'output'.  The number of inputs can be modified from settings.\" },\n    },\n    'container': {\n        'folder': { title: 'Folder', description: \"Contains other nodes\" },\n        'folder-input': { title: 'Folder Input', description: \"Input of the container\", iconImageUrl: Icons.aiIcon },\n        'folder-output': { title: 'Folder Output', description: \"Output of the container\", iconImageUrl: Icons.aiIcon },\n    },\n    'conversion': {\n        'bit-mask-single': { title: 'Bit Mask Single', description: \"A node to mask a single bit of a byte\" },\n        'bit-mask-multiple': { title: 'Bit Mask Multiple', description: \"A node to mask certain bits of a byte\" },\n        'int-to-bits': { title: 'Bit Split', description: \"A node to split an Int (or Int array) into all individual bits\\nAssuming all Ints are 8 bits (UINT8)\" },\n        'bool-to-int': { title: 'Bool-to-Int Conversion', description: \"This node converts a Boolean to a Number.\" },\n        'int-to-bool': { title: 'Int-to-Bool Conversion', description: \"This node converts a Number to a Boolean.\" },\n        'string-to-bool': { title: 'String-to-Bool Conversion', description: \"This node converts a String to a Boolean.\" },\n        'buffer-to-hex-string': { title: 'Buffer to hex string', description: \"\" },\n        'buffer-to-num': { title: 'Buffer To Num', description: \"A node to convert byte array (string or json array) (8bit words or 16bit words) to a num with Big-endian And Little-endian format. Example [16691, 34079] = 11.22 (BEB_BEW, FLOAT32)\" },\n        'convert-units': { title: 'Unit converter', description: \"This node converts units.\" },\n        'hex-string-to-buffer': { title: 'Hex string to Buffer', description: \"\" },\n        'int-to-buffer': { title: 'Int to Buffer', description: \"A node to convert an int to a buffer array to an int with Big-endian And Little-endian format. This node is used for testing data types\" },\n    },\n    'count': {\n        'any-event-counter': { title: 'Any Event Counter', description: \"count' increases by 1 every time an event occurs at 'input'. Any incoming value, including null, will be taken. 'count' will be reset to 0 when 'reset' transitions from 'false' to 'true.  toggle will alternate between true and false, changing each time count increases.\" },\n        'counter': { title: 'Counter', description: \"'count' increases by 1 every time 'countUp' transitions from 'false' to 'true.  'count' decreases by 1 every time 'countDown' transitions from 'false' to 'true.  'count' will be set to 'set value' when 'reset' transitions from 'false' to 'true.\" },\n        'interval-ramp': { title: 'Interval Ramp', description: \"output' changes at every 'interval' period, while 'enable' is set to 'true'. 'output' will change by the 'step' value on each change (if a full 'step' would cause the output to be greater than 'max', or less than 'min' it will be limited by 'max' or 'min' respectively). 'output' will first ramp up to 'max' then it will change directions and ramp down to 'min'. 'output' will be reset to 'min' when 'reset' transitions from 'false' to 'true. If Ramp Up Only setting is ticked, the ramp down stage will be bypassed and output will be reset back to min value when it reaches the max value. 'interval units can be configured from settings.  Maximum interval setting is 587 hours.\" },\n        'triggered-ramp': { title: 'Triggered Ramp', description: \"'output' changes on every time 'trigger' transitions from 'false' to 'true'. If 'count on true->false?' setting is enabled, 'output' will also change on 'false' to 'true' transition.   'output' will change by the 'step' value on each change (if a full 'step' would cause the output to be greater than 'max', or less than 'min' it will be limited by 'max' or 'min' respectively).  'output' will first ramp up to 'max' then it will change directions and ramp down to 'min'.  'output' will be reset to 'min' when 'reset' transitions from 'false' to 'true.\" },\n        'waveform': { title: 'Waveform', description: \"This node generates a sequence of numbers based on the selected settings; these sequences (waveforms) are of the form 'Ramp', 'Sine', 'Square', 'Triangle', and 'Sawtooth'. While 'enable' is 'true', 'output' will produce the next number in the sequence after every 'interval' duration. The period (how often the waveform pattern repeats) is defined by 'period'. The amplitude of the waveform is defined by 'amplitude'. The waveform can be inverted by setting 'Invert Output' to 'true' in settings. The waveform will reset to its starting position if 'reset' transitions from 'false' to 'true'.  'interval' and period units can be configured from settings.  Maximum 'interval' and period setting is 587 hours.\" },\n    },\n    'csv': {\n        'csv-merge-columns': { title: 'CSV Merge Columns', description: \"This node merges the columns of properly formatted CSV strings.  merge CSV string will be joined with the original CSV string.  The merge CSV columns will be added to the right of the original CSV columns.  null will be added to rows where no value exists for that column.  No error checking.\" },\n        'csv-merge-rows': { title: 'CSV Merge Rows', description: \"This node merges the rows of properly formatted CSV strings.  merge CSV string will be joined with the original CSV string.  The merge CSV rows will be added below the original CSV rows.  Only the original header titles will be kept.  No error checking.\" },\n    },\n    'custom-function': {\n        'fan-out-function': { title: 'Fan-Out Function', description: 'Evaluates a code block upon message reception, and sends results to multiple outputs. The incoming value is accessible through the variable named \"message\". Values can be emitted by using emit(index, value), where the index specifies the outlet. Emit can be called multiple times.' },\n        'merge-function': { title: 'Merge Function', description: 'Evaluates a code block upon message reception. The incoming values is accessible by index in the array named \"messages\". The \"return\" value will be emitted through the outlet, unless that value is null. The script runs every time any inlet receives a value.' },\n        'function': { title: 'Function', description: \"Evaluates a code block upon message reception. The incoming value is accessible through the variable named message. The return value will be emitted through the outlet. Null values are ignored.\" },\n        'uuid': { title: 'UUID', description: \"A node function to create a UUID identifier. A universally unique identifier (UUID) is an identifier standard used in software construction. A UUID is simply a 128-bit value. The meaning of each bit is defined by any of several variants. For human-readable display, many systems use a canonical format using hexadecimal text with inserted hyphen characters. For example : de305d54-75b4-431b-adb2-eb6b9e546014\" },\n    },\n    'dashboard': {\n        'button': { title: 'Button', description: \"Dashboard node which displays a push button on the dashboard.  When clicked it will send 'true' from the node 'output'.\" },\n        'label': { title: 'Label', description: \"Dashboard node which displays inputed values on the dashboard.\" },\n        'log': { title: 'Log', description: \"Dashboard node which displays a log of the values wired into 'input', these log entries have timestamps attached.  There is an option in settings to save the log entries to the Wires Database (DB).\" },\n        'progress': { title: 'Progress', description: \"Dashboard node which displays 'input' value from 0-100 on a progress bar on the dashboard.\" },\n        'slider': { title: 'Slider', description: \"Dashboard node which displays an input slider bar on the dashboard.  The user can move the slider bar knob to adjust the output between 0 and 100.  The slider can be overridden by wiring a Numeric into the node 'input'.\" },\n        'switch': { title: 'Switch', description: \"Dashboard node which displays a toggle switchon the dashboard.  When clicked it will switch the node 'output' between 'true' and 'false'.  The button text can be edited in settings.  The button can be overridden by wiring a Boolean into the node 'input'.\" },\n        'text-box': { title: 'Text-Box', description: \"Dashboard node which provides a user input text box on the dashboard.  The entered string is sent from the node 'output'.  The text-box can be overridden by wiring a String into the node 'input'.\" },\n        'chart': { title: 'Chart', description: \"Dashboard node which displays a chart of the values wired into 'input'.  Chart properties and types can be modified in settings.  There is an option in settings to save the chart entries to the Wires Database (DB).\" },\n    },\n    'debug': {\n        'console': { title: 'Console', description: \"Show value inside the console\" },\n        'comments': { title: 'Comments', description: \"This node is simply for adding some code comments\" },\n        'watch': { title: 'Watch', description: \"Show value of input\" },\n    },\n    'error': {\n        'link-check': { title: 'Link Error Check', description: \"This node is designed to check that links have the same value on both ends\" },\n        'output-check': { title: 'Output Error Check', description: \"This node is designed to check that outputs have a 'data' value\" },\n    },\n    'filter': {\n        'only-true': { title: 'Only True', description: \"This node filters input values. Only true values are passed to output.\" },\n        'only-false': { title: 'Only False', description: \"This node filters input values. Only false values are passed to output.\" },\n        'only-between': { title: 'Only Between', description: \"This node filters input values. Only Numeric input values between min and max are passed to output.\" },\n        'only-greater': { title: 'Only Greater', description: \"This node filters input values. Only Numeric input values greater than threshold are passed to output.\" },\n        'only-lower': { title: 'Only Lower', description: \"This node filters input values. Only Numeric input values less than threshold are passed to output.\" },\n        'only-equal': { title: 'Only Equal', description: \"This node filters input values. Only input values equal to match are passed to output.\" },\n        'prevent-null': { title: 'Prevent Null', description: \"This node filters input values. All input values are passed to output EXCEPT null.\" },\n        'prevent-equal': { title: 'Prevent Equal', description: \"This node filters input values. All input values are passed to output EXCEPT input values which are equal to match.\" },\n        'prevent-duplicates': { title: 'Prevent Duplicates', description: \"This node filters input values. All input values are passed to output EXCEPT input values which are equal to the previous input value.\" },\n        'reduce-duplicates': { title: 'Reduce Duplicates', description: 'This node reduces the number of duplicated transmitted values. When the value on the input is changed, the node sends it to the output and stops receiving the same value at a specified time interval. The values that come at this time and that are the same are simply ignored, but the last value will be stored if it is enabled in the settings. When the interval passes, the last value is sent to the output. This reduces the number of events, if they are sent too often, but ensures that the node will always send the last actual value. You can disable the sending of the last value in the settings of the node. This may be necessary if you do not want to receive messages late, but then it is not guaranteed that the nodes connected to this node will have the last actual value. If you activate Reset pin, the node will reset the timer and send the last value, if it is enabled in the settings.' },\n        'reduce-events': { title: 'Reduce Events', description: 'This node reduces the number of transmitted values. When the value on the input is changed, the node sends it to the output and stops receiving at a specified time interval. The values that come at this time are simply ignored, but the last value will be stored if it is enabled in the settings. When the interval passes, the last value is sent to the output. This reduces the number of events, if they are sent too often, but ensures that the node will always send the last actual value. You can disable the sending of the last value in the settings of the node. This may be necessary if you do not want to receive messages late, but then it is not guaranteed that the nodes connected to this node will have the last actual value. If you activate Reset pin, the node will reset the timer and send the last value, if it is enabled in the settings.' }\n\n\n    },\n    'history': {\n        'data-store': { title: 'Data Store', description: \"The data-store node is used to store history log data locally. The data-store node has limited memory so the capacity is limited to 50 log entries; beware of using too many data-store nodes as it could affect the operation of Wires. The history logs can be configured to log in UTC or local timezone, and the output format can be set to Array, CSV, or JSON. If Round up in increments of setting is used (not zero), then the timestamp will be rounded up to the nearest increment value step.\" },\n        'influx-db': { title: 'Influx-DB', description: \"A node for sending data to influxDB\" },\n        'influx-db-2': { title: 'Influx-DB-2', description: \"A node for sending data to influxDB v2\" },\n        'history': { title: 'History', description: \"The History node is used to store values to an external database. History logs (when enabled) are pushed to either the Nube DB or an Influx DB instance. A Point Name should be entered (under History settings) to identify the history by name. History logging options are Change Of Value (COV), Periodic, and Trigger Only. When set to COV, a log will be saved when the value changes by the COV Threshold from the last saved history value. When set to Periodic a log will be saved at every Logging Interval period. When set to either COV or Periodic a log entry can be saved by transitioning the histTrigger input from false to true. If only the histTrigger action is required, set the History Logging Mode to Trigger Only. If the history/history node is unable to send the history logs to the configured database (network connection issues, or incorrect configuration) then they will be stored locally, and storedHistCount will increase. Currently the local storage limit is set to 50 logs. The history/history node has limited memory so the capacity is limited to 50 log entries; beware of using too many history/history nodes as it could affect the operation of Wires. If Round up in increments of setting is used (not zero), then the timestamp will be rounded up to the nearest increment value step. If the input value is a Number, the Decimal Places setting will round the input value to the specified number of decimal places.\" },\n        'persistence': { title: 'Point Persistance', description: \"This node is used when you want to store the node output on a restart and also to not pass to the output any null values. While enable is true, output will send input value at every interval period. When enable is false, output will be null. interval units can be configured from settings. Maximum interval setting is 587 hours. On a trigger input the output will be sent even if the enable is set to false\" },\n        'point-tags': { title: 'Point Tag Node', description: \"A node generating HVAC tags\" },\n    },\n    \"hvac\": {\n        \"deadband\": { title: \"Deadband\", description: \"This node applies a Hysteresis function (see hysteresis node), with a deadband centered at setpoint. The ON direction can be reversed from settings.\" },\n        \"thermostat\": { title: \"Heat/Cool Thermostat\", description: \"This node functions as a Heat/Cool thermostat. While enable is set to true, the node will function as follows: CLG Mode will be set to true if input is greater than setpoint + CLG offset, CLG Mode will be set to false if input is less than setpoint. HTG Mode will be set to true if input is less than setpoint - HTG offset, HTG Mode will be set to false if input is greater than setpoint. If enable is false, CLG Mode and HTG Mode will both be set to false.\" },\n        \"pac-unit-control\": { title: \"PAC Unit Control\", description: \"This node functions as a Heat/Cool thermostat. While enable is set to true, the node will function as follows: CLG Mode will be set to true if input is greater than setpoint + CLG offset, CLG Mode will be set to false if input is less than setpoint. HTG Mode will be set to true if input is less than setpoint - HTG offset, HTG Mode will be set to false if input is greater than setpoint. If enable is false, CLG Mode and HTG Mode will both be set to false.\" },\n        \"PID\": { title: \"PID\", description: \"This node generates a PID output based on input parameter settings. Inputs: Enable, Setpoint, Process Variable, inP (Proportional), inI (Integral), inD (Derivative), Direction, Interval, MaxOut, MinOut, Manual, and Bias. If direction is true the PID will be a Direct loop (output increases when processVariable > setpoint), if direction is false the PID will be a Reverse loop (output increases when processVariable < setpoint). interval is the period that the PID output is re-calculated. bias value is added to output. manual will be the output value when enable is false. PID integral factor will be reset to 0 when reset transitions from false to true. 'interval units can be configured from settings. Maximum interval setting is 587 hours.\" },\n        \"toggle-duration\": { title: \"Toggle Duration\", description: \"This node accepts a pushButton input which triggers output to true for the runtime, or until pushButton transitions from false to true within the runtime period\" },\n        \"psychrometrics\": { title: \"Psychrometric Calcs (Metric/SI)\", description: \"This node provides psychrometric calculations based on a selection of: Dry Bulb Temp, Wet Bulb Temp, Dew Point, Relative Humidity, and Pressure. Inputs and Outputs as follows: (i) Dry bulb temperature in F [IP] or C [SI]; (i) Wet bulb temperature in F [IP] or C [SI]; (i) Atmospheric pressure in Psi [IP] or Pa [SI]; (o) Humidity ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]; (o) Dew point temperature in F [IP] or C [SI]; (o) Relative humidity [0-1]; (o) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]; (o) Moist air enthalpy in Btu lb [IP] or J kg [SI]; (o) Specific volume ft lb [IP] or in m kg [SI]. Input types can be selected from settings. Outputs will change based on selected input type. Unit system can be set from settings to be in: Metric/SI or Imperial/IP.\" },\n        \"energy-conversion\": { title: \"Energy Conversion (Wh)\", description: \"This node converts between Energy units watt-hour (Wh), kilowatt-hour (kWh), British Thermal Unit (Btu), calorie (cal), joule(J), and joule(kJ). Input type can be selected from settings. Outputs will change based on selected input type.\" },\n        \"power-conversion\": { title: \"Power Conversion (kW)\", description: \"This node converts between Power units kilowatt (kW), Tons of Refrigeration (tons), British Thermal Unit per hour (Btu/h), and Electrical Horsepower (hp). Input type can be selected from settings. Outputs will change based on selected input type.\" },\n        \"volume-conversion\": { title: \"Volume Conversion (L)\", description: \"This node converts between Volume units Litre (L), Cubic Metre (m), Cubic Foot (ft), and Gallon (gal). Input type can be selected from settings. Outputs will change based on selected input type.\" },\n        \"temperature-conversion\": { title: \"Temperature Conversion (C-> F)\", description: \"This node converts between Temperature units: Celsius, Fahrenheit, Kelvin, and Rankine . Input type can be selected from settings. Outputs will change based on selected input type.\" },\n        \"atmospheric-pressure\": { title: \"Atmospheric Pressure (Meters-> Pa)\", description: \"This node converts altitude to Atmospheric Pressure in various units: Pascal (Pa), Standard Atmosphere (atm), Bar (bar), and Pound-force per square inch (lbf/in2) . altitude units can be set from settings to be in: Metric/SI (Meters-> Pa), or Imperial/IP (Feet-> Psi).\" },\n        \"pressure-conversion\": { title: \"Pressure Conversion (Pa)\", description: \"This node converts between Pressure units: Pascal (Pa), Standard Atmosphere (atm), Bar (bar), and Pound-force per square inch (lbf/in2) . Input type can be selected from settings. Outputs will change based on selected input type.\" },\n        \"actuator-sizing\": { title: \"Actuator Sizing\", description: \"This node provides a calculation for sizing of damper actuators based on cross sectional area.\" },\n        \"k-factor\": { title: \"K Factor\", description: \"This node computes the K Factor (Airflow Multiplier) based on Airflow(air hood), Differential Pressure, and Duct Area. This is frequenty used in VAV applications.\" },\n        \"dp-airflow\": { title: \"DP Airflow\", description: \"This node computes the Airflow based on a Differential Pressure, Duct Area, and a K-Factor. This is frequenty used in VAV applications.\" },\n        \"lead-lag-staging\": { title: \"Lead Lag Staging\", description: \"This node provides enable signals to equipment in a Lead-Lag configuration.\" },\n        \"lead-lag-switch\": { title: \"Lead Lag Switch\", description: \"This node rotates the lead unit between A and B when 'rotate' is toggled.\" },\n\n\n    },\n    \"json\": {\n        \"array-builder\": { title: 'Array Builder', description: \"Outputs an array of values based on the input values\" },\n        \"array-builder-number\": { title: 'Array Builder Number', description: \"Outputs an array of values based on the input values as numbers\" },\n        \"array-combine\": { title: 'Array Combine', description: \"This node will combine two array into one array\" },\n        \"json-builder\": { title: 'JSON builder', description: \"JSON builder\" },\n        \"json-enum-builder\": { title: 'JSON enum builder', description: \"JSON enum builder\" },\n        \"json-filter\": { title: 'Json Filter', description: \"Filter a json object Example: msg.myKey\" },\n        \"json-obj-filter\": { title: 'Json Array Of Object Filter', description: \"Filter a json object Example: msg.myKey\" },\n        \"json-prevent-duplicates\": { title: 'Json Prevent Duplicates', description: \"This node takes a json input and will return the json input if a value has changed\" }, \n        \"json-filter-compare\": { title: 'Json Comparison Compare (Equals)', description: \"This node provides several functions to compare a JSON object input, with a Boolean output. Available comparison functions are: Equals, Includes, Starts With, and Ends With. The comparison function is selected from settings.\" },\n        \"json-filter-multiple\": { title: 'Json Filter Multiple', description: \"Filter a json object to multiple outputs. There are two Output Update options for whether you want to update all keys or not (ALL: update as `null` when the key value will not be on the JSON, FOUND: don't update values and leave as is when key key value doesn't exist\" },\n        \"json-checker\": { title: 'JSON Checker', description: \"Checks input for valid JSON format string.\" },\n        \"json-parse\": { title: 'Json Parse', description: \"Return JSON.stringify or a JSON.parse\" },\n        \"json-query\": { title: 'Json Query (JSONata)', description: \"Filter a json data using JSONata http://docs.jsonata.org/overview\" },\n        \"json-forEach-functions\": { title: 'Json ForEach functions', description: \"Return json object values.\" },\n        \"json-keys\": { title: 'Json Keys', description: \"Return json object values. Example: Object.keys(in)\" },\n    },\n    \"latch\": {\n        \"any-latch\": { title: 'Any data type Latch', description: \"The input value (Input value can be any data type) is passed to output when latch transitions from false to true; The output value is maintained until the next false to true transition.\" },\n        \"bool-latch\": { title: 'Boolean Latch', description: \"The Boolean input value is passed to output when latch transitions from false to true; The output value is maintained until the next false to true transition.\" },\n        \"num-latch\": { title: 'Numeric Latch', description: \"The Numeric input value is passed to output when latch transitions from false to true; The output value is maintained until the next false to true transition.\" },\n        \"string-latch\": { title: 'String Latch', description: \"The String input value is passed to output when latch transitions from false to true; The output value is maintained until the next false to true transition.\" },\n        \"set-reset\": { title: 'Set Reset', description: \"output will change to true when set is true, and reset is false. There are 2 cases when output will change to false: 1) reset is true, and 'set is false. 2) If the Reset when set=true setting is turned ON (Default), and reset and set are both true . If this setting is turned OFF, output will only change to false under Case 1) conditions.\" },\n    },\n    \"math\": {\n        \"add\": { title: 'Add', description: \"(output = in 1 + in 2 + ) output is the result of adding of all Numeric inputs. Input values can be set from settings. The number of inputs is configurable from settings.\" },\n        \"subtract\": { title: 'Subtract', description: \"(output = in 1 - in 2 - ) output is the result of subtracting each Numeric input in order. Input values can be set from settings. The number of inputs is configurable from settings.\" },\n        \"multiply\": { title: 'Multiply', description: \"(output = in 1 * in 2 * ) output is the result of multiplying each Numeric input in order. Input values can be set from settings. The number of inputs is configurable from settings.\" },\n        \"divide\": { title: 'Divide', description: \"(output = in 1 / in 2 / ) output is the result of dividing each Numeric input in order. Input values can be set from settings. The number of inputs is configurable from settings.\" },\n        \"absolute\": { title: 'Absolute', description: \"(output = |in 1|) output is the absolute value (positive) of the Numeric input.\" },\n        \"modulus\": { title: 'Modulus', description: \"(output = in 1 % in 2) output is the modulus of the Numeric inputs. Input values can be set from settings.\" },\n        \"power\": { title: 'Power', description: \"(output = in 1 ^ in 2) output is the result of in 1 to the power of in 2. Input values can be set from settings.\" },\n        \"flexible-math\": { title: \"Flexible Math\", description: \"\" },\n\n    },\n    \"math-advanced\": {\n        \"acos\": { title: 'Acos', description: \"acos(x) is the result of arccos(x). The Inverse Cosine function of input x.\" },\n        \"asin\": { title: 'Asin', description: \"asin(x) is the result of arcsin(x). The Inverse Sine function of input x.\" },\n        \"atan\": { title: 'Atan', description: \"atan(x) is the result of arctan(x). The Inverse Tangent function of input x.\" },\n        \"cbrt\": { title: 'Cbrt', description: \"cbrt(x) is the Cubic Root of input x.\" },\n        \"cos\": { title: 'Cos', description: \"cos(x) is the result of cos(x). The Cosine function of input x.\" },\n        \"exp\": { title: 'Exp', description: \"(exp(x) = E^x) exp(x) is the result of raising E (Eulers Number 2.71828) to the power of x. The Natural Exponential function.\" },\n        \"log\": { title: 'Logarithm (Base E)', description: \"log(x) is the result of log(x) with base E (Eulers Number 2.71828). The Natural Logarithmic function of input x.\" },\n        \"log10\": { title: 'Logarithm (Base 10)', description: \"log10(x) is the result of log(x) with base 10.\" },\n        \"sin\": { title: 'Sin', description: \"sin(x) is the result of sin(x). The Sine function of input x.\" },\n        \"sqrt\": { title: 'Sqrt', description: \"sqrt(x) is the Square Root of input x.\" },\n        \"tan\": { title: 'Tan', description: \"tan(x) is the result of tan(x). The Tangent function of input x.\" },\n    },\n    \"math-trigger\": {\n        \"trigger-add\": { title: 'Trigger Add', description: \"When trigger transitions from false to true, output is updated with the result of the addition of all inputs (in 1 + in 2 + ). Input values can be set from settings. The number of inputs is configurable from settings.\" },\n        \"trigger-subtract\": { title: 'Trigger Subtract', description: \"When trigger transitions from false to true, output is updated with the result of the subtraction of all inputs (in 1 - in 2 - ). Input values can be set from settings. The number of inputs is configurable from settings.\" },\n        \"trigger-multiply\": { title: 'Trigger Multiply', description: \"When trigger transitions from false to true, output is updated with the result of the multiplication of all inputs (in 1 * in 2 * ). Input values can be set from settings. The number of inputs is configurable from settings.\" },\n        \"trigger-divide\": { title: 'Trigger Divide', description: \"When trigger transitions from false to true, output is updated with the result of the division of all inputs (in 1 / in 2 / ). Input values can be set from settings. The number of inputs is configurable from settings.\" },\n        \"trigger-modulus\": { title: 'Trigger Modulus', description: \"When trigger transitions from false to true, output is updated with the result of the modulus of the inputs (in 1 % in 2). Input values can be set from settings.\" },\n        \"trigger-power\": { title: 'Trigger Power', description: \"When trigger transitions from false to true, output is updated with the result of in1 to the power of in2 (in 1 ^ in 2). Input values can be set from settings.\" },\n    },\n    \"miscellaneous\": {\n        \"geo-hash\": { title: 'Geohash decode/encode', description: \"A function that encodes lat,lon to and from a geo-hash\" },\n        \"num-series-generator\": { title: 'Numeric Series Generator', description: \"\" },\n        \"append-to-strings\": { title: 'Append To Strings', description: \"\" },\n    },\n    \"network\": {\n        \"network-ping\": { title: 'Network Ping', description: \"Ping's an IP on the network, Example inputs '192.168.1.1', 'google.com', 'aidan-android'\" },\n        \"network-scan\": { title: 'Network Scan', description: \"A node for doing an IP and MAC network scan. Returns JSON output\" },\n    },\n    \"nube\": {\n        \"get-schedules\": { title: 'Get-Schedules', description: \"This node is used to fetch schedules from the Nube dashboard. The Get-Schedules node will output all schedules from the device; Specific schedule selection is done on the Schedule-Checker node. Interval (set from settings) is how often the node will re-check for schedule changes (minimum 10 seconds). In order for the get-schedules node to work, there must be a `system/platform node in the main container (default editor pane) and there must be a deviceID in the system/platform node settings, It is recommended that the API-Schedule node is used in conjunction with a filter/prevent-null node to maintain the last successful schedule read in the case that the API-Login node becomes disconnected. 'interval units can be configured from settings. Maximum interval setting is 587 hours.\" },\n    },\n    \"num-transform\": {\n        \"round\": { title: 'Round (Decimal Place)', description: \"output is the input value rounded to the configured number of decimal places. The number of decimal places can be configured from settings (limited to 5 decimal places).\" },\n        \"floor\": { title: 'Floor', description: \"output is the input value rounded DOWN to the nearest integer.\" },\n        \"ceil\": { title: 'Ceil', description: \"output is the input value rounded UP to the nearest integer.\" },\n        \"limit\": { title: 'Limit', description: \"output follows the input value when it is between the min and max values. If input is greater than the max value, output will be the max value. If input is less than the min value, output will be the min value. max and min values can be configured from settings.\" },\n        \"scale\": { title: 'Scale', description: \"Performs a linear interpolation of the input value based configured settings. When input value is between in-min and in-max it is linearly interpolated between out-min and out-max. If input is greater than the in-max value, output will be the out-max value. If input is less than the in-min value, output will be the out-min value. in-max, in-min, out-max, and out-min values can be configured from settings.\" },\n        \"linear-shaper\": { title: 'Linear shaper', description: \"Performs a linear interpolation of the input value between configured inflection points. The number of inflection points can be configured in settings. The inflection points will be evenly distributed from 0-100. Values for each inflection point can be wired in, or set from settings. When the input value is between 0 and 100 the output value will be the linear interpolation of the input value between the surrounding inflection point values.\" },\n        \"fade\": { title: 'Fade', description: \"This node makes a smooth transition from from to to over the interval period when enable transitions from false to true; after this interval period output will match the to value while enable is true. During the interval period, the rate of output change cannot be changed. Once the interval period is complete out=to becomes true until enable becomes false again.\" },\n        \"rate-limit\": { title: 'Rate-Limit', description: \"This node makes a rate limited transition from its current output value to the input value. When enable is true, output is permitted to change towards the input value based on settings values. output can change by step size every interval period. output will be null when enable is false.\" },\n    },\n    \"point\": {\n        \"bool-constant\": { title: 'Boolean Constant', description: \"Outputs a Boolean value set from settings. Can also output null.\" },\n        \"num-constant\": { title: 'Numeric Constant', description: \"Outputs a Numeric value set from settings. Can also output null by leaving the settings field blank.\" },\n        \"string-constant\": { title: 'String Constant', description: \"Outputs a String value set from settings. Can also output null by leaving the settings field blank.\" },\n        \"json-constant\": { title: 'Json Constant', description: \"Outputs a JSON value set from settings. Can also output null by leaving the settings field blank. Example {name:John Hill, age:31} or [1,2,3,4]\" },\n        \"bool-writable\": { title: 'Boolean Writable (Priority)', description: \"Outputs the highest priority, non-null, Boolean input. Highest priority is in 1 then in 2 and so on. Input values can also be wired in, or set from settings. The number of inputs can be modified from settings.\" },\n        \"num-writable\": { title: 'Numeric Writable (Priority)', description: \"Outputs the highest priority, non-null, Numeric input. Highest priority is in 1 then in 2 and so on. Input values can also be wired in, or set from settings. The number of inputs can be modified from settings.\" },\n        \"string-writable\": { title: 'String Writable (Priority)', description: \"Outputs the highest priority, non-null, String input. Highest priority is in 1 then in 2 and so on. Input values can also be wired in, or set from settings. The number of inputs can be modified from settings.\" },\n        \"generic-point\": { title: 'Generic Point', description: \"This node is to test the generic point input types\" },\n    },\n    \"protocols/misc\": {\n        \"email\": { title: 'Email', description: \"Once configured (in settings) with the sender email server details (email and password) for Gmail, Hotmail, Outlook365, or Yahoo accounts: This node will attempt to send a new email when trigger transitions from false to true. The String recipient value will be the to: email address; The String subject value will be the email subject; and the String message value will be the email body. The response output will be true if the email is sent successfully. The error output will be an error message String if there is an error sending the email.\" },\n        \"serial-connector\": { title: 'Serial Connector', description: \"This node reads/writes serial data from/to the onboard serial ports.  These ports can be RS485 ports, or Rubix Compute wireless interface ports.  Once the Port and Baud Rate settings are configured, when enabled, the output will be raw messages received over the configured serial port.  Any values written to the writeValue input will be sent on the configured serial port\" },\n    },\n    \"protocols/http\": {\n        \"dynamic-http-client\": { title: \"Dynamic HTTP client\", description: 'Sends a HTTP(S) request by executing a \"axios\" configuration JSON object. The request will be triggered when a configuration object is received on the inlet. The configuration object must be the \"config\" object of the \"axios\" library. For a list of all possible options, see here: https://github.com/axios/axios#request-config' },\n        \"http-client\": { title: \"HTTP client\", description: 'Sends a HTTP(S) request to the specified URL, using the specified request method. The request will be triggered when data is received on the inlet. For PUT/POST/PATCH requests, the received data string will be submitted as the request body.' }\n    },\n    \"protocols/nube\": {\n        \"edge-28-network\": { title: 'Edge 28 Network', description: \"The is node is used for reading and writing values to the edge-io-28. This node uses an internal rest-api to talk to the edge-io-28. No details need to be set\", iconImageUrl: Icons.frog},\n        \"edge-28-lora-reset\": { title: 'Edge IO 28 LORA Map Reset', description: \"The is node is used in conjunction with the edge-io-28 when using the lora-Connect. This node uses an internal rest-api to rest a LORA Map gateway connected to an edge-io-28 controller. The reason for this nodes is to give the user more control over the nube hardware. When a trigger is activated on the node input or the interval timer is triggered the lora-modules will be reset. The reboot of the module only takes 1000ms to restart \" },\n        \"edge-28-input\": { title: \"Edge IO 28 Input\", description: EdgeHelp.inputsDesc },\n        \"edge-28-output\": { title: \"Edge IO 28 Output\", description: EdgeHelp.outputsDesc }\n    },\n    \"protocols/bacnet\": {\n        \"bacnet-network\": { title: 'BACnet Network', description: \"This node acts as a container for bacnet-device nodes. All bacnet-device nodes should be added within the bacnet-network container. IP configuration for the BACnet network connection are set from settings. The bacnet-network node can also be used to perform a BACnet Discover (WhoIs).\" },\n        \"bacnet-device\": { title: 'BACnet Device', description: \"This node acts as a container for bacnet-point nodes. All bacnet-device nodes should be added within the bacnet-network container.  All bacnet-point nodes should be added within a bacnet-device container node.  Configuration of BACnet device connections are set from settings.  Both IP and MSTP BACnet devices can be configured from the bacnet-device settings.\" },\n        \"bacnet-point\": { title: 'BACnet Point', description: \"All bacnet-point nodes should be added within the bacnet-device container node. Configuration of BACnet points are set from settings.  If the bacnet-network, and bacnet-device are configured correctly, the BACnet points will be available to select from the Select a point setting; otherwise the point can be set manually. For information on History settings, see History/History node. Configuration is the same for bacnet-point histories.\" },\n    },\n    \"protocols/bacnet-server\": {\n        \"bacnet-server\": { title: 'BACnet Server', description: \"A BACnet server is used to host BACnet points to be read/written by other BACnet devices. The bacnet-server node acts as a container for bacnet-server-point nodes. All bacnet-server-point nodes should be added within the bacnet-server container. IP configurations for the BACnet server connection are set from settings.\" },\n    },\n    \"protocols/lora-raw\": {\n        \"lora-sensor-decoder\": { title: 'Lora Sensor Decoder (Droplet | ALL)', description: \"This node is used to decode raw serial input messages to LORA sensor values. It should be used in conjunction with the protocols/serial-connector node. If a nodeID is set, only messages from matching LORA sensors will be output; if no nodeID is set, all valid LORA sensor messages will be output. Outputs that are not present in the raw serial input message will be null. lowBatteryAlm output will be true if the LORA sensor has a battery voltage value less than the Low battery warning voltage setting; otherwise it will be false. watchdog output will be true if there has been no valid message from the nodeID LORA sensor for the Watchdog Delay; otherwise watchdog output will be false. Maximum Watchdog Delay setting is 587 hours. This node can be used for decoding Nube Droplet sensors, and Nube MicroEdge sensors. The sensor type can be selected from settings.\" },\n        \"lora-raw-two-way-in\": { title: 'Nube LoRaRAW Two Way In', description: \"This node parses Nubes LoRa Two Way protocol\" },\n        \"lora-raw-two-way-out\": { title: 'Nube LoRaRAW Two Way Out', description: \"This node compiles points to Nubes LoRa Two Way protocol\" },\n        \"lora-raw-filter\": { title: 'Nube LoRaRAW Filter', description: \"This node filters differe nube lora protocols\" },\n        \"lora-raw-two-way-test\": { title: 'Nube LoRaRAW Two Way Test Node', description: \"Acts as the transport layer for testing only\" },\n    },\n    \"protocols/lora-raw-v2\": {\n        \"lora-raw-points-in\": { title: 'Nube LoRaRAW Points In', description: \"This node parses Nubes LoRa Points protocol payload\" },\n        \"lora-raw-points-out\": { title: 'Nube LoRaRAW Points Out', description: \"This node compiles points to Nubes LoRa Points protocol\" },\n        \"lora-raw-sensor-decoder-legacy\": { title: 'Lora Sensor Decoder (Droplet | ALL)', description: \"LEGACY DECODER. PROVIDES DECRYPTION AS NEW FIRMWARE DOESNT. This node is used to decode raw serial input messages to LORA sensor values. It should be used in conjunction with the protocols/serial-connector node. If a nodeID is set, only messages from matching LORA sensors will be output. If no nodeID is set, all valid LORA sensor messages will be output. Outputs that are not present in the raw serial input message will be null. lowBatteryAlm output will be true if the LORA sensor has a battery voltage value less than the Low battery warning voltage setting otherwise it will be false. watchdog output will be true if there has been no valid message from the nodeID LORA sensor for the Watchdog Delay otherwise watchdog output will be false. Maximum Watchdog Delay setting is 587 hours. This node can be used for decoding Nube Droplet sensors, and Nube MicroEdge sensors. The sensor type can be selected from settings.\" },\n    },\n    \"protocols/modbus\": {\n        \"modbus-server\": { title: 'Modbus Server', description: \"This node is used to create a modbus server. Once the Port and Modbus Address settings are configured, when enabled, this node will create a Local Modbus TCP/IP Server. The points on this created Modbus Server can be written to and read from with other Modbus Nodes, or from another device.\" },\n        \"modbus-rtu-network\": { title: 'Modbus 485 Network', description: \"This node is used as a modbus TCP or RTU(rs485) modbus network. The device and points for the device will be added inside this node (right click and **open** on the network node to add the device and points)\" },\n        \"modbus-device\" : {title: \"Modbus Device\", description: \"This node is used as a modbus TCP or RTU(rs485) modbus device. The node is to be added inside a modbus network node (The network details will be added in the network node). The points for the device will be added inside this node\"},\n        \"modbus-485-network\" : {title: \"Modbus 485 Network\", description: \"This node is used as a modbus TCP or RTU(rs485) modbus network. The device and points for the device will be added inside this node (right click and **open** on the network node to add the device and points)\"},\n        \"modbus-point\" : {title: \"Modbus Point\", description: \"This node is used as a modbus device point. The points for the device will be added inside the device node (right click and **open** on the network node to add the device and points) \"},\n    },\n    \"protocols/mqtt\": {\n        \"client\": { title: 'MQTT client', description: \"This node connects to an MQTT Broker, subscribes to topics, and can publish values to topics. Once configured (in settings) with a valid Broker URL, Broker Port, and Authentication (if required), this node will read and write to MQTT topics when enable is true. Number of topics, and the topic names can be configured from settings. Each topic will have a corresponding input and output.\" },\n        \"client-single\": { title: 'MQTT Single Topic client', description: \"This node connects to an MQTT Broker, subscribes to topics, and can publish values to topics. Once configured (in settings) with a valid Broker URL, Broker Port, and Authentication (if required), this node will read and write to MQTT topics when enable is true. Each topic will have a corresponding input and output.\" },\n        \"mqtt-network\": { title: 'Folder', description: \"This node acts as a container for MQTT nodes. All MQTT nodes should be added within the MQTT-Network container. The MQTT broker details can be configured in settings.\" },\n        \"mqtt-topic-extractor\": { title: 'MQTT topic extractor', description: \"The is node is used to extract sections out of an MQTT topic\" },\n        \"topic-builder\": { title: 'MQTT Topic Builder', description: \"This node takes String inputs and concatenates/joins them with / to produce an MQTT Topic output. The number of inputs can be modified from settings.\" },\n        \"mqtt-point\": { title: 'MQTT Point', description: 'Mqtt Point Node includes MQTT publisher and subscriber inside. This node connects to an MQTT Broker, subscribes to a topic, and can publish values once we enable the node.' },\n    },\n    \"protocols/mqtt-broker\": {\n        \"mqtt-broker\": { title: 'MQTT Broker', description: \"\" },\n    },\n    \"protocols/social\": {\n        \"slack-bot\": { title: \"Slack Bot\", description: \"Slack\" },\n        \"sms-twilio\": { title: \"Twilio SMS\", description: \"Send a sms without the need of a sim card using twilio\" },\n    },\n    \"protocols/websocket\": {\n        \"websocket\": { title: \"WebSocket\", description: \"WebSocket Client for request/listen output\" },\n    },\n    \"schedule\": {\n        \"weekly-schedule\": { title: 'Weekly Schedule', description: \"Weekly Schedule\" },\n        \"event-schedule\": { title: 'Event Schedule Node', description: \"Event Schedule Node\" },\n        \"schedule-merge\": { title: 'Merge Schedule', description: \"Merge Schedule\" },\n        \"schedule-checker\": { title: 'Schedule Checker (unconfigured)', description: \"This node checks the API-Schedule output string for active schedules that match the selected Schedule Name setting. output will be true when the matching schedule is active and enable is true; otherwise output will be false. nextStart is the timestamp output of the next scheduled start time. nextStop is the timestamp output of the next scheduled stop time. lastCheck is the timestamp output of the last time a schedule check was run. error output will be true if there is an error while checking the schedule input string; otherwise error will be false. The frequency that schedules are checked can be modified with the Schedule Check Interval setting (set in millis). The Timestamp Output Format setting can be adjusted to output timestamps as strings or as Epoch Timestamps. String timestamps will be displayed in the timezone specified by the Timezone setting.\" },\n    },\n    \"statistics\": {\n        \"min-max-avg\": { title: 'Min-Max-Avg', description: \"Outputs the Minimum, Maximum, and Average values of all the (non null) Numeric inputs. The number of inputs and their values can be modified from settings.\" },\n        \"avg\": { title: 'Average', description: \"Outputs the Average, Count, and Sum values of all the (non null) Numeric inputs. The number of inputs and their values can be modified from settings.\" },\n        \"min\": { title: 'Min', description: \"Outputs the Minimum value of all the (non null) Numeric inputs. The number of inputs and their values can be modified from settings.\" },\n        \"max\": { title: 'Max', description: \"Outputs the Maximum value of all the (non null) Numeric inputs. The number of inputs and their values can be modified from settings.\" },\n        \"sum\": { title: 'Sum', description: \"Outputs the Sum of all the (non null) Numeric inputs. The number of inputs and their values can be modified from settings.\" },\n        \"median\": { title: 'Median', description: \"Outputs the Median value of all the (non null) Numeric inputs. The number of inputs and their values can be modified from settings.\" },\n        \"range\": { title: 'Range', description: \"Outputs the Range value (max-min) of all the (non null) Numeric inputs. The number of inputs and their values can be modified from settings.\" },\n        \"rank\": { title: 'Rank (Highest)', description: \"Outputs the ranked highest (max to min), or ranked lowest (min to max) of all the (non null) Numeric inputs. The number of inputs and the number of outputs can be modified from settings.\" },\n        \"stats-all\": { title: 'All Stats', description: \"Outputs the Maximum, Minimum, Range, Sum, Mean, Median, Modes, Variance, Standard Deviation, Mean Absolute Deviation, and Z Score values of all the (non null) Numeric inputs. The number of inputs and their values can be modified from settings.\" },\n    },\n    \"streams\": {\n        \"stream-average\": { title: 'Stream Average', description: \"'output' is the average of all received Numeric 'input' value.  'output' is reset when 'reset' transitions from 'false' to 'true'.\" },\n        \"stream-highest\": { title: 'Stream Highest', description: \"output is the highest received Numeric input value. output is reset when reset transitions from false to true.\" },\n        \"stream-lowest\": { title: 'Stream Lowest', description: \"'output' is the lowest received Numeric 'input' value.  'output' is reset when 'reset' transitions from 'false' to 'true'.\" },\n        \"stream-sum\": { title: 'Stream Sum', description: \"output is the sum of all received Numeric input value. output is reset to 0 when reset transitions from false to true.\" },\n        \"stream-merge\": { title: 'Stream Merge', description: \"This node merges multiple inputs into a single stream/output. Any new input (in #) value will be passed to output. The number of inputs can be modified from settings.\" },\n        \"gate\": { title: 'Message Gate', description: \"This node can allow(gate open) or block(gate close) the transfer of the input to output. When open is true, input is passed to output. When open is false, output will maintain its last value. If Send null when closed setting is ticked, output will be null when open is false.\" },\n        \"stack\": { title: 'Stack', description: \"input values are stored in a list. Stored input values are passed to output one by one each time trigger transitions from false to true. input values are passed to output in a last-in, first-out order. Stored input values are deleted when clear transitions from false to true. count is the number of stored input values.\" },\n        \"queue\": { title: 'Queue', description: \"input values are stored in a list. Stored input values are passed to output one by one each time trigger transitions from false to true. input values are passed to output in a first-in, first-out order. Stored input values are deleted when clear transitions from false to true. count is the number of stored input values.\" },\n        \"stream-delay\": { title: 'Stream Delay', description: \"input values are passed to output after a delay period. Each input value is delayed by the same delay period. delay units can be configured from settings. Maximum delay setting is 587 hours.\" },\n        \"stream-delay-meter\": { title: 'Stream Delay meter', description: \"This node measures the delay between the incoming events. Any value sent to input (excluding null) will be accepted. ms output is the time between the lastest input, and the previous input. ms is reset when reset transitions from false to true. ms output is in millis.\" },\n        \"frequency-meter\": { title: 'Frequency meter', description: \"This node measures the frequency of the incoming input events. Any value sent to input (excluding null) will be accepted. events/sec output is the average rate received input values. events/sec is reset when reset transitions from false to true.\" },\n        \"flatline\": { title: 'Flatline', description: \"This node checks to see if the input has not changed for the 'interval' period.\" },\n\n    },\n    \"string\": {\n        \"string-acronyms\": { title: 'String Case Acronyms', description: \"This node will upper case any common HVAC Acronyms, For example it will Upper Fcu to FCU\" },\n        \"string-compare\": { title: 'String Compare', description: \"This node provides several functions to compare 2 String inputs, with a Boolean output. Available comparison functions are: Equals, Includes, Starts With, and Ends With. The comparison function is selected from settings.\" },\n        \"cut-substring\": { title: 'Substring Cut', description: \"This node outputs a portion of a String input defined by the Numeric start and length parameters. String output is the portion of input starting at index (position) start and continating the next length value of characters. start value of 0 is the beggining of the string. If a negative start value is given, the substring will be selected from the end of the input string (eg. -1 is the end of the input; -2 is the second to last character of the input, ).\" },\n        \"string-join\": { title: 'String Join', description: \"This node takes String inputs and concatenates/joins them to produce a String output. The number of inputs can be modified from settings.\" },\n        \"string-length\": { title: 'String Length', description: \"output is the number of characters in the given String input value.\" },\n        \"string-index-of\": { title: 'String Index Of', description: \"This node takes String input and searchFor; Numeric output is the index(position) of the first instance of searchFor in input. Index of 0 is the begginning of the input string.\" },\n        \"char-at-index\": { title: 'Char at Index', description: \"output is the character at the Numeric index (position) of String input. The first character of the String input is index 0. If index is negative, characters will be selected from the end of the input string (eg. -1 is the last character; -2 is the second to last character). output will be null on an invalid index.\" },\n        \"string-split\": { title: 'String Split', description: \"Portions of the String input are sent to the String output sequentially when next trasitions from false to true; these output strings are portions of the input string split by the String separator value. The Numeric left outputs the number of output strings remaining to be sent. When start transitions from false to true, the output string will go back to the first portion of the input string.\" },\n        \"string-case\": { title: 'String Case (Lower)', description: \"output is the input string with all characters changed to either upper or lower case. Upper or Lower case can be selected from settings.\" },\n        \"char-to-ascii\": { title: 'Char to ASCII Code', description: \"output is the ASCII code of the first character of a given String input value.\" },\n        \"ascii-to-char\": { title: 'ASCII Code to Char', description: \"output is the character of the given Numeric ASCII code input value.\" },\n        \"string-buffer\": { title: 'String Buffer', description: \"\" },\n    },\n    \"switch\": {\n        \"bool-switch\": { title: 'Boolean Switch', description: \"Boolean switch passes corresponding Boolean input to output. If switch is true, Boolean inTrue value will be passed to output inTrue and inFalse values can be set in settings.\" },\n        \"num-switch\": { title: 'Numeric Switch', description: \"Boolean switch passes corresponding Numeric input to output. If switch is true, Numeric inTrue value will be passed to output inTrue and inFalse values can be set in settings.\" },\n        \"string-switch\": { title: 'String Switch', description: \"Boolean switch passes corresponding String input to output. If switch is true, String inTrue value will be passed to output inTrue and inFalse values can be set in settings.\" },\n        \"bool-select\": { title: 'Boolean Select', description: \"Numeric integer select passes corresponding Boolean input to output. If select is 2, in 2 will be passed to output (likewise for other integer select values). If the select value does not have a corresponding in # value, output value will be null. The number of inputs and their values can be modified from settings.\" },\n        \"num-select\": { title: 'Numeric Select', description: \"Numeric integer select passes corresponding Numeric input to output. If select is 2, in 2 will be passed to output (likewise for other integer select values). If the select value does not have a corresponding in # value, output value will be null. The number of inputs and their values can be modified from settings.\" },\n        \"string-select\": { title: 'String Select', description: \"Numeric integer select passes corresponding String input to output. If select is 2, in 2 will be passed to output (likewise for other integer select values). If the select value does not have a corresponding in # value, output value will be null. The number of inputs and their values can be modified from settings.\" },\n        \"bool-output-select\": { title: 'Boolean Output Select', description: \"Numeric integer select passes Boolean input to the corresponding Boolean output. If select is 2, input will be passed to out 2 (likewise for other integer select values). If the select value does not have a corresponding out # value, no values will be passed. The number of outputs can be modified from settings.\" },\n        \"num-output-select\": { title: 'Numeric Output Select', description: \"Numeric integer select passes Numeric input to the corresponding Numeric output. If select is 2, input will be passed to out 2 (likewise for other integer select values). If the select value does not have a corresponding out # value, no values will be passed. The number of outputs can be modified from settings.\" },\n        \"string-output-select\": { title: 'String Output Select', description: \"Numeric integer select passes String input to the corresponding String output. If select is 2, input will be passed to out 2 (likewise for other integer select values). If the select value does not have a corresponding out # value, no values will be passed. The number of outputs can be modified from settings.\" },\n    },\n    \"system\": {\n        \"host-info\": { title: 'Host Info', description: \"This node outputs various linux system information. More Info: https://docs.nube-iiot.com/en/nodes/home#host-info\" },\n        \"platform\": { title: 'Platform', description: \"This node provides a node to read the settings for the Wires instance.\" },\n        \"system-info\": { title: 'System Info ', description: \"This node outputs various linux system information. Once a system property has been selected from settings, a false to true transition on the trigger input will update the output. error will display error information if the request is not successful.\" },\n        \"beep\": { title: 'Beep', description: \"This node plays a default system sound on the server (not in the browser) when trigger transitions from false to true.\" },\n        \"execute-cmd\": { title: 'Execute Command', description: \"This node triggers commands to be run on the linux host. The string input command input will be run when trigger transitions from false to true. NOTE: ONLY USE THIS NODE IF YOU KNOW EXACTLY WHAT YOU ARE DOING. SYSTEM COMMANDS CAN CHANGE SYSTEM CONFIGURATION WHICH CANNOT BE FIXED FROM WITHIN WIRES. YOU COULD BREAK WIRES, THE CONTROLLER, OR YOUR PC.\" },\n        \"flow-export\": { title: 'Flow Export', description: \"A node to export the wires flow to JSON when trigger values gets changed to true from different state\" },\n        \"network-interface-edge-28\": { title: 'Network Interface EdgeIO-28', description: \"This node is used to configure the network (IP) interface for edge28 controllers. Changes made to settings will only be saved if Save changes on save is toggled ON. In some cases a reboot will be required to save the changes, if Reboot is toggled ON, then clicking save will reboot the controller. NOTE: Making changes on a remote device could cause the device to become inaccessible.\" },\n        \"network-interfaces\": { title: 'Network Interfaces', description: \"This node is used to configure the network (IP) interfaces for the device. Changes made to settings will only be saved if Save changes on save is toggled ON. In some cases a reboot will be required to save the changes, if Reboot is toggled ON, then clicking save will reboot the controller. NOTE: Making changes on a remote device could cause the device to become inaccessible.\" },\n        \"system-build-version\": { title: 'Build Versions', description: \"A node for return the build versions of wires and nodejs\" },\n        \"file\": { title: \"File\", description: \"This node can read and write any file on the disk. Send the file name to the input named File Name. The path can be omitted. With logic inputs named Read, Write, Clear you can perform the requested operation. The input named Text set a text value to be written to the file. The contents of the file will be sent to the output.\" },\n        \"json-file\": { title: \"Json File\", description: \"This node can read and write Json file on the disk. Send the file name To the input named File Name. The path can be omitted. With logic inputs named Read, Write, Delete File you can perform the requested operation. Specify the key that you want to read/write. The value that you want to write, send to Value input. Read value will be sent to the output.\" },\n    },\n    \"time\": {\n        \"conversion\": { title: 'Time Conversion (min)', description: \"This node converts between Time units Days(day), Hours(hour), Minutes(min), Seconds(sec), and Milliseconds(milli). Input type can be selected from settings. Outputs will change based on selected input type. The number of decimal places that output values have can be set from the Precision setting.\" },\n        \"conversion-plus\": { title: 'Time Conversion Json', description: \"This node will let you convert a timestamp or unix (epoch) timestamp into date and time parts\" },\n        \"timezone-conversion\": { title: 'Timezone Conversion', description: \"The is node is used to convert two timestamps\" },\n        \"clock\": { title: 'Clock', description: \"Outputs the System Time in various forms. Standard outputs are: Time(timeString) Hours(hour), Minutes(min), and Seconds(sec). There are also Advanced outputs which can be enabled from settings. The Advanced outputs are: Milliseconds(millis), Time String including timezone (longString), Timezone Offset from UTC(TZOffset), and Unix Timestamp (epoch). interval is the output update frequency. interval units can be configured from settings. Maximum interval setting is 587 hours.\" },\n        \"date\": { title: 'Date', description: \"Outputs various date information based on the system time. String dateString is the current date. String dayString is the current day of the week. Numeric dayOfWeek is an integer between 0 and 6 corresponding to Sunday(0) through Saturday(6). Numeric date is and integer of the current date. Numeric month is an integer of the current month Jan(0) - Dec(12). Numeric year is an integer of the current year.\" },\n        \"date-difference\": { title: 'Date Difference', description: \"The is node is used to compare the difference between two timestamps\" },\n        \"stopwatch\": { title: 'Stopwatch', description: \"This node converts between Time units Days(day), Hours(hour), Minutes(min), Seconds(sec), and Milliseconds(milli). Input type can be selected from settings. Outputs will change based on selected input type. The number of decimal places that output values have can be set from the Precision setting. interval units can be configured from settings. Maximum interval setting is 587 hours.\" },\n        \"cron-interval\": { title: 'Cron Interval', description: \"This node triggers output to transition from false to true for 500 milliseconds at a selected times/intervals, configured in settings. info will show information about the status of the node. cronExpression represents the configured scheduled timings in Cron notation. cronDescription represents the configured scheduled timings in plain english. nextExecution is a String output representing the datetime that the next message will be sent from output. For more information on Cron Expressions see: (https://www.freeformatter.com/cron-expression-generator-quartz.html)\" },\n        \"cron-weekly\": { title: 'Cron Weekly', description: \"This node triggers output to transition from false to true for 500 milliseconds at a configured time on each selected day. Days and Times are set in settings. info will show information about the status of the node. cronExpression represents the configured scheduled timings in Cron notation. cronDescription represents the configured scheduled timings in plain english. nextExecution is a String output representing the datetime that the next message will be sent from output. For more information on Cron Expressions see: (https://www.freeformatter.com/cron-expression-generator-quartz.html)\" },\n        \"cron-expression\": { title: 'Cron Expression', description: \"This node triggers output to transition from false to true for 500 milliseconds at times triggered by the input CRON expression. info will show information about the status of the node. cronDescription represents the configured scheduled timings in plain english. nextExecution is a String output representing the datetime that the next message will be sent from output. For more information on Cron Expressions see: (https://www.freeformatter.com/cron-expression-generator-quartz.html)\" },\n        \"timestamp-generator\": { title: 'Timestamp Generator', description: \"The is node is used to generate a timestamps\" },\n        \"rate-limit\": { title: \"Rate Limit\", description: \"\" },\n    },\n    \"trigger\": {\n        \"change-of-value\": { title: 'Change Of Value', description: \"when input changes value, output becomes true for interval duration, then output changes back to false. For Numeric input values, the change of value must be greater than the threshold value to trigger the output.\" },\n        \"random\": { title: 'Random', description: \"When trigger transitions from false to true, a random number between min and max values is produced at output. The number of decimal places that output values have can be set from settings.\" },\n        \"inject\": { title: 'Inject', description: \"While enable is true, output will send message value when trigger transitions from false to 'true\" },\n        \"interval-inject\": { title: 'Interval Inject', description: \"While enable is true, output will send message value at every interval period. When enable is false, output will be null. interval units can be configured from settings. Maximum interval setting is 587 hours.\" },\n        \"iterator\": { title: 'Iterator', description: \"This node generates a sequence of true messages at output. If the Generate False setting is ticked (default), then a false message will be sent between each true at output. The number of true messages sent will be equal to iterations value; these values are sent over the interval duration (unless interrupted by stop inputs). For example, if interval is set to 5 (seconds) and iterations is set to 5, a true message will be sent from output every 1000 millis. If 'stop input is true then the next true value will not be sent from output until stop is false again. interval units can be configured from settings. Maximum interval setting is 587 hours.\" },\n    },\n    \"widget\": {\n        \"schedule-afterhours-off\": { title: 'Schedule-Afterhours-Off Widget', description: 'This node works with a multi-select cloud dashboard widget to perform the logic to output enable and remaining runtime. Widget Example: {new:false,widgetType:MultiSwitch,dataSource:Ditto,tableSelectionMode:Tabular,cellWidthAuto:true,numCharts:1,timeSeriesData:true,valuePrecision:3,trimTableHeaders:0,enableTooltip:true,enableLegend:true,enableZoomSlider:true,syncTime:60,chartSettings:[{xAxisSplits:3,yAxisSplits:5}],graphType:LineChart,fontSize:35,statusImageName:Light,trueStatus:1,falseStatus:0,priority:16,sliderMin:10,sliderMax:30,sliderStep:0.1,min:0,max:100,gaugeSplits:6,maximum:0,unit:C,steps:0,reverseGradient:true,lowerBound:0,upperBound:100,cellWidth:150,tickCount:100,theme:nube,titleColor:\"#333333\",gateway:\"/api/ditto\",query:\"/api/2/things/com.nubeio:97768707-4a17-4d36-baa5-e1f95cbd74d4/features/points/properties/CHAPEL_Mode\",units:\"%\",title:AC Control,containerHeight:150,icon:None,topicIcon:None,subTopicIcon:None,layouts:{lg:{w:6,h:4,x:0,y:7,moved:false,static:false},md:{x:0,y:144,w:6,h:8},sm:{x:0,y:104,w:6,h:8},xs:{x:0,y:8,w:4,h:8},xxs:{x:0,y:8,w:2,h:8}},numButtons:3,buttonSettings:[{name:SCHEDULE,value:SCHEDULE},{name:AFTERHOURS,value:AFTERHOURS},{name:OFF,value:OFF}],dataType:Global,enableBackground:false,isSelect:false,fontWeight:bold,fontColor:\"\",overriddenFields:[],isTransparent:false,isSelectedDitto:true,showValue:true,dataEditorCode:\"\"}' },\n        \"schedule-prestart-fixed\": { title: 'Schedule Prestart Fixed', description: \"This node provides a pre-start function based on fixed settings. Conditions are evaluated every 30 seconds.\" },\n    },\n    \"unknown\": {\n        \"unknown\" : {title: \"Unknown\", description: \"Fallback node, this node need to be replace by another node\"}\n    },\n};\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 04.07.2016.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\nimport { get, merge } from 'lodash';\nimport { Colors, create } from 'logplease';\nimport * as moment from 'moment';\nimport { BackendLinkVisitor } from '../shared/link-result-visitor';\nimport { ERROR, NOTIFICATION } from '../shared/websocket-events';\nimport { ErrorHandler } from '../utils/decorators';\nimport { isEmpty, isNotNull, mapToObjectSameKey } from '../utils/helper';\nimport { IdGenerator } from '../utils/id-generator';\nimport { UNKNOWN_NODE } from './constants';\nimport { Container } from './container';\nimport { createNodeDbHelper } from './node-db-helper';\nimport { NodeHookHelper } from './node-hook';\nimport { IContainer, IFolderNode, INode, SerializedNode, Side } from './node-interface';\nimport { convertType, InputSetting, NodeInput, NodeOutput, NodeSetting, Type } from './node-io';\nimport { createLinkHandler } from './node-link';\nimport { Shape2D } from './node-presenter';\nimport { NodeTypeRegistry } from './node-type-registry';\nimport { Deserializable, Serializable, SerializableHelper } from './serializable';\nimport Utils from './utils';\n\nconst logger = create('node', { color: Colors.Magenta });\nconst doNothing = () => {};\n\nexport interface ContextMenuOption {\n  title: string;\n\n  onClick();\n}\n\nexport enum BROADCAST {\n  UPDATE_SETTINGS,\n  UPDATE_OUTPUTS,\n  UPDATE_TITLE,\n  UPDATE_VALUE,\n  UPDATE_STATE,\n  UPDATE_NAME,\n  UPDATE_PROPERTIES,\n}\n\nexport enum NodeState {\n  NORMAL   = 'normal', // the node default colour\n  INFO     = 'info',\n  WARNING  = 'warning',\n  ERROR    = 'error', // when user added something that they shouldn't have\n  DISABLED = 'disabled', // when a network is disabled\n  ONLINE   = 'online', // when a device is online\n  OFFLINE  = 'offline', // when a device is offline\n}\n\nexport interface NodeSettingConfig {\n  groups?: Array<{\n    [name: string]: {\n      weight?: number;\n    };\n  }>;\n  conditions?: {\n    [name: string]: (setting: any) => boolean;\n  };\n}\n\nexport class Node implements INode, Serializable<SerializedNode>, Deserializable<SerializedNode> {\n\n  id: number;\n  cid: number;\n  name: string;\n  type: string;\n  pos: [number, number] = [100, 100];\n  size: [number, number];\n  inputs: { [id: number]: NodeInput };\n  outputs: { [id: number]: NodeOutput };\n  settings: { [name: string]: NodeSetting } = {};\n  properties?: any = {};\n  flags: {\n    skip_title_render?: true;\n    unsafe_execution?: false;\n    collapsed?: boolean;\n    clip_area?: boolean;\n  } = {};\n\n  container: Container;\n  side: Side;\n  title: string;\n  category: string;\n  description: string;\n  data?: any;\n  MIN_WIDTH = 100;\n  settingConfigs: NodeSettingConfig = {};\n  contextMenu: { [name: string]: ContextMenuOption } = {};\n  settingsHeaderComponent?: any; // vue.js component definition\n  ignore_remove: boolean;\n  removable: boolean;\n  movable: boolean;\n  clonable: boolean = true;\n\n  mouseOver: boolean;\n  selected: boolean;\n\n  color: string;\n  bgcolor: string;\n  boxcolor: string;\n  headerColor: string;\n  shape: string;\n  onSerialize: Function;\n  bgImage: HTMLImageElement;\n  bgImageUrl: string;\n\n  isUpdated: boolean;\n  isRecentlyActive: boolean;\n\n  isDashboardNode?: boolean;\n\n  //you can set this setting for prevent input flooding!\n  UPDATE_INPUTS_INTERVAL?: number;\n  updateInputsLastTime?: number;\n\n  //you can set this setting for prevent execute flooding!\n  EXECUTE_INTERVAL?: number;\n  executeLastTime?: number;\n\n  showIcon: boolean = true;\n  iconImage: HTMLImageElement;\n  iconImageUrl: string;\n  icon: string;\n\n  nodeState: NodeState;\n\n  // Lifecycle Hooks: TODO write somewhere on README\n  // ===============================================\n  // setup()            : gets invoked when new node will be created, before setting up any settings and properties\n  //                      for writing your own custom logic for node creation\n  // init(properties)   : gets invoked when new node will be created after `setup` for doing modifying node dynamically,\n  //                      static settings and properties fields gets inserted before this method\n  // onCreated()        : gets invoked when new node will be created after `init(properties)`,\n  //                      after `init(properties)` we save the re-sets the settings values\n  // onAdded()          : gets invoked every time when node added to container (created or restored from the database)\n  // onRemoved()        : Invoked when node removed from container, it can be both Promise return or normal return\n  // onDbReaded()       : Invoked when db read and all nodes added to containers (after all nodes onAdded invoked)\n\n  // onDrawBackground\n  // onDrawForeground\n  //\n  // //if returns false the incoming connection will be canceled\n  // onConnectInput\n  // onInputAdded\n  // onOutputAdded\n  // onGetInputs\n  // onGetOutputs\n  // onInputRemoved\n  // onOutputRemoved\n  // getValueFromSettings(slot, labelFromData)\n  // getInputToSettingsMap\n  //\n  // onMouseDown\n  // onMouseUp\n  // onMouseEnter\n  // onMouseMove\n  // onMouseLeave\n  // onDblClick\n  // onDropFile\n  // onDropItem\n  // onKeyDown\n  // onKeyUp\n  //\n  // onSelected\n  // onDeselected\n  //\n  // onGetMessageToServerSide\n  // onGetMessageToEditorSide\n  //\n  // onRunContainer\n  // onStopContainer\n  // onExecute\n  // onInputUpdated\n  //\n  // onBeforeSettingsChange(newSettings, newName)\n  // onAfterSettingsChange(oldSettings, oldName)\n\n  // getMenuOptions\n  // getExtraMenuOptions\n\n  //onDashboardGetRequest\n  //onDashboardPostRequest\n  //onEditorApiGetRequest\n  //onEditorApiPostRequest\n\n  constructor() {\n    this.type = '';//trick to use isNode isContainerNode\n    this.id = IdGenerator.UNINITIALIZED;\n    this.cid = IdGenerator.UNINITIALIZED;\n  }\n\n  onAfterSettingsChange(oldSettings, oldName, oldIcon?) {}\n\n  onAdded() {  }\n\n  afterAdded() {\n    this.size = Shape2D.isDisplayable(this.size) ? this.size : this.computeSize();\n  }\n\n  onRemoved() {  }\n\n  beforeRemoveNode() {\n    Object.entries(this.inputs ?? {})\n          .filter(([_, input]) => isNotNull(input.link))\n          .forEach(([i, _]) => this.disconnectInputLink(+i));\n    Object.entries(this.outputs ?? {})\n          .filter(([_, output]) => isEmpty(output.links))\n          .forEach(([o, _]) => this.disconnectOutputLinks(+o));\n  }\n\n  afterRemoveNode() {\n    // remove from renderer\n    if (this.container?.renderers) {\n      for (let i = 0; i < this.container.renderers.length; ++i) {\n        let renderer = this.container.renderers[i];\n        if (renderer.selected_nodes[this.id]) delete renderer.selected_nodes[this.id];\n        if (renderer.node_dragged == this) renderer.node_dragged = null;\n      }\n    }\n  }\n\n  serialize(): SerializedNode {\n    let n: SerializedNode = {\n      cid: this.container?.id ?? this.cid,\n      id: this.id,\n      type: this.type,\n      pos: this.pos,\n      name: this.name,\n      size: this.size,\n      icon: this.icon,\n      inputs: mapToObjectSameKey(this.inputs, (_, i) => SerializableHelper.serialize(i)),\n      outputs: mapToObjectSameKey(this.outputs, (_, o) => SerializableHelper.serialize(o)),\n      settings: mapToObjectSameKey(this.settings, (_, s) => SerializableHelper.serialize(s)),\n      properties: SerializableHelper.serialize<object>(this.properties),\n      flags: SerializableHelper.serialize<object>(this.flags),\n    };\n    if (this.onSerialize) this.onSerialize(n);\n    return n;\n  }\n\n  @ErrorHandler\n  deserialize(serializedNode: SerializedNode, isNew?: boolean): Node {\n    function doMerge<T>(o1: { [p: string]: T }, o2: { [p: string]: T }, shouldMerge: boolean): { [p: string]: T } {\n      const serialized = mapToObjectSameKey(o1, (_, i) => SerializableHelper.serialize<T>(i));\n      return shouldMerge ? merge({}, serialized, o2) : serialized;\n    }\n\n    let node_class = NodeTypeRegistry.instance().get(serializedNode.type);\n    if (!node_class) {\n      this.debugWarn(`Node class of type [${serializedNode.type}] is not registered. Fallback to 'unknown'`);\n      node_class = NodeTypeRegistry.instance().get(UNKNOWN_NODE);\n    }\n    let node: Node = new node_class();\n    node.category = node_class.category;\n    NodeHookHelper.execute(node, 'setup');\n    NodeHookHelper.execute(node, 'init', node);\n    node.id = serializedNode.id ?? node.id;\n    node.cid = serializedNode.cid ?? node.cid;\n    node.type = serializedNode.type ?? node.type;\n    node.name = serializedNode.name;\n    node.pos = serializedNode.pos;\n    node.icon = serializedNode.icon ?? node.icon;\n    node.flags = !isNew ? merge(node.flags, serializedNode.flags) : node.flags;\n    node.inputs = mapToObjectSameKey(doMerge(node.inputs, serializedNode.inputs, !isNew),\n                                     (_, i) => NodeInput.create(i));\n    node.outputs = mapToObjectSameKey(doMerge(node.outputs, serializedNode.outputs, !isNew),\n                                      (_, o) => NodeOutput.create(o));\n    node.settings = mapToObjectSameKey(doMerge(node.settings, serializedNode.settings, !isNew), (k, s) => {\n      const setting = node.settings[k];\n      return NodeSetting.create({ ...s, validation: setting?.validation, toJSON: setting?.toJSON });\n    });\n    node.properties = !isNew ? merge(node.properties, serializedNode.properties) : node.properties;\n    node.size = serializedNode.size ?? this.computeSize(true);\n    return node;\n  }\n\n  getParent(): IContainer {\n    return this.container;\n  }\n\n  getParentNode(): IFolderNode {\n    return this.getParent()?.nodeItself();\n  }\n\n  /**\n   * Serialize and stringify\n   * @returns {string} json\n   */\n  toString(): string {\n    return JSON.stringify(this.serialize());\n  }\n\n  /**\n   * Get the title string\n   */\n  getTitle(): string {\n    return this.title;\n  }\n\n  getName(): string {\n    return this.name;\n  }\n\n  /***\n   * Gets array of all input values, but omitting undefined/null values\n   */\n  getDefinedInputValues() {\n    return Object.keys(this.inputs)\n                 .map(key => this.inputs[key].data)\n                 .filter(v => v != null);\n  }\n\n  /**\n   * Sets the output data according to the transform function\n   * @param callback function\n   */\n  emitTransformedInput(callback) {\n    let val = this.getInputData(0);\n    if (val != null) {\n      this.setOutputData(0, callback(val));\n    } else {\n      this.setOutputData(0, null);\n    }\n  }\n\n  /**\n   * @deprecated Use {@link NodeDbHelper#update} via {@link createNodeDbHelper}\n   */\n  updateNodeInput() {\n    createNodeDbHelper().update(this, ['inputs']);\n  }\n\n  /**\n   * @deprecated Use {@link NodeDbHelper#update} via {@link createNodeDbHelper}\n   */\n  updateNodeOutput() {\n    createNodeDbHelper().update(this, ['outputs']);\n  }\n\n  /**\n   * @deprecated Use {@link NodeDbHelper#update} via {@link createNodeDbHelper}\n   */\n  persistProperties(saveSettings = false, saveProperties = false, saveInputs = false, saveOutputs = false) {\n    const p = { 'settings': saveSettings, 'properties': saveProperties, 'inputs': saveInputs, 'outputs': saveOutputs };\n    let props = Object.entries(p)\n                      .filter(([_, v]) => v === true).map(([k, _]) => k);\n    createNodeDbHelper().update(this, props);\n  }\n\n  /**\n   * @deprecated Use {@link NodeDbHelper#update} via {@link createNodeDbHelper}\n   */\n  persistConfiguration(callback: () => void = doNothing) {\n    createNodeDbHelper().update(this, ['settings', 'properties']);\n  }\n\n  /**\n   * @deprecated Use {@link NodeDbHelper#update} via {@link createNodeDbHelper}\n   */\n  updateNodeInputOutput() {\n    createNodeDbHelper().update(this, ['inputs', 'outputs']);\n  }\n\n  /**\n   * Sets the output data\n   * @param output_id slotId id\n   * @param data slotId data\n   * @param only_if_new\n   */\n  setOutputData(output_id: number, data: any, only_if_new = false): void {\n    if (!this.outputs[output_id]) return;\n\n    if (data === undefined) return;\n    if (only_if_new && this.outputs[output_id].data === data) return;\n\n    this.outputs[output_id].updated = true; // it makes our update flag  is true // so when we want to make onInputUpdated() to trigger, we need to set this one as true\n    //so there will be two cases when out onInputUpdated() doesn't get triggered:\n    // 1. Falls multiple values in between 100ms so we will get only the last on value\n    // 2. If only_if_new = true and we want to trigger onInputUpdated() even when we have no change value\n    if (!this.isRecentlyActive) this.isRecentlyActive = true;\n\n    this.dispatch(output_id, data);\n    this.outputs[output_id].data = data;\n  }\n\n  /**\n   * Retrieves the input data (data traveling through the connection) from one slotId\n   * @param slotId slot id for input\n   * @returns data or if it is not connected returns undefined\n   */\n  getInputData(slotId: number): any {\n    try {\n      const input = this.inputs[slotId];\n      let data = input.data;\n      if (\n        this.inputs[slotId] &&\n        this.inputs[slotId].setting &&\n        this.inputs[slotId].setting.exist &&\n        (!Utils.hasValidInput(data, this.inputs[slotId].setting.nullable) || input.type === Type.DROPDOWN)\n      ) {\n        // It removes extracts the ${name} from: `[${name$}] (${value})`;\n        const settingName: string = this.inputs[slotId].name.match(/\\[(.*?)\\]/)[1];\n        const setting: NodeSetting = this.settings[settingName];\n        if (input.type === Type.DROPDOWN) {\n          // input as default setting value if input doesn't match\n          if (!setting.config.items.map(x => x.value).includes(data)) data = setting.value;\n        } else {\n          data = Utils.parseValue(setting.value, input.type);\n        }\n      }\n      return data;\n    } catch (err) {\n      this.debugErr(`Get input data! Error: ${err.stack ?? err}`);\n    }\n  }\n\n  /**\n   * Returns info about an input connection (which node, type, etc)\n   * @param slot slot id\n   * @returns {Object} object or null\n   */\n  getInputInfo(slot: number): any {\n    if (!this.inputs) return null;\n\n    return this.inputs[slot];\n  }\n\n  /**\n   * Add a new output slot to use in this node\n   * @param name\n   * @param type string defining the output type (\"vec3\",\"number\",...)\n   * @param id {number} output id number if you want to enter manual id\n   * @param extra_info this can be used to have special properties of an output (label, special color, position, etc)\n   */\n\n  addOutput(name?: string, type?: Type, id: number = undefined, extra_info?: any): number {\n    id = this.getFreeOutputId(id);\n    name = name || 'out ' + (id + 1);\n\n    let output: NodeOutput = NodeOutput.create({ name: name, type: type, links: null });\n    if (extra_info) for (let i in extra_info) output[i] = extra_info[i];\n\n    if (!this.outputs) this.outputs = {};\n\n    this.outputs[id] = output;\n    if (this['onOutputAdded']) this['onOutputAdded'](output);\n    this.size = this.computeSize();\n\n    return id;\n  }\n\n  getFreeOutputId(id = undefined): number {\n    if (!this.outputs) {\n      this.outputs = {};\n    }\n    if (id !== undefined && !this.outputs[id]) {\n      return id;\n    }\n\n    for (let i = 0; i < 1000; i++) {\n      if (!this.outputs[i]) return i;\n    }\n  }\n\n  /**\n   * Remove an existing output slot\n   * @param id slot id\n   */\n  removeOutput(id: number): void {\n    this.disconnectOutputLinks(id);\n    delete this.outputs[id];\n    this.size = this.computeSize();\n    if (this['onOutputRemoved']) this['onOutputRemoved'](id);\n  }\n\n  /**\n   * Add a new input slot to use in this node\n   * @param name {string}\n   * @param type {Type} defining the input type (\"vec3\",\"number\",...), it its a generic one use 0\n   * @param setting {InputSetting} set setting exist or not and whether to ignore null data or not from the connected slot\n   * @param id {number} input id number if you want to enter manual id\n   * @param extra_info {any} this can be used to have special properties of an input (label, color, position, etc)\n   */\n  addInput(\n    name?: string,\n    type?: Type,\n    setting: InputSetting = { exist: false, nullable: false, hidden: false },\n    id: number            = undefined,\n    extra_info?: any,\n  ): number {\n    id = this.getFreeInputId(id);\n    name = name || 'in ' + (id + 1);\n    let input: NodeInput = NodeInput.create({ name, type, setting, ...extra_info });\n    // if (extra_info) {\n    //   input = { ...input, ...extra_info };\n    // }\n\n    if (!this.inputs) this.inputs = {};\n    this.inputs[id] = input;\n    this.size = this.computeSize();\n    if (this['onInputAdded']) this['onInputAdded'](input);\n    return id;\n  }\n\n  /**\n   * @param name {string} name of the input and setting which will be bind each other input: [name], setting: name\n   * @param type {InputType} type of input\n   * @param defaultValue {string} default value for the setting\n   * @param description {string} description for the setting\n   * @param nullable {boolean} whether we need to include null input or not?\n   * If nullable === false, and input === null: it will search value form setting\n   * @param config {object} when TYPE = DROPDOWN, it's needed\n   * @param extra_info {any} anything we want to add on input\n   */\n  addInputWithSettings(\n    name: string,\n    type: Type,\n    defaultValue: any,\n    description: string = name,\n    nullable: boolean   = true,\n    config?: object,\n    extra_info?: any,\n  ): void {\n    const setting: InputSetting = { exist: true, nullable, hidden: false };\n    this.addInput(`[${name}]`, type, setting, extra_info);\n    this.settings[name] = NodeSetting.create({ description, value: defaultValue, type: convertType(type), config });\n  }\n\n  addInputAtPosition(\n    position: number,\n    name?: string,\n    type?: Type,\n    setting: InputSetting = { exist: false, nullable: false, hidden: false },\n    extra_info: any       = {},\n  ): number {\n    if (!this.inputs) this.inputs = {};\n    const inputsCount = this.getInputsCount();\n    if (position >= inputsCount) {\n      return this.addInput(name, type, setting, extra_info);\n    }\n    const myID = this.id;\n    for (let i = inputsCount; i > position; i--) {\n      this.inputs[i] = this.inputs[i - 1];\n      if (this.inputs[i].hasOwnProperty('link')) {\n        const outputNode: Node = this.container.getSubNode(`${this.inputs[i].link.nodeId}`);\n        let linksArray = outputNode.outputs[`${this.inputs[i].link.slot}`].links;\n        const replaceLinkIndex = linksArray.findIndex(link => {\n          return link.target_node_id == myID && link.target_slot == i - 1;\n        });\n        if (replaceLinkIndex != -1) linksArray.splice(replaceLinkIndex, 1, { target_node_id: myID, target_slot: i });\n        outputNode.updateNodeOutput();\n      }\n    }\n    let input: NodeInput = { name, type, setting, ...extra_info };\n    this.inputs[position] = input;\n    this.size = this.computeSize();\n    if (this['onInputAdded']) this['onInputAdded'](input);\n    return position;\n  }\n\n  getFreeInputId(id = undefined): number {\n    if (!this.inputs) {\n      this.inputs = {};\n    }\n    if (id !== undefined && !this.inputs[id]) {\n      return id;\n    }\n\n    for (let i = 0; i < 1000; i++) {\n      if (!this.inputs[i]) return i;\n    }\n  }\n\n  hideInput(immediateDirtyCanvas: boolean = true, ...ids: number[]): void {\n    for (let id of ids) {\n      this.disconnectInputLink(null, id);\n      this.inputs[id].setting.hidden = true;\n    }\n    this.redrawNode(immediateDirtyCanvas);\n  }\n\n  showInput(immediateDirtyCanvas: boolean = true, ...ids: number[]): void {\n    for (let id of ids) {\n      this.inputs[id].setting.hidden = false;\n    }\n    this.redrawNode(immediateDirtyCanvas);\n  }\n\n  redrawNode(immediateDirtyCanvas: boolean = true) {\n    if (immediateDirtyCanvas) {\n      this.size = this.computeSize();\n      this.setDirtyCanvas(true, true);\n    }\n  }\n\n  /**\n   * Remove an existing input slot\n   * @method removeInput\n   * @param id\n   */\n  removeInput(id: number): void {\n    this.disconnectInputLink(id);\n    delete this.inputs[id];\n    this.size = this.computeSize();\n    if (this['onInputRemoved']) this['onInputRemoved'](id);\n  }\n\n  /**\n   * Remove an existing input slot and moves other inputs and links to maintain input numbering\n   * @method removeInput\n   * @param slot Input slot\n   */\n  removeInputAtPosition(slot: number): void {\n    this.disconnectInputLink(slot);\n    const inputsCount = this.getInputsCount();\n    //console.log('THIS.ID', this.id)\n    //console.log('THIS.INPUTS BEFORE', this.inputs)\n    const myID = this.id;\n    for (let i = slot; i < inputsCount - 1; i++) {\n      this.inputs[i] = this.inputs[i + 1];\n      //console.log('THIS.INPUTS MID', this.inputs)\n      if (this.inputs[i].hasOwnProperty('link')) {\n        const outputNode: Node = this.container.getSubNode(`${this.inputs[i].link.nodeId}`);\n        let linksArray = outputNode.outputs[`${this.inputs[i].link.slot}`].links;\n        //console.log('linksArray', linksArray)\n        const replaceLinkIndex = linksArray.findIndex(link => {\n          return link.target_node_id == myID && link.target_slot == i + 1;\n        });\n        if (replaceLinkIndex != -1) linksArray.splice(replaceLinkIndex, 1, { target_node_id: myID, target_slot: i });\n        outputNode.updateNodeOutput();\n        //console.log('linksArray AFTER', linksArray)\n        //console.log('THIS.INPUTS AFTER', outputNode.outputs[`${this.inputs[i].link.target_slot}`].links)\n      }\n    }\n    delete this.inputs[inputsCount - 1];\n    this.size = this.computeSize();\n    if (this['onInputRemoved']) this['onInputRemoved'](slot);\n  }\n\n  getInputsCount(): number {\n    return this.inputs ? Object.keys(this.inputs).length : 0;\n  }\n\n  getOutputsCount(): number {\n    return this.outputs ? Object.keys(this.outputs).length : 0;\n  }\n\n  /*\n  addInputAtPosition(\n    position: number,\n    name?: string,\n    type?: Type,\n    setting: InputSetting = { exist: false, nullable: false },\n    extra_info: any = {},\n  ): number {\n    if (!this.inputs) this.inputs = {};\n    const inputsCount = this.getInputsCount();\n    if (position >= inputsCount) return this.addInput(name, type, setting, extra_info);\n    else {\n      const myID = this.id;\n      for (let i = inputsCount; i > position; i--) {\n        this.inputs[i] = this.inputs[i - 1];\n        if (this.inputs[i].hasOwnProperty('link')) {\n          const outputNode: Node = this.container._nodes[`${this.inputs[i].link.target_node_id}`];\n          let linksArray = outputNode.outputs[`${this.inputs[i].link.target_slot}`].links;\n          const replaceLinkIndex = linksArray.findIndex(link => {\n            return link.target_node_id == myID && link.target_slot == i - 1;\n          });\n          if (replaceLinkIndex != -1) linksArray.splice(replaceLinkIndex, 1, { target_node_id: myID, target_slot: i });\n          outputNode.updateNodeOutput();\n        }\n      }\n      let input: NodeInput = { name, type, setting, ...extra_info };\n      this.inputs[position] = input;\n      this.size = this.computeSize();\n      if (this['onInputAdded']) this['onInputAdded'](input);\n      return position;\n    }\n    this.updateNodeInput();\n  }\n  */\n\n  // TODO: Edit nodes which is using these functions\n  changeInputsCount(target_count: number, type?: Type) {\n    let current_count = this.getInputsCount();\n    let diff = target_count - current_count;\n\n    //add\n    if (diff > 0) for (let i = 0; i < diff; i++) this.addInput(null, type);\n\n    //remove\n    if (diff < 0) {\n      let ids = Object.keys(this.inputs);\n      for (let i = 0; i > diff; i--) {\n        let id = ids[ids.length + i - 1];\n        this.removeInput(+id);\n      }\n    }\n  }\n\n  changeOutputsCount(target_count: number, type?: Type) {\n    let current_count = this.getOutputsCount();\n    let diff = target_count - current_count;\n\n    //add\n    if (diff > 0) for (let i = 0; i < diff; i++) this.addOutput(null, type);\n\n    //remove\n    if (diff < 0) {\n      let ids = Object.keys(this.outputs);\n      for (let i = 0; i > diff; i--) {\n        let id = ids[ids.length + i - 1];\n        this.removeOutput(+id);\n      }\n    }\n  }\n\n  getLastInputIndex(): number {\n    return this.inputs ? Object.values(this.inputs).filter(value => !value.setting?.hidden).length : 0;\n  }\n\n  getLastOutputIndex(): number {\n    return this.outputs ? Object.values(this.outputs).length : 0;\n  }\n\n  computeHeight(): number {\n    let rows = Math.max(this.getLastInputIndex() + this.getLastOutputIndex(), 1);\n    // MAGIC number `15` and `6`\n    return rows * 15 + 6;\n  }\n\n  /**\n   * Computes the size of a node according to its inputs and output slots\n   * @param changeWidth If true will compute width based on title, max width of names and max width of lables\n   * @returns {[number, number]} the total size\n   */\n  computeSize(changeWidth = false): [number, number] {\n    let size: [number, number] = [0, 0];\n    size[1] = this.computeHeight();\n\n    if (!changeWidth && this.size != undefined) {\n      size[0] = this.size[0];\n      return size;\n    }\n\n    let font_size = 14;\n    let title_width = compute_text_size(this.title);\n    let maxLabelWidth = 0;\n    let maxNameWidth = 0;\n\n    if (this.inputs) {\n      for (let i in this.inputs) {\n        let input = this.inputs[i];\n        let label = input.label ?? '';\n        let name = input.name ?? '';\n        let labelWidth = compute_text_size(label);\n        let nameWidth = compute_text_size(name);\n        if (maxLabelWidth < labelWidth) maxLabelWidth = labelWidth;\n        if (maxNameWidth < nameWidth) maxNameWidth = nameWidth;\n      }\n    }\n\n    if (this.outputs) {\n      for (let o in this.outputs) {\n        let output = this.outputs[o];\n        let label = output.label ?? '';\n        let name = output.name ?? '';\n        let labelWidth = compute_text_size(label);\n        let nameWidth = compute_text_size(name);\n        if (maxLabelWidth < labelWidth) maxLabelWidth = labelWidth;\n        if (maxNameWidth < nameWidth) maxNameWidth = nameWidth;\n      }\n    }\n\n    if (maxLabelWidth == 0) maxLabelWidth = maxNameWidth;\n    size[0] = Math.max(maxLabelWidth + maxNameWidth + 10, title_width);\n    size[0] = Math.max(size[0], this.MIN_WIDTH);\n\n    function compute_text_size(text) {\n      if (!text) return 0;\n      return font_size * text.length * 0.6;\n    }\n\n    return size;\n  }\n\n  calculateMinWidth(...width: Array<number>): number {\n    return Math.max(this.MIN_WIDTH, ...width);\n  }\n\n  /**\n   * Disconnect output slot connect nodes links\n   * @param {number} slot whose links should be disconnected\n   * @returns {boolean} true if disconnected successfully\n   */\n  disconnectOutputLinks(slot: number) {\n    const nodeIO = { nodeId: this.id, ioId: slot, slot: slot };\n    const registry = this.getParent().nodeRegistry().containerRegistry;\n    return new BackendLinkVisitor(registry).visit(createLinkHandler(registry).disconnectOutput(this.cid, nodeIO));\n  }\n\n  /**\n   * Disconnect input slot connected node link\n   * @param {number} input_slot current input slot\n   * @param {number} input_id whose link should be disconnected\n   * @returns {boolean} true if disconnected successfully\n   */\n  disconnectInputLink(input_slot: number, input_id?: number) {\n    const nodeIO = { nodeId: this.id, ioId: input_slot ?? input_id, slot: input_slot };\n    const registry = this.getParent().nodeRegistry().containerRegistry;\n    return new BackendLinkVisitor(registry).visit(createLinkHandler(registry).disconnectInput(this.cid, nodeIO));\n  }\n\n  /* Forces to redraw or the main renderer (Node) or the bg renderer (links) */\n  setDirtyCanvas(dirty_foreground: boolean, dirty_background?: boolean): void {\n    if (!this.container) return;\n    this.container.sendActionToRenderer('setDirty', [dirty_foreground, dirty_background]);\n  }\n\n  /**\n   * Collapse the node to make it smaller on the renderer\n   **/\n  collapse(): void {\n    this.flags.collapsed = !this.flags?.collapsed;\n    this.setDirtyCanvas(true, true);\n  }\n\n  /**\n   * Print debug message to console\n   * @param message\n   */\n  debug(message: any): void {\n    logger.debug(this.getReadableId() + ' ' + message);\n  }\n\n  /**\n   * Print debug message to console\n   * @param message\n   */\n  debugInfo(message: any): void {\n    logger.info(this.getReadableId() + ' ' + message);\n  }\n\n  /**\n   * Print error message to console\n   * @param message\n   * @param module\n   */\n  debugWarn(message: any, module?: string): void {\n    logger.warn(this.getReadableId() + ' ' + message);\n  }\n\n  /**\n   * Print error message to console\n   * @param message\n   * @param module\n   */\n  debugErr(message: any, module?: string): void {\n    logger.error(this.getReadableId() + ' ' + message);\n  }\n\n  getReadableId(): string {\n    if (this.container) {\n      return `[${this.type}][${this.container.id}/${this.id}]`;\n    } else {\n      return `[${this.type}][-/${this.id}]`;\n    }\n  }\n\n  sendMessageToServerSide(message: any) {\n    if (this.side === Side.server) {\n      logger.warn(`Node ${this.getReadableId()} is trying to send message from server side to server side`);\n    } else {\n      this.container.client_socket.emit('nodeMessageToServerSide', {\n        id: this.id,\n        cid: this.container.id,\n        message: message,\n      });\n    }\n  }\n\n  sendMessageToEditorSide(message: any, onlyConnectedUsers = true) {\n    let m = { id: this.id, cid: this.container.id, message };\n\n    if (this.side == Side.editor) {\n      logger.warn(`Node ${this.getReadableId()} is trying to send message from editor side to editor side`);\n    } else if (this.side === Side.server) {\n      let socket = this.container.server_editor_socket;\n\n      if (onlyConnectedUsers) {\n        socket.in('' + this.container.id).emit('nodeMessageToEditorSide', m);\n      } else {\n        socket.emit('nodeMessageToEditorSide', m);\n      }\n    } else {\n      this.container.client_socket.emit('nodeMessageToEditorSide', m);\n    }\n  }\n\n  sendAddInputToEditorSide(name?: string, type?: string, extra_info?: any) {\n    let m = {\n      id: this.id,\n      cid: this.container.id,\n      input: {\n        name: name,\n        type: type,\n        extra_info: extra_info,\n      },\n    };\n\n    if (this.side === Side.editor) {\n      logger.warn('Node ' + this.getReadableId() + ' is trying to send message from editor side to editor side');\n    } else if (this.side === Side.server) {\n      let socket = this.container.server_editor_socket;\n      socket.emit('node-add-input', m);\n    } else {\n      this.container.client_socket.emit('node-add-input', m);\n    }\n  }\n\n  sendAddOutputToEditorSide(name?: string, type?: string, extra_info?: any) {\n    let m = {\n      id: this.id,\n      cid: this.container.id,\n      output: {\n        name: name,\n        type: type,\n        extra_info: extra_info,\n      },\n    };\n\n    if (this.side === Side.editor) {\n      logger.warn('Node ' + this.getReadableId() + ' is trying to send message from editor side to editor side');\n    } else if (this.side === Side.server) {\n      let socket = this.container.server_editor_socket;\n      socket.emit('node-add-output', m);\n    } else {\n      this.container.client_socket.emit('node-add-output', m);\n    }\n  }\n\n  sendRemoveInputToEditorSide(id: number) {\n    let m = {\n      id: this.id,\n      cid: this.container.id,\n      input: id,\n    };\n\n    if (this.side === Side.editor) {\n      logger.warn('Node ' + this.getReadableId() + ' is trying to send message from editor side to editor side');\n    } else if (this.side === Side.server) {\n      let socket = this.container.server_editor_socket;\n      socket.emit('node-remove-input', m);\n    } else {\n      this.container.client_socket.emit('node-remove-input', m);\n    }\n  }\n\n  sendRemoveOutputToEditorSide(id: number) {\n    let m = {\n      id: this.id,\n      cid: this.container.id,\n      output: id,\n    };\n\n    if (this.side === Side.editor) {\n      logger.warn('Node ' + this.getReadableId() + ' is trying to send message from editor side to editor side');\n    } else if (this.side === Side.server) {\n      let socket = this.container.server_editor_socket;\n      socket.emit('node-remove-output', m);\n    } else {\n      this.container.client_socket.emit('node-remove-output', m);\n    }\n  }\n\n  sendIOValuesToEditor() {\n    let inputs_values = [];\n    let outputs_values = [];\n\n    if (this.inputs) {\n      for (let i in this.inputs) {\n        const data = this.inputs[i].data;\n        inputs_values.push({\n                             nodeId: this.id,\n                             inputId: i,\n                             data: data,\n                           });\n      }\n    }\n\n    if (this.outputs) {\n      for (let o in this.outputs) {\n        const data = this.outputs[o].data;\n        outputs_values.push({\n                              nodeId: this.id,\n                              outputId: o,\n                              data: data,\n                            });\n      }\n    }\n\n    let slots_values = {\n      cid: this.container.id,\n      inputs: inputs_values,\n      outputs: outputs_values,\n    };\n\n    this.container.server_editor_socket.in('' + this.container.id).emit('nodes-io-values', slots_values);\n  }\n\n  updateInputsLabels() {\n    if (this.inputs) {\n      for (let i in this.inputs) {\n        let input = this.inputs[i];\n        input.label = '';\n      }\n      this.setDirtyCanvas(true, true);\n    }\n  }\n\n  updateOutputsLabels() {\n    if (this.outputs) {\n      for (let o in this.outputs) {\n        let output = this.outputs[o];\n        output.label = '';\n      }\n      this.setDirtyCanvas(true, true);\n    }\n  }\n\n  broadcastSettingsToClients(onlyConnectedUsers = true) {\n    this.sendMessageToEditorSide({ action: BROADCAST.UPDATE_SETTINGS, payload: this.settings }, onlyConnectedUsers);\n  }\n\n  broadcastPropertiesToClients(onlyConnectedUsers = true) {\n    this.sendMessageToEditorSide({ action: BROADCAST.UPDATE_PROPERTIES, payload: this.properties }, onlyConnectedUsers);\n  }\n\n  broadcastOutputsToClients(onlyConnectedUsers = true) {\n    this.sendMessageToEditorSide({ action: BROADCAST.UPDATE_OUTPUTS, payload: this.outputs }, onlyConnectedUsers);\n  }\n\n  broadcastNodeStateToClients(onlyConnectedUsers = true) {\n    this.sendMessageToEditorSide({ action: BROADCAST.UPDATE_STATE, payload: this.nodeState }, onlyConnectedUsers);\n  }\n\n  broadcastTitleToClients(onlyConnectedUsers = true) {\n    this.sendMessageToEditorSide({ action: BROADCAST.UPDATE_TITLE, payload: this.title }, onlyConnectedUsers);\n  }\n\n  broadcastNameToClients(onlyConnectedUsers = true) {\n    this.sendMessageToEditorSide({ action: BROADCAST.UPDATE_NAME, payload: this.name }, onlyConnectedUsers);\n  }\n\n  broadcastValToClients(key: string, val: any, onlyConnectedUsers = true) {\n    this.sendMessageToEditorSide({ action: BROADCAST.UPDATE_VALUE, key: key, payload: val }, onlyConnectedUsers);\n  }\n\n  onGetMessageToEditorSide({ action, payload, key }) {\n    switch (action) {\n      case BROADCAST.UPDATE_VALUE:\n        this.settings[key].value = payload;\n        return;\n      case BROADCAST.UPDATE_SETTINGS:\n        this.settings = payload;\n        return;\n      case BROADCAST.UPDATE_PROPERTIES:\n        this.properties = payload;\n        return;\n      case BROADCAST.UPDATE_OUTPUTS:\n        this.outputs = payload;\n        break;\n      case BROADCAST.UPDATE_TITLE:\n        this.title = payload;\n        this.size = this.computeSize();\n        break;\n      case BROADCAST.UPDATE_STATE:\n        this.nodeState = payload;\n        break;\n      case BROADCAST.UPDATE_NAME:\n        this.name = payload;\n        break;\n      default:\n        this.debugErr(`Received unknown editor action ${action} with payload ${JSON.stringify(payload)}`);\n        break;\n    }\n  }\n\n  setSettingsConfig(config: NodeSettingConfig) {\n    this.settingConfigs = config;\n  }\n\n  formattedExecutionTime(): string {\n    return moment(this.executeLastTime).format('YYYY-MM-DDTHH:MM:ss');\n  }\n\n  setNodeState(state: NodeState) {\n    this.nodeState = state;\n    if (this.side == Side.server) {\n      this.broadcastNodeStateToClients();\n    }\n  }\n\n  /**\n   * Replaces setting with old setting and restores validations.\n   *\n   * @param inputSettings Updated settings that should replace existing\n   */\n  settingsWithValidation(inputSettings: { [name: string]: NodeSetting }) {\n    const outputSettings = inputSettings;\n\n    // repopulate validation\n    let node_class = NodeTypeRegistry.instance().get(this.type);\n    let tempNode: Node = new node_class(this.container, this.id, this.properties);\n\n    const settings = { ...tempNode.settings };\n\n    Object.keys(outputSettings).forEach(key => {\n      outputSettings[key].validation = settings[key] ? settings[key].validation : null;\n    });\n    return outputSettings;\n  }\n\n  displayError(e: any, message: string = '') {\n    this.container.server_editor_socket.emit(ERROR, `${message} ${this.extractErrorMessage(e)}`);\n  }\n\n  displayMessage(message: string) {\n    this.container.server_editor_socket.emit(NOTIFICATION, message);\n  }\n\n  convertInput = (input: any, dataType: Type, decimals: number = 3) => {\n    const inputDataType = typeof input;\n    if (dataType === Type.NUMBER) {\n      input = Number((isNaN(input) ? 0 : Number(input)).toFixed(decimals));\n    } else if (dataType === Type.BOOLEAN) {\n      if (inputDataType === 'boolean') {\n        input = Number(input);\n      } else {\n        input = input === 1 || input === 'true' ? 1 : 0;\n      }\n    } else if (dataType === Type.STRING && inputDataType !== 'string') {\n      input = JSON.stringify(input);\n    }\n    return input;\n  };\n\n  private dispatch(output_id: number, data: any) {\n    if (output_id === 0) {\n      const { PubSubHelpers } = require('../pub-sub/PubSubHelpers');\n      PubSubHelpers.dispatch(this, data);\n    }\n  }\n\n  private extractErrorMessage(e: any) {\n    return get(e, 'response.data.message', get(e, 'message', e));\n  }\n}\n","import { Enumify } from 'enumify';\nimport { isFunction, isNotNull } from '../utils/helper';\nimport { NodeIO, SerializedNodeInput, SerializedNodeOutput, SerializedNodeSetting } from './node-io';\nimport { Registry } from './registry';\n\nexport class Side extends Enumify {\n\n  static server = new Side('SERVER');\n  static editor = new Side('EDITOR');\n  static dashboard = new Side('DASHBOARD');\n  static _ = Side.closeEnum();\n\n  private readonly name: string;\n\n  private constructor(name: string) {\n    super();\n    this.name = name;\n  }\n\n  toString(): string {\n    return this.name;\n  }\n}\n\n/**\n * Represents node in serialized mode to persist in database or json data in import/export\n */\nexport interface SerializedNode {\n  id: number;\n  cid: number;\n  name: string;\n  type: string;\n  pos: [number, number];\n  size?: [number, number];\n  inputs?: { [id: number]: SerializedNodeInput };\n  outputs?: { [id: number]: SerializedNodeOutput };\n  properties?: any;\n  settings?: { [name: string]: SerializedNodeSetting };\n  flags?: any;\n  icon?: string;\n  \n}\n\nexport interface INode extends SerializedNode {\n  /**\n   * Parent container\n   */\n  //TODO: rename to `parent`\n  container: IContainer;\n  side: Side;\n  title: string;\n  category: string;\n  inputs?: { [id: number]: SerializedNodeInput & NodeIO };\n  outputs?: { [id: number]: SerializedNodeOutput & NodeIO };\n\n  isUpdated?: boolean;\n\n  /**\n   * Gets parent container\n   * @see INode#container\n   * @return {IContainer} parent container\n   */\n  getParent(): IContainer;\n\n  /**\n   * Gets node that represents to {@link INode#container}\n   * @see IContainer#nodeItself\n   * @return {IFolderNode} `null` if parent container is root container, otherwise folder node that represents itself\n   */\n  getParentNode(): IFolderNode;\n}\n\n/**\n * Represents folder node in serialized mode to persist in database or json data in import/export\n */\nexport interface SerializedFolderNode extends SerializedNode {\n\n  /**\n   * Represents itself container that contains other nodes\n   */\n  sub_container: SerializedContainer;\n\n}\n\nexport interface IFolderNode extends SerializedFolderNode, INode {\n\n  /**\n   * @see SerializedFolderNode#sub_container\n   */\n  sub_container: IContainer;\n  inputs?: { [id: number]: SerializedNodeInput & NodeIO };\n  outputs?: { [id: number]: SerializedNodeOutput & NodeIO };\n\n}\n\n/**\n * Represents container in serialized mode to persist in database or json data in import/export\n */\nexport interface SerializedContainer {\n  id: number;\n  name?: string;\n  config?: any;\n  serializedNodes?: SerializedNode[];\n}\n\nexport interface IContainer extends SerializedContainer {\n\n  side: Side;\n\n  /**\n   * Gets a node that represents itself.\n   * @return {IFolderNode} `null` if this container is root container, otherwise folder node that represents itself\n   */\n  nodeItself(): IFolderNode;\n\n  nodeRegistry(): SubNodeRegistryMetadata;\n}\n\nexport const isNode = (node: any): boolean => {\n  return isNotNull(node) && typeof node === 'object' && 'id' in node && 'cid' in node && 'type' in node;\n};\n\nexport const isFolderNode = (node: any): boolean => {\n  return isNode(node) && 'sub_container' in node;\n};\n\nexport const isSerializedContainer = (container: any): boolean => {\n  return isNotNull(container) && !isNode(container) && typeof container === 'object' && 'id' in container;\n};\n\nexport const isContainer = (container: any): boolean => {\n  return isSerializedContainer(container) && isFunction(container['nodeRegistry']);\n};\n\nexport interface RegistryLastId<T> extends Registry<T> {\n\n  lastId(): number;\n\n  findLastId(): number;\n\n}\n\nexport interface ContainerRegistryMetadata extends RegistryLastId<IContainer> {\n\n  /**\n   * Register new container\n   * @param {IContainer} container\n   * @param force if `false` and container id is already existed, new container id will be generated then reassigned\n   * to given container\n   * @return {IContainer} the registered container, never null\n   * @throws RegistryError if given container is null\n   */\n  register(container: IContainer, force?: boolean): IContainer;\n\n  /**\n   * Get container\n   * @param {number | string} id\n   * @returns {SerializedContainer} `null|undefined` if not found\n   */\n  get(id: number | string): IContainer;\n\n  has(id: number | string): boolean;\n\n  remove(id: number | string): IContainer;\n\n  rootContainer(): IContainer;\n}\n\nexport interface GlobalNodeRegistryMetadata extends Registry<INode> {\n\n  register(container: INode, force?: boolean): INode;\n\n  remove(id: number | string | INode): INode;\n\n}\n\n/**\n * Represents sub node registry in each container\n */\nexport interface SubNodeRegistryMetadata extends RegistryLastId<INode> {\n\n  globalNodeRegistry: GlobalNodeRegistryMetadata;\n  containerRegistry: ContainerRegistryMetadata;\n\n  parent(): IContainer;\n\n  /**\n   * Returns a sub node by given id\n   * @param node\n   * @return {INode} sub node or null if not found\n   */\n  get(node: number | string | INode): INode;\n\n  /**\n   *\n   * @param {INode} node\n   * @param {boolean} force? Force register\n   * @param {string} key? node key\n   * @param {boolean} isCaching? only caching without calling to backend or database\n   * @return {Promise<INode>}\n   */\n  register(node: INode, force?: boolean, key?: string, isCaching?: boolean): Promise<INode>;\n\n  /**\n   * Removes a node from the container\n   * @param node the instance of the node or node id\n   * @param {boolean} isCaching? only caching without calling to backend or database\n   */\n  remove(node: INode | number | string, isCaching?: boolean): Promise<INode>;\n\n}\n\n","\nimport { isNull } from '../utils/helper';\n\nexport default class Utils {\n  static operatorsBoolName = [\n    '==',\n    '!=',\n    '<',\n    '<=',\n    '>',\n    '>=',\n    // 'between',\n    // 'contains',\n    // 'is true',\n    // 'is false',\n    // 'null',\n    // 'not null',\n  ];\n\n  static operatorsMathName = ['+', '-', '/', '*', 'min', 'max'];\n\n  static operatorsBool = {\n    eq: function(a, b) {\n      return a == b;\n    },\n    neq: function(a, b) {\n      return a != b;\n    },\n    lt: function(a, b) {\n      return a < b;\n    },\n    lte: function(a, b) {\n      return a <= b;\n    },\n    gt: function(a, b) {\n      return a > b;\n    },\n    gte: function(a, b) {\n      return a >= b;\n    },\n    btwn: function(a, b, c) {\n      return (a >= b && a <= c) || (a <= b && a >= c);\n    },\n    contains: function(a, b) {\n      return (a + '').indexOf(b) != -1;\n    },\n    regex: function(a, b, c, d) {\n      return (a + '').match(new RegExp(b, d ? 'i' : ''));\n    },\n    true: function(a) {\n      return a === true;\n    },\n    false: function(a) {\n      return a === false;\n    },\n    null: function(a) {\n      return typeof a == 'undefined' || a === null;\n    },\n    notNull: function(a) {\n      return typeof a != 'undefined' && a !== null;\n    },\n    empty: function(a) {\n      if (typeof a === 'string' || Array.isArray(a) || Buffer.isBuffer(a)) {\n        return a.length === 0;\n      } else if (typeof a === 'object' && a !== null) {\n        return Object.keys(a).length === 0;\n      }\n      return false;\n    },\n    notEmpty: function(a) {\n      if (typeof a === 'string' || Array.isArray(a) || Buffer.isBuffer(a)) {\n        return a.length !== 0;\n      } else if (typeof a === 'object' && a !== null) {\n        return Object.keys(a).length !== 0;\n      }\n      return false;\n    },\n  };\n\n  static operatorsStatName = [\n    'max',\n    'min',\n    'range',\n    'midRange',\n    'sum',\n    'mean',\n    'median',\n    'variance',\n    'standardDeviation',\n    'meanAbsoluteDeviation',\n  ];\n\n  static stat = {\n    max: function(array) {\n      return Math.max.apply(null, array);\n    },\n\n    min: function(array) {\n      return Math.min.apply(null, array);\n    },\n\n    range: function(array) {\n      return Utils.stat.max(array) - Utils.stat.min(array);\n    },\n\n    midRange: function(array) {\n      return Utils.stat.range(array) / 2;\n    },\n\n    sum: function(array) {\n      let num = 0;\n      for (let i = 0, l = array.length; i < l; i++) num += array[i];\n      return num;\n    },\n\n    mean: function(array) {\n      return Utils.stat.sum(array) / array.length;\n    },\n\n    median: function(array) {\n      array.sort(function(a, b) {\n        return a - b;\n      });\n      const mid = array.length / 2;\n      return mid % 1 ? array[mid - 0.5] : (array[mid - 1] + array[mid]) / 2;\n    },\n\n    modes: function(array) {\n      if (!array.length) return [];\n      let modeMap = {},\n        maxCount = 0,\n        modes = [];\n\n      array.forEach(function(val) {\n        if (!modeMap[val]) modeMap[val] = 1;\n        else modeMap[val]++;\n\n        if (modeMap[val] > maxCount) {\n          modes = [val];\n          maxCount = modeMap[val];\n        } else if (modeMap[val] === maxCount) {\n          modes.push(val);\n          maxCount = modeMap[val];\n        }\n      });\n      return modes;\n    },\n\n    variance: function(array) {\n      const mean = Utils.stat.mean(array);\n      return Utils.stat.mean(\n        array.map(function(num) {\n          return Math.pow(num - mean, 2);\n        }),\n      );\n    },\n\n    standardDeviation: function(array) {\n      return Math.sqrt(Utils.stat.variance(array));\n    },\n\n    meanAbsoluteDeviation: function(array) {\n      const mean = Utils.stat.mean(array);\n      return Utils.stat.mean(\n        array.map(function(num) {\n          return Math.abs(num - mean);\n        }),\n      );\n    },\n\n    zScores: function(array) {\n      const mean = Utils.stat.mean(array);\n      const standardDeviation = Utils.stat.standardDeviation(array);\n      return array.map(function(num) {\n        return (num - mean) / standardDeviation;\n      });\n    },\n  };\n\n  /**\n   * @param schema {string} http or https\n   * @param host {string}\n   * @param port {number}\n   * @returns {string}\n   */\n  static buildUrl = (host: string, port: number, schema: string = 'http') => {\n    return `${schema}://${host}${port ? `:${port}` : ''}`;\n  };\n\n  //makes a timestamp\n  static getTimeStamp() {\n    const now = new Date();\n    return (\n      now.getFullYear() +\n      '-' +\n      (now.getMonth() + 1) +\n      '-' +\n      now.getDate() +\n      ' ' +\n      now.getHours() +\n      ':' +\n      (now.getMinutes() < 10 ? '0' + now.getMinutes() : now.getMinutes() + ':' + '00')\n    );\n  }\n\n  /***\n   * Builds node input data into an array\n   * @param array\n   */\n  static sum = array => array.reduce((cv, pv) => cv + pv, 0);\n\n  /**\n   * Creates a copy of the provided value, excluding non-serializable values\n   */\n  static onlySerializable(value: any): any {\n    return JSON.parse(JSON.stringify(value));\n  }\n\n  /***\n   * Clone object\n   * @param obj\n   * @param target\n   * @returns {any}\n   */\n  static cloneObject(obj: any, target?: any): any {\n    if (obj == null) return null;\n    let r = JSON.parse(JSON.stringify(obj));\n    if (!target) return r;\n\n    for (let i in r) target[i] = r[i];\n    return target;\n  }\n\n\n  /**\n   * @param val {any} value to be parsed\n   * @param type {string} type need to parsed\n   * Three state:\n   * 1. undefined: when we don't value input connected\n   * 2. null: connected but have no value (for text-box '' is treated as null)\n   * 3. Real value\n   */\n  static parseValue(val: any, type: string): any {\n    const typeofVal: string = typeof val;\n\n    if (val === null && type === 'string' && typeofVal !== 'string') return '';\n    if (val == null) return val; // undefined or null\n\n    if (type === 'number' && typeofVal !== 'number') {\n      if (typeofVal === 'boolean') return val ? 1 : 0;\n      return isNaN(parseFloat(val)) ? null : parseFloat(val); // non-parsable val as null\n    } else if (type === 'string' && typeofVal !== 'string') {\n      return JSON.stringify(val);\n    } else if (type === 'boolean' && typeofVal !== 'boolean') {\n      return isNull(val) || val === '' ? null : /true|1/gi.test(val);\n    } else if (type === 'json') {\n      const originalVal = val;\n      val = {};\n      if (typeofVal === 'string') {\n        try {\n          val = JSON.parse(originalVal);\n        } catch (e) {}\n      } else if (typeofVal === 'object') {\n        try {\n          val = JSON.parse(JSON.stringify(originalVal));\n        } catch (e) {}\n      }\n    }\n    return val;\n  }\n\n  static formatValue(val: any): string {\n    if (val == null) return '';\n    return this.formatAsPerValueType(val);\n  }\n\n  static formatNodeInOut(val: any): string {\n    if (val === null) return 'null';\n    if (val === '') return 'null'; // display '' as 'null' since we are treating text-box '' as null\n    if (val === undefined) return undefined;\n    return this.formatAsPerValueType(val);\n  }\n\n  private static formatAsPerValueType(val: any): string {\n    if (typeof val === 'boolean') {\n      val = val ? 'true' : 'false';\n    } else if (typeof val === 'number') {\n      val = parseFloat(val.toFixed(3)).toString();\n    } else if (typeof val === 'object') {\n      try {\n        JSON.parse(JSON.stringify(val));\n      } catch (e) {\n        return '[object]';\n      }\n      val = JSON.stringify(val);\n    }\n    return val;\n  }\n\n  static hasInput(data): boolean {\n    return data !== undefined;\n  }\n\n  static hasValidInput(data, nullable): boolean {\n    if (nullable) {\n      return data !== undefined;\n    }\n    return data != null && data !== ''; // `null`, `undefined` and string null i.ie `''` are needed to be checked\n  }\n\n  /**\n   * Get current time\n   * @returns {number}\n   */\n  static getTime(): number {\n    return typeof performance != 'undefined' ? performance.now() : Date.now();\n  }\n\n  static toFixedNumber(value: number, digits: number) {\n    let pow = Math.pow(10, digits);\n    return +(Math.round(value * pow) / pow);\n  }\n\n  /**\n   * @Deprecated: Use MathUtils::clamp\n   */\n  static clamp = function(value: number, min: number, max: number): number {\n    return Math.min(Math.max(value, min), max);\n  };\n\n  static remap = function(value: number, inMin: number, inMax: number, outMin: number, outMax: number): number {\n    value = Number(value);\n    inMin = Number(inMin);\n    inMax = Number(inMax);\n    outMin = Number(outMin);\n    outMax = Number(outMax);\n    if (value > inMax) value = inMax;\n    else if (value < inMin) value = inMin;\n    return ((value - inMin) / (inMax - inMin)) * (outMax - outMin) + outMin;\n  };\n\n  static renameKey = (old_key: string, new_key: string) => (instance: object) => {\n    if (old_key === new_key) return instance;\n    const cloned = {\n      ...instance,\n      [new_key]: instance[old_key],\n    };\n    delete cloned[old_key];\n    return cloned;\n  };\n\n  // Shade, Blend and Convert a Web Color\n  static pSBC = (percentageChange, fromColor, toColor: string = undefined, useLinear = false) => {\n    let r,\n      g,\n      b,\n      a,\n      P,\n      f,\n      t,\n      h,\n      i = parseInt,\n      m = Math.round,\n      isToColorString = typeof toColor == 'string';\n    if (\n      typeof percentageChange != 'number' ||\n      percentageChange < -1 ||\n      percentageChange > 1 ||\n      typeof fromColor != 'string' ||\n      (fromColor[0] != 'r' && fromColor[0] != '#') ||\n      (toColor && !isToColorString)\n    )\n      return null;\n    const pSBCr = d => {\n      let n = d.length,\n        x = { r: 0, g: 0, b: 0, a: 0 };\n      if (n > 9) {\n        ([r, g, b, a] = d = d.split(',')), (n = d.length);\n        if (n < 3 || n > 4) return null;\n        (x.r = i(r[3] == 'a' ? r.slice(5) : r.slice(4))), (x.g = i(g)), (x.b = i(b)), (x.a = a ? parseFloat(a) : -1);\n      } else {\n        if (n == 8 || n == 6 || n < 4) return null;\n        if (n < 6) d = '#' + d[1] + d[1] + d[2] + d[2] + d[3] + d[3] + (n > 4 ? d[4] + d[4] : '');\n        d = i(d.slice(1), 16);\n        if (n == 9 || n == 5)\n          (x.r = (d >> 24) & 255), (x.g = (d >> 16) & 255), (x.b = (d >> 8) & 255), (x.a = m((d & 255) / 0.255) / 1000);\n        else (x.r = d >> 16), (x.g = (d >> 8) & 255), (x.b = d & 255), (x.a = -1);\n      }\n      return x;\n    };\n    (h = fromColor.length > 9),\n      (h = isToColorString ? (toColor.length > 9 ? true : toColor == 'c' ? !h : false) : h),\n      (f = pSBCr(fromColor)),\n      (P = percentageChange < 0),\n      (t =\n        toColor && toColor != 'c'\n          ? pSBCr(toColor)\n          : P\n          ? { r: 0, g: 0, b: 0, a: -1 }\n          : { r: 255, g: 255, b: 255, a: -1 }),\n      (percentageChange = P ? percentageChange * -1 : percentageChange),\n      (P = 1 - percentageChange);\n    if (!f || !t) return null;\n    if (useLinear)\n      (r = m(P * f.r + percentageChange * t.r)),\n        (g = m(P * f.g + percentageChange * t.g)),\n        (b = m(P * f.b + percentageChange * t.b));\n    else\n      (r = m((P * f.r ** 2 + percentageChange * t.r ** 2) ** 0.5)),\n        (g = m((P * f.g ** 2 + percentageChange * t.g ** 2) ** 0.5)),\n        (b = m((P * f.b ** 2 + percentageChange * t.b ** 2) ** 0.5));\n    (a = f.a), (t = t.a), (f = a >= 0 || t >= 0), (a = f ? (a < 0 ? t : t < 0 ? a : a * P + t * percentageChange) : 0);\n    if (h) return 'rgb' + (f ? 'a(' : '(') + r + ',' + g + ',' + b + (f ? ',' + m(a * 1000) / 1000 : '') + ')';\n    else\n      return (\n        '#' +\n        (4294967296 + r * 16777216 + g * 65536 + b * 256 + (f ? m(a * 255) : 0))\n          .toString(16)\n          .slice(1, f ? undefined : -2)\n      );\n  };\n\n  static formatAndTrimValue(val: any): string {\n    const typeofVal = typeof val;\n    if (val != null && (typeofVal === 'string' || typeofVal === 'object')) {\n      if (typeofVal === 'object') {\n        val = JSON.stringify(val);\n      }\n      if (val.length > 30) val = val.substr(0, 30) + '...';\n      return val;\n    }\n    return val;\n  }\n\n  static copyToClipboard(text): boolean {\n    const textarea = document.createElement('textarea');\n    textarea.textContent = text;\n    textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      return document.execCommand('copy'); // Security exception may be thrown by some browsers.\n    } catch (ex) {\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n\n  static download(filename, text) {\n    const element = document.createElement('a');\n    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n    element.setAttribute('download', filename);\n\n    element.style.display = 'none';\n    document.body.appendChild(element);\n\n    element.click();\n\n    document.body.removeChild(element);\n  }\n\n  static WEEKDAYS = [null, 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];\n\n  static getISOday(day: string) {\n    return Utils.WEEKDAYS.indexOf(day.toLowerCase());\n  }\n\n  static sleep = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));\n}\n","export type Constructor<T = {}> = new (...args: any[]) => T;\n\n// export class EnumHelper {\n//   private constructor() {\n//   }\n//\n//   static toOpts = <E extends typeof Enumify>(enumType: E, convert: (e: E) => string): { text: string; value: any; }[] => {\n//     return enumType.enumKeys.map(k => {\n//       return { text: convert(enumType.enumValueOf(k) as E), value: k };\n//     });\n//   };\n//\n// }\n\nexport const isNull = (value: any): boolean => value == null; // undefined or null\n\nexport const isNotNull = (value: any): boolean => !isNull(value);\n\nexport const isJSON = (value: any): boolean => isNotNull(value) && (typeof value === 'object' || Array.isArray(value));\n\nexport const isString = (value: any): boolean => {\n  return typeof value === 'string' || value instanceof String;\n};\n\nexport const isGreaterThanZero = (v: any): boolean => {\n  return isNumeric(v) && +v > 0;\n};\n\nexport const isEmpty = (value: any): boolean => {\n  if (isNull(value)) {\n    return true;\n  }\n  if (value instanceof Array) {\n    return value.length === 0;\n  }\n  if (value instanceof Object) {\n    return Object.keys(value).length === 0;\n  }\n  if (value instanceof String) {\n    return value.trim() === '';\n  }\n  return value.toString().trim() === '';\n};\n\nexport const toLowerSnakeCase = (label: string): string => {\n  return isNull(label)\n         ? null\n         : label\n           .toString()\n           .toLowerCase()\n           .replace(/-+\\s+/g, '_');\n};\n\n\nexport function parseBool(str) {\n  if (str.length == null) {\n    return str == 1 ? true : false;\n  } else {\n    return str == \"true\" ? true : false;\n  }\n}\n\n\nexport const isFunction = (func: any): boolean => func && {}.toString.call(func) === '[object Function]';\n\nexport const isNumeric = (n): boolean => !isNaN(parseFloat(n)) && isFinite(n);\n\nexport const convertToNumber = (value: any, strict: boolean = false): number => {\n  if (isNull(value)) {\n    return null;\n  }\n  let inString = value.toString();\n  let n = +inString;\n  if (isNumeric(n) && !/^\\s*$/.test(inString)) {\n    return n;\n  }\n  if (strict) {\n    throw new Error('Invalid number');\n  }\n  return null;\n};\n\nexport const Generator = {\n  map: (generator, mapper: Function) =>\n    function* (...args) {\n      for (const x of generator(...args)) yield mapper(x);\n    },\n  filter: (generator, filter: Function) =>\n    function* (...args) {\n      for (const x of generator(...args)) if (filter(x)) yield x;\n    },\n};\n\nexport const range = function* (from: number, to: number, step: number = 1) {\n  let i      = 0,\n      length = ~~((to - from) / step) + 1;\n  while (i < length) yield from + i++ * step;\n};\n\nexport const union = (...collections): Set<any> => collections.reduce((c, l) => new Set([...c, ...l]), new Set());\n\nexport const unionToArray = (...collections): Array<any> => [...union(...collections)];\n\nexport const mapToObject = <V1, V2>(obj: { [key: string]: V1 }, keyMapper: (k, v: V1) => any,\n                                    valMapper: (k, v: V1) => V2): { [key: string]: V2 } => {\n  return obj ? Object.keys(obj).reduce((r, k) => ({ ...r, ['' + keyMapper(k, obj[k])]: valMapper(k, obj[k]) }), {})\n             : {};\n};\n\nexport const mapToObjectSameKey = <V1, V2>(obj: { [key: string]: V1 },\n                                           valMapper: (k, v: V1) => V2): { [key: string]: V2 } => {\n  return mapToObject(obj, (k, _) => k, valMapper);\n};\n\nexport const arrayToObject = <T, V>(arr: Array<T>, keyMapper: (o: T, idx?: number) => any,\n                                    valMapper: (o: T, idx?: number) => V): { [k: string]: V } => {\n  return arr.reduce((obj, k, idx) => ((obj['' + keyMapper(k, idx)] = valMapper(k, idx)), obj), {});\n};\n\nexport const objectOf = <V>(k: string | number, v: V): {} => {\n  const o = {};\n  o[k] = v;\n  return o;\n};\n","import * as moment from 'moment-timezone';\n\nexport enum TIME_TYPE {\n  DAYS = 'days',\n  HOURS = 'hours',\n  MINUTES = 'minutes',\n  SECONDS = 'seconds',\n  MILLISECONDS = 'milliseconds',\n}\n\nexport default class TimeUtils {\n  /**\n   * convert ms to days, hours, min, sec, ms\n   * @returns {number}\n   * @param timeType\n   * @param timeOut\n   */\n  static timeConvert(timeOut: number, timeType: string): number {\n    // calculate time in milliseconds\n    switch (timeType) {\n      case TIME_TYPE.DAYS:\n        return timeOut * 24 * 60 * 60 * 1000;\n      case TIME_TYPE.HOURS:\n        return timeOut * 60 * 60 * 1000;\n      case TIME_TYPE.MINUTES:\n        return timeOut * 60 * 1000;\n      case TIME_TYPE.SECONDS:\n        return timeOut * 1000;\n      case TIME_TYPE.MILLISECONDS:\n        return timeOut;\n      default:\n        return -1;\n    }\n  }\n\n  /**\n   * Round the time to the nearest min\n   * For example if interval is 15min then it will convert value on pattern 1:00, 1:15, 1:30\n   * @param interval\n   * @param momentValue\n   */\n  static nearestFutureMinutes(interval, momentValue: moment.Moment): moment.Moment {\n    const roundedMinutes = Math.ceil(momentValue.minute() / interval) * interval;\n    return momentValue\n      .clone()\n      .minute(roundedMinutes)\n      .second(0)\n      .millisecond(0);\n  }\n\n  /**\n   * Converts time duration into a human readable string formats\n   * @param timeInMs {number} a valid numeric number\n   * @param format {number} formats are as follows:\n   * Case 1: ${DD}:${HH}:${mm}:${ss}:${sss} with pad start 0\n   * Case 2: DD${DD}:HH${HH}:MM${mm}:SS${ss}:MS${sss} no pad start\n   * Case 3: DD${DD}:HH${HH}:MM${mm}:SS${ss}:MS${sss} with pad start 0\n   * Case 4: D${DD}:H${HH}:M${mm}:S${ss}:MS${sss} no pad start\n   * Case 5: D${DD}:H${HH}:M${mm}:S${ss}:MS${sss} with pad start 0\n   * Default: ${DD}:${HH}:${mm}:${s}:${sss}\n   * @param timeType {string} Options: days, hours, minutes, seconds, milliseconds\n   * @returns {string}\n   */\n\n  static timeDisplay(timeInMs: number, format: number = 5, timeType?: string) {\n    let duration = timeInMs;\n    if (timeType && timeType != 'milliseconds') duration = TimeUtils.timeConvert(duration, timeType);\n    const mm = moment.duration(duration);\n\n    switch (format) {\n      case 0:\n        return (\n          mm.days().toString() + ':' + mm.hours() + ':' + mm.minutes() + ':' + mm.seconds() + ':' + mm.milliseconds()\n        );\n      case 1:\n        return (\n          'DD:HH:MM:SS:MS ' +\n          mm.days() +\n          ':' +\n          mm.hours() +\n          ':' +\n          mm.minutes() +\n          ':' +\n          mm.seconds() +\n          ':' +\n          mm.milliseconds()\n        );\n      case 2:\n        return (\n          'DD' +\n          mm.days() +\n          ':' +\n          'HH' +\n          mm.hours() +\n          ':' +\n          'MM' +\n          mm.minutes() +\n          ':' +\n          'SS' +\n          mm.seconds() +\n          ':' +\n          'MS' +\n          mm.milliseconds()\n        );\n      case 3:\n        return (\n          'DD' +\n          mm\n            .days()\n            .toString()\n            .padStart(2, '0') +\n          ':' +\n          'HH' +\n          mm\n            .hours()\n            .toString()\n            .padStart(2, '0') +\n          ':' +\n          'MM' +\n          mm\n            .minutes()\n            .toString()\n            .padStart(2, '0') +\n          ':' +\n          'SS' +\n          mm\n            .seconds()\n            .toString()\n            .padStart(2, '0') +\n          ':' +\n          'MS' +\n          mm\n            .milliseconds()\n            .toString()\n            .padStart(3, '0')\n        );\n      case 4:\n        return (\n          'D' +\n          mm.days() +\n          ':' +\n          'H' +\n          mm.hours() +\n          ':' +\n          'M' +\n          mm.minutes() +\n          ':' +\n          'S' +\n          mm.seconds() +\n          ':' +\n          'MS' +\n          mm.milliseconds()\n        );\n      case 5:\n        return (\n          'D' +\n          mm\n            .days()\n            .toString()\n            .padStart(2, '0') +\n          ':' +\n          'H' +\n          mm\n            .hours()\n            .toString()\n            .padStart(2, '0') +\n          ':' +\n          'M' +\n          mm\n            .minutes()\n            .toString()\n            .padStart(2, '0') +\n          ':' +\n          'S' +\n          mm\n            .seconds()\n            .toString()\n            .padStart(2, '0') +\n          ':' +\n          'MS' +\n          mm\n            .milliseconds()\n            .toString()\n            .padStart(3, '0')\n        );\n      default:\n        return (\n          mm.days().toString() + ':' + mm.hours() + ':' + mm.minutes() + ':' + mm.seconds() + ':' + mm.milliseconds()\n        );\n    }\n  }\n  static timeConvertPlus(d?: any) {\n    try {\n      const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n      const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n\n      let dts = d.toDateString();\n      let e = d.getTime();\n      let mnu = this.pad(d.getMonth() + 1, 2);\n      let mnt = d.getMonth();\n      let mn = monthNames[mnt];\n      let dy = dayNames[d.getDay()];\n      let dt = this.pad(d.getDate(), 2);\n      let yr = d.getFullYear();\n      let hr = d.getHours();\n      let mi = d.getMinutes();\n      let ny = Math.ceil((d - <any>new Date(d.getFullYear(), 0, 1)) / 86400000);\n      let h = this.pad(hr, 2);\n      let m = this.pad(mi, 2);\n      let s = this.pad(d.getSeconds(), 2);\n      let mil = this.pad(d.getMilliseconds(), 3);\n\n      // Get hour in 12hr format\n      let thr = null;\n      if (hr === 0) {\n        thr = 12;\n      } else if (hr > 12) {\n        thr = hr - 12;\n      } else {\n        thr = hr;\n      }\n      thr = '' + thr;\n\n      // Calculate if AM or PM\n      let amp = hr * 60 + mi;\n      if (amp < 720) {\n        amp = 'AM';\n      } else {\n        amp = 'PM';\n      }\n      let hm = h + ':' + m;\n      let hms = h + ':' + m + ':' + s;\n      let ms = m + ':' + s;\n      let date = dts;\n      let yearMonthDay = '' + yr + '-' + mnu + '-' + dt;\n      let year = '' + yr;\n      let month = mn;\n      let monthAsNumber = mnu;\n      let dayAsNumber = dt;\n      let dayOfYearNumber = '' + ny;\n      let day = dy;\n      let hourAsAmPm = thr;\n      let hour = h;\n      let timeHourMin = hm;\n      let time = hms;\n      let minute = m;\n      let minutesSeconds = ms;\n      let seconds = s;\n      let milliseconds = mil;\n      let epoch = '' + e;\n      let rawDate = d;\n      let pmOrAm = amp;\n\n      return {\n        date: date,\n        yearMonthDay: yearMonthDay,\n        year: year,\n        month: month,\n        monthAsNumber: monthAsNumber,\n        dayAsNumber: dayAsNumber,\n        dayOfYearNumber: dayOfYearNumber,\n        day: day,\n        pmOrAm: pmOrAm,\n        hourAsAmPm: hourAsAmPm,\n        hour: hour,\n        timeHourMin: timeHourMin,\n        time: time,\n        minute: minute,\n        minutesSeconds: minutesSeconds,\n        seconds: seconds,\n        milliseconds: milliseconds,\n        epoch: epoch,\n        rawDate: rawDate,\n      };\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  private static pad(num: string, size: number) {\n    let s = num + '';\n    while (s.length < size) s = '0' + s;\n    return s;\n  }\n}\n","import { Node} from './node';\nimport { convertType, InputSetting, NodeInput, NodeOutput, NodeSetting, SettingType, Type } from './node-io';\nimport Utils from './utils';\n\nexport class FlexibleNode extends Node {\n  nullableInputs: boolean = true;\n  dynamicInputsExist: boolean = true;\n  dynamicOutputsExist: boolean = false;\n  dynamicSettingsExist: boolean = true;\n  /**\n   * You can override this field if you have different setting name than `inputs` for reading inputs counts\n   * @returns {string} field name\n   */\n  dynamicInputsField: string = 'inputs';\n  /**\n   * You can override this field if you have different setting name than `outputs` for reading inputs counts\n   * @returns {string} field name\n   */\n  dynamicOutputsField: string = 'outputs';\n  /**\n   * For name convention on output\n   * Example:\n   * 0 for in1, in2, ...\n   * 1 for select, in1, in2, ...\n   * 2 for select, enable, in1, in2, ...\n   */\n  dynamicInputStartPosition: number = 0;\n  /**\n   * Dynamic input start name\n   * Example (for in):\n   * `[in 1]`, `[in 2]` will be inputs name\n   * `in1`, `in2` will be settings keys and `in 1` and `in 2` will be settings description\n   */\n  dynamicInputsStartName: string = 'in';\n  dynamicOutputsStartName: string = 'out';\n  dynamicInputsType: Type = Type.ANY;\n  dynamicOutputsType: Type = Type.ANY;\n  dynamicMinInputs: number = 2;\n  dynamicMaxInputs: number = 100;\n  dynamicMinOutputs: number = 2;\n  dynamicMaxOutputs: number = 100;\n  dynamicDefaultInputs: number = 2;\n  dynamicDefaultOutputs: number = 2;\n\n  constructor() {\n    super();\n  }\n\n  setup() {\n    if (this.dynamicInputsExist) {\n      this.settings['inputs'] = NodeSetting.create({\n        description: 'Inputs count',\n        value: this.dynamicDefaultInputs,\n        type: SettingType.NUMBER,\n      });\n    }\n    if (this.dynamicOutputsExist) {\n      this.settings['outputs'] = NodeSetting.create({\n        description: 'Outputs count',\n        value: this.dynamicDefaultOutputs,\n        type: SettingType.NUMBER,\n      });\n    }\n  }\n\n  /**\n   * It invokes right after finishing the constructor call\n   */\n  init() {\n    if (this.dynamicInputsExist) {\n      this.changeDynamicInputsAndSettings(false);\n    }\n    if (this.dynamicOutputsExist) {\n      this.addDynamicOutputsOnRange(false);\n    }\n  }\n\n  onAfterSettingsChange() {\n    if (this.dynamicInputsExist) {\n      this.changeDynamicInputsAndSettings();\n    }\n    if (this.dynamicOutputsExist) {\n      this.addDynamicOutputsOnRange();\n    }\n  }\n\n  /**\n   * Adds inputs dynamically as per the settings['inputs'] value\n   */\n  addDynamicInputsOnRange = (save: boolean = true): void => {\n    const count = this.dynamicInputsCount();\n    const targetCount = Utils.clamp(count, this.dynamicMinInputs, this.dynamicMaxInputs);\n    const currentCount = this.getInputsCount() - this.dynamicInputStartPosition;\n    const addedInputsCount = targetCount - currentCount;\n\n    if (addedInputsCount > 0) {\n      // add\n      for (let i = 0; i < addedInputsCount; i++) this.addInputWithName();\n    } else if (addedInputsCount < 0) {\n      // remove\n      const inputCount = this.getInputsCount();\n      for (let i = inputCount; i > inputCount + addedInputsCount; i--) {\n        this.removeInput(i - 1);\n      }\n    }\n    save && this.updateNodeInput();\n  };\n\n  /**\n   * Adds outputs dynamically as per the settings['outputs'] value\n   */\n  addDynamicOutputsOnRange = (save: boolean = true): void => {\n    const count = this.dynamicOutputsCount();\n    const targetCount = Utils.clamp(count, this.dynamicMinOutputs, this.dynamicMaxOutputs);\n    const currentCount = this.getOutputsCount();\n    const addedOutputsCount = targetCount - currentCount;\n\n    if (addedOutputsCount > 0) {\n      // add\n      for (let i = 0; i < addedOutputsCount; i++) this.addOutputWithName();\n    } else if (addedOutputsCount < 0) {\n      // remove\n      const inputCount = this.getOutputsCount();\n      for (let i = inputCount; i > inputCount + addedOutputsCount; i--) {\n        this.removeOutput(i - 1);\n      }\n    }\n    save && this.updateNodeOutput();\n  };\n\n  settingWiseDynamicInputsAndSettingsUpdate = (save: boolean = true) => {\n    const startingCount = this.getInputsCount();\n    this.addDynamicInputsOnRange(save);\n    const targetCount = this.getInputsCount();\n    this.addDynamicSettings(startingCount, targetCount);\n  };\n\n  settingWiseDynamicInputsAndSettingsUpdateForBoolean = (save: boolean = true) => {\n    this.dynamicInputsType = Type.BOOLEAN; // if not assigned\n    const startingCount = this.getInputsCount();\n    this.addDynamicInputsOnRange(save);\n    const targetCount = this.getInputsCount();\n    const name = this.dynamicInputsStartName;\n    for (let i = startingCount; i < targetCount; i++) {\n      if (!this.settings[`${name} ${this.dynamicIndex(i)}`]) {\n        this.settings[`${name} ${this.dynamicIndex(i)}`] = NodeSetting.create({\n          description: `${name} ${this.dynamicIndex(i)}`,\n          type: SettingType.DROPDOWN,\n          config: {\n            items: [\n              { value: false, text: 'false' },\n              { value: true, text: 'true' },\n              { value: null, text: 'null' },\n            ],\n          },\n          value: null,\n        });\n      }\n    }\n    for (let i = targetCount; i < startingCount; i++) {\n      delete this.settings[`${name} ${this.dynamicIndex(i)}`];\n    }\n  };\n\n  private changeDynamicInputsAndSettings(save: boolean = true) {\n    if (this.dynamicSettingsExist) {\n      if (this.dynamicInputsType === Type.BOOLEAN) {\n        this.settingWiseDynamicInputsAndSettingsUpdateForBoolean(save);\n      } else {\n        this.settingWiseDynamicInputsAndSettingsUpdate(save);\n      }\n    } else {\n      this.addDynamicInputsOnRange(save);\n    }\n  }\n\n  /**\n   * To read total number of inputs for dynamic input update\n   * @returns {number} total dynamic input count\n   */\n  public dynamicInputsCount = (): number => this.settings[this.dynamicInputsField].value;\n\n  public dynamicOutputsCount = (): number => this.settings[this.dynamicOutputsField].value;\n\n  private getInputSetting() {\n    return {\n      exist: this.dynamicSettingsExist,\n      nullable: this.nullableInputs,\n      hidden: false,\n    };\n  }\n\n  private addInputWithName = (): void => {\n    let id = this.getFreeInputId();\n    let setting: InputSetting = this.getInputSetting();\n    let name = `${this.dynamicInputsStartName} ${id + 1 - this.dynamicInputStartPosition}`;\n    if (this.dynamicSettingsExist) {\n      name = `[${name}]`;\n    }\n    let input: NodeInput = NodeInput.create({ name, type: this.dynamicInputsType, setting });\n    if (!this.inputs) this.inputs = {};\n    this.inputs[id] = input;\n    if (this['onInputAdded']) this['onInputAdded'](input);\n  };\n\n  private addOutputWithName = (): void => {\n    let id = this.getFreeOutputId();\n    let name = `${this.dynamicOutputsStartName} ${id + 1}`;\n    let output: NodeOutput = NodeOutput.create({ name: name, type: this.dynamicOutputsType });\n    if (!this.outputs) this.outputs = {};\n    this.outputs[id] = output;\n    if (this['onOutputAdded']) this['onOutputAdded'](output);\n  };\n\n  /**\n   * Adds settings text fields dynamically as per starting count\n   */\n  private addDynamicSettings = (startingCount, targetCount) => {\n    // We are treating '' as null, if we store null value on string type it will create issue on everywhere.\n    // For example: null + 'ability' = 'ability'\n    const value = SettingType.STRING ? '' : null;\n    const name: string = this.dynamicInputsStartName;\n    const type: SettingType = convertType(this.dynamicInputsType);\n    for (let i = startingCount; i < targetCount; i++) {\n      if (!this.settings[`${name} ${this.dynamicIndex(i)}`]) {\n        this.settings[`${name} ${this.dynamicIndex(i)}`] = NodeSetting.create({\n          description: `${name} ${this.dynamicIndex(i)}`,\n          value,\n          type: type,\n        });\n      }\n    }\n    for (let i = targetCount; i < startingCount; i++) {\n      delete this.settings[`${name} ${this.dynamicIndex(i)}`];\n    }\n  };\n\n  private dynamicIndex = (id): number => id + 1 - this.dynamicInputStartPosition;\n}\n","module.exports = require(\"logplease\");","const env = process?.env;\n\nconst config = {\n  rubix       : {\n    version: '1.7.4-5116d53',\n    buildNb: '',\n  },\n  secretKey   : env?.SECRET_KEY || '',\n  port        : parseInt(env?.PORT ?? '1313'),\n  dataDir     : env?.DATA_DIR,\n  loopInterval: parseInt(env?.LOOP_INTERVAL ?? '100'),\n  backendSync : {\n    enabled                    : /true|1/i.test(env?.BACKEND_ENABLED ?? 'false'),\n    baseUrl                    : env?.BACKEND_API ?? '',\n    nodeRefreshIntervalSeconds : parseInt(env?.NODE_DISTANCE ?? '60'),\n    pointRefreshIntervalSeconds: parseInt(env?.NODE_REFRESH_INTERVAL_SEC ?? '60'),\n    nodeDistance               : parseInt(env?.POINT_REFRESH_INTERVAL_SEC ?? '60'),\n  },\n  bsa         : {\n    baseURL : env?.BSA_BASEURL ?? '',\n    username: env?.BSA_USERNAME ?? '',\n    password: env?.BSA_PASSWORD ?? '',\n    paths   : {\n      measurement: {\n        path  : env?.BSA_PATHS_MEASUREMENT_PATH ?? '',\n        accept: env?.BSA_PATHS_MEASUREMENT_ACCEPT ?? '',\n      },\n      alarm      : {\n        path       : env?.BSA_PATHS_ALARM_PATH ?? '',\n        accept     : env?.BSA_PATHS_ALARM_ACCEPT ?? '',\n        contentType: env?.BSA_PATHS_ALARM_CONTENTTYPE ?? '',\n      },\n      device     : {\n        path: env?.BSA_PATHS_DEVICE_PATH ?? '',\n      },\n    },\n  },\n  ditto       : {\n    baseURL : env?.DITTO_BASEURL ?? '',\n    username: env?.DITTO_USERNAME ?? '',\n    password: env?.DITTO_PASSWORD ?? '',\n  },\n  pg          : {\n    baseURL: env?.PG_BASEURL ?? '',\n  },\n  influxDb    : {\n    protocol    : env?.INFLUX_DB_PROTOCOL ?? 'http',\n    host        : env?.INFLUX_DB_HOST ?? '',\n    port        : env?.INFLUX_DB_PORT ?? '',\n    databaseName: env?.INFLUX_DB_DB_NAME ?? '',\n    username    : env?.INFLUX_DB_USERNAME ?? '',\n    password    : env?.INFLUX_DB_PASSWORD ?? '',\n  },\n  influxDb2    : {\n    protocol    : env?.INFLUX_DB_2_PROTOCOL ?? 'http',\n    url         : env?.INFLUX_DB_2_URL ?? '',\n    token       : env?.INFLUX_DB_2_TOKEN ?? '',\n    bucket      : env?.INFLUX_DB_2_BUCKET ?? '',\n    org         : env?.INFLUX_DB_2_ORG ?? '',\n    username    : env?.INFLUX_DB_2_USERNAME ?? '',\n    password    : env?.INFLUX_DB_2_PASSWORD ?? '',\n  },\n  edge28      : {\n    baseURL: env?.EDGE_28_BASEURL ?? '',\n    port   : parseInt(env?.EDGE_28_PORT ?? '5000'),\n    apiVer : env?.EDGE_28_API_VER ?? '',\n  },\n  mqtt        : {\n    protocol: env?.MQTT_PROTOCOL ?? 'mqtt',\n    host    : env?.MQTT_HOST ?? '',\n    port    : parseInt(env?.MQTT_PORT ?? '1883'),\n    username: env?.MQTT_USERNAME ?? '',\n    password: env?.MQTT_PASSWORD ?? '',\n  },\n};\n\nexport const RUBIX_VERSION: string = `v${config.rubix.version}${config.rubix.buildNb && `-${config.rubix.buildNb}`}`;\nexport default config;\n","export const EDGES_PARENT_CONTAINER_TYPE = 'IoT/edges-container';\nexport const MODULES_PARENT_CONTAINER_TYPE = 'IoT/modules-container';\nexport const SERVICES_PARENT_CONTAINER_TYPE = 'IoT/services-container';\nexport const EDGE_CONTAINER_TYPE = 'IoT/edge';\nexport const NETWORK_CONTAINER_TYPE = 'IoT/network';\nexport const DEVICE_CONTAINER_TYPE = 'IoT/device';\nexport const GROUP_CONTAINER_TYPE = 'IoT/group';\nexport const POINT_NODE_TYPE = 'IoT/point';\nexport const SERVICE_NODE_TYPE = 'IoT/service';\nexport const MODULE_NODE_TYPE = 'IoT/module';\n\nexport const IOT_TYPES = [\n  EDGES_PARENT_CONTAINER_TYPE,\n  MODULES_PARENT_CONTAINER_TYPE,\n  SERVICES_PARENT_CONTAINER_TYPE,\n  EDGE_CONTAINER_TYPE,\n  NETWORK_CONTAINER_TYPE,\n  DEVICE_CONTAINER_TYPE,\n  GROUP_CONTAINER_TYPE,\n  POINT_NODE_TYPE,\n  SERVICE_NODE_TYPE,\n  MODULE_NODE_TYPE,\n];\n\nexport const MODBUS_RTU_NETWORK = 'protocols/modbus/modbus-rtu-network';\nexport const MODBUS_RTU_DEVICE = 'protocols/modbus/modbus-rtu-device';\nexport const MODBUS_RTU_POINT = 'protocols/modbus/modbus-rtu-point';\nexport const BACNET_NETWORK = 'protocols/bacnet/bacnet-network';\nexport const BACNET_DEVICE = 'protocols/bacnet/bacnet-device';\nexport const BACNET_POINT = 'protocols/bacnet/bacnet-point';\nexport const EDGE_28_NETWORK = 'protocols/nube/edge-28-network';\nexport const EDGE_28_INPUT = 'protocols/nube/edge-28-input';\nexport const EDGE_28_OUTPUT = 'protocols/nube/edge-28-output';\n\nexport const MQTT_NETWORK = 'protocols/mqtt/mqtt-network';\nexport const MQTT_POINT_WRITE = 'protocols/mqtt/mqtt-point-write';\nexport const MQTT_POINT_READ = 'protocols/mqtt/mqtt-point-read';\nexport const UNKNOWN_NODE = 'unknown/unknown';\n","import { Colors, create } from 'logplease';\n\nexport const db_logger = create('database', { color: Colors.Blue });\nexport const registry_logger = create('registry', { color: Colors.Blue });\nexport const reliability_logger = create('reliability', { color: Colors.Red });\nexport const node_service_logger = create('node-service', { color: Colors.Cyan });\n","import { unionToArray } from '../utils/helper';\nimport { UNKNOWN_NODE } from './constants';\nimport { Node } from './node';\nimport { AbstractRegistry } from './registry';\n\nexport class NodeTypeRegistry extends AbstractRegistry<any> {\n  private static _instance: NodeTypeRegistry;\n\n  private constructor() {\n    super();\n  }\n\n  public static instance(): NodeTypeRegistry {\n    if (!NodeTypeRegistry._instance) {\n      NodeTypeRegistry._instance = new NodeTypeRegistry();\n    }\n    return NodeTypeRegistry._instance;\n  }\n\n  /**\n   * Register a node class so it can be listed when the user wants to create a new one\n   * @param type name of the node and path\n   * @param node_class class containing the structure of a node\n   * @param parentContainerNodeType some menus should be shown only if parentContainerNodeType is there\n   * @param show_in_menu\n   * @param recursive same container node inside the parent container node\n   * @param alwaysInsideContainer\n   */\n  static registerNodeType(type: string, node_class: any, parentContainerNodeType: string = null,\n                          show_in_menu: boolean                                          = true,\n                          recursive: boolean                                             = false,\n                          alwaysInsideContainer: boolean                                 = false): void {\n    if (!(node_class.prototype instanceof Node)) {\n      throw `Can't register node of type [${type}]. Class must inherit Node base class!`;\n    }\n    node_class.type = type;\n    node_class.category = type.substr(0, type.lastIndexOf('/'));\n    node_class.node_name = type.substr(type.lastIndexOf('/') + 1, type.length);\n    node_class.show_in_menu = show_in_menu;\n    node_class.parentContainerNodeType = parentContainerNodeType;\n    node_class.recursive = recursive;\n    node_class.onlyInsideContainer = alwaysInsideContainer;\n    //TODO should make node_type object\n    let node: Node = new node_class();\n    node_class.icon = node.iconImageUrl;\n    node_class.color = node.headerColor;\n    node_class.title = node.title || node.type;\n    NodeTypeRegistry.instance().register(node_class, true, type);\n  }\n\n  /**\n   * Verify node type in registry. If it is not existed, then fallback to {@link UNKNOWN_NODE}\n   *\n   * @returns {string} Node Type id, never null\n   */\n  lookupNodeType(type: string): string {\n    return this.has(type) ? type : UNKNOWN_NODE;\n  }\n\n  /**\n   * Returns a list of node types matching one category\n   * @param category category name\n   * @returns {Array} array with all the node classes\n   */\n  getNodeTypesInCategory(category: string): Array<any> {\n    return Object.values(this._registry).filter(n => n.category == (category || null));\n  }\n\n  nodeIsInCategory(category: string) {\n    return n => n.category == (category || null);\n  }\n\n  /**\n   * Returns a list with all the node type categories\n   * @returns {Array} array with all the names of the categories\n   */\n  getNodeTypesCategories(): Array<any> {\n    return unionToArray(Object.values(this._registry)\n                              .filter(n => !!n.category && n.show_in_menu)\n                              .map(n => n.category));\n  }\n\n  protected enableDebug(): boolean {\n    return false;\n  }\n\n  protected createKey(obj: any): string | number {\n    return undefined;\n  }\n}\n","import { isNotNull } from './helper';\n\n/**\n * ID generator\n * //TODO: Workaround until using UUID. To avoid collision\n */\nexport class IdGenerator {\n  static readonly UNINITIALIZED = -1;\n  static readonly ROOT = 0;\n  static readonly CONTAINER_HASH_KEY = 3;\n  static readonly NODE_HASH_KEY = 11;\n  private static readonly PRIME = 31;\n\n  static genNodeId(startingIdx: number = 0, id?: number): number {\n    return this.createGuardId(IdGenerator.NODE_HASH_KEY * IdGenerator.PRIME, startingIdx ?? 0, id ?? 1);\n    // return this.createHashId(IdGenerator.NODE_HASH_KEY, startingIdx ?? 0, id ?? ++startingIdx);\n  }\n\n  static genContainerId(startingIdx: number = 0, id?: number): number {\n    return this.createGuardId(IdGenerator.CONTAINER_HASH_KEY * IdGenerator.PRIME, startingIdx ?? 0, id ?? 1);\n    // return this.createHashId(IdGenerator.CONTAINER_HASH_KEY, startingIdx ?? 0, id ?? ++startingIdx);\n  }\n\n  static createNodeId(cId: number | string, nId: number | string) {\n    if (isNotNull(cId) && isNotNull(nId)) {\n      return `c${cId}n${nId}`;\n    }\n    return null;\n  }\n\n  private static createHashId(hashKey: number, ...values: number[]): number {\n    let hash = hashKey;\n    for (let v of values) {\n      hash = IdGenerator.PRIME * hash + v;\n    }\n    return hash;\n  }\n\n  private static createGuardId(guardKey: number, startIdx: number, step: number = 1): number {\n    return guardKey + startIdx + step;\n  }\n\n  private IdGenerator() {\n  }\n}\n","module.exports = require(\"moment-timezone\");","module.exports = require(\"axios\");","module.exports = require(\"lodash\");","import { ErrorHandler } from '../utils/decorators';\nimport { IOT_TYPES } from './constants';\nimport { Container, reassignContainer } from './container';\nimport { Node } from './node';\nimport { NODE_INFO } from './node-info';\nimport {\n  ContainerRegistryMetadata,\n  GlobalNodeRegistryMetadata,\n  IFolderNode,\n  SerializedFolderNode,\n} from './node-interface';\nimport { NodeSetting, SettingType } from './node-io';\nimport { Deserializable, Serializable } from './serializable';\n\n/**\n * Container: special node that contains a container of other nodes\n */\nexport class ContainerNode extends Node implements IFolderNode, Serializable<SerializedFolderNode>,\n                                                   Deserializable<SerializedFolderNode> {\n\n  private static NAME: string = 'Folder';\n  sub_container: Container;\n  /**\n   * List of node type identifiers that can be created in specifically in this container node, but are not normally\n   * listed in the menu\n   */\n  extra_node_types: string[];\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.container.folder.title;\n    this.description = NODE_INFO.container.folder.description;\n    this.settings['name'] = NodeSetting.create({ description: 'Folder name', type: SettingType.STRING });\n    this.sub_container = <Container>{};\n  }\n\n  static create(folderNode: SerializedFolderNode, isNew: boolean, containerRegistry?: ContainerRegistryMetadata,\n                globalRegistry?: GlobalNodeRegistryMetadata) {\n    return new ContainerNode().deserialize(folderNode, isNew, containerRegistry, globalRegistry);\n  }\n\n  shouldRejectNodeType(type: string): boolean {\n    return IOT_TYPES.includes(type); // IoT nodes can only be created in special container nodes\n  }\n\n  onCreated() {\n  }\n\n  onAdded() {\n    this.applyTitle();\n    super.onAdded();\n  }\n\n  afterAdded() {\n    super.afterAdded();\n  }\n\n  onAfterSettingsChange(oldSettings, oldName?: any) {\n    this.applyTitle();\n  }\n\n  onRemoved() {\n  }\n\n  serialize(): SerializedFolderNode {\n    return { ...super.serialize(), sub_container: this.sub_container?.serialize() };\n  }\n\n  @ErrorHandler\n  deserialize(serializedObj: SerializedFolderNode, isNew?: boolean, containerRegistry?: ContainerRegistryMetadata,\n              globalRegistry?: GlobalNodeRegistryMetadata): ContainerNode {\n    return reassignContainer(<ContainerNode>super.deserialize(serializedObj, isNew), serializedObj.sub_container,\n                             containerRegistry, globalRegistry);\n  }\n\n  getExtraMenuOptions(renderer, editor) {\n    let that = this;\n    return [\n      {\n        content: 'Open',\n        callback: function () {\n          editor.openContainer(that.sub_container.id);\n        },\n      },\n      null, //null for horizontal line\n    ];\n  }\n\n  onExecute() {\n    if (this.isUpdated) this.isRecentlyActive = true;\n    this.sub_container.runStep();\n  }\n\n  protected applyTitle() {\n    this.settings['name'].value = this.settings.name?.value ?? `${ContainerNode.NAME} ${this.sub_container.id}`;\n    this.title = this.title === ContainerNode.NAME ? this.settings['name'].value : this.title;\n    this.sub_container.name = this.title;\n  }\n\n}\n","import { isFunction } from './helper';\nimport { reliability_logger } from './loggers';\n\nconst logger = reliability_logger;\n\n//TODO: should be notify in frontend instead of using `alert`\nfunction logError(error, ...args: any[]) {\n  logger.error(error);\n  if (typeof alert !== 'undefined') {\n    alert(error.toString());\n  }\n}\n\nexport const ErrorHandler = (target: any, propertyKey: string, descriptor: any) => {\n  const fn = descriptor.value!;\n  descriptor.value = function DescriptorValue(...args: any[]) {\n    try {\n      return fn.apply(this, args);\n    } catch (error) {\n      logError(error, args);\n    }\n  };\n  return descriptor;\n};\n\nexport const ErrorCallbackHandler = (errHandler: Function) => {\n  return (target: any, propertyKey: string, descriptor: any) => {\n    const fn = descriptor.value!;\n    descriptor.value = function DescriptorValue(...args: any[]) {\n      try {\n        return fn.apply(this, args);\n      } catch (error) {\n        logError(error, args);\n        if (isFunction(errHandler)) {\n          return errHandler(error, args);\n        }\n      }\n    };\n    return descriptor;\n  };\n};\n\nexport const AsyncErrorHandler = {};\n","import { Colors, create } from 'logplease';\nimport { LinkResult } from '../shared/link-result';\nimport { ContainerRegistryValidator, NodeRegistryValidator } from '../shared/validator';\nimport { NotFoundError } from '../utils/errors';\nimport { isEmpty, isNull } from '../utils/helper';\nimport { IdGenerator } from '../utils/id-generator';\nimport { Node } from './node';\nimport { createNodeDbHelper, NodeDbHelper } from './node-db-helper';\nimport { ContainerRegistryMetadata, IContainer, INode } from './node-interface';\nimport { IOType } from './node-io';\nimport { Deserializable, Serializable } from './serializable';\n\nconst logger = create('node-link', { color: Colors.Magenta });\n\ntype LinkAction = 'Connecting' | 'Connected' | 'Disconnecting' | 'Disconnected' | 'Moving' | 'Moved';\n\n/**\n * Represents simplest node io information\n */\nexport interface SlimNodeIO {\n  nodeId: number;\n  slot: number;\n  ioId?: string | number;\n}\n\nexport interface NodeLink {\n  /**\n   * Current container id\n   */\n  cid: number;\n  /**\n   * Represents to a specific node output.\n   * @see SlimNodeIO\n   */\n  source: SlimNodeIO;\n  /**\n   * Represents to one or many node inputs\n   * @see SlimNodeIO\n   */\n  targets: SlimNodeIO[];\n}\n\nexport const createNodeLink = (cid: number, source: SlimNodeIO, ...targets: SlimNodeIO[]): NodeLink => {\n  return { cid, source, targets };\n};\n\nexport const nodeIOtoMsg = (type: IOType, cid: number | string, ...nodeIO: SlimNodeIO[]): string => {\n  const msg = nodeIO.map(io => `node '${IdGenerator.createNodeId(cid, io.nodeId)}'-${type} '${io.ioId}'`).join(',');\n  return isEmpty(msg) ? msg : `[${msg}]`;\n};\n\nexport const compareNodeIO = (io1: SlimNodeIO, io2: SlimNodeIO): boolean => {\n  if (isNull(io1) || isNull(io2)) {\n    return false;\n  }\n  if (io1.nodeId !== io2.nodeId) {\n    return false;\n  }\n  if (io1.ioId && io2.ioId && io1.ioId === io2.ioId) {\n    return true;\n  }\n  return io1.slot === io2.slot;\n};\n\n/**\n * It is for legacy code. Should migrate later\n */\nexport interface LegacyLink {\n  target_node_id: number;\n  target_slot: number;\n  target_input_id?: number;\n}\n\nexport class Link implements SlimNodeIO, Serializable<SlimNodeIO>, Deserializable<LegacyLink | SlimNodeIO> {\n\n  nodeId: number;\n  slot: number;\n  ioId?: string | number;\n\n  constructor();\n  constructor(nodeId: number, slot: number);\n  constructor(nodeId: number, slot: number, ioId: string | number);\n  constructor(nodeId?: number, slot?: number, ioId?: string | number) {\n    this.nodeId = nodeId;\n    this.slot = slot;\n    this.ioId = ioId;\n  }\n\n  static create(object: Link | LegacyLink | { target_node_id: number, target_slot: number, target_input_id?: number }): Link {\n    return new Link().deserialize(object);\n  }\n\n  serialize(): SlimNodeIO {\n    return { ...this };\n  }\n\n  deserialize(obj: LegacyLink | SlimNodeIO): Link {\n    return new Link((<SlimNodeIO>obj).nodeId ?? (<LegacyLink>obj).target_node_id,\n                    (<SlimNodeIO>obj).slot ?? (<LegacyLink>obj).target_slot,\n                    (<SlimNodeIO>obj).ioId ?? (<LegacyLink>obj).target_input_id);\n  }\n}\n\nexport interface NodeLinkHandler {\n\n  /**\n   * Create new link between source node to one or many nodes\n   * @param {NodeLink} nodeLink\n   * @return {LinkResult}\n   */\n  create(nodeLink: NodeLink): LinkResult;\n\n  /**\n   * Create new link between source node to one or many nodes\n   * @param {NodeLink} nodeLink\n   * @param {boolean} lenient if true, if node link targets has any invalid, it will skip to create link. Otherwise,\n   * error will be thrown\n   * @return {LinkResult}\n   */\n  create(nodeLink: NodeLink, lenient?: boolean): LinkResult;\n\n  remove(nodeLink: NodeLink): LinkResult;\n\n  remove(nodeLink: NodeLink, lenient?: boolean): LinkResult;\n\n  move(type: IOType, fromNodeLink: NodeLink, toAnother: SlimNodeIO): LinkResult;\n\n  disconnectInput(cid: number, slimIO: SlimNodeIO): LinkResult;\n\n  disconnectOutput(cid: number, slimIO: SlimNodeIO): LinkResult;\n\n}\n\n/**\n * @deprecated Use {@link NodeLinkHandler}\n */\nexport interface LegacyLinkHandler {\n  readonly node: Node;\n\n  /**\n   * Recompute Input links\n   * @param {INode} node\n   */\n  recomputeInputLinks(node?: INode);\n\n  /**\n   * Recompute Output links\n   * @param {INode} node?\n   */\n  recomputeOutputLinks(node?: INode);\n\n}\n\n/**\n * @deprecated Use {@link createLinkHandler}\n */\nexport const createLegacyLinkHandler = (node: Node, dbHelper?: NodeDbHelper): LegacyLinkHandler => {\n  return new DefaultLinkHandler(node, dbHelper ?? createNodeDbHelper());\n};\n\nclass DefaultLinkHandler implements LegacyLinkHandler {\n  readonly node: Node;\n  private readonly dbHelper: NodeDbHelper;\n\n  constructor(node: Node, dbHelper: NodeDbHelper) {\n    this.node = node;\n    this.dbHelper = dbHelper;\n  }\n\n  recomputeInputLinks(n?: INode) {\n    let node = n ?? this.node;\n    let slot = -1;\n    for (const [inputId, input] of Object.entries(node.inputs)) {\n      if (input.setting.hidden) {\n        continue;\n      }\n      slot++;\n      if (isNull(input.link)) {\n        continue;\n      }\n      let link = input.link;\n      let targetNode = node.container.nodeRegistry().get(link.nodeId);\n      if (isNull(targetNode)) {\n        continue;\n      }\n      let outputId = link.ioId;\n      let outputSlot = link.slot;\n      let output = targetNode.outputs[outputId ?? outputSlot];\n      if (isNull(output) || isNull(output.links)) {\n        continue;\n      }\n      let number = output.links.findIndex(l => compareNodeIO(l, { nodeId: node.id, ioId: +inputId, slot }));\n      if (number === -1) {\n        continue;\n      }\n      output.links.splice(number, 1, new Link(node.id, slot, inputId));\n      this.dbHelper.update(<Node>targetNode, ['outputs']);\n    }\n    this.dbHelper.update(<Node>node, ['inputs']);\n  }\n\n  recomputeOutputLinks(n?: INode) {\n    let node = n ?? this.node;\n    let slot = -1;\n    Object.entries(node.outputs).forEach(([oId, output]) => {\n      slot++;\n      if (isEmpty(output.links)) {\n        return;\n      }\n      output.links.forEach(link => {\n        let target = node.container.nodeRegistry().get(link.nodeId);\n        const iId = link.ioId ?? link.slot;\n        if (isNull(target) || isNull(target.inputs[iId])) {\n          return;\n        }\n        target.inputs[iId].link = new Link(node.id, slot, oId);\n        this.dbHelper.update(<Node>target, ['inputs']);\n      });\n    });\n    this.dbHelper.update(<Node>node, ['outputs']);\n  }\n\n}\n\nexport const createLinkHandler = (registry: ContainerRegistryMetadata): NodeLinkHandler => {\n  return new DefaultNodeLinkHandler(registry);\n};\n\nclass DefaultNodeLinkHandler implements NodeLinkHandler {\n\n  protected readonly _registry: ContainerRegistryMetadata;\n\n  constructor(registry: ContainerRegistryMetadata) {\n    this._registry = registry;\n  }\n\n  private static msg(cId: number | string, bT: IOType, base: SlimNodeIO, rT?: IOType,\n                     ...references: SlimNodeIO[]): [string, string] {\n    return [nodeIOtoMsg(bT, cId, base), nodeIOtoMsg(rT, cId, ...references)];\n  }\n\n  private static msg1(action: LinkAction, len: number | 'all', msg: [string, string],\n                      direction: 'from' | 'to' = 'from') {\n    const first = direction === 'from' ? `from ${msg[0]}` : `to ${msg[0]}`;\n    const next = isEmpty(msg[1]) ? '' : `${direction === 'from' ? 'to' : 'from'} ${msg[1]}`;\n    const last = action.includes('ing') ? '...' : '';\n    return `${action} ${len} link(s) ${first} ${next}${last}`;\n  }\n\n  create(nodeLink: NodeLink, lenient?: boolean): LinkResult {\n    const msg = DefaultNodeLinkHandler.msg(nodeLink.cid, 'output', nodeLink.source, 'input', ...nodeLink.targets);\n    logger.info(DefaultNodeLinkHandler.msg1('Connecting', nodeLink.targets.length, msg));\n    const r = this.doCreate(nodeLink, lenient);\n    r.message = DefaultNodeLinkHandler.msg1('Connected', nodeLink.targets.length, msg);\n    return r;\n  }\n\n  remove(nodeLink: NodeLink, lenient?: boolean): LinkResult {\n    const cId = nodeLink.cid;\n    const container = ContainerRegistryValidator.check(cId, this._registry);\n    const msg = DefaultNodeLinkHandler.msg(cId, 'output', nodeLink.source, 'input', ...nodeLink.targets);\n    logger.info(DefaultNodeLinkHandler.msg1('Disconnecting', nodeLink.targets.length, msg));\n    const r = this.doDisconnectOutput(container, nodeLink.source, !lenient,\n                                      io => nodeLink.targets.some(v => compareNodeIO(v, io)));\n    r.message = DefaultNodeLinkHandler.msg1('Disconnected', nodeLink.targets.length, msg);\n    return r;\n  }\n\n  move(type: IOType, fromNode: NodeLink, toAnother: SlimNodeIO): LinkResult {\n    let newOne: NodeLink, base: SlimNodeIO;\n    if (type === 'input') {\n      if (fromNode.targets.length != 1) {\n        throw new Error(`Cannot move empty or more than one input's link to another node`);\n      }\n      newOne = createNodeLink(fromNode.cid, fromNode.source, toAnother);\n      base = fromNode.targets[0];\n    } else {\n      newOne = createNodeLink(fromNode.cid, toAnother, ...fromNode.targets);\n      base = fromNode.source;\n    }\n    const msg = DefaultNodeLinkHandler.msg(fromNode.cid, type, base, type, toAnother);\n    logger.info(DefaultNodeLinkHandler.msg1('Moving', fromNode.targets.length, msg));\n    const r = this.remove(fromNode, true).merge(this.doCreate(newOne, true, ...fromNode.targets));\n    r.message = DefaultNodeLinkHandler.msg1('Moved', fromNode.targets.length, msg);\n    return r;\n  }\n\n  disconnectInput(cid: number, slimIO: SlimNodeIO): LinkResult {\n    const msg = DefaultNodeLinkHandler.msg(cid, 'input', slimIO);\n    logger.info(DefaultNodeLinkHandler.msg1('Disconnecting', 'all', msg, 'to'));\n    return this.doDisconnectInput(ContainerRegistryValidator.check(cid, this._registry), slimIO, false);\n  }\n\n  disconnectOutput(cid: number, slimIO: SlimNodeIO): LinkResult {\n    const msg = DefaultNodeLinkHandler.msg(cid, 'output', slimIO);\n    logger.info(DefaultNodeLinkHandler.msg1('Disconnecting', 'all', msg));\n    return this.doDisconnectOutput(ContainerRegistryValidator.check(cid, this._registry), slimIO, false);\n  }\n\n  protected doCreate(nodeLink: NodeLink, lenient?: boolean, ...skipSourceLinks: SlimNodeIO[]): LinkResult {\n    const container = ContainerRegistryValidator.check(nodeLink.cid, this._registry);\n    const source = this.validateSource(container, nodeLink.source, true);\n    return nodeLink.targets\n                   .map(io => this.doConnect(container, source, io, !lenient, skipSourceLinks))\n                   .reduce((prev, current) => prev.merge(current), new LinkResult());\n  }\n\n  protected validateTarget(container: IContainer, current: SlimNodeIO,\n                           strict: boolean): { io: SlimNodeIO, link: SlimNodeIO } {\n    const n = NodeRegistryValidator.check(current.nodeId, container.nodeRegistry(), strict);\n    const inputId = current.ioId ?? current.slot;\n    const input = isNull(n) ? null : n.inputs[inputId];\n    if (strict && isNull(input)) {\n      throw new NotFoundError(`Not found input id ${inputId} in node ${IdGenerator.createNodeId(n.cid, n.id)}`);\n    }\n    return { io: isNull(input) ? null : current, link: isNull(input) || isNull(input.link) ? null : { ...input.link } };\n  }\n\n  protected validateSource(container: IContainer, current: SlimNodeIO,\n                           strict: boolean): { io: SlimNodeIO, links: SlimNodeIO[] } {\n    const n = NodeRegistryValidator.check(current.nodeId, container.nodeRegistry(), strict);\n    const outputId = current.ioId ?? current.slot;\n    const output = isNull(n) ? null : n.outputs[outputId];\n    if (strict && isNull(output)) {\n      throw new NotFoundError(`Not found output id ${outputId} in node ${IdGenerator.createNodeId(n.cid, n.id)}`);\n    }\n    return { io: isNull(output) ? null : current, links: (output?.links ?? []).map(link => <SlimNodeIO>{ ...link }) };\n  }\n\n  private doConnect(container: IContainer, source: { io: SlimNodeIO; links: SlimNodeIO[] }, target: SlimNodeIO,\n                    strict: boolean, skipSourceLinks: SlimNodeIO[]): LinkResult {\n    const msg = DefaultNodeLinkHandler.msg(container.id, 'output', source.io, 'input', target);\n    logger.debug(DefaultNodeLinkHandler.msg1('Connecting', 1, msg));\n    const r = this.doDisconnectInput(container, target, strict, skipSourceLinks);\n    if (r.hasInput(container.id, target.nodeId, target.ioId)) {\n      logger.debug(DefaultNodeLinkHandler.msg1('Connected', 1, msg));\n      const links = isEmpty(skipSourceLinks) ? source.links :\n                    source.links.filter(io1 => !skipSourceLinks.some(io2 => compareNodeIO(io1, io2)));\n      return r.push(container.id, target.nodeId, 'input', target.ioId, source.io)\n              .push(container.id, source.io.nodeId, 'output', source.io.ioId, ...[...links, target]);\n    }\n    return r;\n  }\n\n  private doDisconnectInput(container: IContainer, target: SlimNodeIO, strict: boolean,\n                            skipSourceLinks?: SlimNodeIO[]): LinkResult {\n    const targetIO = this.validateTarget(container, target, strict);\n    if (isNull(targetIO.io)) {\n      return new LinkResult();\n    }\n    const r = new LinkResult().push(container.id, target.nodeId, 'input', target.ioId);\n    if (isNull(targetIO.link)) {\n      return r;\n    }\n    const updated = this.validateSource(container, targetIO.link, false).links\n                        .filter(link => !compareNodeIO(link, target));\n    const links = isEmpty(skipSourceLinks) ? updated :\n                  updated.filter(io1 => !skipSourceLinks.some(io2 => compareNodeIO(io1, io2)));\n    logger.debug(DefaultNodeLinkHandler.msg1('Disconnected', links.length,\n                                             DefaultNodeLinkHandler.msg(container.id, 'input', target), 'to'));\n    return r.push(container.id, targetIO.link.nodeId, 'output', targetIO.link.ioId, ...links);\n  }\n\n  private doDisconnectOutput(container: IContainer, source: SlimNodeIO, strict: boolean,\n                             filter: (io: SlimNodeIO) => boolean = _ => true): LinkResult {\n    const sourceIO = this.validateSource(container, source, strict);\n    const result = new LinkResult().push(container.id, source.nodeId, 'output', source.ioId);\n    sourceIO.links\n            .filter(io => compareNodeIO(this.validateTarget(container, io, false).link, source))\n            .forEach(io => {\n              if (filter(io)) {\n                result.push(container.id, io.nodeId, 'input', io.ioId);\n              } else {\n                result.push(container.id, source.nodeId, 'output', source.ioId, io);\n              }\n            });\n    logger.debug(DefaultNodeLinkHandler.msg1('Disconnected', sourceIO.links.length,\n                                             DefaultNodeLinkHandler.msg(container.id, 'output', source)));\n    return result;\n  }\n}\n","module.exports = require(\"express\");","module.exports = require(\"child_process\");","export class NotFoundError extends Error {\n}\n\nexport class RegistryError<T> extends Error {\n  item: T;\n\n  constructor(message: string, item?: T) {\n    super(message);\n    this.item = item;\n  }\n\n  // toString() {\n  //   return `${this.message}`;\n  // }\n}\n\nexport class RegistryItemExistedError<T> extends RegistryError<T> {\n\n}\n","import { AsyncDbHelper, Database } from '../database/database';\nimport { isEmpty } from '../utils/helper';\nimport { IdGenerator } from '../utils/id-generator';\nimport { db_logger as logger } from '../utils/loggers';\nimport { Node } from './node';\nimport { INode, SerializedNode, Side } from './node-interface';\nimport { SerializableHelper } from './serializable';\n\nexport interface NodeDbHelper {\n\n  listByIds(database: Database, ids: string[]): Promise<SerializedNode[]>;\n\n  /**\n   * Query Nodes in container by container id\n   * @param {Database} database\n   * @param {number} cId Container id\n   * @return {Promise<SerializedNode[]>}\n   */\n  listByContainer(database: Database, cId: number): Promise<SerializedNode[]>;\n\n  /**\n   * Async update node properties\n   * @param {Database} database\n   * @param {SerializedNode | INode | Node} node\n   * @param {string} props node properties, If not provided, whole node will be serialized then updated\n   * @return {Promise<void>}\n   */\n  updateAsync(database: Database, node: SerializedNode | INode | Node, ...props: string[]): Promise<void>;\n\n  /**\n   * Persist node in database by UPDATE operation based on properties\n   * @deprecated should use {@link NodeDbHelper#updateAsync}\n   * @param {Node} node\n   * @param {string[]} props node properties, If not provided, whole node will be serialized then updated\n   */\n  update(node: Node, props: string[]): void;\n\n  /**\n   * Insert new node\n   * @param {Database} database\n   * @param {SerializedNode} node\n   * @return {Promise<SerializedNode>}\n   */\n  insert(database: Database, node: SerializedNode | INode | Node): Promise<SerializedNode>;\n\n  delete(database: Database, node: SerializedNode): Promise<void>;\n\n  batchInsert(database: Database, nodes: (SerializedNode | INode | Node)[]): Promise<SerializedNode[]>;\n\n  batchDeleteByIds(database: Database, ids: string[]): Promise<number>;\n\n}\n\nexport const createNodeDbHelper = (): NodeDbHelper => {\n  return new DefaultNodeDbHelper();\n};\n\nclass DefaultNodeDbHelper implements NodeDbHelper {\n\n  listByIds(database: Database, ids: string[]): Promise<SerializedNode[]> {\n    logger.debug(`Query nodes by ids: [${ids}]...`);\n    if (database) {\n      return AsyncDbHelper.oneArgs(database, database.listNodes, { _id: { $in: ids } });\n    }\n    return Promise.resolve([]);\n  }\n\n  listByContainer(database: Database, cId: number): Promise<SerializedNode[]> {\n    if (database) {\n      logger.debug(`Query nodes in container id '${cId}'...`);\n      return AsyncDbHelper.oneArgs(database, database.listNodes, { cid: cId });\n    }\n    return Promise.resolve([]);\n  }\n\n  /**\n   * Persist node in database by UPDATE operation based on properties\n   * @param {Node} node\n   * @param props node properties, If not provided, whole node will be serialized then updated\n   */\n  update(node: Node, props: string[]): void {\n    if (node.side === Side.server && node.container.db) {\n      let data = isEmpty(props) ? node.serialize()\n                                : props.reduce((o, p) => ((o[p] = SerializableHelper.serialize(node[p])), o), {});\n      node.container.db.updateNode(node.id, node.container.id, { $set: data });\n    }\n  }\n\n  updateAsync(database: Database, node: SerializedNode | INode | Node, ...props: string[]): Promise<void> {\n    if (database) {\n      logger.debug(`Updating [${props}] of node '${IdGenerator.createNodeId(node.cid, node.id)}'...`);\n      const data = isEmpty(props) ? SerializableHelper.serialize(node)\n                                  : props.reduce((o, p) => ((o[p] = SerializableHelper.serialize(node[p])), o), {});\n      return AsyncDbHelper.threeArgs(database, database.updateNode, node.id, node.cid, { $set: data });\n    }\n    return Promise.resolve();\n  }\n\n  insert(database: Database, node: SerializedNode): Promise<SerializedNode> {\n    if (database) {\n      logger.debug(`Inserting node '${IdGenerator.createNodeId(node.cid, node.id)}' into database...`);\n      return AsyncDbHelper.oneArgs(database, database.addNode, SerializableHelper.serialize(node));\n    }\n    return Promise.resolve(node);\n  }\n\n  batchInsert(database: Database, nodes: (SerializedNode | INode | Node)[]): Promise<SerializedNode[]> {\n    if (database) {\n      logger.debug(`Inserting ${nodes.length} nodes into database...`);\n      return AsyncDbHelper.oneArgs<SerializedNode[]>(database, database.batchInsertNodes,\n                                                     nodes.map(n => SerializableHelper.serialize(n)))\n                          .then(insertedNodes => {\n                            logger.debug(`Inserted ${insertedNodes.length} nodes in database`);\n                            return insertedNodes;\n                          });\n    }\n    return Promise.resolve(nodes);\n  }\n\n  batchDeleteByIds(database: Database, ids: string[]): Promise<number> {\n    if (database) {\n      logger.debug(`Deleting node ids: [${ids}] in database...`);\n      return AsyncDbHelper.oneArgs<number>(database, database.batchDeleteNodes, { _id: { $in: ids } })\n                          .then(total => {\n                            logger.debug(`Deleted ${total} nodes in database`);\n                            return total;\n                          });\n    }\n    return Promise.resolve(0);\n  }\n\n  delete(database: Database, node: SerializedNode): Promise<void> {\n    if (database) {\n      logger.debug(`Deleting node '${IdGenerator.createNodeId(node.cid, node.id)}' in database...`);\n      return AsyncDbHelper.twoArgs(database, database.removeNode, node.id, node.cid);\n    }\n    return Promise.resolve();\n  }\n}\n\n","import config from '../../config';\n\nconst logger = require('logplease').create('cryto-utils', { color: 3 });\n\nconst CryptoJS = require('crypto-js');\n\nexport default class CryptoUtils {\n  static encrypt = text => {\n    if (text) {\n      return CryptoJS.AES.encrypt(text, config.secretKey).toString();\n    } else {\n      logger.error('Your text to encrypt is empty');\n    }\n  };\n\n  static decrypt = cipherText => {\n    if (cipherText) {\n      return CryptoJS.AES.decrypt(cipherText, config.secretKey).toString(CryptoJS.enc.Utf8);\n    } else {\n      logger.error('Your text to decrypt is empty');\n    }\n  };\n}\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 02.03.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport Debounce from 'lodash-decorators/debounce';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType } from '../../node-io';\n\nexport class UiNode extends Node {\n  titlePrefix: string; // title on ui panel\n  defaultTitle: string;\n  template: string;\n  uiElementType: string;\n  uiPanelValue;\n\n  // onGetMessageToDashboardSide\n  // onDashboardElementGetNodeState - this will override default logic in dashboard-server-socket\n  // onDashboardElementSetNodeState - this will override default logic in dashboard-server-socket\n\n  constructor(defaultTitle: string, uiElementType: string, properties: any) {\n    super();\n    this.name = properties && properties.name;\n    this.titlePrefix = defaultTitle;\n    this.defaultTitle = defaultTitle;\n    this.uiElementType = uiElementType;\n    this.isDashboardNode = true;\n    this.settings['title'] = NodeSetting.create({\n      description: 'Title',\n      value: this.titlePrefix,\n      type: SettingType.STRING,\n    });\n    this.settings['ui-panel'] = NodeSetting.create({ description: 'Ui Panel Name', type: SettingType.STRING });\n  }\n\n  init() {\n    if (this.settings['ui-panel']) {\n      this.uiPanelValue = this.settings['ui-panel'] && this.settings['ui-panel'].value;\n    }\n  }\n\n  onCreated() {\n    this.settings['ui-panel'].value = this.uiPanelValue || this.container.name;\n    if (this.side == Side.server) {\n      this.container.dashboard.onNodeChangePanelOrTitle(\n        this,\n        this.settings['ui-panel'].value,\n        this.settings['title'].value,\n      );\n    }\n  }\n\n  onAdded() {\n    this.changeTitle(this.settings['title'].value);\n  }\n\n  onBeforeSettingsChange(newSettings, newName) {\n    if (this.side == Side.server) {\n      this.name = newName;\n      this.container.dashboard.onNodeChangePanelOrTitle(\n        this,\n        newSettings['ui-panel'].value,\n        newSettings['title'].value,\n      );\n    }\n    this.changeTitle(newSettings['title'].value);\n  }\n\n  changeTitle(title: string) {\n    if (this.defaultTitle === title) this.title = title;\n    else this.title = this.defaultTitle + ': ' + title;\n  }\n\n  onRemoved() {\n    if (this.side == Side.server) this.container.dashboard.onNodeRemoved(this);\n  }\n\n  setState(state: any, sendToDashboard = true) {\n    this.properties['state'] = state;\n\n    // if called from constructor\n    if (this.container == null) return;\n\n    if (sendToDashboard) {\n      let m = { id: this.id, cid: this.container.id, state: state };\n      if (this.side == Side.server) {\n        // send state to all clients in the room\n        let socket = this.container.server_dashboard_socket;\n        let panelName = this.settings['ui-panel'].value;\n        socket.in('' + panelName).emit('dashboardElementGetNodeState', m);\n      }\n    }\n\n    this.storeInDatabase();\n  }\n\n  @Debounce(1000)\n  storeInDatabase() {\n    if (this.container && this.container.db) {\n      this.container.db.updateNode(this.id, this.container.id, {\n        $set: { properties: this.properties },\n      });\n    }\n  }\n\n  sendMessageToDashboardSide(mess: any) {\n    let m = { id: this.id, cid: this.container.id, message: mess };\n    if (this.side == Side.server) {\n      let socket = this.container.server_dashboard_socket;\n      let panelName = this.settings['ui-panel'].value;\n      socket.in('' + panelName).emit('nodeMessageToDashboardSide', m);\n    } else {\n      this.container.client_socket.emit('nodeMessageToDashboardSide', m);\n    }\n  }\n\n  getState() {\n    return this.properties['state'];\n  }\n}\n","module.exports = require(\"node-bacnet\");","import { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\n\nexport default abstract class Statistics extends FlexibleNode {\n  protected constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {}\n\n  /**\n   * Get array of all input values or setting values where values are defined\n   */\n  getDefinedInputsOrSettingsValues() {\n    const output = [];\n    for (let i = 0; i < this.getInputsCount(); i++) {\n      const input = this.getInputData(i);\n      if (input != null) {\n        output.push(input);\n      }\n    }\n    return output;\n  }\n}\n","/**\n * <b>Serializable</b> is a marker interface for translating a data structure or object state into a format that can be\n * stored * or transmitted and reconstructed later.\n */\nimport { ErrorCallbackHandler } from '../utils/decorators';\nimport { isFunction, isNull } from '../utils/helper';\n\nexport interface Serializable<T> {\n\n  serialize(): T;\n\n}\n\nexport interface IDeserializable<T, R> {\n\n  deserialize(serializedObj: T): R;\n\n}\n\nexport interface Deserializable<T> extends IDeserializable<T, Deserializable<T>> {\n  /**\n   * Deserialize from serialized object\n   * @param {T} serializedObj serialized object\n   * @return {Deserializable<T>} new instance object\n   */\n  deserialize(serializedObj: T): Deserializable<T>;\n}\n\nexport class SerializableHelper {\n  static serialize<T>(obj: Serializable<T> | any): T {\n    if (isNull(obj)) {\n      return null;\n    }\n    return isFunction(obj['serialize']) ? obj.serialize() : new SerializedObject(obj).serialize();\n  }\n}\n\nclass SerializedObject implements Serializable<object> {\n  obj: any;\n\n  constructor(obj: any) {\n    this.obj = obj;\n  }\n\n  @ErrorCallbackHandler(_ => null)\n  serialize(): object {\n    return JSON.parse(JSON.stringify(this.obj));\n  }\n}\n","import { RegistryError } from '../utils/errors';\nimport { isEmpty, isGreaterThanZero, isNull } from '../utils/helper';\nimport { IdGenerator } from '../utils/id-generator';\nimport { Container, ContainerRegistry } from './container';\nimport { Node } from './node';\nimport { NodeFactory } from './node-factory';\nimport {\n  ContainerRegistryMetadata,\n  GlobalNodeRegistryMetadata,\n  IContainer,\n  IFolderNode,\n  INode,\n  isFolderNode,\n  isNode,\n  SerializedNode,\n  SubNodeRegistryMetadata,\n} from './node-interface';\nimport { AbstractRegistry, RegistryResult } from './registry';\n\nexport class DefaultGlobalNodeRegistry<N extends INode> extends AbstractRegistry<N>\n  implements GlobalNodeRegistryMetadata {\n\n  protected constructor() {\n    super();\n  }\n\n  register(obj: N, force?: boolean, key?: string): N {\n    return <N>super.register(obj, force, key);\n  }\n\n  get(key: number | string | N): N {\n    return super.get(isNode(key) ? this.createKey(<N>key) : key);\n  }\n\n  remove(key: number | string | N): N {\n    return <N>super.remove(isNode(key) ? this.createKey(<N>key) : key);\n  }\n\n  protected createKey(node: N): string | number {\n    return IdGenerator.createNodeId(node.cid, node.id);\n  }\n\n  protected itemName(): string {\n    return 'Global Node';\n  }\n}\n\nexport class GlobalNodeRegistry extends DefaultGlobalNodeRegistry<Node> {\n  private static _instance: GlobalNodeRegistry;\n\n  private constructor() {\n    super();\n  }\n\n  public static instance(): GlobalNodeRegistry {\n    if (!GlobalNodeRegistry._instance) {\n      GlobalNodeRegistry._instance = new GlobalNodeRegistry();\n    }\n    return GlobalNodeRegistry._instance;\n  }\n\n}\n\nexport class NodeRegistryHelper {\n\n  static register(parent: IContainer, nodes: SerializedNode[], containerRegistry: ContainerRegistryMetadata,\n                  isCaching?: boolean): Promise<RegistryResult<Node>> {\n    return Promise.allSettled(nodes.sort((n1, n2) => n1.cid - n2.cid)\n                                   .filter(n => n.cid >= parent.id)\n                                   .map(n => NodeFactory.create(n, !isCaching, containerRegistry))\n                                   .map(n => NodeRegistryHelper.registerNode(containerRegistry, n, isCaching)))\n                  .then(results => results.reduce((r, i) => NodeRegistryHelper.accumulate(r, i),\n                                                  new RegistryResult<Node>()));\n  }\n\n  static unregister(parent: IContainer, nodes: (number | SerializedNode | INode)[],\n                    containerRegistry: ContainerRegistryMetadata,\n                    isCaching?: boolean): Promise<RegistryResult<Node>> {\n    return Promise.allSettled(NodeFactory.standardize(parent, nodes)\n                                         .sort((n1, n2) => n2.cid - n1.cid)\n                                         .filter(n => n.cid >= parent.id)\n                                         .map(n => NodeRegistryHelper.unregisterNode(containerRegistry, n, isCaching)))\n                  .then(results => results.reduce((r, i) => NodeRegistryHelper.accumulate(r, i),\n                                                  new RegistryResult<Node>()));\n  }\n\n  private static registerNode(registry: ContainerRegistryMetadata, node: Node, isCaching: boolean): Promise<Node> {\n    const parent = registry.get(node.cid);\n    if (isNull(parent)) {\n      const nodeId = IdGenerator.createNodeId(node.cid, node.id);\n      return Promise.reject(new RegistryError(`Not found parent container of node ${nodeId}`, node));\n    }\n    if (isFolderNode(node)) {\n      registry.register((<IFolderNode><unknown>node).sub_container, true);\n    }\n    return <Promise<Node>>parent.nodeRegistry().register(node, true, null, isCaching);\n  }\n\n  private static unregisterNode(registry: ContainerRegistryMetadata, node: INode, isCaching: boolean): Promise<Node> {\n    const parent = registry.get(node.cid);\n    if (isNull(parent)) {\n      const nodeId = IdGenerator.createNodeId(node.cid, node.id);\n      return Promise.reject(new RegistryError(`Not found parent container of node ${nodeId}`, node));\n    }\n    return <Promise<Node>>parent.nodeRegistry().remove(node, isCaching);\n  }\n\n  private static accumulate(result: RegistryResult<Node>,\n                            item: PromiseFulfilledResult<Node> | PromiseRejectedResult) {\n    if (item.status === 'rejected') {\n      if (item.reason instanceof RegistryError) {\n        result.errors.push(item.reason);\n      } else {\n        const err = new RegistryError<any>(item.reason instanceof Error ? item.reason.message : item.reason);\n        err.stack = item.reason instanceof Error ? item.reason.stack : null;\n        result.errors.push(err);\n      }\n      result.errors.push(item.reason instanceof RegistryError ? item.reason : new RegistryError(item.reason));\n    } else {\n      result.objects.push(item.value);\n    }\n    return result;\n  }\n\n}\n\nexport class DefaultContainerRegistry<T extends IContainer> extends AbstractRegistry<T>\n  implements ContainerRegistryMetadata {\n\n  protected _last_container_id: number;\n\n  protected constructor() {\n    super();\n    this._last_container_id = 0;\n  }\n\n  register(container: T, force?: boolean): T {\n    const c = this.optimizeBeforeRegister(this.validate(container, force, null), force);\n    return <T>this.doRegister(this.createKey(c), c, force);\n  }\n\n  remove(id: number | string): T {\n    const container = <T>super.remove(id);\n    if (id >= this._last_container_id) {\n      this._last_container_id = this.findLastId();\n    }\n    return container;\n  }\n\n  clear() {\n    super.clear();\n    this._last_container_id = 0;\n  }\n\n  lastId(): number {\n    return this._last_container_id;\n  }\n\n  findLastId(): number {\n    return isEmpty(this._registry) ? 0 : Math.max(...Object.keys(this._registry).map(x => +x));\n  }\n\n  rootContainer(): IContainer {\n    return this.get(IdGenerator.ROOT);\n  }\n\n  protected itemName(): string {\n    return 'Container';\n  }\n\n  protected optimizeBeforeRegister(container: T, force: boolean): T {\n    if ((this.rootContainer() && !isGreaterThanZero(container.id)) || (this.has(container.id) && !force)) {\n      container.id = this._last_container_id = IdGenerator.genContainerId(this.findLastId());\n    } else {\n      this._last_container_id = Math.max(container.id, this._last_container_id);\n    }\n    if (this.rootContainer()) {\n      container.side = this.rootContainer().side;\n    }\n    return super.optimizeBeforeRegister(container, force);\n  }\n\n  protected createKey(container: T): string | number {\n    return container.id;\n  }\n}\n\nexport class DefaultSubNodeRegistry<T extends INode> extends AbstractRegistry<T> implements SubNodeRegistryMetadata {\n\n  readonly globalNodeRegistry: GlobalNodeRegistryMetadata;\n  readonly containerRegistry: ContainerRegistryMetadata;\n  protected readonly _parent: IContainer;\n  protected _last_node_id: number;\n\n  constructor(parent: IContainer, containerRegistry?: ContainerRegistryMetadata,\n              globalNodeRegistry?: GlobalNodeRegistryMetadata) {\n    super();\n    this._parent = parent;\n    this.globalNodeRegistry = globalNodeRegistry ?? GlobalNodeRegistry.instance();\n    this.containerRegistry = containerRegistry ?? ContainerRegistry.instance();\n    this._last_node_id = 0;\n  }\n\n  parent(): IContainer {\n    return this._parent;\n  }\n\n  lastId(): number {\n    return this._last_node_id;\n  }\n\n  register(node: T, force?: boolean, key?: string, isCaching?: boolean): Promise<T> {\n    return Promise.resolve(this.optimizeBeforeRegister(this.validate(node, force, key), force))\n                  .then(node => this.doRegister(this.createKey(node), node, force, isCaching));\n  }\n\n  remove(node: T | number | string, isCaching?: boolean): Promise<T> {\n    let n = this.globalNodeRegistry.remove(isNode(node) ? <INode>node : <string>node);\n    if (isFolderNode(n)) {\n      this.containerRegistry.remove((<IFolderNode>n).sub_container.id);\n    }\n    return <Promise<T>>Promise.resolve(super.remove(n.id))\n                              .then(n => {\n                                if (n.id >= this._last_node_id) {\n                                  this._last_node_id = this.findLastId();\n                                }\n                                return n;\n                              });\n  }\n\n  get(id: number | string | T): T {\n    return super.get((<T>id)?.id ?? id);\n  }\n\n  findLastId(): number {\n    return isEmpty(this._registry) ? 0 : Math.max(...Object.keys(this._registry).map(x => +x));\n  }\n\n  protected itemName(): string {\n    return `Node in Container '${this._parent.id}'`;\n  }\n\n  protected optimizeBeforeRegister(node: T, force: boolean): T {\n    if (!isGreaterThanZero(node.id) || (this.has(node.id) && !force)) {\n      node.id = this._last_node_id = IdGenerator.genNodeId(this.findLastId());\n    } else {\n      this._last_node_id = Math.max(node.id, this._last_node_id);\n    }\n    node.container = this.parent();\n    node.cid = this.parent().id;\n    node.side = this.parent().side;\n    node.title = node.title ?? node.type;\n    if (isFolderNode(node)) {\n      const cNode = <IFolderNode><unknown>node;\n      cNode.sub_container = this.containerRegistry.register(cNode.sub_container, force);\n    }\n    return super.optimizeBeforeRegister(node, force);\n  }\n\n  protected doRegister(k: string | number, node: T, force: boolean = false, isCaching?: boolean): Promise<T> {\n    this.globalNodeRegistry.register(<INode>node, force);\n    return Promise.resolve(super.doRegister(k, node, force));\n  }\n\n  protected createKey(node: T): string | number {\n    return node.id;\n  }\n}\n","//FOR node before v12.9.0\nif (typeof Promise.allSettled !== 'function') {\n  //@ts-ignore\n  Promise.allSettled = function (promises) {\n    return Promise.all(promises.map(p => Promise.resolve(p)\n                                                .then(val => ({ status: 'fulfilled', value: val }),\n                                                      err => ({ status: 'rejected', reason: err }))));\n  };\n}\n\nif (Array.prototype.flatMap === undefined) {\n  const concat = (x, y) => x.concat(y);\n  const flatMap = (f, xs) => xs.map(f).reduce(concat, []);\n  Array.prototype.flatMap = function(f) {\n    return flatMap(f, this);\n  }\n}\n\n// source map for node typescript debug\nrequire('source-map-support').install();\nimport { Colors, create } from 'logplease';\n// @formatter:off\n//MUST UP\nconst logger = create('app', { color: Colors.Green });\nconst path = require('path');\nconst process = require('process');\nconst argv = require('minimist')(process.argv.slice(2));\nconst dataDir = process.env['DATA_DIR'] || argv['datadir'] || './db';\nconst envFile = argv['envFile'] || '.env';\nconst envFileAbsPath = path.isAbsolute(envFile) ? envFile : path.resolve(process.cwd(), envFile);\nprocess.env['DATA_DIR'] = path.isAbsolute(dataDir) ? dataDir : path.resolve(process.cwd(), dataDir);\nrequire('dotenv').config({ path: envFileAbsPath });\n(<any>global).__rootdirname = path.resolve(__dirname);\n\nlogger.info('----------------------------- Rubix Wires -----------------------------');\nlogger.info(`Process Dir       : '${process.cwd()}'`);\nlogger.info(`Working Dir       : '${(<any>global).__rootdirname}'`);\nlogger.info(`Data Dir          : '${process.env.DATA_DIR}'`);\nlogger.info(`Environment       : '${process.env.NODE_ENV || 'development'}'`);\nlogger.info(`Environment file  : '${envFileAbsPath}'`);\n\nimport { Backend } from './backend/backend';\nimport conf from './config';\nimport * as config from './config.json';\nimport { AsyncDbHelper, Database } from './database/database';\nimport { Container, ContainerRegistry } from './nodes/container';\nimport { Node } from './nodes/node';\nimport { NodeHookHelper } from './nodes/node-hook';\nimport { SerializedNode, Side } from './nodes/node-interface';\nimport { NodeRegistryHelper } from './nodes/node-registry';\nimport { NodeTypeRegistry } from './nodes/node-type-registry';\nimport { RegistryResult } from './nodes/registry';\nimport { Dashboard } from './server/dashboard';\nimport { Server } from './server/server';\nimport { isEmpty } from './utils/helper';\n//---------------------------------------------\n// @formatter:on\n\nexport class App {\n  db: Database;\n  dashboard: Dashboard;\n  rootContainer: Container;\n  server: Server;\n\n  constructor() {\n    this.server = new Server((<any>global).__rootdirname, conf.port, conf.loopInterval);\n    this.dashboard = new Dashboard(this.server.dashboardSocket);\n    this.rootContainer = ContainerRegistry.instance().register(Container.initRoot(Side.server), true);\n    this.configApp();\n    this.registerNodeTypes();\n    this.start();\n  }\n\n  start() {\n    this.connectDatabase()\n        .then(db => (this.db = db))\n        .then(db => db.asyncLoadDatabase(conf.dataDir).then(_ => db))\n        .then(db => this.onDatabaseReady(db))\n        .catch(err => this.onDatabaseError(err));\n  }\n\n  private configApp(): void {\n    this.rootContainer.dashboard = this.dashboard;\n    this.rootContainer.server_editor_socket = this.server.editorSocket.io;\n    this.rootContainer.server_dashboard_socket = this.server.dashboardSocket.io;\n  }\n\n  private registerNodeTypes() {\n    require('./nodes/nodes/index');\n    logger.info(`Registered ${NodeTypeRegistry.instance().size()} nodes types`);\n  }\n\n  private connectDatabase(): Promise<Database> {\n    if (!config.dataBase.enable) {\n      return Promise.reject(new Error('Not enabled database'));\n    }\n    if (!config.dataBase.useInternalDb) {\n      return Promise.reject(new Error('Unsupported external database'));\n    }\n    return Promise.resolve(require('./database/neDbDatabase').db);\n\n  }\n\n  private startBackend() {\n    new Backend(this.db, conf.backendSync).start();\n  }\n\n  private onDatabaseReady(db: Database): Promise<any> {\n    return this.initNodeContext(db)\n               .then(_ => this.dashboard.loadFromDatabase(db))\n               .then(_ => this.startBackend())\n               .then(_ => this.rootContainer.run(conf.loopInterval));\n  }\n\n  private initNodeContext(db: Database): Promise<any> {\n    this.rootContainer.db = db;\n    return AsyncDbHelper.noArgs<SerializedNode[]>(db, db.getNodes)\n                        .then(serializedNodes => this.registerNodes(serializedNodes));\n  }\n\n  private registerNodes(nodes: SerializedNode[]): Promise<RegistryResult<Node>> {\n    return NodeRegistryHelper.register(this.rootContainer, nodes, ContainerRegistry.instance(), true)\n                             .then(r => {\n                               logger.info(`Imported ${ContainerRegistry.instance().size() - 1} containers, ` +\n                                           `${r.objects.length}/${nodes.length} nodes successfully from database`);\n                               if (!isEmpty(r.errors)) {\n                                 logger.warn(`Import failed: [${r.errors.join('\\n')}]`);\n                               }\n                               return r;\n                             })\n                             .then(r => {\n                               r.objects.forEach(node => NodeHookHelper.execute(node, 'onDbReaded') ?? node);\n                               return r;\n                             });\n  }\n\n  private onDatabaseError(err: Error) {\n    if (err.message === 'Not enabled database') {\n      //TODO is it need? Should remove it\n      logger.warn(`Database is not enabled, rubix-wires is running on memory...`);\n      this.rootContainer.run(conf.loopInterval);\n      return;\n    }\n    logger.error(`Unable to bootstrap application. Failed at: ${err.stack ?? err}`);\n    process.exit(99);\n  }\n}\n\nconst app = new App();\nexport default app;\n","import { reassignContainer } from './container';\nimport { Node } from './node';\nimport {\n  ContainerRegistryMetadata,\n  GlobalNodeRegistryMetadata,\n  IContainer,\n  IFolderNode,\n  INode,\n  isFolderNode,\n  isNode,\n  SerializedFolderNode,\n  SerializedNode,\n} from './node-interface';\nimport { NodeTypeRegistry } from './node-type-registry';\n\nexport class NodeFactory {\n\n  static create(serializedNode: SerializedNode, isNew: boolean = true, containerRegistry?: ContainerRegistryMetadata,\n                globalRegistry?: GlobalNodeRegistryMetadata): Node {\n    if (isFolderNode(serializedNode)) {\n      const { ContainerNode } = require('./container-node');\n      return ContainerNode.create(<SerializedFolderNode>serializedNode, isNew, containerRegistry, globalRegistry);\n    }\n    const node = new Node().deserialize(serializedNode, isNew);\n    if (isFolderNode(node)) {\n      return <Node><unknown>reassignContainer(<IFolderNode><unknown>node, (<IFolderNode>serializedNode).sub_container,\n                                              containerRegistry, globalRegistry);\n    }\n    return node;\n  }\n\n  static createTempNode(type: string, position: [number, number]): Node {\n    const node_class = NodeTypeRegistry.instance().get(type);\n    if (node_class) {\n      const node: Node = new node_class();\n      node.type = type;\n      node.pos = position;\n      node.size = node.computeSize(true);\n      return node;\n    } else {\n      throw `Can't create node of type [${type}]. Make sure it is registered through registerNodeType`;\n    }\n  }\n\n  static toSimpleNode<T extends SerializedNode>(cid: number | string, id: number | string): T {\n    return <T>{ id: id, cid: cid, type: '' };\n  }\n\n  static standardize(parent: IContainer, nodes: (number | SerializedNode | INode)[]): INode[] {\n    return nodes.map(n => {\n      const nn: INode = isNode(n) ? <INode>n : NodeFactory.toSimpleNode(parent.id, <number>n);\n      nn.container = nn.container ?? parent;\n      return nn;\n    });\n  }\n\n}\n","module.exports = require(\"fs\");","import { exec } from 'child_process';\nconst os = require('os');\nconst si = require('systeminformation');\nconst pkg = require('../../../package.json');\n\nexport default class OsUtils {\n  /**\n   * Runs a system command\n   * @param command {string} system command. Example 'sudo reboot'\n   * @param options {string} system command options\n   * @returns {Promise}\n   *\n   */\n\n  static execute(command, options) {\n    return new Promise((resolve, reject) => {\n      exec(command, options, (err, stdout, stderr) => {\n        if (err) {\n          reject(err);\n          return;\n        } else {\n          resolve({\n            stdout: stdout,\n            stderr: stderr,\n          });\n        }\n      });\n    });\n  }\n\n  /**\n   * Returns hostname\n   */\n  static hostName() {\n    return new Promise<any>((resolve, reject) => {\n      try {\n        resolve(os.hostname());\n      } catch (e) {\n        reject('Unknown');\n      }\n    });\n  }\n\n  /**\n   * Returns Current Wires Version\n   */\n  static getCurrentWiresVersion() {\n    return new Promise<any>((resolve, reject) => {\n      try {\n        resolve(pkg.version);\n      } catch (e) {\n        reject('Unknown');\n      }\n    });\n  }\n\n  /**\n   * Returns host cpu temp\n   * main: main temperature (avg)\n   * cores: array of temperatures\n   * max: max temperature\n   */\n  static cpuTemperature() {\n    return new Promise<any>((resolve, reject) => {\n      try {\n        resolve(si.cpuTemperature());\n      } catch (e) {\n        reject('Unknown');\n      }\n    });\n  }\n\n  /**\n    Returns File System and File System Stats\n    fs: name of file system\n    type: type of file system\n    size: sizes in bytes\n    used: used in bytes\n    use: used in %\n    mount: mount point\n   */\n  static fsSize() {\n    return new Promise<any>((resolve, reject) => {\n      try {\n        resolve(si.fsSize());\n      } catch (e) {\n        reject('Unknown');\n      }\n    });\n  }\n\n  /**\n    Returns host system info\n   */\n  static systemInfo() {\n    return new Promise<any>((resolve, reject) => {\n      try {\n        // define all values, you want to get back\n        const valueObject = {\n          cpu: '*',\n          osInfo: 'platform, release',\n          system: 'model, manufacturer',\n        };\n        resolve(si.get(valueObject));\n      } catch (e) {\n        reject('Unknown');\n      }\n    });\n  }\n\n\n  /**\n  Check if host is a BBBB\n */\n  static systemModelBBB() {\n    return new Promise<any>((resolve, reject) => {\n      let host = \"GENERIC AM33XX (FLATTENED DEVICE TREE)\"\n      OsUtils.systemInfo()\n        .then(e => {\n          if (e.system.model === host) {\n            resolve(true)\n          } else resolve(false)\n        }).catch(err => {\n          reject(false)\n        })\n    });\n  }\n\n  /**\n  Check if host is a Rubix Compute\n  */\n  static systemModelRubixCompute() {\n    return new Promise<any>((resolve, reject) => {\n      let host = \"BCM2835\"\n      OsUtils.systemInfo()\n        .then(e => {\n          if (e.system.model === host) {\n            resolve(true)\n          } else resolve(false)\n        }).catch(err => {\n          reject(false)\n        })\n    });\n  }\n\n  /**\n    Returns host time\n    current: local (server) time\n    uptime: uptime in number of seconds\n    timezone: e.g. GMT+0200\n    timezoneName: e.g. CEST\n   */\n  static systemTime() {\n    return new Promise<any>((resolve, reject) => {\n      try {\n        resolve(si.time());\n      } catch (e) {\n        reject('Unknown');\n      }\n    });\n  }\n\n  /**\n    Returns host memory\n    total: total memory in bytes\n    free: not used in bytes\n    used: used (incl. buffers/cache)\n    active: used actively (excl. buffers/cache)\n    available: potentially available (total - active)\n    buffers: used by buffers\n    cached: used by cache\n    slab: used by slab\n    buffcache: used by buffers+cache\n    swaptotal: swap total\n    swapused: swap used\n    swapfree: swap free\n   */\n  static systemMem() {\n    return new Promise<any>((resolve, reject) => {\n      try {\n        resolve(si.mem());\n      } catch (e) {\n        reject('Unknown');\n      }\n    });\n  }\n\n\n  static systemAll() {\n    return new Promise<any>(async (resolve, reject) => {\n      let all = []\n      await OsUtils.systemInfo().then(e => {\n        console.log(' systemInfo', e)\n        all.push({ systemInfo: e })\n      }).catch(err => {\n        console.log('ERROR systemInfo', err)\n      })\n      await OsUtils.systemTime().then(e => {\n        console.log(' systemTime', e)\n        all.push({ systemTime: e })\n      }).catch(err => {\n        console.log('ERROR systemTime', err)\n      })\n      await OsUtils.fsSize().then(e => {\n        console.log(' fsSize', e)\n        all.push({ fsSize: e })\n      }).catch(err => {\n        console.log('ERROR fsSize', err)\n      })\n      await OsUtils.cpuTemperature().then(e => {\n        console.log(' cpuTemperature', e)\n        all.push({ cpuTemperature: e })\n      }).catch(err => {\n        console.log('ERROR cpuTemperature', err)\n      })\n      await OsUtils.hostName().then(e => {\n        console.log(' hostName', e)\n        all.push({ hostName: e })\n      }).catch(err => {\n        console.log('ERROR hostName', err)\n      })\n      await OsUtils.getCurrentWiresVersion().then(e => {\n        console.log(' getCurrentWiresVersion', e)\n        all.push({ getCurrentWiresVersion: e })\n      }).catch(err => {\n        console.log('ERROR getCurrentWiresVersion', err)\n      })\n      resolve(all)\n\n    });\n  }\n\n\n}\n","import * as NeDBDataStore from 'nedb';\nimport { db_logger as logger } from '../../utils/loggers';\n\nexport default interface BaseDatabase {\n  asyncLoadDatabase(dataPath: string, cleanUpInterval?: any): Promise<any>;\n}\n\nexport abstract class AbstractDatabase implements BaseDatabase {\n\n  protected db: NeDBDataStore;\n\n  asyncLoadDatabase(dataPath: string, cleanUpInterval?: any): Promise<any> {\n    const dbPath = `${dataPath}/${this.dbName()}.db`;\n    logger.info(`Loading database '${this.dbName()}' from '${dbPath}'...`);\n    this.db = new NeDBDataStore({ filename: `${dbPath}` });\n    this.db.persistence.setAutocompactionInterval(cleanUpInterval);\n    return this.load();\n  };\n\n  protected abstract dbName(): string;\n\n  protected load(): Promise<any> {\n    return new Promise<any>((resolve, reject) => {\n      this.db.loadDatabase(err => {\n        if (err) {\n          logger.error(`Failed when loading database ${this.dbName()}: ${err.stack}`);\n          reject(err);\n        }\n        return resolve();\n      });\n    });\n  };\n}\n","module.exports = require(\"moment\");","import {\n  ContainerRegistryMetadata,\n  IContainer,\n  INode,\n  isSerializedContainer,\n  SerializedContainer,\n  SubNodeRegistryMetadata,\n} from '../nodes/node-interface';\nimport { NotFoundError } from '../utils/errors';\nimport { isNull } from '../utils/helper';\n\nconst Joi = require('@hapi/joi');\n\nexport class NodeValidator {\n  static NodeArrayValidator() {\n    return Joi.array().items(Joi.object().keys({ type: Joi.string().required() }));\n  }\n}\n\nexport class NodeRegistryValidator {\n\n  static check = (node: number | string | INode, registry: SubNodeRegistryMetadata, strict: boolean = true): INode => {\n    const n = registry.get(node);\n    if (isNull(n) && strict) {\n      throw new NotFoundError(`Not found node id ${node} in container ${registry.parent().id}`);\n    }\n    return n;\n  };\n\n}\n\nexport class ContainerRegistryValidator {\n\n  static check = (cId: number | string | SerializedContainer | IContainer,\n                  registry: ContainerRegistryMetadata, strict: boolean = true): IContainer => {\n    const container = registry.get(isSerializedContainer(cId) ? (<SerializedContainer>cId).id : <number | string>cId);\n    if (isNull(container) && strict) {\n      throw new NotFoundError(`Not found container id ${cId}`);\n    }\n    return container;\n  };\n\n  static mustExisted = (cId: number | string | SerializedContainer | IContainer,\n                        registry: ContainerRegistryMetadata): Promise<IContainer> => {\n    return Promise.resolve(() => ContainerRegistryValidator.check(cId, registry)).then(f => f());\n  };\n}\n\nexport class ListValidator {\n\n  static notEmpty = <T>(items: T[], msg: string): Promise<T[]> => {\n    if (items.length > 0) {\n      return Promise.resolve(items);\n    }\n    return Promise.reject(msg);\n  };\n\n}\n","/**\n * Used to chain asynchronous executions and to coordinate them from various class instances while limiting parallelism.\n *\n * Example use case: Executing HTTP requests while limiting number of simultaneous request.\n */\nexport class PromiseActor {\n  private stack: Promise<any> = Promise.resolve(null);\n\n  /**\n   * Append an asynchronous computation to the stack. The computation function will be called when all previously chained\n   * computations have completed, and must this return a promise to indicate its completion. The next computation will\n   * only be executed once the promise completes.\n   *\n   * Returns a promise that will complete when the provided computation has been called and completed.\n   */\n  process<T>(f: () => Promise<T>): Promise<T> {\n    const callback = () => f(); // hide previous computation from f(x)\n    this.stack = this.stack.then(callback, error => {\n      console.log(error);\n      return callback(); // process next\n    });\n    return Promise.resolve(this.stack); // defensive copy of promise\n  }\n}\n\nexport const singleton = new PromiseActor();","import * as fs from 'fs';\nimport * as path from 'path';\n\nexport default class FileUtils {\n  /**\n   * Runs a current dir\n   * @returns {string}\n   */\n  static getDir(): string {\n    return path.dirname(__filename);\n  }\n\n\n\n  /**\n   * Runs all files under a dir\n   * @param dirPath\n   * @returns {string}\n   */\n  static getAllFiles(dirPath): any {\n    if (dirPath === null) return;\n    return new Promise((resolve, reject) => {\n      fs.readdir(dirPath, (err, files) => {\n        if (err) {\n          reject(err);\n        }\n        let obj = [];\n        files.forEach(file => {\n          obj.push(file);\n        });\n        resolve(obj);\n        return obj;\n      });\n    });\n  }\n\n  /**\n   * Checks if a file exists\n   * @param fileName\n   * @returns {boolean}\n   */\n  static checkFileExists(fileName): boolean {\n    return fs.existsSync(fileName);\n  }\n\n\n  /**\n   * create file if doesn't exist\n   * @param fileName\n   * @returns {any}\n   */\n  // create file if doesn't exist\n  static createFile(fileName) {\n    return new Promise((resolve, reject) => {\n      fs.open(fileName, 'r', (err, fd) => {\n        if (err) {\n          fs.writeFile(fileName, '', err => {\n            if (err) {\n              reject(err);\n            }\n            let msg = 'The file was created!';\n            resolve(msg);\n          });\n        } else {\n          let msg = 'The file exists!';\n          resolve(msg);\n        }\n      });\n    });\n  }\n\n  /**\n   * create directory if doesn't exist\n   * @param directoryPath\n   * @returns {string}\n   */\n  static createDirectory(directoryPath) {\n    const directory = path.normalize(directoryPath);\n\n    return new Promise((resolve, reject) => {\n      fs.stat(directory, error => {\n        if (error) {\n          if (error.code === 'ENOENT') {\n            fs.mkdir(directory, error => {\n              if (error) {\n                reject(error);\n              } else {\n                resolve(directory);\n              }\n            });\n          } else {\n            reject(error);\n          }\n        } else {\n          resolve(directory);\n        }\n      });\n    });\n  }\n\n  /**\n   * create folder if doesn't exist\n   * @param dirPath\n   * @returns {any}\n   */\n  static ensureDirSync(dirPath) {\n    try {\n      return fs.mkdirSync(dirPath);\n    } catch (err) {\n      if (err.code !== 'EEXIST') throw err;\n    }\n  }\n\n  /**\n   * Read content from the filePath\n   * @param filePath {string}\n   */\n  static readFile(filePath: string): Promise<any> {\n    return new Promise((resolve, reject) => {\n      fs.readFile(filePath, (err, buff) => {\n        if (err) {\n          reject(err);\n        }\n        resolve(buff);\n      });\n    });\n  }\n\n  static async checkForOldDirectory(filePath): Promise<boolean> {\n    try {\n      const fileContent = await FileUtils.readFile(filePath);\n      if (fileContent) Boolean(fileContent.toString());\n      else return false;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  /**\n   * read text and return json out\n   * @param fileName\n   * @returns {any}\n   */\n  static async readFileReturnJson(fileName: string) {\n    //if (!this.checkFileExists(fileName)) return;\n    return new Promise((resolve, reject) => {\n      fs.readFile(fileName, (err, data) => {\n        let obj = [];\n        if (err) {\n          reject(err);\n        }\n        data\n          .toString()\n          .split('\\n')\n          .forEach(function (line, index, arr) {\n            if (line.length === 0) {\n              return;\n            }\n            obj.push(line);\n          });\n        let objStringify = JSON.stringify(obj);\n        let json = JSON.parse(objStringify);\n        resolve(json);\n      });\n    });\n  }\n\n  /**\n   * append File\n   * @param fileName\n   * @param input\n   * @returns {any}\n   */\n  static async appendFile(fileName: string, input: string) {\n    //if (!this.checkFileExists(fileName)) return;\n    return new Promise((resolve, reject) => {\n      let msg = 'The file ' + fileName + ' was saved!';\n      let errorMsg = 'Cant read file. File name is not defined';\n      fs.appendFile(fileName, input, err => {\n        if (err) {\n          reject(err);\n        }\n        resolve(msg);\n      });\n    });\n  }\n\n  /**\n   * writeFile\n   * @param fileName\n   * @param input\n   * @returns {any}\n   */\n  static async writeFile(fileName: string, input: string) {\n    //if (!this.checkFileExists(fileName)) return false;\n    return new Promise((resolve, reject) => {\n      let msg = 'The file ' + fileName + ' was saved!';\n      let errorMsg = 'Cant read file. File name is not defined';\n      fs.writeFile(fileName, input, err => {\n        if (err) {\n          reject(err);\n        }\n        resolve(msg);\n      });\n    });\n  }\n\n\n\n  /**\n   * delete multiple files !!! Not tested well\n   * @param files\n   * @param callback\n   * @returns {any}\n   */\n  static deleteFiles(files, callback) {\n    let i = files.length;\n    files.forEach(function (filepath) {\n      console.log(filepath)\n      if (FileUtils.checkFileExists(filepath)) {\n        fs.unlink(filepath, function (err) {\n          i--;\n          if (err) {\n            callback(err);\n            return;\n          } else if (i <= 0) {\n            callback(null);\n          }\n        });\n      } else {\n        callback(true);\n        console.log(11111)\n        console.log(filepath)\n      }\n    });\n  }\n\n\n}\n","import * as fs from 'fs';\nimport config from '../../config';\nimport FileUtils from '../../nodes/utils/file-utils';\nimport { db_logger as logger } from '../../utils/loggers';\n\nconst file = `${config.dataDir}/platform.db`;\nconst ipDb = `${config.dataDir}/ip.db`;\n\nexport default class PlatformDataSource {\n\n  static getPlatform(): Promise<any> {\n    return new Promise((resolve, reject) => {\n      FileUtils.createFile(file).then(() => {\n        fs.readFile(file, { encoding: 'utf-8' }, (err, data) => {\n          if (err) {\n            reject(err);\n            logger.error(err.message);\n          } else {\n            const obj = data ? JSON.parse(data) : {};\n            resolve(obj);\n          }\n        });\n      });\n    });\n  }\n\n  static updatePlatform(data: any): Promise<any> {\n    return new Promise((resolve, reject) => {\n      FileUtils.createFile(file).then(() => {\n        const json = JSON.stringify(data);\n        fs.writeFile(file, json, 'utf-8', err => {\n          if (err) {\n            reject(err);\n            logger.error(err.message);\n          } else {\n            resolve(json);\n          }\n        });\n      });\n    });\n  }\n\n  static getEth(): Promise<any> {\n    return new Promise((resolve, reject) => {\n      FileUtils.createFile(ipDb).then(() => {\n        fs.readFile(ipDb, { encoding: 'utf-8' }, (err, data) => {\n          if (err) {\n            reject(err);\n            logger.error(err.stack ?? err.message);\n          } else {\n            const obj = data ? JSON.parse(data) : {};\n            resolve(obj);\n          }\n        });\n      });\n    });\n  }\n\n  static updateEth(data: any): Promise<any> {\n    return new Promise((resolve, reject) => {\n      FileUtils.createFile(ipDb).then(() => {\n        let json = JSON.stringify(data);\n        fs.writeFile(ipDb, json, 'utf-8', err => {\n          if (err) {\n            reject(err);\n            logger.error(err.stack ?? err.message);\n          } else {\n            resolve(json);\n          }\n        });\n      });\n    });\n  }\n}\n\n","import config from '../../../../config';\n\nconst edgeApi = config.edge28;\nexport const SEND_PAYLOAD_TO_CHILD = 'SEND_PAYLOAD_TO_CHILD';\nexport const ADD_POINT = 'ADD_POINT';\nexport const REMOVE_POINT = 'REMOVE_POINT';\n\nexport const edgeIp: string = edgeApi.baseURL;\nexport const edgePort: number = edgeApi.port;\nexport const edgeApiVer: string = edgeApi.apiVer;\n","import { ConnectionOutput } from '../../nodes/nodes/protocols/connection-node-mixin';\nimport { convertToNumber, isNotNull, isNull, range } from '../../utils/helper';\nimport { EventData } from '../../utils/pattern';\n\nexport interface Model {\n}\n\nexport interface HasIdentifier extends Model {\n  /**\n   * Gets model identifier\n   * @returns {string} identifier\n   */\n  identifier(): string;\n}\n\nexport interface PointValue {\n  presentValue: any;\n  priority: number;\n  priorityArray: { [k: number]: any };\n\n  /**\n   * Check point value is reset state\n   * @return {boolean} true if this instance has `present value` and `priority` are `null` at same time\n   */\n  isResetState(): boolean;\n\n  /**\n   * Compare this instance with another point value to identify a change\n   * @param {PointValue} prev another point value\n   * @return {PointValue} change of value. It might `null` if no change.\n   */\n  changedOfValue(prev: PointValue): PointValue;\n\n  /**\n   * Merge this instance from another point value within highest priority computation\n   * @param {PointValue} prev another point value\n   * @return {PointValue} new non-null point value\n   */\n  merge(prev: PointValue): PointValue;\n}\n\n/**\n * Define point model as input\n */\nexport interface PointModel extends HasIdentifier {\n\n  enabled: boolean;\n\n  pointValue: PointValue;\n\n  /**\n   * Compare another Point to detect might change only value\n   * @param point Another Point\n   */\n  mightOnlyValueChanged(point: PointModel): boolean;\n\n  /**\n   * Check another Point is same identifier or not\n   */\n  equals(point: PointModel): boolean;\n\n}\n\nexport interface PointOutput<T extends PointModel> extends Model, EventData {\n\n  connStatus: ConnectionOutput;\n  point: T;\n\n}\n\nexport class PointValueCreator {\n  private constructor() {\n  }\n\n  /**\n   * Init Point Value without auto correct highest value based on given inputs\n   * @param {number} presentValue Point present value\n   * @param {number} priority Point priority\n   * @param {object | []} priorityArray priority array in JSON or array\n   * @returns {PointValue}\n   */\n  static init = (presentValue: any, priority?: number, priorityArray?: { [k: number]: any } | []): PointValue => {\n    if (priority && (priority < 1 || priority > 16)) {\n      throw new Error('Priority must be in range [1, 16]');\n    }\n    let pv = new DefaultPointValue();\n    pv.presentValue = presentValue ?? null;\n    pv.priority = priority === undefined ? 16 : priority;\n    pv.priorityArray = PointValueCreator.normalizePriorityArray(priorityArray);\n    return pv;\n  };\n\n  /**\n   * Init Point Value without auto correct highest value based on priority array\n   * @param priorityArray priority array object or array with 16 item\n   * @return {PointValue}\n   */\n  static by = (priorityArray?: { [k: number]: any } | []): PointValue => {\n    let pa = PointValueCreator.normalizePriorityArray(priorityArray);\n    let highestValue = Object.entries(pa).find(pa => pa[1]) ?? [16, null];\n    return PointValueCreator.init(convertToNumber(highestValue[1]), convertToNumber(highestValue[0]), pa);\n  };\n\n  /**\n   * Create PointValue based on given inputs then auto correct `highest value`\n   * @param {any} presentValue\n   * @param {number} priority\n   * @param {object | []} priorityArray priority array in JSON or array\n   * @returns {PointValue}\n   */\n  static create = (presentValue: any, priority?: number,\n                   priorityArray?: { [k: number]: any } | []): PointValue => {\n    let pv = PointValueCreator.init(presentValue, priority, priorityArray);\n    if (pv.isResetState()) {\n      return pv;\n    }\n    let highestValue = Object.entries(pv.priorityArray).find(pa => pa[1]) ?? [16, null];\n    pv.priorityArray[pv.priority] = pv.presentValue;\n    if (highestValue && convertToNumber(highestValue[0]) === pv.priority && pv.presentValue === null) {\n      highestValue = Object.entries(pv.priorityArray).find(([_, v]) => isNotNull(v));\n    }\n    if (highestValue && (pv.priority > convertToNumber(highestValue[0]) || pv.presentValue === null)) {\n      pv.priority = convertToNumber(highestValue[0]);\n      pv.presentValue = highestValue[1];\n    }\n    return pv;\n  };\n\n  private static createPriorityArray = () => {\n    return Array.from(range(1, 16)).reduce((o, k) => ((o[k] = null), o), {});\n  };\n\n  private static normalizePriorityArray = (priorityArray: { [p: number]: any } | []): { [k: number]: any } => {\n    if (!priorityArray) {\n      return PointValueCreator.createPriorityArray();\n    }\n    if (priorityArray instanceof Array) {\n      let len = (priorityArray as Array<any>).length;\n      if (len === 0) {\n        return PointValueCreator.createPriorityArray();\n      }\n      if (len !== 16) {\n        throw new Error('Invalid priority array');\n      }\n      return priorityArray.reduce((o, k, i) => ((o[i + 1] = convertToNumber(k)), o), {});\n    }\n    if (typeof priorityArray !== 'object') {\n      throw new Error('Invalid priority array');\n    }\n    let pa = PointValueCreator.createPriorityArray();\n    for (let key in pa) {\n      if (priorityArray.hasOwnProperty(key)) {\n        pa[key] = convertToNumber(priorityArray[key]);\n      }\n    }\n    return pa;\n  };\n}\n\nclass DefaultPointValue implements PointValue {\n  presentValue: any;\n  priority: number;\n  priorityArray: { [p: number]: any };\n\n  isResetState(): boolean {\n    return isNull(this.presentValue) && isNull(this.priority);\n  }\n\n  changedOfValue(prev: PointValue): PointValue {\n    if (!prev) {\n      return this;\n    }\n    if (this.presentValue !== prev.presentValue || this.priority !== prev.priority) {\n      return this;\n    }\n    let pv = new DefaultPointValue();\n    for (const priority in this.priorityArray) {\n      if (this.priorityArray[priority] !== prev.priorityArray[priority]) {\n        pv.priority = convertToNumber(priority);\n        pv.presentValue = this.priorityArray[priority];\n        pv.priorityArray = this.priorityArray;\n        return pv;\n      }\n    }\n    return null;\n  }\n\n  merge(prev: PointValue): PointValue {\n    if (!prev || !prev.priorityArray) {\n      return PointValueCreator.create(this.presentValue, this.priority, this.priorityArray);\n    }\n    if (this.isResetState()) {\n      return PointValueCreator.create(null, 16);\n    }\n    let arr = {};\n    for (const priority in this.priorityArray) {\n      arr[priority] = isNull(this.priorityArray[priority]) && isNotNull(prev.priorityArray[priority])\n                      ? prev.priorityArray[priority] : this.priorityArray[priority];\n    }\n    return PointValueCreator.create(this.presentValue, this.priority, arr);\n  }\n}\n","module.exports = require(\"enumify\");","export const ERROR = 'error';\nexport const NOTIFICATION = 'notification';\nexport const PACK_UP_NODES = 'pack-up-nodes';\nexport const IMPORT_NODES = 'import-nodes';\nexport const EXPORT_NODES = 'export-nodes';\nexport const CLONE_NODES = 'clone-nodes';\nexport const REMOVE_NODES = 'remove-nodes';\nexport const CREATE_NODE = 'create-node';\nexport const CREATE_LINK = 'create-link';\nexport const REMOVE_LINK = 'remove-link';\nexport const MOVE_LINK = 'move-link';\nexport const ADD_NODE_INPUT = 'add-node-input';\nexport const ADD_NODE_OUTPUT = 'add-node-output';\nexport const REMOVE_NODE_INPUT = 'remove-node-input';\nexport const REMOVE_NODE_OUTPUT = 'remove-node-output';\n","import { RegistryError, RegistryItemExistedError } from '../utils/errors';\nimport { isNotNull, isNull } from '../utils/helper';\nimport { registry_logger } from '../utils/loggers';\n\nconst logger = registry_logger;\n\nexport interface Registry<T> {\n\n  register(obj: T, force?: boolean, key?: string): Promise<T> | T;\n\n  list(): T[];\n\n  size(): number;\n\n  get(key: any): T;\n\n  has(key: any): boolean;\n\n  remove(key: any): T | Promise<T>;\n\n  clear(): void;\n}\n\nexport abstract class AbstractRegistry<T> implements Registry<T> {\n\n  protected _registry: { [key: string]: T };\n\n  protected constructor() {\n    this._registry = {};\n  }\n\n  get(key: any): T {\n    return this._registry[key];\n  }\n\n  has(key: any): boolean {\n    return isNotNull(this.get(key));\n  }\n\n  list(): T[] {\n    return Object.values(this._registry);\n  }\n\n  register(obj: T, force?: boolean, key?: string): Promise<T> | T {\n    const o = this.optimizeBeforeRegister(this.validate(obj, force, key), force);\n    return this.doRegister(key ?? this.createKey(o), o, force);\n  }\n\n  remove(key: any): T | Promise<T> {\n    if (this.enableDebug()) {\n      logger.debug(`Removing ${this.itemName()} by key='${key}'...`);\n    }\n    let obj = this.get(key);\n    delete this._registry[key];\n    return obj;\n  }\n\n  size(): number {\n    return Object.keys(this._registry).length;\n  }\n\n  clear(): void {\n    this._registry = {};\n  }\n\n  protected abstract createKey(obj: T): string | number;\n\n  protected itemName(): string {\n    return 'Item';\n  }\n\n  protected enableDebug(): boolean {\n    return true;\n  }\n\n  protected itemNullable(): boolean {\n    return false;\n  }\n\n  protected optimizeBeforeRegister(obj: T, force: boolean): T {\n    return obj;\n  }\n\n  protected validate(obj: T, force: boolean, key: string): T {\n    if (isNull(obj) && !this.itemNullable()) {\n      throw new RegistryError(`Given ${this.itemName()} is null or undefined`);\n    }\n    return obj;\n  }\n\n  protected doRegister(k: string | number, o: T, force: boolean): Promise<T> | T {\n    if (!force && this.has(k)) {\n      throw new RegistryItemExistedError<T>(`${this.itemName()} with key ${k} is already existed`);\n    }\n    if (this.enableDebug()) {\n      logger.debug(`Registering ${this.itemName()} by key='${k}' and force=${force}...`);\n    }\n    this._registry[k] = o;\n    return o;\n  }\n}\n\nexport class RegistryResult<T> {\n  objects: T[];\n  errors: RegistryError<T>[];\n\n  constructor(objects?: T[], errors?: RegistryError<T>[]) {\n    this.objects = objects ?? [];\n    this.errors = errors ?? [];\n  }\n\n}\n","import { Node } from '../nodes/node';\nimport { Side } from '../nodes/node-interface';\nimport { DispatchNode } from './DispatchNode';\nimport { UNKNOWN_POINT_NAME } from './IPubSub';\nimport { pubSubSingleton } from './PubSub';\n\nexport class PubSubHelpers {\n  static logger = require('logplease').create('pub-sub', { color: 4 });\n\n  static map(that: Node) {\n    if (that.side === Side.server && !(that instanceof DispatchNode)) {\n      const point = PubSubHelpers.getPoint(that);\n      PubSubHelpers.logger.info(`Mapping protocol: ${that.category} having point: ${point}`);\n      pubSubSingleton.addPoint(that.category, point, PubSubHelpers.getDisplayPointName(that), false);\n    }\n  }\n\n  static unMap(that: Node) {\n    if (that.side === Side.server && !(that instanceof DispatchNode)) {\n      const point = PubSubHelpers.getPoint(that);\n      PubSubHelpers.logger.info(`Un-mapping protocol: ${that.category} having point: ${point}`);\n      pubSubSingleton.removePoint(that.category, point);\n    }\n  }\n\n  static renameFunction(that: Node) {\n    if (that.side === Side.server && !(that instanceof DispatchNode)) {\n      const point: string = PubSubHelpers.getPoint(that);\n      PubSubHelpers.logger.info(`Renaming protocol: ${that.category} having point: ${point}`);\n      pubSubSingleton.renamePoint(that.category, point, PubSubHelpers.getDisplayPointName(that));\n    }\n  }\n\n  static dispatch(that: Node, value: any) {\n    if (that.side === Side.server && !(that instanceof DispatchNode)) {\n      const point = PubSubHelpers.getPoint(that);\n      // logger.info(`Dispatching: ${that.protocol} having point: ${point}`);\n      pubSubSingleton.dispatch(that.category, point, value);\n    }\n  }\n\n  static connect(that: DispatchNode) {\n    if (that.side === Side.server && that instanceof DispatchNode) {\n      const protocol: string = that.getSelectedProtocol();\n      const point: string = that.getSelectedPoint();\n      const pointName: string = that.getSelectedPointName();\n      PubSubHelpers.logger.info(`Subscribing protocol: ${protocol} having point: ${point}`);\n      pubSubSingleton.connect(protocol, point, pointName, that);\n    }\n  }\n\n  static disconnect(that: DispatchNode) {\n    if (that.side === Side.server && that instanceof DispatchNode) {\n      const protocol: string = that.getSelectedProtocol();\n      const point: string = that.getSelectedPoint();\n      PubSubHelpers.logger.info(`Un-subscribing protocol: ${protocol} having point: ${point}`);\n      pubSubSingleton.disconnect(protocol, point, that);\n    }\n  }\n\n  static getPoint(that) {\n    const { cid, id } = that;\n    return `${cid}/${id}`;\n  }\n\n  private static getDisplayPointName(that: Node) {\n    let names: string[] = [];\n    let parentNode = that.getParentNode();\n    while (parentNode) {\n      names.push(parentNode.title);\n      parentNode = parentNode.getParentNode();\n    }\n    names = names.reverse();\n    names.push(that.name || that.title || UNKNOWN_POINT_NAME);\n    return names.join('/');\n  }\n}\n","// colours\n// https://material.io/design/material-studies/rally.html#\n// https://storage.googleapis.com/spec-host/mio-staging%2Fmio-design%2F1576174064000%2Fassets%2F17gZmwIGdzlDr-Hl2jTu2SSgc_ATBGaPt%2Fcasestudies-rally-color-palettes.png\n\nlet purpleNum: string = '#262B2F';\nlet purpleLightNum: string = '#262B2F';\nlet greenLightBool: string = '#262B2F';\nlet greenBool: string = '#262B2F';\nlet greyString: string = '#262B2F';\nlet turquoiseFunction: string = '#262B2F';\nlet greyMath: string = '#262B2F';\nlet greyTime: string = '#262B2F';\n// let purpleNum :string = '#00B400'\n\nexport default class Icons {\n  //UI\n\n  //Point images/logos/nube-frog.png\n  static frog: string = '/images/logos/iot-lora-alliance-logo.png';\n  static aiIcon: string = '/images/node-editor/icons/points/ai.svg';\n  static aiColour: string = purpleNum;\n\n  // main\n  static uiMainIcon: string = '/images/node-editor/icons/logic-bool/and2.svg';\n  static uiMainColour: string = purpleNum;\n\n  // logic\n  static logicMainColour: string = greenLightBool;\n\n  static logicAndIcon: string = '/images/node-editor/icons/logic-bool/and2.svg';\n  static logicOrIcon: string = '/images/node-editor/icons/logic-bool/or.svg';\n  static logicNotIcon: string = '/images/node-editor/icons/logic-bool/not.svg';\n\n  static compareGreaterIcon: string = '/images/node-editor/icons/logic-compare/greater-than-equal-solid.svg';\n\n  // Numbers\n\n  // Math\n  static mathMainColour: string = purpleLightNum;\n  static mathMainIcon: string = '/images/node-editor/icons/math-arithmetic/plus-solid.svg';\n\n  static mathAddIcon: string = '/images/node-editor/icons/math-arithmetic/plus-solid.svg';\n  static mathSubIcon: string = '/images/node-editor/icons/math-arithmetic/minus-solid.svg';\n  static mathDivideIcon: string = '/images/node-editor/icons/math-arithmetic/divide-solid.svg';\n  static mathTimesIcon: string = '/images/node-editor/icons/math-arithmetic/times-solid.svg';\n\n  // Bool\n\n  // Time\n\n  // edge\n  // static logicNotIcon: string = '/images/node-editor/icons/logic-bool/not.svg';\n  static edgeNetwork: string = '/images/node-editor/icons/logic-bool/not.svg';\n\n}\n","import { isEqual, merge } from 'lodash';\nimport { Entry } from '../../../../backend/entry';\nimport { singleton as actor } from '../../../../promise-actor';\nimport { ContainerRegistry } from '../../../container';\nimport { Node } from '../../../node';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType } from '../../../node-io';\nimport EntryNode from './entry-node';\n\nexport default abstract class Mixin<T extends Entry> extends Node implements EntryNode<T> {\n  properties: {\n    entry: T;\n    is_protected: boolean;\n  };\n  settingFields: {};\n\n  abstract namePrefix(): string;\n\n  abstract updateEntry(body: T): Promise<any>;\n\n  abstract deleteEntry(): Promise<any>;\n\n  abstract createEntry(): Promise<T>;\n\n  abstract syncWithBackend(): void;\n\n  abstract entryFactory(): T;\n\n  entry() {\n    return this.properties.entry;\n  }\n\n  entryId() {\n    return this.entry() && this.entry().entryId();\n  }\n\n  applyEntry(entry: T) {\n    this.properties.entry = Object.assign(this.entryFactory(), entry); // ensures correct inheritance\n    this.title = this.namePrefix() + ' ' + this.properties.entry.label();\n    this.size = this.computeSize();\n    if (this.settings['name']) {\n      this.settings['name'].value = this.entryId();\n    }\n    merge(this.settings, this.createSettingForm(entry));\n    this.broadcastSettingsToClients();\n    this.broadcastTitleToClients();\n  }\n\n  createSettingForm(entry: T): { [name: string]: NodeSetting } {\n    return Object.keys(this.settingFields)\n                 .map(key => ({\n                   [key]: NodeSetting.create({\n                                               description: key,\n                                               value      : entry ? entry[key] : null,\n                                               type       : this.settingFields[key],\n                                             }),\n                 }))\n                 .reduce(merge);\n  }\n\n  deactivate() {\n    this.properties.entry = null;\n  }\n\n  onCreated() {\n    if (this.entry()) {\n      this.applyEntry(this.entry());\n    } else {\n      if (this.side !== Side.server) return;\n      actor.process(() =>\n                      this.createEntry()\n                          .then(entry => this.applyEntry(entry))\n                          .catch(e => {\n                            this.displayError(e, 'Entry not created.');\n                            console.log(e);\n                            // self-destruct\n                            this.deactivate();\n                            //TODO not yet send to client\n                            return this.container.nodeRegistry().remove(this);\n                          }),\n      );\n    }\n  }\n\n  onAdded() {\n    if (this.entry()) {\n      this.applyEntry(this.entry());\n    }\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return;\n    const update: T = <any>{};\n    const current: T = <any>{};\n    Object.keys(this.settingFields)\n          .filter(key => this.settingFields[key] !== SettingType.READONLY)\n          .forEach(key => {\n            update[key] = this.settings[key].value;\n            current[key] = this.entry() && this.entry()[key];\n          });\n    // update remotely if there are any changes\n    if (!isEqual(current, update)) {\n      actor.process(() =>\n                      this.updateEntry(update).catch(e => this.displayError(e, 'Unable to update entry remotely.')),\n      );\n    }\n  }\n\n  onRemoved() {\n    if (this.side !== Side.server || !this.entry()) return Promise.resolve();\n    return actor.process(() =>\n                           this.deleteEntry().catch(e => {\n                             this.displayError(e, 'Failed to remove entry from backend.');\n                             console.log(e);\n                           }),\n    );\n  }\n\n  findFreeIdentifier(): Promise<string> {\n    return this.getTakenIdentifiers().then(takenIdentifiers => {\n      for (let i = 1; ; i += 1) {\n        const identifier = this.makeIdentifier(i);\n        if (!takenIdentifiers.includes(identifier)) return identifier;\n      }\n    });\n  }\n\n  getTakenIdentifiers(): Promise<string[]> {\n    const globalSiblings = <EntryNode<T>[]>ContainerRegistry.instance().rootContainer().getNodesByClass(this.constructor, true);\n    return Promise.resolve(globalSiblings.filter(n => n.entry()).map(v => v.entry().identifier()));\n  }\n\n  makeIdentifier(n: number): string {\n    return `WIRES_${this.namePrefix().toUpperCase()}_${n}`;\n  }\n}\n","import PlatformDataSource from '../../../database/datasource/PlatformDataSource';\nexport default class SystemUtils {\n  static getDeviceID(self): Promise<string> {\n    return new Promise((resolve, reject) => {\n      if (self?.container?.db) {\n        self.container.db.getNodeType('system/platform', (err, docs) => {\n          if (!err) {\n            if (docs?.length && docs[0]?.properties?.deviceID) {\n              resolve(docs[0].properties.deviceID.trim());\n            } else {\n              reject('No deviceID');\n            }\n          } else {\n            console.log(err);\n            reject(err);\n          }\n        });\n      } else {\n        reject('No DB');\n      }\n    });\n  }\n\n  static getClientID(self): Promise<string> {\n    return new Promise((resolve, reject) => {\n      if (self?.container?.db) {\n        self.container.db.getNodeType('system/platform', (err, docs) => {\n          if (!err) {\n            if (docs?.length && docs[0]?.settings?.['client-id']?.value) {\n              resolve(docs[0].settings['client-id'].value.trim());\n            } else {\n              reject('No clientId');\n            }\n          } else {\n            console.log(err);\n            reject(err);\n          }\n        });\n      } else {\n        reject('No DB');\n      }\n    });\n  }\n\n  static getDeviceIdDb(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      PlatformDataSource.getPlatform().then(e => {\n        if(e){\n          resolve(e.deviceID); //deviceID\n        }\n      }).catch(err => {\n        reject('No deviceID');\n      })\n    });\n  }\n\n  static getClientIdDb(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      PlatformDataSource.getPlatform().then(e => {\n        if(e){\n          resolve(e.clientId); //clientId\n        }\n      }).catch(err => {\n        reject('No clientId');\n      })\n    });\n  }\n\n}\n","import axios from 'axios';\nimport { IPoint } from 'influx';\nimport * as moment from 'moment-timezone';\nimport config from '../../../config';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport SettingUtils from '../../utils/setting-utils';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport SystemUtils from '../system/system-utils';\n\nconst Influx = require('influx');\n\nenum HistoryMode {\n  COV = 0,\n  PERIODIC = 1,\n  TRIGGER_ONLY = 2,\n}\n\nenum DataBaseType {\n  POSTGRES = 0,\n  InfluxDB = 1,\n}\n\nexport default class HistoryBase extends Node {\n  // dynamically calculate position when starting\n  histTriggerInput: number;\n  clearStoredHisInput: number;\n  tableNameInput: number;\n  pointNameInput: number;\n  histErrorOutput: number;\n  storedHistCountOutput: number;\n  lastHistExportOutput: number;\n  // configurable parameters from each extended node for extracting values to store on DB\n  valueInput: number;\n  takeValueFromInput: boolean;\n  // extra parameter for nodes\n  interval: number = -1;\n  timeoutFunc: any;\n  dynamicInputStartPosition: number = 2;\n  alarmCount: number = 0;\n  tagCount: number = 0;\n  lastTrigger: boolean = false;\n\n  addHistoryConfiguration() {\n    this.addInput('histTrigger', Type.BOOLEAN);\n    this.addInput('clearStoredHis', Type.BOOLEAN);\n    this.addOutput('histError', Type.ANY);\n    this.addOutput('storedHistCount', Type.NUMBER);\n    this.addOutput('lastHistExport', Type.STRING);\n\n    /**\n     * History settings\n     */\n    this.settings['history_group'] = NodeSetting.create({\n      description: 'History Settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['databaseType'] = NodeSetting.create({\n      description: 'Database Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: DataBaseType.POSTGRES, text: 'Postgres' },\n          { value: DataBaseType.InfluxDB, text: 'InfluxDB' },\n        ],\n      },\n      value: DataBaseType.POSTGRES,\n    });\n    this.settings['enable'] = NodeSetting.create({\n      description: 'History Enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    // THESE SETTINGS FOR INFLUX HISTORY STORAGE -----------------\n    this.settings['tableName'] = NodeSetting.create({\n      description: 'Measurement Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n    // END OF INFLUX SPECIFIC SETTINGS ---------------------------\n\n    this.addInputWithSettings('pointName', Type.STRING, '', 'Point Name');\n    this.settings['historyMode'] = NodeSetting.create({\n      description: 'History Logging Mode',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: HistoryMode.COV, text: 'Change Of Value (COV)' },\n          { value: HistoryMode.PERIODIC, text: 'Periodic' },\n          { value: HistoryMode.TRIGGER_ONLY, text: 'Trigger Only' },\n        ],\n      },\n      value: HistoryMode.COV,\n    });\n    this.settings['dataType'] = NodeSetting.create({\n      description: 'Data type for storing',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: Type.NUMBER, text: 'Number' },\n          { value: Type.BOOLEAN, text: 'Boolean' },\n          { value: Type.STRING, text: 'String' },\n        ],\n      },\n      value: Type.NUMBER,\n    });\n    this.settings['threshold'] = NodeSetting.create({\n      description: 'COV Threshold',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.settings['period'] = NodeSetting.create({\n      description: 'Logging Interval',\n      value: 15,\n      type: SettingType.NUMBER,\n    });\n    this.settings['periodUnits'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.MILLISECONDS, text: 'Milliseconds' },\n          { value: TIME_TYPE.SECONDS, text: 'Seconds' },\n          { value: TIME_TYPE.MINUTES, text: 'Minutes' },\n          { value: TIME_TYPE.HOURS, text: 'Hours' },\n        ],\n      },\n      value: TIME_TYPE.MINUTES,\n    });\n    this.settings['storage-limit'] = NodeSetting.create({\n      description: 'Local Storage Limit (Max 50)',\n      value: 25,\n      type: SettingType.NUMBER,\n    });\n    this.settings['minuteRoundValue'] = NodeSetting.create({\n      description: 'Round minutes up in increments of',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.settings['decimals'] = NodeSetting.create({\n      description: 'Decimal Places (Limit 5)',\n      value: 3,\n      type: SettingType.NUMBER,\n    });\n    this.settings['timeAsString'] = NodeSetting.create({\n      description: 'Display Timestamp as',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: false, text: 'Numeric' },\n          { value: true, text: 'String' },\n        ],\n      },\n      value: true,\n    });\n\n    /**\n     * Alarm settings\n     */\n    this.settings['alarm_group'] = NodeSetting.create({\n      description: 'Alarm Settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['alarms_count'] = NodeSetting.create({\n      description: 'Alarms Count (Max 10)',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n\n    /**\n     * Tag settings\n     */\n    this.settings['tags_group'] = NodeSetting.create({\n      description: 'Tag Settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['tags_count'] = NodeSetting.create({\n      description: 'Tag Count (Max 10)',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.properties['obj'] = [];\n  }\n\n  setup() {\n    this.addHistoryConfiguration();\n  }\n\n  init(properties) {\n    this.historyFunctionsForAfterSettingsChange(properties['settings'], false);\n    this.lastTrigger = false;\n  }\n\n  /**\n   * When databaseType is selected as POSTGRES it needs to have an extra input tableName\n   * @param settings {object} settings configuration\n   */\n  private changeInputDynamically(settings) {\n    this.assignInputsOutputs();\n    if (this.tableNameInput === -1 && settings['databaseType'].value === DataBaseType.InfluxDB) {\n      if (this.pointNameInput) this.removeInput(this.pointNameInput);\n      this.addInput('[tableName]', Type.STRING, { exist: true, nullable: false, hidden: false });\n      this.addInput('[pointName]', Type.STRING, { exist: true, nullable: false, hidden: false });\n    } else if (this.tableNameInput !== -1 && settings['databaseType'].value === DataBaseType.POSTGRES) {\n      if (this.pointNameInput) this.removeInput(this.pointNameInput);\n      this.removeInput(this.tableNameInput);\n      this.addInput('[pointName]', Type.STRING, { exist: true, nullable: false, hidden: false });\n    }\n  }\n\n  onAdded() {\n    this.assignInputsOutputs();\n    this.resetOutputs();\n    this.doPeriodicHistoryFunctions();\n  }\n\n  async onInputUpdated() {\n    if (this.getInputData(this.clearStoredHisInput)) {\n      this.properties['obj'] = [];\n      this.updateHistoryCountOutput();\n    }\n    await this.doNonPeriodicHistoryFunctions();\n  }\n\n  async onAfterSettingsChange() {\n    this.historyFunctionsForAfterSettingsChange();\n    await this.doNonPeriodicHistoryFunctions();\n    this.doPeriodicHistoryFunctions();\n  }\n\n  onRemoved() {\n    clearInterval(this.timeoutFunc);\n  }\n\n  assignInputsOutputs() {\n    this.tableNameInput = -1;\n    this.pointNameInput = -1;\n    for (let input in this.inputs) {\n      if (this.inputs.hasOwnProperty(input)) {\n        if (this.inputs[input].name == 'histTrigger') this.histTriggerInput = Number(input);\n        if (this.inputs[input].name == 'clearStoredHis') this.clearStoredHisInput = Number(input);\n        if (this.inputs[input].name == '[tableName]') this.tableNameInput = Number(input);\n        if (this.inputs[input].name == '[pointName]') this.pointNameInput = Number(input);\n      }\n    }\n\n    for (let output in this.outputs) {\n      if (this.outputs.hasOwnProperty(output)) {\n        if (this.outputs[output].name == 'histError') this.histErrorOutput = Number(output);\n        else if (this.outputs[output].name == 'storedHistCount') this.storedHistCountOutput = Number(output);\n        else if (this.outputs[output].name == 'lastHistExport') this.lastHistExportOutput = Number(output);\n      }\n    }\n  }\n\n  addHistorySettingsConfig(valueInput: number = 0, takeValueFromInput: boolean = true) {\n    if (!this.settingConfigs.hasOwnProperty('groups') || !this.settingConfigs.hasOwnProperty('conditions')) {\n      this.setSettingsConfig({\n        groups: this.settingConfigs['groups'] || [],\n        conditions: this.settingConfigs['conditions'] || {},\n      });\n    }\n    this.settingConfigs.groups.push({ period: { weight: 2 }, periodUnits: {} });\n    this.settingConfigs.conditions['tableName'] = setting => {\n      return setting['databaseType'].value === DataBaseType.InfluxDB;\n    };\n    this.settingConfigs.conditions['threshold'] = setting => {\n      return setting['historyMode'].value === HistoryMode.COV;\n    };\n    this.settingConfigs.conditions['period'] = setting => {\n      return setting['historyMode'].value === HistoryMode.PERIODIC;\n    };\n    this.settingConfigs.conditions['periodUnits'] = setting => {\n      return setting['historyMode'].value === HistoryMode.PERIODIC;\n    };\n    this.settingConfigs.conditions['alarms_count'] = setting => {\n      return setting['databaseType'].value === DataBaseType.InfluxDB;\n    };\n    this.settingConfigs.conditions['tags_count'] = setting => {\n      return setting['databaseType'].value === DataBaseType.InfluxDB;\n    };\n\n    this.valueInput = valueInput;\n    this.takeValueFromInput = takeValueFromInput;\n  }\n\n  resetOutputs() {\n    this.updateHistoryCountOutput();\n  }\n\n  async doNonPeriodicHistoryFunctions() {\n    if (this.side !== Side.server) return;\n    if (!this.settings['enable'].value) return;\n    let input = null;\n    if (this.takeValueFromInput) {\n      input = this.getInputData(this.valueInput);\n    } else {\n      input = this.outputs[this.valueInput].data;\n    }\n\n    if (this.checkTriggered()) {\n      await this.storeLogEntry(input);\n    } else if (this.checkCOV(input)) {\n      await this.storeLogEntry(input);\n    }\n\n    if (this.properties['obj'].length > 0) await this.trySendStoredData();\n  }\n\n  async trySendStoredData() {\n    let decimals = this.settings['decimals'].value;\n    decimals = Utils.clamp(decimals, 0, 5);\n\n    const points: IPoint[] = [];\n    this.properties['obj'].forEach(log => {\n      const dataType = this.settings['dataType'].value;\n      log.payload = this.convertInput(log.payload, dataType, decimals);\n\n      const tagList = {};\n      tagList['point'] = this.getInputData(this.pointNameInput) || 'undefined';\n      Object.keys(log).map(key => {\n        if (key !== 'payload' && key !== 'timestamp' && key !== 'tags') {\n          tagList[key] = log[key];\n        }\n      });\n      for (let i = 0; i < 10; i++) {\n        tagList['tag' + (i + 1)] = log['tags'][i] || null;\n      }\n      points.push({\n        measurement: this.getInputData(this.tableNameInput),\n        fields: { val: log.payload },\n        timestamp: moment(log.timestamp).valueOf() * 1000000, // it only supports unix nano seconds dates\n        tags: tagList,\n      });\n    });\n\n    //////////////////////////////////////////////////////////////////////////\n    // This section should be replaced with the history storage mode of choice.\n    let errorFlag = false;\n    if (this.settings['databaseType'].value === DataBaseType.POSTGRES) {\n      // For Multiple points in 1 push\n      let clientIdFromPlat;\n      let deviceIdFromPlat;\n      try {\n        clientIdFromPlat = await SystemUtils.getClientIdDb();\n      } catch (e) {\n        clientIdFromPlat = 'unknownClientID';\n      }\n      try {\n        deviceIdFromPlat = await SystemUtils.getDeviceIdDb();\n      } catch (e) {\n        deviceIdFromPlat = 'unknownDeviceID';\n      }\n      const multiPointPost = points.map(point => ({\n        deviceid: deviceIdFromPlat,\n        clientid: clientIdFromPlat,\n        val: point.fields.val,\n        point: point.tags.point,\n        ts: moment(Number(point.timestamp) / 1000000).toISOString(), // we can do better than this\n      }));\n\n      const that = this;\n      const pgUrl = config.pg.baseURL;\n      try {\n        await axios({\n          method: 'post',\n          url: pgUrl,\n          data: multiPointPost,\n        });\n      } catch (error) {\n        this.setOutputData(that.histErrorOutput, String(error));\n        errorFlag = true;\n      }\n    } else if (DataBaseType.InfluxDB === DataBaseType.InfluxDB) {\n      const writeOptions = {};\n\n      const { protocol, host, port, databaseName, username, password } = config.influxDb;\n      const client = new Influx.InfluxDB({\n        host,\n        port,\n        protocol: protocol === 'https' ? 'https' : 'http',\n        database: databaseName,\n        username,\n        password,\n      });\n      try {\n        await client.writePoints(points, writeOptions);\n      } catch (err) {\n        this.setOutputData(this.histErrorOutput, String(err));\n        this.debugErr(err);\n        errorFlag = true;\n      }\n    }\n    /////////////////////////////////////////////////////////////\n\n    if (!errorFlag) {\n      this.properties['obj'] = [];\n      this.setOutputData(this.histErrorOutput, '');\n      this.settings['timeAsString'].value\n        ? this.setOutputData(this.lastHistExportOutput, moment().format(), true)\n        : this.setOutputData(this.lastHistExportOutput, moment().valueOf(), true);\n      this.updateHistoryCountOutput();\n    }\n  }\n\n  /**\n   * After settings changes this method needs to call\n   * @param configSettings {object}, if we want to set different settings name in input\n   * @param save {boolean}, need to persist the changes or not; when save = false, it needs to save later\n   */\n  historyFunctionsForAfterSettingsChange(configSettings = null, save: boolean = true) {\n    this.changeInputDynamically(configSettings || this.settings);\n    this.assignInputsOutputs();\n    if (this.settings['databaseType'].value === DataBaseType.POSTGRES) {\n      this.settings['alarms_count'].value = 0;\n      this.settings['tags_count'].value = 0;\n    }\n    this.dynamicInputStartPosition = this.pointNameInput + 1;\n    this.changeAlarmsCount(this.settings['alarms_count'].value);\n    this.renameAlarmInputs(configSettings);\n    this.changeTagsCount(this.settings['tags_count'].value);\n    if (save) {\n      this.persistProperties(true, false, true, false);\n    }\n  }\n\n  async storeLogEntry(input) {\n    if (input == null) return;\n    // cap the amount of data that can be stored\n    const storageLimit = Utils.clamp(this.settings['storage-limit'].value, 0, 50);\n    const minuteRound = Utils.clamp(this.settings['minuteRoundValue'].value, 0, 60);\n    const now = minuteRound ? TimeUtils.nearestFutureMinutes(minuteRound, moment()) : moment();\n    // object data\n    const msg = {\n      payload: input,\n      timestamp: now.toISOString(),\n    };\n    // add alarm values\n    for (let i = this.dynamicInputStartPosition; i < this.dynamicInputStartPosition + this.alarmCount; i++) {\n      let alarmNum = i - this.dynamicInputStartPosition + 1;\n      let alarmName = this.settings['alarm' + alarmNum].value || 'alarm' + alarmNum;\n      msg[alarmName] = this.getInputData(i) || 'null';\n    }\n    // add tags\n    const tags = [];\n    let j = 1;\n    while (j <= this.tagCount) {\n      if (this.settings['tag' + j].value) tags.push(this.settings['tag' + j].value);\n      j++;\n    }\n    msg['tags'] = tags;\n\n    // build an object\n    this.properties['obj'].push(msg);\n    while (this.properties['obj'].length > storageLimit) {\n      this.properties['obj'].shift();\n    }\n    this.properties['lastHistoryValue'] = input;\n    this.persistProperties(false, true, false, false);\n    this.updateHistoryCountOutput();\n  }\n\n  checkTriggered() {\n    const trigger = this.getInputData(this.histTriggerInput) || false;\n    const result = this.inputs[this.histTriggerInput].updated && trigger && !this.lastTrigger;\n    this.lastTrigger = trigger;\n    return result;\n  }\n\n  checkCOV(input) {\n    if (this.settings['historyMode'].value === HistoryMode.COV) {\n      const threshold = this.settings['threshold'].value;\n      if (!isNaN(input) && !isNaN(this.properties['lastHistoryValue'])) {\n        return Math.abs(Number(input) - Number(this.properties['lastHistoryValue'])) >= threshold;\n      } else {\n        return input !== this.properties['lastHistoryValue'];\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Sets values in periodic period when HistoryMode is `PERIODIC`\n   */\n  doPeriodicHistoryFunctions() {\n    if (this.side !== Side.server) return;\n    const enable = this.settings['enable'].value;\n    const isPeriodic = this.settings['historyMode'].value === HistoryMode.PERIODIC;\n    if (!enable || !isPeriodic) {\n      if (this.timeoutFunc) {\n        this.interval = -1;\n        clearInterval(this.timeoutFunc);\n        this.debugInfo('Clearing Periodic interval data insertion...');\n      }\n    }\n    if (enable && isPeriodic) {\n      const interval = TimeUtils.timeConvert(this.settings['period'].value, this.settings['periodUnits'].value);\n      if (this.interval !== interval) {\n        clearInterval(this.timeoutFunc);\n        this.timeoutFunc = setInterval(async () => {\n          let input = null;\n          if (this.takeValueFromInput) input = this.getInputData(this.valueInput);\n          else input = this.outputs[this.valueInput].data;\n          await this.storeLogEntry(input);\n          if (this.properties['obj'].length > 0) await this.trySendStoredData();\n        }, interval);\n        this.interval = interval;\n        this.debugInfo(`Setting Periodic Period of: ${interval} ms`);\n      }\n    }\n  }\n\n  changeAlarmsCount(targetCount) {\n    targetCount = Utils.clamp(targetCount, 0, 10);\n    this.settings['alarms_count'].value = targetCount;\n    let diff = targetCount - this.alarmCount;\n    if (diff == 0) return;\n\n    // add inputs\n    this.changeInputsCount(targetCount + this.dynamicInputStartPosition, Type.STRING);\n\n    // change settings for topics\n    const alarmsToAdd = {};\n    if (diff > 0) {\n      for (let i = this.alarmCount + 1; i <= targetCount; i++) {\n        alarmsToAdd['alarm' + i] = {\n          description: 'Alarm ' + i,\n          value: '',\n          type: SettingType.STRING,\n        };\n      }\n      // for making things consistent on UI settings side\n      this.settings = SettingUtils.insertIntoObjectAtPosition(\n        this.settings,\n        alarmsToAdd,\n        this.alarmCount == 0 ? 'alarms_count' : 'alarm' + this.alarmCount,\n      );\n    } else if (diff < 0) {\n      for (let i = this.alarmCount; i > targetCount; i--) {\n        delete this.settings['alarm' + i];\n      }\n    }\n    this.alarmCount = targetCount;\n  }\n\n  renameAlarmInputs(configSettings) {\n    for (let i = 1; i <= this.alarmCount; i++) {\n      let alarm = this.settings['alarm' + i].value;\n      if (!alarm && configSettings) {\n        alarm = (configSettings['alarm' + i] && configSettings['alarm' + i].value) || '';\n      }\n      if (alarm.length > 20) alarm = '...' + alarm.substr(alarm.length - 20, 20);\n      this.inputs[this.dynamicInputStartPosition + i - 1].name = 'alarm' + i + ' | ' + alarm;\n    }\n  }\n\n  changeTagsCount(targetCount) {\n    targetCount = Utils.clamp(targetCount, 0, 10);\n    this.settings['tags_count'].value = targetCount;\n    let diff = targetCount - this.tagCount;\n    if (diff == 0) return;\n\n    // change settings for topics\n    const tagsToAdd = {};\n    if (diff > 0) {\n      for (let i = this.tagCount + 1; i <= targetCount; i++) {\n        tagsToAdd['tag' + i] = {\n          description: 'Tag ' + i,\n          value: '',\n          type: SettingType.STRING,\n        };\n      }\n      // for making things consistent on UI settings side\n      this.settings = SettingUtils.insertIntoObjectAtPosition(\n        this.settings,\n        tagsToAdd,\n        this.tagCount === 0 ? 'tags_count' : 'tag' + this.tagCount,\n      );\n    } else if (diff < 0) {\n      for (let i = this.tagCount; i > targetCount; i--) {\n        delete this.settings['tag' + i];\n      }\n    }\n    this.tagCount = targetCount;\n  }\n\n  updateHistoryCountOutput() {\n    this.setOutputData(this.storedHistCountOutput, (this.properties['obj'] && this.properties['obj'].length) || 0);\n  }\n}\n","module.exports = require(\"jsonata\");","import axios from 'axios';\nimport { Colors, create } from 'logplease';\nimport Utils from '../../../utils';\nimport { ADD_POINT, REMOVE_POINT, SEND_PAYLOAD_TO_CHILD } from './edge-constant';\n\nconst logger = create('edge-utils', { color: Colors.Grey });\n\nexport default class Edge28Utils {\n  static sendPayloadToChild(childNode, payload) {\n    if (childNode && childNode['subscribe']) {\n      childNode['subscribe'](this.createMessage(SEND_PAYLOAD_TO_CHILD, payload));\n    } else {\n      logger.error('Child Node is not available on sendPayloadToChild');\n    }\n  }\n\n  static addPoint(parentNode, payload) {\n    if (parentNode && parentNode['subscribe']) {\n      parentNode['subscribe'](this.createMessage(ADD_POINT, payload));\n    } else {\n      logger.error('Parent Node is not available on addPoint');\n    }\n  }\n\n  static removePoint(parentNode, payload) {\n    if (parentNode && parentNode['subscribe']) {\n      parentNode['subscribe'](this.createMessage(REMOVE_POINT, payload));\n    } else {\n      logger.error('Parent Node is not available on removePoint');\n    }\n  }\n\n  private static createMessage(action, payload = null) {\n    return { action, payload };\n  }\n\n  static async writePointValue(\n    host: string,\n    port: number,\n    apiVer: string,\n    pointType: string,\n    pointId: string,\n    val: number,\n    priority: number,\n  ): Promise<any> {\n    const url = `${Utils.buildUrl(host, port)}/api/${apiVer}/write/${pointType}/${pointId}/${val}/${priority}`;\n    const pointValue = await axios.get(url);\n    return pointValue.data;\n  }\n}\n","export const GET_BACNET_CLIENT = 'GET_BACNET_CLIENT';\nexport const GET_NETWORK_NODE = 'GET_NETWORK_NODE';\nexport const GET_POINTS = 'GET_POINTS';\nexport const GET_PRESENT_VALUE = 'GET_PRESENT_VALUE';\nexport const SEND_PAYLOAD_TO_CHILD = 'SEND_PAYLOAD_TO_CHILD';\nexport const SEND_POINT_VALUE = 'SEND_POINT_VALUE';\nexport const ADD_POINT = 'ADD_POINT';\nexport const REMOVE_POINT = 'REMOVE_POINT';\nexport const ADD_DEVICE = 'ADD_DEVICE';\nexport const REMOVE_DEVICE = 'REMOVE_DEVICE'; \nexport const WRITE_PRESENT_VALUE = 'WRITE_PRESENT_VALUE'; \n","import { Colors, create } from 'logplease';\nimport { PointModel, PointOutput, PointValue, PointValueCreator } from '../../../../backend/models/point-model';\nimport { ErrorHandler } from '../../../../utils/decorators';\nimport { Constructor, isEmpty, isFunction, range } from '../../../../utils/helper';\nimport { IMessageSubscriber, Observer } from '../../../../utils/pattern';\nimport { Node, NodeSettingConfig } from '../../../node';\nimport { Side } from '../../../node-interface';\nimport { InputSetting, NodeInput, NodeSetting, SettingType, Type } from '../../../node-io';\nimport { createLegacyLinkHandler } from '../../../node-link';\nimport { NodeInputEvaluation } from '../../node-mixin';\nimport { InputMethod } from './point-node-utils';\n\nconst logger = create('observer', { color: Colors.Yellow });\n\n/**\n * The logical handler manages data point state that can be changed by UI or external system.\n *\n * It is business logic that separated to UI component to easy extendable and testable\n */\nexport interface DataPointFlowHandler<T extends PointModel> extends IMessageSubscriber {\n\n  /**\n   * Init point data by setting object model\n   * @param settings Node Settings\n   * @return point data\n   */\n  initializePointBySettingObject(settings?: { [name: string]: NodeSetting }): T;\n\n  /**\n   * Init point data by each setting input\n   * @param settings Node Settings\n   * @return point data\n   */\n  initializePointBySettingInput(settings?: { [name: string]: NodeSetting }): T;\n\n  /**\n   * Compare previous point and current point then transfer COV to server/client\n   * @param current current point data\n   * @param prev previous point data\n   * @return the updated point with COV\n   */\n  handleOnUpdate(current: T, prev?: T): T;\n\n  /**\n   * Listen a changes from external system\n   * @param incomingMessage point data\n   * @return {any}\n   */\n  onReceiveMessage(incomingMessage: any): void;\n\n  /**\n   * Notify COV to observers\n   * @param point point data\n   * @param observers list of observer that watch an output change\n   */\n  notifyOutput(point: T, observers: Observer<PointOutput<T>>[]): void;\n\n}\n\n/**\n * Defines list observers that watch an output change on point\n */\nexport interface HasPointOutputObservers<T extends PointModel> {\n\n  pointObservers(): Observer<PointOutput<T>>[];\n\n}\n\nexport class MockHasPointOutputObservers<T extends PointModel> implements HasPointOutputObservers<T> {\n  private static readonly MOCK = new MockHasPointOutputObservers();\n\n  static cast(object: any) {\n    if (isEmpty(object)) {\n      return MockHasPointOutputObservers.MOCK;\n    }\n    if (isFunction(object['pointObservers'])) {\n      return object;\n    }\n    return MockHasPointOutputObservers.MOCK;\n  }\n\n  pointObservers(): Observer<PointOutput<T>>[] {\n    return [];\n  }\n\n  private MockHasPointOutputObservers() {\n  }\n}\n\n/**\n * Defines object must apply DataPointFlowHandler\n */\nexport interface HasDataPointFlowHandler<T extends PointModel> {\n\n  flowHandler(): DataPointFlowHandler<T>;\n\n}\n\n/**\n * Defines self observer to update Node Output by point data\n */\nexport class PointOutputObserver<T extends PointModel> implements Observer<PointOutput<T>> {\n\n  node: Node;\n  outputSlots: { output: number, priority: number, priorityArray: number };\n\n  constructor(node: Node, outputSlots: { output: number, priority: number, priorityArray: number }) {\n    this.node = node;\n    this.outputSlots = outputSlots;\n  }\n\n  update(data: PointOutput<T>): void {\n    logger.debug(\n      `Node ${this.node.getReadableId()} receives point: ${data.point.identifier()} - ${data.connStatus.status.label}`);\n    this.node.setOutputData(this.outputSlots.output, data.point?.pointValue?.presentValue);\n    this.node.setOutputData(this.outputSlots.priority, data.point?.pointValue?.priority);\n    this.node.setOutputData(this.outputSlots.priorityArray, data.point?.pointValue?.priorityArray);\n  }\n}\n\nexport abstract class CentralizedPointOutputObserver<T extends PointModel> implements Observer<PointOutput<T>> {\n\n  protected node: Node;\n  protected outputSlot: number;\n\n  constructor(node: Node, outputSlot: number) {\n    this.node = node;\n    this.outputSlot = outputSlot;\n  }\n\n  update(data: PointOutput<T>): void {\n    logger.debug(\n      `Node ${this.node.getReadableId()} receives point: ${data.point.identifier()} - ${data.connStatus.status.label}`);\n    this.node.setOutputData(this.outputSlot,\n                            { ...(this.node.outputs[this.outputSlot]?.data ?? {}), ...this.convert(data) });\n  }\n\n  protected abstract convert(data: PointOutput<T>): object;\n}\n\n/**\n * Define mixin to implement common point data workflow\n * @param {TBase} Base\n * @return {PointNodeMixinBase}\n * @constructor\n */\nexport function PointNodeMixin<TBase extends Constructor<Node>, T extends PointModel>(Base: TBase) {\n  abstract class PointNodeMixinBase extends Base\n    implements NodeInputEvaluation, HasPointOutputObservers<T>, HasDataPointFlowHandler<T> {\n    private readonly _iPresentValue = 'present-value';\n    private readonly _iPriority = 'point-priority';\n    private readonly _iPriorityArrayLot = 'inputPriorityArray';\n    private readonly _iPriorityArrayJson = 'priority-array';\n    private readonly _sInputGroup = 'inputGroup';\n    private readonly _sInputMethod = 'inputMethod';\n    private readonly _sDecimal = 'decimals';\n    private readonly _oOut = 'out';\n    private readonly _oPriority = 'priority';\n    private readonly _oPriorityArray = 'priority-array';\n\n    abstract flowHandler(): DataPointFlowHandler<T>;\n\n    onAdded(): void {\n      if (this.side !== Side.server) {\n        return;\n      }\n      let current = this.flowHandler().initializePointBySettingObject();\n      this.flowHandler().notifyOutput(this.flowHandler().handleOnUpdate(current), this.pointObservers());\n      this.updateTitle();\n    }\n\n    onAfterSettingsChange(oldSettings, oldName?): void {\n      this.handleDynamicInput(oldSettings);\n      if (this.side !== Side.server) {\n        return;\n      }\n      let prev = this.flowHandler().initializePointBySettingObject(oldSettings);\n      let current = this.flowHandler().initializePointBySettingInput();\n      this.flowHandler().notifyOutput(this.flowHandler().handleOnUpdate(current, prev), this.pointObservers());\n      this.updateTitle();\n    }\n\n    onInputUpdated(): void {\n      if (this.side !== Side.server) {\n        return;\n      }\n      let prev = this.flowHandler().initializePointBySettingObject();\n      this.reEvaluateSettingByInput(this.inputs, this.settings);\n      let current = this.flowHandler().initializePointBySettingInput();\n      this.flowHandler().notifyOutput(this.flowHandler().handleOnUpdate(current, prev), this.pointObservers());\n      this.updateTitle();\n    }\n\n    @ErrorHandler\n    reEvaluateSettingByInput(inputs: { [p: number]: NodeInput }, settings: { [p: string]: NodeSetting }): void {\n      if (isFunction(super['reEvaluateSettingByInput'])) {\n        super['reEvaluateSettingByInput'](inputs, settings);\n      }\n      let inputMethod = InputMethod.enumValueOf(this.settings[this._sInputMethod].value);\n      let pv: PointValue;\n      if (inputMethod === InputMethod.VALUE_PRIORITY) {\n        let presentValue = this.inputs[this.valueInputIdx()].updated\n                           ? this.inputs[this.valueInputIdx()].data\n                           : this.settings[this._iPresentValue].value;\n        let priority = this.inputs[this.priorityInputIdx()].updated\n                       ? this.inputs[this.priorityInputIdx()].data\n                       : this.settings[this._iPriority].value;\n        pv = PointValueCreator.init(presentValue, priority);\n        this.settings[this._iPresentValue].value = pv.presentValue;\n        this.settings[this._iPriority].value = pv.priority;\n      }\n      if (inputMethod === InputMethod.PRIORITY_ARRAY_LOT) {\n        let startIdx = this.priorityArrayInputIdx();\n        pv = PointValueCreator.by(Array.from(range(startIdx + 1, startIdx + 16)).map(i => this.inputs[i].data));\n        this.settings[this._iPriorityArrayLot].value = pv.priorityArray;\n      }\n      if (inputMethod === InputMethod.PRIORITY_ARRAY_JSON) {\n        pv = PointValueCreator.by(this.inputs[this.priorityArrayInputIdx()].data);\n        this.settings[this._iPriorityArrayJson].value = pv.priorityArray;\n      }\n    }\n\n    pointObservers(): Observer<PointOutput<T>>[] {\n      return [new PointOutputObserver<T>(this, {\n        output       : this.valueOutputIdx(),\n        priority     : this.priorityOutputIdx(),\n        priorityArray: this.priorityArrayOutputIdx(),\n      })];\n    }\n\n    protected abstract modelSettingKey(): string;\n\n    protected abstract valueInputIdx(): number;\n\n    protected abstract valueOutputIdx(): number;\n\n    protected abstract computeTitle(): string;\n\n    protected priorityInputIdx(): number {\n      return this.valueInputIdx() + 1;\n    }\n\n    protected priorityArrayInputIdx(): number {\n      return this.priorityInputIdx() + 1;\n    }\n\n    protected priorityOutputIdx(): number {\n      return this.valueOutputIdx() + 1;\n    }\n\n    protected priorityArrayOutputIdx(): number {\n      return this.priorityOutputIdx() + 1;\n    }\n\n    protected presentValueType(): Type {\n      return Type.NUMBER;\n    }\n\n    /**\n     * Add required properties in {@link NodeSetting}, {@link NodeInput} and {@link NodeOutput}\n     * @returns Setting configuration\n     */\n    protected mixinPointValueInputOutput(): NodeSettingConfig {\n      this.addOutput(this._oOut, Type.NUMBER);\n      this.addOutput(this._oPriority, Type.NUMBER);\n      this.addOutput(this._oPriorityArray, Type.JSON);\n\n      this.settings[this.modelSettingKey()] = NodeSetting.create({ description: '', value: null });\n      this.settings[this._iPriorityArrayLot] = NodeSetting.create({ description: '', value: null });\n      this.settings[this._sInputGroup] = NodeSetting.create({ description: 'Input Settings', value: '', type: SettingType.GROUP });\n      this.settings[this._sDecimal] = NodeSetting.create({ description: 'Decimal Places (Limit 5)', value: 3, type: SettingType.NUMBER });\n      this.settings[this._sInputMethod] = NodeSetting.create({\n        description: 'Input Method',\n        type       : SettingType.DROPDOWN,\n        config     : { items: InputMethod.items() },\n        value      : InputMethod.VALUE_PRIORITY.enumKey,\n      });\n      this.addInputWithSettings(this._iPresentValue, this.presentValueType(), null, 'Present Value');\n      this.addInputWithSettings(this._iPriority, Type.NUMBER, 16, 'Point Priority');\n      this.addInputWithSettings(this._iPriorityArrayJson, Type.JSON, null, 'Priority Array in JSON or Array');\n      this.inputs[this.priorityArrayInputIdx()].setting.hidden = true;\n      let cfg = {};\n      for (let value of range(1, 16)) {\n        this.settings[`in${value}`] = NodeSetting.create({ description: `in${value}`, type: SettingType.BOOLEAN, value: false });\n        this.addInput(`[in${value}]`, Type.NUMBER, { exist: false, nullable: true, hidden: true } as InputSetting);\n        cfg[`in${value}`] = () => InputMethod.PRIORITY_ARRAY_LOT.enumKey === this.settings[this._sInputMethod].value;\n      }\n      cfg[this.modelSettingKey()] = () => false;\n      cfg[this._iPresentValue] = () => InputMethod.VALUE_PRIORITY.enumKey === this.settings[this._sInputMethod].value;\n      cfg[this._iPriority] = () => InputMethod.VALUE_PRIORITY.enumKey === this.settings[this._sInputMethod].value;\n      cfg[this._iPriorityArrayLot] = () => false;\n      cfg[this._iPriorityArrayJson] = () => false;\n      return { conditions: cfg };\n    }\n\n    protected updateTitle(): void {\n      this.title = this.computeTitle();\n      this.broadcastSettingsToClients();\n    }\n\n    protected createPointValue(st: { [name: string]: NodeSetting }): PointValue {\n      let inputMethod = InputMethod.enumValueOf(st['inputMethod'].value);\n      let pv: PointValue;\n      let cur: PointValue = this.settings[this.modelSettingKey()]?.value?.pointValue;\n      if (inputMethod === InputMethod.VALUE_PRIORITY) {\n        pv = PointValueCreator.create(st[this._iPresentValue].value, st[this._iPriority].value, cur?.priorityArray);\n      }\n      if (inputMethod === InputMethod.PRIORITY_ARRAY_LOT) {\n        pv = PointValueCreator.by(st[this._iPriorityArrayLot].value);\n      }\n      if (inputMethod === InputMethod.PRIORITY_ARRAY_JSON) {\n        pv = PointValueCreator.by(st[this._iPriorityArrayJson].value);\n      }\n      return pv.merge(cur);\n    }\n\n    private handleDynamicInput(oldSettings: { [name: string]: NodeSetting }) {\n      let oldInputMethod = InputMethod.enumValueOf(oldSettings ? oldSettings[this._sInputMethod]?.value : null);\n      let newInputMethod = InputMethod.enumValueOf(this.settings[this._sInputMethod].value);\n      if (oldInputMethod && oldInputMethod === newInputMethod && newInputMethod !== InputMethod.PRIORITY_ARRAY_LOT) {\n        return;\n      }\n      if (newInputMethod === InputMethod.VALUE_PRIORITY) {\n        this.hideInput(false, ...range(this.priorityArrayInputIdx(), this.priorityArrayInputIdx() + 16));\n        this.showInput(false, this.valueInputIdx(), this.priorityInputIdx());\n      }\n      if (newInputMethod === InputMethod.PRIORITY_ARRAY_LOT) {\n        let hidden = [this.valueInputIdx(), this.priorityInputIdx(), this.priorityArrayInputIdx()];\n        let show = [];\n        for (let idx of range(this.priorityArrayInputIdx() + 1, this.priorityArrayInputIdx() + 16)) {\n          this.settings[`in${idx - this.priorityArrayInputIdx()}`].value ? show.push(idx) : hidden.push(idx);\n        }\n        this.hideInput(false, ...hidden);\n        this.showInput(false, ...show);\n      }\n      if (newInputMethod === InputMethod.PRIORITY_ARRAY_JSON) {\n        this.hideInput(\n          false,\n          this.valueInputIdx(),\n          this.priorityInputIdx(),\n          ...range(this.priorityArrayInputIdx() + 1, this.priorityArrayInputIdx() + 16),\n        );\n        this.showInput(false, this.priorityArrayInputIdx());\n      }\n      createLegacyLinkHandler(this).recomputeInputLinks();\n    }\n  }\n\n  return PointNodeMixinBase;\n}\n","import { isEmpty, isFunction } from './helper';\n\nexport interface NodeStoreItem {\n  identifier: string;\n  nodeId: string;\n  enabled: boolean;\n  callback?: Function;\n  prev?: NodeStoreItem;\n  data?: any;\n  lenient?: boolean;\n}\n\nexport interface ICentralizedListener {\n\n  listen({ action, payload }: { action: string; payload: NodeStoreItem }): any;\n\n}\n\n/**\n * To guard some error import without parent\n */\nexport class MockCentralizedListener implements ICentralizedListener {\n\n  static readonly LISTENER = new MockCentralizedListener();\n\n  static cast(object: any) {\n    if (isEmpty(object)){\n      return MockCentralizedListener.LISTENER;\n    }\n    if (isFunction(object['listen'])){\n      return object;\n    }\n    return MockCentralizedListener.LISTENER;\n  }\n\n  listen({ action, payload }: { action: string; payload: NodeStoreItem }): any {\n    throw new Error(`Not found handler or parent to process action ${action}`);\n  }\n\n  private MockCentralizedListener() {\n  }\n}\n\nexport interface HasCentralizedListener {\n\n  listener(): ICentralizedListener;\n\n}\n\n/**\n * Represents for observer to listen change from {@link Observable}\n */\nexport interface Observer<D extends EventData> {\n\n  /**\n   * Do update from receive information\n   * @param {EventData} data Event data\n   * @param {string} eventSourceId? event source\n   */\n  update(data: D, eventSourceId?: string): void;\n\n}\n\nexport interface Observable<D extends EventData> {\n\n  /**\n   * Defines list of observer\n   * @return {Observer<D>[]} observers\n   * @see Observer\n   */\n  observers(): Observer<D>[];\n\n  /**\n   * Notify to observers the changed of data\n   * @param {D} data Event data\n   * @param {string} eventSourceId\n   * @see observers\n   */\n  notify(data: D, eventSourceId?: string): void;\n\n}\n\nexport interface EventData {\n\n}\n\nexport class DefaultObservable<D extends EventData> implements Observable<D> {\n\n  list: Observer<D>[];\n\n  constructor(list: Observer<D>[]) {\n    this.list = list;\n  }\n\n  observers(): Observer<D>[] {\n    return this.list;\n  }\n\n  notify(data: D, eventSourceId?: string): void {\n    this.observers()?.forEach(observer => observer.update(data, eventSourceId));\n  }\n}\n\nexport interface IMessageConverter {\n  /**\n   * Convert outcome data before using\n   * @param outcomeData\n   * @returns {string} message in string\n   */\n  onConvertMessage(outcomeData: any): string;\n}\n\nexport interface IMessageSubscriber {\n  /**\n   * Handles incoming message from external resource\n   * @param incomingMessage\n   */\n  onReceiveMessage(incomingMessage: any): void;\n}\n","import { Colors, create } from 'logplease';\nimport { ConnectionStatus } from '../../../utils/enums';\nimport { Constructor, isFunction } from '../../../utils/helper';\nimport { IdGenerator } from '../../../utils/id-generator';\nimport { EventData, Observer } from '../../../utils/pattern';\nimport { Node, NodeSettingConfig } from '../../node';\nimport { Type } from '../../node-io';\nimport { AbleEnableNode, HasEnabled } from '../node-mixin';\n\nconst logger = create('observer', { color: Colors.Yellow });\n\nexport class ConnectionOutput implements EventData {\n\n  status: ConnectionStatus;\n  error?: string;\n\n  constructor(status: ConnectionStatus, error?: string) {\n    this.status = status;\n    this.error = error;\n  }\n\n}\n\nexport interface ExternalConnectionNode extends HasEnabled {\n\n  isConnConnected(): boolean;\n\n  getConnectionStatus(): ConnectionStatus;\n\n  statusObserver(): Observer<ConnectionOutput>;\n\n}\n\nexport interface DependantConnectionNode extends ExternalConnectionNode {\n\n  parentConnectionNode(): ExternalConnectionNode;\n\n}\n\nexport class ConnectionOutputObserver implements Observer<ConnectionOutput> {\n\n  node: Node;\n  outputSlots: { status: number, error: number };\n\n  constructor(node: Node, outputSlots: { status: number, error: number }) {\n    this.node = node;\n    this.outputSlots = outputSlots;\n  }\n\n  update(data: ConnectionOutput, eventSourceId?: string): void {\n    let current = ConnectionStatus.lookupByLabel(this.node.outputs[this.outputSlots.status].data);\n    let nodeId = IdGenerator.createNodeId(this.node.cid, this.node.id);\n    let itselfConnected = isFunction(this.node['isConnConnected']) ? this.node['isConnConnected']() : true;\n    if (eventSourceId && nodeId !== eventSourceId && (current?.isError() || !itselfConnected)) {\n      return;\n    }\n    logger.debug(`Node ${this.node.getReadableId()} receives connection status '${data.status.label}' ` +\n                 `from source id '${eventSourceId ?? nodeId}'`);\n    this.node.setOutputData(this.outputSlots.status, data.status.label);\n    this.node.setOutputData(this.outputSlots.error, data.error ?? '');\n  }\n\n}\n\nexport function ExternalConnectionNodeMixin<TBase extends Constructor<Node>>(Base: TBase) {\n  abstract class ExternalConnectionNodeMixinBase extends AbleEnableNode(Base) implements ExternalConnectionNode {\n\n    protected connectionStatus: ConnectionStatus = ConnectionStatus.UNCONNECTED;\n\n    statusObserver(): Observer<ConnectionOutput> {\n      return new ConnectionOutputObserver(this, { status: this.statusOutputIdx(), error: this.errorOutputIdx() });\n    }\n\n    getConnectionStatus(): ConnectionStatus {\n      if (!this.isEnabled()) {\n        return (this.connectionStatus = ConnectionStatus.UNCONNECTED);\n      }\n      if (this.connectionStatus?.isError()) {\n        return this.connectionStatus;\n      }\n      this.connectionStatus = this.isConnConnected() ? ConnectionStatus.CONNECTED : ConnectionStatus.DISCONNECTED;\n      return this.connectionStatus;\n    }\n\n    abstract isConnConnected(): boolean;\n\n    protected abstract statusOutputIdx(): number;\n\n    protected errorOutputIdx(): number {\n      return this.statusOutputIdx() + 1;\n    }\n\n    protected mixinConnectionStatusOutput(): NodeSettingConfig {\n      this.addOutput('status', Type.STRING);\n      this.addOutput('error', Type.STRING);\n      this.setOutputData(this.statusOutputIdx(), this.getConnectionStatus().label);\n      return {};\n    }\n\n  }\n\n  return ExternalConnectionNodeMixinBase;\n}\n\nexport function DependantConnectionNodeMixin<TBase extends Constructor<Node>>(Base: TBase) {\n  abstract class DependantConnectionNodeMixinBase extends ExternalConnectionNodeMixin(Base)\n    implements DependantConnectionNode {\n\n    onAdded(): void {\n      this.executeFunction('onAdded');\n    }\n\n    onAfterSettingsChange(oldSettings, oldName?): void {\n      this.executeFunction('onAfterSettingsChange', oldSettings, oldName);\n    }\n\n    onInputUpdated(): void {\n      this.executeFunction('onInputUpdated');\n    }\n\n    parentConnectionNode(): ExternalConnectionNode {\n      let parentNode = this.getParentNode();\n      if (parentNode && isFunction(parentNode['getConnectionStatus'])) {\n        return <ExternalConnectionNode><unknown>parentNode;\n      }\n      return null;\n    }\n\n    isConnConnected(): boolean {\n      let isParentConnected = this.parentConnectionNode()?.getConnectionStatus().isConnected() ?? false;\n      return this.isEnabled() && isParentConnected;\n    }\n\n    protected handleError(err: Error, func: string): void {\n      this.debug(`Error when executing function ${func} in node ${this.getReadableId()} - ${err.stack}`);\n      this.statusObserver().update(new ConnectionOutput(this.getConnectionStatus(), err.message));\n    }\n\n    protected executeFunction(func: string, ...args) {\n      try {\n        if (super[func] && isFunction(super[func])) {\n          super[func](...args);\n        }\n        this.connectionStatus = null;\n        this.statusObserver().update(new ConnectionOutput(this.getConnectionStatus()));\n      } catch (err) {\n        this.connectionStatus = ConnectionStatus.ERROR;\n        this.handleError(err, func);\n      }\n    }\n  }\n\n  return DependantConnectionNodeMixinBase;\n}\n","module.exports = require(\"path\");","/**\n * Created by Derwish (derwish.pro@gmail.com) on 16.02.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport AuthUserDatabase from './database/AuthUserDatabase';\nimport DashboardDatabase from './database/DashboardDatabase';\nimport HistorianDatabase from './database/HistorianDatabase';\nimport NodeDatabase from './database/NodeDatabase';\nimport ScheduleDatabase from './database/ScheduleDatabase';\nimport UserDatabase from './database/UserDatabase';\n\nexport interface Database extends AuthUserDatabase, DashboardDatabase, NodeDatabase, ScheduleDatabase,\n                                  HistorianDatabase, UserDatabase {\n}\n\nexport class AsyncDbHelper {\n\n  static noArgs<R>(db: Database, func: Function): Promise<R> {\n    return new Promise<R>((resolve, reject) => func.call(db, this.cbHandler(reject, resolve)));\n  }\n\n  static oneArgs<R>(db: Database, func: Function, param: any): Promise<R> {\n    return new Promise<R>((resolve, reject) => func.call(db, param, this.cbHandler(reject, resolve)));\n  }\n\n  static twoArgs<R>(db: Database, func: Function, param1: any, param2: any): Promise<R> {\n    return new Promise<R>((resolve, reject) => func.call(db, param1, param2, this.cbHandler(reject, resolve)));\n  }\n\n  static threeArgs<R>(db: Database, func: Function, param1: any, param2: any, param3: any): Promise<R> {\n    return new Promise<R>((resolve, reject) => func.call(db, param1, param2, param3, this.cbHandler(reject, resolve)));\n  }\n\n  private static cbHandler<R>(reject: (reason?: any) => void, resolve: (value?: (PromiseLike<R> | R)) => void) {\n    return (err?: Error, result?: R) => {\n      if (err) {\n        reject(err);\n      } else {\n        resolve(result);\n      }\n    };\n  }\n}\n","import { ErrorHandler } from '../utils/decorators';\nimport { isFunction } from '../utils/helper';\nimport { Node } from './node';\n\n//TODO must remove by event lifecycle\nexport class NodeHookHelper {\n\n  @ErrorHandler\n  static execute(node: Node, funcName: string, ...args): Node {\n    if (isFunction(node[funcName])) {\n      node[funcName](args);\n    }\n    return node;\n  }\n}\n","import {\n  DEVICE_CONTAINER_TYPE,\n  EDGE_CONTAINER_TYPE,\n  GROUP_CONTAINER_TYPE,\n  MODULE_NODE_TYPE,\n  NETWORK_CONTAINER_TYPE,\n  POINT_NODE_TYPE,\n} from '../nodes/constants';\n\nexport interface Entry {\n  entryId(): string;\n\n  identifier(): string;\n\n  nodeType(): string;\n\n  label(): string;\n}\n\nabstract class NormalEntry implements Entry {\n  id: string;\n  code: string;\n  readonly _nodeType: string;\n\n  entryId(): string {\n    return this.id;\n  }\n\n  identifier(): string {\n    return this.code;\n  }\n\n  nodeType(): string {\n    return this._nodeType;\n  }\n\n  label(): string {\n    return this.identifier() || this.entryId();\n  }\n}\n\nexport class Edge extends NormalEntry {\n  customer_code: string;\n  side_code: string;\n  model: string;\n  firmware_version: string;\n  data_version: string;\n  readonly _nodeType = EDGE_CONTAINER_TYPE;\n}\n\nexport class Network extends NormalEntry {\n  protocol: string;\n  state: string;\n  readonly _nodeType = NETWORK_CONTAINER_TYPE;\n}\n\nexport class Device extends NormalEntry {\n  manufacturer: string;\n  protocol: string;\n  state: string;\n  type: string;\n  readonly _nodeType = DEVICE_CONTAINER_TYPE;\n}\n\nexport class Folder extends NormalEntry {\n  name: string;\n  readonly _nodeType = GROUP_CONTAINER_TYPE;\n\n  label(): string {\n    return this.name || super.label();\n  }\n}\n\nexport class Point extends NormalEntry {\n  edge: string;\n  enabled: boolean;\n  kind: string;\n  measure_unit: string;\n  network: string;\n  offset: number;\n  precision: number;\n  protocol: string;\n  type: string;\n  readonly _nodeType = POINT_NODE_TYPE;\n}\n\nexport class Service implements Entry {\n  service_id: string;\n  service_name: string;\n  service_type: string;\n  version: string;\n  published_by: string;\n  state: string;\n  readonly created_at: string;\n  readonly modified_at: string;\n  readonly deploy_id: string;\n  readonly deploy_location: string;\n  readonly _nodeType = MODULE_NODE_TYPE;\n\n  entryId(): string {\n    return this.service_id;\n  }\n\n  identifier(): string {\n    return this.service_name;\n  }\n\n  nodeType(): string {\n    return this._nodeType;\n  }\n\n  label(): string {\n    return `${this.identifier()} ${this.version}` || this.entryId();\n  }\n}\n\nexport class PointData {\n  priority: number;\n  value: number;\n  point: string;\n  priority_values: number[];\n}\n","import { Logger } from 'logplease';\nimport { Database } from '../../database/database';\nimport { ContainerRegistry } from '../../nodes/container';\nimport { createNodeDbHelper, NodeDbHelper } from '../../nodes/node-db-helper';\nimport {\n  ContainerRegistryMetadata,\n  isFolderNode,\n  SerializedFolderNode,\n  SerializedNode,\n} from '../../nodes/node-interface';\nimport { node_service_logger } from '../../utils/loggers';\n\nexport abstract class NodeService {\n\n  protected readonly cRegistry: ContainerRegistryMetadata;\n  protected readonly dbHelper: NodeDbHelper;\n  protected readonly logger: Logger = node_service_logger;\n\n  constructor(cRegistry?: ContainerRegistryMetadata, dbHelper?: NodeDbHelper) {\n    this.cRegistry = cRegistry ?? ContainerRegistry.instance();\n    this.dbHelper = dbHelper ?? createNodeDbHelper();\n  }\n\n  protected getNodesInContainer(database: Database, nodes: SerializedNode[]): Promise<SerializedNode[]> {\n    const list = nodes.filter(n => isFolderNode(n))\n                      .map(n => <SerializedFolderNode>n)\n                      .map(n => this.dbHelper.listByContainer(database, n.sub_container.id)\n                                    .then(nodes => this.getNodesInContainer(database, nodes)));\n    return Promise.all([Promise.resolve(nodes), ...list]).then(r => r.flatMap(nodes => nodes));\n  }\n}\n","\n\nimport { exec } from 'child_process';\nimport OsUtils from '../../nodes/utils/os-utils';\nconst network = require('network'); //for getting IPs and gateway address\nconst cp = require('child_process');\nconst set_ip_address = require('set-ip-address'); //for setting IPs\nconst ip = require('ip'); //for checking if IPs are valid\n\nexport default class IpAddressUtils {\n  /**\n   * Get current network info\n   * @returns {object}\n   */\n  static getActiveNetworks() {\n    return new Promise<Array<any>>(resolve => {\n      network.get_interfaces_list(function (err, obj) {\n        if (err) resolve();\n        if (!obj) resolve();\n        resolve(obj);\n      });\n    });\n  }\n\n  /**\n   * Runs a system command\n   * @param iface {string} Name of the physical system interface\n   * @param upDown {string} system command options\n   * @returns {Promise}\n   *\n   */\n\n  static networkUpDown(iface: string, upDown: string) {\n    return new Promise((resolve, reject) => {\n      let command = `sudo ip link set ${iface} ${upDown}`;\n      // let command = 'sudo ip link set' +' '+ iface +' '+upDown\n      exec(command, (err, stdout, stderr) => {\n        if (err) {\n          reject({ err, stderr });\n        } else {\n          resolve(stdout);\n        }\n      });\n    });\n  }\n\n  /** check if new ip is valid\n   * @description Method for checking and build an ip address\n   * @param {string} newIP pass in an ip address\n   * @param {string} netNetmask pass in an ip net mask\n   * @param {string} newGateway pass in an  ip gateway\n   * @param newNameserver\n   * @returns {object} Will return a validIp: true, ipSubnet: '192.168.15.1/24 or if invalid it will return false\n   */\n\n  static checkIpValid(newIP: string, netNetmask: string, newGateway: string, newNameserver: string) {\n    const checkIP = ip.isV4Format(newIP);\n    const checkNetMask = ip.isV4Format(netNetmask);\n    const checkGateway = ip.isV4Format(newGateway);\n    const nameserver = ip.isV4Format(newNameserver);\n\n    if (checkIP && checkNetMask && checkGateway && nameserver) {\n      return true;\n    } else return false;\n  }\n\n  /**\n   * Gets BBB interface details\n   * @returns {Promise}\n   *\n   */\n  static bbbGetInterfaceDetails() {\n    return new Promise((resolve, reject) => {\n      cp.execSync('connmanctl services', (err, stdout, stderr) => {\n        if (err) {\n          reject({ err, stderr });\n        } else {\n          resolve(\n            stdout\n              .toString()\n              .replace(/\\s/g, '')\n              .substring(8),\n          );\n        }\n      });\n    });\n  }\n\n  /**\n   * Set BBB network as DHCP\n   * @returns {Promise}\n   *\n   */\n  static bbbSetIPDHCP(iface) {\n    return new Promise((resolve, reject) => {\n      const setIpDHCP = `sudo connmanctl config ${iface} --ipv4 dhcp`;\n      cp.execSync(setIpDHCP, (err, stdout, stderr) => {\n        if (err) {\n          reject({ err, stderr });\n        } else {\n          resolve(true);\n        }\n      });\n    });\n  }\n\n  /**\n   * Set BBB network as fixed IP\n   * @returns {Promise}\n   *\n   */\n  static bbbSetIPFixed(iface, ipAddress: string, subnetMask: string, gateway: string) {\n    return new Promise((resolve, reject) => {\n      const setIP = `sudo connmanctl config ${iface} --ipv4 manual ${ipAddress} ${subnetMask} ${gateway} --nameservers 8.8.8.8 8.8.4.4`;\n      cp.execSync(setIP, (err, stdout, stderr) => {\n        if (err) {\n          reject({ err, stderr });\n        } else {\n          resolve(true);\n        }\n      });\n    });\n  }\n\n  /**\n   * Set IP for rubix\n   * @returns {Promise}\n   * will modify the /etc/dhcpcd.conf \n   */\n  static updateIpRubixCompute(interface1Eth, dhcp1Eth: boolean, eth1Ip, eth1Sub, eth1Gate, eth1NameServer, interface2Eth, dhcp2Eth: boolean, eth2Ip, eth2Sub, eth2Gate, eth2NameServer) {\n    return new Promise<any>((resolve, reject) => {\n\n      const msgUpdateIp = 'SET: new ip '\n      const msgIncorrectHost = 'ERROR: incorrect host type'\n      const msgFailToUpdate = 'ERROR: invalid ip settings'\n      const host = 'BCM2835'  //PI BCM2835 //aidan's pc 20L5CTO1WW, MS-7A66\n\n      const interfaceEth1 = interface1Eth\n      const dhcpEth1 = dhcp1Eth\n      const ethIp1 = eth1Ip;\n      const ethSub1 = eth1Sub;\n      const ethGate1 = eth1Gate;\n      const ethNameServer1 = eth1NameServer;\n\n      const interfaceEth2 = interface2Eth\n      const dhcpEth2 = dhcp2Eth\n      const ethIp2 = eth2Ip;\n      const ethSub2 = eth2Sub;\n      const ethGate2 = eth2Gate;\n      const ethNameServer2 = eth2NameServer;\n\n      const checkIpValidEth1 = IpAddressUtils.checkIpValid(\n        ethIp1,\n        ethSub1,\n        ethGate1,\n        ethNameServer1,\n      );\n      const checkIpValidEth2 = IpAddressUtils.checkIpValid(\n        ethIp2,\n        ethSub2,\n        ethGate2,\n        ethNameServer2,\n      );\n\n      console.log(interface1Eth, dhcpEth1, eth1Ip, eth1Sub, eth1Gate, eth1NameServer, interface2Eth, dhcpEth2, eth2Ip, eth2Sub, eth2Gate, eth2NameServer, \"checkIpValidEth1=\", checkIpValidEth1, \"checkIpValidEth2=\", checkIpValidEth2)\n      OsUtils.systemInfo()\n        .then(e => {\n          if (e.system.model === host) {\n            if (checkIpValidEth1 && checkIpValidEth2) {\n              //network update\n              let interfacesArray = [];\n              if (dhcpEth1 === true) {\n                //DHCP\n                console.log(\"dhcpEth1 === true\")\n                const eth1 = {\n                  interface: interfaceEth1,\n                  dhcp: true\n                };\n                interfacesArray.push(eth1);\n              }\n              if (dhcpEth2 === true) {\n                //DHCP\n                console.log(\"dhcpEth2 === true\")\n                const eth2 = {\n                  interface: interfaceEth2,\n                  dhcp: true\n                };\n                interfacesArray.push(eth2);\n              }\n\n              if (dhcpEth1 === false) {\n                //Static\n                console.log(\"dhcpEth1 === false\")\n                const subnetMaskLength = ip.subnet(ethIp1, ethSub1);\n                const eth1 = {\n                  interface: interfaceEth1,\n                  ip_address: ethIp1,\n                  prefix: subnetMaskLength.subnetMaskLength,\n                  gateway: ethGate1,\n                  nameservers: [ethNameServer1],\n                };\n                interfacesArray.push(eth1);\n              }\n\n              if (dhcpEth2 === false) {\n                //Static\n                console.log(\"dhcpEth2 === false\")\n                const subnetMaskLength = ip.subnet(ethIp2, ethSub2);\n                const eth2 = {\n                  interface: interfaceEth2,\n                  ip_address: ethIp2,\n                  prefix: subnetMaskLength.subnetMaskLength,\n                  gateway: ethGate2,\n                  nameservers: [ethNameServer2],\n                };\n                interfacesArray.push(eth2);\n              }\n              console.log(`${msgUpdateIp} ${JSON.stringify(interfacesArray)} @ ${interfaceEth1} @ ${interfaceEth2}`)\n              // resolve(`${msgUpdateIp} ${JSON.stringify(interfacesArray)} @ ${interfaceEth1}`)\n              // set new IP\n              set_ip_address.configure(interfacesArray).then((e) => {\n                console.log(`${msgUpdateIp} ${JSON.stringify(interfacesArray)} @ ${interfaceEth1} @ ${interfaceEth2} msg ${e}`)\n                resolve(`${msgUpdateIp} ${JSON.stringify(interfacesArray)} @ ${interfaceEth1} msg ${e}`)\n              });\n\n            } else {\n              console.log(`${msgFailToUpdate} @ ${interfaceEth1}  @ ${interfaceEth2}`)\n              reject(`${msgFailToUpdate} @ ${interfaceEth1}  @ ${interfaceEth2}`)\n            }\n          } else {\n            console.log(`${msgIncorrectHost} ${e.system.model} @ ${interfaceEth1} @ ${interfaceEth2}`)\n            reject(`${msgIncorrectHost} ${e.system.model} @ ${interfaceEth1} @ ${interfaceEth2}`)\n          }\n        }).catch(err => {\n          console.log(`${msgFailToUpdate} @ ${interfaceEth1} @ ${interfaceEth2} ${err}`)\n          reject(`${msgFailToUpdate} @ ${interfaceEth1} @ ${interfaceEth2} ${err}`)\n        });\n    });\n  }\n\n\n\n}\n","import FileUtils from './file-utils';\n\nexport default class UuidUtils {\n  /**\n   * Generates a UUID 28 digit\n   * @returns {string}\n   */\n  static createUUID = (a: string = ''): string =>\n    a\n      ? ((Number(a) ^ (Math.random() * 16)) >> (Number(a) / 4)).toString(16)\n      : `${1e7}-${1e3}-${4e3}-${8e3}-${1e11}`.replace(/[018]/g, UuidUtils.createUUID);\n  /**\n   * Generates a UUID 8 digit\n   * @returns {string}\n   */\n  static create8DigId = (a: string = ''): string =>\n    a\n      ? ((Number(a) ^ (Math.random() * 16)) >> (Number(a) / 4)).toString(16)\n      : `${1e7}`.replace(/[018]/g, UuidUtils.create8DigId);\n\n  /**\n   * Generates a UUID 12 digit\n   * @returns {string}\n   */\n  static create12DigId = (a: string = ''): string =>\n    a\n      ? ((Number(a) ^ (Math.random() * 16)) >> (Number(a) / 4)).toString(16)\n      : `${1e7}-${4e3}`.replace(/[018]/g, UuidUtils.create12DigId);\n\n  static isUUID(data: string): boolean {\n    const dataArray: string[] = data\n      .toString()\n      .trim()\n      .split('-');\n    return dataArray.length >= 1 && dataArray[0].length === 8;\n  }\n\n  static async isUUIDFile(filePath): Promise<boolean> {\n    try {\n      let fileContent = await FileUtils.readFile(filePath);\n      if (fileContent) {\n        return UuidUtils.isUUID(fileContent);\n      } else return false;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  static async makeUUIDFile(dirPath, fileName): Promise<void> {\n    try {\n      await FileUtils.createDirectory(dirPath);\n      await FileUtils.writeFile(`${dirPath}/${fileName}`, UuidUtils.create8DigId());\n    } catch (e) {\n      throw e;\n    }\n  }\n}\n","export default class ModbusByteOrder {\n  private static TYPES = {\n    INT16: 1,\n    UINT16: 2,\n    INT32: 3,\n    UINT32: 4,\n    FLOAT32: 5,\n    INT64: 6,\n    UINT64: 7,\n    DOUBLE64: 8,\n  };\n  private static ENDIAN = {\n    LEB_BEW: 0, //                 // CD AB LE-Byte BE-Word\n    LEB_LEW: 1, //LE byte, LE word // AB CD LE-Byte LE-Word // default\n    BEB_LEW: 2, //BE byte, LE word // BA DC BE-Byte LE-Word // nube RIO device\n    BEB_BEW: 3, //BE byte, BE word // DC BA BE-Byte BE-Word\n  };\n  static readByteOrder = (buffer, offset: number, type: number, endian: number) => {\n    let TYPES = ModbusByteOrder.TYPES;\n    let ENDIAN = ModbusByteOrder.ENDIAN;\n    let buf;\n    let value;\n    try {\n      if (type <= TYPES.UINT16) {\n        buf = buffer.slice(offset, offset + 2);\n      } else if (type <= TYPES.FLOAT32) {\n        buf = buffer.slice(offset, offset + 4);\n      } else {\n        buf = buffer.slice(offset, offset + 8);\n      }\n      if (endian === ENDIAN.BEB_LEW || (type <= TYPES.UINT16 && endian === ENDIAN.BEB_BEW)) {\n        buf.swap16();\n      } else if (type > TYPES.UINT16 && type <= TYPES.FLOAT32 && endian === ENDIAN.BEB_BEW) {\n        buf.swap32();\n      } else if (type >= TYPES.INT64 && endian === ENDIAN.BEB_BEW) {\n        buf.swap64();\n      }\n    } catch (error) {\n      console.log(`buffer readValue issue in modbus-point-methods. Buffer.alloc ${error}`);\n    }\n    try {\n      switch (type) {\n        case TYPES.INT16:\n          value = buf.readInt16LE(value);\n          break;\n        case TYPES.UINT16:\n          value = buf.readUInt16LE(value);\n          break;\n        case TYPES.INT32:\n          value = buf.readInt32LE(value);\n          break;\n        case TYPES.UINT32:\n          value = buf.readUInt32LE(value);\n          break;\n        case TYPES.FLOAT32:\n          value = buf.readFloatLE(value);\n          break;\n        case TYPES.INT64:\n          // value = buf.readBigInt64LE(BigInt(value)); https://github.com/streamich/memfs/issues/275\n          break;\n        case TYPES.UINT64:\n          // value = buf.readBigUInt64LE(BigInt(value));\n          break;\n        case TYPES.DOUBLE64:\n          value = buf.readDoubleLE(value);\n          break;\n      }\n    } catch (error) {\n      console.log(`buffer readValue issue in modbus-point-methods. switch case ${error}`);\n    }\n\n    return value;\n  };\n\n  static writeValue = (value: number, type: number, endian: number) => {\n    let TYPES = ModbusByteOrder.TYPES;\n    let ENDIAN = ModbusByteOrder.ENDIAN;\n    let buf;\n    try {\n      if (type <= TYPES.UINT16) {\n        buf = Buffer.alloc(2);\n      } else if (type <= TYPES.FLOAT32) {\n        buf = Buffer.alloc(4);\n      } else {\n        buf = Buffer.alloc(8);\n      }\n    } catch (error) {\n      console.log(`buffer writeValue issue in modbus-point-methods. Buffer.alloc  ${error}`);\n    }\n    try {\n      switch (type) {\n        case TYPES.INT16:\n          buf.writeInt16LE(value);\n          break;\n        case TYPES.UINT16:\n          buf.writeUInt16LE(value);\n          break;\n        case TYPES.INT32:\n          buf.writeInt32LE(value);\n          break;\n        case TYPES.UINT32:\n          buf.writeUInt32LE(value);\n          break;\n        case TYPES.FLOAT32:\n          buf.writeFloatLE(value);\n          break;\n        case TYPES.INT64:\n          // buf.writeBigInt64LE(BigInt(value)); TODO https://github.com/streamich/memfs/issues/275\n          break;\n        case TYPES.UINT64:\n          // buf.writeBigUInt64LE(BigInt(value));\n          break;\n        case TYPES.DOUBLE64:\n          buf.writeDoubleLE(value);\n          break;\n      }\n    } catch (error) {\n      console.log(`buffer writeValue issue in modbus-point-methods :switch case ${error}`);\n    }\n    try {\n      if (endian === ENDIAN.BEB_LEW || (type <= TYPES.UINT16 && endian === ENDIAN.BEB_BEW)) {\n        buf.swap16();\n      } else if (type > TYPES.UINT16 && type <= TYPES.FLOAT32 && endian === ENDIAN.BEB_BEW) {\n        buf.swap32();\n      } else if (type >= TYPES.INT64 && endian === ENDIAN.BEB_BEW) {\n        buf.swap64();\n      }\n      return buf;\n    } catch (error) {\n      console.log(`buffer writeValue issue in modbus-point-methods :buf.swap() ${error}`);\n    }\n  };\n}\n","import config from '../../../config';\n\nexport const bsaClientConfig = path => {\n  let cfg = config.bsa.paths[path];\n  if (!cfg) {\n    return null;\n  }\n  return {\n    baseURL: config.bsa.baseURL,\n    auth: {\n      username: config.bsa.username,\n      password: config.bsa.password,\n    },\n    url: cfg.path,\n    headers: {\n      'Content-Type': cfg.contentType ?? 'application/json',\n      'Accept': cfg.accept ?? 'application/json',\n    },\n  };\n};\n","module.exports = require(\"influx\");","/*\n * PsychroLib (version 2.4.0) (https://github.com/psychrometrics/psychrolib).\n * Copyright (c) 2018-2020 The PsychroLib Contributors for the current library implementation.\n * Copyright (c) 2017 ASHRAE Handbook  Fundamentals for ASHRAE equations and coefficients.\n * Licensed under the MIT License.\n */\n\nvar psychrolib = function Psychrometrics() {\n  /**\n   * Module overview\n   *  Contains functions for calculating thermodynamic properties of gas-vapor mixtures\n   *  and standard atmosphere suitable for most engineering, physical and meteorological\n   *  applications.\n   *\n   *  Most of the functions are an implementation of the formulae found in the\n   *  2017 ASHRAE Handbook - Fundamentals, in both International System (SI),\n   *  and Imperial (IP) units. Please refer to the information included in\n   *  each function for their respective reference.\n   *\n   * Example (e.g. Node.JS)\n   *  // Import the PsychroLib\n   *  var psychrolib = require('psychrolib.js')\n   *  // Set unit system\n   *  psychrolib.SetUnitSystem(psychrolib.SI)\n   *  // Calculate the dew point temperature for a dry bulb temperature of 25 C and a relative humidity of 80%\n   *  var TDewPoint = psychrolib.GetTDewPointFromRelHum(25.0, 0.80);\n   *  console.log('TDewPoint: %d', TDewPoint);\n   * 21.3094\n   *\n   * Copyright\n   *  - For the current library implementation\n   *     Copyright (c) 2018-2020 The PsychroLib Contributors.\n   *  - For equations and coefficients published ASHRAE Handbook  Fundamentals, Chapter 1\n   *     Copyright (c) 2017 ASHRAE Handbook  Fundamentals (https://www.ashrae.org)\n   *\n   * License\n   *  MIT (https://github.com/psychrometrics/psychrolib/LICENSE.txt)\n   *\n   * Note from the Authors\n   *  We have made every effort to ensure that the code is adequate, however, we make no\n   *  representation with respect to its accuracy. Use at your own risk. Should you notice\n   *  an error, or if you have a suggestion, please notify us through GitHub at\n   *  https://github.com/psychrometrics/psychrolib/issues.\n   */\n\n  // Standard functions\n  var log = Math.log;\n  var exp = Math.exp;\n  var pow = Math.pow;\n  var min = Math.min;\n  var max = Math.max;\n  var abs = Math.abs;\n\n  /******************************************************************************************************\n   * Global constants\n   *****************************************************************************************************/\n\n  var ZERO_FAHRENHEIT_AS_RANKINE = 459.67; // Zero degree Fahrenheit (F) expressed as degree Rankine (R).\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 39.\n\n  var ZERO_CELSIUS_AS_KELVIN = 273.15; // Zero degree Celsius (C) expressed as Kelvin (K).\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 39.\n\n  var R_DA_IP = 53.35; // Universal gas constant for dry air (IP version) in ft lb_Force lb_DryAir R.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1.\n\n  var R_DA_SI = 287.042; // Universal gas constant for dry air (SI version) in J kg_DryAir K.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1.\n\n  var INVALID = -99999; // Invalid value (dimensionless).\n\n  var MAX_ITER_COUNT = 100; // Maximum number of iterations before exiting while loops.\n\n  var MIN_HUM_RATIO = 1e-7; // Minimum acceptable humidity ratio used/returned by any functions.\n  // Any value above 0 or below the MIN_HUM_RATIO will be reset to this value.\n\n  var FREEZING_POINT_WATER_IP = 32.0; // Freezing point of water in Fahrenheit.\n\n  var FREEZING_POINT_WATER_SI = 0.0; // Freezing point of water in Celsius.\n\n  var TRIPLE_POINT_WATER_IP = 32.018; // Triple point of water in Fahrenheit.\n\n  var TRIPLE_POINT_WATER_SI = 0.01; // Triple point of water in Celsius.\n\n  /******************************************************************************************************\n   * Helper functions\n   *****************************************************************************************************/\n\n  // Systems of units (IP or SI)\n  var PSYCHROLIB_UNITS = undefined;\n  var PSYCHROLIB_TOLERANCE = undefined;\n\n  this.IP = 1;\n  this.SI = 2;\n\n  // Function to set the system of units\n  // Note: this function *HAS TO BE CALLED* before the library can be used\n  this.SetUnitSystem = function(UnitSystem) {\n    if (UnitSystem != this.IP && UnitSystem != this.SI) {\n      throw new Error('UnitSystem must be IP or SI');\n    }\n    PSYCHROLIB_UNITS = UnitSystem;\n    // Define tolerance of temperature calculations\n    // The tolerance is the same in IP and SI\n    if (PSYCHROLIB_UNITS == this.IP) PSYCHROLIB_TOLERANCE = (0.001 * 9) / 5;\n    else PSYCHROLIB_TOLERANCE = 0.001;\n  };\n\n  // Return system of units in use.\n  this.GetUnitSystem = function() {\n    return PSYCHROLIB_UNITS;\n  };\n\n  // Function to check if the current system of units is SI or IP\n  // The function exits in error if the system of units is undefined\n  this.isIP = function() {\n    if (PSYCHROLIB_UNITS == this.IP) return true;\n    else if (PSYCHROLIB_UNITS == this.SI) return false;\n    else throw new Error('Unit system is not defined');\n  };\n\n  /******************************************************************************************************\n   * Conversion between temperature units\n   *****************************************************************************************************/\n\n  // Utility function to convert temperature to degree Rankine (R)\n  // given temperature in degree Fahrenheit (F).\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 section 3\n  this.GetTRankineFromTFahrenheit = function(T_F) {\n    return T_F + ZERO_FAHRENHEIT_AS_RANKINE;\n  }; /* exact */\n\n  // Utility function to convert temperature to degree Fahrenheit (F)\n  // given temperature in degree Rankine (R).\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 section 3\n  this.GetTFahrenheitFromTRankine = function(T_R) {\n    return T_R - ZERO_FAHRENHEIT_AS_RANKINE;\n  }; /* exact */\n\n  // Utility function to convert temperature to Kelvin (K)\n  // given temperature in degree Celsius (C).\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 section 3\n  this.GetTKelvinFromTCelsius = function(T_C) {\n    return T_C + ZERO_CELSIUS_AS_KELVIN;\n  }; /* exact */\n\n  // Utility function to convert temperature to degree Celsius (C)\n  // given temperature in Kelvin (K).\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 section 3\n  this.GetTCelsiusFromTKelvin = function(T_K) {\n    return T_K - ZERO_CELSIUS_AS_KELVIN;\n  }; /* exact */\n\n  // Utility function to convert degree Fahrenheit (F) to degree Celsius (C)\n  this.GetTCelsiusFromTFahrenheit = function(T_F) {\n    return (T_F - 32) / 1.8;\n  };\n\n  // Utility function to convert degree Celsius (C) to degree Fahrenheit  (F)\n  this.GetTFahrenheitFromTCelsius = function(T_C) {\n    return T_C * 1.8 + 32;\n  };\n\n  this.GetTRankineFromTCelsius = function(T_C) {\n    var T_F = T_C * 1.8 + 32;\n    return T_F + ZERO_FAHRENHEIT_AS_RANKINE;\n  };\n\n  this.GetTKelvinFromTFahrenheit = function(T_F) {\n    var T_C = (T_F - 32) / 1.8;\n    return T_C + ZERO_CELSIUS_AS_KELVIN;\n  };\n\n  this.GetTFahrenheitFromTKelvin = function(T_K) {\n    var T_C = T_K - ZERO_CELSIUS_AS_KELVIN;\n    return T_C * 1.8 + 32;\n  };\n\n  this.GetTRankineFromTKelvin = function(T_K) {\n    var T_C = T_K - ZERO_CELSIUS_AS_KELVIN;\n    var T_F = T_C * 1.8 + 32;\n    return T_F + ZERO_FAHRENHEIT_AS_RANKINE;\n  };\n\n  this.GetTCelsiusFromTRankine = function(T_R) {\n    var T_F = T_R - ZERO_FAHRENHEIT_AS_RANKINE;\n    return (T_F - 32) / 1.8;\n  };\n\n  this.GetTKelvinFromTRankine = function(T_R) {\n    var T_F = T_R - ZERO_FAHRENHEIT_AS_RANKINE;\n    var T_C = (T_F - 32) / 1.8;\n    return T_C + ZERO_CELSIUS_AS_KELVIN;\n  };\n\n  /******************************************************************************************************\n   * Conversions between dew point, wet bulb, and relative humidity\n   *****************************************************************************************************/\n\n  // Return wet-bulb temperature given dry-bulb temperature, dew-point temperature, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetTWetBulbFromTDewPoint = function(\n    // (o) Wet bulb temperature in F [IP] or C [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    TDewPoint, // (i) Dew point temperature in F [IP] or C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var HumRatio;\n\n    if (!(TDewPoint <= TDryBulb))\n      throw new Error('Dew point temperature is above dry bulb temperature');\n\n    HumRatio = this.GetHumRatioFromTDewPoint(TDewPoint, Pressure);\n    return this.GetTWetBulbFromHumRatio(TDryBulb, HumRatio, Pressure);\n  };\n\n  // Return wet-bulb temperature given dry-bulb temperature, relative humidity, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetTWetBulbFromRelHum = function(\n    // (o) Wet bulb temperature in F [IP] or C [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    RelHum, // (i) Relative humidity [0-1]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var HumRatio;\n\n    if (!(RelHum >= 0 && RelHum <= 1)) throw new Error('Relative humidity is outside range [0,1]');\n\n    HumRatio = this.GetHumRatioFromRelHum(TDryBulb, RelHum, Pressure);\n    return this.GetTWetBulbFromHumRatio(TDryBulb, HumRatio, Pressure);\n  };\n\n  // Return relative humidity given dry-bulb temperature and dew-point temperature.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 22\n  this.GetRelHumFromTDewPoint = function(\n    // (o) Relative humidity [0-1]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    TDewPoint, // (i) Dew point temperature in F [IP] or C [SI]\n  ) {\n    var VapPres, SatVapPres;\n\n    if (!(TDewPoint <= TDryBulb))\n      throw new Error('Dew point temperature is above dry bulb temperature');\n\n    VapPres = this.GetSatVapPres(TDewPoint);\n    SatVapPres = this.GetSatVapPres(TDryBulb);\n    return VapPres / SatVapPres;\n  };\n\n  // Return relative humidity given dry-bulb temperature, wet bulb temperature and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetRelHumFromTWetBulb = function(\n    // (o) Relative humidity [0-1]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    TWetBulb, // (i) Wet bulb temperature in F [IP] or C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var HumRatio;\n\n    if (!(TWetBulb <= TDryBulb))\n      throw new Error('Wet bulb temperature is above dry bulb temperature');\n\n    HumRatio = this.GetHumRatioFromTWetBulb(TDryBulb, TWetBulb, Pressure);\n    return this.GetRelHumFromHumRatio(TDryBulb, HumRatio, Pressure);\n  };\n\n  // Return dew-point temperature given dry-bulb temperature and relative humidity.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetTDewPointFromRelHum = function(\n    // (o) Dew Point temperature in F [IP] or C [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    RelHum, // (i) Relative humidity [0-1]\n  ) {\n    var VapPres;\n\n    if (!(RelHum >= 0 && RelHum <= 1)) throw new Error('Relative humidity is outside range [0,1]');\n\n    VapPres = this.GetVapPresFromRelHum(TDryBulb, RelHum);\n    return this.GetTDewPointFromVapPres(TDryBulb, VapPres);\n  };\n\n  // Return dew-point temperature given dry-bulb temperature, wet-bulb temperature, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetTDewPointFromTWetBulb = function(\n    // (o) Dew Point temperature in F [IP] or C [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    TWetBulb, // (i) Wet bulb temperature in F [IP] or C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var HumRatio;\n\n    if (!(TWetBulb <= TDryBulb))\n      throw new Error('Wet bulb temperature is above dry bulb temperature');\n\n    HumRatio = this.GetHumRatioFromTWetBulb(TDryBulb, TWetBulb, Pressure);\n    return this.GetTDewPointFromHumRatio(TDryBulb, HumRatio, Pressure);\n  };\n\n  /******************************************************************************************************\n   * Conversions between dew point, or relative humidity and vapor pressure\n   *****************************************************************************************************/\n\n  // Return partial pressure of water vapor as a function of relative humidity and temperature.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 12, 22\n  this.GetVapPresFromRelHum = function(\n    // (o) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    RelHum, // (i) Relative humidity [0-1]\n  ) {\n    if (!(RelHum >= 0 && RelHum <= 1)) throw new Error('Relative humidity is outside range [0,1]');\n\n    return RelHum * this.GetSatVapPres(TDryBulb);\n  };\n\n  // Return relative humidity given dry-bulb temperature and vapor pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 12, 22\n  this.GetRelHumFromVapPres = function(\n    // (o) Relative humidity [0-1]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    VapPres, // (i) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n  ) {\n    if (!(VapPres >= 0))\n      throw new Error('Partial pressure of water vapor in moist air is negative');\n\n    return VapPres / this.GetSatVapPres(TDryBulb);\n  };\n\n  // Helper function returning the derivative of the natural log of the saturation vapor pressure\n  // as a function of dry-bulb temperature.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn. 5 & 6\n  this.dLnPws_ = function(\n    // (o)  Derivative of natural log of vapor pressure of saturated air in Psi [IP] or Pa [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n  ) {\n    var dLnPws, T;\n\n    if (this.isIP()) {\n      T = this.GetTRankineFromTFahrenheit(TDryBulb);\n\n      if (TDryBulb <= TRIPLE_POINT_WATER_IP)\n        dLnPws =\n          1.0214165e4 / pow(T, 2) -\n          5.3765794e-3 +\n          2 * 1.9202377e-7 * T +\n          3 * 3.5575832e-10 * pow(T, 2) -\n          4 * 9.0344688e-14 * pow(T, 3) +\n          4.1635019 / T;\n      else\n        dLnPws =\n          1.0440397e4 / pow(T, 2) -\n          2.7022355e-2 +\n          2 * 1.289036e-5 * T -\n          3 * 2.4780681e-9 * pow(T, 2) +\n          6.5459673 / T;\n    } else {\n      T = this.GetTKelvinFromTCelsius(TDryBulb);\n\n      if (TDryBulb <= TRIPLE_POINT_WATER_SI)\n        dLnPws =\n          5.6745359e3 / pow(T, 2) -\n          9.677843e-3 +\n          2 * 6.2215701e-7 * T +\n          3 * 2.0747825e-9 * pow(T, 2) -\n          4 * 9.484024e-13 * pow(T, 3) +\n          4.1635019 / T;\n      else\n        dLnPws =\n          5.8002206e3 / pow(T, 2) -\n          4.8640239e-2 +\n          2 * 4.1764768e-5 * T -\n          3 * 1.4452093e-8 * pow(T, 2) +\n          6.5459673 / T;\n    }\n\n    return dLnPws;\n  };\n\n  // Return dew-point temperature given dry-bulb temperature and vapor pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn. 5 and 6\n  // Notes: the dew point temperature is solved by inverting the equation giving water vapor pressure\n  // at saturation from temperature rather than using the regressions provided\n  // by ASHRAE (eqn. 37 and 38) which are much less accurate and have a\n  // narrower range of validity.\n  // The Newton-Raphson (NR) method is used on the logarithm of water vapour\n  // pressure as a function of temperature, which is a very smooth function\n  // Convergence is usually achieved in 3 to 5 iterations.\n  // TDryBulb is not really needed here, just used for convenience.\n  this.GetTDewPointFromVapPres = function(\n    // (o) Dew Point temperature in F [IP] or C [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    VapPres, // (i) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n  ) {\n    // Bounds function of the system of units\n    var BOUNDS; // Domain of validity of the equations\n\n    if (this.isIP()) {\n      BOUNDS = [-148, 392]; // Domain of validity of the equations\n    } else {\n      BOUNDS = [-100, 200]; // Domain of validity of the equations\n    }\n\n    // Bounds outside which a solution cannot be found\n    if (VapPres < this.GetSatVapPres(BOUNDS[0]) || VapPres > this.GetSatVapPres(BOUNDS[1]))\n      throw new Error('Partial pressure of water vapor is outside range of validity of equations');\n\n    // We use NR to approximate the solution.\n    // First guess\n    var TDewPoint = TDryBulb; // Calculated value of dew point temperatures, solved for iteratively in F [IP] or C [SI]\n    var lnVP = log(VapPres); // Natural logarithm of partial pressure of water vapor pressure in moist air\n\n    var TDewPoint_iter; // Value of TDewPoint used in NR calculation\n    var lnVP_iter; // Value of log of vapor water pressure used in NR calculation\n    var index = 1;\n    do {\n      // Current point\n      TDewPoint_iter = TDewPoint;\n      lnVP_iter = log(this.GetSatVapPres(TDewPoint_iter));\n\n      // Derivative of function, calculated analytically\n      var d_lnVP = this.dLnPws_(TDewPoint_iter);\n\n      // New estimate, bounded by domain of validity of eqn. 5 and 6\n      TDewPoint = TDewPoint_iter - (lnVP_iter - lnVP) / d_lnVP;\n      TDewPoint = max(TDewPoint, BOUNDS[0]);\n      TDewPoint = min(TDewPoint, BOUNDS[1]);\n\n      if (index > MAX_ITER_COUNT)\n        throw new Error('Convergence not reached in GetTDewPointFromVapPres. Stopping.');\n\n      index++;\n    } while (abs(TDewPoint - TDewPoint_iter) > PSYCHROLIB_TOLERANCE);\n    return min(TDewPoint, TDryBulb);\n  };\n\n  // Return vapor pressure given dew point temperature.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn. 36\n  this.GetVapPresFromTDewPoint = function(\n    // (o) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n    TDewPoint, // (i) Dew point temperature in F [IP] or C [SI]\n  ) {\n    return this.GetSatVapPres(TDewPoint);\n  };\n\n  /******************************************************************************************************\n   * Conversions from wet-bulb temperature, dew-point temperature, or relative humidity to humidity ratio\n   *****************************************************************************************************/\n\n  // Return wet-bulb temperature given dry-bulb temperature, humidity ratio, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 33 and 35 solved for Tstar\n  this.GetTWetBulbFromHumRatio = function(\n    // (o) Wet bulb temperature in F [IP] or C [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    HumRatio, // (i) Humidity ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    // Declarations\n    var Wstar;\n    var TDewPoint, TWetBulb, TWetBulbSup, TWetBulbInf, BoundedHumRatio;\n    var index = 1;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    TDewPoint = this.GetTDewPointFromHumRatio(TDryBulb, BoundedHumRatio, Pressure);\n\n    // Initial guesses\n    TWetBulbSup = TDryBulb;\n    TWetBulbInf = TDewPoint;\n    TWetBulb = (TWetBulbInf + TWetBulbSup) / 2;\n\n    // Bisection loop\n    while (TWetBulbSup - TWetBulbInf > PSYCHROLIB_TOLERANCE) {\n      // Compute humidity ratio at temperature Tstar\n      Wstar = this.GetHumRatioFromTWetBulb(TDryBulb, TWetBulb, Pressure);\n\n      // Get new bounds\n      if (Wstar > BoundedHumRatio) TWetBulbSup = TWetBulb;\n      else TWetBulbInf = TWetBulb;\n\n      // New guess of wet bulb temperature\n      TWetBulb = (TWetBulbSup + TWetBulbInf) / 2;\n\n      if (index > MAX_ITER_COUNT)\n        throw new Error('Convergence not reached in GetTWetBulbFromHumRatio. Stopping.');\n\n      index++;\n    }\n\n    return TWetBulb;\n  };\n\n  // Return humidity ratio given dry-bulb temperature, wet-bulb temperature, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 33 and 35\n  this.GetHumRatioFromTWetBulb = function(\n    // (o) Humidity Ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    TWetBulb, // (i) Wet bulb temperature in F [IP] or C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var Wsstar;\n    var HumRatio = INVALID;\n\n    if (!(TWetBulb <= TDryBulb))\n      throw new Error('Wet bulb temperature is above dry bulb temperature');\n\n    Wsstar = this.GetSatHumRatio(TWetBulb, Pressure);\n\n    if (this.isIP()) {\n      if (TWetBulb >= FREEZING_POINT_WATER_IP)\n        HumRatio =\n          ((1093 - 0.556 * TWetBulb) * Wsstar - 0.24 * (TDryBulb - TWetBulb)) /\n          (1093 + 0.444 * TDryBulb - TWetBulb);\n      else\n        HumRatio =\n          ((1220 - 0.04 * TWetBulb) * Wsstar - 0.24 * (TDryBulb - TWetBulb)) /\n          (1220 + 0.444 * TDryBulb - 0.48 * TWetBulb);\n    } else {\n      if (TWetBulb >= FREEZING_POINT_WATER_SI)\n        HumRatio =\n          ((2501 - 2.326 * TWetBulb) * Wsstar - 1.006 * (TDryBulb - TWetBulb)) /\n          (2501 + 1.86 * TDryBulb - 4.186 * TWetBulb);\n      else\n        HumRatio =\n          ((2830 - 0.24 * TWetBulb) * Wsstar - 1.006 * (TDryBulb - TWetBulb)) /\n          (2830 + 1.86 * TDryBulb - 2.1 * TWetBulb);\n    }\n    // Validity check.\n    return max(HumRatio, MIN_HUM_RATIO);\n  };\n\n  // Return humidity ratio given dry-bulb temperature, relative humidity, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetHumRatioFromRelHum = function(\n    // (o) Humidity Ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    RelHum, // (i) Relative humidity [0-1]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var VapPres;\n\n    if (!(RelHum >= 0 && RelHum <= 1)) throw new Error('Relative humidity is outside range [0,1]');\n\n    VapPres = this.GetVapPresFromRelHum(TDryBulb, RelHum);\n    return this.GetHumRatioFromVapPres(VapPres, Pressure);\n  };\n\n  // Return relative humidity given dry-bulb temperature, humidity ratio, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetRelHumFromHumRatio = function(\n    // (o) Relative humidity [0-1]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    HumRatio, // (i) Humidity ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var VapPres;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n\n    VapPres = this.GetVapPresFromHumRatio(HumRatio, Pressure);\n    return this.GetRelHumFromVapPres(TDryBulb, VapPres);\n  };\n\n  // Return humidity ratio given dew-point temperature and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetHumRatioFromTDewPoint = function(\n    // (o) Humidity Ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n    TDewPoint, // (i) Dew point temperature in F [IP] or C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var VapPres;\n\n    VapPres = this.GetSatVapPres(TDewPoint);\n    return this.GetHumRatioFromVapPres(VapPres, Pressure);\n  };\n\n  // Return dew-point temperature given dry-bulb temperature, humidity ratio, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetTDewPointFromHumRatio = function(\n    // (o) Dew Point temperature in F [IP] or C [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    HumRatio, // (i) Humidity ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var VapPres;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n\n    VapPres = this.GetVapPresFromHumRatio(HumRatio, Pressure);\n    return this.GetTDewPointFromVapPres(TDryBulb, VapPres);\n  };\n\n  /******************************************************************************************************\n   * Conversions between humidity ratio and vapor pressure\n   *****************************************************************************************************/\n\n  // Return humidity ratio given water vapor pressure and atmospheric pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 20\n  this.GetHumRatioFromVapPres = function(\n    // (o) Humidity Ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n    VapPres, // (i) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var HumRatio;\n\n    if (!(VapPres >= 0))\n      throw new Error('Partial pressure of water vapor in moist air is negative');\n\n    HumRatio = (0.621945 * VapPres) / (Pressure - VapPres);\n\n    // Validity check.\n    return max(HumRatio, MIN_HUM_RATIO);\n  };\n\n  // Return vapor pressure given humidity ratio and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 20 solved for pw\n  this.GetVapPresFromHumRatio = function(\n    // (o) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n    HumRatio, // (i) Humidity ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var VapPres, BoundedHumRatio;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    VapPres = (Pressure * BoundedHumRatio) / (0.621945 + BoundedHumRatio);\n    return VapPres;\n  };\n\n  /******************************************************************************************************\n   * Conversions between humidity ratio and specific humidity\n   *****************************************************************************************************/\n\n  // Return the specific humidity from humidity ratio (aka mixing ratio)\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 9b\n  this.GetSpecificHumFromHumRatio = function(\n    // (o) Specific humidity ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n    HumRatio, // (i) Humidity ratio in lb_HO lb_Dry_Air [IP] or kg_HO kg_Dry_Air [SI]\n  ) {\n    var BoundedHumRatio;\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    return BoundedHumRatio / (1.0 + BoundedHumRatio);\n  };\n\n  // Return the humidity ratio (aka mixing ratio) from specific humidity\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 9b (solved for humidity ratio)\n  this.GetHumRatioFromSpecificHum = function(\n    // (o) Humidity ratio in lb_HO lb_Dry_Air [IP] or kg_HO kg_Dry_Air [SI]\n    SpecificHum, // (i) Specific humidity ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n  ) {\n    var HumRatio;\n\n    if (!(SpecificHum >= 0.0 && SpecificHum < 1.0))\n      throw new Error('Specific humidity is outside range [0, 1[');\n\n    HumRatio = SpecificHum / (1.0 - SpecificHum);\n\n    // Validity check\n    return max(HumRatio, MIN_HUM_RATIO);\n  };\n\n  /******************************************************************************************************\n   * Dry Air Calculations\n   *****************************************************************************************************/\n\n  // Return dry-air enthalpy given dry-bulb temperature.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn. 28\n  this.GetDryAirEnthalpy = function(\n    // (o) Dry air enthalpy in Btu lb [IP] or J kg [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n  ) {\n    if (this.isIP()) return 0.24 * TDryBulb;\n    else return 1006 * TDryBulb;\n  };\n\n  // Return dry-air density given dry-bulb temperature and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  // Notes: eqn 14 for the perfect gas relationship for dry air.\n  // Eqn 1 for the universal gas constant.\n  // The factor 144 in IP is for the conversion of Psi = lb in to lb ft.\n  this.GetDryAirDensity = function(\n    // (o) Dry air density in lb ft [IP] or kg m [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    if (this.isIP()) return (144 * Pressure) / R_DA_IP / this.GetTRankineFromTFahrenheit(TDryBulb);\n    else return Pressure / R_DA_SI / this.GetTKelvinFromTCelsius(TDryBulb);\n  };\n\n  // Return dry-air volume given dry-bulb temperature and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1.\n  // Notes: eqn 14 for the perfect gas relationship for dry air.\n  // Eqn 1 for the universal gas constant.\n  // The factor 144 in IP is for the conversion of Psi = lb in to lb ft.\n  this.GetDryAirVolume = function(\n    // (o) Dry air volume ft lb [IP] or in m kg [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    if (this.isIP())\n      return (R_DA_IP * this.GetTRankineFromTFahrenheit(TDryBulb)) / (144 * Pressure);\n    else return (R_DA_SI * this.GetTKelvinFromTCelsius(TDryBulb)) / Pressure;\n  };\n\n  // Return dry bulb temperature from enthalpy and humidity ratio.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 30.\n  // Notes: based on the `GetMoistAirEnthalpy` function, rearranged for temperature.\n  this.GetTDryBulbFromEnthalpyAndHumRatio = function(\n    // (o) Dry-bulb temperature in F [IP] or C [SI]\n    MoistAirEnthalpy, // (i) Moist air enthalpy in Btu lb [IP] or J kg\n    HumRatio, // (i) Humidity ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n  ) {\n    var BoundedHumRatio;\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    if (this.isIP())\n      return (MoistAirEnthalpy - 1061.0 * BoundedHumRatio) / (0.24 + 0.444 * BoundedHumRatio);\n    else\n      return (\n        (MoistAirEnthalpy / 1000.0 - 2501.0 * BoundedHumRatio) / (1.006 + 1.86 * BoundedHumRatio)\n      );\n  };\n\n  // Return humidity ratio from enthalpy and dry-bulb temperature.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 30.\n  // Notes: based on the `GetMoistAirEnthalpy` function, rearranged for humidity ratio.\n  this.GetHumRatioFromEnthalpyAndTDryBulb = function(\n    // (o) Humidity ratio in lb_HO lb_Air [IP] or kg_HO kg_Air\n    MoistAirEnthalpy, // (i) Moist air enthalpy in Btu lb [IP] or J kg\n    TDryBulb, // (i) Dry-bulb temperature in F [IP] or C [SI]\n  ) {\n    var HumRatio;\n    if (this.isIP()) HumRatio = (MoistAirEnthalpy - 0.24 * TDryBulb) / (1061.0 + 0.444 * TDryBulb);\n    else HumRatio = (MoistAirEnthalpy / 1000.0 - 1.006 * TDryBulb) / (2501.0 + 1.86 * TDryBulb);\n\n    // Validity check.\n    return max(HumRatio, MIN_HUM_RATIO);\n  };\n\n  /******************************************************************************************************\n   * Saturated Air Calculations\n   *****************************************************************************************************/\n\n  // Return saturation vapor pressure given dry-bulb temperature.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn. 5 & 6\n  // Important note: the ASHRAE formulae are defined above and below the freezing point but have\n  // a discontinuity at the freezing point. This is a small inaccuracy on ASHRAE's part: the formulae\n  // should be defined above and below the triple point of water (not the feezing point) in which case\n  // the discontinuity vanishes. It is essential to use the triple point of water otherwise function\n  // GetTDewPointFromVapPres, which inverts the present function, does not converge properly around\n  // the freezing point.\n  this.GetSatVapPres = function(\n    // (o) Vapor Pressure of saturated air in Psi [IP] or Pa [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n  ) {\n    var LnPws, T;\n\n    if (this.isIP()) {\n      if (!(TDryBulb >= -148 && TDryBulb <= 392))\n        throw new Error('Dry bulb temperature is outside range [-148, 392]');\n\n      T = this.GetTRankineFromTFahrenheit(TDryBulb);\n      if (TDryBulb <= TRIPLE_POINT_WATER_IP)\n        LnPws =\n          -1.0214165e4 / T -\n          4.8932428 -\n          5.3765794e-3 * T +\n          1.9202377e-7 * T * T +\n          3.5575832e-10 * pow(T, 3) -\n          9.0344688e-14 * pow(T, 4) +\n          4.1635019 * log(T);\n      else\n        LnPws =\n          -1.0440397e4 / T -\n          1.129465e1 -\n          2.7022355e-2 * T +\n          1.289036e-5 * T * T -\n          2.4780681e-9 * pow(T, 3) +\n          6.5459673 * log(T);\n    } else {\n      if (!(TDryBulb >= -100 && TDryBulb <= 200))\n        throw new Error('Dry bulb temperature is outside range [-100, 200]');\n\n      T = this.GetTKelvinFromTCelsius(TDryBulb);\n      if (TDryBulb <= TRIPLE_POINT_WATER_SI)\n        LnPws =\n          -5.6745359e3 / T +\n          6.3925247 -\n          9.677843e-3 * T +\n          6.2215701e-7 * T * T +\n          2.0747825e-9 * pow(T, 3) -\n          9.484024e-13 * pow(T, 4) +\n          4.1635019 * log(T);\n      else\n        LnPws =\n          -5.8002206e3 / T +\n          1.3914993 -\n          4.8640239e-2 * T +\n          4.1764768e-5 * T * T -\n          1.4452093e-8 * pow(T, 3) +\n          6.5459673 * log(T);\n    }\n\n    return exp(LnPws);\n  };\n\n  // Return humidity ratio of saturated air given dry-bulb temperature and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 36, solved for W\n  this.GetSatHumRatio = function(\n    // (o) Humidity ratio of saturated air in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var SatVaporPres, SatHumRatio;\n\n    SatVaporPres = this.GetSatVapPres(TDryBulb);\n    SatHumRatio = (0.621945 * SatVaporPres) / (Pressure - SatVaporPres);\n\n    // Validity check.\n    return max(SatHumRatio, MIN_HUM_RATIO);\n  };\n\n  // Return saturated air enthalpy given dry-bulb temperature and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1\n  this.GetSatAirEnthalpy = function(\n    // (o) Saturated air enthalpy in Btu lb [IP] or J kg [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    return this.GetMoistAirEnthalpy(TDryBulb, this.GetSatHumRatio(TDryBulb, Pressure));\n  };\n\n  /******************************************************************************************************\n   * Moist Air Calculations\n   *****************************************************************************************************/\n\n  // Return Vapor pressure deficit given dry-bulb temperature, humidity ratio, and pressure.\n  // Reference: see Oke (1987) eqn. 2.13a\n  this.GetVaporPressureDeficit = function(\n    // (o) Vapor pressure deficit in Psi [IP] or Pa [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    HumRatio, // (i) Humidity ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var RelHum;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n\n    RelHum = this.GetRelHumFromHumRatio(TDryBulb, HumRatio, Pressure);\n    return this.GetSatVapPres(TDryBulb) * (1 - RelHum);\n  };\n\n  // Return the degree of saturation (i.e humidity ratio of the air / humidity ratio of the air at saturation\n  // at the same temperature and pressure) given dry-bulb temperature, humidity ratio, and atmospheric pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2009) ch. 1 eqn. 12\n  // Notes: the definition is absent from the 2017 Handbook\n  this.GetDegreeOfSaturation = function(\n    // (o) Degree of saturation (unitless)\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    HumRatio, // (i) Humidity ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var BoundedHumRatio;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    return BoundedHumRatio / this.GetSatHumRatio(TDryBulb, Pressure);\n  };\n\n  // Return moist air enthalpy given dry-bulb temperature and humidity ratio.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn. 30\n  this.GetMoistAirEnthalpy = function(\n    // (o) Moist Air Enthalpy in Btu lb [IP] or J kg [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    HumRatio, // (i) Humidity ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n  ) {\n    var BoundedHumRatio;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    if (this.isIP()) return 0.24 * TDryBulb + BoundedHumRatio * (1061 + 0.444 * TDryBulb);\n    else return (1.006 * TDryBulb + BoundedHumRatio * (2501 + 1.86 * TDryBulb)) * 1000;\n  };\n\n  // Return moist air specific volume given dry-bulb temperature, humidity ratio, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn. 26\n  // Notes: in IP units, R_DA_IP / 144 equals 0.370486 which is the coefficient appearing in eqn 26.\n  // The factor 144 is for the conversion of Psi = lb in to lb ft.\n  this.GetMoistAirVolume = function(\n    // (o) Specific Volume ft lb [IP] or in m kg [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    HumRatio, // (i) Humidity ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var BoundedHumRatio;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    if (this.isIP())\n      return (\n        (R_DA_IP * this.GetTRankineFromTFahrenheit(TDryBulb) * (1 + 1.607858 * BoundedHumRatio)) /\n        (144 * Pressure)\n      );\n    else\n      return (\n        (R_DA_SI * this.GetTKelvinFromTCelsius(TDryBulb) * (1 + 1.607858 * BoundedHumRatio)) /\n        Pressure\n      );\n  };\n\n  // Return dry-bulb temperature given moist air specific volume, humidity ratio, and pressure.\n  // Reference:\n  // ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 26\n  // Notes:\n  // In IP units, R_DA_IP / 144 equals 0.370486 which is the coefficient appearing in eqn 26\n  // The factor 144 is for the conversion of Psi = lb in to lb ft.\n  // Based on the `GetMoistAirVolume` function, rearranged for dry-bulb temperature.\n  this.GetTDryBulbFromMoistAirVolumeAndHumRatio = function(\n    // (o) Dry-bulb temperature in F [IP] or C [SI]\n    MoistAirVolume, // (i) Specific volume of moist air in ft lb of dry air [IP] or in m kg of dry air [SI]\n    HumRatio, // (i) Humidity ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var BoundedHumRatio;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    if (this.isIP())\n      return this.GetTFahrenheitFromTRankine(\n        (MoistAirVolume * (144 * Pressure)) / (R_DA_IP * (1 + 1.607858 * BoundedHumRatio)),\n      );\n    else\n      return this.GetTCelsiusFromTKelvin(\n        (MoistAirVolume * Pressure) / (R_DA_SI * (1 + 1.607858 * BoundedHumRatio)),\n      );\n  };\n\n  // Return moist air density given humidity ratio, dry bulb temperature, and pressure.\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn. 11\n  this.GetMoistAirDensity = function(\n    // (o) Moist air density in lb ft [IP] or kg m [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    HumRatio, // (i) Humidity ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var BoundedHumRatio;\n\n    if (!(HumRatio >= 0)) throw new Error('Humidity ratio is negative');\n    BoundedHumRatio = max(HumRatio, MIN_HUM_RATIO);\n\n    return (1 + BoundedHumRatio) / this.GetMoistAirVolume(TDryBulb, BoundedHumRatio, Pressure);\n  };\n\n  /******************************************************************************************************\n   * Standard atmosphere\n   *****************************************************************************************************/\n\n  // Return standard atmosphere barometric pressure, given the elevation (altitude).\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 3\n  this.GetStandardAtmPressure = function(\n    // (o) Standard atmosphere barometric pressure in Psi [IP] or Pa [SI]\n    Altitude, // (i) Altitude in ft [IP] or m [SI]\n  ) {\n    var Pressure;\n\n    if (this.isIP()) Pressure = 14.696 * pow(1 - 6.8754e-6 * Altitude, 5.2559);\n    else Pressure = 101325 * pow(1 - 2.25577e-5 * Altitude, 5.2559);\n    return Pressure;\n  };\n\n  // Return standard atmosphere temperature, given the elevation (altitude).\n  // Reference: ASHRAE Handbook - Fundamentals (2017) ch. 1 eqn 4\n  this.GetStandardAtmTemperature = function(\n    // (o) Standard atmosphere dry bulb temperature in F [IP] or C [SI]\n    Altitude, // (i) Altitude in ft [IP] or m [SI]\n  ) {\n    var Temperature;\n    if (this.isIP()) Temperature = 59 - 0.0035662 * Altitude;\n    else Temperature = 15 - 0.0065 * Altitude;\n    return Temperature;\n  };\n\n  // Return sea level pressure given dry-bulb temperature, altitude above sea level and pressure.\n  // Reference: Hess SL, Introduction to theoretical meteorology, Holt Rinehart and Winston, NY 1959,\n  // ch. 6.5; Stull RB, Meteorology for scientists and engineers, 2nd edition,\n  // Brooks/Cole 2000, ch. 1.\n  // Notes: the standard procedure for the US is to use for TDryBulb the average\n  // of the current station temperature and the station temperature from 12 hours ago.\n  this.GetSeaLevelPressure = function(\n    // (o) Sea level barometric pressure in Psi [IP] or Pa [SI]\n    StnPressure, // (i) Observed station pressure in Psi [IP] or Pa [SI]\n    Altitude, // (i) Altitude above sea level in ft [IP] or m [SI]\n    TDryBulb, // (i) Dry bulb temperature ft lb [IP] or in m kg [SI]\n  ) {\n    var TColumn, H;\n    if (this.isIP()) {\n      // Calculate average temperature in column of air, assuming a lapse rate\n      // of 3.6 F/1000ft\n      TColumn = TDryBulb + (0.0036 * Altitude) / 2;\n\n      // Determine the scale height\n      H = 53.351 * this.GetTRankineFromTFahrenheit(TColumn);\n    } else {\n      // Calculate average temperature in column of air, assuming a lapse rate\n      // of 6.5 C/km\n      TColumn = TDryBulb + (0.0065 * Altitude) / 2;\n\n      // Determine the scale height\n      H = (287.055 * this.GetTKelvinFromTCelsius(TColumn)) / 9.807;\n    }\n\n    // Calculate the sea level pressure\n    var SeaLevelPressure = StnPressure * exp(Altitude / H);\n    return SeaLevelPressure;\n  };\n\n  // Return station pressure from sea level pressure\n  // Reference: see 'GetSeaLevelPressure'\n  // Notes: this function is just the inverse of 'GetSeaLevelPressure'.\n  this.GetStationPressure = function(\n    // (o) Station pressure in Psi [IP] or Pa [SI]\n    SeaLevelPressure, // (i) Sea level barometric pressure in Psi [IP] or Pa [SI]\n    Altitude, // (i) Altitude above sea level in ft [IP] or m [SI]\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n  ) {\n    return SeaLevelPressure / this.GetSeaLevelPressure(1, Altitude, TDryBulb);\n  };\n\n  /******************************************************************************************************\n   * Functions to set all psychrometric values\n   *****************************************************************************************************/\n\n  // Utility function to calculate humidity ratio, dew-point temperature, relative humidity,\n  // vapour pressure, moist air enthalpy, moist air volume, and degree of saturation of air given\n  // dry-bulb temperature, wet-bulb temperature, and pressure.\n  this.CalcPsychrometricsFromTWetBulb = function(\n    /**\n     * HumRatio            // (o) Humidity ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n     * TDewPoint           // (o) Dew point temperature in F [IP] or C [SI]\n     * RelHum              // (o) Relative humidity [0-1]\n     * VapPres             // (o) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n     * MoistAirEnthalpy    // (o) Moist air enthalpy in Btu lb [IP] or J kg [SI]\n     * MoistAirVolume      // (o) Specific volume ft lb [IP] or in m kg [SI]\n     * DegreeOfSaturation  // (o) Degree of saturation [unitless]\n     */\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    TWetBulb, // (i) Wet bulb temperature in F [IP] or C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var HumRatio = this.GetHumRatioFromTWetBulb(TDryBulb, TWetBulb, Pressure);\n    var TDewPoint = this.GetTDewPointFromHumRatio(TDryBulb, HumRatio, Pressure);\n    var RelHum = this.GetRelHumFromHumRatio(TDryBulb, HumRatio, Pressure);\n    var VapPres = this.GetVapPresFromHumRatio(HumRatio, Pressure);\n    var MoistAirEnthalpy = this.GetMoistAirEnthalpy(TDryBulb, HumRatio);\n    var MoistAirVolume = this.GetMoistAirVolume(TDryBulb, HumRatio, Pressure);\n    var DegreeOfSaturation = this.GetDegreeOfSaturation(TDryBulb, HumRatio, Pressure);\n    return [\n      HumRatio,\n      TDewPoint,\n      RelHum,\n      VapPres,\n      MoistAirEnthalpy,\n      MoistAirVolume,\n      DegreeOfSaturation,\n    ];\n  };\n\n  // Utility function to calculate humidity ratio, wet-bulb temperature, relative humidity,\n  // vapour pressure, moist air enthalpy, moist air volume, and degree of saturation of air given\n  // dry-bulb temperature, dew-point temperature, and pressure.\n  this.CalcPsychrometricsFromTDewPoint = function(\n    /**\n     * HumRatio            // (o) Humidity ratio in lb_HO lb_Air [IP] or kg_HO kg_Air [SI]\n     * TWetBulb            // (o) Wet bulb temperature in F [IP] or C [SI]\n     * RelHum              // (o) Relative humidity [0-1]\n     * VapPres             // (o) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n     * MoistAirEnthalpy    // (o) Moist air enthalpy in Btu lb [IP] or J kg [SI]\n     * MoistAirVolume      // (o) Specific volume ft lb [IP] or in m kg [SI]\n     * DegreeOfSaturation  // (o) Degree of saturation [unitless]\n     */\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    TDewPoint, // (i) Dew point temperature in F [IP] or C [SI]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var HumRatio = this.GetHumRatioFromTDewPoint(TDewPoint, Pressure);\n    var TWetBulb = this.GetTWetBulbFromHumRatio(TDryBulb, HumRatio, Pressure);\n    var RelHum = this.GetRelHumFromHumRatio(TDryBulb, HumRatio, Pressure);\n    var VapPres = this.GetVapPresFromHumRatio(HumRatio, Pressure);\n    var MoistAirEnthalpy = this.GetMoistAirEnthalpy(TDryBulb, HumRatio);\n    var MoistAirVolume = this.GetMoistAirVolume(TDryBulb, HumRatio, Pressure);\n    var DegreeOfSaturation = this.GetDegreeOfSaturation(TDryBulb, HumRatio, Pressure);\n    return [\n      HumRatio,\n      TWetBulb,\n      RelHum,\n      VapPres,\n      MoistAirEnthalpy,\n      MoistAirVolume,\n      DegreeOfSaturation,\n    ];\n  };\n\n  // Utility function to calculate humidity ratio, wet-bulb temperature, dew-point temperature,\n  // vapour pressure, moist air enthalpy, moist air volume, and degree of saturation of air given\n  // dry-bulb temperature, relative humidity and pressure.\n  this.CalcPsychrometricsFromRelHum = function(\n    /**\n     * HumRatio            // (o) Partial pressure of water vapor in moist air in Psi [IP] or Pa [SI]\n     * TWetBulb            // (o) Wet bulb temperature in F [IP] or C [SI]\n     * TDewPoint           // (o) Dew point temperature in F [IP] or C [SI]\n     * VapPres             // (o) Partial pressure of water vapor in moist air [Psi]\n     * MoistAirEnthalpy    // (o) Moist air enthalpy in Btu lb [IP] or J kg [SI]\n     * MoistAirVolume      // (o) Specific volume ft lb [IP] or in m kg [SI]\n     * DegreeOfSaturation  // (o) Degree of saturation [unitless]\n     */\n    TDryBulb, // (i) Dry bulb temperature in F [IP] or C [SI]\n    RelHum, // (i) Relative humidity [0-1]\n    Pressure, // (i) Atmospheric pressure in Psi [IP] or Pa [SI]\n  ) {\n    var HumRatio = this.GetHumRatioFromRelHum(TDryBulb, RelHum, Pressure);\n    var TWetBulb = this.GetTWetBulbFromHumRatio(TDryBulb, HumRatio, Pressure);\n    var TDewPoint = this.GetTDewPointFromHumRatio(TDryBulb, HumRatio, Pressure);\n    var VapPres = this.GetVapPresFromHumRatio(HumRatio, Pressure);\n    var MoistAirEnthalpy = this.GetMoistAirEnthalpy(TDryBulb, HumRatio);\n    var MoistAirVolume = this.GetMoistAirVolume(TDryBulb, HumRatio, Pressure);\n    var DegreeOfSaturation = this.GetDegreeOfSaturation(TDryBulb, HumRatio, Pressure);\n    return [\n      HumRatio,\n      TWetBulb,\n      TDewPoint,\n      VapPres,\n      MoistAirEnthalpy,\n      MoistAirVolume,\n      DegreeOfSaturation,\n    ];\n  };\n};\n\nmodule.exports = psychrolib;\n","export default class BACnetEnumsUnits {\n  static unitCategory = ['Common Metric', 'Common Imperial', 'Electrical', 'Energy', 'Enthalpy', 'Entropy', 'Force', 'Frequency', 'Humidity', 'Length', 'Light', 'Mass', 'Flow', 'Power', 'Pressure', 'Temperature', 'Time', 'Torque', 'Velocity', 'Volume', 'Volumetric Flow', 'Other'].map(\n    point => {\n      return { value: point, text: point };\n    },\n  );\n  static unitType(type: string) {\n    switch (type) {\n      case 'Common Metric':\n        return Object.keys(BACnetEnumsUnits.COMMON_METRIC);\n      case 'Common Imperial':\n        return Object.keys(BACnetEnumsUnits.COMMON_IMPERIAL);\n      case 'Electrical':\n        return Object.keys(BACnetEnumsUnits.Electrical);\n      case 'Energy':\n        return Object.keys(BACnetEnumsUnits.Energy);\n      case 'Enthalpy':\n        return Object.keys(BACnetEnumsUnits.Enthalpy);\n      case 'Entropy':\n        return Object.keys(BACnetEnumsUnits.Entropy);\n      case 'Force':\n        return Object.keys(BACnetEnumsUnits.Force);\n      case 'Frequency':\n        return Object.keys(BACnetEnumsUnits.Frequency);\n      case 'Humidity':\n        return Object.keys(BACnetEnumsUnits.Humidity);\n      case 'Length':\n        return Object.keys(BACnetEnumsUnits.Length);\n      case 'Light':\n        return Object.keys(BACnetEnumsUnits.Light);\n      case 'Mass':\n        return Object.keys(BACnetEnumsUnits.Mass);\n      case 'Flow':\n        return Object.keys(BACnetEnumsUnits.Flow);\n      case 'Power':\n        return Object.keys(BACnetEnumsUnits.Entropy);\n      case 'Pressure':\n        return Object.keys(BACnetEnumsUnits.Pressure);\n      case 'Temperature':\n        return Object.keys(BACnetEnumsUnits.Temperature);\n      case 'Time':\n        return Object.keys(BACnetEnumsUnits.Time);\n      case 'Torque':\n        return Object.keys(BACnetEnumsUnits.Torque);\n      case 'Velocity':\n        return Object.keys(BACnetEnumsUnits.Velocity);\n      case 'Volume':\n        return Object.keys(BACnetEnumsUnits.Volume);\n      case 'Volumetric Flow':\n        return Object.keys(BACnetEnumsUnits.VolumetricFlow);\n      case 'Other':\n        return Object.keys(BACnetEnumsUnits.Other);\n    }\n  }\n\n  static COMMON_METRIC = {\n    NO_UNITS: 95,\n    PERCENT: 98,\n    PERCENT_RELATIVE_HUMIDITY: 29,\n    DEGREES_CELSIUS: 62,\n    KILOPASCALS: 54,\n  };\n\n  static COMMON_IMPERIAL = {\n    NO_UNITS: 95,\n    PERCENT: 98,\n    PERCENT_RELATIVE_HUMIDITY: 29,\n    DEGREES_FAHRENHEIT: 64,\n    POUNDS_FORCE_PER_SQUARE_INCH: 56,\n  };\n\n  static Electrical = {\n    MILLIAMPERES: 2,\n    AMPERES: 3,\n    AMPERES_PER_METER: 167,\n    AMPERES_PER_SQUARE_METER: 168,\n    AMPERE_SQUARE_METERS: 169,\n    DECIBELS: 199,\n    DECIBELS_MILLIVOLT: 200,\n    DECIBELS_VOLT: 201,\n    FARADS: 170,\n    HENRYS: 171,\n    OHMS: 4,\n    OHM_METERS: 172,\n    MILLIOHMS: 145,\n    KILOHMS: 122,\n    MEGOHMS: 123,\n    MICROSIEMENS: 190,\n    MILLISIEMENS: 202,\n    SIEMENS: 173 /* 1 mho equals 1 siemens */,\n    SIEMENS_PER_METER: 174,\n    TESLAS: 175,\n    VOLTS: 5,\n    MILLIVOLTS: 124,\n    KILOVOLTS: 6,\n    MEGAVOLTS: 7,\n    VOLT_AMPERES: 8,\n    KILOVOLT_AMPERES: 9,\n    MEGAVOLT_AMPERES: 10,\n    VOLT_AMPERES_REACTIVE: 11,\n    KILOVOLT_AMPERES_REACTIVE: 12,\n    MEGAVOLT_AMPERES_REACTIVE: 13,\n    VOLTS_PER_DEGREE_KELVIN: 176,\n    VOLTS_PER_METER: 177,\n    DEGREES_PHASE: 14,\n    POWER_FACTOR: 15,\n    WEBERS: 178,\n  };\n\n\n  static Energy = {\n    /* Energy */\n    JOULES: 16,\n    KILOJOULES: 17,\n    KILOJOULES_PER_KILOGRAM: 125,\n    MEGAJOULES: 126,\n    WATT_HOURS: 18,\n    KILOWATT_HOURS: 19,\n    MEGAWATT_HOURS: 146,\n    WATT_HOURS_REACTIVE: 203,\n    KILOWATT_HOURS_REACTIVE: 204,\n    MEGAWATT_HOURS_REACTIVE: 205,\n    BTUS: 20,\n    KILO_BTUS: 147,\n    MEGA_BTUS: 148,\n    THERMS: 21,\n    TON_HOURS: 22,\n  };\n\n  static Enthalpy = {\n    /* Enthalpy */\n    JOULES_PER_KILOGRAM_DRY_AIR: 23,\n    KILOJOULES_PER_KILOGRAM_DRY_AIR: 149,\n    MEGAJOULES_PER_KILOGRAM_DRY_AIR: 150,\n    BTUS_PER_POUND_DRY_AIR: 24,\n    BTUS_PER_POUND: 117,\n  };\n  static Entropy = {\n    /* Entropy */\n    JOULES_PER_DEGREE_KELVIN: 127,\n    KILOJOULES_PER_DEGREE_KELVIN: 151,\n    MEGAJOULES_PER_DEGREE_KELVIN: 152,\n    JOULES_PER_KILOGRAM_DEGREE_KELVIN: 128,\n  };\n  static Force = {\n    /* Force */\n    NEWTON: 153,\n  };\n  static Frequency = {\n    /* Frequency */\n    CYCLES_PER_HOUR: 25,\n    CYCLES_PER_MINUTE: 26,\n    HERTZ: 27,\n    KILOHERTZ: 129,\n    MEGAHERTZ: 130,\n    PER_HOUR: 131,\n  };\n\n  static Humidity = {\n    /* Humidity */\n    GRAMS_OF_WATER_PER_KILOGRAM_DRY_AIR: 28,\n    PERCENT_RELATIVE_HUMIDITY: 29,\n  };\n  static Length = {\n    /* Length */\n    MICROMETERS: 194,\n    MILLIMETERS: 30,\n    CENTIMETERS: 118,\n    KILOMETERS: 193,\n    METERS: 31,\n    INCHES: 32,\n    FEET: 33,\n  };\n  static Light = {\n    /* Light */\n    CANDELAS: 179,\n    CANDELAS_PER_SQUARE_METER: 180,\n    WATTS_PER_SQUARE_FOOT: 34,\n    WATTS_PER_SQUARE_METER: 35,\n    LUMENS: 36,\n    LUXES: 37,\n    FOOT_CANDLES: 38,\n  };\n  static Mass = {\n    /* Mass */\n    MILLIGRAMS: 196,\n    GRAMS: 195,\n    KILOGRAMS: 39,\n    POUNDS_MASS: 40,\n    TONS: 41,\n  };\n  static Flow = {\n    /* Mass Flow */\n    GRAMS_PER_SECOND: 154,\n    GRAMS_PER_MINUTE: 155,\n    KILOGRAMS_PER_SECOND: 42,\n    KILOGRAMS_PER_MINUTE: 43,\n    KILOGRAMS_PER_HOUR: 44,\n    POUNDS_MASS_PER_SECOND: 119,\n    POUNDS_MASS_PER_MINUTE: 45,\n    POUNDS_MASS_PER_HOUR: 46,\n    TONS_PER_HOUR: 156,\n  };\n  static Power = {\n    /* Power */\n    MILLIWATTS: 132,\n    WATTS: 47,\n    KILOWATTS: 48,\n    MEGAWATTS: 49,\n    BTUS_PER_HOUR: 50,\n    KILO_BTUS_PER_HOUR: 157,\n    HORSEPOWER: 51,\n    TONS_REFRIGERATION: 52,\n  };\n  static Pressure = {\n    /* Pressure */\n    PASCALS: 53,\n    HECTOPASCALS: 133,\n    KILOPASCALS: 54,\n    MILLIBARS: 134,\n    BARS: 55,\n    POUNDS_FORCE_PER_SQUARE_INCH: 56,\n    MILLIMETERS_OF_WATER: 206,\n    CENTIMETERS_OF_WATER: 57,\n    INCHES_OF_WATER: 58,\n    MILLIMETERS_OF_MERCURY: 59,\n    CENTIMETERS_OF_MERCURY: 60,\n    INCHES_OF_MERCURY: 61,\n  };\n  static Temperature = {\n    /* Temperature */\n    DEGREES_CELSIUS: 62,\n    DEGREES_KELVIN: 63,\n    DEGREES_KELVIN_PER_HOUR: 181,\n    DEGREES_KELVIN_PER_MINUTE: 182,\n    DEGREES_FAHRENHEIT: 64,\n    DEGREE_DAYS_CELSIUS: 65,\n    DEGREE_DAYS_FAHRENHEIT: 66,\n    DELTA_DEGREES_FAHRENHEIT: 120,\n    DELTA_DEGREES_KELVIN: 121,\n  };\n  static Time = {\n    /* Time */\n    YEARS: 67,\n    MONTHS: 68,\n    WEEKS: 69,\n    DAYS: 70,\n    HOURS: 71,\n    MINUTES: 72,\n    SECONDS: 73,\n    HUNDREDTHS_SECONDS: 158,\n    MILLISECONDS: 159,\n  };\n  static Torque = {\n    /* Torque */\n    NEWTON_METERS: 160,\n  };\n  static Velocity = {\n    /* Velocity */\n    MILLIMETERS_PER_SECOND: 161,\n    MILLIMETERS_PER_MINUTE: 162,\n    METERS_PER_SECOND: 74,\n    METERS_PER_MINUTE: 163,\n    METERS_PER_HOUR: 164,\n    KILOMETERS_PER_HOUR: 75,\n    FEET_PER_SECOND: 76,\n    FEET_PER_MINUTE: 77,\n    MILES_PER_HOUR: 78,\n  };\n  static Volume = {\n    /* Volume */\n    CUBIC_FEET: 79,\n    CUBIC_METERS: 80,\n    IMPERIAL_GALLONS: 81,\n    MILLILITERS: 197,\n    LITERS: 82,\n    US_GALLONS: 83,\n  };\n  static VolumetricFlow = {\n    /* Volumetric Flow */\n    CUBIC_FEET_PER_SECOND: 142,\n    CUBIC_FEET_PER_MINUTE: 84,\n    CUBIC_FEET_PER_HOUR: 191,\n    CUBIC_METERS_PER_SECOND: 85,\n    CUBIC_METERS_PER_MINUTE: 165,\n    CUBIC_METERS_PER_HOUR: 135,\n    IMPERIAL_GALLONS_PER_MINUTE: 86,\n    MILLILITERS_PER_SECOND: 198,\n    LITERS_PER_SECOND: 87,\n    LITERS_PER_MINUTE: 88,\n    LITERS_PER_HOUR: 136,\n    US_GALLONS_PER_MINUTE: 89,\n    US_GALLONS_PER_HOUR: 192,\n  };\n  static Other = {\n    /* Other */\n    DEGREES_ANGULAR: 90,\n    DEGREES_CELSIUS_PER_HOUR: 91,\n    DEGREES_CELSIUS_PER_MINUTE: 92,\n    DEGREES_FAHRENHEIT_PER_HOUR: 93,\n    DEGREES_FAHRENHEIT_PER_MINUTE: 94,\n    JOULE_SECONDS: 183,\n    KILOGRAMS_PER_CUBIC_METER: 186,\n    KW_HOURS_PER_SQUARE_METER: 137,\n    KW_HOURS_PER_SQUARE_FOOT: 138,\n    MEGAJOULES_PER_SQUARE_METER: 139,\n    MEGAJOULES_PER_SQUARE_FOOT: 140,\n    NO_UNITS: 95,\n    NEWTON_SECONDS: 187,\n    NEWTONS_PER_METER: 188,\n    PARTS_PER_MILLION: 96,\n    PARTS_PER_BILLION: 97,\n    PERCENT: 98,\n    PERCENT_OBSCURATION_PER_FOOT: 143,\n    PERCENT_OBSCURATION_PER_METER: 144,\n    PERCENT_PER_SECOND: 99,\n    PER_MINUTE: 100,\n    PER_SECOND: 101,\n    PSI_PER_DEGREE_FAHRENHEIT: 102,\n    RADIANS: 103,\n    RADIANS_PER_SECOND: 184,\n    REVOLUTIONS_PER_MINUTE: 104,\n    SQUARE_METERS_PER_NEWTON: 185,\n    WATTS_PER_METER_PER_DEGREE_KELVIN: 189,\n    WATTS_PER_SQUARE_METER_DEGREE_KELVIN: 141,\n    PER_MILLE: 207,\n    GRAMS_PER_GRAM: 208,\n    KILOGRAMS_PER_KILOGRAM: 209,\n    GRAMS_PER_KILOGRAM: 210,\n    MILLIGRAMS_PER_GRAM: 211,\n    MILLIGRAMS_PER_KILOGRAM: 212,\n    GRAMS_PER_MILLILITER: 213,\n    GRAMS_PER_LITER: 214,\n    MILLIGRAMS_PER_LITER: 215,\n    MICROGRAMS_PER_LITER: 216,\n    GRAMS_PER_CUBIC_METER: 217,\n    MILLIGRAMS_PER_CUBIC_METER: 218,\n    MICROGRAMS_PER_CUBIC_METER: 219,\n    NANOGRAMS_PER_CUBIC_METER: 220,\n    GRAMS_PER_CUBIC_CENTIMETER: 221,\n    BECQUERELS: 222,\n    MEGABECQUERELS: 224,\n    GRAY: 225,\n    MILLIGRAY: 226,\n    MICROGRAY: 227,\n    SIEVERTS: 228,\n    MILLISIEVERTS: 229,\n    MICROSIEVERTS: 230,\n    MICROSIEVERTS_PER_HOUR: 231,\n    DECIBELS_A: 232,\n    NEPHELOMETRIC_TURBIDITY_UNIT: 233,\n    PH: 234,\n    GRAMS_PER_SQUARE_METER: 235,\n    MINUTES_PER_DEGREE_KELVIN: 236,\n  };\n\n}\n\n\n\n    // static BACNET_ENGINEERING_UNITS = {\n    //   /* Area */\n    //   METERS_PER_SECOND_PER_SECOND: 166,\n    //   SQUARE_METERS: 0,\n    //   SQUARE_CENTIMETERS: 116,\n    //   SQUARE_FEET: 1,\n    //   SQUARE_INCHES: 115,\n    //   /* Currency */\n    //   // CURRENCY1: 105,\n    //   // CURRENCY2: 106,\n    //   // CURRENCY3: 107,\n    //   // CURRENCY4: 108,\n    //   // CURRENCY5: 109,\n    //   // CURRENCY6: 110,\n    //   // CURRENCY7: 111,\n    //   // CURRENCY8: 112,\n    //   // CURRENCY9: 113,\n    //   // CURRENCY10: 114,\n\n    //   /* Electrical */\n    //   MILLIAMPERES: 2,\n    //   AMPERES: 3,\n    //   AMPERES_PER_METER: 167,\n    //   AMPERES_PER_SQUARE_METER: 168,\n    //   AMPERE_SQUARE_METERS: 169,\n    //   DECIBELS: 199,\n    //   DECIBELS_MILLIVOLT: 200,\n    //   DECIBELS_VOLT: 201,\n    //   FARADS: 170,\n    //   HENRYS: 171,\n    //   OHMS: 4,\n    //   OHM_METERS: 172,\n    //   MILLIOHMS: 145,\n    //   KILOHMS: 122,\n    //   MEGOHMS: 123,\n    //   MICROSIEMENS: 190,\n    //   MILLISIEMENS: 202,\n    //   SIEMENS: 173 /* 1 mho equals 1 siemens */,\n    //   SIEMENS_PER_METER: 174,\n    //   TESLAS: 175,\n    //   VOLTS: 5,\n    //   MILLIVOLTS: 124,\n    //   KILOVOLTS: 6,\n    //   MEGAVOLTS: 7,\n    //   VOLT_AMPERES: 8,\n    //   KILOVOLT_AMPERES: 9,\n    //   MEGAVOLT_AMPERES: 10,\n    //   VOLT_AMPERES_REACTIVE: 11,\n    //   KILOVOLT_AMPERES_REACTIVE: 12,\n    //   MEGAVOLT_AMPERES_REACTIVE: 13,\n    //   VOLTS_PER_DEGREE_KELVIN: 176,\n    //   VOLTS_PER_METER: 177,\n    //   DEGREES_PHASE: 14,\n    //   POWER_FACTOR: 15,\n    //   WEBERS: 178,\n    //   /* Energy */\n    //   JOULES: 16,\n    //   KILOJOULES: 17,\n    //   KILOJOULES_PER_KILOGRAM: 125,\n    //   MEGAJOULES: 126,\n    //   WATT_HOURS: 18,\n    //   KILOWATT_HOURS: 19,\n    //   MEGAWATT_HOURS: 146,\n    //   WATT_HOURS_REACTIVE: 203,\n    //   KILOWATT_HOURS_REACTIVE: 204,\n    //   MEGAWATT_HOURS_REACTIVE: 205,\n    //   BTUS: 20,\n    //   KILO_BTUS: 147,\n    //   MEGA_BTUS: 148,\n    //   THERMS: 21,\n    //   TON_HOURS: 22,\n    //   /* Enthalpy */\n    //   JOULES_PER_KILOGRAM_DRY_AIR: 23,\n    //   KILOJOULES_PER_KILOGRAM_DRY_AIR: 149,\n    //   MEGAJOULES_PER_KILOGRAM_DRY_AIR: 150,\n    //   BTUS_PER_POUND_DRY_AIR: 24,\n    //   BTUS_PER_POUND: 117,\n    //   /* Entropy */\n    //   JOULES_PER_DEGREE_KELVIN: 127,\n    //   KILOJOULES_PER_DEGREE_KELVIN: 151,\n    //   MEGAJOULES_PER_DEGREE_KELVIN: 152,\n    //   JOULES_PER_KILOGRAM_DEGREE_KELVIN: 128,\n    //   /* Force */\n    //   NEWTON: 153,\n    //   /* Frequency */\n    //   CYCLES_PER_HOUR: 25,\n    //   CYCLES_PER_MINUTE: 26,\n    //   HERTZ: 27,\n    //   KILOHERTZ: 129,\n    //   MEGAHERTZ: 130,\n    //   PER_HOUR: 131,\n    //   /* Humidity */\n    //   GRAMS_OF_WATER_PER_KILOGRAM_DRY_AIR: 28,\n    //   PERCENT_RELATIVE_HUMIDITY: 29,\n    //   /* Length */\n    //   MICROMETERS: 194,\n    //   MILLIMETERS: 30,\n    //   CENTIMETERS: 118,\n    //   KILOMETERS: 193,\n    //   METERS: 31,\n    //   INCHES: 32,\n    //   FEET: 33,\n    //   /* Light */\n    //   CANDELAS: 179,\n    //   CANDELAS_PER_SQUARE_METER: 180,\n    //   WATTS_PER_SQUARE_FOOT: 34,\n    //   WATTS_PER_SQUARE_METER: 35,\n    //   LUMENS: 36,\n    //   LUXES: 37,\n    //   FOOT_CANDLES: 38,\n    //   /* Mass */\n    //   MILLIGRAMS: 196,\n    //   GRAMS: 195,\n    //   KILOGRAMS: 39,\n    //   POUNDS_MASS: 40,\n    //   TONS: 41,\n    //   /* Mass Flow */\n    //   GRAMS_PER_SECOND: 154,\n    //   GRAMS_PER_MINUTE: 155,\n    //   KILOGRAMS_PER_SECOND: 42,\n    //   KILOGRAMS_PER_MINUTE: 43,\n    //   KILOGRAMS_PER_HOUR: 44,\n    //   POUNDS_MASS_PER_SECOND: 119,\n    //   POUNDS_MASS_PER_MINUTE: 45,\n    //   POUNDS_MASS_PER_HOUR: 46,\n    //   TONS_PER_HOUR: 156,\n    //   /* Power */\n    //   MILLIWATTS: 132,\n    //   WATTS: 47,\n    //   KILOWATTS: 48,\n    //   MEGAWATTS: 49,\n    //   BTUS_PER_HOUR: 50,\n    //   KILO_BTUS_PER_HOUR: 157,\n    //   HORSEPOWER: 51,\n    //   TONS_REFRIGERATION: 52,\n    //   /* Pressure */\n    //   PASCALS: 53,\n    //   HECTOPASCALS: 133,\n    //   KILOPASCALS: 54,\n    //   MILLIBARS: 134,\n    //   BARS: 55,\n    //   POUNDS_FORCE_PER_SQUARE_INCH: 56,\n    //   MILLIMETERS_OF_WATER: 206,\n    //   CENTIMETERS_OF_WATER: 57,\n    //   INCHES_OF_WATER: 58,\n    //   MILLIMETERS_OF_MERCURY: 59,\n    //   CENTIMETERS_OF_MERCURY: 60,\n    //   INCHES_OF_MERCURY: 61,\n    //   /* Temperature */\n    //   DEGREES_CELSIUS: 62,\n    //   DEGREES_KELVIN: 63,\n    //   DEGREES_KELVIN_PER_HOUR: 181,\n    //   DEGREES_KELVIN_PER_MINUTE: 182,\n    //   DEGREES_FAHRENHEIT: 64,\n    //   DEGREE_DAYS_CELSIUS: 65,\n    //   DEGREE_DAYS_FAHRENHEIT: 66,\n    //   DELTA_DEGREES_FAHRENHEIT: 120,\n    //   DELTA_DEGREES_KELVIN: 121,\n    //   /* Time */\n    //   YEARS: 67,\n    //   MONTHS: 68,\n    //   WEEKS: 69,\n    //   DAYS: 70,\n    //   HOURS: 71,\n    //   MINUTES: 72,\n    //   SECONDS: 73,\n    //   HUNDREDTHS_SECONDS: 158,\n    //   MILLISECONDS: 159,\n    //   /* Torque */\n    //   NEWTON_METERS: 160,\n    //   /* Velocity */\n    //   MILLIMETERS_PER_SECOND: 161,\n    //   MILLIMETERS_PER_MINUTE: 162,\n    //   METERS_PER_SECOND: 74,\n    //   METERS_PER_MINUTE: 163,\n    //   METERS_PER_HOUR: 164,\n    //   KILOMETERS_PER_HOUR: 75,\n    //   FEET_PER_SECOND: 76,\n    //   FEET_PER_MINUTE: 77,\n    //   MILES_PER_HOUR: 78,\n    //   /* Volume */\n    //   CUBIC_FEET: 79,\n    //   CUBIC_METERS: 80,\n    //   IMPERIAL_GALLONS: 81,\n    //   MILLILITERS: 197,\n    //   LITERS: 82,\n    //   US_GALLONS: 83,\n    //   /* Volumetric Flow */\n    //   CUBIC_FEET_PER_SECOND: 142,\n    //   CUBIC_FEET_PER_MINUTE: 84,\n    //   CUBIC_FEET_PER_HOUR: 191,\n    //   CUBIC_METERS_PER_SECOND: 85,\n    //   CUBIC_METERS_PER_MINUTE: 165,\n    //   CUBIC_METERS_PER_HOUR: 135,\n    //   IMPERIAL_GALLONS_PER_MINUTE: 86,\n    //   MILLILITERS_PER_SECOND: 198,\n    //   LITERS_PER_SECOND: 87,\n    //   LITERS_PER_MINUTE: 88,\n    //   LITERS_PER_HOUR: 136,\n    //   US_GALLONS_PER_MINUTE: 89,\n    //   US_GALLONS_PER_HOUR: 192,\n    //   /* Other */\n    //   DEGREES_ANGULAR: 90,\n    //   DEGREES_CELSIUS_PER_HOUR: 91,\n    //   DEGREES_CELSIUS_PER_MINUTE: 92,\n    //   DEGREES_FAHRENHEIT_PER_HOUR: 93,\n    //   DEGREES_FAHRENHEIT_PER_MINUTE: 94,\n    //   JOULE_SECONDS: 183,\n    //   KILOGRAMS_PER_CUBIC_METER: 186,\n    //   KW_HOURS_PER_SQUARE_METER: 137,\n    //   KW_HOURS_PER_SQUARE_FOOT: 138,\n    //   MEGAJOULES_PER_SQUARE_METER: 139,\n    //   MEGAJOULES_PER_SQUARE_FOOT: 140,\n    //   NO_UNITS: 95,\n    //   NEWTON_SECONDS: 187,\n    //   NEWTONS_PER_METER: 188,\n    //   PARTS_PER_MILLION: 96,\n    //   PARTS_PER_BILLION: 97,\n    //   PERCENT: 98,\n    //   PERCENT_OBSCURATION_PER_FOOT: 143,\n    //   PERCENT_OBSCURATION_PER_METER: 144,\n    //   PERCENT_PER_SECOND: 99,\n    //   PER_MINUTE: 100,\n    //   PER_SECOND: 101,\n    //   PSI_PER_DEGREE_FAHRENHEIT: 102,\n    //   RADIANS: 103,\n    //   RADIANS_PER_SECOND: 184,\n    //   REVOLUTIONS_PER_MINUTE: 104,\n    //   SQUARE_METERS_PER_NEWTON: 185,\n    //   WATTS_PER_METER_PER_DEGREE_KELVIN: 189,\n    //   WATTS_PER_SQUARE_METER_DEGREE_KELVIN: 141,\n    //   PER_MILLE: 207,\n    //   GRAMS_PER_GRAM: 208,\n    //   KILOGRAMS_PER_KILOGRAM: 209,\n    //   GRAMS_PER_KILOGRAM: 210,\n    //   MILLIGRAMS_PER_GRAM: 211,\n    //   MILLIGRAMS_PER_KILOGRAM: 212,\n    //   GRAMS_PER_MILLILITER: 213,\n    //   GRAMS_PER_LITER: 214,\n    //   MILLIGRAMS_PER_LITER: 215,\n    //   MICROGRAMS_PER_LITER: 216,\n    //   GRAMS_PER_CUBIC_METER: 217,\n    //   MILLIGRAMS_PER_CUBIC_METER: 218,\n    //   MICROGRAMS_PER_CUBIC_METER: 219,\n    //   NANOGRAMS_PER_CUBIC_METER: 220,\n    //   GRAMS_PER_CUBIC_CENTIMETER: 221,\n    //   BECQUERELS: 222,\n    //   MEGABECQUERELS: 224,\n    //   GRAY: 225,\n    //   MILLIGRAY: 226,\n    //   MICROGRAY: 227,\n    //   SIEVERTS: 228,\n    //   MILLISIEVERTS: 229,\n    //   MICROSIEVERTS: 230,\n    //   MICROSIEVERTS_PER_HOUR: 231,\n    //   DECIBELS_A: 232,\n    //   NEPHELOMETRIC_TURBIDITY_UNIT: 233,\n    //   PH: 234,\n    //   GRAMS_PER_SQUARE_METER: 235,\n    //   MINUTES_PER_DEGREE_KELVIN: 236,\n    //   /* Enumerated values 0-255 are reserved for definition by ASHRAE. */\n    //   /* Enumerated values 256-65535 may be used by others subject to */\n    //   /* the procedures and constraints described in Clause 23. */\n    //   /* The last enumeration used in this version is 236. */\n    //   // MAX_UNITS: 237,\n    //   /* do the proprietary range inside of enum so that\n    //              compilers will allocate adequate sized datatype for enum\n    //              which is used to store decoding */\n    //   // PROPRIETARY_RANGE_MIN: 256,\n    //   // PROPRIETARY_RANGE_MAX: 65535\n    // };\n","import { Colors, create } from 'logplease';\nimport * as Bacnet from 'node-bacnet';\nimport { PromiseActor } from '../../../../promise-actor';\nimport {\n  ADD_DEVICE,\n  ADD_POINT,\n  GET_BACNET_CLIENT,\n  GET_NETWORK_NODE,\n  GET_POINTS,\n  GET_PRESENT_VALUE,\n  REMOVE_DEVICE,\n  REMOVE_POINT,\n  SEND_PAYLOAD_TO_CHILD,\n  SEND_POINT_VALUE,\n  WRITE_PRESENT_VALUE,\n} from './bacnet-constant';\nimport { DeviceObject } from './interface';\n\nconst logger = create('bacnet-utils', { color: Colors.Grey });\n\nexport const singleton = new PromiseActor();\n\nexport default class BacnetUtils {\n  static getBacnetClient(networkNode): Bacnet {\n    if (networkNode && networkNode['subscribe']) {\n      return networkNode['subscribe'](this.createMessage(GET_BACNET_CLIENT));\n    } else {\n      logger.error('Network Node is not available on getBacnetClient');\n      return null;\n    }\n  }\n\n  static getPoints(deviceNode): Array<DeviceObject> {\n    if (deviceNode && deviceNode['subscribe']) {\n      return deviceNode['subscribe'](this.createMessage(GET_POINTS));\n    } else {\n      logger.error('Device Node is not available on getPoints');\n      return [];\n    }\n  }\n\n  static getPresentValue(deviceNode, payload): Promise<any> {\n    if (deviceNode && deviceNode['subscribe']) {\n      return deviceNode['subscribe'](this.createMessage(GET_PRESENT_VALUE, payload));\n    } else {\n      logger.error('Device Node is not available on getPresentValue');\n      return null;\n    }\n  }\n\n  static writePresentValue(deviceNode, payload) {\n    if (deviceNode && deviceNode['subscribe']) {\n      deviceNode['subscribe'](this.createMessage(WRITE_PRESENT_VALUE, payload));\n    } else {\n      logger.error('Device Node is not available on writePresentValue');\n    }\n  }\n\n  static getNetworkNode(parentNode): any {\n    if (parentNode && parentNode['subscribe']) {\n      return parentNode['subscribe'](this.createMessage(GET_NETWORK_NODE));\n    } else {\n      logger.error('Parent Node is not available on getNetworkNode');\n      return null;\n    }\n  }\n\n  static sendPayloadToChild(childNode, payload) {\n    if (childNode && childNode['subscribe']) {\n      childNode['subscribe'](this.createMessage(SEND_PAYLOAD_TO_CHILD, payload));\n    } else {\n      logger.error('Child Node is not available on sendPayloadToChild');\n    }\n  }\n\n  static sendPointValue(pointNode, payload) {\n    if (pointNode && pointNode['subscribe']) {\n      pointNode['subscribe'](this.createMessage(SEND_POINT_VALUE, payload));\n    } else {\n      logger.error('Point Node is not available on sendPointValue');\n    }\n  }\n\n  static addDevice(networkNode, payload) {\n    if (networkNode && networkNode['subscribe']) {\n      networkNode['subscribe'](this.createMessage(ADD_DEVICE, payload));\n    } else {\n      logger.error('Network Node is not available on addDevice');\n    }\n  }\n\n  static removeDevice(networkNode, payload) {\n    if (networkNode && networkNode['subscribe']) {\n      networkNode['subscribe'](this.createMessage(REMOVE_DEVICE, payload));\n    } else {\n      logger.error('Network Node is not available on removeDevice');\n    }\n  }\n\n  static addPoint(deviceNode, payload) {\n    if (deviceNode && deviceNode['subscribe']) {\n      deviceNode['subscribe'](this.createMessage(ADD_POINT, payload));\n    } else {\n      logger.error('Device Node is not available on addPoint');\n    }\n  }\n\n  static removePoint(deviceNode, payload) {\n    if (deviceNode && deviceNode['subscribe']) {\n      deviceNode['subscribe'](this.createMessage(REMOVE_POINT, payload));\n    } else {\n      logger.error('Device Node is not available on removePoint');\n    }\n  }\n\n  private static createMessage(action, payload = null): any {\n    return { action, payload };\n  }\n}\n","//\n// BACnet device implementation.\n// Utility functions.\n//\n\nconst bacnet = require('node-bacnet');\n\nclass Util {\n  /**\n   * Take an enum group and a value, and return the string text for that enum.\n   *\n   * @example\n   * // Both lines will output `PRESENT_VALUE`\n   * console.log(\n   *   getEnumName(\n   *     bacnet.enum.PropertyIdentifier,\n   *     bacnet.enum.PropertyIdentifier.PRESENT_VALUE\n   *   )\n   * );\n   * console.log(getEnumName(bacnet.enum.PropertyIdentifier, 85));\n   */\n  static getEnumName(group, value) {\n    return Object.keys(group).find(key => group[key] === value) + '(' + value + ')';\n  }\n\n  /**\n   * Helper function for property values.\n   */\n  static getPropName(propertyId) {\n    return Util.getEnumName(bacnet.enum.PropertyIdentifier, propertyId);\n  }\n}\n\nmodule.exports = Util;\n","module.exports = require(\"mqtt\");","import { PointOutput } from '../../../../backend/models/point-model';\nimport { IMessageSubscriber, NodeStoreItem, Observer } from '../../../../utils/pattern';\nimport { Container } from '../../../container';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport { GlobalNodeRegistry } from '../../../node-registry';\nimport CryptoUtils from '../../../utils/crypto-utils';\nimport { ConnectionOutput, DependantConnectionNode } from '../connection-node-mixin';\nimport { CentralizedPointOutputObserver, HasPointOutputObservers } from '../model/point-node';\nimport { ProtocolDeviceNode } from '../ProtocolDeviceNode';\nimport { DefaultMqttClient, MqttClientWrapper } from './core/mqtt-device';\nimport { MQTTMessage, SillyMqttPoint } from './core/mqtt-model';\nimport { MqttPointStoreItem, MqttPublisherStore, MqttSubscriberStore } from './mqtt-client-node-store';\n\nexport const MQTT_CLIENT_NODE = 'protocols/mqtt/mqtt-network';\nexport const REGISTER_MQTT_PUBLISHER = 'REGISTER_MQTT_PUBLISHER';\nexport const UNREGISTER_MQTT_PUBLISHER = 'UNREGISTER_MQTT_PUBLISHER';\nexport const UPDATE_MQTT_PUBLISHER = 'UPDATE_MQTT_PUBLISHER';\nexport const PUBLISH_MQTT_DATA = 'PUBLISH_MQTT_DATA';\nexport const REGISTER_MQTT_SUBSCRIBER = 'REGISTER_MQTT_SUBSCRIBER';\nexport const UPDATE_MQTT_SUBSCRIBER = 'UPDATE_MQTT_SUBSCRIBER';\nexport const UNREGISTER_MQTT_SUBSCRIBER = 'UNREGISTER_MQTT_SUBSCRIBER';\nexport const REGISTER_MQTT_POINT = 'REGISTER_MQTT_POINT';\nexport const UPDATE_MQTT_POINT = 'UPDATE_MQTT_POINT';\nexport const UNREGISTER_MQTT_POINT = 'UNREGISTER_MQTT_POINT';\n\nclass MqttCentralizedPointOutputObserver extends CentralizedPointOutputObserver<SillyMqttPoint> {\n\n  protected convert(data: PointOutput<SillyMqttPoint>): object {\n    let output = {};\n    output[data.point.identifier()] = {\n      publisherTopic : data.point.publishedTopic(),\n      subscriberTopic: data.point.subscribedTopic(),\n      pointValue     : data.point.pointValue,\n      status         : data.connStatus.status.label,\n      error          : data.connStatus.error,\n    };\n    return output;\n  }\n\n}\n\n/**\n * It resolves one mqtt client per host\n */\nclass MqttClientNode extends ProtocolDeviceNode implements HasPointOutputObservers<SillyMqttPoint>, IMessageSubscriber {\n\n  private readonly _oTopicsSlot = 2;\n  private publishers: MqttPublisherStore = new MqttPublisherStore();\n  private subscribers: MqttSubscriberStore = new MqttSubscriberStore();\n  private mqttClient: MqttClientWrapper = null;\n  //TODO: should implement queue properly\n  private retriedItems: { action: string; payload: any }[] = [];\n\n  constructor() {\n    super(`MQTT Network`, 'This node acts as a container for MQTT nodes. ' +\n                          'All MQTT nodes should be added within the MQTT-Network container. ' +\n                          'The MQTT broker details can be configured in settings.');\n    this.mixinEnableInputSetting();\n    this.addInputWithSettings('name', Type.STRING, 'nube-mqtt', 'MQTT Network');\n    this.settings['server'] = NodeSetting.create({ description: 'Broker URL', value: 'localhost', type: SettingType.STRING });\n    this.settings['port'] = NodeSetting.create({ description: 'Broker port', value: 1883, type: SettingType.NUMBER });\n    this.settings['authentication'] = NodeSetting.create({ description: 'Use Authentication', value: false, type: SettingType.BOOLEAN });\n    this.settings['username'] = NodeSetting.create({ description: 'User name', value: '', type: SettingType.STRING });\n    this.settings['password'] = NodeSetting.create({ description: 'Password', value: '', type: SettingType.PASSWORD });\n\n    this.setSettingsConfig({\n                             groups    : [\n                               { server: { weight: 3 }, port: { weight: 1 } },\n                               { enable: {}, authentication: {} },\n                               { username: {}, password: {} },\n                             ],\n                             conditions: {\n                               username: setting => !!setting['authentication'].value,\n                               password: setting => !!setting['authentication'].value,\n                             },\n                           });\n    this.addOutput('topics', Type.JSON);\n  }\n\n  private static createMqttConnectionOptions(settings: { [name: string]: NodeSetting }) {\n    const options: any = { host: settings['server'].value };\n\n    const port = settings['port'].value;\n    const username = settings['username'].value;\n    const password = settings['password'].value;\n\n    if (port != null) options.port = port;\n    if (username != null && username != '') options.username = username;\n    if (password != null && password != '') options.password = CryptoUtils.decrypt(password);\n    return options;\n  }\n\n  pointObservers(): Observer<PointOutput<SillyMqttPoint>>[] {\n    return [new MqttCentralizedPointOutputObserver(this, this._oTopicsSlot)];\n  }\n\n  listen({ action, payload }: { action: string; payload: NodeStoreItem }): any {\n    this.debugInfo(`Handling ${action}:${payload.identifier}...`);\n    switch (action) {\n      case REGISTER_MQTT_POINT:\n        return this.registerMqttPoint(payload);\n      case UPDATE_MQTT_POINT:\n        return this.updateMqttPoint(payload);\n      case UNREGISTER_MQTT_POINT:\n        return this.unregisterMqttPoint(payload);\n      case REGISTER_MQTT_PUBLISHER:\n        return this.publishers.register(payload);\n      case UPDATE_MQTT_PUBLISHER:\n        return this.publishers.update(payload, null, (p, force?: boolean) => this.afterUnregister(p, force));\n      case UNREGISTER_MQTT_PUBLISHER:\n        return this.publishers.unregister(payload, true, p => this.afterUnregister(p, true));\n      case REGISTER_MQTT_SUBSCRIBER:\n        return this.registerMqttSubscriber(payload);\n      case UPDATE_MQTT_SUBSCRIBER:\n        return this.updateMqttSubscriber(payload);\n      case UNREGISTER_MQTT_SUBSCRIBER:\n        return this.unregisterMqttSubscriber(payload);\n      case PUBLISH_MQTT_DATA:\n        return this.publishMqttData(payload);\n      default:\n        this.debugWarn('Request action doesn\\'t match');\n    }\n  }\n\n  connObserverNodes(): Observer<ConnectionOutput>[] {\n    let nodeIds = [...new Set(this.publishers.listNodeIds().concat(this.subscribers.listNodeIds()))];\n    return nodeIds.map(id => GlobalNodeRegistry.instance().get(id))\n                  .filter(n => n)\n                  .map(n => (<DependantConnectionNode><unknown>n).statusObserver());\n  }\n\n  isConnConnected(): boolean {\n    return this.mqttClient?.isConnected();\n  }\n\n  onReceiveMessage(msg: MQTTMessage): void {\n    if (this.side !== Side.server) return;\n    let subscribersByTopic = this.subscribers.lookup(msg.topic);\n    if (!subscribersByTopic) {\n      this.debug(`Not found any subscriber on MQTT topic '${msg.topic}'`);\n      return;\n    }\n    Object.entries(subscribersByTopic).forEach(([nodeId, val]) => {\n      if (!val?.enabled) {\n        return;\n      }\n      let node = GlobalNodeRegistry.instance().get(nodeId);\n      if (!node) {\n        this.debugWarn(`MQTT topic '${msg.topic}' is subscribed by Node ${nodeId} that not found`);\n        return;\n      }\n      try {\n        this.debugInfo(`Dispatch message on MQTT topic '${msg.topic}' to Node Id '${nodeId}'`);\n        val.func(msg.message);\n      } catch (e) {\n        this.debugWarn(`Message on MQTT topic '${msg.topic}' cannot be dispatched due to ${e}`);\n      }\n    });\n  }\n\n  protected createThenStart() {\n    const options = MqttClientNode.createMqttConnectionOptions(this.settings);\n    options.clientId = `mqttjs_wires_cid_${this.container.id}_id${this.id}`;\n    this.mqttClient = DefaultMqttClient.init(\n      options,\n      (client: MqttClientWrapper) => this.retryConnection(client),\n      (client: MqttClientWrapper, msg?: string) => this.updateClientStatus(client, msg),\n      (msg: MQTTMessage) => this.onReceiveMessage(msg),\n    );\n  }\n\n  protected stop(): void {\n    if (this.mqttClient) {\n      this.mqttClient.stop();\n      this.mqttClient = null;\n    }\n  }\n\n  private updateClientStatus(client: MqttClientWrapper, errMsg?: string): void {\n    this.notifyConnStatusOutput(this.getConnectionStatus(), errMsg);\n  }\n\n  private retryConnection(client: MqttClientWrapper): void {\n    this.debugInfo('Retry connection after MQTT client connected...');\n    //TODO dirty fix to avoid infinite loop\n    let count = 0,\n        max   = 500;\n    while (this.retriedItems.length > 0 && count < max) {\n      this.listen(this.retriedItems.shift());\n      count++;\n    }\n    this.updateClientStatus(client);\n  }\n\n  private publishMqttData(payload: NodeStoreItem): any {\n    if (this.side !== Side.server || !payload?.enabled) {\n      return null;\n    }\n    if (!this.isConnConnected()) {\n      payload.lenient = true;\n      this.retriedItems.push({ action: PUBLISH_MQTT_DATA, payload: payload });\n      return null;\n    }\n    let converter = this.publishers.lookup(payload?.identifier)?.func;\n    this.mqttClient.publish(payload?.identifier, converter ? converter(payload?.data) : payload?.data?.toString());\n    return payload?.data;\n  }\n\n  private registerMqttSubscriber(payload: NodeStoreItem) {\n    if (!this.isConnConnected()) {\n      payload.lenient = true;\n      this.retriedItems.push({ action: REGISTER_MQTT_SUBSCRIBER, payload: payload });\n      return;\n    }\n    this.subscribers.register(payload, p => this.mqttClient.subscribe(p?.identifier));\n  }\n\n  private unregisterMqttSubscriber(payload: NodeStoreItem) {\n    if (!this.isConnConnected()) {\n      payload.lenient = true;\n      this.retriedItems.push({ action: UNREGISTER_MQTT_SUBSCRIBER, payload: payload });\n      return;\n    }\n    this.subscribers.unregister(payload, true, p => {\n      this.mqttClientDoUnsubscribe(p);\n      this.afterUnregister(p, true);\n    });\n  }\n\n  private updateMqttSubscriber(payload: NodeStoreItem) {\n    if (!this.isConnConnected()) {\n      payload.lenient = true;\n      this.retriedItems.push({ action: UPDATE_MQTT_SUBSCRIBER, payload: payload });\n      return;\n    }\n    this.subscribers.update(payload, p => this.mqttClient.subscribe(p?.identifier),\n                            (p, force?: boolean) => {\n                              this.mqttClientDoUnsubscribe(p);\n                              this.afterUnregister(p, force);\n                            });\n  }\n\n  private mqttClientDoUnsubscribe(payload: NodeStoreItem) {\n    if (!this.subscribers.has(payload.identifier, (k, v) => v?.enabled)) {\n      this.mqttClient.unsubscribe(payload?.identifier);\n    }\n  }\n\n  private registerMqttPoint(payload: NodeStoreItem) {\n    let item = payload as MqttPointStoreItem;\n    let d = this.listen({ action: REGISTER_MQTT_PUBLISHER, payload: item.toPublisher() });\n    this.listen({ action: REGISTER_MQTT_SUBSCRIBER, payload: item.toSubscriber() });\n    return d;\n  }\n\n  private unregisterMqttPoint(payload: NodeStoreItem) {\n    let item = payload as MqttPointStoreItem;\n    let d = this.listen({ action: UNREGISTER_MQTT_PUBLISHER, payload: item.toPublisher() });\n    this.listen({ action: UNREGISTER_MQTT_SUBSCRIBER, payload: item.toSubscriber() });\n    this.afterUnregister(payload, true);\n    return d;\n  }\n\n  private updateMqttPoint(payload: NodeStoreItem) {\n    let item = payload as MqttPointStoreItem;\n    try {\n      return this.listen({ action: UPDATE_MQTT_PUBLISHER, payload: item.toPublisher() });\n    } finally {\n      this.listen({ action: UPDATE_MQTT_SUBSCRIBER, payload: item.toSubscriber() });\n    }\n  }\n\n  private afterUnregister(payload: NodeStoreItem, force: boolean): void {\n    if (force) {\n      let output = this.outputs[this._oTopicsSlot].data;\n      if (output) {\n        delete output[payload.identifier];\n      }\n      this.setOutputData(this._oTopicsSlot, output);\n    }\n  }\n}\n\nContainer.registerNodeType(MQTT_CLIENT_NODE, MqttClientNode);\n","module.exports = require(\"cron\");","module.exports = require(\"cronstrue\");","import { Database } from '../database/database';\nimport { ContainerRegistry } from '../nodes/container';\nimport { createNodeDbHelper, NodeDbHelper } from '../nodes/node-db-helper';\nimport { ContainerRegistryMetadata, IContainer, INode } from '../nodes/node-interface';\nimport { SlimNodeIO } from '../nodes/node-link';\nimport Utils from '../nodes/utils';\nimport { isFunction, isNotNull, isNull } from '../utils/helper';\nimport { LinkResult } from './link-result';\nimport { ContainerRegistryValidator, NodeRegistryValidator } from './validator';\n\nexport interface LinkInputVisitor {\n  visit(c: IContainer, n: INode, ioKey: string, io: SlimNodeIO): void;\n}\n\nexport interface LinkOutputVisitor {\n  visit(c: IContainer, n: INode, ioKey: string, ios: SlimNodeIO[]): void;\n}\n\nexport interface LinkNodeVisitor<V extends any | Promise<any>> {\n  visit(c: IContainer, n: INode): V;\n}\n\ninterface LinkContainerVisitor {\n  visit(c: IContainer): void;\n}\n\nexport interface LinkResultVisitor<T extends LinkResult | Promise<LinkResult>> {\n\n  readonly registry: ContainerRegistryMetadata;\n\n  inputVisitor(): LinkInputVisitor;\n\n  outputVisitor(): LinkOutputVisitor;\n\n  nodeVisitor(): LinkNodeVisitor<any | Promise<any>>;\n\n  containerVisitor(): LinkContainerVisitor;\n\n  visit(result: LinkResult): T;\n\n}\n\nclass BaseNodeLinkVisitor<V extends any | Promise<any>> implements LinkNodeVisitor<V> {\n\n  private readonly fn: (c: IContainer, n: INode) => V;\n\n  constructor(fn?: (c: IContainer, n: INode) => V) {\n    this.fn = fn;\n  }\n\n  visit(c: IContainer, n: INode): V {\n    n.isUpdated = true;\n    return isFunction(this.fn) ? this.fn(c, n) : null;\n  }\n}\n\nabstract class DefaultLinkVisitor<T extends LinkResult | Promise<LinkResult>> implements LinkResultVisitor<T> {\n\n  readonly registry: ContainerRegistryMetadata;\n\n  protected constructor(registry?: ContainerRegistryMetadata) {\n    this.registry = registry ?? ContainerRegistry.instance();\n  }\n\n  abstract nodeVisitor(): LinkNodeVisitor<void | Promise<void>>;\n\n  abstract visit(result: LinkResult): T;\n\n  containerVisitor(): LinkContainerVisitor {\n    return new class implements LinkContainerVisitor {\n      visit(c: IContainer): void {\n      }\n    };\n  }\n\n  inputVisitor(): LinkInputVisitor {\n    return new class implements LinkInputVisitor {\n      visit(c: IContainer, n: INode, ioKey: string, io: SlimNodeIO): void {\n        n.inputs[ioKey].link = io;\n        if (isNotNull(io)) {\n          n.inputs[ioKey].updated = true;\n          n.inputs[ioKey].data = Utils.parseValue(c.nodeRegistry().get(io.nodeId)?.outputs[io.ioId]?.data,\n                                                  n.inputs[ioKey].type);\n        }\n      }\n    };\n  }\n\n  outputVisitor(): LinkOutputVisitor {\n    return new class implements LinkOutputVisitor {\n      visit(c: IContainer, n: INode, ioKey: string, ios: SlimNodeIO[]): void {\n        if (isNotNull(n.outputs[ioKey])) {\n          n.outputs[ioKey].links = ios;\n        }\n      }\n    };\n  }\n\n  protected perNode(d: { nid: number | string; inputs: { [p: string]: SlimNodeIO }; outputs: { [p: string]: SlimNodeIO[] } },\n                    c: IContainer): Promise<any> | any {\n    const n = NodeRegistryValidator.check(d.nid, c.nodeRegistry(), false);\n    if (isNull(n)) {\n      return;\n    }\n    const inputVisitor = this.inputVisitor();\n    const outputVisitor = this.outputVisitor();\n    Object.keys(d.inputs).forEach(k => inputVisitor.visit(c, n, k, d.inputs[k]));\n    Object.keys(d.outputs).forEach(k => outputVisitor.visit(c, n, k, d.outputs[k]));\n    return this.nodeVisitor().visit(c, n);\n  }\n\n}\n\nexport class BackendLinkVisitor extends DefaultLinkVisitor<Promise<LinkResult>> {\n  private readonly dbHelper: NodeDbHelper;\n  private readonly db: Database;\n\n  constructor(registry?: ContainerRegistryMetadata, dbHelper?: NodeDbHelper) {\n    super(registry);\n    this.dbHelper = dbHelper ?? createNodeDbHelper();\n    this.db = this.registry.rootContainer()['db'];\n  }\n\n  nodeVisitor(): LinkNodeVisitor<Promise<any>> {\n    return new BaseNodeLinkVisitor((c, n) => this.dbHelper.updateAsync(this.db, n, 'inputs', 'outputs'));\n  }\n\n  visit(result: LinkResult): Promise<LinkResult> {\n    return Promise.all(Object.keys(result.result())\n                             .map(cid => ContainerRegistryValidator.check(cid, this.registry, false))\n                             .filter(c => isNotNull(c))\n                             .map(c => Promise.all(Object.values(result.result()[c.id]).map(d => this.perNode(d, c)))\n                                              .then(_ => this.containerVisitor().visit(c))))\n                  .then(_ => result);\n  }\n\n}\n\nexport class FrontendLinkVisitor extends DefaultLinkVisitor<LinkResult> {\n\n  private readonly fn: (c: IContainer) => void;\n\n  constructor(fn: (c: IContainer) => void, registry?: ContainerRegistryMetadata) {\n    super(registry);\n    this.fn = fn;\n  }\n\n  nodeVisitor(): LinkNodeVisitor<void> {\n    return new BaseNodeLinkVisitor<void>();\n  }\n\n  containerVisitor(): LinkContainerVisitor {\n    const that = this;\n    return new class implements LinkContainerVisitor {\n      visit(c: IContainer): void {\n        that.fn(c);\n      }\n    };\n  }\n\n  visit(result: LinkResult): LinkResult {\n    Object.keys(result.result())\n          .map(cid => ContainerRegistryValidator.check(cid, this.registry, false))\n          .filter(c => isNotNull(c))\n          .forEach(c => {\n            Object.values(result.result()[c.id]).forEach(d => this.perNode(d, c));\n            this.containerVisitor().visit(c);\n          });\n    return result;\n  }\n\n}\n\n","module.exports = require(\"@hapi/joi\");","import { isEmpty } from '../utils/helper';\n\nexport const TWEAK_POS: [number, number] = [50, -100];\n\nexport class Shape2D {\n\n  static isDisplayable(size: [number, number]) {\n    return !isEmpty(size) && size[0] > 0 && size[1] > 0;\n  }\n\n  /**\n   * Calculate distance\n   * @param pos1\n   * @param pos2\n   * @returns {number}\n   */\n  static distance(pos1: [number, number], pos2: [number, number]): number {\n    const relative = Shape2D.relative(pos1, pos2);\n    return Math.sqrt(Math.pow(relative[0], 2) + Math.pow(relative[1], 2));\n  }\n\n  static relative(pos1: [number, number], pos2: [number, number]): [number, number] {\n    const p1 = Shape2D.guard(pos1);\n    const p2 = Shape2D.guard(pos2);\n    return [p2[0] - p1[0], p2[1] - p1[1]];\n  }\n\n  static bottomRight(size: [number, number], pos: [number, number]): [number, number] {\n    const s = Shape2D.guard(size);\n    const p = Shape2D.guard(pos);\n    return [p[0] + s[0], p[1] + s[1]];\n  }\n\n  static move(relative: [number, number], origin: [number, number]): [number, number];\n  static move(relative: [number, number], origin: [number, number], size: [number, number]): [number, number];\n  static move(relative: [number, number], origin: [number, number], size?: [number, number]): [number, number] {\n    const p1 = Shape2D.bottomRight(size, origin);\n    const p2 = Shape2D.guard(relative);\n    return [p1[0] + p2[0], p1[1] + p2[1]];\n  }\n\n  static avgPos(positions: [number, number][]): [number, number] {\n    return positions.map(pos => Shape2D.guard(pos))\n                    .reduce((avg, pos, _, { length }) => [avg[0] + pos[0] / length, avg[1] + pos[1] / length], [0, 0]);\n  }\n\n  static isInside(size: [number, number], pos: [number, number], eventPos: [number, number]): boolean {\n    const bottomRightPos = this.bottomRight(size, pos);\n    return eventPos[0] >= pos[0] && eventPos[0] <= bottomRightPos[0] &&\n           eventPos[1] >= pos[1] && eventPos[1] <= bottomRightPos[1];\n  }\n\n  static guard(pos: [number, number], fallbackX: number = 0, fallbackY: number = 0): [number, number] {\n    const x = fallbackX ?? 0;\n    const y = fallbackY ?? 0;\n    if (isEmpty(pos)) {\n      return [x, y];\n    }\n    return [pos[0] ?? x, pos[1] ?? y];\n  }\n\n  /**\n   * Compute is shape inside a rectangle\n   * @param x\n   * @param y\n   * @param left\n   * @param top\n   * @param width\n   * @param height\n   * @returns {boolean}\n   */\n  static isInsideRectangle(x: number, y: number, left: number, top: number, width: number, height: number): boolean {\n    return left < x && left + width > x && top < y && top + height > y;\n  }\n\n  /**\n   * Compute is bounding overlap\n   * @param a\n   * @param b\n   * @returns {boolean}\n   */\n  static overlapBounding([aLeft, aBottom, aRight, aTop]: [number, number, number, number],\n                         [bLeft, bBottom, bRight, bTop]: [number, number, number, number]): boolean {\n    return !(aLeft > bRight || aBottom > bTop || aRight < bLeft || aTop < bBottom);\n  }\n\n  /**\n   * Solve quadratic equation\n   * @param a\n   * @param b\n   * @param c\n   * @param d\n   * @returns {x1: number, x2: number, x3: number}\n   */\n  static quadraticEquationSolver(a: number, b: number, c: number, d: number): { x1: number, x2: number, x3: number } {\n    const delta = b * b - 3 * a * c;\n    const k = (9 * a * b * c - 2 * b * b * b - 27 * a * a * d) / (2 * Math.sqrt(Math.pow(Math.abs(delta), 3)));\n    let result;\n    if (delta > 0) {\n      if (Math.abs(k) <= 1) {\n        result = {\n          x1: (2 * Math.sqrt(delta) * Math.cos(Math.acos(k) / 3) - b) / (3 * a),\n          x2: (2 * Math.sqrt(delta) * Math.cos((Math.acos(k) / 3) - (2 * Math.PI) / 3) - b) / (3 * a),\n          x3: (2 * Math.sqrt(delta) * Math.cos((Math.acos(k) / 3) + (2 * Math.PI) / 3) - b) / (3 * a),\n        };\n      }\n      if (Math.abs(k) > 1) {\n        const x = ((Math.sqrt(delta) * Math.abs(k)) / (3 * a * k)) *\n                  (Math.cbrt(Math.abs(k) + Math.sqrt(k * k - 1)) + Math.cbrt(Math.abs(k) - Math.sqrt(k * k - 1))) - b /\n                  (3 * a);\n        result = { x1: x, x2: x, x3: x };\n      }\n    }\n    if (delta === 0) {\n      const x = (-b + Math.cbrt(b * b * b - 27 * a * a * d)) / (3 * a);\n      result = { x1: x, x2: x, x3: x };\n    }\n    if (delta < 0) {\n      const x = (Math.sqrt(Math.abs(delta)) / (3 * a)) *\n                (Math.cbrt(k + Math.sqrt(k * k + 1)) + Math.cbrt(k - Math.sqrt(k * k + 1))) - b / (3 * a);\n      result = { x1: x, x2: x, x3: x };\n    }\n    return result;\n  }\n}\n","import { Node } from '../nodes/node';\nimport { DispatcherRegistry } from './DispatcherRegistry';\nimport { PubSubHelpers } from './PubSubHelpers';\n\nexport abstract class DispatchNode extends Node {\n  /**\n   * `@Dispatch` will call it: for listening dispatched value\n   * @param {any} value - value got from `@Dispatch`\n   */\n  abstract subscribe(value: any): void;\n\n  /**\n   * For listening store protocol, point changes\n   */\n  abstract updateProtocols(): void;\n\n  abstract getSelectedProtocol(): string;\n\n  abstract getSelectedPoint(): string;\n\n  abstract getSelectedPointName(): string;\n\n  onAdded() {\n    super.onAdded();\n    DispatcherRegistry.instance().register(this, true);\n    PubSubHelpers.map(this);\n  }\n\n  onRemoved() {\n    DispatcherRegistry.instance().remove(this);\n    PubSubHelpers.unMap(this);\n  }\n}\n","import { AbstractRegistry } from '../nodes/registry';\nimport { IdGenerator } from '../utils/id-generator';\nimport { DispatchNode } from './DispatchNode';\n\nexport class DispatcherRegistry extends AbstractRegistry<DispatchNode> {\n  private static _instance: DispatcherRegistry;\n\n  private constructor() {\n    super();\n  }\n\n  public static instance(): DispatcherRegistry {\n    if (!DispatcherRegistry._instance) {\n      DispatcherRegistry._instance = new DispatcherRegistry();\n    }\n    return DispatcherRegistry._instance;\n  }\n\n  protected createKey(node: DispatchNode): string | number {\n    return IdGenerator.createNodeId(node.cid, node.id);\n  }\n\n  protected itemName(): string {\n    return 'Dispatcher Node';\n  }\n}\n","import { DispatcherRegistry } from './DispatcherRegistry';\nimport { DispatchNode } from './DispatchNode';\nimport { IPubSub, Store } from './IPubSub';\n\n/**\n * Example:\n * {\n *   \"protocol1\": {\n *     \"points\": {\n *       \"point1\": { msg: <any>, name: 'Point1', listener: [{node: node1, soft: true}, {node: node2, soft: false}, ...]},\n *       \"point2\": { msg: <any> , name: 'Point2', listener: [{node: node1, soft: true}, {node: node2, soft: false}, ...]}\n *     },\n *   },\n *   \"protocol2\": {\n *     \"points\": {\n *       \"point1\": { msg: <any>, name: 'Point1', listener: [{node: node1, soft: true}, {node: node2, soft: false}, ...]},\n *       \"point2\": { msg: <any>, name: 'Point2', listener: [{node: node1, soft: true}, {node: node2, soft: false}, ...]}\n *     },\n *   }\n * }\n */\nclass PubSub implements IPubSub {\n  store: Store = {};\n\n  public getStore(): Store {\n    return this.store;\n  }\n\n  public addPoint(protocol: string, point: string, name: string, soft: boolean): void {\n    if (!this.store[protocol]) {\n      this.store[protocol] = { points: {} };\n    }\n    if (!this.store[protocol].points[point]) {\n      this.store[protocol].points[point] = { msg: {}, name, listeners: [], soft };\n    } else {\n      // Point exist already and soft is true and now it's inserted in real\n      if (this.store[protocol].points[point].soft && !soft) {\n        this.store[protocol].points[point].soft = soft;\n      }\n    }\n    this.updateProtocols();\n  }\n\n  public removePoint(protocol: string, point: string): void {\n    if (this.store[protocol]?.points?.[point]) {\n      delete this.store[protocol].points[point];\n    }\n    if (Object.keys(this.store[protocol]?.points || {})?.length === 0) {\n      delete this.store[protocol];\n    }\n    this.updateProtocols();\n  }\n\n  public renamePoint(protocol: string, point: string, name: string): void {\n    if (this.store?.[protocol]?.points?.[point]) {\n      this.store[protocol].points[point].name = name;\n    }\n    this.updateProtocols();\n  }\n\n  public dispatch(protocol: string, point: string, value: any): void {\n    if (this.store[protocol]?.points?.[point]) {\n      this.store[protocol].points[point].msg = value;\n      this.store[protocol].points[point].listeners.forEach(node => {\n        node.subscribe(value);\n      });\n    }\n  }\n\n  public connect(protocol: string, point: string, name: string, node: DispatchNode): void {\n    // Remove if it's subscribing to any\n    Object.keys(this.store).forEach(protocol => {\n      Object.keys(this.store[protocol].points).forEach(point => {\n        this.store[protocol].points[point].listeners = this.store[protocol].points[point].listeners.filter(\n          n => !(n.cid === node.cid && n.id === node.id),\n        );\n      });\n    });\n    if (!(protocol && point && name)) return;\n    this.addPoint(protocol, point, name, true);\n    this.store[protocol].points[point].listeners.push(node);\n    node.subscribe(this.store[protocol].points[point].msg);\n  }\n\n  public disconnect(protocol: string, point: string, node: DispatchNode): void {\n    if (this.store[protocol]?.points?.[point]) {\n      const storePoint = this.store[protocol].points[point];\n      storePoint.listeners = storePoint.listeners.filter(n => !(n.cid === node.cid && n.id === node.id));\n    }\n  }\n\n  private updateProtocols() {\n    DispatcherRegistry.instance().list().forEach(n => n.updateProtocols());\n  }\n}\n\nexport const pubSubSingleton: IPubSub = new PubSub();\n","import { AxiosResponse, default as axios } from 'axios';\nimport { get } from 'lodash';\nimport config from '../config';\nimport { Entry } from './entry';\n\nexport abstract class Api<T extends Entry> {\n  protected client = axios.create({ baseURL: config.backendSync.baseUrl });\n\n  abstract list(objId?: string): Promise<T[]>;\n\n  abstract get(objId: string): Promise<T[]>;\n\n  abstract create(obj: T, parentId?: string): Promise<any>;\n\n  abstract update(obj: T, objId?: string): Promise<any>;\n\n  abstract delete(objId: string): Promise<any>;\n\n  abstract factoryEntry(): T;\n\n  protected fetchMany(url: string, respKey?: string): Promise<T[]> {\n    return this.client.get(url).then(this.extractData(respKey)).then(this.assignAllTo(() => this.factoryEntry()));\n  }\n\n  protected fetchOne(url: string, respKey?: string) {\n    return this.client.get(url).then(this.extractData(respKey)).then(p => Object.assign(this.factoryEntry(), p));\n  }\n\n  protected newEntry<T>(c: new () => T): T {\n    return new c();\n  }\n\n  protected extractData<T>(path: string = null) {\n    return (response: AxiosResponse<T>) => (path ? get(response.data, path) : response.data);\n  }\n\n  /**\n   * Create a provided class instance using a factory method, for all given elements, and merge each element\n   * into the class instance.\n   *\n   * Higher-order function\n   */\n  protected assignAllTo<T>(factory: () => T) {\n    return (properties: any[]): T[] => properties.map(p => Object.assign(factory(), p));\n  }\n}\n","import { get, isEqual } from 'lodash';\nimport { Api } from '../../../../backend/api';\nimport { Entry } from '../../../../backend/entry';\nimport config from '../../../../config';\nimport { singleton as actor } from '../../../../promise-actor';\nimport { IOT_TYPES } from '../../../constants';\nimport { ContainerNode } from '../../../container-node';\nimport { BROADCAST, Node } from '../../../node';\nimport { NodeFactory } from '../../../node-factory';\nimport { SerializedNode, Side } from '../../../node-interface';\nimport { NodeSetting, SettingType } from '../../../node-io';\nimport EntryNode from './entry-node';\nimport Mixin from './mixin';\n\n/**\n *\n * @param <T> Type of the Entry that this container manages\n */\nexport default abstract class ApiContainerNode<T extends Entry> extends ContainerNode implements EntryNode<T> {\n  extra_node_types = this.childNodeType().filter(v => IOT_TYPES.includes(v));\n  properties: {\n    entry: T;\n    is_protected: boolean;\n  };\n  clonable = false;\n  movable = false;\n  settingFields: {};\n  entry = Mixin.prototype.entry.bind(this);\n  entryId = Mixin.prototype.entryId.bind(this);\n  deactivate = Mixin.prototype.deactivate.bind(this);\n  createSettingForm = Mixin.prototype.createSettingForm.bind(this);\n  getTakenIdentifiers = Mixin.prototype.getTakenIdentifiers.bind(this);\n  makeIdentifier = Mixin.prototype.makeIdentifier.bind(this);\n  findFreeIdentifier = Mixin.prototype.findFreeIdentifier.bind(this);\n  protected api: Api<T>;\n\n  constructor() {\n    super();\n    this.description = 'placeholder'; // FIXME\n    this.api = this.initAPI();\n    this.settings['name'] = NodeSetting.create({\n                                                 description: 'Entry',\n                                                 value: this.title,\n                                                 type: SettingType.READONLY,\n                                               });\n  }\n\n  abstract namePrefix(): string;\n\n  abstract createEntry(): Promise<T>;\n\n  entryFactory(): T {\n    return this.api.factoryEntry();\n  }\n\n  updateEntry(body: T): Promise<any> {\n    return this.api.update(body, this.entryId());\n  }\n\n  deleteEntry(): Promise<any> {\n    return this.api.delete(this.entryId());\n  }\n\n  onAdded() {\n    Mixin.prototype.onAdded.call(this);\n    super.onAdded();\n  }\n\n  applyEntry(entry: T) {\n    Mixin.prototype.applyEntry.call(this, entry);\n    this.applyTitle();\n    this.broadcastTitleToClients();\n  }\n\n  onAfterSettingsChange(old) {\n    Mixin.prototype.onAfterSettingsChange.call(this);\n    super.onAfterSettingsChange(old);\n  }\n\n  onCreated() {\n    super.onCreated();\n    const namePrefix = this.namePrefix();\n    const nameSuffix = this.entry() ? ' ' + this.entryId() : '';\n    this.settings['name'].value = namePrefix + nameSuffix;\n    Mixin.prototype.onCreated.call(this);\n  }\n\n  onRemoved() {\n    Mixin.prototype.onRemoved.call(this);\n  }\n\n  shouldRejectNodeType(type: string): boolean {\n    // reject all IoT nodes as children, except the correct hierarchical child node type. Allow all others\n    return !this.childNodeType().includes(type);\n  }\n\n  syncWithBackend() {\n    if (this.side !== Side.server) return;\n    actor.process(() => this.fetchChildren().then(children => {\n                    const childIds = children.map(v => v.entryId());\n                    const childNodes = this.collectChildNodes(this.sub_container.getNodes()).map(\n                      n => n as EntryNode<Entry>);\n                    const existingChildNodes = childNodes.filter(n => childIds.includes(n.entryId()));\n                    const obsoleteChildNodes = childNodes.filter(\n                      n => !n.properties.is_protected && !childIds.includes(n.entryId()),\n                    );\n                    Promise.all(obsoleteChildNodes.map(n => {\n                      n.deactivate();\n                      //TODO not yet send to client\n                      return n.container.nodeRegistry().remove(n);\n                    })).then(_ => this.processNextChildEntry(children, existingChildNodes));\n                  }),\n    );\n  }\n\n  onGetMessageToEditorSide({ action, payload }) {\n    super.onGetMessageToEditorSide({ action, payload, key: null });\n    if (action === BROADCAST.UPDATE_TITLE) this.applyTitle();\n  }\n\n  protected applyTitle() {\n    super.applyTitle();\n    this.container.runWithEditor(e => {\n      if (get(e, 'renderer.container.id') === this.container.id) {\n        e.emit('rerender-siderbar-containers');\n      }\n    });\n  }\n\n  protected abstract initAPI(): Api<T>;\n\n  protected abstract childNodeType(): string[];\n\n  /**\n   * Fetch all current child entries of the main entry from the remote API\n   */\n  protected abstract fetchChildren(): Promise<Entry[]>;\n\n  /**\n   * When given an array of child-nodes, returns only the nodes that manage child entries of the main entry\n   */\n  protected abstract collectChildNodes(nodes: Node[]): Node[];\n\n  /**\n   * Recursively and asynchronously processes the next of the remaining entries from the remote API\n   */\n  protected processNextChildEntry(remaining: Entry[], childNodes: EntryNode<Entry>[]) {\n    if (!remaining || remaining.length === 0) return;\n    const entry = remaining.pop();\n    let existingNode = childNodes.find(node => node.entryId() === entry.entryId());\n    const callback = () => {\n      if (existingNode instanceof ApiContainerNode) {\n        (<ApiContainerNode<any>>existingNode).syncWithBackend();\n      }\n      this.processNextChildEntry(remaining, childNodes);\n    };\n    if (!existingNode) {\n      // console.log('Creating child node for ' + this.title + ' ' + (entry.entryId() || ''));\n      const maxVerticalPosition = Math.max(100, ...this.sub_container.getNodes(false).map(n => n.pos[1]));\n      const pos: [number, number] = [250, maxVerticalPosition + config.backendSync.nodeDistance];\n      // existingNode is used above! Leave this reassignment:\n      this.sub_container.nodeRegistry()\n          .register(NodeFactory.create(<SerializedNode>{ type: entry.nodeType(), properties: { entry }, pos }, true))\n          .then(n => {\n            existingNode = <EntryNode<Entry>>n;\n            callback();\n          });\n    } else if (!isEqual(existingNode.entry(), entry)) {\n      // console.log('Found existing node with outdated entry, updating...');\n      existingNode.applyEntry(entry);\n      existingNode.persistConfiguration(callback);\n    } else {\n      callback();\n    }\n  }\n}\n","import { Entry } from '../../../../backend/entry';\nimport ApiContainerNode from './api-container-node';\n\n/**\n * Container node that contains a collection of API synced child nodes, but has itself no entity\n * or parent\n */\nexport default abstract class TopLevelApiContainerNode<C extends Entry> extends ApiContainerNode<C> {\n  settingFields = {};\n\n  entryFactory = () => null;\n\n  applyEntry = () => {\n    // Top level container's entry is always 'null'\n    this.title = this.namePrefix();\n    this.sub_container.name = this.title;\n  };\n\n  onAdded = () => {\n    this.ignore_remove = true;\n    this.removable = false;\n    this.movable = false;\n    this.applyEntry();\n    this.syncWithBackend();\n  };\n\n  createEntry = () => Promise.resolve(null);\n\n  updateEntry = (body: any) => Promise.resolve(null);\n\n  deleteEntry = () => Promise.resolve(null);\n\n  namePrefix = () => this.title;\n\n  getTakenIdentifiers = () => Promise.resolve([]);\n\n  makeIdentifier = (n: number): string => null;\n\n  findFreeIdentifier = (): Promise<string> => Promise.resolve(null);\n}\n","module.exports = require(\"lodash-decorators/debounce\");","module.exports = require(\"socket.io\");","import app from '../app';\n\nconst schemaMiddleware = (schema, property) => {\n  return (req, res, next) => {\n    const { error } = schema.validate(req[property]);\n    const valid = error == null;\n    if (valid) {\n      next();\n    } else {\n      const { details } = error;\n      const message = details.map(i => i.message).join(',');\n      res.status(422).json({ error: message });\n    }\n  };\n};\n\nconst isAuthenticated = async (token: string): Promise<boolean> => {\n  try {\n    await app.db.isAuthenticated(token);\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n\nconst authMiddleware = () => {\n  return async (req, res, next) => {\n    const token = req.headers['token'];\n    if (!token) {\n      res.status(403).json({ error: 'Please provide token' });\n      return;\n    }\n    if (await isAuthenticated(token)) {\n      next();\n    } else {\n      res.status(403).json({ error: 'Please provide valid token' });\n    }\n  };\n};\n\nexport { schemaMiddleware, authMiddleware };\n","import { Response } from 'express';\nimport { NotFoundError } from '../../../utils/errors';\nimport { isNotNull } from '../../../utils/helper';\nimport { reliability_logger } from '../../../utils/loggers';\nimport { EditorServerSocket } from '../../editor-server-socket';\nimport { ApiResult } from '../../../shared/api-result';\n\nexport abstract class ApiHandler {\n  protected readonly editorSocket: EditorServerSocket;\n\n  protected constructor(editorSocket: EditorServerSocket) {\n    this.editorSocket = editorSocket;\n  }\n\n  protected emitSuccess(resp: Response, event: string, result: ApiResult<any>, code: number = 200) {\n    this.editorSocket.io.emit(event, result.result());\n    return resp.status(code).send(result.message);\n  }\n\n  protected emitError(resp: Response, err: Error, event: string, errorFunc?: (e: Error) => number) {\n    reliability_logger.warn(err.stack ?? err.message);\n    return resp.status(err instanceof NotFoundError ? 404 : isNotNull(errorFunc) ? errorFunc(err) : 400)\n               .send(`Can't ${event.toLowerCase()}. Reason: ${err}`);\n  }\n}\n","import { ContainerRegistry } from '../../nodes/container';\nimport { NodeFactory } from '../../nodes/node-factory';\nimport {\n  ContainerRegistryMetadata,\n  IContainer,\n  IFolderNode,\n  INode,\n  isFolderNode,\n  SerializedContainer,\n  SerializedNode,\n} from '../../nodes/node-interface';\nimport { NodeRegistryHelper } from '../../nodes/node-registry';\nimport { CreationResult, initETLResult, RemoveResult } from '../../shared/etl-result';\nimport { ContainerRegistryValidator } from '../../shared/validator';\nimport { isNotNull } from '../../utils/helper';\nimport { IdGenerator } from '../../utils/id-generator';\nimport { NodeService } from './node-service';\n\nexport class NodeCRUDService extends NodeService {\n\n  getNodes(parent: number | string | IContainer, registry?: ContainerRegistryMetadata): Promise<SerializedContainer> {\n    const reg = registry ?? this.cRegistry;\n    const db = reg.rootContainer()['db'];\n    return ContainerRegistryValidator.mustExisted(parent, reg)\n                                     .then(c => this.dbHelper.listByContainer(db, c.id)\n                                                    .then(nodes => this.getNodesInContainer(db, nodes))\n                                                    .then(nodes => <SerializedContainer>{\n                                                      id: c.id,\n                                                      name: c.name,\n                                                      serializedNodes: nodes,\n                                                    }));\n  }\n\n  createNode(parent: number | IContainer, node: SerializedNode,\n             registry?: ContainerRegistryMetadata): Promise<CreationResult> {\n    this.logger.info(`Creating new node ${node.type} in container ${parent}`);\n    const reg = registry ?? this.cRegistry;\n    return ContainerRegistryValidator.mustExisted(parent, reg)\n                                     .then(p => p.nodeRegistry().register(NodeFactory.create(node, true, registry)))\n                                     .then(n => new CreationResult(n));\n  }\n\n  removeNodes(parent: number | IContainer, nodes: (number | SerializedNode | INode)[],\n              recursive: boolean = false, metadata?: ContainerRegistryMetadata): Promise<RemoveResult> {\n    const registry = metadata ?? this.cRegistry;\n    const db = registry.rootContainer()['db'];\n    const v = ContainerRegistryValidator.mustExisted(parent, registry);\n    return v.then(p => {\n      const findNodes = this.findNodes(p, nodes, recursive, registry);\n      return this.dbHelper.batchDeleteByIds(db, findNodes.map(n => IdGenerator.createNodeId(n.cid, n.id)))\n                 .then(_ => NodeRegistryHelper.unregister(p, findNodes, registry, true))\n                 .then(r => initETLResult<RemoveResult>(RemoveResult, p.id, findNodes.length, r));\n    });\n  }\n\n  private findNodes(p: IContainer, nodes: (number | SerializedNode | INode)[], recursive: boolean,\n                    registry: ContainerRegistryMetadata): SerializedNode[] {\n    const list = NodeFactory.standardize(p, nodes);\n    if (!recursive) {\n      return list;\n    }\n    return list.flatMap(node => {\n      const n = p.nodeRegistry().get(node);\n      if (isFolderNode(n)) {\n        const container = registry.get((<IFolderNode>n).sub_container.id);\n        if (isNotNull(container)) {\n          return [...this.findNodes(container, container.nodeRegistry().list(), recursive, registry), n];\n        }\n      }\n      return [n ?? node];\n    });\n  }\n}\n","import { Node } from '../nodes/node';\nimport { INode, SerializedNode } from '../nodes/node-interface';\nimport { RegistryResult } from '../nodes/registry';\nimport { SerializableHelper } from '../nodes/serializable';\nimport { RegistryError } from '../utils/errors';\nimport { isEmpty } from '../utils/helper';\nimport { ApiResult } from './api-result';\n\nabstract class ETLResult extends RegistryResult<SerializedNode> {\n  readonly containerId: number;\n  readonly total: number;\n  message: string;\n\n  protected constructor(containerId: number, total: number, objects: SerializedNode[],\n                        errors: RegistryError<SerializedNode>[]) {\n    super(objects, errors);\n    this.containerId = containerId;\n    this.total = total;\n    this.message = this.genMessage();\n  }\n\n  static init<T extends ETLResult>(className: any, cId: number, total: number, result: RegistryResult<Node>,\n                                   args?: {}): T {\n    const nodes = result.objects.map(n => n.serialize());\n    const errors = result.errors.map(e => new RegistryError(e.message, e.item?.serialize()));\n    return new className(cId, total, nodes, errors, args);\n  }\n\n  protected errMsg(): string {\n    return isEmpty(this.errors) ? '' : `Errors: [${this.errors}]`;\n  }\n\n  protected abstract genMessage(): string;\n}\n\nexport class CreationResult implements ApiResult<SerializedNode> {\n  readonly node: SerializedNode;\n  readonly message: string;\n  readonly isDashboardNode: boolean;\n\n  constructor(node: INode) {\n    this.node = SerializableHelper.serialize(node);\n    this.isDashboardNode = (<Node>node)?.isDashboardNode;\n    this.message = `Created node ${(<Node>node)?.getReadableId()} into container ${node.cid}.`;\n  }\n\n  result(): SerializedNode {\n    return this.node;\n  }\n\n}\n\nexport class RemoveResult extends ETLResult implements ApiResult<RemoveResult> {\n\n  result(): RemoveResult {\n    return this;\n  }\n\n  protected genMessage(): string {\n    return `Removed ${this.objects.length}/${this.total} nodes into container ${this.containerId}. ${this.errMsg()}`;\n  }\n\n}\n\nexport class ExportResult extends ETLResult implements ApiResult<ExportResult> {\n  constructor(containerId: number, objects: SerializedNode[]) {\n    super(containerId, 0, objects, null);\n  }\n\n  result(): ExportResult {\n    return this;\n  }\n\n  protected genMessage() {\n    return `Exported ${this.objects.length} nodes and sub nodes into container ${this.containerId}.`;\n  }\n}\n\nexport class ImportResult extends ETLResult implements ApiResult<ImportResult> {\n  result(): ImportResult {\n    return this;\n  }\n\n  protected genMessage() {\n    return `Imported ${this.objects.length}/${this.total} nodes into container ${this.containerId}. ${this.errMsg()}`;\n  }\n}\n\nexport class CloneResult extends ETLResult implements ApiResult<CloneResult> {\n  result(): CloneResult {\n    return this;\n  }\n\n  protected genMessage() {\n    return `Cloned ${this.objects.length}/${this.total} nodes into container ${this.containerId}. ${this.errMsg()}`;\n  }\n}\n\nexport class PackResult extends ETLResult\n  implements ApiResult<{ containerId: number, objects: SerializedNode[], errors: RegistryError<SerializedNode>[] }> {\n  readonly cleanupResult: RemoveResult;\n\n  private readonly cid: number;\n\n  constructor(containerId: number, total: number, objects: SerializedNode[], errors: RegistryError<SerializedNode>[],\n              args: { cid: number, rr: RemoveResult }) {\n    super(containerId, total, objects, errors);\n    this.cid = args.cid;\n    this.cleanupResult = args.rr;\n    this.message = this.genMessage();\n  }\n\n  result(): { containerId: number; objects: SerializedNode[]; errors: RegistryError<SerializedNode>[] } {\n    return { containerId: this.cid, objects: this.objects, errors: this.errors };\n  }\n\n  protected genMessage() {\n    return `Moved ${this.objects.length - 1}/${this.total} nodes ` +\n           `from ${this.containerId} into container ${this.cid}. ${this.errMsg()}`;\n  }\n}\n\nexport const initETLResult = <T>(className: any, cId: number, total: number, result: RegistryResult<Node>,\n                                 args?: {}): T => {\n  const nodes = result.objects.map(n => SerializableHelper.serialize(n));\n  const errors = result.errors.map(e => new RegistryError(e.message, SerializableHelper.serialize(e.item)));\n  return new className(cId, total, nodes, errors, args);\n};\n","import { ContainerNode } from '../../container-node';\nimport { NodeTypeRegistry } from '../../node-type-registry';\n\nexport const CONTAINER_NODE_TYPE = 'container/folder';\n\n//Container: a node that contains a container of other nodes\nNodeTypeRegistry.registerNodeType(CONTAINER_NODE_TYPE, ContainerNode, null, true, true);\n","module.exports = require(\"os\");","module.exports = require(\"set-ip-address\");","module.exports = require(\"ip\");","module.exports = require(\"util\");","import { isNotNull, isNull } from '../../../utils/helper';\nimport { Node } from '../../node';\nimport { createNodeDbHelper } from '../../node-db-helper';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeIO } from '../../node-io';\n\nexport abstract class AbstractFolderIONode extends Node {\n\n  protected constructor(title: string, description: string) {\n    super();\n    this.title = title;\n    this.description = description;\n    this.iconImageUrl = NODE_INFO.container[\"folder-input\"].iconImageUrl;\n  }\n\n  onAdd() {\n    // To backward compatible\n    if (!this.isUnderContainer() || isNull(this.properties['slot']) || this.properties['slot'] === -1) return;\n    let slot = this.properties['slot'];\n    delete this.properties['slot'];\n    createNodeDbHelper().update(this, ['properties']);\n    this.correctParentIO(this.container.nodeItself(), slot);\n  }\n\n  abstract onRemoved();\n\n  abstract onAfterSettingsChange();\n\n  protected abstract correctParentIO(containerNode: Node, slot: number);\n\n  protected isUnderContainer() {\n    return isNotNull(this.container?.nodeItself());\n  }\n\n  protected findParentIOById(inputOrOutput: string) {\n    return Object.entries(this.container.nodeItself()[inputOrOutput])\n                 .find(([_, io]) => this.id === (<NodeIO>io).subNodeId) ?? [null, null];\n  }\n\n  protected hasItself(inputOrOutput: string): boolean {\n    return this.findParentIOById(inputOrOutput)[0] !== null;\n  }\n}\n","import { NodeSetting } from '../node-io';\n\nexport default class SettingUtils {\n  /**\n   * Inserts new setting into specific position in this.settings\n   * @returns {object}\n   */\n  static insertIntoObjectAtPosition(\n    object: { [name: string]: NodeSetting },\n    insert: object,\n    after: string = '',\n    before: string = '',\n  ): { [name: string]: NodeSetting } {\n    if (before === '' && after === '') {\n      // add to end\n      Object.assign(object, insert);\n      return object;\n    }\n    // Create a temp object and index variable\n    const newObj = {};\n    let insertAfter = false;\n    const matchBoth = before !== '' && after !== '';\n    let foundFlag = false;\n\n    // Loop through the original object\n    for (let prop in object) {\n      if (object.hasOwnProperty(prop)) {\n        // look for matches for before and after keys\n        if (!foundFlag && matchBoth && insertAfter && before === prop) {\n          Object.assign(newObj, insert);\n          foundFlag = true;\n          insertAfter = false;\n        } else if (!foundFlag && !matchBoth && (insertAfter || before === prop)) {\n          Object.assign(newObj, insert);\n          foundFlag = true;\n          insertAfter = false;\n        } else if (!foundFlag && prop === after) {\n          insertAfter = true;\n        }\n        // Add the current item in the loop\n        newObj[prop] = object[prop];\n      }\n    }\n    if (!foundFlag) Object.assign(newObj, insert);\n\n    return newObj;\n  }\n}\n","let TAGNAME = {\n  CHILLER: 'Chiller',\n  CHWP: 'CHWP',\n  PlantChilledWater: 'Plant-Chilled Water',\n  BuildingInfo: 'Building Info',\n  HeatExchanger: 'Heat Exchanger',\n  CoolingTower: 'Cooling Tower',\n  CWP: 'CWP',\n  PlantCoolingTower: 'Plant-Cooling Tower',\n  Boiler: 'Boiler',\n  HWP: 'HWP',\n  BoilerPlant: 'Boiler Plant',\n  FloorControl: 'Floor Control',\n  AHU_VAV: 'AHU-VAV',\n  AHU_CAV: 'AHU_CAV',\n  FCU: 'FCU',\n  FTU: 'FTU',\n  PAC_HotWaterReheat: 'PAC - Hot Water Reheat',\n  PAC_ReverseCycle: 'PAC - Reverse Cycle',\n  PAC_ElectricReheat: 'PAC - Electric Reheat',\n  PAC_Electric_Reheat_WaterCooled: 'PAC - Electric Reheat - Water Cooled',\n  OutsideAirFan: 'Outside Air Fan',\n  SupplyAirFan: 'Supply Air Fan',\n  ReturnAirFan: 'ReturnAirFan',\n  AHUReturnAirFan: 'AHU Return Air Fan',\n  CarParkSupplyAirFan: 'CarPark Supply Air Fan',\n  CarParkExhaustAirFan: 'CarPark Exhaust Air Fan',\n  ToiletExhaustAirFan: 'Toilet Exhaust Air Fan',\n  KitchenExhaustAirFan: 'Kitchen Exhaust Air Fan',\n  ExhaustAirFan: 'Exhaust Air Fan',\n  GeneralExhaustAirFan: 'General Exhaust Air Fan',\n  VAV: 'VAV',\n  Power_SubMeter: 'Power_SubMeter',\n  PowerSiteMeter: 'Power Site Meter',\n  Gas_SubMeter: 'Gas sub-Meter',\n  Gas_SiteMeter: 'Gas Site Meter',\n  Water_subMeter: 'Water sub-Meter',\n  Water_SiteMeter: 'Water Site Meter',\n}\nexport default class tagRefs {\n\n  static acronyms = {\n    BMS: 'BMS',\n    RTD: 'RTD',\n    AHU: 'AHU',\n    CW: 'CW',\n    RTU: 'RTU',\n    RH: 'RH',\n    CHWP: 'CHWP',\n    CWP: 'CWP',\n    HWP: 'HWP',\n    EVP: 'EVP',\n    FCU: 'FCU',\n    FTU: 'FTU',\n    VAV: 'VAV',\n    CT: 'CT',\n    CTF: 'CTF',\n    RT: 'RT',\n    RAT: 'RAT',\n    SAT: 'SAT',\n    ZT: 'ZT',\n    CHL: 'CHL',\n    BLR: 'BLR',\n    AC: 'AC',\n    RAC: 'RAC',\n    EVAP: 'EVAP',\n    HVAC: 'HVAC',\n    HLI: 'HLI',\n    BTU: 'BTU',\n    CMD: 'CMD',\n    REM: 'REM',\n    SYS: 'SYS',\n    RV: 'RV',\n    SOL: 'SOL',\n    DX: 'DX',\n    BACnet: 'BACnet',\n    LoRa: 'LoRa',\n    KNX: 'KNX',\n    LoRaWAN: 'LoRaWAN',\n    Modbus: 'Modbus',\n    LON: 'LON',\n    N2: 'N2',\n    SP: 'SP',\n    SETP: 'SETP',\n    LIQ: 'LIQ',\n    PMP: 'PMP',\n    TEMP: 'TEMP',\n    TMP: 'TMP',\n    PRESS: 'PRESS',\n    EEV: 'EEV',\n    DISCH: 'DISCH',\n  }\n  \n\n  static tagCategory = Object.values(TAGNAME).map(\n    point => {\n      return { value: point, text: point };\n    },\n  )\n\n  static tagType(type: string) {\n    switch (type) {\n      case TAGNAME.CHILLER:\n        return tagRefs.CHILLER;\n      case TAGNAME.CHWP:\n        return tagRefs.CHWP;\n      case TAGNAME.PlantChilledWater:\n        return tagRefs.PlantChilledWater;\n      case TAGNAME.BuildingInfo:\n        return tagRefs.BuildingInfo;\n      case TAGNAME.HeatExchanger:\n        return tagRefs.HeatExchanger;\n      case TAGNAME.CoolingTower:\n        return tagRefs.CoolingTower;\n      case TAGNAME.CWP:\n        return tagRefs.CWP;\n      case TAGNAME.PlantCoolingTower:\n        return tagRefs.PlantCoolingTower;\n      case TAGNAME.Boiler:\n        return tagRefs.Boiler;\n      case TAGNAME.HWP:\n        return tagRefs.HWP;\n      case TAGNAME.BoilerPlant:\n        return tagRefs.BoilerPlant;\n      case TAGNAME.FloorControl:\n        return tagRefs.FloorControl;\n      case TAGNAME.AHU_VAV:\n        return tagRefs.AHU_VAV;\n      case TAGNAME.AHU_CAV:\n        return tagRefs.AHU_CAV;\n      case TAGNAME.FCU:\n        return tagRefs.FCU;\n      case TAGNAME.FTU:\n        return tagRefs.FTU;\n      case TAGNAME.PAC_HotWaterReheat:\n        return tagRefs.PAC_HotWaterReheat;\n      case TAGNAME.PAC_ReverseCycle:\n        return tagRefs.PAC_ReverseCycle;\n      case TAGNAME.PAC_ElectricReheat:\n        return tagRefs.PAC_ElectricReheat;\n      case TAGNAME.PAC_Electric_Reheat_WaterCooled:\n        return tagRefs.PAC_Electric_Reheat_WaterCooled;\n      case TAGNAME.OutsideAirFan:\n        return tagRefs.OutsideAirFan;\n      case TAGNAME.SupplyAirFan:\n        return tagRefs.SupplyAirFan;\n      case TAGNAME.ReturnAirFan:\n        return tagRefs.ReturnAirFan;\n      case TAGNAME.AHUReturnAirFan:\n        return tagRefs.AHUReturnAirFan;\n      case TAGNAME.CarParkSupplyAirFan:\n        return tagRefs.CarParkSupplyAirFan;\n      case TAGNAME.ToiletExhaustAirFan:\n        return tagRefs.ToiletExhaustAirFan;\n      case TAGNAME.KitchenExhaustAirFan:\n        return tagRefs.KitchenExhaustAirFan;\n      case TAGNAME.ExhaustAirFan:\n        return tagRefs.ExhaustAirFan;\n      case TAGNAME.GeneralExhaustAirFan:\n        return tagRefs.GeneralExhaustAirFan;\n      case TAGNAME.VAV:\n        return tagRefs.VAV;\n      case TAGNAME.Power_SubMeter:\n        return tagRefs.Power_SubMeter;\n      case TAGNAME.PowerSiteMeter:\n        return tagRefs.PowerSiteMeter;\n      case TAGNAME.Gas_SubMeter:\n        return tagRefs.Gas_SubMeter;\n      case TAGNAME.Gas_SiteMeter:\n        return tagRefs.Gas_SiteMeter;\n      case TAGNAME.Water_subMeter:\n        return tagRefs.Water_subMeter;\n    }\n  }\n\n  static CHILLER = {\n    'Chiller S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['run', 'cmd', 'chilled', 'chiller'],\n    },\n    'Chiller Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['run', 'sensor', 'chilled', 'chiller'],\n    },\n    'Chiller Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fault', 'sensor', 'chilled', 'chiller'],\n    },\n    'Load': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['load', 'sensor', 'chilled', 'chiller'],\n    },\n    'Chilled Water Supply Temperature': {\n      kind: 'number',\n      unit: 'Temperature',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'supply', 'chilled', 'chiller'],\n    },\n    'Chilled Water Supply Temperature Setpoint': {\n      kind: 'number',\n      unit: 'Temperature',\n      equipType: '',\n      tags: ['water', 'temp', 'sp', 'supply', 'chilled', 'chiller'],\n    },\n    'Chilled Water Return Temperature': {\n      kind: 'number',\n      unit: 'Temperature',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'return', 'chilled', 'chiller'],\n    },\n    'Condenser Water Supply Temperature': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'supply', 'condenser', 'chiller'],\n    },\n    'Condenser Water Return Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'return', 'condenser', 'chiller'],\n    },\n  };\n\n\n  static CHWP = {\n    'Chilled Water Pump S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['run', 'cmd', 'chilled', 'pump'],\n    },\n    'Chilled Water Pump Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['run', 'sensor', 'chilled', 'pump'],\n    },\n    'Chilled Water Pump Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fault', 'sensor', 'chilled', 'pump'],\n    },\n    'Chilled Water Pump Differential Pressure': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'pressure', 'sensor', 'differential', 'chilled', 'pump'],\n    },\n    'Chilled Water Pump Differential Pressure Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'pressure', 'sp', 'differential', 'chilled', 'pump'],\n    },\n    'Chilled Water Flow': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'flow', 'sensor', 'chilled', 'pump'],\n    },\n    'Chilled Water Flow Setpoint': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'flow', 'sp', 'chilled', 'pump'],\n    },\n    'Chilled Water Pump Speed': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['speed', 'cmd', 'chilled', 'pump'],\n    },\n  }\n\n  static PlantChilledWater = {\n    'Common Chilled Water Supply Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'supply', 'chilled', 'common'],\n    },\n    'Common Chilled Water Return Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'return', 'chilled', 'common'],\n    },\n    'Common Chilled Water Differential Pressure': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'pressure', 'sensor', 'differential', 'chilled', 'common'],\n    },\n    'Common Chilled Water Bypass Valve': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'valve', 'bypass', 'cmd', 'chilled', 'common'],\n    },\n    'Common Chilled Water Differential Pressure Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'pressure', 'sp', 'differential', 'chilled', 'common'],\n    },\n  }\n\n  static BuildingInfo = {\n    'Outside Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'outside', 'dryBulb/wetBulb', 'buildingInfo'],\n    },\n    'Outside Air Enthalpy': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'enthalpy', 'sensor', 'outside', 'buildingInfo'],\n    },\n    'Outside Air Humidity': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'humidity', 'sensor', 'outside', 'buildingInfo'],\n    },\n  }\n  static HeatExchanger = {\n    'Primary Supply Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'supply', 'hot', 'primaryLoop', 'heatExchanger'],\n    },\n    'Primary Return Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'return', 'hot', 'primaryLoop', 'heatExchanger'],\n    },\n    'Primary Loop Valve': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'cmd', 'hot', 'primaryLoop', 'heatExchanger'],\n    },\n    'Secondary Supply Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'supply', 'hot', 'secondaryLoop', 'heatExchanger'],\n    },\n    'Secondary Return Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'return', 'hot', 'secondaryLoop', 'heatExchanger'],\n    },\n    'Secondary Loop Valve': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'cmd', 'hot', 'secondaryLoop', 'heatExchanger'],\n    },\n  }\n  static CoolingTower = {\n    'Cooling Tower S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'condenser', 'coolingTower'],\n    },\n    'Cooling Tower Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'condenser', 'coolingTower'],\n    },\n    'Cooling Tower Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'condenser', 'coolingTower'],\n    },\n    'Cooling Tower Fan Speed': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['fan', 'speed', 'cmd', 'condenser', 'coolingTower'],\n    },\n    'Condenser Water Supply Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'supply', 'condenser', 'coolingTower'],\n    },\n    'Condenser Water Supply Temperature Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sp', 'supply', 'condenser', 'coolingTower'],\n    },\n    'Condenser Water Return Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'return', 'condenser', 'coolingTower'],\n    },\n  }\n  static CWP = {\n    'Condenser Water Pump S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['run', 'cmd', 'condenser', 'pump'],\n    },\n    'Condenser Water Pump Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['run', 'sensor', 'condenser', 'pump'],\n    },\n    'Condenser Water Pump Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fault', 'sensor', 'condenser', 'pump'],\n    },\n    'Condenser Water Pump Differential Pressure': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'pressure', 'sensor', 'differential', 'condenser', 'pump'],\n    },\n    'Condenser Water Pump Differential Pressure Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'pressure', 'sp', 'differential', 'condenser', 'pump'],\n    },\n    'Condenser Water Flow': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: [''],\n    },\n    'Condenser Water Pump Speed': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['speed', 'cmd', 'condenser', 'pump'],\n    },\n  }\n  static PlantCoolingTower = {\n    'Common Condenser Water Supply Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'supply', 'condenser', 'common'],\n    },\n    'Common Condenser Pressure Diff': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'pressure', 'sensor', 'differential', 'condenser', 'common'],\n    },\n    'Common Bypass Valve': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'valve', 'bypass', 'cmd', 'condenser', 'common'],\n    },\n    'Common Condenser Water Return Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'return', 'condenser', 'common'],\n    },\n  }\n  static Boiler = {\n    'Boiler S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['run', 'cmd', 'hot', 'boiler'],\n    },\n    'Boiler Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['run', 'sensor', 'hot', 'boiler'],\n    },\n    'Boiler Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fault', 'sensor', 'hot', 'boiler'],\n    },\n    'Hot Water Supply Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'supply', 'hot', 'boiler'],\n    },\n    'Hot Water Supply Temperature Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sp', 'supply', 'hot', 'boiler'],\n    },\n    'Hot Water Return Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'return', 'hot', 'boiler'],\n    },\n  }\n  static HWP = {\n    'Hot Water Pump S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['run', 'cmd', 'hot', 'pump'],\n    },\n    'Hot Water Pump Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['run', 'sensor', 'hot', 'pump'],\n    },\n    'Hot Water Pump Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fault', 'sensor', 'hot', 'pump'],\n    },\n    'Hot Water Pump Differential Pressure': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'pressure', 'sensor', 'differential', 'hot', 'pump'],\n    },\n    'Hot Water Pump Differential Pressure Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'pressure', 'sp', 'differential', 'hot', 'pump'],\n    },\n    'Hot Water Pump Speed': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['speed', 'cmd', 'hot', 'pump'],\n    },\n  }\n  static BoilerPlant = {\n    'Common Hot Water Supply Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'supply', 'hot', 'common'],\n    },\n    'Common Hot Water Return Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'temp', 'sensor', 'return', 'hot', 'common'],\n    },\n  }\n  static FloorControl = {\n    'Floor Occupancy': {\n      kind: 'boolean',\n      unit: '',\n      equipType: '',\n      tags: ['run', 'cmd', 'occupied', 'floor'],\n    },\n    'After Hours Active Time': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['run', 'cmd', 'afterHour', 'activeTime', 'floor'],\n    },\n    'Zone Occupancy': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['run', 'cmd', 'occupied', 'zone', 'floor'],\n    },\n    'Zone After Hours Active Time': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['run', 'cmd', 'afterHour', 'activeTime', 'zone', 'floor'],\n    },\n    'After Hours ElapsedTime': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['afterHour', 'floor'],\n    },\n    'AH Enable': {\n      kind: 'boolean',\n      unit: '',\n      equipType: '',\n      tags: ['cmd', 'afterHour', 'ahuRef', 'floor'],\n    },\n    'VAV Enable': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['enable', 'cmd', 'vav', 'floor'],\n    },\n    'Return Air Damper': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'cmd', 'return', 'common', 'damper', 'floor'],\n    },\n    'Supply Air Damper': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'cmd', 'supply', 'common', 'damper', 'floor'],\n    },\n    'Isolation Air Damper': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'cmd', 'isolation', 'damper', 'floor'],\n    },\n    'Zone Temperature Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sp', 'zone', 'floor'],\n    },\n  }\n  static AHU_VAV = {\n    'AHU Fan S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'supply', 'ahu'],\n    },\n    'AHU Fan Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'supply', 'ahu'],\n    },\n    'AHU Fan Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'supply', 'ahu'],\n    },\n    'AHU Fan Speed': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['fan', 'speed', 'cmd', 'supply', 'ahu'],\n    },\n    'Supply Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'supply', 'ahu'],\n    },\n    'Supply Air Temperature Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sp', 'supply', 'ahu'],\n    },\n    'Supply Air Static Pressure': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'supply', 'ahu'],\n    },\n    'Supply Air Static Pressure Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sp', 'supply', 'ahu'],\n    },\n    'Supply Air Flow': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'flow', 'sensor', 'supply', 'ahu'],\n    },\n    'Outside/Return/Room Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'outside/return', 'ahu'],\n    },\n    'Return/Room Air Temperature Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sp', 'return', 'ahu'],\n    },\n    'Supply/Return/Room Air Humidity': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'humidity', 'sensor', 'supply/return', 'ahu'],\n    },\n    'Outside Air Relative Humidity': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'humidity', 'sensor', 'outside', 'ahu'],\n    },\n    'Cooling Coil Valve Control': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'valve', 'cmd', 'chilled', 'ahu'],\n    },\n    'Heating Coil Valve Control': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'valve', 'cmd', 'hot', 'ahu'],\n    },\n    'Air Off Coil Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'offCoil', 'hot/cold', 'ahu'],\n    },\n    'Outside Air Damper Control': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'damper', 'cmd', 'outside', 'ahu'],\n    },\n    'Mix Air Temperature': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'mix', 'ahu'],\n    },\n    'Minimum Outside Air Damper Control': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'damper', 'cmd', 'outside', 'minimum', 'ahu'],\n    },\n    'Minimum Outside Air Damper Feedback': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'damper', 'sensor', 'outside', 'minimum', 'ahu'],\n    },\n    'Return Air Damper Control': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'damper', 'cmd', 'return', 'ahu'],\n    },\n    'Exhaust Air Damper': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'damper', 'cmd', 'exhaust', 'ahu'],\n    },\n    'RACO2': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'co2', 'sensor', 'return', 'ahu'],\n    },\n    'Electric Duct Heater S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: '',\n      tags: ['edh', 'run', 'cmd', 'ahu'],\n    },\n    'Electric Duct Heater Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: '',\n      tags: ['edh', 'run', 'sensor', 'ahu'],\n    },\n    'Dew Point': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['dewPoint', 'sensor', 'ahu'],\n    },\n    'Dew Point Setpoint': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['dewPoint', 'sp', 'ahu'],\n    },\n    'Filter Differential Pressure': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['pressure', 'sensor', 'filter', 'delta', 'ahu'],\n    },\n    'Filter Differential Pressure Setpoint': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['pressure', 'sp', 'filter', 'delta', 'ahu'],\n    },\n    'Filter Status': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['fault', 'sensor', 'filter', 'ahu'],\n    },\n  }\n  static AHU_CAV = {\n    'AHU Fan S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'supply', 'ahu'],\n    },\n    'AHU Fan Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'supply', 'ahu'],\n    },\n    'AHU Fan Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'supply', 'ahu'],\n    },\n    'Speed': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['fan', 'speed', 'sensor', 'supply', 'ahu'],\n    },\n    'Supply Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'supply', 'ahu'],\n    },\n    'Supply Air Temperature Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sp', 'supply', 'ahu'],\n    },\n    'Return Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'return', 'ahu'],\n    },\n    'Room Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'zone', 'ahu'],\n    },\n    'Outside Air Temperature': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'outside', 'ahu'],\n    },\n    'Mix Air Temperature': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'mix', 'ahu'],\n    },\n    'Return Air Temperature Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sp', 'return', 'ahu'],\n    },\n    'Room Air Temperature Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sp', 'zone', 'ahu'],\n    },\n    'Return Air Humidity': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'humidity', 'sensor', 'return', 'ahu'],\n    },\n    'Room Air Humidity': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'humidity', 'sensor', 'zone', 'ahu'],\n    },\n    'Outside Air Relative Humidity': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'humidity', 'sensor', 'outside', 'ahu'],\n    },\n    'Cooling Coil Valve Control': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'valve', 'cmd', 'chilled', 'ahu'],\n    },\n    'Heating Coil Valve Control': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'valve', 'cmd', 'hot', 'ahu'],\n    },\n    'Air Off Coil Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'offCoil', 'hot/cold', 'ahu'],\n    },\n    'Outside Air Damper Control': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'damper', 'cmd', 'outside', 'ahu'],\n    },\n    'Minimum Outside Air Damper Control': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'damper', 'cmd', 'outside', 'minimum', 'ahu'],\n    },\n    'Minimum Outside Air Damper Feedback': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'damper', 'sensor', 'outside', 'minimum', 'ahu'],\n    },\n    'Exhaust Air Damper': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'damper', 'cmd', 'exhaust', 'ahu'],\n    },\n    'RACO2': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'co2', 'sensor', 'return', 'ahu'],\n    },\n    'Electric Duct Heater S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: '',\n      tags: ['edh', 'run', 'cmd', 'ahu'],\n    },\n    'Electric Duct Heater Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: '',\n      tags: ['edh', 'run', 'sensor', 'ahu'],\n    },\n    'Dew Point': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['dewPoint', 'sensor', 'ahu'],\n    },\n    'Dew Point Setpoint': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['dewPoint', 'sp', 'ahu'],\n    },\n    'Filter Differential Pressure/Status': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'filter', 'ahu'],\n    },\n  }\n  static FCU = {\n    'FCU Fan S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'fcu'],\n    },\n    'FCU Fan Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'fcu'],\n    },\n    'FCU Fan Speed': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['fan', 'speed', 'sensor', 'supply', 'fcu'],\n    },\n    'FCU Fan Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'fcu'],\n    },\n    'Supply Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'supply', 'fcu'],\n    },\n    'Supply Air Temperature Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sp', 'supply', 'fcu'],\n    },\n    'Return/Room Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'return/zone', 'fcu'],\n    },\n    'Return/Room Air Temperature Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sp', 'return/zone', 'fcu'],\n    },\n    'Return/Room Air Humidity': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'humidity', 'sensor', 'return/zone', 'fcu'],\n    },\n    'Cooling Coil Valve Control': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'valve', 'cmd', 'chilled', 'fcu'],\n    },\n    'Heating Coil Valve Control': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'valve', 'cmd', 'hot', 'fcu'],\n    },\n    'Air Off Coil Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'offCoil', 'hot/cold', 'fcu'],\n    },\n    'Outside Air Damper Control': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'damper', 'cmd', 'outside', 'fcu'],\n    },\n    'Filter Differential Pressure/Status': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'filter', 'fcu'],\n    },\n  }\n  static FTU = {\n    'FTU Fan S/S': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['fan', 'run', 'cmd', 'ftu'],\n    },\n    'Supply Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'supply', 'ftu'],\n    },\n    'Return/Room Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'return/zone', 'ftu'],\n    },\n    'Heating Coil Valve Control': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'valve', 'cmd', 'hot', 'ftu'],\n    },\n    'Airflow': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'flow', 'sensor', 'ftu'],\n    },\n    'Damper Feedback': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'damper', 'sensor', 'ftu'],\n    },\n  }\n  static PAC_HotWaterReheat = {\n    'PAC Fan S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'pac'],\n    },\n    'PAC Fan Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'pac'],\n    },\n    'PAC Fan Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'pac'],\n    },\n    'Supply Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'supply', 'pac'],\n    },\n    'Return/Room Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'return/zone', 'pac'],\n    },\n    'Return/Room Air Temperature Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sp', 'return/zone', 'pac'],\n    },\n    'Return/Room Air Humidity': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'humidity', 'sensor', 'return/zone', 'pac'],\n    },\n    'Compressor S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: '',\n      tags: ['refrig', 'run', 'cmd', 'pac'],\n    },\n    'Heating Coil Valve Control': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'valve', 'cmd', 'hot', 'pac'],\n    },\n    'Air Off Coil Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'offCoil', 'hot/cold', 'pac'],\n    },\n    'Outside Air Damper Control': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'damper', 'cmd', 'outside', 'pac'],\n    },\n    'Filter Differential Pressure/Status': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'filter', 'pac'],\n    },\n  }\n  static PAC_ReverseCycle = {\n    'PAC Fan S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'pac'],\n    },\n    'PAC Fan Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'pac'],\n    },\n    'PAC Fan Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'pac'],\n    },\n    'Supply Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'supply', 'pac'],\n    },\n    'Return/Room Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'return/zone', 'pac'],\n    },\n    'Return/Room Air Temperature Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sp', 'return/zone', 'pac'],\n    },\n    'Return/Room Air Humidity': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'humidity', 'sensor', 'return/zone', 'pac'],\n    },\n    'Compressor S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: '',\n      tags: ['refrig', 'run', 'cmd', 'reverse', 'pac'],\n    },\n    'Reverse Valve Control': {\n      kind: 'boolean',\n      unit: '',\n      equipType: '',\n      tags: ['valve', 'run', 'cmd', 'reverse', 'pac'],\n    },\n    'Air Off Coil Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'offCoil', 'hot/cold', 'pac'],\n    },\n    'Outside Air Damper Control': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'damper', 'cmd', 'outside', 'pac'],\n    },\n    'Filter Differential Pressure/Status': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'filter', 'pac'],\n    },\n  }\n  static PAC_ElectricReheat = {\n    'PAC Fan S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'pac'],\n    },\n    'PAC Fan Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'pac'],\n    },\n    'PAC Fan Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'pac'],\n    },\n    'Supply Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'supply', 'pac'],\n    },\n    'Return/Room Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'return/zone', 'pac'],\n    },\n    'Return/Room Air Temperature Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sp', 'return/zone', 'pac'],\n    },\n    'Return/Room Air Humidity': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'humidity', 'sensor', 'return/zone', 'pac'],\n    },\n    'Compressor S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: '',\n      tags: ['refrig', 'run', 'cmd', 'pac'],\n    },\n    'Electric Duct Heater S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: '',\n      tags: ['edh', 'run', 'cmd', 'pac'],\n    },\n    'Air Off Coil Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'offCoil', 'hot/cold', 'pac'],\n    },\n    'Outside Air Damper Control': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'damper', 'cmd', 'outside', 'pac'],\n    },\n    'Filter Differential Pressure/Status': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'filter', 'pac'],\n    },\n  }\n  static PAC_Electric_Reheat_WaterCooled = {\n    'PAC Fan S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'pac'],\n    },\n    'PAC Fan Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'pac'],\n    },\n    'PAC Fan Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'pac'],\n    },\n    'Supply Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'supply', 'pac'],\n    },\n    'Return/Room Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'return/zone', 'pac'],\n    },\n    'Return/Room Air Temperature Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sp', 'return/zone', 'pac'],\n    },\n    'Return/Room Air Humidity': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'humidity', 'sensor', 'return/zone', 'pac'],\n    },\n    'Compressor S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: '',\n      tags: ['refrig', 'run', 'cmd', 'pac'],\n    },\n    'Electric Duct Heater S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: '',\n      tags: ['edh', 'run', 'cmd', 'pac'],\n    },\n    'Condenser Water Call': {\n      kind: 'boolean',\n      unit: '',\n      equipType: '',\n      tags: ['run', 'cmd', 'condenser', 'pac'],\n    },\n    'Air Off Coil Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'offCoil', 'hot/cold', 'pac'],\n    },\n    'Outside Air Damper Control': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'damper', 'cmd', 'outside', 'pac'],\n    },\n    'Filter Differential Pressure/Status': {\n      kind: 'number/boolean',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'filter', 'pac'],\n    },\n  }\n  static OutsideAirFan = {\n    'Outside Air Fan S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'outside', 'oaf'],\n    },\n    'Outside Air Fan Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'outside', 'oaf'],\n    },\n    'Outside Air Fan Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'outside', 'oaf'],\n    },\n    'Outside Air Fan Speed': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['fan', 'speed', 'cmd', 'outside', 'oaf'],\n    },\n    'Outside Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'outside', 'oaf'],\n    },\n    'Outside Air Humidity': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'humidity', 'sensor', 'outside', 'oaf'],\n    },\n    'Outside Air Flow': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'flow', 'sensor', 'return', 'oaf'],\n    },\n    'Outside Air Static Pressure': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'outside', 'oaf'],\n    },\n    'Outside Air Static Pressure Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sp', 'outside', 'oaf'],\n    },\n  }\n  static SupplyAirFan = {\n    'Supply Air Fan S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'supply', 'saf'],\n    },\n    'Supply Air Fan Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'supply', 'saf'],\n    },\n    'Supply Air Fan Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'supply', 'saf'],\n    },\n    'Supply Air Fan Speed': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['fan', 'speed', 'cmd', 'supply', 'saf'],\n    },\n    'Supply Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'supply', 'saf'],\n    },\n    'Supply Air Flow': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'flow', 'sensor', 'supply', 'saf'],\n    },\n    'Supply Air Humidity': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'humidity', 'sensor', 'supply', 'saf'],\n    },\n    'Supply Air Static Pressure': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'supply', 'saf'],\n    },\n    'Supply Air Static Pressure Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sp', 'supply', 'saf'],\n    },\n  }\n  static ReturnAirFan = {\n    'Return Air Fan S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'return', 'raf'],\n    },\n    'Return Air Fan Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'return', 'raf'],\n    },\n    'Return Air Fan Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'return', 'raf'],\n    },\n    'Return Air Fan Speed': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['fan', 'speed', 'cmd', 'return', 'raf'],\n    },\n    'Return Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'return', 'raf'],\n    },\n    'Return Air Humidity': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'humidity', 'sensor', 'return', 'raf'],\n    },\n    'Return Air Flow': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'flow', 'sensor', 'return', 'raf'],\n    },\n    'Return Air Static Pressure': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'return', 'raf'],\n    },\n    'Return Air Enthalpy': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'enthalpy', 'sensor', 'return', 'raf'],\n    },\n    'Return Air Suction Pressure': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'return', 'raf'],\n    },\n    'Return Air CO2': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'co2', 'sensor', 'return', 'raf'],\n    },\n    'Return Air Static Pressure Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sp', 'return', 'raf'],\n    },\n  }\n  static AHUReturnAirFan = {\n    'AHU Return Air Fan S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'return', 'ahu'],\n    },\n    'AHU Return Air Fan Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'return', 'ahu'],\n    },\n    'AHU Return Air Fan Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'return', 'ahu'],\n    },\n    'AHU Return Air Fan Speed': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['fan', 'speed', 'cmd', 'return', 'ahu'],\n    },\n    'AHU Return Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'return', 'ahu'],\n    },\n    'AHU Return Air Humidity': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'humidity', 'sensor', 'return', 'ahu'],\n    },\n    'AHU Return Air Static Pressure': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'return', 'ahu'],\n    },\n    'AHU Return Air CO2': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'co2', 'sensor', 'return', 'ahu'],\n    },\n    'AHU Return Air Static Pressure Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sp', 'return', 'ahu'],\n    },\n  }\n  static CarParkSupplyAirFan = {\n    'CarPark Supply Air Fan S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'supply', 'carpark'],\n    },\n    'CarPark Supply Air Fan Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'supply', 'carpark'],\n    },\n    'CarPark Supply Air Fan Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'supply', 'carpark'],\n    },\n    'CarPark Supply Air Fan Speed': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['fan', 'speed', 'cmd', 'supply', 'carpark'],\n    },\n    'CarPark Supply Air Static Pressure': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'supply', 'carpark'],\n    },\n    'CarPark Supply Air Static Pressure Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sp', 'supply', 'carpark'],\n    },\n  }\n  static CarParkExhaustAirFan = {\n    'CarPark Exhaust Air Fan S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'exhaust', 'carpark'],\n    },\n    'CarPark Exhaust Air Fan Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'exhaust', 'carpark'],\n    },\n    'CarPark Exhaust Air Fan Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'exhaust', 'carpark'],\n    },\n    'CarPark Exhaust Air Fan Speed': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['fan', 'speed', 'cmd', 'exhaust', 'carpark'],\n    },\n    'CarPark Exhaust Air Static Pressure': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'exhaust', 'carpark'],\n    },\n    'CarPark Exhaust Air Static Pressure Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sp', 'exhaust', 'carpark'],\n    },\n    'CarPark Exhaust Carbon Monoxide': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'co', 'sensor', 'exhaust', 'carpark'],\n    },\n    'CarPark Exhaust Carbon Monoxide Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'co', 'sp', 'exhaust', 'carpark'],\n    },\n  }\n  static ToiletExhaustAirFan = {\n    'Toilet Exhaust Air Fan S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'exhaust', 'toilet'],\n    },\n    'Toilet Exhaust Air Fan Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'exhaust', 'toilet'],\n    },\n    'Toilet Exhaust Air Fan Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'exhaust', 'toilet'],\n    },\n    'Toilet Exhaust Air Static Pressure': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'exhaust', 'toilet'],\n    },\n  }\n  static KitchenExhaustAirFan = {\n    'Kitchen Exhaust Air Fan S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'exhaust', 'kitchen'],\n    },\n    'Kitchen Exhaust Air Fan Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'exhaust', 'kitchen'],\n    },\n    'Kitchen Exhaust Air Fan Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'exhaust', 'kitchen'],\n    },\n    'Kitchen Exhaust Air Static Pressure': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'exhaust', 'kitchen'],\n    },\n  }\n  static ExhaustAirFan = {\n    'Exhaust Air Fan S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'exhaust'],\n    },\n    'Exhaust Air Fan Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'exhaust'],\n    },\n    'Exhaust Air Fan Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'exhaust'],\n    },\n    'Exhaust Air Static Pressure': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'exhaust'],\n    },\n  }\n  static GeneralExhaustAirFan = {\n    'General Exhaust Air Fan S/S': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'cmd', 'exhaust', 'general'],\n    },\n    'General Exhaust Air Fan Status': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'run', 'sensor', 'exhaust', 'general'],\n    },\n    'General Exhaust Air Fan Fault': {\n      kind: 'boolean',\n      unit: '',\n      equipType: 'hisTsPrecision',\n      tags: ['fan', 'fault', 'sensor', 'exhaust', 'general'],\n    },\n    'General Exhaust Air Static Pressure': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'pressure', 'sensor', 'exhaust', 'general'],\n    },\n  }\n  static VAV = {\n    'Zone/Room Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'zone', 'vav'],\n    },\n    'Zone/Room Temperature Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sp', 'zone', 'vav'],\n    },\n    'Supply Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'supply', 'vav'],\n    },\n    'Return Air Temperature': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'temp', 'sensor', 'return', 'vav'],\n    },\n    'Zone/Room Relative Humidity': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'humidity', 'sensor', 'zone', 'vav'],\n    },\n    'Damper': {\n      kind: 'number',\n      unit: '%',\n      equipType: '',\n      tags: ['air', 'damper', 'cmd', 'vav'],\n    },\n    'Airflow': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'flow', 'sensor', 'vav'],\n    },\n    'Airflow Setpoint': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'flow', 'sp', 'vav'],\n    },\n    'Minimum Airflow': {\n      kind: 'string',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'flow', 'sensor', 'min', 'vav'],\n    },\n    'Electric Duct Heater Status': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['edh', 'run', 'sensor', 'vav'],\n    },\n    'Electric Duct Heater S/S': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['edh', 'run', 'cmd', 'vav'],\n    },\n    'Terminal Load': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'sensor', 'terminalLoad', 'vav'],\n    },\n    'Maximum Airflow': {\n      kind: 'number',\n      unit: '',\n      equipType: '',\n      tags: ['air', 'flow', 'sensor', 'max', 'vav'],\n    },\n  }\n  static Power_SubMeter = {\n    'Total Active Energy': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['elec', 'energy', 'sensor', 'active', 'exclusion', 'hisOnWrite'],\n    },\n    'Total Active Power': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['elec', 'power', 'sensor', 'active'],\n    },\n  }\n  static PowerSiteMeter = {\n    'Total Active Energy': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['elec', 'energy', 'sensor', 'active'],\n    },\n    'Total Active Power': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['elec', 'power', 'sensor', 'active'],\n    },\n    'Energy Target': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['elec ', 'energy', 'target'],\n    },\n    '???': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['gas', 'sensor', 'inclusion', 'hisTotalized'],\n    },\n  }\n  static Gas_SubMeter = {\n    'Total Gas Consumption': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['gas', 'sensor', 'exclusion', 'hisTotalized'],\n    },\n  }\n  static Gas_SiteMeter = {\n    'Total Gas Consumption': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['gas', 'sensor', 'inclusion', 'hisTotalized'],\n    },\n    'Gas Target': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['gas', 'target', 'sensor', 'exclusion', 'hisTotalized'],\n    },\n  }\n  static Water_subMeter = {\n    'Total Water Consumption': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'sensor', 'inclusion/exclusion', 'hisTotalized'],\n    },\n  }\n  static Water_SiteMeter = {\n    'Total Water Consumption': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'sensor'],\n    },\n    'Water Target': {\n      kind: '',\n      unit: '',\n      equipType: '',\n      tags: ['water', 'target'],\n    },\n  }\n};\n\n\n","interface findVal {\n  valueWithKey: object,\n  value: number;\n}\n\nenum compareType {\n  Equals = 'Equals',\n  NotEquals = 'Not Equal',\n  GreaterThanEqual = 'Greater Than Equal',\n  GreaterThan = 'Greater Than',\n  LessThanEqual = 'Less Than Equal',\n  LessThan = 'Less Than',\n  Includes = 'Includes',\n  startsWith = 'Starts With',\n  endsWith = 'Ends With'\n}\n\nexport default class jsonStringCompare {\n  /**\n   * \n   */\n  static compare(self: any, s1: any, s2: any) {\n    const inputType = self.settings['function'].value;\n    if (self.settings['isNumber'].value) {\n      s1 = Number(s1)\n      s2 = Number(s2)\n    }\n    switch (inputType) {\n      case compareType.Equals:\n        return s1 === s2;\n      case compareType.NotEquals:\n        return s1 !== s2;\n      case compareType.GreaterThanEqual:\n        return s1 >= s2;\n      case compareType.GreaterThan:\n        return s1 > s2;\n      case compareType.LessThanEqual:\n        return s1 <= s2;\n      case compareType.LessThan:\n        return s1 < s2;\n      case compareType.LessThan:\n        return s1 < s2;\n      case compareType.Includes:\n        return s1.includes(s2);\n      case compareType.startsWith:\n        return s1.startsWith(s2);\n      case compareType.endsWith:\n        return s1.endsWith(s2);\n      default:\n        return s1 === s2;\n    }\n   \n  }\n\n  static findVal(object: { [x: string]: any; }, key: string) {\n    let value: findVal;\n    Object.keys(object).some(function (k) {\n      if (k === key) {\n        value = {\n          valueWithKey: { [key]: object[k] },\n          value: object[k]\n        }\n      }\n      if (object[k] && typeof object[k] === 'object') {\n        value = this.findVal(object[k], key);\n        return value !== undefined;\n      }\n    });\n    return value;\n  }\n\n\n  \n\n}\n","export default class NodeUtils {\n  /**\n   * @Deprecated: Use Node::persistProperties\n   */\n  static persistProperties(\n    self,\n    saveSettings = false,\n    saveProperties = false,\n    saveInputs = false,\n    saveOutputs = false,\n  ) {\n    if (!self.container.db) return;\n    var setProps = {};\n    if (saveSettings) setProps['settings'] = self.settings;\n    if (saveProperties) setProps['properties'] = self.properties;\n    if (saveInputs) setProps['inputs'] = self.inputs;\n    if (saveOutputs) setProps['outputs'] = self.outputs;\n    self.container.db.updateNode(self.id, self.container.id, {\n      $set: setProps,\n    });\n  }\n}\n","export enum MATH_FUNC_TYPE {\n  NA = 0,\n  ADD = 1,\n  SUBTRACT = 2,\n  MULTIPLY = 3,\n  DIVIDE = 4,\n  REMAINDER = 5,\n  EXP = 6,\n  BOOL_INVERT = 7,\n  ONE_TO_TRUE = 8,\n  TRUE_TO_ONE = 9,\n  NUMBER_INVERT = 10,\n}\n\nexport default class MathUtils {\n  /**\n   * Values will be converted into the range min-max\n   * @param {number} value\n   * @param {number} min\n   * @param {number} max\n   */\n  static clamp(value: number, min: number, max: number): number {\n    return Math.min(Math.max(value, min), max);\n  }\n\n  /**\n   * It rounds to decimal place\n   * @param {any} value\n   * @param {number} decimals\n   * @returns {number}\n   */\n  static decimals(value: any, decimals: number): number {\n    if (isNaN(value)) return undefined;\n    const out = value.toFixed(MathUtils.clamp(decimals, 0, 5));\n    parseFloat(out);\n    return out;\n  }\n\n  /**\n   * It converts a 1 to a 0 or a 0 to a 1\n   * @param {number} value\n   */\n  static numInvert(value: number): number {\n    return value ^ 1;\n  }\n\n  /**\n   * It convert a true to a 1\n   * @param {number} value\n   */\n  static trueToOne(value: boolean): number {\n    if (typeof value === 'boolean') {\n      return value ? 1 : 0;\n    }\n    return undefined;\n  }\n\n  /**\n   * It convert a 1 to a true\n   * @param {number} value\n   */\n  static oneToTrue(value: number): boolean {\n    if (typeof value === 'number') {\n      return !!value;\n    }\n    return undefined;\n  }\n\n  /**\n   * It inverts the boolean value\n   * @param {boolean} value\n   */\n  static invert(value: boolean): boolean {\n    if (typeof value === 'boolean') {\n      return !value;\n    }\n    return undefined;\n  }\n\n  /**\n   * Checks whether all values are numbers or not\n   * @param values list of comma separated values\n   * @returns {boolean}\n   */\n  static validateNumbers = (...values: any) => {\n    return values.every(x => !isNaN(x));\n  };\n\n  static mathSwitch(mathFuncType: number, val: any, mathValue: number) {\n    let out;\n    switch (mathFuncType) {\n      case MATH_FUNC_TYPE.NA:\n        out = 0;\n        break;\n      case MATH_FUNC_TYPE.ADD:\n        out = val + mathValue;\n        break;\n      case MATH_FUNC_TYPE.SUBTRACT:\n        out = val - mathValue;\n        break;\n      case MATH_FUNC_TYPE.MULTIPLY:\n        out = val * mathValue;\n        break;\n      case MATH_FUNC_TYPE.DIVIDE:\n        out = val / mathValue;\n        break;\n      case MATH_FUNC_TYPE.REMAINDER:\n        out = 1;\n        break;\n      case MATH_FUNC_TYPE.EXP:\n        out = 1;\n        break;\n      case MATH_FUNC_TYPE.BOOL_INVERT:\n        out = MathUtils.invert(val);\n        break;\n      case MATH_FUNC_TYPE.ONE_TO_TRUE:\n        out = MathUtils.oneToTrue(val);\n        break;\n      case MATH_FUNC_TYPE.TRUE_TO_ONE:\n        out = MathUtils.trueToOne(val);\n        break;\n      case MATH_FUNC_TYPE.NUMBER_INVERT:\n        out = MathUtils.numInvert(val);\n        break;\n    }\n    return out;\n  }\n}\n","export default class EdgeGPIOUtils {\n  /*\n  used for scaling a UO !!! YES its backwards 0 is high and 100 is low !!!\n  to drive a UO as an DO send 0 for ON and 100 for OFF // Example to send 6vdc console.log(scaleToGPIOValue(60, 0, 120)) returns 48\n  to drive a UO as an AO send 100 to 0 as a float\n  */\n  static scaleToGPIOValue = (\n    val: number,\n    minOutput: number,\n    maxOutput: number,\n    minInput = 120,\n    maxInput = 0,\n  ): number => {\n    let value = val;\n    let pinValue = ((maxOutput - minOutput) * (value - minInput)) / (maxInput - minInput) + minOutput;\n    if (pinValue > maxOutput) {\n      pinValue = maxOutput;\n      value = maxInput;\n    } else if (pinValue < minOutput) {\n      pinValue = minOutput;\n      value = minInput;\n    }\n    return pinValue;\n  };\n\n  /*\n    used for scaling a UI\n    Example for scaling a 0/10dc to 0 to 1000. \n    scaleFromGPIOValue(0.7, 0, 1000)\n    */\n  static scaleFromGPIOValue = (\n    pinValue: number,\n    minOutput: number,\n    maxOutput: number,\n    minInput = 0,\n    maxInput = 1,\n  ): number => {\n    return ((maxOutput - minOutput) * (pinValue - minInput)) / (maxInput - minInput) + minOutput;\n  };\n\n  /*\n    used for scaling a UI as a DI\n    off/open = around 0.9 vdc. When on the pin jumper its set as a 10K\n    on/closed = around 0.1 vdc\n    */\n  static uiAsDI = (val: number): number => {\n    if (val > 0.6) {\n      return 0; // false/open\n    }\n    if (val < 0.2) {\n      return 1; // true/closed\n    }\n  };\n\n  /*\n    The bbb returns the DI as 0 for closed/on and 1 for open/off\n  */\n  static diInvert = (val: number): number => {\n    return (val ^= 1);\n  };\n\n  //  scale or convert 4-20mA reading to temperature\n  //      -value_420 is input value in 4-20mA\n  //      -min_target is minimum target temperature @4mA, defualts to 0C\n  //      -max_target is maximum target temperature  @20mA, defualts to 100C\n  //      -min_range is minimum input range, defaults to 4 mA.\n  //      -max_range is maximum input range, defaults to 20mA\n\n  static scale420maToRange(value_420: number, min_target: number, max_target: number) {\n    const limit = true,\n      min_range = 4,\n      max_range = 20;\n    const slope = (max_target - min_target) / (max_range - min_range);\n    if (limit)\n      if (value_420 <= min_range) return min_target;\n      else if (value_420 >= max_range) return max_target;\n    return (value_420 - min_range) * slope + min_target;\n  }\n\n  //  scale or convert ui reading to 4-20mA\n  //      -ui_value is input value in ui reading (0-1 range)\n  //      -min_target is minimum target output, defualts to 4mA\n  //      -max_target is maximum target output, defualts to 20mA\n  //      -min_range is minimum input range, defaults to 0.0\n  //      -max_range is maximum input range, defaults to 1.0\n  //\n\n  static scaleUI420ma(ui_value: number, min_range: number, max_range: number) {\n    const min_target = 4,\n      max_target = 20,\n      limit = true;\n    const slope = max_target / (max_range - min_range);\n    const value_420 = (ui_value - min_range) * slope;\n    if (limit)\n      if (value_420 <= min_target) return min_target;\n      else if (value_420 >= max_target) return max_target;\n\n    return value_420;\n  }\n}\n","import { PointOutput, PointValue } from '../../../../backend/models/point-model';\nimport { ErrorHandler } from '../../../../utils/decorators';\nimport { isFunction } from '../../../../utils/helper';\nimport { IMessageSubscriber, NodeStoreItem, Observer } from '../../../../utils/pattern';\nimport { Container } from '../../../container';\nimport { NODE_INFO } from '../../../node-info';\nimport { Type } from '../../../node-io';\nimport { GlobalNodeRegistry } from '../../../node-registry';\nimport { ConnectionOutput, DependantConnectionNode } from '../connection-node-mixin';\nimport { ContainerErrorNodeStore, OneIdentifierOneNodeStore } from '../model/container-node-store';\nimport { CentralizedPointOutputObserver, HasPointOutputObservers } from '../model/point-node';\nimport { ProtocolDeviceNode } from '../ProtocolDeviceNode';\nimport BACnetDevice from './core/bacnet-device';\nimport { BacnetPoint, BacnetPointCreator, PointKind } from './core/bacnet-model';\n\nexport const BACNET_SERVER_NODE_TYPE = 'protocols/bacnet-server/bacnet-server';\nexport const REGISTER_BACNET_POINT = 'REGISTER_BACNET_POINT';\nexport const UPDATE_BACNET_POINT = 'UPDATE_BACNET_POINT';\nexport const PUSH_BACNET_POINT_VALUE = 'PUSH_BACNET_POINT_VALUE';\nexport const UNREGISTER_BACNET_POINT = 'UNREGISTER_BACNET_POINT';\n\nclass BACNetCentralizedPointOutputObserver extends CentralizedPointOutputObserver<BacnetPoint> {\n\n  protected convert(data: PointOutput<BacnetPoint>): object {\n    let output = {};\n    output[data.point.identifier()] = {\n      objectId: data.point.objectInstance,\n      objectType: data.point.objectType.label,\n      objectName: data.point.objectName,\n      pointValue: data.point.pointValue,\n      status: data.connStatus.status.label,\n      error: data.connStatus.error,\n    };\n    return output;\n  }\n\n}\n\nclass BacnetNodeServerStore extends OneIdentifierOneNodeStore<PointValue> {\n\n  public getError(): ContainerErrorNodeStore {\n    return this.errors;\n  }\n\n  public getNodes(): { [identifier: string]: { identifier: string, nodeId: string; enabled: boolean; func: Function } } {\n    return this.nodes;\n  }\n\n  protected alreadyExistedMsg(payload: NodeStoreItem): string {\n    return `Already exist object with ${payload.data?.objectInstance} and type ${payload.data?.objectType}`;\n  }\n}\n\nclass BACnetServerNode extends ProtocolDeviceNode implements IMessageSubscriber, HasPointOutputObservers<BacnetPoint> {\n\n  private readonly _oPointsSlot = 2;\n  private device: BACnetDevice = null;\n  private store: BacnetNodeServerStore = new BacnetNodeServerStore();\n\n  constructor() {\n    super(NODE_INFO['protocols/bacnet-server']['bacnet-server'].title,\n          NODE_INFO['protocols/bacnet-server']['bacnet-server'].description);\n\n    this.mixinEnableInputSetting();\n    this.addInputWithSettings('address', Type.STRING, '0.0.0.0', 'BACnet Server Address');\n    this.addInputWithSettings('broadcast', Type.STRING, '255.255.255.255', 'Broadcast Address');\n    this.addInputWithSettings('port', Type.NUMBER, 47808, 'BACnet port');\n    this.addInputWithSettings('id', Type.NUMBER, 1, 'BACnet Device Id');\n    this.addInputWithSettings('name', Type.STRING, 'nube-bacnet', 'BACnet Device Name');\n    this.addInputWithSettings('apdu', Type.NUMBER, 1476, 'BACnet APDU');\n\n    this.addOutput('points', Type.JSON);\n  }\n\n  listen({ action, payload }: { action: string; payload: NodeStoreItem }) {\n    this.debugInfo(`Handling ${action}:${payload.identifier}...`);\n    switch (action) {\n      case REGISTER_BACNET_POINT:\n        return this.store.register(payload, p => this.afterRegister(p));\n      case UPDATE_BACNET_POINT:\n        return this.store.update(payload, p => this.afterUpdate(p), (p, force) => this.afterUnregister(p, force));\n      case PUSH_BACNET_POINT_VALUE:\n        return this.pushValue(payload);\n      case UNREGISTER_BACNET_POINT:\n        return this.store.unregister(payload, true, p => this.afterUnregister(p, true));\n      default:\n        this.debugWarn(`Request action doesn't match`);\n    }\n  }\n\n  connObserverNodes(): Observer<ConnectionOutput>[] {\n    return this.store.listNodeIds()\n               .map(id => GlobalNodeRegistry.instance().get(id))\n               .filter(n => n)\n               .map(n => (<DependantConnectionNode><unknown>n).statusObserver());\n  }\n\n  pointObservers(): Observer<PointOutput<BacnetPoint>>[] {\n    return [new BACNetCentralizedPointOutputObserver(this, this._oPointsSlot)];\n  }\n\n  isConnConnected(): boolean {\n    return this.device !== null;\n  }\n\n  @ErrorHandler\n  onReceiveMessage(object: object): void {\n    if (!this.getConnectionStatus().isConnected()) {\n      return;\n    }\n    let kind = PointKind.lookupByValue(object['objectType']);\n    let bp = BacnetPointCreator.create(this.isEnabled(), object['objectId'], kind, null,\n                                       object['presentValue'], object['priority'], object['priorityArray']);\n    let pointNode = this.store.lookup(bp.identifier());\n    if (pointNode && GlobalNodeRegistry.instance().has(pointNode.nodeId) && isFunction(pointNode.func)) {\n      pointNode.func(bp);\n    } else {\n      this.debug(`Receive message to BACnet Point ${bp.identifier()} but not found node`);\n      //TODO: how to add new node from server\n    }\n  }\n\n  protected applyTitle() {\n    super.applyTitle();\n    this.broadcastSettingsToClients();\n    this.broadcastNameToClients();\n  }\n\n  protected createThenStart() {\n    this.device = new BACnetDevice({\n                                     deviceId: this.settings['id'].value,\n                                     name: this.settings['name'].value,\n                                     databaseRevision: 1,\n                                   }, {\n                                     port: this.settings['port'].value,\n                                     address: this.settings['address'].value,\n                                     broadcast: this.settings['broadcast'].value,\n                                     apduTimeout: this.settings['apdu'].value,\n                                   }, data => this.onReceiveMessage(data));\n    this.device.start();\n  }\n\n  protected stop() {\n    if (!this.device) {\n      return;\n    }\n    try {\n      this.device.stop();\n      this.device = null;\n    } catch (e) {\n      this.debugWarn(`Cannot closed BACnet client ${e}`);\n    }\n  }\n\n  private afterRegister(payload: NodeStoreItem) {\n    if (payload.enabled && this.getConnectionStatus().isConnected()) {\n      this.device.addPoint(payload.data);\n      return payload.data;\n    }\n    return null;\n  }\n\n  private afterUpdate(payload: NodeStoreItem) {\n    if (payload.enabled && this.getConnectionStatus().isConnected()) {\n      return this.device.updatePoint(payload.data);\n    }\n    return null;\n  }\n\n  private pushValue(payload: NodeStoreItem) {\n    if (payload.enabled && this.getConnectionStatus().isConnected()) {\n      return this.device.updateValue(payload.data);\n    }\n    return null;\n  }\n\n  private afterUnregister(payload: NodeStoreItem, force?: boolean) {\n    if (payload.data?.objectInstance && this.getConnectionStatus().isConnected()) {\n      this.device.delObject(payload.data?.objectInstance, payload.data?.objectType?.value);\n    }\n    if (force) {\n      let output = this.outputs[this._oPointsSlot].data;\n      if (output) {\n        delete output[payload.identifier];\n      }\n      this.setOutputData(this._oPointsSlot, output);\n    }\n  }\n\n}\n\nContainer.registerNodeType(BACNET_SERVER_NODE_TYPE, BACnetServerNode);\n","import { isNull, unionToArray } from '../../../../utils/helper';\nimport { NodeStoreItem } from '../../../../utils/pattern';\n\nexport interface ContainerNodeStore<T> {\n\n  checkExistence(payload: NodeStoreItem): void;\n\n  lookup(identifier: string): any;\n\n  register(payload: NodeStoreItem, afterUpdate?: (p) => T): T;\n\n  update(payload: NodeStoreItem, afterUpdate?: (p) => T, afterUnregisterIfExisted?: (p, force?: boolean) => void): T;\n\n  unregister(payload: NodeStoreItem, force?: boolean, afterUnregister?: (p, force?: boolean) => void): void;\n\n  listNodeIds(): string[];\n\n}\n\nexport interface ContainerErrorNodeStore {\n\n  hasError(nodeId: string): boolean;\n\n  addError(nodeId: string): void;\n\n  removeError(nodeId: string): void;\n\n  listErrors(): Set<string>;\n\n}\n\nexport interface IOneIdentifierManyNodeStore<T> extends ContainerNodeStore<T> {\n\n  has(identifier, predicate: (key, value) => boolean): boolean;\n\n}\n\nexport class DefaultContainerErrorNode implements ContainerErrorNodeStore {\n  private nodeIdErrors: Set<string> = new Set<string>();\n\n  hasError(nodeId: string): boolean {\n    return this.nodeIdErrors.has(nodeId);\n  }\n\n  addError(nodeId: string): void {\n    this.nodeIdErrors.add(nodeId);\n  }\n\n  removeError(nodeId: string): void {\n    this.nodeIdErrors.delete(nodeId);\n  }\n\n  listErrors(): Set<string> {\n    return this.nodeIdErrors;\n  }\n}\n\nexport abstract class AbstractContainerStore<T> implements ContainerNodeStore<T> {\n\n  abstract checkExistence(payload: NodeStoreItem): void;\n\n  abstract lookup(identifier: string): any;\n\n  abstract unregister(payload: NodeStoreItem, force?: boolean, cb?: (p, force?: boolean) => void): void;\n\n  abstract listNodeIds(): string[];\n\n  register(payload: NodeStoreItem, cb?: (p) => T): T {\n    this.checkExistence(payload);\n    this.add(payload);\n    return cb && cb(payload);\n  }\n\n  update(payload: NodeStoreItem, afterUpdate?: (p) => T, afterUnregisterIfExisted?: (p, force?: boolean) => void): T {\n    if (payload?.identifier !== payload?.prev?.identifier) {\n      try {\n        this.checkExistence(payload?.prev);\n      } catch (e) {\n        this.unregister(payload?.prev, true, (p) => afterUnregisterIfExisted && afterUnregisterIfExisted(p, true));\n      }\n      return this.register(payload, afterUpdate);\n    }\n    if (!payload?.enabled) {\n      this.unregister(payload, false, (p) => afterUnregisterIfExisted && afterUnregisterIfExisted(p, false));\n      return payload?.data;\n    }\n    this.add(payload);\n    return afterUpdate && afterUpdate(payload);\n  }\n\n  protected abstract add(payload: NodeStoreItem): string;\n\n}\n\nexport abstract class OneIdentifierOneNodeStore<T> extends AbstractContainerStore<T> {\n\n  protected nodes: { [identifier: string]: { identifier: string, nodeId: string; enabled: boolean; func: Function } } = {};\n  protected errors: ContainerErrorNodeStore = new DefaultContainerErrorNode();\n\n  checkExistence(payload: NodeStoreItem): void {\n    if (this.nodes[payload?.identifier]) {\n      if (payload.lenient && this.nodes[payload.identifier].nodeId === payload.nodeId) {\n        return;\n      }\n      if (this.nodes[payload.identifier].nodeId !== payload.nodeId) {\n        this.errors.addError(payload.nodeId);\n      }\n      throw new Error(this.alreadyExistedMsg(payload));\n    }\n  }\n\n  lookup(identifier: string): { identifier: string, nodeId: string; enabled: boolean; func: Function } {\n    return this.nodes[identifier] ?? null;\n  }\n\n  update(payload: NodeStoreItem, afterUpdate?: (p) => T, afterUnregisterIfExisted?: (p, force?: boolean) => void): T {\n    this.errors.removeError(payload?.nodeId);\n    return super.update(payload, afterUpdate, afterUnregisterIfExisted);\n  }\n\n  unregister(payload: NodeStoreItem, force?: boolean, cb?: (p, force?: boolean) => void): void {\n    if (isNull(payload)) {\n      return null;\n    }\n    this.errors.removeError(payload?.nodeId);\n    let item = this.lookup(payload.identifier);\n    if (isNull(item)) {\n      return null;\n    }\n    if (item.nodeId !== payload.nodeId) {\n      return null;\n    }\n    if (force) {\n      delete this.nodes[payload.identifier];\n    } else {\n      this.nodes[this.add(payload)].enabled = false;\n    }\n    return cb && cb(payload);\n  }\n\n  listNodeIds(): string[] {\n    return unionToArray(Object.values(this.nodes).map(v => v.nodeId), this.errors.listErrors());\n  }\n\n  protected add(payload: NodeStoreItem): string {\n    this.errors.removeError(payload?.nodeId);\n    this.nodes[payload.identifier] = {\n      identifier: payload.identifier,\n      nodeId    : payload.nodeId,\n      enabled   : payload.enabled,\n      func      : payload.callback,\n    };\n    return payload.identifier;\n  }\n\n  protected abstract alreadyExistedMsg(payload: NodeStoreItem): string;\n\n}\n\nexport abstract class OneIdentifierManyNodeStore<T> extends AbstractContainerStore<T>\n  implements IOneIdentifierManyNodeStore<T> {\n\n  private nodes: { [identifier: string]: { [nodeId: string]: { enabled: boolean; func?: Function } } } = {};\n\n  checkExistence(payload: NodeStoreItem): void {\n    if (this.nodes[payload?.identifier] && this.nodes[payload?.identifier][payload?.nodeId]) {\n      if (payload?.lenient) {\n        return;\n      }\n      throw new Error(this.alreadyExistedMsg(payload));\n    }\n  }\n\n  lookup(identifier: string): { [nodeId: string]: { enabled: boolean; func?: Function } } {\n    return this.nodes[identifier] ?? {};\n  }\n\n  unregister(payload: NodeStoreItem, force?: boolean, afterUnregister?: (p, force?: boolean) => void): void {\n    let item = this.lookup(payload.identifier);\n    if (isNull(item) || isNull(item[payload?.nodeId])) {\n      return null;\n    }\n    if (force) {\n      if (this.nodes[payload?.identifier]) {\n        delete this.nodes[payload?.identifier][payload?.nodeId];\n      }\n    } else {\n      this.nodes[this.add(payload)][payload?.nodeId].enabled = false;\n    }\n    return afterUnregister && afterUnregister(payload);\n  }\n\n  listNodeIds(): string[] {\n    return unionToArray(...Object.values(this.nodes).map(v => Object.keys(v)));\n  }\n\n  has(identifier, predicate: (key, value) => boolean): boolean {\n    return Object.entries(this.lookup(identifier)).some(object => predicate(object[0], object[1]));\n  }\n\n  protected add(payload: NodeStoreItem): string {\n    this.nodes[payload?.identifier] = this.nodes[payload?.identifier] ?? {};\n    this.nodes[payload?.identifier][payload?.nodeId] = {\n      enabled: payload?.enabled,\n      func   : payload?.callback,\n    };\n    return payload?.identifier;\n  }\n\n  protected abstract alreadyExistedMsg(payload: NodeStoreItem): string;\n}\n","import { ErrorCallbackHandler } from '../../../utils/decorators';\nimport { ConnectionStatus } from '../../../utils/enums';\nimport { IdGenerator } from '../../../utils/id-generator';\nimport { DefaultObservable, ICentralizedListener, NodeStoreItem, Observable, Observer } from '../../../utils/pattern';\nimport { ContainerNode } from '../../container-node';\nimport { Side } from '../../node-interface';\nimport { ConnectionOutput, ExternalConnectionNode, ExternalConnectionNodeMixin } from './connection-node-mixin';\n\nexport interface IProtocolDeviceNode extends ExternalConnectionNode, ICentralizedListener {\n\n  statusObservable(observers: Observer<ConnectionOutput>[]): Observable<ConnectionOutput>;\n\n}\n\nexport abstract class ProtocolDeviceNode extends ExternalConnectionNodeMixin(ContainerNode)\n  implements IProtocolDeviceNode {\n  private readonly _title: string;\n\n  protected constructor(title, description) {\n    super();\n    this._title = title;\n    this.description = description;\n    this.mixinConnectionStatusOutput();\n  }\n\n  onCreated() {\n    super.onCreated();\n  }\n\n  onAdded() {\n    super.onAdded();\n    this.startOrStop();\n  }\n\n  onAfterSettingsChange() {\n    this.startOrStop();\n    this.applyTitle();\n  }\n\n  onInputUpdated() {\n    this.reEvaluateSettingByInput(this.inputs, this.settings);\n    this.onAfterSettingsChange();\n  }\n\n  onRemoved() {\n    this.stop();\n    super.onRemoved();\n  }\n\n  statusObservable(observers: Observer<ConnectionOutput>[]): Observable<ConnectionOutput> {\n    observers.push(this.statusObserver());\n    return new DefaultObservable<ConnectionOutput>(observers);\n  }\n\n  abstract listen({ action, payload }: { action: string; payload: NodeStoreItem });\n\n  abstract connObserverNodes(): Observer<ConnectionOutput>[];\n\n  protected applyTitle() {\n    super.applyTitle();\n  }\n\n  protected statusOutputIdx(): number {\n    return 0;\n  }\n\n  protected enableDescription(): string {\n    return `Enable ${this._title}`;\n  }\n\n  protected startOrStop(): void {\n    if (this.side !== Side.server) return;\n    this.stop(); // to restart device\n    this.connectionStatus = ConnectionStatus.UNCONNECTED;\n    if (this.isEnabled()) {\n      this.kickoff(this);\n    }\n    this.notifyConnStatusOutput();\n  }\n\n  @ErrorCallbackHandler((err, node) => node.handleErrorInKickOff(err))\n  protected kickoff(node: ProtocolDeviceNode) {\n    node.createThenStart();\n    this.notifyConnStatusOutput(ConnectionStatus.CONNECTED);\n  }\n\n  protected handleErrorInKickOff(err: Error) {\n    this.notifyConnStatusOutput(ConnectionStatus.ERROR, err.message);\n  }\n\n  protected notifyConnStatusOutput(status?: ConnectionStatus, errMsg?: string) {\n    this.connectionStatus = status ?? this.connectionStatus;\n    let nodeId = IdGenerator.createNodeId(this.cid, this.id);\n    this.statusObservable(this.connObserverNodes()).notify(new ConnectionOutput(this.getConnectionStatus(), errMsg),\n                                                           nodeId);\n  }\n\n  protected abstract createThenStart(): void;\n\n  protected abstract stop(): void;\n}\n\n","import { Enumify } from 'enumify';\n\nexport class ConnectionStatus extends Enumify {\n\n  static CONNECTED = new ConnectionStatus('CONNECTED');\n  static DISCONNECTED = new ConnectionStatus('DISCONNECTED');\n  static ERROR = new ConnectionStatus('ERROR');\n  static UNCONNECTED = new ConnectionStatus('UNCONNECTED');\n  static _ = ConnectionStatus.closeEnum();\n\n  readonly label: string;\n\n  constructor(label: string) {\n    super();\n    this.label = label;\n  }\n\n  static lookupByLabel(label: string): ConnectionStatus {\n    return ConnectionStatus.enumValues.map(e => <ConnectionStatus><unknown>e).find(value => value.label === label);\n  }\n\n  isConnected(): boolean {\n    return this === ConnectionStatus.CONNECTED;\n  }\n\n  isError(): boolean {\n    return this === ConnectionStatus.ERROR;\n  }\n\n  isDisconnected(): boolean {\n    return this === ConnectionStatus.DISCONNECTED;\n  }\n\n  isUnconnected(): boolean {\n    return this === ConnectionStatus.UNCONNECTED;\n  }\n}\n\nexport enum HistoryMode {\n  COV,\n  TRIGGERED,\n}\n","import { Constructor, isFunction } from '../../utils/helper';\nimport { Node, NodeSettingConfig} from '../node';\nimport { NodeInput, NodeSetting, Type } from '../node-io';\n\n/**\n * Represents decorator to evaluate {@link NodeSetting} by {@link NodeInput}\n */\nexport interface NodeInputEvaluation {\n  reEvaluateSettingByInput(inputs: { [p: number]: NodeInput }, settings: { [p: string]: NodeSetting }): void;\n}\n\nexport class NodeInputOutputDecoratorProxy implements NodeInputEvaluation {\n  func: any;\n\n  private constructor(func: any) {\n    this.func = func;\n  }\n\n  // static execute(func: any): void {\n  //   new NodeInputOutputDecoratorProxy(func).reEvaluateSettingByInput(this.inputs, this.settings);\n  // }\n\n  reEvaluateSettingByInput(inputs: { [p: number]: NodeInput }, settings: { [p: string]: NodeSetting }): void {\n    if (this.func && isFunction(this.func)) {\n      this.func(inputs, settings);\n    }\n  }\n}\n\nexport interface HasEnabled {\n  isEnabled(): boolean;\n}\n\nexport function AbleEnableNode<TBase extends Constructor<Node>>(Base: TBase) {\n  abstract class AbleEnableNodeBase extends Base implements NodeInputEvaluation, HasEnabled {\n    mixinEnableInputSetting(): NodeSettingConfig {\n      this.addInputWithSettings(this.enableSettingKey(), Type.BOOLEAN, false, this.enableDescription());\n      return { conditions: {} };\n    }\n\n    reEvaluateSettingByInput(inputs: { [p: number]: NodeInput }, settings: { [p: string]: NodeSetting }): void {\n      //TODO: need find a way to auto execute super mixin method\n      // NodeInputOutputDecoratorProxy.execute(super['reEvaluateSettingByInput']);\n      if (isFunction(super['reEvaluateSettingByInput'])) {\n        super['reEvaluateSettingByInput'](inputs, settings);\n      }\n      this.settings[this.enableSettingKey()].value =\n        this.inputs[this.enableInputIdx()].data ?? this.settings[this.enableSettingKey()].value;\n    }\n\n    protected abstract enableDescription(): string;\n\n    protected enableInputIdx(): number {\n      return 0;\n    }\n\n    protected enableSettingKey(): string {\n      return 'enable';\n    }\n\n    isEnabled(): boolean {\n      let parentIsEnabled = true;\n      if (isFunction(super['isEnabled'])) {\n        parentIsEnabled = super['isEnabled']();\n      }\n      return parentIsEnabled && this.settings[this.enableSettingKey()]?.value;\n    }\n  }\n\n  return AbleEnableNodeBase;\n}\n","//\n// BACnet device implementation.\n// Property of an object, such as the current value or maximum reading.\n//\n\nconst nodeUtil = require('util');\nconst bacnet   = require('node-bacnet');\n\nconst propertyTypeMap = require('./typemap-property');\nconst Util            = require('./util');\n\nconst pi = bacnet && bacnet.enum.PropertyIdentifier;\n\nconst typeEnumMap = bacnet && {\n  [pi.OBJECT_TYPE]: bacnet.enum.ObjectType,\n};\n\nclass BACnetObjectProperty {\n  constructor(obj, propertyId, typeId = undefined, readOnly = false) {\n    this.obj           = obj;\n    this.propertyId    = propertyId;\n    this.typeId        = typeId === undefined || typeId === null ? propertyTypeMap[propertyId] : typeId;\n    this.readOnly      = readOnly;\n    this.subscriptions = [];\n    if (this.typeId === undefined) {\n      throw new Error(\n        `Property ${Util.getPropName(propertyId)} has no default ` +\n        `type set, you must specify one yourself or update the bacnet-device ` +\n        `Node module.`,\n      );\n    }\n\n    this.callbacks = [];\n  }\n\n  get value() {\n    return this._value;\n  }\n\n  set value(newValue) {\n    if (this.readOnly) {\n      throw new Error(`Property ${Util.getPropName(this.propertyId)} cannot be changed.`);\n    }\n    this._value = newValue;\n\n    // Notify any subscribeCov listeners.\n    this.obj.onPropertyChanged(this);\n\n    // Notify and subscribeProperty listeners.\n    this.callbacks.forEach(cb => {\n      cb.fn(this);\n    });\n  }\n\n  addCallback(id, fn) {\n    this.callbacks.push({ id: id, fn: fn });\n  }\n\n  removeCallback(id) {\n    this.callbacks = this.callbacks.filter(cb => cb.id !== id);\n  }\n\n  valueAsString() {\n    let lookup = typeEnumMap[this.propertyId];\n    let value  = this._value;\n    if (lookup) {\n      value = Util.getEnumName(lookup, value);\n    }\n    return value;\n  }\n\n  toString() {\n    return `BACnetObjectProperty { ${Util.getPropName(\n      this.propertyId,\n    )} = ${this.valueAsString()} }`;\n  }\n\n  [nodeUtil.inspect.custom]() {\n    return this.toString();\n  }\n}\n\nmodule.exports = BACnetObjectProperty;\n","import { Enumify } from 'enumify';\nimport { PointModel, PointValue, PointValueCreator } from '../../../../../backend/models/point-model';\nimport { isNull } from '../../../../../utils/helper';\n\nexport class PointKind extends Enumify {\n  static ANALOG_INPUT = new PointKind(0, 'analog-input');\n  static ANALOG_OUTPUT = new PointKind(1, 'analog-output');\n  static ANALOG_VALUE = new PointKind(2, 'analog-value');\n  static BINARY_INPUT = new PointKind(3, 'binary-input');\n  static BINARY_OUTPUT = new PointKind(4, 'binary-output');\n  static BINARY_VALUE = new PointKind(5, 'binary-value');\n  static MULTI_STATE_INPUT = new PointKind(13, 'multi-state-input');\n  static MULTI_STATE_OUTPUT = new PointKind(14, 'multi-state-output');\n  static MULTI_STATE_VALUE = new PointKind(19, 'multi-state-value');\n\n  static _ = PointKind.closeEnum();\n\n  readonly value: number;\n  readonly label: string;\n\n  constructor(value: number, label: string) {\n    super();\n    this.value = value;\n    this.label = label;\n  }\n\n  static items(): { text: string; value: any }[] {\n    return PointKind.enumKeys.map(k => {\n      return { value: k, text: (<PointKind>PointKind.enumValueOf(k)).label };\n    });\n  }\n\n  static lookupByValue(objectType: number): PointKind {\n    return PointKind.enumValues.map(pk => <PointKind>pk).find(pk => pk.value === objectType);\n  }\n\n  static lookupByLabel(objectType: string): PointKind {\n    return PointKind.enumValues.map(pk => <PointKind>pk).find(pk => pk.label === objectType);\n  }\n}\n\nexport interface BacnetPoint extends PointModel {\n  objectInstance: number;\n\n  objectType: PointKind;\n\n  objectName: string;\n}\n\nexport class BacnetPointCreator {\n  private constructor() {\n  }\n\n  static from = (json: object): BacnetPoint => {\n    if (isNull(json)) {\n      return null;\n    }\n    // @ts-ignore\n    let pv = json?.pointValue;\n    // @ts-ignore\n    return BacnetPointCreator.create(json?.enabled, json?.objectInstance, json?.objectType, json?.objectName,\n                                     pv?.presentValue, pv?.priority, pv?.priorityArray);\n  };\n\n  static create = (enabled: boolean, objectInstance: number, objectType: PointKind, objectName: string,\n                   presentValue?: number, priority?: number, priorityArray?: any): BacnetPoint => {\n    return BacnetPointCreator.by(enabled, objectInstance, objectType, objectName,\n                                 PointValueCreator.create(presentValue, priority, priorityArray));\n  };\n\n  static by = (enabled: boolean, objectInstance: number, objectType: PointKind, objectName: string,\n               pointValue: PointValue): BacnetPoint => {\n    return new DefaultBacnetPoint(enabled, objectInstance, objectType, objectName, pointValue);\n  };\n}\n\nclass DefaultBacnetPoint implements BacnetPoint {\n  enabled: boolean;\n  objectInstance: number;\n  objectType: PointKind;\n  objectName: string;\n  pointValue: PointValue;\n\n  constructor(enabled: boolean, objectInstance: number, objectType: PointKind, objectName: string,\n              pointValue: PointValue) {\n    this.enabled = enabled || false;\n    this.objectInstance = objectInstance;\n    this.objectType = objectType;\n    this.objectName = objectName;\n    this.pointValue = pointValue;\n  }\n\n  identifier(): string {\n    return `${this.objectType.enumKey}:${this.objectInstance}`;\n  }\n\n  mightOnlyValueChanged(bp: BacnetPoint): boolean {\n    return (this.enabled === bp?.enabled && this.objectInstance === bp?.objectInstance &&\n            this.objectType === bp?.objectType && this.objectName === bp?.objectName);\n  }\n\n  equals(bp: BacnetPoint): boolean {\n    return this.identifier() === bp?.identifier();\n  }\n}\n","import { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\n\nexport enum LORA_DATA_TYPE_NAMES {\n  INT8 = 0,\n  UINT8,\n  INT16,\n  UINT16,\n  INT32,\n  UINT32,\n  FLOAT,\n}\n\nexport const LORA_DATA_TYPE_LENGTHS = [\n  1, // INT8\n  1, // UINT8\n  2, // INT16\n  2, // UINT16\n  4, // INT32\n  4, // UINT32\n  4, // FLOAT\n];\n\nexport class LoRaRawTwoWayInput extends Node {\n  payloadDefinition: Array<LORA_DATA_TYPE_NAMES> = [];\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/lora-raw\"][\"lora-raw-two-way-in\"].title;\n    this.description = NODE_INFO[\"protocols/lora-raw\"][\"lora-raw-two-way-in\"].description;\n    this.settings['enable'] = NodeSetting.create({\n      description: 'enable',\n      type: SettingType.BOOLEAN,\n      value: false,\n    });\n    this.settings['senderId'] = NodeSetting.create({\n      description: 'sender Id',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n    this.settings['port'] = NodeSetting.create({\n      description: 'port number',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n    this.settings['types'] = NodeSetting.create({\n      description: 'Types',\n      type: SettingType.READONLY,\n      value: 'INT8, INT16, INT32, FLOAT',\n      // value: 'INT8, UINT8, INT16, UINT16, INT32, UINT32, FLOAT',\n    });\n    this.settings['definition'] = NodeSetting.create({\n      description: 'payload definition (JSON)',\n      type: SettingType.STRING,\n      value: '',\n    });\n\n    this.addInput('rawInput', Type.STRING);\n    this.addOutput('error', Type.STRING);\n  }\n\n  init() {\n    this.updateOutputs();\n  }\n\n  onAdded() {\n    this.payloadDefinition = this.stringToDataTypes(this.settings['definition'].value);\n  }\n\n  onInputUpdated() {\n    let data: string = this.getInputData(0) || '';\n    if (this.settings['enable'].value === false) return;\n    if (!data) return;\n    if (!data || data.length <= 6 * 2 || data.substring(0, 8) !== 'FFFFFFFF') {\n      // 6 = 4(ff's) + 1(slaveid) + 1(port). (x2 for HEX)\n      return;\n    }\n\n    const senderId = parseInt(data.substring(10, 12), 16);\n    const port = parseInt(data.substring(12, 14), 16);\n\n    if (senderId !== this.settings['senderId'].value || port !== this.settings['port'].value) {\n      return;\n    }\n\n    // remove newline\n    if (data.substring(data.length - 2, data.length) === '\\r\\n') {\n      data = data.substring(0, data.length - 2);\n    } else if (data.length % 2 === 1 && data[data.length - 1] === '\\n') {\n      data = data.substring(0, data.length - 1);\n    }\n\n    // PARSING\n\n    const parseError = msg => {\n      this.setOutputData(0, 'parse error: ' + msg);\n    };\n\n    // convert hex string to buffer\n    let buffer = Buffer.from(data.substring(14), 'hex');\n    let pointParsed = new Array<boolean>(this.payloadDefinition.length);\n    pointParsed.fill(false);\n\n    for (let i = 0; i < buffer.length; ) {\n      let point = buffer.readUInt8(i++);\n      let type_length = 0;\n\n      if (point >= this.payloadDefinition.length) {\n        parseError('invalid point ' + point);\n        return;\n      }\n      if (pointParsed[point]) {\n        parseError('point already parsed: ' + point);\n        return;\n      }\n\n      type_length = LORA_DATA_TYPE_LENGTHS[this.payloadDefinition[point]];\n\n      if (buffer.length - i < type_length) {\n        parseError('invalid length');\n        return;\n      }\n\n      switch (this.payloadDefinition[point]) {\n        case LORA_DATA_TYPE_NAMES.INT8:\n          this.setOutputData(point + 1, buffer.readInt8(i));\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT8:\n          this.setOutputData(point + 1, buffer.readUInt8(i));\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT16:\n          this.setOutputData(point + 1, buffer.readInt16LE(i));\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT16:\n          this.setOutputData(point + 1, buffer.readUInt16LE(i));\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT32:\n          this.setOutputData(point + 1, buffer.readInt32LE(i));\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT32:\n          this.setOutputData(point + 1, buffer.readUInt32LE(i));\n          break;\n\n        case LORA_DATA_TYPE_NAMES.FLOAT:\n          this.setOutputData(point + 1, buffer.readFloatLE(i));\n          break;\n      }\n      pointParsed[point] = true;\n      i += type_length;\n    }\n\n    this.setOutputData(0, null);\n  }\n\n  onAfterSettingsChange() {\n    this.payloadDefinition = this.updateOutputs();\n    this.setOutputData(0, null);\n    this.onInputUpdated();\n  }\n\n  private updateOutputs() {\n    const data = this.stringToDataTypes(this.settings['definition'].value);\n    if (this.payloadDefinition.length !== data.length) {\n      const outputsCount = this.getOutputsCount();\n      for (let i = 1; i < outputsCount; i++) {\n        this.removeOutput(i);\n      }\n      for (let i = 0; i < data.length; i++) {\n        this.addOutput(i.toString(), Type.NUMBER);\n      }\n      this.updateNodeOutput();\n    }\n    return data;\n  }\n\n  stringToDataTypes(str) {\n    const data = str\n      .toUpperCase()\n      .replace(/ /g, '')\n      .split(',')\n      .filter(x => x !== '');\n\n    if (data && data.length) {\n      for (let i = 0; i < data.length; i++) {\n        if (LORA_DATA_TYPE_NAMES[data[i]] === undefined) {\n          this.setOutputData(1, 'settings parse error');\n          return undefined;\n        }\n        data[i] = LORA_DATA_TYPE_NAMES[data[i]];\n      }\n    }\n    return data;\n  }\n}\nContainer.registerNodeType('protocols/lora-raw/lora-raw-two-way-in', LoRaRawTwoWayInput);\n","module.exports = require(\"crypto\");","module.exports = require(\"modbus-serial\");","module.exports = require(\"net\");","module.exports = require(\"mqtt-match\");","import { PointValue } from '../../../../backend/models/point-model';\nimport { NodeStoreItem } from '../../../../utils/pattern';\nimport { OneIdentifierManyNodeStore, OneIdentifierOneNodeStore } from '../model/container-node-store';\n\nexport class MqttPointStoreItem implements NodeStoreItem {\n\n  identifier: string;\n  nodeId: string;\n  enabled: boolean;\n  lenient?: boolean;\n  publisher: {\n    identifier?: string,\n    prev?: NodeStoreItem,\n    data?: any,\n    callback?: Function\n  };\n  subscriber: {\n    identifier?: string,\n    prev?: NodeStoreItem,\n    callback?: Function\n  };\n\n  constructor(identifier: string, nodeId: string, enabled: boolean,\n              publisher: { identifier?: string; prev?: NodeStoreItem; data?: any; callback?: Function },\n              subscriber: { identifier?: string; prev?: NodeStoreItem; callback?: Function }) {\n    this.identifier = identifier;\n    this.nodeId = nodeId;\n    this.enabled = enabled;\n    this.publisher = publisher;\n    this.subscriber = subscriber;\n  }\n\n  toPublisher(): NodeStoreItem {\n    return this.to(this.publisher as NodeStoreItem);\n  }\n\n  toSubscriber(): NodeStoreItem {\n    return this.to(this.subscriber as NodeStoreItem);\n  }\n\n  private to(ps: NodeStoreItem) {\n    return {\n      identifier: ps?.identifier ?? this.identifier,\n      nodeId    : this.nodeId,\n      enabled   : this.enabled,\n      prev      : ps?.prev,\n      data      : ps?.data,\n      lenient   : this.lenient,\n      callback  : ps?.callback,\n    } as NodeStoreItem;\n  }\n}\n\n//TODO: current only per MQTT topic per point node. Can enhance to support multiple point nodes with same topic\nexport class MqttPublisherStore extends OneIdentifierOneNodeStore<PointValue> {\n\n  protected alreadyExistedMsg(payload: NodeStoreItem): string {\n    return `Already exist MQTT publisher bind to topic ${payload?.identifier}`;\n  }\n\n}\n\nexport class MqttSubscriberStore extends OneIdentifierManyNodeStore<any> {\n\n  protected alreadyExistedMsg(payload: NodeStoreItem): string {\n    return `Already existed MQTT subscriber bind to topic ${payload?.identifier} with node id ${payload.nodeId}`;\n  }\n\n}\n","module.exports = require(\"serialport\");","export default class NodeColours {\n  /**\n   * Changes the node colour for the user\n   * NORMAL, light grey\n   * INFO, light green\n   * WARNING, light orange\n   * ERROR, light red\n   * @param self {string} pass in this instance\n   * @param NodeState {string} pass in the colour to use\n   */\n    static nodeColourChange(self, NodeState) {\n        self.setNodeState(NodeState);\n    }\n}\n","module.exports = require(\"source-map-support\");","module.exports = require(\"process\");","module.exports = require(\"minimist\");","module.exports = require(\"dotenv\");","import { Colors, create } from 'logplease';\nimport { Database } from '../database/database';\nimport {\n  EDGES_PARENT_CONTAINER_TYPE,\n  MODULES_PARENT_CONTAINER_TYPE,\n  SERVICES_PARENT_CONTAINER_TYPE,\n} from '../nodes/constants';\nimport { Container, ContainerRegistry } from '../nodes/container';\nimport { Node } from '../nodes/node';\nimport { NodeFactory } from '../nodes/node-factory';\nimport { SerializedNode } from '../nodes/node-interface';\nimport { EdgesParentContainerNode } from '../nodes/nodes/IoT/datapoint-node';\nimport { ModulesParentContainerNode, ServicesParentContainerNode } from '../nodes/nodes/IoT/installer-node';\n\nconst logger = create('backend', { color: Colors.Yellow });\n\nexport interface BackendSyncConfiguration {\n  enabled: boolean,\n  baseUrl: string,\n  nodeRefreshIntervalSeconds: number,\n  pointRefreshIntervalSeconds: number,\n  nodeDistance: number\n}\n\nexport class Backend {\n  database: Database;\n  backendSyncCfg: BackendSyncConfiguration;\n  edgesContainer: EdgesParentContainerNode;\n  modulesContainer: ModulesParentContainerNode;\n  servicesContainer: ServicesParentContainerNode;\n\n  constructor(database: Database, backendSyncCfg: BackendSyncConfiguration) {\n    this.database = database;\n    this.backendSyncCfg = backendSyncCfg;\n  }\n\n  start(): void {\n    if (!this.backendSyncCfg.enabled) {\n      return;\n    }\n    this.ensureParentContainers().then(() => this.refreshPeriodically());\n  }\n\n  private ensureParentContainers(): Promise<any> {\n    return this.findOrCreateNode(EDGES_PARENT_CONTAINER_TYPE, node => node instanceof EdgesParentContainerNode)\n               .then(edgesContainer => (this.edgesContainer = edgesContainer as EdgesParentContainerNode))\n               .then(() => this.findOrCreateNode(MODULES_PARENT_CONTAINER_TYPE,\n                                                 node => node instanceof ModulesParentContainerNode))\n               .then(modulesContainer => (this.modulesContainer = modulesContainer as ModulesParentContainerNode))\n               .then(() => this.findOrCreateNode(SERVICES_PARENT_CONTAINER_TYPE,\n                                                 node => node instanceof ServicesParentContainerNode))\n               .then(servicesContainer => (this.servicesContainer = servicesContainer as ServicesParentContainerNode));\n  }\n\n  private findOrCreateNode<N extends Node>(type_name: string, f: (Node) => boolean): Promise<N> {\n    const root: Container = ContainerRegistry.instance().rootContainer();\n    return new Promise((resolve, reject) => {\n      const existingNode = root.getNodes().find(f);\n      if (existingNode) {\n        resolve(<N>existingNode);\n      } else {\n        return root.nodeRegistry().register(NodeFactory.create(<SerializedNode>{ type: type_name }, true));\n      }\n    });\n  }\n\n  private refreshPeriodically() {\n    setInterval(() => this.refreshParentContainers(), this.backendSyncCfg.nodeRefreshIntervalSeconds * 1000);\n  }\n\n  private refreshParentContainers() {\n    this.edgesContainer.syncWithBackend();\n    this.modulesContainer.syncWithBackend();\n    this.servicesContainer.syncWithBackend();\n  }\n}\n","import { IOType } from '../nodes/node-io';\nimport { compareNodeIO, SlimNodeIO } from '../nodes/node-link';\nimport { isNotNull } from '../utils/helper';\nimport { ApiResult } from './api-result';\n\nexport class LinkResult implements ApiResult<object> {\n\n  message: string;\n  private readonly _map: {\n    [cid: string]: {\n      [nid: string]: {\n        nid: number | string,\n        inputs: { [ioId: string]: SlimNodeIO },\n        outputs: { [ioId: string]: SlimNodeIO[] }\n      }\n    }\n  };\n\n  constructor(data?: {\n    [cid: string]: {\n      [nid: string]: {\n        nid: number | string,\n        inputs: { [ioId: string]: SlimNodeIO },\n        outputs: { [ioId: string]: SlimNodeIO[] }\n      }\n    }\n  }) {\n    this._map = data ?? {};\n  }\n\n  push(cid: number | string, nid: number | string, type: IOType, ioId: string | number,\n       ...links: SlimNodeIO[]): LinkResult {\n    this._map[cid] = this._map[cid] ?? {};\n    this._map[cid][nid] = this._map[cid][nid] ?? { nid: nid, inputs: {}, outputs: {} };\n    if (type === 'input') {\n      this._map[cid][nid].inputs[ioId] = (links ?? [])[0] ?? null;\n    }\n    if (type === 'output') {\n      const o = this._map[cid][nid].outputs[ioId] ?? [];\n      const u = links ?? [];\n      this._map[cid][nid].outputs[ioId] = o.concat(u.filter(io1 => !o.some(io2 => compareNodeIO(io1, io2))));\n    }\n    return this;\n  }\n\n  hasInput(cid: number, nid: number, ioId: string | number): boolean {\n    return (this._map[cid] ?? {})[nid]?.inputs[ioId] !== undefined;\n  }\n\n  hasOutput(cid: number, nid: number, ioId: number): boolean {\n    return isNotNull((this._map[cid] ?? {})[nid]?.outputs[ioId]);\n  }\n\n  result(): {\n    [cid: string]: {\n      [nid: string]: {\n        nid: number | string,\n        inputs: { [ioId: string]: SlimNodeIO },\n        outputs: { [ioId: string]: SlimNodeIO[] }\n      }\n    }\n  } {\n    return this._map;\n  }\n\n  merge(r: LinkResult): LinkResult {\n    Object.keys(r.result()).forEach(cid => Object.values(r.result()[cid]).forEach(d => {\n      Object.keys(d.inputs).forEach(k => this.push(cid, d.nid, 'input', k, d.inputs[k]));\n      Object.keys(d.outputs).forEach(k => this.push(cid, d.nid, 'output', k, ...d.outputs[k]));\n    }));\n    return this;\n  }\n\n}\n","import { DispatchNode } from './DispatchNode';\n\nexport const UNKNOWN_POINT_NAME = 'Unknown';\n\nexport interface Point {\n  msg: any;\n  name: string;\n  listeners: DispatchNode[];\n  soft: boolean;\n}\n\nexport interface Points {\n  [point: string]: Point;\n}\n\nexport interface Store {\n  [protocol: string]: { points: Points };\n}\n\nexport interface IPubSub {\n  getStore(): Store;\n\n  /**\n   * Add point on a protocol whose output will be subscribed by listeners\n   * @param {string} protocol - protocol for making things on different selection\n   * @param {string} point - unique point id `${cid}/${id}`\n   * @param {string} name - display name for point\n   * @param {boolean} soft - true when it's real, false when it's unreal added from DispatchNode\n   * soft is added for subscribing to the topic when topic is not added\n   */\n  addPoint(protocol: string, point: string, name: string, soft: boolean): void;\n\n  /**\n   * Remove added input point from it's protocol\n   * @param {string} protocol - protocol for making things on different selection\n   * @param point - unique point id `${cid}/${id}`\n   */\n  removePoint(protocol: string, point: string): void;\n\n  /**\n   * When `name` gets changed we need to notify it's changes to all subscriber\n   * @param {string} protocol - protocol for making things on different selection\n   * @param {string} point - unique point id `${cid}/${id}`\n   * @param {string} name - display name for point\n   */\n  renamePoint(protocol: string, point: string, name: string): void;\n  /**\n   * Dispatch value for listeners\n   * @param {string} protocol - protocol for making things on different selection\n   * @param {string} point - unique point id `${cid}/${id}`\n   * @param {any} value - value to send to it's listener\n   */\n  dispatch(protocol: string, point: string, value: any): void;\n\n  /**\n   * Add node for subscription on particular protocol and point\n   * @param {string} protocol - protocol for making things on different selection\n   * @param {string} point - unique point id `${cid}/${id}`\n   * @param {string} name - display name for point\n   * @param {DispatchNode} node - listener node for the registration\n   */\n  connect(protocol: string, point: string, name: string, node: DispatchNode): void;\n\n  /**\n   * Remove node from the subscription\n   * @param {string} protocol - protocol for making things on different selection\n   * @param {string} point - unique point id `${cid}/${id}`\n   * @param {DispatchNode} node - listener node for the registration\n   */\n  disconnect(protocol: string, point: string, node: DispatchNode): void;\n}\n","\nexport default class EdgeHelp {\n\n    static NetworkDesc =\n        `## Description\\n ` +\n        ` The is node is used for reading and writing values to the edge-io-28. This node uses an internal rest-api to talk to the edge-io-28. No details need to be set\\n ` +\n        `   \\n ` +\n        `### Enable\\n ` +\n        `   \\n ` +\n        ` The point enable will disable any new value being sent to the node **output**  \\n ` +\n        `   \\n ` +\n        `### Polling Interval\\n ` +\n        `   \\n ` +\n        ` This will change the poll rate of the edge-io-28 inputs. A normal setting is 1 second\\n ` +\n        ` The faster the polling rate is the higher the memory usage is\\n ` +\n        `   \\n ` +\n        `### Polling Interval Time Setting\\n ` +\n        `   \\n ` +\n        `Used in conjugation with the **Polling Interval**. Make the selection for the time units for **Seconds**, **Minutes**, **Hours** \\n ` +\n        `   \\n `;\n\n        static inputsDesc =\n        `## Description\\n ` +\n        ` The is node is used in conjunction with the edge-io-28. This node uses an internal rest-api to talk to the edge-io-28\\n ` +\n        `   \\n ` +\n        `## Digital Input\\n ` +\n        `   \\n ` +\n        `A total of 14 DIs can be used on the edge-io-28. There are 7 DIs and 7 UIs\\n ` +\n        `   \\n ` +\n        `### DIs (From the UIs)  \\n ` +\n        `   \\n ` +\n        ` The UIs can be setup and used to read a status change from a *Digital Input* (7 off dry input)\\n ` +\n        `   \\n ` +\n        `### DIs (From the UIs)  \\n ` +\n        `   \\n ` +\n        ` The UIs can be setup and used to read a status change from a *Digital Input* (7 off dry input)\\n ` +\n        `   \\n ` +\n        `## Universal Input\\n ` +\n        `   \\n ` +\n        ` The Universal Input or Analogue Input (7 off) can be used in a number of combinations for reading different sensor types\\n ` +\n        `   \\n ` +\n        `### UI as 0/10dc  \\n ` +\n        `   \\n ` +\n        ` When configured as a UI 0/10dc the node output value will return a value that is set in the **Low scale** & **High scale**\\n ` +\n        `   \\n ` +\n        `### UI as 0/20ma and or 4/20ma \\n ` +\n        `   \\n ` +\n        ` When configured as a UI 0/20ma and or 4/20ma the node output value will return a value that is set in the **Low scale** & **High scale**\\n ` +\n        `   \\n ` +\n        `### UI as 10K thermistor \\n ` +\n        `   \\n ` +\n        ` When configured as a UI 10K thermistor type 2 the node output value will return a value based on the resistance and corresponding temperature\\n ` +\n        `   \\n ` +\n        `## Point Configuration\\n ` +\n        `### Point Enable\\n ` +\n        `   \\n ` +\n        ` The point enable will disable any new value being sent to the node **output**  \\n ` +\n        `   \\n ` +\n        `### Point Debug\\n ` +\n        `   \\n ` +\n        ` The point debug will allow the node **output** to always send the value even if there is node change\\n ` +\n        ` This is just a guide to see if the polling is working\\n ` +\n        `   \\n ` +\n        `### Point Selection\\n ` +\n        `   \\n ` +\n        ` 1. Select the **Point Type** for example UO  \\n ` +\n        ` 2. Select the **Point Number** for example UO-1   \\n ` +\n        ` **Note:** You cant set a type **Digital** and point number **UI1** the correct types must be matched with the correct point numbers  \\n ` +\n        `   \\n ` +\n        `### Point Units\\n ` +\n        `   \\n ` +\n        ` The units can be set as required see steps below.  \\n ` +\n        ` 1. Select the **Units Category**.  \\n ` +\n        ` 2. Lock (**lock icon**) the node setting's and hit the **save** button to return the units types.  \\n ` +\n        ` 3. Select the units type.  \\n ` +\n        ` 4. Save and close the node as required  \\n ` +\n        `   \\n ` +\n        `### Point Low Scale\\n ` +\n        `   \\n ` +\n        ` This is used in when the UI type is set as a 0-10dc or 4-20ma. The **High Scale**  must be set as well \\n ` +\n        ` For example if the point type is 0-10dc and the *Low Scale* is set to 0 and *High Scale* is set to 100 \\   \\n ` +\n        ` the node output value when at 0vdc will return 0 and at 10vdc the node output value will return 100 \\   \\n ` +\n        `   \\n ` +\n        `### Point High Scale\\n ` +\n        `   \\n ` +\n        ` This is used in when the UI type is set as a 0-10dc or 4-20ma (See **Low Scale** setting for more info).  \\n ` +\n        `   \\n ` +\n        `### Point Decimal Places\\n ` +\n        `   \\n ` +\n        ` The units can be set as required see steps below.  \\n ` +\n        `   \\n ` +\n        `### Point Offset\\n ` +\n        `   \\n ` +\n        ` Enter a float value to offset. This will apply an math add function to the original value  \\n ` +\n        ` Example original value is 20 and offset is -1 the **node output** value result will be 19 \\n ` +\n        `   \\n ` +\n        `### Point Decimal Places\\n ` +\n        `   \\n ` +\n        ` Enter a int value to Decimal. This will apply an math round function to the original value \\n ` +\n        ` Example original value is 99.9999 and the device places is set to 0  the **node output** value result will be 99 \\n ` +\n        `   \\n ` +\n        `### Math Function\\n ` +\n        `   \\n ` +\n        ` The units can be set as required see steps below.  \\n ` +\n        ` 1. **na** Will apply not math.  \\n ` +\n        ` 2. **add** Will add a **value** node output.  \\n ` +\n        ` 3. **subtract** Will subtract a **value** node output.  \\n ` +\n        ` 4. **multiply** Will multiply a **value** node output.  \\n ` +\n        ` 5. **divide** Will divide a **value** node output. \\n ` +\n        ` 6. **invert** Will invert the node output. Example in original value = 0 the node output value will = 1.   \\n ` +\n        `   \\n ` +\n        `###  History Settings Database Type\\n ` +\n        `   \\n ` +\n        ` The are two options for the database type. The data can either be pushed to influxDB or PostgreSQL.  \\n ` +\n        ` 1. Select required database type (if type is *Nube DB PostgreSQL* *no more steps are required*).  \\n ` +\n        ` 2. Enter DB details like IP, port, username and password(if type is *InfluxDB*)\\n ` +\n        `   \\n ` +\n        `#### History Settings History Type\\n ` +\n        `   \\n ` +\n        ` 1. **Change Of Value (COV)**.  \\n ` +\n        ` 2. **Periodic**.  \\n ` +\n        ` 3. **Trigger Only**.  \\n ` +\n        `   \\n ` +\n        `####  History Settings Local Storage Limit\\n ` +\n        `   \\n ` +\n        ` 1. **Change Of Value (COV)**.  \\n ` +\n        ` 2. **Periodic**.  \\n ` +\n        ` 3. **Trigger Only**.  \\n ` +\n        `   \\n ` +\n        `####  History Settings Round minutes\\n ` +\n        `   \\n ` +\n        ` 1. **Change Of Value (COV)**.  \\n ` +\n        ` 2. **Periodic**.  \\n ` +\n        ` 3. **Trigger Only**.  \\n ` +\n        `   \\n ` +\n        `### Alarm Settings\\n ` +\n        `   \\n ` +\n        ` to be added  \\n ` +\n        `   \\n ` +\n        `### Tag Settings\\n ` +\n        `   \\n ` +\n        ` to be added  \\n `;\n  \n\n\n        static outputsDesc =\n        `## Description\\n ` +\n        ` The is node is used in conjunction with the edge-io-28. This node uses an internal rest-api to talk to the edge-io-28\\n ` +\n        `   \\n ` +\n        `## Digital Output\\n ` +\n        `   \\n ` +\n        ` The DOs can be used to drive a 0-12vdc relay (5 off) or an onboard Normally Open Relay (2 off)\\n ` +\n        `### DOs  \\n ` +\n        `   \\n ` +\n        ` The input of the node can will drive the output on/true  with any value > 1 or a true value \\n ` +\n        ` Any value < 0 or a false will drive the output off/false \\n ` +\n        `### Relay Output  \\n ` +\n        `   \\n ` +\n        ` The input of the node can will drive the output on/true  with any value > 1 or a true value \\n ` +\n        ` Any value < 0 or a false will drive the output off/false \\n ` +\n        `## Universal Output\\n ` +\n        `   \\n ` +\n        ` The Universal Output or Analogue Output (7 off) has a voltage range of 0 to 12vdc\\n ` +\n        ` The UOs can be used as an AO floating point 0/10dc or a binary on/off 0-12dc \\n ` +\n        `### UOs as 0/10dc  \\n ` +\n        `   \\n ` +\n        ` When configured as a UOs a the node input value is a float value between 0/100 to drive a voltage of 0/10dc \\n ` +\n        `### UOs as On/Off  \\n ` +\n        `   \\n ` +\n        ` The input of the node can will drive the output on/true  with any value > 1 or a true value \\n ` +\n        ` Any value < 0 or a false will drive the output off/false \\n ` +\n        `## Point Configuration\\n ` +\n        `### Point Enable\\n ` +\n        `   \\n ` +\n        ` The point enable will disable any new value being sent to the node **output**  \\n ` +\n        `### Point Selection\\n ` +\n        `   \\n ` +\n        ` 1. Select the **Point Type** for example UO  \\n ` +\n        ` 2. Select the **Point Number** for example UO-1   \\n ` +\n        `### Point Settings\\n ` +\n        `   \\n ` +\n        ` The DOs can be used to drive a 0-12vdc relay (5 off) or an onboard Normally Open Relay (2 off)\\n ` +\n        `### Point Units\\n ` +\n        `   \\n ` +\n        ` The units can be set as required see steps below.  \\n ` +\n        ` 1. Select the **Units Category**.  \\n ` +\n        ` 2. Lock (**lock icon**) the node setting's and hit the **save** button to return the units types.  \\n ` +\n        ` 3. Select the units type.  \\n ` +\n        ` 4. Save and close the node as required  \\n ` +\n        `###  History Settings Database Type\\n ` +\n        `   \\n ` +\n        ` The are two options for the database type. The data can either be pushed to influxDB or PostgreSQL.  \\n ` +\n        ` 1. Select required database type (if type is *Nube DB PostgreSQL* *no more steps are required*).  \\n ` +\n        ` 2. Enter DB details like IP, port, username and password(if type is *InfluxDB*)\\n ` +\n        `#### History Settings History Type\\n ` +\n        `   \\n ` +\n        ` 1. **Change Of Value (COV)**.  \\n ` +\n        ` 2. **Periodic**.  \\n ` +\n        ` 3. **Trigger Only**.  \\n ` +\n        `####  History Settings Local Storage Limit\\n ` +\n        `   \\n ` +\n        ` 1. **Change Of Value (COV)**.  \\n ` +\n        ` 2. **Periodic**.  \\n ` +\n        ` 3. **Trigger Only**.  \\n ` +\n        `####  History Settings Round minutes\\n ` +\n        `   \\n ` +\n        ` 1. **Change Of Value (COV)**.  \\n ` +\n        ` 2. **Periodic**.  \\n ` +\n        ` 3. **Trigger Only**.  \\n ` +\n        `### Alarm Settings\\n ` +\n        `   \\n ` +\n        ` to be added  \\n ` +\n        `### Tag Settings\\n ` +\n        `   \\n ` +\n        ` to be added  \\n `;\n}\n\n","import { get, merge } from 'lodash';\nimport { Api } from '../../../backend/api';\nimport { DeviceAPI, EdgeAPI, FolderAPI, NetworkAPI, PointAPI } from '../../../backend/datapoint';\nimport { Device, Edge, Folder, Network, Point } from '../../../backend/entry';\nimport config from '../../../config';\nimport { singleton as actor } from '../../../promise-actor';\nimport { ERROR } from '../../../shared/websocket-events';\nimport {\n  DEVICE_CONTAINER_TYPE,\n  EDGE_CONTAINER_TYPE,\n  EDGES_PARENT_CONTAINER_TYPE,\n  GROUP_CONTAINER_TYPE,\n  NETWORK_CONTAINER_TYPE,\n  POINT_NODE_TYPE,\n} from '../../constants';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport ApiContainerNode from './shared/api-container-node';\nimport EntryNode from './shared/entry-node';\nimport Mixin from './shared/mixin';\nimport TopLevelApiContainerNode from './shared/top-level-api-container-node';\n\nconst doNothing = () => {\n};\n\nexport class EdgesParentContainerNode extends TopLevelApiContainerNode<Edge> {\n  title: string = 'Edges';\n  extra_node_types = []; // not possible to create edges via API\n\n  collectChildNodes(nodes: Node[]): Node[] {\n    return nodes.filter(n => n instanceof EdgeContainerNode);\n  }\n\n  protected initAPI(): Api<Edge> {\n    return new EdgeAPI();\n  }\n\n  protected fetchChildren(): Promise<Edge[]> {\n    return this.api.list();\n  }\n\n  protected childNodeType(): string[] {\n    return [EDGE_CONTAINER_TYPE];\n  }\n}\n\nexport class EdgeContainerNode extends ApiContainerNode<Edge> {\n  title: string = 'Edge Container';\n  settingFields = {\n    code            : SettingType.STRING,\n    customer_code   : SettingType.STRING,\n    side_code       : SettingType.STRING,\n    model           : SettingType.STRING,\n    firmware_version: SettingType.STRING,\n    data_version    : SettingType.STRING,\n  };\n\n  onAdded() {\n    this.ignore_remove = true;\n    this.removable = false;\n    this.movable = false;\n    super.onAdded();\n  }\n\n  createEntry() {\n    return Promise.reject('ERROR: Edge creation not currently supported.');\n  }\n\n  deleteEntry() {\n    return Promise.reject('ERROR: Edge deletion not currently supported.');\n  }\n\n  collectChildNodes(nodes: Node[]): Node[] {\n    return nodes.filter(v => v instanceof NetworkContainerNode);\n  }\n\n  namePrefix() {\n    return 'Edge';\n  }\n\n  protected initAPI(): Api<Edge> {\n    return new EdgeAPI();\n  }\n\n  protected fetchChildren() {\n    return new NetworkAPI().list(this.entryId());\n  }\n\n  protected childNodeType(): string[] {\n    return [NETWORK_CONTAINER_TYPE];\n  }\n}\n\nexport class NetworkContainerNode extends ApiContainerNode<Network> {\n  title: string = 'Network Container';\n  settingFields = {\n    state   : SettingType.READONLY,\n    protocol: SettingType.READONLY,\n    code    : SettingType.STRING,\n  };\n  private protocols = ['GPIO', 'BACNET', 'MODBUS', 'UNKNOWN'].map(point => ({\n    value: point,\n    text : point,\n  }));\n\n  createSettingForm = (entry: Network) => {\n    return merge(Mixin.prototype.createSettingForm.call(this, entry), {\n      protocol: {\n        value : this.protocols[this.protocols.length - 1].value,\n        type  : SettingType.DROPDOWN,\n        config: {\n          items: this.protocols,\n        },\n      },\n    });\n  };\n\n  collectChildNodes(nodes: Node[]): Node[] {\n    return nodes.filter(v => v instanceof DeviceContainerNode);\n  }\n\n  namePrefix() {\n    return 'Network';\n  }\n\n  createEntry() {\n    const edge_node = <EdgeContainerNode>this.container.nodeItself();\n    if (!(edge_node instanceof EdgeContainerNode)) {\n      const errorMessage =\n              'Error: Trying to create network, but network node does not exist inside a valid Edge container...';\n      console.log(errorMessage);\n      return Promise.reject(errorMessage);\n    }\n    return this.findFreeIdentifier().then(code => this.api.create(<any>{ code }, edge_node.entryId()));\n  }\n\n  protected initAPI(): Api<Network> {\n    return new NetworkAPI();\n  }\n\n  protected fetchChildren(): Promise<any[]> {\n    return new DeviceAPI().list(this.entryId());\n  }\n\n  protected childNodeType(): string[] {\n    return [DEVICE_CONTAINER_TYPE];\n  }\n}\n\nexport class DeviceContainerNode extends ApiContainerNode<Device> {\n  title: string = 'Device Container';\n  settingFields = {\n    state       : SettingType.READONLY,\n    code        : SettingType.STRING,\n    manufacturer: SettingType.STRING,\n    protocol    : SettingType.STRING,\n    type        : SettingType.STRING,\n  };\n\n  collectChildNodes(nodes: Node[]): Node[] {\n    return nodes.filter(v => v instanceof GroupContainerNode || v instanceof PointNode);\n  }\n\n  namePrefix() {\n    return 'Device';\n  }\n\n  createEntry() {\n    const network_node = <NetworkContainerNode>this.container.nodeItself();\n    const edge_node = <EdgeContainerNode>network_node.container.nodeItself();\n    if (!(network_node instanceof NetworkContainerNode)) {\n      const errorMessage =\n              'Error: Trying to create device, but device node does not exist inside a valid Network container...';\n      return Promise.reject(errorMessage);\n    }\n    return this.findFreeIdentifier().then(code => this.api.create(<any>{\n                                                                    edge_id: edge_node.entryId(),\n                                                                    device : {\n                                                                      type: 'EQUIPMENT',\n                                                                      code,\n                                                                    },\n                                                                  },\n                                                                  network_node.entryId()));\n  }\n\n  protected initAPI(): Api<Device> {\n    return new DeviceAPI();\n  }\n\n  protected fetchChildren(): Promise<Folder[]> {\n    return new FolderAPI().list(this.entryId());\n  }\n\n  protected childNodeType(): string[] {\n    return [GROUP_CONTAINER_TYPE, POINT_NODE_TYPE];\n  }\n}\n\nexport class GroupContainerNode extends ApiContainerNode<Folder> {\n  title: string = 'Group Container';\n  settingFields = {\n    name: SettingType.STRING,\n  };\n\n  collectChildNodes(nodes: Node[]): Node[] {\n    return nodes.filter(v => v instanceof PointNode);\n  }\n\n  namePrefix() {\n    return 'Group';\n  }\n\n  createEntry() {\n    const device_node = <DeviceContainerNode>this.container.nodeItself();\n    const network_node = <NetworkContainerNode>device_node.container.nodeItself();\n    const edge_node = <EdgeContainerNode>network_node.container.nodeItself();\n    if (\n      !(device_node instanceof DeviceContainerNode) ||\n      !(network_node instanceof NetworkContainerNode) ||\n      !(edge_node instanceof EdgeContainerNode)\n    ) {\n      const errorMessage =\n              'Error: Trying to create group, but group node does not exist inside a valid Device container hierarchy...';\n      return Promise.reject(errorMessage);\n    }\n    return this.findFreeIdentifier().then(name => this.api.create(<any>{ folder: { name } }, device_node.entryId()));\n  }\n\n  protected initAPI(): Api<Folder> {\n    return new FolderAPI();\n  }\n\n  protected fetchChildren(): Promise<any[]> {\n    return new PointAPI().list(this.entryId());\n  }\n\n  protected childNodeType() {\n    return [POINT_NODE_TYPE];\n  }\n}\n\nexport class PointNode extends Node implements EntryNode<Point> {\n  title: string;\n  backend: Api<Point>;\n  properties: {\n    entry: Point;\n    is_protected: boolean;\n  };\n  clonable = false;\n  movable = false;\n  settingFields = {\n    edge        : SettingType.READONLY,\n    network     : SettingType.READONLY,\n    code        : SettingType.STRING,\n    enabled     : SettingType.BOOLEAN,\n    kind        : SettingType.STRING,\n    measure_unit: SettingType.STRING,\n    offset      : SettingType.NUMBER,\n    precision   : SettingType.NUMBER,\n    protocol    : SettingType.STRING,\n    type        : SettingType.STRING,\n  };\n\n  entry = Mixin.prototype.entry.bind(this);\n  entryId = Mixin.prototype.entryId.bind(this);\n  onAfterSettingsChange = Mixin.prototype.onAfterSettingsChange.bind(this);\n  applyEntry = Mixin.prototype.applyEntry.bind(this);\n  deactivate = Mixin.prototype.deactivate.bind(this);\n  onCreated = Mixin.prototype.onCreated.bind(this);\n  makeIdentifier = Mixin.prototype.makeIdentifier.bind(this);\n  findFreeIdentifier = Mixin.prototype.findFreeIdentifier.bind(this);\n  getTakenIdentifiers = Mixin.prototype.getTakenIdentifiers.bind(this);\n  createSettingForm = Mixin.prototype.createSettingForm.bind(this);\n\n  private interval: number;\n\n  constructor() {\n    super();\n    this.title = 'Point container';\n    this.description = 'placeholder'; // FIXME\n    this.backend = new PointAPI();\n    this.settings['name'] = NodeSetting.create({\n      description: 'Point ID',\n      value      : this.title,\n      type       : SettingType.READONLY,\n    });\n    this.settings['priority'] = NodeSetting.create({\n      description: 'Priority',\n      value      : 1,\n      type       : SettingType.NUMBER,\n    });\n    this.addOutput('value', Type.NUMBER);\n    this.addInput('in', Type.NUMBER);\n  }\n\n  entryFactory() {\n    return new Point();\n  }\n\n  onAdded() {\n    Mixin.prototype.onAdded.call(this);\n    this.syncWithBackend();\n    this.interval = <any>(\n      setInterval(() => this.syncWithBackend(), config.backendSync.pointRefreshIntervalSeconds * 1000)\n    );\n  }\n\n  onRemoved() {\n    return Mixin.prototype.onRemoved.call(this);\n    // TODO: hmmm, wtf?\n    // if (this.interval) clearInterval(this.interval);\n  }\n\n  namePrefix() {\n    return 'Point';\n  }\n\n  syncWithBackend() {\n    // refactor into mixin and reuse\n    if (this.side !== Side.server) return;\n    actor.process(() => {\n      if (!this.entry()) return;\n      return (this.backend as PointAPI)\n        .fetchPointData(this.entryId())\n        .then(data => {\n          // we check again if the node is still active - this may have changed since the request was sent\n          if (!this.entry()) return; // TODO: Replace with isActive()\n          this.setOutputData(0, get(data, 'value'));\n        })\n        .catch(doNothing); // error response presumably means no value is set yet\n    });\n  }\n\n  onInputUpdated() {\n    let value = parseFloat(this.getInputData(0));\n    if (isNaN(value) || value === null) {\n      console.log('WARNING: Received non-numeric value on point inlet.');\n      return;\n    }\n    this.setOutputData(0, value);\n    const priority = Utils.clamp(this.settings['priority'].value, 1, 17);\n    (this.backend as PointAPI)\n      .updatePointData(this.entryId(), priority, value)\n      .catch(e => this.container.server_editor_socket.emit(ERROR, `Could not patch point value. ${e.message}`));\n  }\n\n  createEntry() {\n    const parentNode = this.container.nodeItself();\n    const device_node = parentNode.container.nodeItself();\n    const network_node = device_node.container.nodeItself();\n    const edge_node = network_node.container.nodeItself();\n    if (!(parentNode instanceof GroupContainerNode) || !(parentNode instanceof DeviceContainerNode)) {\n      const errorMessage =\n              'Error: Trying to create point, but point node does not exist inside a valid Group container hierarchy...';\n      console.log(errorMessage);\n      return Promise.reject(errorMessage);\n    }\n    return this.findFreeIdentifier().then(code => this.backend.create(\n      <any>{\n        device_id: (device_node as DeviceContainerNode).entryId(),\n        point    : {\n          network: (network_node as NetworkContainerNode).entryId(),\n          edge   : (edge_node as EdgeContainerNode).entryId(),\n          code,\n          unit   : { type: 'number' },\n          enabled: false,\n        },\n      },\n      parentNode.entryId(),\n                                          ),\n    );\n  }\n\n  updateEntry(body: Point) {\n    return this.backend.update(body, this.entryId());\n  }\n\n  deleteEntry() {\n    return this.backend.delete(this.entryId());\n  }\n}\n\nContainer.registerNodeType(EDGES_PARENT_CONTAINER_TYPE, EdgesParentContainerNode, null, false);\nContainer.registerNodeType(EDGE_CONTAINER_TYPE, EdgeContainerNode, null, false);\nContainer.registerNodeType(NETWORK_CONTAINER_TYPE, NetworkContainerNode, null, false);\nContainer.registerNodeType(DEVICE_CONTAINER_TYPE, DeviceContainerNode, null, false);\nContainer.registerNodeType(GROUP_CONTAINER_TYPE, GroupContainerNode, null, false);\nContainer.registerNodeType(POINT_NODE_TYPE, PointNode, null, false);\n","import { Api } from './api';\nimport { Device, Edge, Folder, Network, Point, PointData } from './entry';\n\nexport class EdgeAPI extends Api<Edge> {\n  list(_objId?: string): Promise<Edge[]> {\n    return this.fetchMany('edge', 'edges');\n  }\n\n  get(objId: string): Promise<Edge[]> {\n    return this.fetchOne(`edge/${objId}`);\n  }\n\n  create(obj: Edge): Promise<any> {\n    throw new Error('Method not implemented.');\n  }\n\n  update(obj: Edge, objId?: string): Promise<any> {\n    return this.client.patch(`edge/${objId}`, obj);\n  }\n\n  delete(objId: string): Promise<any> {\n    throw new Error('Method not implemented.');\n  }\n\n  factoryEntry(): Edge {\n    return this.newEntry(Edge);\n  }\n}\n\nexport class NetworkAPI extends Api<Network> {\n  list(objId?: string): Promise<Network[]> {\n    return this.fetchMany(`edge/${objId}/network`, 'networks');\n  }\n\n  get(objId: string): Promise<Network[]> {\n    return this.fetchOne(`network/${objId}`);\n  }\n\n  create(obj: Network, parentId: string): Promise<any> {\n    return this.client.post(`edge/${parentId}/network`, obj).then(this.extractData('resource'));\n  }\n\n  update(obj: Network, objId?: string): Promise<any> {\n    return this.client.patch(`network/${objId}`, obj);\n  }\n\n  delete(objId: string): Promise<any> {\n    return this.client.delete(`network/${objId}?_force=true`);\n  }\n\n  factoryEntry(): Network {\n    return this.newEntry(Network);\n  }\n}\n\nexport class DeviceAPI extends Api<Device> {\n  factoryEntry(): Device {\n    return this.newEntry(Device);\n  }\n\n  list(objId?: string): Promise<Device[]> {\n    return this.client.get(`network/${objId}/device`)\n               .then(this.extractData('devices'))\n               .then(v => v.map(d => d.device))\n               .then(this.assignAllTo(() => new Device()));\n  }\n\n  get(objId: string): Promise<Device[]> {\n    return this.fetchOne(`device/${objId}`);\n  }\n\n  create(obj: Device, parentId?: string): Promise<any> {\n    return this.client.post(`network/${parentId}/device`, obj).then(this.extractData('resource.device'));\n  }\n\n  update(obj: Device, objId?: string): Promise<any> {\n    return this.client.patch(`device/${objId}`, obj);\n  }\n\n  delete(objId: string): Promise<any> {\n    return this.client.delete(`device/${objId}?_force=true`);\n  }\n}\n\nexport class FolderAPI extends Api<Folder> {\n  list(objId?: string): Promise<Folder[]> {\n    return this.fetchMany(`device/${objId}/folder`, 'folders');\n  }\n\n  get(objId: string): Promise<Folder[]> {\n    return this.fetchOne(`folder/${objId}`);\n  }\n\n  create(obj: Folder, parentId?: string): Promise<any> {\n    return this.client.post(`device/${parentId}/folder`, obj).then(this.extractData('resource'));\n  }\n\n  update(obj: Folder, objId?: string): Promise<any> {\n    return this.client.patch(`folder/${objId}`, obj);\n  }\n\n  delete(objId: string): Promise<any> {\n    return this.client.delete(`folder/${objId}?_force=true`);\n  }\n\n  factoryEntry(): Folder {\n    return this.newEntry(Folder);\n  }\n}\n\nexport class PointAPI extends Api<Point> {\n  factoryEntry(): Point {\n    return this.newEntry(Point);\n  }\n\n  list(objId?: string): Promise<Point[]> {\n    return this.fetchMany(`folder/${objId}/point`, 'points');\n  }\n\n  get(objId: string): Promise<Point[]> {\n    return this.fetchOne(`point/${objId}`);\n  }\n\n  create(obj: Point, parentId?: string): Promise<any> {\n    return this.client.post(`folder/${parentId}/point`, obj).then(this.extractData('resource.point'));\n  }\n\n  update(obj: Point, objId?: string): Promise<any> {\n    return this.client.patch(`point/${objId}`, obj);\n  }\n\n  delete(objId: string): Promise<any> {\n    return this.client.delete(`point/${objId}?_force=true`);\n  }\n\n  fetchPointData(pointId: string): Promise<PointData> {\n    return this.client.get(`point/${pointId}/data`).then(this.extractData());\n  }\n\n  updatePointData(pointId: string, priority: number, value: number): Promise<any> {\n    return this.client.put(`point/${pointId}/data`, { priority, value });\n  }\n}\n","import { merge } from 'lodash';\nimport { Api } from '../../../backend/api';\nimport { Service } from '../../../backend/entry';\nimport { ModuleAPI, ServiceAPI } from '../../../backend/installer';\nimport { singleton as actor } from '../../../promise-actor';\nimport {\n  MODULE_NODE_TYPE,\n  MODULES_PARENT_CONTAINER_TYPE,\n  SERVICE_NODE_TYPE,\n  SERVICES_PARENT_CONTAINER_TYPE,\n} from '../../constants';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { SettingType } from '../../node-io';\nimport ApiNode from './shared/api-node';\nimport Mixin from './shared/mixin';\nimport TopLevelApiContainerNode from './shared/top-level-api-container-node';\n\nexport class ModulesParentContainerNode extends TopLevelApiContainerNode<Service> {\n  title: string = 'Modules';\n\n  collectChildNodes(nodes: Node[]): ModuleNode[] {\n    return <ModuleNode[]>nodes.filter(v => v instanceof ModuleNode);\n  }\n\n  protected initAPI(): Api<Service> {\n    return new ModuleAPI();\n  }\n\n  protected fetchChildren() {\n    return this.api.list();\n  }\n\n  protected childNodeType() {\n    return [MODULE_NODE_TYPE];\n  }\n}\n\nexport class ServicesParentContainerNode extends TopLevelApiContainerNode<Service> {\n  title: string = 'Services';\n\n  collectChildNodes(nodes: Node[]): ServiceNode[] {\n    return <ServiceNode[]>nodes.filter(v => v instanceof ServiceNode);\n  }\n\n  protected initAPI(): Api<Service> {\n    return new ServiceAPI();\n  }\n\n  protected fetchChildren() {\n    return this.api.list();\n  }\n\n  protected childNodeType() {\n    return [SERVICE_NODE_TYPE];\n  }\n}\n\nabstract class BaseServiceNode<A extends Api<Service>> extends ApiNode<Service, A> {\n  properties: {\n    entry: Service;\n    is_protected: boolean;\n  };\n  required_settings = ['service_id', 'service_name', 'version'];\n  settingFields = {\n    service_id     : SettingType.STRING,\n    service_name   : SettingType.STRING,\n    version        : SettingType.STRING,\n    service_type   : SettingType.STRING,\n    published_by   : SettingType.STRING,\n    state          : SettingType.STRING,\n    deploy_id      : SettingType.STRING,\n    deploy_location: SettingType.STRING,\n    created_at     : SettingType.READONLY,\n    modified_at    : SettingType.READONLY,\n  };\n  settingsHeaderComponent = {\n    props   : ['self'],\n    template:\n      '<div>' +\n      '  <v-alert v-if=\"self.properties.is_protected\" type=\"warning\">Waiting for required fields <br />' +\n      `    <small>(${this.required_settings.join(', ')})</small>` +\n      '  </v-alert>' +\n      '</div>',\n  };\n  onAdded = Mixin.prototype.onAdded.bind(this);\n  onRemoved = Mixin.prototype.onRemoved.bind(this);\n\n  constructor() {\n    super();\n    this.title = this.namePrefix();\n  }\n\n  entryId = () => this.entry() && this.entry().service_id;\n\n  syncWithBackend = () => {\n  };\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server || !this.areSettingsValid()) return;\n    if (!this.entry()) {\n      actor.process(() =>\n                      this.createEntry()\n                          .then(entry => this.applyEntry(entry))\n                          .then(() => this.displayMessage(`${this.namePrefix()} entry created.`))\n                          .catch(e => this.displayError(e, 'Entry not created.')),\n      );\n    } else {\n      // update entry\n      Mixin.prototype.onAfterSettingsChange.call(this);\n    }\n  }\n\n  applyEntry(entry: Service) {\n    this.settingFields['service_id'] = SettingType.READONLY;\n    Mixin.prototype.applyEntry.call(this, entry);\n    this.properties.is_protected = !entry;\n    this.broadcastPropertiesToClients();\n  }\n\n  onCreated() {\n    if (this.entry()) {\n      this.applyEntry(this.entry());\n    } else {\n      this.properties.is_protected = true; // await manual configuration\n      merge(this.settings, this.createSettingForm(null));\n    }\n  }\n\n  createEntry() {\n    const entry = Object.keys(this.settingFields)\n                        .map(key => ({ [key]: this.settings[key].value }))\n                        .reduce(merge);\n    return this.backend.create(this.settings['service_id'].value, <any>entry);\n  }\n\n  private areSettingsValid(): boolean {\n    return this.required_settings.map(key => this.settings[key].value).reduce((a, b) => a && b);\n  }\n}\n\nclass ModuleNode extends BaseServiceNode<ModuleAPI> {\n  namePrefix() {\n    return 'Module';\n  }\n\n  protected initAPI(): ModuleAPI {\n    return new ModuleAPI();\n  }\n}\n\nclass ServiceNode extends BaseServiceNode<ServiceAPI> {\n  namePrefix() {\n    return 'Service';\n  }\n\n  initAPI(): ServiceAPI {\n    return new ServiceAPI();\n  }\n}\n\nContainer.registerNodeType(MODULES_PARENT_CONTAINER_TYPE, ModulesParentContainerNode, null, false);\nContainer.registerNodeType(SERVICES_PARENT_CONTAINER_TYPE, ServicesParentContainerNode, null, false);\nContainer.registerNodeType(MODULE_NODE_TYPE, ModuleNode, null, false);\nContainer.registerNodeType(SERVICE_NODE_TYPE, ServiceNode, null, false);\n","import { Api } from './api';\nimport { Service } from './entry';\n\nabstract class ApplicationAPI extends Api<Service> {\n  list(_objId?: string): Promise<Service[]> {\n    return this.fetchMany(this.url(), 'services');\n  }\n\n  get(objId: string): Promise<Service[]> {\n    return this.fetchOne(`${this.url()}/${objId}`);\n  }\n\n  create(obj: Service, parentId?: string): Promise<any> {\n    return this.client.post(this.url(), { obj }).then(() => this.get(parentId));\n  }\n\n  update(obj: Service, objId: string): Promise<any> {\n    return this.client.patch(`${this.url()}/${objId}`, { service_id: objId, obj });\n  }\n\n  delete(objId: string): Promise<any> {\n    return this.client.delete(`${this.url()}/${objId}`);\n  }\n\n  factoryEntry(): Service {\n    return this.newEntry(Service);\n  }\n\n  protected abstract url(): string;\n}\n\nexport class ModuleAPI extends ApplicationAPI {\n  protected url(): string {\n    return 'modules';\n  }\n}\n\nexport class ServiceAPI extends ApplicationAPI {\n  protected url(): string {\n    return 'services';\n  }\n}\n","import { Api } from '../../../../backend/api';\nimport { Entry } from '../../../../backend/entry';\nimport { Node } from '../../../node';\nimport { NodeSetting, SettingType } from '../../../node-io';\nimport EntryNode from './entry-node';\nimport Mixin from './mixin';\n\n/**\n * TODO should rework later\n */\nexport default abstract class ApiNode<T extends Entry, A extends Api<T>> extends Node implements EntryNode<T> {\n  properties: {\n    entry: T; // main entry\n    is_protected: boolean; // If true the node won't be deleted if the remote counter-part is missing\n  };\n  settingFields: {};\n  clonable = false;\n  removable = false;\n  movable = false;\n  entry = Mixin.prototype.entry.bind(this);\n  entryId = Mixin.prototype.entryId.bind(this);\n  deactivate = Mixin.prototype.deactivate.bind(this);\n  createSettingForm = Mixin.prototype.createSettingForm.bind(this);\n  getTakenIdentifiers = Mixin.prototype.getTakenIdentifiers.bind(this);\n  makeIdentifier = Mixin.prototype.makeIdentifier.bind(this);\n  findFreeIdentifier = Mixin.prototype.findFreeIdentifier.bind(this);\n  backend: A;\n\n  protected constructor() {\n    super();\n    this.description = 'placeholder'; // FIXME\n    this.backend = this.initAPI();\n    this.settings['name'] = NodeSetting.create({\n      description: 'Entry',\n      value      : this.title,\n      type       : SettingType.READONLY,\n    });\n  }\n\n  entryFactory = (): T => this.backend.factoryEntry();\n\n  updateEntry = (body: T): Promise<any> => this.backend.update(body, this.entryId());\n\n  deleteEntry = (): Promise<any> => this.backend.delete(this.entryId());\n\n  abstract namePrefix(): string;\n\n  abstract createEntry(): Promise<T>;\n\n  abstract applyEntry(entry: T): void;\n\n  abstract syncWithBackend(): void;\n\n  protected abstract initAPI(): A;\n}\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 15.09.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\nimport Debounce from 'lodash-decorators/debounce';\nimport { Colors, create } from 'logplease';\nimport { AsyncDbHelper, Database } from '../database/database';\nimport { UiNode } from '../nodes/nodes/dashboard/ui-node';\nimport { DashboardServerSocket } from './dashboard-server-socket';\n\nconst logger = create('dashboard', { color: Colors.Yellow });\n\nexport interface UiPanel {\n  name: string;\n  title: string;\n  icon: string;\n  subPanels: Array<UiSubpanel>;\n}\n\nexport interface UiSubpanel {\n  title: string;\n  name: string;\n  uiElements: Array<UiElement>;\n}\n\nexport interface UiElement {\n  title: string;\n  type: string;\n\n  // link to node\n  cid: number;\n  id: number;\n  name: string;\n  icon: string;\n\n}\n\nexport class Dashboard {\n  db: Database;\n  uiPanels: Array<UiPanel>;\n  socket: DashboardServerSocket;\n\n  constructor(socket: DashboardServerSocket) {\n    this.socket = socket;\n    this.uiPanels = [];\n  }\n\n  loadFromDatabase(db: Database): Promise<any> {\n    this.db = db;\n    return AsyncDbHelper.noArgs<UiPanel[]>(db, db.getUiPanels)\n                        .then(panels => this.uiPanels = panels)\n                        .catch(err => logger.warn(err));\n  }\n\n  onNodeRemoved(node: UiNode) {\n    if (!node.isDashboardNode) return;\n\n    this.removeElementForNode(node);\n    this.removeEmptyPanels();\n    this.sendUiPanel(node.settings['ui-panel'].value);\n  }\n\n  onNodeChangePanelOrTitle(node: UiNode, newPanelName: string, newTitle: string) {\n    this.removeElementForNode(node);\n\n    //add new element\n    const uiElemet: UiElement = {\n      title: newTitle,\n      type: node.uiElementType,\n      cid: node.container.id,\n      id: node.id,\n      name: node.name,\n      icon: node.icon,\n\n    };\n\n    let newPanel = this.getUiPanel(newPanelName);\n    if (!newPanel) {\n      //add to new panel\n      newPanel = this.addUiPanel(newPanelName);\n      newPanel.subPanels[0].uiElements.push(uiElemet);\n\n      if (this.db) this.db.addUiPanel(newPanel);\n    } else {\n      //update existing panel\n      newPanel.subPanels[0].uiElements.push(uiElemet);\n      if (this.db)\n        this.db.updateUiPanel(newPanel.name, { $set: { subPanels: newPanel.subPanels } });\n    }\n    this.removeEmptyPanels();\n    this.socket.io.emit('getUiPanelsList', this.getUiPanelsList());\n    this.sendUiPanel(node.settings['ui-panel'].value);\n  }\n\n  @Debounce(100)\n  sendUiPanel(uiPanelValue) {\n    this.socket.io.emit('getUiPanel', this.getUiPanel(uiPanelValue));\n  }\n\n  removeEmptyPanels() {\n    let changed = false;\n    for (let p = 0; p < this.uiPanels.length; p++) {\n      let panel = this.uiPanels[p];\n      if (panel.subPanels.every(s => s.uiElements.length == 0)) {\n        // remove panel\n        changed = true;\n        this.uiPanels = this.uiPanels.filter(pan => pan.name != panel.name);\n        if (this.db) this.db.removeUiPanel(panel.name);\n      }\n    }\n    if (changed) this.socket.io.emit('getUiPanelsList', this.getUiPanelsList());\n  }\n\n  removeElementForNode(node: UiNode) {\n    const oldPanel = this.getUiPanel(node.settings['ui-panel'].value);\n    if (oldPanel) {\n      //remove old element\n      for (let s = 0; s < oldPanel.subPanels.length; s++) {\n        const subPanel = oldPanel.subPanels[s];\n        for (let e = 0; e < subPanel.uiElements.length; e++) {\n          const element = subPanel.uiElements[e];\n          if (element.cid == node.container.id && element.id == node.id) {\n            subPanel.uiElements.splice(e, 1);\n\n            if (this.db)\n              this.db.updateUiPanel(oldPanel.name, { $set: { subPanels: oldPanel.subPanels } });\n          }\n        }\n      }\n    }\n  }\n\n  getUiPanel(name: string): UiPanel {\n    return this.uiPanels.find(p => p.name === name);\n  }\n\n  getUiPanelsList(): Array<string> {\n    let arr = [];\n    this.uiPanels.forEach(p => {\n      arr.push({ name: p.name, title: p.title, icon: p.icon });\n    });\n    return arr;\n  }\n\n  addUiPanel(name: string): UiPanel {\n    const subPanel: UiSubpanel = {\n      title: '',\n      name: '',\n      uiElements: [],\n    };\n    const panel: UiPanel = {\n      name: name,\n      title: name,\n      icon: 'label_outline',\n      subPanels: [subPanel],\n    };\n    this.uiPanels.push(panel);\n    return panel;\n  }\n}\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 04.07.2016.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport * as bodyParser from 'body-parser';\nimport * as cookieParser from 'cookie-parser';\nimport * as express from 'express';\nimport * as http from 'http';\nimport { Colors, create } from 'logplease';\nimport * as morgan from 'morgan';\nimport * as path from 'path';\nimport * as socket from 'socket.io';\nimport * as config from '../config.json';\nimport { DashboardServerSocket } from './dashboard-server-socket';\nimport { EditorServerSocket } from './editor-server-socket';\nimport { authMiddleware } from './middleware';\nimport { PingPongServerSocket } from './ping-pong-server-socket';\nimport { apiEditorSetup } from './routes/api-editor';\nimport { WireNameServerSocket } from './wire-name-server-socket';\n\nconst expressValidator = require('express-validator');\n\nconst log = create('server', { color: Colors.Yellow });\n\nconst isDev = process.env.NODE_ENV !== 'production';\n\nexport class Server {\n  express: express.Application;\n  server: http.Server;\n\n  editorSocket: EditorServerSocket;\n  dashboardSocket: DashboardServerSocket;\n  wireNameSocket: WireNameServerSocket;\n  private pingPongSocket: PingPongServerSocket;\n  private readonly port: number;\n  private readonly loopInterval: number;\n\n  constructor(workingDir: string, port: number, loopInterval: number) {\n    this.port = port;\n    this.loopInterval = loopInterval;\n    this.express = express();\n    this.express.locals.moment = require('moment');\n    /* webpack-strip-block:removed */\n    this.middleware(workingDir);\n    this.routes();\n    this.handleErrors();\n    this.configure();\n    this.start_io();\n  }\n\n  /* webpack-strip-block:removed */\n\n  private middleware(workingDir: string) {\n    if (config.webServer.debug) {\n      this.express.use(\n        morgan('dev', {\n          skip: function (req, res) {\n            return res.statusCode < 400;\n          },\n        }),\n      );\n    }\n    this.express.use(bodyParser.json({ limit: '5mb' }));\n    this.express.use(bodyParser.urlencoded({ extended: false }));\n    this.express.use(cookieParser());\n    this.express.use(expressValidator());\n    const publicFolder = path.resolve(workingDir, 'public');\n    log.info(`App Server Dir : '${publicFolder}'`);\n    this.express.use('/', express.static(publicFolder));\n  }\n\n  private routes() {\n    // api console logger, after respective apis got called this method will be triggered\n    this.express.use('/api/', function (req, res, next) {\n      const send = res.send;\n      (<any>res).send = function (body) {\n        if (![200, 201].includes(res.statusCode)) log.warn(body);\n        send.call(this, body);\n      };\n      next();\n    });\n    this.express.use('/dashboard', authMiddleware(), require('./routes/dashboard'));\n    this.express.use('/api/dashboard', authMiddleware(), require('./routes/api-dashboard'));\n    this.express.use('/editor', authMiddleware(), require('./routes/editor'));\n    this.express.use('/api/editor', authMiddleware(), apiEditorSetup(this, this.loopInterval));\n    this.express.use('/api/wire-name', authMiddleware(), require('./routes/api-wire-name'));\n    this.express.use('/api/auth', require('./routes/auth'));\n    this.express.use('/api/help', authMiddleware(), require('./routes/api-help'));\n    this.express.use('/api/platform', authMiddleware(), require('./routes/api-platform'));\n\n  }\n\n  private handleErrors() {\n    // Route not found middleware\n    this.express.use((req: express.Request, res: express.Response): void => {\n      res.status(404);\n      res.json({ error: { message: 'Not Found' } });\n    });\n    // Error handler\n    this.express.use(\n      (\n        err: Error & { status: number },\n        req: express.Request,\n        res: express.Response,\n        next: express.NextFunction,\n      ): void => {\n        log.warn(`${err}`);\n        res.status(err.status || 500);\n        res.json({ error: { message: err.message, error: isDev ? err : {} } });\n      },\n    );\n  }\n\n  private configure() {\n    const port = normalizePort(this.port);\n    this.express.set('port', port);\n\n    this.server = http.createServer(this.express);\n    this.server.listen(port);\n    this.server.on('error', onError);\n    this.server.on('listening', onListening);\n\n    function normalizePort(val: number | string): number | string | boolean {\n      const port: number = typeof val === 'string' ? parseInt(val, 10) : val;\n      if (isNaN(port)) {\n        return val;\n      } else if (port >= 0) {\n        return port;\n      } else {\n        return false;\n      }\n    }\n\n    const that = this;\n\n    function onError(error: NodeJS.ErrnoException): void {\n      if (error.syscall !== 'listen') throw error;\n      const bind = typeof port === 'string' ? 'Pipe ' + port : 'Port ' + port;\n      switch (error.code) {\n        case 'EACCES':\n          console.error(`${bind} requires elevated privileges`);\n          process.exit(1);\n          break;\n        case 'EADDRINUSE':\n          console.error(`${bind} is already in use`);\n          process.exit(1);\n          break;\n        default:\n          throw error;\n      }\n    }\n\n    function onListening(): void {\n      const addr = that.server.address();\n      const bind = typeof addr === 'string' ? `pipe ${addr}` : `port ${addr.port}`;\n      log.info(`Listening on ${bind}`);\n    }\n  }\n\n  private start_io() {\n    const io_root: SocketIO.Server = socket(this.server);\n    this.editorSocket = new EditorServerSocket(io_root);\n    this.dashboardSocket = new DashboardServerSocket(io_root);\n    this.wireNameSocket = new WireNameServerSocket(io_root);\n    this.pingPongSocket = new PingPongServerSocket(this.server, io_root);\n  }\n}\n","module.exports = require(\"body-parser\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"http\");","module.exports = require(\"morgan\");","import { Colors, create } from 'logplease';\nimport app from '../app';\nimport { ContainerRegistry } from '../nodes/container';\nimport Namespace = SocketIO.Namespace;\nimport { PubSubHelpers } from \"../pub-sub/PubSubHelpers\";\n\nconst log = create('server', { color: Colors.Yellow });\n\nexport class DashboardServerSocket {\n  io_root: SocketIO.Server;\n  io: Namespace;\n\n  constructor(io_root: SocketIO.Server) {\n    this.io_root = io_root;\n    const io = this.io_root.of('/dashboard');\n    this.io = io;\n\n    io.on('connection', function(socket) {\n      log.debug('New client connected to dashboard');\n\n      socket.on('disconnect', () => {\n        log.debug('Client disconnected from dashboard');\n      });\n\n      socket.on('getUiPanel', name => {\n        log.debug('getUiPanel: ' + name);\n        socket.emit('getUiPanel', app.dashboard.getUiPanel(name));\n      });\n\n      socket.on('getUiPanelsList', () => {\n        socket.emit('getUiPanelsList', app.dashboard.getUiPanelsList());\n      });\n\n      socket.on('nodeMessageToServerSide', n => {\n        let cont = ContainerRegistry.instance().get(n.cid);\n        if (!cont) {\n          log.error(\n            \"Can't send node message to server-side. Container id [\" + n.cid + '] does not exist',\n          );\n          return;\n        }\n\n        let node = cont.getSubNode(n.id);\n        if (!node) {\n          log.error(\n            \"Can't send node message to server-side. Node id [\" +\n              n.cid +\n              '/' +\n              n.id +\n              '] does not exist',\n          );\n          return;\n        }\n\n        if (!node['onGetMessageToServerSide']) {\n          log.error(\n            \"Can't send node message to server-side. Node \" +\n              node.getReadableId() +\n              'dont have onGetMessageToServerSide method!',\n          );\n          return;\n        }\n\n        node['onGetMessageToServerSide'](n.message);\n      });\n\n      //redirect message\n      socket.on('nodeMessageToEditorSide', n => {\n        let cont = ContainerRegistry.instance().get(n.cid);\n        if (!cont) {\n          log.error(\n            \"Can't send node message to editor-side. Container id [\" + n.cid + '] does not exist',\n          );\n          return;\n        }\n\n        let node = cont.getSubNode(n.id);\n        if (!node) {\n          log.error(\n            \"Can't send node message to editor-side. Node id [\" +\n              n.cid +\n              '/' +\n              n.id +\n              '] does not exist',\n          );\n          return;\n        }\n\n        app.server.editorSocket.io.in(n.cid).emit('nodeMessageToEditorSide', n);\n      });\n\n      //redirect message\n      socket.on('nodeMessageToDashboardSide', n => {\n        let cont = ContainerRegistry.instance().get(n.cid);\n        if (!cont) {\n          log.error(\n            \"Can't send node message to dashboard-side. Container id [\" +\n              n.cid +\n              '] does not exist',\n          );\n          return;\n        }\n\n        let node = cont.getSubNode(n.id);\n        if (!node) {\n          log.error(\n            \"Can't send node message to dashboard-side. Node id [\" +\n              n.cid +\n              '/' +\n              n.id +\n              '] does not exist',\n          );\n          return;\n        }\n\n        app.server.dashboardSocket.io.in(n.cid).emit('nodeMessageToDashboardSide', n);\n      });\n\n      socket.on('nodeSettings', n => {\n        let cont = ContainerRegistry.instance().get(n.cid);\n        if (!cont) {\n          log.error(\"Can't update node settings. Container id [\" + n.cid + '] does not exist');\n          return;\n        }\n\n        let node = cont.getSubNode(n.id);\n        if (!node) {\n          log.error(\n            \"Can't update node settings. Node id [\" + n.cid + '/' + n.id + '] does not exist',\n          );\n          return;\n        }\n\n        let oldName = node.name;\n        let oldIcon = node.icon;\n        let oldSettings = JSON.parse(JSON.stringify(node.settings));\n\n        if (node['onBeforeSettingsChange']) node['onBeforeSettingsChange'](n.settings, n.name, n.icon);\n\n        for (let key in n.settings) {\n          let s = n.settings[key];\n          try {\n            node.settings[key].value = s.value;\n          } catch (error) {\n            log.error(error);\n          }\n        }\n\n        node.name = n.name;\n        node.icon = n.icon;\n        PubSubHelpers.renameFunction(node);\n        Promise.resolve(node['onAfterSettingsChange'](oldSettings, oldName, oldIcon)).then(() => {\n          const args = {\n            id: n.id,\n            cid: n.cid,\n            name: n.name,\n            icon: n.icon,\n            settings: node.settings,\n            oldName: oldName,\n            oldIcon: oldIcon,\n            oldSettings: oldSettings,\n          };\n          app.server.editorSocket.io.emit('nodeSettings', args);\n\n          if (node.isDashboardNode) {\n            app.server.dashboardSocket.io.in(n.cid).emit('nodeSettings', args);\n          }\n\n          if (app.db)\n            app.db.updateNode(node.id, node.container.id, {\n              $set: { settings: node.settings, name: node.name, icon: node.icon },\n            });\n            \n        });\n      });\n\n      socket.on('dashboardElementGetNodeState', n => {\n        let cont = ContainerRegistry.instance().get(n.cid);\n        if (!cont) {\n          log.error(\n            \"Can't get dashboard element state. Container id [\" + n.cid + '] does not exist',\n          );\n          return;\n        }\n\n        let node = cont.getSubNode(n.id);\n        if (!node) {\n          log.error(\n            \"Can't get dashboard element state. Node id [\" +\n              n.cid +\n              '/' +\n              n.id +\n              '] does not exist',\n          );\n          return;\n        }\n\n        //you can override get state logic\n        if (node['onDashboardElementGetNodeState']) {\n          node['onDashboardElementGetNodeState'](n.options);\n        } else {\n          let m = { id: node.id, cid: node.container.id, state: node.properties['state'] };\n          socket.emit('dashboardElementGetNodeState', m);\n        }\n      });\n\n      socket.on('dashboardElementSetNodeState', n => {\n        let cont = ContainerRegistry.instance().get(n.cid);\n        if (!cont) {\n          log.error(\n            \"Can't set node state from dashboard element. Container id [\" +\n              n.cid +\n              '] does not exist',\n          );\n          return;\n        }\n\n        let node = cont.getSubNode(n.id);\n        if (!node) {\n          log.error(\n            \"Can't set node state from dashboard element. Node id [\" +\n              n.cid +\n              '/' +\n              n.id +\n              '] does not exist',\n          );\n          return;\n        }\n\n        //you can override get state logic\n        if (node['onDashboardElementSetNodeState']) {\n          node['onDashboardElementSetNodeState'](n.state);\n        } else {\n          node.properties['state'] = n.state;\n          //send state back to all clients\n          let m = { id: node.id, cid: node.container.id, state: node.properties['state'] };\n          let panelName = this.settings['ui-panel'].value;\n          io.in('' + panelName).emit('dashboardElementGetNodeState', m);\n        }\n      });\n\n      // client join to dashboard room\n      socket.on('join-room', room => {\n        if ((<any>socket).room != null) {\n          log.debug('Leave dashboard room [' + (<any>socket).room + ']');\n          socket.leave((<any>socket).room, () => {\n            (<any>socket).room = room;\n            socket.join(room, () => {\n              log.debug('Join to dashboard room [' + room + ']');\n            });\n          });\n        } else {\n          (<any>socket).room = room;\n          socket.join(room, () => {\n            log.debug('Join to dashboard room [' + room + ']');\n          });\n        }\n      });\n\n      socket.on('leave-room', room => {\n        socket.leave(room, () => {\n          log.debug('Leave dashboard room [' + room + ']');\n        });\n        (<any>socket).room = null;\n      });\n    });\n  }\n}\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 25.01.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport { Colors, create } from 'logplease';\nimport app from '../app';\nimport { ContainerRegistry } from '../nodes/container';\nimport { Node } from '../nodes/node';\nimport { Side } from '../nodes/node-interface';\nimport NodeUtils from '../nodes/node-utils';\nimport Namespace = SocketIO.Namespace;\n\nconst log = create('server', { color: Colors.Yellow });\nconst SLOTS_VALUES_INTERVAL = 200;\n\nexport class EditorServerSocket {\n  io_root: SocketIO.Server;\n  io: Namespace;\n\n  constructor(io_root: SocketIO.Server) {\n    this.io_root = io_root;\n    const io = io_root.of('/editor');\n    this.io = io;\n\n    io.on('connection', function(socket) {\n      log.debug('New client connected to editor');\n\n      socket.on('disconnect', () => {\n        log.debug('Client disconnected from editor');\n      });\n\n      // join client to container room\n      socket.on('room', function(room) {\n        if ((<any>socket).room != null) {\n          socket.leave((<any>socket).room, function() {\n            // it is necessary to waiting for leave room before join only if it's the same room (same id)\n            (<any>socket).room = room;\n            socket.join(room, () => {\n              log.debug('Switch editor room to [' + room + ']');\n            });\n          });\n        } else {\n          (<any>socket).room = room;\n          socket.join(room, () => {\n            log.debug('Join to editor room [' + room + ']');\n          });\n        }\n      });\n\n      socket.on('nodeMessageToServerSide', function(n) {\n        let node = EditorServerSocket.checkContainerNodeValidity(n, Side.server);\n        node && node['onGetMessageToServerSide'](n.message);\n      });\n\n      //redirect message\n      socket.on('nodeMessageToEditorSide', function(n) {\n        let node = EditorServerSocket.checkContainerNodeValidity(n, Side.editor);\n        node && app.server.editorSocket.io.in(n.cid).emit('nodeMessageToEditorSide', n);\n      });\n\n      //redirect message\n      socket.on('nodeMessageToDashboardSide', function(n) {\n        let node = EditorServerSocket.checkContainerNodeValidity(n, Side.dashboard);\n        node && app.server.dashboardSocket.io.in(n.cid).emit('nodeMessageToDashboardSide', n);\n      });\n    });\n\n    setInterval(() => {\n      this.sendSlotsValues(io);\n    }, SLOTS_VALUES_INTERVAL);\n  }\n\n  sendSlotsValues(io) {\n    const connectedSocket = io.connected;\n    for (let key of Object.keys(connectedSocket)) {\n      const room: number = +Object.keys(io.connected[key].rooms).filter(x => x !== key)[0];\n      let slotsValues = NodeUtils.getNodesIOValues(room);\n      io.to(room).emit('nodes-io-values', slotsValues);\n    }\n  }\n\n  /**\n   * @param {Node} n\n   * @param {Side} side\n   * @returns {Node} Node if Container and Node is valid otherwise null\n   */\n  static checkContainerNodeValidity(n: Node, side: Side): Node {\n    let cont = ContainerRegistry.instance().get(n.cid);\n    if (!cont) {\n      log.error(\n        `Can't send node message to ${side}-side. Container id [\"${n.cid}'] does not exist`,\n      );\n      return null;\n    }\n\n    let node = cont.getSubNode(n.id);\n    if (!node) {\n      log.error(\n        `Can't send node message to ${side}-side. Node id [\"${n.cid}'/'${n.id}'] does not exist`,\n      );\n      return null;\n    }\n    return node;\n  }\n}\n","import { ContainerRegistry } from './container';\nimport Utils from './utils';\n\nexport default class NodeUtils {\n  static getNodesIOValues(cid: number): any {\n    let container = ContainerRegistry.instance().get(cid);\n    if (!container || !container.subNodes()) return;\n\n    let inputs_values = [];\n    let outputs_values = [];\n    for (let node of container.subNodes()) {\n      if (node.inputs) {\n        for (let i in node.inputs) {\n          let data = node.getInputData(Number(i));\n          data = Utils.formatAndTrimValue(data);\n          inputs_values.push({\n            nodeId: node.id,\n            inputId: i,\n            type: node.type,\n            data,\n          });\n        }\n      }\n\n      if (node.outputs) {\n        for (let o in node.outputs) {\n          let data = node.outputs[o].data;\n          data = Utils.formatAndTrimValue(data);\n          outputs_values.push({\n            nodeId: node.id,\n            outputId: o,\n            type: node.type,\n            data,\n          });\n        }\n      }\n    }\n    return {\n      cid: cid,\n      inputs: inputs_values,\n      outputs: outputs_values,\n    };\n  }\n}\n","import { Server } from 'http';\nimport { Colors, create } from 'logplease';\nimport * as SocketIO from 'socket.io';\nimport { Namespace, Socket } from 'socket.io';\n\nconst logger = create('heartbeat', { color: Colors.Yellow });\n\nexport class PingPongServerSocket {\n  private io: Namespace;\n\n  constructor(httpServer: Server, io_root?: SocketIO.Server) {\n    let socketServer = io_root ?? SocketIO(httpServer, { path: '/heartbeat' });\n    this.io = socketServer.of(io_root ? '/heartbeat' : '/ping');\n    this.io.on('connect', socket => this.listen(socket));\n  }\n\n  private listen(client: Socket): void {\n    logger.debug(`New client ${client.id} connected into server path ${client.server.path()}`);\n    logger.debug(`Handshake: ${JSON.stringify(client.handshake)}`);\n    client.on('disconnect', () => {\n      logger.debug(`Client ${client.id} is disconnected`);\n    });\n  }\n}\n","import * as express from 'express';\nimport { IRouter } from 'express-serve-static-core';\nimport { ContainerRegistry } from '../../nodes/container';\nimport { isNull } from '../../utils/helper';\nimport { Server } from '../server';\nimport { ApiLinkHandler } from './handler/api-link-handler';\nimport { ApiNodeHandler } from './handler/api-node-handler';\n\nclass ApiEditorRouter {\n  private readonly router: IRouter;\n  private readonly server: Server;\n  private _nodeHandler: ApiNodeHandler;\n  private _linkHandler: ApiLinkHandler;\n\n  constructor(server: Server) {\n    this.router = express.Router();\n    this.server = server;\n  }\n\n  setup(loopInterval: number): IRouter {\n    this.router.get('/c/:cid', (req, res) => this.nodeHandler().onList(req, res));\n    this.router.delete('/c/:cid/n/', (req, res) => this.nodeHandler().onRemove(req, res));\n    this.router.post('/c/:cid/n/', (req, res) => this.nodeHandler().onCreate(req, res));\n    this.router.post('/c/:cid/move', (req, res) => this.nodeHandler().onPackUp(req, res));\n    this.router.post('/c/:cid/export', (req, res) => this.nodeHandler().onExport(req, res));\n    this.router.post('/c/:cid/clone', (req, res) => this.nodeHandler().onClone(req, res));\n    this.router.post('/c/:cid/import', (req, res) => this.nodeHandler().onImport(req, res));\n\n    this.router.post('/c/:cid/l', (req, res) => this.linkHandler().onCreate(req, res));\n    this.router.put('/c/:cid/l', (req, res) => this.linkHandler().onMove(req, res));\n    this.router.delete('/c/:cid/l', (req, res) => this.linkHandler().onRemove(req, res));\n\n    setInterval(() => updateActiveNodes(this.server), 500);\n    return legacySetup(this.router, this.server, loopInterval);\n  }\n\n  nodeHandler() {\n    if (isNull(this._nodeHandler)) {\n      this._nodeHandler = new ApiNodeHandler(this.server.editorSocket, this.server.dashboardSocket);\n    }\n    return this._nodeHandler;\n  }\n\n  linkHandler() {\n    if (isNull(this._linkHandler)) {\n      this._linkHandler = new ApiLinkHandler(this.server.editorSocket);\n    }\n    return this._linkHandler;\n  }\n}\n\nfunction updateActiveNodes(server: Server) {\n  if (!ContainerRegistry.instance().rootContainer()) return;\n\n  for (let container of ContainerRegistry.instance().list()) {\n    let activeNodesIds = [];\n\n    for (let node of container.subNodes()) {\n      if (node.isRecentlyActive) {\n        node.isRecentlyActive = false;\n        activeNodesIds.push(node.id);\n      }\n    }\n\n    if (activeNodesIds.length > 0) {\n      server.editorSocket.io.in('' + container.id).emit('nodes-active', {\n        ids: activeNodesIds,\n        cid: container.id,\n      });\n    }\n  }\n}\n\nfunction legacySetup(router: IRouter, server: Server, loopInterval: number): IRouter {\n\n  function getDb() {\n    return ContainerRegistry.instance().rootContainer().db;\n  }\n\n  /**\n   * Update node position\n   */\n  router.put('/c/:cid/n/:id/position', function (req, res) {\n    let container = ContainerRegistry.instance().get(req.params.cid);\n    if (!container) {\n      return res.status(404).send(`Can't update node position. Container id [${req.params.cid}] not found.`);\n    }\n\n    let node = container.getSubNode(req.params.id);\n    if (!node) {\n      return res.status(404).send(\n        `Can't update node position. Node id [${req.params.cid}/${req.params.id}] not found.`);\n    }\n\n    node.pos = req.body.position;\n\n    if (getDb()) {\n      getDb().updateNode(node.id, node.container.id, { $set: { pos: node.pos } });\n    }\n\n    server.editorSocket.io.emit('node-update-position', {\n      id: req.params.id,\n      cid: req.params.cid,\n      pos: node.pos,\n    });\n    res.send(`Node position updated: type [${node.type}] id [${node.container.id}/${node.id}]`);\n  });\n\n  /**\n   * Update node size\n   */\n  router.put('/c/:cid/n/:id/size', function (req, res) {\n    let container = ContainerRegistry.instance().get(req.params.cid);\n    if (!container) return res.status(404).send(`Can't update node size. Container id [${req.params.cid}] not found.`);\n\n    let node = container.getSubNode(req.params.id);\n    if (!node) {\n      return res.status(404).send(`Can't update node size. Node id [${req.params.cid}/${req.params.id}] not found.`);\n    }\n\n    node.size = req.body.size;\n\n    if (getDb()) getDb().updateNode(node.id, node.container.id, { $set: { size: node.size } });\n\n    server.editorSocket.io.emit('node-update-size', {\n      id: req.params.id,\n      cid: req.params.cid,\n      size: node.size,\n    });\n    res.send(`Node size updated: type [${node.type}] id [${node.container.id}/${node.id}]`);\n  });\n\n  /**\n   * Update node collapsed\n   */\n  router.put('/c/:cid/n/:id/collapse', function (req, res) {\n    let container = ContainerRegistry.instance().get(req.params.cid);\n    if (!container) {\n      return res.status(404).send(`Can't update node collapse. Container id [${req.params.cid}] not found.`);\n    }\n\n    let node = container.getSubNode(req.params.id);\n    if (!node) {\n      return res.status(404).send(\n        `Can't update node collapse. Node id [${req.params.cid}/${req.params.id}] not found.`);\n    }\n\n    node.flags.collapsed = req.body.collapsed;\n\n    if (getDb()) getDb().updateNode(node.id, node.container.id, { $set: { 'flags.collapsed': node.flags?.collapsed } });\n\n    server.editorSocket.io.emit('node-update-collapsed', {\n      id: req.params.id,\n      cid: req.params.cid,\n      'flags.collapsed': node.flags?.collapsed,\n    });\n    res.send(`Node collapsed updated: type [${node.type}] id [${node.container.id}/${node.id}]`);\n  });\n\n//------------------ Container ------------------------\n  /**\n   * Run step container\n   */\n  router.get('/state', function (req, res) {\n    let state = {\n      isRunning: ContainerRegistry.instance().rootContainer().isRunning,\n    };\n    res.json(state);\n  });\n\n  /**\n   * Run container\n   */\n  router.post('/run', function (req, res) {\n    ContainerRegistry.instance().rootContainer().run(loopInterval);\n    server.editorSocket.io.emit('container-run');\n    res.send(`Run container`);\n  });\n\n  /**\n   * Stop container\n   */\n  router.post('/stop', function (req, res) {\n    ContainerRegistry.instance().rootContainer().stop();\n    server.editorSocket.io.emit('container-stop');\n    res.send(`Stop container`);\n  });\n\n  /**\n   * Run step container\n   */\n  router.post('/step', function (req, res) {\n    ContainerRegistry.instance().rootContainer().runStep();\n    server.editorSocket.io.emit('container-run-step');\n    res.send(`Run step container`);\n  });\n\n//------------------ nodes internal requests ------------------------\n\n  router.get('/c/:cid/n/:id*', function (req, res) {\n    let cont = ContainerRegistry.instance().get(req.params.cid);\n    if (!cont) return res.status(404).send(`Can't send request to node. Container id [${req.params.cid}] not found.`);\n\n    let node = cont.getSubNode(req.params.id);\n    if (!node) {\n      return res.status(404).send(\n        `Can't send request to node. Node id [${req.params.cid}/${req.params.id}] not found.`);\n    }\n\n    if (node['onEditorApiGetRequest']) {\n      node['onEditorApiGetRequest'](req, res);\n    } else {\n      return res\n        .status(404)\n        .send(`Can't send request to node. Node id [${req.params.cid}/${req.params.id}] does not accept requests.`);\n    }\n  });\n\n  router.post('/c/:cid/n/:id*', function (req, res) {\n    let cont = ContainerRegistry.instance().get(req.params.cid);\n    if (!cont) return res.status(404).send(`Can't send request to node. Container id [${req.params.cid}] not found.`);\n\n    let node = cont.getSubNode(req.params.id);\n    if (!node) {\n      return res.status(404).send(\n        `Can't send request to node. Node id [${req.params.cid}/${req.params.id}] not found.`);\n    }\n\n    if (node['onEditorApiPostRequest']) {\n      node['onEditorApiPostRequest'](req, res);\n    } else {\n      return res\n        .status(404)\n        .send(`Can't send request to node. Node id [${req.params.cid}/${req.params.id}] does not accept requests.`);\n    }\n  });\n\n  router.post('/c/:cid/n-type', function (req, res) {\n    let cont = ContainerRegistry.instance().get(req.params.cid);\n    if (!cont) {\n      return res.status(404).send(\n        `Can't receive request to node. Container id [${req.params.cid}] not found.`);\n    }\n\n    let type = req.body.type;\n    if (!type) return res.status(404).send(`Can't receive request to node. Node type is not defined.`);\n\n    let includeSubContainers = req.body.subcontainers == true;\n    let nodes = cont.getNodesByType(type, includeSubContainers);\n    if (nodes.length == 0) {\n      return res\n        .status(404)\n        .send(`Can't receive request to node. Node type [${type}] not found in container [${req.params.cid}].`);\n    }\n\n    nodes.forEach(node => {\n      if (node['onEditorApiPostRequest']) {\n        node['onEditorApiPostRequest'](req, res);\n      } else {\n        return res.status(404).send(`Can't receive request to node. Node type [${type}] does not accept requests.`);\n      }\n    });\n\n    if (!res.headersSent) res.status(400).send(`No node has processed the request.`);\n  });\n\n  return router;\n}\n\nconst apiEditorSetup = (server: Server, loopInterval: number) => new ApiEditorRouter(server).setup(loopInterval);\nexport { apiEditorSetup };\n","import { Request, Response } from 'express';\nimport { createNodeLink } from '../../../nodes/node-link';\nimport { CREATE_LINK, MOVE_LINK, REMOVE_LINK } from '../../../shared/websocket-events';\nimport { EditorServerSocket } from '../../editor-server-socket';\nimport { NodeLinkService } from '../../service/NodeLinkService';\nimport { ApiHandler } from './api-handler';\n\nexport class ApiLinkHandler extends ApiHandler {\n\n  private readonly linkService = new NodeLinkService();\n\n  constructor(editorSocket: EditorServerSocket) {\n    super(editorSocket);\n  }\n\n  onCreate(req: Request, resp: Response) {\n    const { source, targets } = req.body;\n    this.linkService.create(req.params.cid, source, ...targets)\n        .then(result => this.emitSuccess(resp, CREATE_LINK, result, 201))\n        .catch(err => this.emitError(resp, err, CREATE_LINK));\n  }\n\n  onRemove(req: Request, resp: Response) {\n    const { source, targets } = req.body;\n    this.linkService.remove(req.params.cid, source, ...targets)\n        .then(result => this.emitSuccess(resp, REMOVE_LINK, result))\n        .catch(err => this.emitError(resp, err, REMOVE_LINK));\n  }\n\n  onMove(req: Request, resp: Response) {\n    const cid = +req.params.cid;\n    const { type, source, targets, another } = req.body;\n    const nodeLink = createNodeLink(+cid, source, ...targets);\n    this.linkService.move(type, nodeLink, another)\n        .then(result => this.emitSuccess(resp, MOVE_LINK, result))\n        .catch(err => this.emitError(resp, err, MOVE_LINK));\n  }\n}\n","import { NodeDbHelper } from '../../nodes/node-db-helper';\nimport { ContainerRegistryMetadata } from '../../nodes/node-interface';\nimport { IOType } from '../../nodes/node-io';\nimport { createLinkHandler, createNodeLink, NodeLink, NodeLinkHandler, SlimNodeIO } from '../../nodes/node-link';\nimport { LinkResult } from '../../shared/link-result';\nimport { BackendLinkVisitor } from '../../shared/link-result-visitor';\nimport { NodeService } from './node-service';\n\nexport class NodeLinkService extends NodeService {\n  private readonly handler: NodeLinkHandler;\n\n  constructor(cRegistry?: ContainerRegistryMetadata, dbHelper?: NodeDbHelper) {\n    super(cRegistry, dbHelper);\n    this.handler = createLinkHandler(this.cRegistry);\n  }\n\n  create(cid: number | string, source: SlimNodeIO, ...targets: SlimNodeIO[]): Promise<LinkResult> {\n    return Promise.resolve(createNodeLink(+cid, source, ...targets))\n                  .then(nodeLink => this.handler.create(nodeLink))\n                  .then(r => this.persist(r));\n  }\n\n  remove(cid: number | string, source: SlimNodeIO, ...targets: SlimNodeIO[]): Promise<LinkResult> {\n    return Promise.resolve(createNodeLink(+cid, source, ...targets))\n                  .then(nodeLink => this.handler.remove(nodeLink))\n                  .then(r => this.persist(r));\n  }\n\n  move(type: IOType, fromLink: NodeLink, toAnother: SlimNodeIO): Promise<LinkResult> {\n    return Promise.resolve(this.handler.move(type, fromLink, toAnother)).then(r => this.persist(r));\n  }\n\n  disconnect(): Promise<LinkResult> {\n    return null;\n  }\n\n  private persist(r: LinkResult): Promise<LinkResult> {\n    return new BackendLinkVisitor(this.cRegistry).visit(r)\n                                                 .then(re => {\n                                                   this.logger.info(re.message);\n                                                   return re;\n                                                 });\n  }\n}\n\n","import { Request, Response } from 'express';\nimport { SerializedContainer, SerializedNode } from '../../../nodes/node-interface';\nimport { NodeValidator } from '../../../shared/validator';\nimport {\n  CLONE_NODES,\n  CREATE_NODE,\n  EXPORT_NODES,\n  IMPORT_NODES,\n  PACK_UP_NODES,\n  REMOVE_NODES,\n} from '../../../shared/websocket-events';\nimport { RegistryItemExistedError } from '../../../utils/errors';\nimport { reliability_logger } from '../../../utils/loggers';\nimport { DashboardServerSocket } from '../../dashboard-server-socket';\nimport { EditorServerSocket } from '../../editor-server-socket';\nimport { NodeCRUDService } from '../../service/NodeCRUDService';\nimport { NodeETLService } from '../../service/NodeETLService';\nimport { ApiHandler } from './api-handler';\n\nexport class ApiNodeHandler extends ApiHandler {\n\n  private readonly dashboardSocket: DashboardServerSocket;\n  private readonly crudService = new NodeCRUDService();\n  private readonly etlService = new NodeETLService();\n\n  constructor(editorSocket: EditorServerSocket, dashboardSocket: DashboardServerSocket) {\n    super(editorSocket);\n    this.dashboardSocket = dashboardSocket;\n  }\n\n  onList(req: Request, resp: Response): void {\n    this.crudService.getNodes(req.params.cid)\n        .then(containers => resp.status(200).json(containers))\n        .catch(err => {\n          reliability_logger.warn(err);\n          resp.status(500).json(<SerializedContainer>{ id: +req.params.cid, serializedNodes: [], err: err.msg });\n        });\n  }\n\n  onCreate(req: Request, resp: Response): void {\n    this.crudService.createNode(+req.params.cid, <SerializedNode>{ type: req.body.type, pos: req.body.position })\n        .then(result => {\n          if (result.isDashboardNode) {\n            this.dashboardSocket.io.in(req.params.cid).emit(CREATE_NODE, result.result());\n          }\n          return this.emitSuccess(resp, CREATE_NODE, result, 201);\n        })\n        .catch(err => this.emitError(resp, err, CREATE_NODE,\n                                     e => e instanceof RegistryItemExistedError ? 409 : 400));\n  }\n\n  onRemove(req: Request, resp: Response): void {\n    this.crudService.removeNodes(+req.params.cid, req.body, true)\n        .then(result => this.emitSuccess(resp, REMOVE_NODES, result))\n        .catch(err => this.emitError(resp, err, REMOVE_NODES));\n  }\n\n  onPackUp(req: Request, resp: Response): void {\n    const cId = +req.params.cid;\n    const { ids, pos } = req.body;\n    this.etlService.packUpNodes(cId, ids, pos)\n        .then(result => {\n          this.editorSocket.io.emit(REMOVE_NODES, result.cleanupResult.result());\n          return this.emitSuccess(resp, PACK_UP_NODES, result);\n        })\n        .catch(err => this.emitError(resp, err, PACK_UP_NODES));\n  }\n\n  onClone(req: Request, resp: Response): void {\n    const { ids, pos } = req.body;\n    this.etlService.cloneNodes(+req.params.cid, ids, pos)\n        .then(result => this.emitSuccess(resp, CLONE_NODES, result))\n        .catch(err => this.emitError(resp, err, CLONE_NODES));\n  }\n\n  onExport(req: Request, resp: Response): void {\n    this.etlService.exportNodes(+req.params.cid, req.body)\n        .then(output => resp.status(200).json(output))\n        .catch(err => this.emitError(resp, err, EXPORT_NODES));\n  }\n\n  onImport(req: Request, resp: Response) {\n    const cId = +req.params.cid;\n    const { nodes, pos } = req.body;\n    const output = NodeValidator.NodeArrayValidator().validate(nodes, { allowUnknown: true });\n    if (output.error) {\n      return this.emitError(resp, new Error(output.error), IMPORT_NODES);\n    }\n    this.etlService.importNodes(cId, nodes as SerializedNode[], pos)\n        .then(result => this.emitSuccess(resp, IMPORT_NODES, result, 201))\n        .catch(err => this.emitError(resp, err, IMPORT_NODES));\n  }\n\n}\n","import { Node } from '../../nodes/node';\nimport { NodeFactory } from '../../nodes/node-factory';\nimport {\n  ContainerRegistryMetadata,\n  IContainer,\n  IFolderNode,\n  isFolderNode,\n  SerializedContainer,\n  SerializedFolderNode,\n  SerializedNode,\n} from '../../nodes/node-interface';\nimport { SerializedNodeInput, SerializedNodeOutput } from '../../nodes/node-io';\nimport { Link } from '../../nodes/node-link';\nimport { Shape2D } from '../../nodes/node-presenter';\nimport { NodeRegistryHelper } from '../../nodes/node-registry';\nimport { NodeTypeRegistry } from '../../nodes/node-type-registry';\nimport { CONTAINER_NODE_TYPE } from '../../nodes/nodes/container/folder';\nimport { RegistryResult } from '../../nodes/registry';\nimport { SerializableHelper } from '../../nodes/serializable';\nimport { CloneResult, ExportResult, ImportResult, initETLResult, PackResult } from '../../shared/etl-result';\nimport { ContainerRegistryValidator, ListValidator } from '../../shared/validator';\nimport { arrayToObject, isEmpty, isNotNull, isNull, mapToObjectSameKey, unionToArray } from '../../utils/helper';\nimport { IdGenerator } from '../../utils/id-generator';\nimport { NodeService } from './node-service';\nimport { NodeCRUDService } from './NodeCRUDService';\n\ninterface ExtensionContainer extends SerializedContainer {\n  lastId: number;\n}\n\n/**\n * Represents for ETL service (Extract - Transform - Load data, a.k.a import/export)\n */\nexport class NodeETLService extends NodeService {\n\n  /**\n   * Pack up nodes to new container under specific one\n   * @param {number} parentId current parent container id\n   * @param {number[]} ids node ids to pack up\n   * @param atPos At position\n   * @param {ContainerRegistryMetadata} metadata container registry\n   * @return {Promise<PackResult>} pack result\n   */\n  packUpNodes(parentId: number, ids: number[], atPos: [number, number],\n              metadata?: ContainerRegistryMetadata): Promise<PackResult> {\n    this.logger.info(`Packing nodes [${ids}] in container ${parentId} into new container...`);\n    const reg: ContainerRegistryMetadata = metadata ?? this.cRegistry;\n    const v = ContainerRegistryValidator.mustExisted(parentId, reg);\n    return v.then(p => ListValidator.notEmpty(ids, `No node to pack-up`)\n                                    .then(nodeIds => this.doExport(parentId, nodeIds, reg)\n                                                         .then(nodes => ({\n                                                           folder: this.createFolder(p, reg, atPos), nodes: nodes,\n                                                         }))\n                                                         .then(r => this.doPackUp(p, r.folder, r.nodes, reg))));\n  }\n\n  /**\n   * Clone nodes to other nodes under specific container\n   * @param {number} parentId current parent container id\n   * @param {number[]} ids node ids to clone\n   * @param {[number, number]} atPos to move\n   * @param {ContainerRegistryMetadata} metadata container registry\n   * @return {Promise<CloneResult>} clone result\n   */\n  cloneNodes(parentId: number, ids: number[], atPos: [number, number],\n             metadata?: ContainerRegistryMetadata): Promise<CloneResult> {\n    this.logger.info(`Cloning nodes [${ids}] inside container id '${parentId}'...`);\n    return ListValidator.notEmpty(ids, `No node to clone`)\n                        .then(nodeIds => this.doExport(parentId, nodeIds, metadata))\n                        .then(nodes => this.doImport(nodes, parentId, metadata, atPos))\n                        .then(r => initETLResult<CloneResult>(CloneResult, parentId, ids.length, r));\n  }\n\n  /**\n   * Export nodes and children nodes from specific container\n   * @param {number} parentId\n   * @param {number[]} ids\n   * @param {ContainerRegistryMetadata} metadata\n   * @return {Promise<SerializedNode[]>}\n   */\n  exportNodes(parentId: number, ids: number[], metadata?: ContainerRegistryMetadata): Promise<ExportResult> {\n    return ListValidator.notEmpty(ids, `No node to export`)\n                        .then(nodeIds => this.doExport(parentId, nodeIds, metadata))\n                        .then(l => ListValidator.notEmpty<SerializedNode>(l, `Not found any [${ids}] to export`))\n                        .then(nodes => new ExportResult(parentId, nodes));\n  }\n\n  /**\n   * Import nodes into specific container\n   * @param {number} parentId\n   * @param {SerializedNode[]} nodes\n   * @param {[number, number]} atPos\n   * @param {ContainerRegistryMetadata} metadata?\n   * @return {Promise<ImportResult>}\n   */\n  importNodes(parentId: number, nodes: SerializedNode[], atPos: [number, number],\n              metadata?: ContainerRegistryMetadata): Promise<ImportResult> {\n    return ListValidator.notEmpty(nodes, `No nodes to import`)\n                        .then(n => this.doImport(n, parentId, metadata, atPos))\n                        .then(r => initETLResult<ImportResult>(ImportResult, parentId, nodes.length, r));\n  }\n\n  private doExport(cId: number, ids: number[], metadata: ContainerRegistryMetadata): Promise<SerializedNode[]> {\n    this.logger.info(`Exporting [${ids}] nodes in container id '${cId}'...`);\n    const registry: ContainerRegistryMetadata = metadata ?? this.cRegistry;\n    const v = ContainerRegistryValidator.mustExisted(cId, registry);\n    return v.then(_ => registry.rootContainer()['db'])\n            .then(database => this.dbHelper.listByIds(database,\n                                                      unionToArray(ids.map(nId => IdGenerator.createNodeId(cId, nId))))\n                                  .then(nodes => this.getNodesInContainer(database, nodes)));\n  }\n\n  private createFolder(parent: IContainer, registry: ContainerRegistryMetadata,\n                       atPos: [number, number]): IFolderNode {\n    this.logger.info(`Creating new container node into container id '${parent.id}'...`);\n    const folder = <IFolderNode><unknown>NodeFactory.create(<SerializedFolderNode>{\n      id: IdGenerator.genContainerId(registry.get(parent.id).nodeRegistry().findLastId(), 100),\n      cid: parent.id,\n      type: CONTAINER_NODE_TYPE,\n      pos: atPos,\n      sub_container: { id: -1 },\n    }, true, registry);\n    folder.container = parent;\n    folder.sub_container = registry.register(folder.sub_container);\n    this.logger.info(`Cached new container node id '${IdGenerator.createNodeId(parent.id, folder.id)}' ` +\n                     `with container id '${folder.sub_container.id}'`);\n    return folder;\n  }\n\n  private doPackUp(parent: IContainer, folder: IFolderNode, nodes: SerializedNode[],\n                   registry: ContainerRegistryMetadata): Promise<PackResult> {\n    const cid = folder.sub_container.id;\n    const ids = nodes.map(n => n.id);\n    this.logger.info(`Analyzing ${ids.length} nodes to move into container id '${cid}'...`);\n    return this.remapContainers(registry, cid, nodes)\n               .then(containers => new NodeTree(nodes, containers))\n               .then(tree => tree.compute([0, 0]))\n               .then(tree => this.dbHelper.batchInsert(registry.rootContainer()['db'],\n                                                       [SerializableHelper.serialize(folder), ...tree.flatten()]))\n               .then(pNodes => new NodeCRUDService().removeNodes(parent, ids).then(rr => ({ nodes: pNodes, rr })))\n               .then(({ nodes, rr }) => NodeRegistryHelper.register(parent, nodes, registry, true)\n                                                          .then(pr => ({ pr, rr })))\n               .then(({ pr, rr }) => initETLResult<PackResult>(PackResult, parent.id, ids.length, pr, { cid, rr }));\n  }\n\n  private doImport(nodes: SerializedNode[], parentId: number, metadata: ContainerRegistryMetadata,\n                   atPos: [number, number]): Promise<RegistryResult<Node>> {\n    this.logger.info(`Analyzing ${nodes.length} nodes to import into container id '${parentId}'...`);\n    const registry: ContainerRegistryMetadata = metadata ?? this.cRegistry;\n    const v = ContainerRegistryValidator.mustExisted(parentId, registry);\n    return v.then(container => this.remapContainers(registry, parentId, nodes)\n                                   .then(containers => new NodeTree(nodes, containers))\n                                   .then(tree => tree.compute(atPos, parentId))\n                                   .then(t => this.dbHelper.batchInsert(registry.rootContainer()['db'], t.flatten()))\n                                   .then(n => NodeRegistryHelper.register(container, n, registry, true)));\n  }\n\n  private remapContainers(registry: ContainerRegistryMetadata, cId: number,\n                          nodes: SerializedNode[]): Promise<{ [cid: string]: ExtensionContainer }> {\n    const containers = arrayToObject(nodes.filter(n => isFolderNode(n))\n                                          .map(n => <SerializedFolderNode>n)\n                                          .map(n => n.sub_container),\n                                     c => c.id,\n                                     c => ({ id: IdGenerator.genContainerId(registry.lastId(), c.id), lastId: 0 }));\n    const remainContainers = unionToArray(nodes.filter(n => isNull(containers[n.cid])).map(n => n.cid));\n    if (remainContainers.length > 1) {\n      throw new Error(\n        `The given nodes has invalid node(s) that is under non-existed container(s) ` +\n        `[${remainContainers.filter(id => id !== cId)}]`);\n    }\n    const dest = arrayToObject(remainContainers, oldCid => oldCid,\n                               _ => ({ id: cId, lastId: registry.get(cId).nodeRegistry().lastId() }));\n    return Promise.resolve({ ...containers, ...dest });\n  }\n\n}\n\nclass NodeTree {\n  private readonly nodes: SerializedNode[];\n  private readonly remapContainers: { [cid: string]: ExtensionContainer };\n  private tree: { [cId: string]: NodeBranch } = {};\n  private outputs: SerializedNode[];\n\n  constructor(nodes: SerializedNode[], remapContainers: { [p: string]: ExtensionContainer }) {\n    this.nodes = nodes;\n    this.remapContainers = remapContainers;\n  }\n\n  compute(atPos: [number, number], parentId?: number): NodeTree {\n    return this.build().normalize(this.computeRelativePos(atPos, parentId));\n  }\n\n  /**\n   * Returns flatten nodes to insert into database\n   * @return {SerializedNode[]} list serialized node\n   */\n  flatten(): SerializedNode[] {\n    return this.outputs ?? [];\n  }\n\n  private build() {\n    this.nodes.sort((n1, n2) => n2.cid - n1.cid)\n        .forEach(node => {\n          const parent = this.tree[node.cid] = this.tree[node.cid] ?? new NodeBranch(this.remapContainers[node.cid]);\n          let itself: NodeBranch = null;\n          if (isFolderNode(node)) {\n            const cId = (<SerializedFolderNode>node).sub_container.id;\n            itself = this.tree[cId] ?? new NodeBranch(this.remapContainers[cId]);\n            delete this.tree[cId];\n          }\n          // let newId = itself?.parentId() ?? IdGenerator.genNodeId(parent.last(), node.id);\n          parent.push(IdGenerator.genNodeId(parent.last(), node.id), node, itself);\n        });\n    return this;\n  }\n\n  private normalize(relativePos: [number, number]): NodeTree {\n    this.outputs = Object.keys(this.tree)\n                         .sort((b1, b2) => +b1 - +b2)\n                         .map(cId => this.tree[cId] = this.tree[cId].normalize(relativePos))\n                         .flatMap(branch => branch.flatten());\n    return this;\n  }\n\n  private computeRelativePos(atPos: [number, number], parentId?: number): [number, number] {\n    if (isNull(parentId) || (isNull(this.tree[parentId]) &&\n                             isNull(Object.values(this.remapContainers).find(c => c.id === parentId)))) {\n      return atPos;\n    }\n    const branch = this.tree[parentId] ??\n                   this.tree[Object.keys(this.remapContainers).find(k => this.remapContainers[k].id === parentId)];\n    return Shape2D.relative(Shape2D.avgPos(branch.positions()), atPos);\n  }\n}\n\nclass NodeBranch {\n\n  private readonly parent: ExtensionContainer;\n  private nodes: { [nId: string]: { nnId: number, node: SerializedNode, branch?: NodeBranch } } = {};\n  private outputs: SerializedNode[];\n\n  constructor(parent: ExtensionContainer) {\n    this.parent = parent;\n  }\n\n  parentId(): number {\n    return this.parent.id;\n  }\n\n  last(): number {\n    return this.parent.lastId;\n  }\n\n  push(newNodeId: number, node: SerializedNode, subNode?: NodeBranch): NodeBranch {\n    this.nodes[node.id] = { nnId: newNodeId, node, branch: subNode };\n    this.parent.lastId = Math.max(newNodeId, this.parent.lastId);\n    return this;\n  }\n\n  normalize(relativePos: [number, number]): NodeBranch {\n    this.outputs = Object.keys(this.nodes)\n                         .sort((nId1, nId2) => +nId1 - +nId2)\n                         .map(nId => this.nodes[nId] = this.normalizeNodeBranch(this.nodes[nId], relativePos))\n                         .flatMap(branch => this.flattenBranch(branch));\n    return this;\n  }\n\n  flatten(): SerializedNode[] {\n    return this.outputs ?? [];\n  }\n\n  positions(): [number, number][] {\n    return Object.values(this.nodes).map(b => b.node.pos);\n  }\n\n  private flattenBranch(branch: { nnId: number, node: SerializedNode, branch?: NodeBranch }): SerializedNode[] {\n    if (isNull(branch.branch)) {\n      return [branch.node];\n    }\n    const nodes = Object.values(branch.branch.nodes).flatMap(sub => this.flattenBranch(sub));\n    return [branch.node, ...nodes];\n  }\n\n  private lookupNode(nodeId: string | number): SerializedNode {\n    return this.nodes[nodeId]?.node;\n  }\n\n  private normalizeNodeBranch(branch: { nnId: number; node: SerializedNode; branch?: NodeBranch },\n                              relativePos?: [number, number]): { nnId: number; node: SerializedNode; subNode?: NodeBranch } {\n    if (isFolderNode(branch.node)) {\n      const itself = <SerializedFolderNode>branch.node;\n      itself.sub_container.id = branch.branch.parentId();\n      branch.branch = branch.branch.normalizeBranch();\n    }\n    branch.node.id = branch.nnId;\n    branch.node.cid = this.parent.id;\n    branch.node.type = NodeTypeRegistry.instance().lookupNodeType(branch.node.type);\n    branch.node.pos = Shape2D.move(relativePos, branch.node.pos, branch.node.size);\n    branch.node.inputs = this.normalizeNodeInputs(branch.node.inputs, branch.branch);\n    branch.node.outputs = this.normalizeNodeOutputs(branch.node.outputs, branch.branch);\n    return branch;\n  }\n\n  private normalizeBranch(): NodeBranch {\n    this.nodes = mapToObjectSameKey(this.nodes, (_, n) => this.normalizeNodeBranch(n));\n    return this;\n  }\n\n  private normalizeNodeInputs(inputs: { [p: number]: SerializedNodeInput }, branch?: NodeBranch) {\n    return mapToObjectSameKey(inputs, (_, input) => {\n      input.link = this.normalizeLink(input.link);\n      input.subNodeId = branch?.lookupNode(input.subNodeId)?.id;\n      return input;\n    });\n  }\n\n  private normalizeNodeOutputs(outputs: { [p: number]: SerializedNodeOutput }, branch?: NodeBranch) {\n    return mapToObjectSameKey(outputs, (_, output) => {\n      output.links = this.normalizeOutputLinks(output.links);\n      output.subNodeId = branch?.lookupNode(output.subNodeId)?.id;\n      return output;\n    });\n  }\n\n  private normalizeOutputLinks(links: Link[]): Link[] {\n    return isEmpty(links) ? [] : links.map(l => this.normalizeLink(l)).filter(l => isNotNull(l));\n  }\n\n  private normalizeLink(link: Link): Link {\n    if (isNull(link)) {\n      return null;\n    }\n    const l = Link.create(link);\n    l.nodeId = this.nodes[l.nodeId]?.nnId;\n    return isNull(l.nodeId) ? null : l;\n  }\n}\n","import Namespace = SocketIO.Namespace;\nimport { Colors, create } from 'logplease';\n\nconst log = create('server', { color: Colors.Yellow });\n\nexport class WireNameServerSocket {\n  io_root: SocketIO.Server;\n  io: Namespace;\n\n  constructor(io_root: SocketIO.Server) {\n    this.io_root = io_root;\n    const io = io_root.of('/wire-name');\n    this.io = io;\n\n    io.on('connection', function(socket) {\n      log.debug('New client connected to wire');\n\n      socket.on('disconnect', () => {\n        log.debug('Client disconnected from wire');\n      });\n    });\n  }\n}\n","module.exports = require(\"express-validator\");","/**\n * Created by Derwish (derwish.pro@gmail.com) on 04.07.2016.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport * as express from 'express';\nimport { ContainerRegistry } from '../../nodes/container';\n\nlet router = express.Router();\n\nrouter.get('/', function(req, res, next) {\n  res.render('dashboard/index', { container_id: 0 });\n});\n\nrouter.get('/c/:cid', function(req, res, next) {\n  res.render('dashboard/index', { container_id: req.params.cid });\n});\n\n//node direct page get\nrouter.get('/c/:cid/n/:id*', function(req, res) {\n  let cont = ContainerRegistry.instance().get(req.params.cid);\n  if (!cont)\n    return res\n      .status(404)\n      .send(`Can't send request to node. Container id [${req.params.cid}] not found.`);\n\n  let node = cont.getSubNode(req.params.id);\n  if (!node)\n    return res\n      .status(404)\n      .send(`Can't send request to node. Node id [${req.params.cid}/${req.params.id}] not found.`);\n\n  if (node['onDashboardGetRequest']) node['onDashboardGetRequest'](req, res);\n  else\n    return res\n      .status(404)\n      .send(\n        `Can't send request to node. Node id [${req.params.cid}/${req.params.id}] does not accept requests.`,\n      );\n});\n\n//node direct page post\nrouter.post('/c/:cid/n/:id*', function(req, res) {\n  let cont = ContainerRegistry.instance().get(req.params.cid);\n  if (!cont)\n    return res\n      .status(404)\n      .send(`Can't send request to node. Container id [${req.params.cid}] not found.`);\n\n  let node = cont.getSubNode(req.params.id);\n  if (!node)\n    return res\n      .status(404)\n      .send(`Can't send request to node. Node id [${req.params.cid}/${req.params.id}] not found.`);\n\n  if (node['onDashboardPostRequest']) node['onDashboardPostRequest'](req, res);\n  else\n    return res\n      .status(404)\n      .send(\n        `Can't send request to node. Node id [${req.params.cid}/${req.params.id}] does not accept requests.`,\n      );\n});\n\nmodule.exports = router;\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 25.02.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport * as express from 'express';\nimport { ContainerRegistry } from '../../nodes/container';\n\nlet router = express.Router();\n\n/**\n * Get container\n */\nrouter.get('/c/:cid', function(req, res) {\n  let container = ContainerRegistry.instance().get(req.params.cid);\n  if (!container)\n    return res.status(404).send(`Can't get container. Container id [${req.params.cid}] not found.`);\n  //TODO: fix it\n  // let s = container.serialize(true);\n  let s = container.serialize();\n  res.json(s);\n});\n\nmodule.exports = router;\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 04.07.2016.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport * as express from 'express';\nimport * as config from '../../config.json';\nimport { ContainerRegistry } from '../../nodes/container';\n\nlet router = express.Router();\n\nrouter.get('/', function(req, res) {\n  res.render('editor/index', {\n    split: req.query.split,\n    container_id: 0,\n    theme: config.nodeEditor.theme,\n  });\n});\n\nrouter.get('/c/:cid', function(req, res) {\n  let cid = req.params.cid || 0;\n\n  if (!ContainerRegistry.instance().get(cid)) return res.redirect('/editor');\n\n  res.render('editor/index', {\n    split: req.query.split,\n    container_id: cid,\n    theme: config.nodeEditor.theme,\n  });\n});\n\nrouter.get('/split', function(req, res) {\n  res.render('editor/split', { container_id: 0 });\n});\n\nrouter.get('/split/c/:cid', function(req, res) {\n  let cid = req.params.cid || 0;\n\n  if (!ContainerRegistry.instance().get(cid)) return res.redirect('/editor/split');\n\n  res.render('editor/split', { container_id: cid });\n});\n\nmodule.exports = router;\n","import * as express from 'express';\nimport app from '../../app';\nimport WireNameDataSource from '../../database/datasource/WireNameDataSource';\n\nlet router = express.Router();\n\nrouter.get('', async function(req, res) {\n  try {\n    const wire = await WireNameDataSource.getWireName();\n    res.json(wire);\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nrouter.put('', async function({ body }, res) {\n  const { name } = body;\n  try {\n    await WireNameDataSource.changeWireName(name);\n    app.server.wireNameSocket.io.emit('wire-name-update', name);\n    res.status(201).send(body);\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nmodule.exports = router;\n","import * as fs from 'fs';\nimport config from '../../config';\nimport FileUtils from '../../nodes/utils/file-utils';\nimport { db_logger as logger } from '../../utils/loggers';\n\nconst file = `${config.dataDir}/wire-name.txt`;\nexport default class WireNameDataSource {\n\n  static getWireName(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      FileUtils.createFile(file).then(() => {\n        fs.readFile(file, { encoding: 'utf-8' }, (err, data) => {\n          if (err) {\n            logger.error(err.message);\n            reject(err);\n          } else {\n            resolve(data);\n          }\n        });\n      });\n    });\n  }\n\n  static changeWireName(wireName: string): Promise<string> {\n    return new Promise((resolve, reject) => {\n      FileUtils.createFile(file).then(() => {\n        fs.writeFile(file, wireName, err => {\n          if (err) {\n            logger.error(err.message);\n            reject(err);\n          } else {\n            resolve(wireName);\n          }\n        });\n      });\n    });\n  }\n\n}\n","import * as express from 'express';\nimport app from '../../app';\nimport { authMiddleware, schemaMiddleware } from '../middleware';\nimport CryptoUtils from '../../nodes/utils/crypto-utils';\n\nconst Joi = require('@hapi/joi');\nlet router = express.Router();\n\nconst authUserSchema = Joi.object({\n  username: Joi.string().min(5),\n  password: Joi.string().min(5),\n});\n\nconst encryptTextSchema = Joi.object({\n  text: Joi.string().min(1),\n});\n\nrouter.route('/encrypt').post(schemaMiddleware(encryptTextSchema, 'body'), async (req, res) => {\n  try {\n    res.status(201).send({ encryptedText: CryptoUtils.encrypt(req.body.text) });\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nrouter.route('/user').post(schemaMiddleware(authUserSchema, 'body'), async (req, res) => {\n  try {\n    const authUser = await app.db.addAuthUser(req.body);\n    res.status(201).send(authUser);\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nrouter.route('/user').get(async (req, res) => {\n  try {\n    const authUser = await app.db.getAuthUser();\n    res.status(200).send(authUser);\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nrouter.route('/users').delete(authMiddleware(), async (req, res) => {\n  try {\n    const authUser = await app.db.deleteAuthUsers();\n    res.status(200).send(authUser);\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nrouter.route('/login').post(schemaMiddleware(authUserSchema, 'body'), async (req, res) => {\n  try {\n    const token = await app.db.getAuthToken(req.body);\n    res.status(200).send({ token });\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nmodule.exports = router;\n","module.exports = require(\"crypto-js\");","import * as express from 'express';\nimport HelpDataSource from '../../database/datasource/HelpDataSource';\n\nlet router = express.Router();\n\nrouter.get('', async function(req, res) {\n  try {\n    const stringHtml = await HelpDataSource.getHelpComment();\n    res.json(stringHtml);\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nrouter.put('', async function({ body }, res) {\n  const { stringHtml } = body;\n  try {\n    await HelpDataSource.changeHelpComment(stringHtml);\n    res.status(201).send(\"successful\");\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\nmodule.exports = router;\n\n","import * as fs from 'fs';\nimport config from '../../config';\nimport FileUtils from '../../nodes/utils/file-utils';\nimport { db_logger as logger } from '../../utils/loggers';\n\nconst file = `${config.dataDir}/help-comment.txt`;\nexport default class HelpDataSource {\n\n  static getHelpComment(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      FileUtils.createFile(file).then(() => {\n        fs.readFile(file, { encoding: 'utf-8' }, (err, data) => {\n          if (err) {\n            logger.error(err.message);\n            reject(err);\n          } else {\n            resolve(data);\n          }\n        });\n      });\n    });\n  }\n\n  static changeHelpComment(stringHtml: string): Promise<string> {\n    return new Promise((resolve, reject) => {\n      FileUtils.createFile(file).then(() => {\n        fs.writeFile(file, stringHtml, err => {\n          if (err) {\n            logger.error(err.message);\n            reject(err);\n          } else {\n            resolve(stringHtml);\n          }\n        });\n      });\n    });\n  }\n\n}\n\n","import { exec } from 'child_process';\nimport * as express from 'express';\nimport PlatformDataSource from '../../database/datasource/PlatformDataSource';\nimport { ContainerRegistry } from '../../nodes/container';\nimport FileUtils from '../../nodes/utils/file-utils';\nimport IpAddressUtils from '../../nodes/utils/ip-address-utils';\nimport OsUtils from '../../nodes/utils/os-utils';\nimport UuidUtils from '../../nodes/utils/uuid-utils';\nimport { parseBool } from '../../utils/helper';\nimport PLAT from '../../utils/wires-plat';\n\nlet router = express.Router();\n\n// get platform data\nrouter.get('', async function (req, res) {\n  try {\n    const platform = await PlatformDataSource.getPlatform();\n    res.json(platform);\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\n// update platform\nrouter.put('', async function ({ body }, res) {\n  try {\n    await PlatformDataSource.updatePlatform(body);\n    res.status(201).send(\"successful\");\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\n// get log app-out.log  \nrouter.get('/host/logs/wires/app-out', async function (req, res) {\n  const file = \"/app-out.log\"\n  const hostBBB = \"/home/debian/.pm2/logs\"\n  const hostRC = \"/home/pi/.pm2/logs\"\n  const hostBBBType = \"GENERIC AM33XX (FLATTENED DEVICE TREE)\"\n  const hostRCType = \"BCM2835\"\n  const testPcHost = 'MS-7A66'\n  const testPc = '/home/aidan/code/node/wires/rubix-wires/db'\n  try {\n    await OsUtils.systemInfo().then(e => {\n      let hostFile = \"\"\n      if (e.system.model === hostBBBType) {\n        hostFile = `${hostBBB}${file}`\n      } else if (e.system.model === hostRCType) {\n        hostFile = `${hostRC}${file}`\n      } else res.status(500).send('ERROR GET LOGS platform API call /host/logs/wires/app-out: ISSUE ON host not found');\n      try {\n        FileUtils.readFile(hostFile).then((e) => {\n          res.status(201).send(e);\n        });\n      } catch (err) {\n        res.status(500).send(`ERROR GET LOGS platform API call /host/logs/wires/app-out: ISSUE ON read file try/catch ${err}`);\n      }\n    }).catch(err => {\n      res.status(500).send('ERROR GET LOGS platform API call /host/logs/wires/app-out: ISSUE ON systemInfo()');\n    })\n  } catch (err) {\n    res.status(500).send('ERROR GET LOGS platform API call /host/logs/wires/app-out: ISSUE ON main try/catch');\n  }\n});\n\n\n// get log app-error.log  \nrouter.get('/host/logs/wires/app-error', async function (req, res) {\n  const file = \"/app-error.log\"\n  const hostBBB = \"/home/debian/.pm2/logs\"\n  const hostRC = \"/home/pi/.pm2/logs\"\n  const hostBBBType = \"GENERIC AM33XX (FLATTENED DEVICE TREE)\"\n  const hostRCType = \"BCM2835\"\n  const testPcHost = 'MS-7A66'\n  const testPc = '/home/aidan/code/node/wires/rubix-wires/db'\n  try {\n    await OsUtils.systemInfo().then(e => {\n      let hostFile = \"\"\n      if (e.system.model === hostBBBType) {\n        hostFile = `${hostBBB}${file}`\n      } else if (e.system.model === hostRCType) {\n        hostFile = `${hostRC}${file}`\n      } else res.status(500).send('ERROR GET LOGS platform API call /host/logs/wires/app-error: ISSUE ON host not found');\n      try {\n        FileUtils.readFile(hostFile).then((e) => {\n          res.status(201).send(e);\n        });\n      } catch (err) {\n        res.status(500).send(`ERROR GET LOGS platform API call /host/logs/wires/app-error: ISSUE ON read file try/catch ${err}`);\n      }\n    }).catch(err => {\n      res.status(500).send('ERROR GET LOGS platform API call /host/logs/wires/app-error: ISSUE ON systemInfo()');\n    })\n  } catch (err) {\n    console.log(4444)\n    res.status(500).send('ERROR GET LOGS platform API call /host/logs/wires/app-error: ISSUE ON main try/catch');\n  }\n});\n\n\n\n\n// restart wires \nrouter.get('/wires/runtime/restart', async function (req, res) {\n  let command = 'sudo systemctl restart nubeio-rubix-wires.service'\n  try {\n    //reboot after 10 sec\n    setTimeout(() => {\n      exec(command, (err, stdout, stderr) => {\n        if (stdout) {\n          res.json(\"reboot wires\");\n        }\n        if (err) {\n          res.status(500);\n        }\n        if (stderr) {\n          res.status(500);\n        }\n      });\n    }, 5000);\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\n// reboot host \nrouter.get('/host/reboot', async function (req, res) {\n  let command = 'sudo reboot'\n  try {\n    //reboot after 10 sec\n    setTimeout(() => {\n      exec(command, (err, stdout, stderr) => {\n        if (stdout) {\n          res.json(\"reboot host\");\n        }\n        if (err) {\n          res.status(500);\n        }\n        if (stderr) {\n          res.status(500);\n        }\n      });\n    }, 5000);\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\n// delete db files\n// dashboard.db, nodes.db, schedule.db\n// sudo touch nodes.db  && sudo touch schedule.db && sudo touch dashboard.db\nrouter.get('/wires/db/delete', async function (req, res) {\n  const path = '/data/rubix-wires'\n  const nodes = `${path}/nodes.db`\n  const sch = `${path}/schedule.db`\n  const dashboard = `${path}/dashboard.db`\n  const files = [nodes, sch, dashboard];\n  files.forEach(function (file) {\n    if (FileUtils.checkFileExists(file)) {\n      let command = `sudo rm ${file}`\n      try {\n        exec(command, (err, stdout, stderr) => {\n          if (stdout) {\n            res.status(201).send(\"successful\");\n          }\n          if (err) {\n            res.status(500);\n          }\n          if (stderr) {\n            res.status(500);\n          }\n        });\n      } catch (e) {\n        res.status(500).send(e);\n      }\n    }\n  });\n  res.status(201).send(\"successful\");\n\n});\n\n//make uuid\nrouter.get('/uuid/eight', async function (req, res) {\n  try {\n    const out8 = UuidUtils.create8DigId();\n    if (out8) {\n      res.json(JSON.stringify(out8));\n    } else {\n      res.status(500);\n    }\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\n\n//update wires by calling a bash script\nrouter.get('/wires/update', async function (req, res) {\n  const url: string = PLAT.wiresPlatUrlBuilder(PLAT.EPWiresUpdate);\n  try {\n    console.log(`WIRES-UPDATE: api call ${url}`)\n    await PLAT.get(url).then(e => {\n      res.status(200).send(`API CALL WAS SUCCESSFUL ${e.data}`);\n    }).catch(err => {\n      console.log(`WIRES-UPDATE-ERROR: ${err}`)\n      res.status(500).send(err);\n    })\n  } catch (err) {\n    console.log(`WIRES-UPDATE-ERROR: main try/catch error: ${err}`)\n    res.status(500).send(err);\n  }\n});\n\n//download nodes\nrouter.get('/wires/download/nodes', async function (req, res) {\n  try {\n    const container = ContainerRegistry.instance().rootContainer();\n    container.db.getNodes((err, docs) => {\n      if (!err) {\n        res.json(JSON.stringify(docs));\n      } else {\n        res.status(500);\n      }\n    });\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\n//get disc space\nrouter.get('/host/info/disc', async function (req, res) {\n  try {\n    OsUtils.fsSize()\n      .then(obj => {\n        res.json(JSON.stringify(obj));\n      })\n      .catch(err => {\n        res.status(500).send(err);\n      });\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\n// get hostname\nrouter.get('/host/info/host-name', async function (req, res) {\n  try {\n    await OsUtils.systemAll().then(e => {\n      res.json(e);\n    }).catch(err => {\n      console.log('hostName ERROR')\n      res.status(500).send(err);\n    })\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\n\n// get system info\nrouter.get('/host/info/system', async function (req, res) {\n  try {\n    await OsUtils.systemInfo().then(e => {\n      console.log(' systemInfo', e)\n      res.json(e);\n    }).catch(err => {\n      console.log('ERROR ')\n      res.status(500).send(err);\n    })\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\n\n// get eth\nrouter.get('/host/ip/eth-info', async function (req, res) {\n  try {\n    const eth = await PlatformDataSource.getEth();\n    res.json(eth);\n  } catch (e) {\n    res.status(500).send(e);\n  }\n});\n\n// update eth\nrouter.put('/host/ip/eth', async function ({ body }, res) {\n  try {\n    await PlatformDataSource.updateEth(body);\n    const interface1Eth = 'eth0'; //eth0 (ETH1 on the RC)\n    const dhcp1Eth = parseBool(body.dhcpEth1)\n    const eth1Ip = body.eth1Ip;\n    const eth1Sub = body.eth1Sub;\n    const eth1Gate = body.eth1Gate;\n    const eth1NameServer = body.eth1NameServer;\n\n    const interface2Eth = 'eth1'; //eth1 (ETH2 on the RC)\n    const dhcp2Eth = parseBool(body.dhcpEth2)\n    const eth2Ip = body.eth2Ip;\n    const eth2Sub = body.eth2Sub;\n    const eth2Gate = body.eth2Gate;\n    const eth2NameServer = body.eth2NameServer;\n    console.log(1111)\n    console.log(body)\n    console.log(1111)\n    IpAddressUtils.updateIpRubixCompute(interface1Eth, dhcp1Eth, eth1Ip, eth1Sub, eth1Gate, eth1NameServer, interface2Eth, dhcp2Eth, eth2Ip, eth2Sub, eth2Gate, eth2NameServer).then(e => {\n      console.log('UPDATE IP ETH')\n      res.status(201).send('UPDATE IP ETH');\n    }).catch(err => {\n      console.log('UPDATE IP ETH ERR')\n      res.status(500).send(err);\n    })\n  } catch (err) {\n    res.status(500).send(err);\n  }\n});\n\n\nmodule.exports = router;\n\n","module.exports = require(\"systeminformation\");","module.exports = require(\"network\");","import Utils from \"../nodes/utils\";\nimport axios from 'axios'\n\nexport default class PLAT {\n\n  static port = 1414;\n  static url = '127.0.0.1';\n  static apiVer = '1.1';\n  static EPWiresUpdate = 'wires/update';\n\n  /**\n   * wires plat url builder\n   * @param endpoint {string} pass in the endpoint\n   */\n  static wiresPlatUrlBuilder(ep: string) {\n    const url = `${Utils.buildUrl(PLAT.url, PLAT.port)}/api/${PLAT.apiVer}/${ep}`;\n    return url;\n  }\n\n  /**\n   * wires plat api call\n   * @param endpoint {string} pass in the endpoint\n   */\n  static async get(url: string): Promise<any> {\n    return await axios.get(url);\n  }\n\n\n}\n","/**\n * Add all new nodes classes here!!!\n */\n// import './alerts/alerts';\nimport './boolean/and';\nimport './boolean/or';\nimport './boolean/xor';\nimport './boolean/not';\nimport './boolean/toggle';\nimport './boolean/one-shot';\nimport './boolean/min-on-off';\nimport './boolean/on-delay';\nimport './boolean/off-delay';\nimport './boolean/ticker';\nimport './compare/equal';\nimport './compare/greater-than';\nimport './compare/less-than';\nimport './compare/between';\nimport './compare/hysteresis';\nimport './compare/type-check';\nimport './connection/DispatchListener';\nimport './connection/local-transmitter-single';\nimport './connection/local-receiver-single';\nimport './connection/local-transmitter';\nimport './connection/local-receiver';\nimport './connection/hub';\nimport './container/folder';\nimport './container/folder-input';\nimport './container/folder-output';\nimport './conversion/bit-mask';\nimport './conversion/bit-split';\nimport './conversion/bool-to-int';\nimport './conversion/buffer-to-hex-string'\nimport './conversion/buffer-to-num';\nimport './conversion/data-conversion';\nimport './conversion/hex-string-to-buffer'\nimport './conversion/int-to-byte-four-array';\nimport './count/any-event-counter';\nimport './count/counter';\nimport './count/triggered-ramp';\nimport './count/interval-ramp';\nimport './count/waveform';\nimport './csv/csv-merge-rows';\nimport './csv/csv-merge-columns';\nimport './bsa/bsa-cumulocity-device';\nimport './bsa/bsa-cumulocity-point';\nimport './bsa/bsa-cumulocity-alarm';\nimport './custom-function/function';\n// import './custom-function/merge-function';\n// import './custom-function/fan-out-function';\nimport './custom-function/uuid';\nimport './dashboard/label';\nimport './dashboard/button';\nimport './dashboard/switch';\nimport './dashboard/progress';\nimport './dashboard/slider';\nimport './dashboard/text-box';\nimport './dashboard/log';\nimport './dashboard/chart';\nimport './debug/console';\nimport './debug/notes';\nimport './debug/watch';\nimport './error/link-error-check';\nimport './error/output-error-check';\nimport './filter/only-true';\nimport './filter/only-false';\nimport './filter/only-between';\nimport './filter/only-greater';\nimport './filter/only-lower';\nimport './filter/only-equal';\nimport './filter/prevent-null';\nimport './filter/prevent-equal';\nimport './filter/prevent-duplicates';\n//import './filter/reduce-events';\n//import './filter/reduce-duplicates';\nimport './history/data-store';\nimport './history/influx-db';\nimport './history/influx-db-2';\nimport './history/history';\nimport './history/point-persistence';\nimport './history/point-tag';\nimport './hvac/deadband';\nimport './hvac/thermostat';\nimport './hvac/lead-lag-staging';\nimport './hvac/lead-lag-switch';\nimport './hvac/pac-unit-control';\nimport './hvac/PID';\nimport './hvac/toggle-duration';\nimport './hvac/psychometrics';\nimport './hvac/energy-conversion';\nimport './hvac/power-conversion';\nimport './hvac/volume-conversion';\nimport './hvac/temperature-conversion';\nimport './hvac/atm-pressure-conversion';\nimport './hvac/pressure-conversion';\nimport './hvac/actuator-sizing';\nimport './hvac/k-factor';\nimport './hvac/dp-airflow';\n// import './IoT/datapoint-node';\n// import './IoT/installer-node';\n// import './IoT/IoT-point-folder';\n// import './IoT/IoT-network';\nimport './json/array-builder';\nimport './json/array-builder-num';\nimport './json/array-combine';\nimport './json/json-builder';\nimport './json/json-enum-builder';\nimport './json/json-filter';\nimport './json/json-obj-filter';\nimport './json/json-filter-compare';\n// import './json/json-filter-multiple-old';\nimport './json/json-filter-multiple';\nimport './json/json-checker';\n//  import './json/json-func';\n//  import './json/json-keys';\nimport './json/json-parse';\nimport './json/json-prevent-duplicates';\nimport './json/json-query';\nimport './latch/any-latch';\nimport './latch/bool-latch';\nimport './latch/num-latch';\nimport './latch/string-latch';\nimport './latch/set-reset';\nimport './math/add';\nimport './math/subtract';\nimport './math/multiply';\nimport './math/divide';\nimport './math/absolute';\nimport './math/modulus';\nimport './math/power';\nimport './math-advanced/acos';\nimport './math-advanced/asin';\nimport './math-advanced/atan';\nimport './math-advanced/cbrt';\nimport './math-advanced/cos';\nimport './math-advanced/exp';\nimport './math-advanced/log';\nimport './math-advanced/log10';\nimport './math-advanced/sin';\nimport './math-advanced/sqrt';\nimport './math-advanced/tan';\nimport './math-trigger/trigger-add';\nimport './math-trigger/trigger-subtract';\nimport './math-trigger/trigger-multiply';\nimport './math-trigger/trigger-divide';\nimport './math-trigger/trigger-modulus';\nimport './math-trigger/trigger-power';\n//import './network/network-ping';\n//import './network/network-scan';\nimport './miscellaneous/geo-hash';\nimport './miscellaneous/num-series-generator';\nimport './miscellaneous/append-to-strings';\nimport './nube/get-schedules';\nimport './num-transform/round';\nimport './num-transform/floor';\nimport './num-transform/ceil';\nimport './num-transform/limit';\nimport './num-transform/scale';\nimport './num-transform/linear-shaper';\nimport './num-transform/fade';\nimport './num-transform/rate-limit';\nimport './point/bool-constant';\nimport './point/num-constant';\nimport './point/string-constant';\nimport './point/json-constant';\nimport './point/bool-writable';\nimport './point/num-writable';\nimport './point/string-writable';\nimport './point/generic-point';\nimport './protocols/email/email';\nimport './protocols/http/http-client';\n//import './protocols/http/dynamic-http-client';\nimport './protocols/edge-28/edge-28-network';\nimport './protocols/edge-28/edge-28-input';\nimport './protocols/edge-28/edge-28-output';\nimport './protocols/edge-28/edge-28-lora-reset';\nimport './protocols/bacnet/bacnet-network';\nimport './protocols/bacnet/bacnet-device';\nimport './protocols/bacnet/bacnet-point';\nimport './protocols/bacnet-server/bacnet-server-node';\nimport './protocols/bacnet-server/bacnet-server-point';\nimport './protocols/lora-raw/lora';\n// import './protocols/lora-raw/lora-filter';\nimport './protocols/lora-raw/lora-two-way-in';\nimport './protocols/lora-raw/lora-two-way-out';\n// import './protocols/lora-raw/lora-two-way-test';\n// import './protocols/lora-raw/rubix-compute-lora-reset';\nimport './protocols/lora-raw-v2/lora-raw-points'\nimport './protocols/lora-raw-v2/lora-raw-sensor-legacy'\nimport './protocols/modbus/modbus-server';\nimport './protocols/modbus/modbus-rtu-device';\nimport './protocols/modbus/modbus-rtu-point';\nimport './protocols/modbus/modbus-rtu-network';\nimport './protocols/mqtt/mqtt-client';\nimport './protocols/mqtt/mqtt-client-single';\nimport './protocols/mqtt/mqtt-client-node';\nimport './protocols/mqtt/mqtt-point-node';\nimport './protocols/mqtt/mqtt-generic-node';\nimport './protocols/mqtt-broker/mqtt-broker';\nimport './protocols/mqtt/topic-parts';\nimport './protocols/mqtt/topic-builder';\n// import './protocols/mqtt-broker/mqtt-broker';\n// import './protocols/mqtt/mqtt-point';\n// import './protocols/mqtt/mqtt-point-read';\nimport './protocols/serial-connector/serial-connector';\n//import './protocols/websocket/web-socket';\n//import './schedule/event-schedule';\nimport './schedule/weekly-schedule';\nimport './schedule/schedule-merge';\nimport './schedule/schedule-checker';\n//import './social/slack-bot';\n//import './social/sms-twilio';\nimport './statistics/min-max-avg';\nimport './statistics/avg';\nimport './statistics/min';\nimport './statistics/max';\nimport './statistics/sum';\nimport './statistics/median';\nimport './statistics/range';\nimport './statistics/rank';\nimport './statistics/stats-all';\nimport './streams/stream-average';\nimport './streams/stream-highest';\nimport './streams/stream-lowest';\nimport './streams/stream-sum';\nimport './streams/stream-merge';\nimport './streams/gate';\nimport './streams/stack';\nimport './streams/queue';\nimport './streams/stream-delay';\nimport './streams/stream-delay-meter';\nimport './streams/frequency-meter';\nimport './streams/flatline';\nimport './string/string-acronyms';\nimport './string/string-compare';\nimport './string/substring-cut';\nimport './string/string-join';\nimport './string/string-length';\nimport './string/string-index-of';\nimport './string/char-at-index';\nimport './string/string-split';\nimport './string/string-case';\nimport './string/char-to-ascii';\nimport './string/ascii-to-char';\nimport './string/string-buffer';\nimport './switch/bool-switch';\nimport './switch/num-switch';\nimport './switch/string-switch';\nimport './switch/bool-select';\nimport './switch/num-select';\nimport './switch/string-select';\nimport './switch/bool-output-select';\nimport './switch/num-output-select';\nimport './switch/string-output-select';\nimport './system/host-info';\nimport './system/platform';\nimport './system/system-info';\nimport './system/beep';\nimport './system/execute-cmd';\n//import './system/file';\nimport './system/flow-export';\n//import './system/json-file';\nimport './system/ip/network-interfaces-bbb';\nimport './system/ip/network-interfaces';\nimport './system/wires-version';\nimport './time/time-conversion';\nimport './time/time-conversion-plus';\nimport './time/timezone-conversion';\nimport './time/clock';\nimport './time/date';\nimport './time/time-diff';\nimport './time/stopwatch';\nimport './time/cron-interval';\nimport './time/cron-weekly';\nimport './time/cron-expression';\nimport './time/timestamp-generator';\nimport './trigger/change-of-value';\nimport './trigger/random';\nimport './trigger/inject';\nimport './trigger/interval-inject';\nimport './trigger/iterator';\nimport './widget/schedule-afterhours-off';\nimport './widget/schedule-prestart-fixed';\nimport './unknown/unknown-export';\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass AndNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicSettingsExist = false;\n    this.dynamicInputsType = Type.BOOLEAN;\n    this.title = NODE_INFO.boolean.and.title;\n    this.description = NODE_INFO.boolean.and.description;\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('out not', Type.BOOLEAN);\n    this.setOutputData(0, false);\n    this.setOutputData(1, true);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const allInputs = this.getDefinedInputValues();\n    if (allInputs.length == 0) {\n      this.setOutputData(0, false);\n      this.setOutputData(1, true);\n      return;\n    }\n    const areAllInputsTrue = allInputs.every(v => v === true);\n    this.setOutputData(0, areAllInputsTrue);\n    this.setOutputData(1, !areAllInputsTrue);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('boolean/and', AndNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass OrNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicSettingsExist = false;\n    this.dynamicInputsType = Type.BOOLEAN;\n    this.title = NODE_INFO.boolean.or.title;\n    this.description = NODE_INFO.boolean.or.description;\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('out not', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const allInputs = this.getDefinedInputValues();\n    if (allInputs.length == 0) {\n      this.setOutputData(0, false);\n      this.setOutputData(1, true);\n      return;\n    }\n\n    const anyTrue = allInputs.some(v => v == true);\n    this.setOutputData(0, anyTrue);\n    this.setOutputData(1, !anyTrue);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('boolean/or', OrNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport Icons from '../../node-icons';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nlet logicMainColour = Icons.logicMainColour;\nlet logicAndIcon = Icons.logicAndIcon;\nlet logicOrIcon = Icons.logicOrIcon;\n\nclass XorNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.boolean.xor.title;\n    this.description = NODE_INFO.boolean.xor.description;\n\n    // this.headerColor = logicMainColour;\n    //this.iconImageUrl = logicAndIcon;\n\n    this.addInput('in 1', Type.BOOLEAN);\n    this.addInput('in 2', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('out not', Type.BOOLEAN);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const in1 = this.getInputData(0);\n    const in2 = this.getInputData(1);\n    if ((in1 && !in2) || (!in1 && in2)) {\n      this.setOutputData(0, true);\n      this.setOutputData(1, false);\n    } else {\n      this.setOutputData(0, false);\n      this.setOutputData(1, true);\n    }\n  }\n}\nContainer.registerNodeType('boolean/xor', XorNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport Icons from '../../node-icons';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nlet logicMainColour = Icons.logicMainColour;\nlet logicNotIcon = Icons.logicNotIcon;\n\nclass NotNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.boolean.not.title;\n    this.description = NODE_INFO.boolean.not.description;\n    // this.headerColor = logicMainColour;\n    // this.iconImageUrl = logicNotIcon;\n    this.addInput('input', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    this.emitTransformedInput(x => !x);\n  }\n}\nContainer.registerNodeType('boolean/not', NotNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass ToggleNode extends Node {\n  state = false;\n  lastVal;\n  count = 0;\n  constructor() {\n    super();\n    this.title = NODE_INFO.boolean.toggle.title;\n    this.description = NODE_INFO.boolean.toggle.description;\n    this.addInput('input', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    //this.addOutput('toggle out', Type.BOOLEAN);\n    this.settings['reset-on-disc'] = NodeSetting.create({\n      description: 'Reset on disconnected or input is null',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['toggleOnAny'] = NodeSetting.create({\n      description: 'Toggle on any input change',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    const toggleOnAny = this.settings['toggleOnAny'].value\n    const inputUpdated = this.inputs[0].updated;\n\n    if(toggleOnAny){\n      if (inputUpdated) {\n        this.properties['count']++;\n        this.setOutputData(0, !this.outputs[0].data); // toggle\n      }\n      return\n    }\n    // sends a true/false on each input update\n    if (this.count === 0) {\n      //this.setOutputData(1, false);\n      this.count = 1;\n    } else if (this.count === 1) {\n      //this.setOutputData(1, true);\n      this.count = 0;\n    }\n\n    if (input == null || input == undefined) {\n      if (this.settings['reset-on-disc'].value) {\n        this.lastVal = false;\n        this.setOutputData(0, false);\n        this.state = false;\n      }\n    } else if (input == this.lastVal) return;\n    if (input == true) {\n      this.setOutputData(0, !this.state);\n      this.state = !this.state;\n    }\n    this.lastVal = input;\n  }\n}\nContainer.registerNodeType('boolean/toggle', ToggleNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass OneShotNode extends Node {\n  lastFireValue: boolean;\n  enabled: boolean;\n  lastResetValue: boolean;\n  timeoutFunc;\n  remainingFunc;\n  timeUnits;\n  remainingUpdateMillis;\n  remainingUpdateSize;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.boolean[\"one-shot\"].title;\n    this.description = NODE_INFO.boolean[\"one-shot\"].description;\n\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Interval (Max is 597 Hours)');\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('remaining', Type.NUMBER);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.MILLISECONDS, text: 'Milliseconds' },\n          { value: TIME_TYPE.SECONDS, text: 'Seconds' },\n          { value: TIME_TYPE.MINUTES, text: 'Minutes' },\n          { value: TIME_TYPE.HOURS, text: 'Hours' },\n        ],\n      },\n      value: TIME_TYPE.SECONDS,\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n\n    this.settings['retrigger'] = NodeSetting.create({\n      description: \"Retrigger While Output is 'true'?\",\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n\n  }\n\n  onCreated() {\n  }\n\n  onAdded() {\n    this.clearTimers();\n    this.setOutputData(0, false);\n    this.setOutputData(1, 0);\n    this.lastFireValue = false;\n    this.lastResetValue = false;\n    this.enabled = false;\n    this.onAfterSettingsChange();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onAfterSettingsChange() {\n    this.timeUnits = this.settings['time'].value;\n    this.inputs[2]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.outputs[1]['name'] = `[remaining] (${this.timeUnits})`;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let reset = this.getInputData(1);\n    if (reset == null) reset = false;\n    if (reset == true && reset != this.lastResetValue) {\n      this.clearTimers();\n      this.setOutputData(0, false);\n      this.setOutputData(1, 0);\n      this.enabled = false;\n    }\n    this.lastResetValue = reset;\n\n    let fire = this.getInputData(0);\n    if (fire == null) fire = false;\n    if (fire == true && fire != this.lastFireValue) {\n      const retrigger = this.settings['retrigger'].value;\n      if (retrigger || this.enabled === false) {\n        const delay = this.getInputData(2);\n        const delayMilli = TimeUtils.timeConvert(delay, this.timeUnits);\n        this.clearTimers();\n        this.setOutputData(0, true);\n        this.setOutputData(1, delay);\n        this.enabled = true;\n        this.timeoutFunc = setTimeout(() => {\n          this.enabled = false;\n          this.setOutputData(0, false);\n          this.setOutputData(1, 0);\n          clearInterval(this.remainingFunc);\n        }, delayMilli);\n        switch(this.timeUnits){\n          case TIME_TYPE.MILLISECONDS:\n            this.remainingUpdateMillis = 500;\n            this.remainingUpdateSize = 500;\n            break;\n          case TIME_TYPE.SECONDS:\n            this.remainingUpdateMillis = 1000;\n            this.remainingUpdateSize = 1;\n            break;\n          case TIME_TYPE.MINUTES:\n            this.remainingUpdateMillis = 6000;\n            this.remainingUpdateSize = 0.1;\n            break;\n          case TIME_TYPE.HOURS:\n            this.remainingUpdateMillis = 360000;\n            this.remainingUpdateSize = 0.1;\n            break;\n        }\n        this.remainingFunc = setInterval(() => {\n          const remaining = this.outputs[1].data - this.remainingUpdateSize;\n          this.setOutputData(1, remaining);\n        }, this.remainingUpdateMillis);\n      }\n    }\n    this.lastFireValue = fire;\n    this.setOutputData(0, this.outputs[0].data, true);\n    this.setOutputData(1, this.outputs[1].data, true);\n  }\n\n  private clearTimers() {\n    if (this.timeoutFunc) clearTimeout(this.timeoutFunc);\n    if (this.remainingFunc) clearInterval(this.remainingFunc);\n  }\n  \n}\nContainer.registerNodeType('boolean/one-shot', OneShotNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\n// TODO: Check logic\nclass MinOnOffNode extends Node {\n  lastValue: boolean;\n  timeOn: number;\n  timeOff: number;\n  minOnEnabled: boolean;\n  minOffEnabled: boolean;\n  minOnTime: number;\n  minOffTime: number;\n  lastResetValue: boolean;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.boolean[\"min-on-off\"].title;\n    this.description = NODE_INFO.boolean[\"min-on-off\"].description;\n    this.addInput('input', Type.BOOLEAN);\n    this.addInputWithSettings('minOn', Type.NUMBER, 1, 'Minimum On Time');\n    this.addInputWithSettings('minOff', Type.NUMBER, 1, 'Minimum Off Time');\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('minOn active', Type.BOOLEAN);\n    this.addOutput('minOff active', Type.BOOLEAN);\n    this.settings['timeMinOn'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.settings['timeMinOff'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [\n        { minOn: { weight: 2 }, timeMinOn: {} },\n        { minOff: { weight: 2 }, timeMinOff: {} },\n      ],\n    });\n\n    this.timeOn = null;\n    this.timeOff = null;\n    this.minOnEnabled = false;\n    this.minOffEnabled = false;\n    this.lastResetValue = false;\n  }\n\n  onCreated() {\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n    this.setOutputData(1, false, true);\n    this.setOutputData(2, false, true);\n    this.inputs[1]['name'] = `[minOn] (${this.settings['timeMinOn'].value})`;\n    this.inputs[2]['name'] = `[minOff] (${this.settings['timeMinOff'].value})`;\n    this.onInputUpdated();\n  }\n\n  onExecute() {\n    let elapsed = null;\n    if (this.minOnEnabled) {\n      elapsed = Date.now() - this.timeOn;\n      if (elapsed >= this.minOnTime) {\n        this.minOnEnabled = false;\n        this.onInputUpdated();\n        this.setOutputData(1, false, true);\n      }\n    }\n    if (this.minOffEnabled) {\n      elapsed = Date.now() - this.timeOff;\n      if (elapsed >= this.minOffTime) {\n        this.minOffEnabled = false;\n        this.onInputUpdated();\n        this.setOutputData(2, false, true);\n      }\n    }\n    this.setOutputData(1, this.outputs[1].data, true)\n    this.setOutputData(2, this.outputs[2].data, true)\n  }\n\n  onInputUpdated() {\n    let reset = this.getInputData(3);\n    if (reset == null) reset = false;\n    if (reset == true && reset != this.lastResetValue) {\n      this.setOutputData(0, false);\n      this.minOnEnabled = false;\n      this.minOffEnabled = false;\n      this.setOutputData(1, false, true);\n      this.setOutputData(2, false), true;\n    }\n    this.lastResetValue = reset;\n\n    let minOn = this.getInputData(1);\n    minOn = TimeUtils.timeConvert(minOn, this.settings['timeMinOn'].value);\n    this.minOnTime = minOn;\n\n    let minOff = this.getInputData(2);\n    minOff = TimeUtils.timeConvert(minOff, this.settings['timeMinOff'].value);\n    this.minOffTime = minOff;\n\n    let input = this.getInputData(0);\n    if (!Utils.hasInput(input)) input = false;\n    if (!this.minOnEnabled && !this.minOffEnabled) {\n      this.setOutputData(0, input);\n      if (input && input != this.lastValue) {\n        this.timeOn = Date.now();\n        this.minOnEnabled = true;\n        this.setOutputData(1, false, true);\n      } else if (!input && input != this.lastValue) {\n        this.timeOff = Date.now();\n        this.minOffEnabled = true;\n        this.setOutputData(2, false), true;\n      }\n      this.lastValue = input;\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[1]['name'] = `[minOn] (${this.settings['timeMinOn'].value})`;\n    this.inputs[2]['name'] = `[minOff] (${this.settings['timeMinOff'].value})`;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('boolean/min-on-off', MinOnOffNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass DelayOnNode extends Node {\n  lastInput:boolean;\n  lastReset:boolean;\n  timeoutFunc;\n  enabled = false;\n  remainingFunc;\n  timeUnits;\n  remainingUpdateMillis;\n  remainingUpdateSize;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.boolean[\"on-delay\"].title;\n    this.description = NODE_INFO.boolean[\"on-delay\"].description;\n\n    this.addInput('input', Type.BOOLEAN);\n    this.addInputWithSettings('delay', Type.NUMBER, 1, 'On Delay Duration (Max 597 Hours)');\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('onDelay active', Type.BOOLEAN);\n    this.addOutput('remaining', Type.NUMBER);\n\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.MILLISECONDS, text: 'Milliseconds' },\n          { value: TIME_TYPE.SECONDS, text: 'Seconds' },\n          { value: TIME_TYPE.MINUTES, text: 'Minutes' },\n          { value: TIME_TYPE.HOURS, text: 'Hours' },\n        ],\n      },\n      value: TIME_TYPE.SECONDS,\n    });\n    this.setSettingsConfig({\n      groups: [{ delay: { weight: 2 }, time: {} }],\n    });\n\n    \n  }\n\n  onCreated() {\n    this.setOutputData(0, false);\n    this.setOutputData(1, false);\n    this.setOutputData(2, 0);\n    this.lastInput = false;\n    this.lastReset = false;\n  }\n\n  onAdded() {\n \n    this.onAfterSettingsChange();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onAfterSettingsChange() {\n    this.timeUnits = this.settings['time'].value;\n    this.inputs[1]['name'] = `[delay] (${this.timeUnits})`;\n    this.outputs[2]['name'] = `[remaining] (${this.timeUnits})`;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const delay = this.getInputData(1);\n    const delayMilli = TimeUtils.timeConvert(delay, this.timeUnits);\n\n    let input = this.getInputData(0);\n    if (input !== true) input = false;\n\n    const reset = this.getInputData(2);\n    if (reset && this.inputs[2].updated && !this.lastReset && this.enabled) {\n      this.clearTimers();\n      this.setOutputData(0, input);\n      this.setOutputData(1, false);\n      this.setOutputData(2, 0);\n      this.enabled = false;\n    }\n    this.lastReset = reset;\n\n    if (input && this.inputs[0].updated && !this.lastInput) {\n      this.setOutputData(1, true);\n      this.setOutputData(2, delay);\n      this.enabled = true;\n      this.clearTimers();\n      this.timeoutFunc = setTimeout(() => {\n        this.enabled = false;\n        this.setOutputData(0, true);\n        this.setOutputData(1, false);\n        this.setOutputData(2, 0);\n        clearInterval(this.remainingFunc);\n      }, delayMilli);\n      switch(this.timeUnits){\n        case TIME_TYPE.MILLISECONDS:\n          this.remainingUpdateMillis = 500;\n          this.remainingUpdateSize = 500;\n          break;\n        case TIME_TYPE.SECONDS:\n          this.remainingUpdateMillis = 1000;\n          this.remainingUpdateSize = 1;\n          break;\n        case TIME_TYPE.MINUTES:\n          this.remainingUpdateMillis = 6000;\n          this.remainingUpdateSize = 0.1;\n          break;\n        case TIME_TYPE.HOURS:\n          this.remainingUpdateMillis = 360000;\n          this.remainingUpdateSize = 0.1;\n          break;\n      }\n      this.remainingFunc = setInterval(() => {\n        const remaining = this.outputs[2].data - this.remainingUpdateSize;\n        this.setOutputData(2, remaining);\n      }, this.remainingUpdateMillis);\n    }\n    this.lastInput = input;\n    if (!input) {\n      this.setOutputData(0, false);\n      this.setOutputData(1, false);\n      this.setOutputData(2, 0);\n      if (this.inputs[0].updated && this.enabled) {\n        this.clearTimers();\n        this.enabled = false;\n      }\n    }\n  }\n\n  private clearTimers() {\n    if (this.timeoutFunc) clearTimeout(this.timeoutFunc);\n    if (this.remainingFunc) clearInterval(this.remainingFunc);\n  }\n\n}\nContainer.registerNodeType('boolean/on-delay', DelayOnNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass DelayOffNode extends Node {\n  lastInput:boolean;\n  lastReset:boolean;\n  timeoutFunc;\n  enabled = false;\n  remainingFunc;\n  timeUnits;\n  remainingUpdateMillis;\n  remainingUpdateSize;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.boolean[\"off-delay\"].title;\n    this.description = NODE_INFO.boolean[\"off-delay\"].description;\n    this.addInput('input', Type.BOOLEAN);\n    this.addInputWithSettings('delay', Type.NUMBER, 1, 'Off Delay Duration (Max 597 Hours)');\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('offDelay active', Type.BOOLEAN);\n    this.addOutput('remaining', Type.NUMBER);\n\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.MILLISECONDS, text: 'Milliseconds' },\n          { value: TIME_TYPE.SECONDS, text: 'Seconds' },\n          { value: TIME_TYPE.MINUTES, text: 'Minutes' },\n          { value: TIME_TYPE.HOURS, text: 'Hours' },\n        ],\n      },\n      value: TIME_TYPE.SECONDS,\n    });\n    this.setSettingsConfig({\n      groups: [{ delay: { weight: 2 }, time: {} }],\n    });\n    \n  }\n\n  onCreated() {\n  }\n\n  onAdded() {\n    this.clearTimers();\n    this.setOutputData(0, false);\n    this.setOutputData(1, false);\n    this.setOutputData(2, 0);\n    this.lastInput = false;\n    this.lastReset = false;\n    this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.timeUnits = this.settings['time'].value;\n    this.inputs[1]['name'] = `[delay] (${this.timeUnits})`;\n    this.outputs[2]['name'] = `[remaining] (${this.timeUnits})`;\n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const delay = this.getInputData(1);\n    const delayMilli = TimeUtils.timeConvert(delay, this.timeUnits);\n\n    let input = this.getInputData(0);\n    if (input !== true) input = false;\n\n    const reset = this.getInputData(2);\n    if (reset && this.inputs[2].updated && !this.lastReset && this.enabled) {\n      this.clearTimers();\n      this.setOutputData(0, input);\n      this.setOutputData(1, false);\n      this.setOutputData(2, 0);\n      this.enabled = false;\n    }\n    this.lastReset = reset;\n\n    if (!input && this.inputs[0].updated && this.lastInput) {\n      this.setOutputData(1, true);\n      this.setOutputData(2, delay);\n      this.clearTimers();\n      this.enabled = true;\n      this.timeoutFunc = setTimeout(() => {\n        this.enabled = false;\n        this.setOutputData(0, false);\n        this.setOutputData(1, false);\n        this.setOutputData(2, 0);\n        clearInterval(this.remainingFunc);\n      }, delayMilli);\n      switch(this.timeUnits){\n        case TIME_TYPE.MILLISECONDS:\n          this.remainingUpdateMillis = 500;\n          this.remainingUpdateSize = 500;\n          break;\n        case TIME_TYPE.SECONDS:\n          this.remainingUpdateMillis = 1000;\n          this.remainingUpdateSize = 1;\n          break;\n        case TIME_TYPE.MINUTES:\n          this.remainingUpdateMillis = 6000;\n          this.remainingUpdateSize = 0.1;\n          break;\n        case TIME_TYPE.HOURS:\n          this.remainingUpdateMillis = 360000;\n          this.remainingUpdateSize = 0.1;\n          break;\n      }\n      this.remainingFunc = setInterval(() => {\n        const remaining = this.outputs[2].data - this.remainingUpdateSize;\n        this.setOutputData(2, remaining);\n      }, this.remainingUpdateMillis);\n    }\n    this.lastInput = input;\n    if (input) {\n      this.setOutputData(0, true);\n      this.setOutputData(1, false);\n      this.setOutputData(2, 0);\n      if (this.inputs[0].updated && this.enabled) {\n        this.clearTimers();\n        this.enabled = false;\n      }\n    }\n  }\n\n  private clearTimers() {\n    if (this.timeoutFunc) clearTimeout(this.timeoutFunc);\n    if (this.remainingFunc) clearInterval(this.remainingFunc);\n  }\n}\nContainer.registerNodeType('boolean/off-delay', DelayOffNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass TickerNode extends Node {\n  lastInterval = 1000;\n  state: boolean = false;\n  runState: boolean = true;\n  timeoutFunc;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.boolean.ticker.title;\n    this.description = NODE_INFO.boolean.ticker.description;\n\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Interval');\n    this.addOutput('output', Type.BOOLEAN);\n\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n\n    this.settings['false'] = NodeSetting.create({\n      description: 'Generate False',\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n    //this.title = `Ticker (${this.settings['time'].value})`;\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n    clearInterval(this.timeoutFunc);\n    this.setOutputData(0, false);\n    let enable = this.getInputData(0);\n    if (!enable) {\n      this.setOutputData(0, false);\n      this.runState = false;\n      return;\n    }\n    let interval = this.getInputData(1);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    this.timeoutFunc = setInterval(() => {\n      this.state = !this.state;\n      if (!this.state && this.settings['false'].value) {\n        this.setOutputData(0, false);\n        return;\n      }\n      if (this.state) this.setOutputData(0, true);\n    }, interval / 2);\n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let enable = this.getInputData(0);\n\n    if (!enable && this.runState) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, false);\n      this.runState = false;\n      this.state = false;\n      return;\n    } else if (!enable && !this.runState) {\n      this.setOutputData(0, false);\n      this.runState = false;\n      this.state = false;\n      return;\n    } else if (enable) {\n      let interval = this.getInputData(1);\n      interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n\n      if (this.runState) {\n        if (interval != this.lastInterval) {\n          this.lastInterval = interval;\n          clearInterval(this.timeoutFunc);\n          this.timeoutFunc = setInterval(() => {\n            this.state = !this.state;\n            if (!this.state && this.settings['false'].value) {\n              this.setOutputData(0, false);\n              return;\n            }\n            if (this.state) this.setOutputData(0, true);\n          }, interval / 2);\n        }\n        return;\n      } else if (!this.runState) {\n        this.runState = true;\n        this.state = true;\n        this.setOutputData(0, true);\n        this.timeoutFunc = setInterval(() => {\n          this.state = !this.state;\n          if (!this.state && this.settings['false'].value) {\n            this.setOutputData(0, false);\n            return;\n          }\n          if (this.state) this.setOutputData(0, true);\n        }, interval / 2);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    //this.title = `Ticker (${this.settings['time'].value})`;\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('boolean/ticker', TickerNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass EqualNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.compare.equal.title;\n    this.description = NODE_INFO.compare.equal.description;\n\n    this.addInput('in 1', Type.ANY);\n    this.addInputWithSettings('in 2', Type.ANY, null, 'in 2');\n    this.addOutput('out equal', Type.BOOLEAN);\n    this.addOutput('out not equal', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n    this.setOutputData(1, true);\n    this.onInputUpdated();\n  }\n\n\n  onInputUpdated() {\n    let a = this.getInputData(0);\n    if (!Utils.hasInput(a)) {\n      this.setOutputData(0, false);\n      this.setOutputData(1, true);\n      return;\n    }\n    a = (a || '').toString(); // making string null i.e `''` and other `null` same\n    const b = (this.getInputData(1) || '').toString();\n    if (a === b) {\n      this.setOutputData(0, true);\n      this.setOutputData(1, false);\n    } else {\n      this.setOutputData(0, false);\n      this.setOutputData(1, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('compare/equal', EqualNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass GreaterNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.compare[\"greater-than\"].title;\n    this.description = NODE_INFO.compare[\"greater-than\"].description;\n\n    this.addInput('in 1', Type.NUMBER);\n    this.addInputWithSettings('in 2', Type.NUMBER, 0, 'In 2 Constant', false);\n    this.addOutput('out >', Type.BOOLEAN);\n    this.addOutput('out >=', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n    this.setOutputData(1, false);\n    this.onInputUpdated();\n  }\n  \n\n  onInputUpdated() {\n    let a = this.getInputData(0);\n    let b = this.getInputData(1);\n\n    if (a != null && b != null) {\n      this.setOutputData(0, a > b);\n      this.setOutputData(1, a >= b);\n    } else {\n      this.setOutputData(0, false);\n      this.setOutputData(1, false);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('compare/greater-than', GreaterNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass LessThanNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.compare[\"less-than\"].title;\n    this.description = NODE_INFO.compare[\"less-than\"].description;\n    \n    this.addInput('in 1', Type.NUMBER);\n    this.addInputWithSettings('in 2', Type.NUMBER, 0, 'In 2 Constant', false);\n    this.addOutput('out <', Type.BOOLEAN);\n    this.addOutput('out <=', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n    this.setOutputData(1, false);\n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let a = this.getInputData(0);\n    let b = this.getInputData(1);\n\n    if (a != null && b != null) {\n      this.setOutputData(0, a < b);\n      this.setOutputData(1, a <= b);\n      return;\n    } else {\n      this.setOutputData(0, false);\n      this.setOutputData(1, false);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('compare/less-than', LessThanNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass BetweenNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.compare.between.title;\n    this.description = NODE_INFO.compare.between.description;\n\n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('from', Type.NUMBER, 0, 'From Value', false);\n    this.addInputWithSettings('to', Type.NUMBER, 1, 'To Value', false);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('out not', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n    this.setOutputData(1, true);\n    this.onInputUpdated();\n  }\n\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    let from = this.getInputData(1);\n    let to = this.getInputData(2);\n\n    if (val != null && from != null && to != null) {\n      //if (val >= from && val <= to) {\n      if (val >= Math.min(from, to) && val <= Math.max(from, to)) {\n        this.setOutputData(0, true);\n        this.setOutputData(1, false);\n      } else {\n        this.setOutputData(0, false);\n        this.setOutputData(1, true);\n      }\n    } else {\n      this.setOutputData(0, false);\n      this.setOutputData(1, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('compare/between', BetweenNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass HysteresisNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.compare.hysteresis.title;\n    this.description = NODE_INFO.compare.hysteresis.description;\n\n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('risingEdge', Type.NUMBER, 20, 'Rising Edge', false);\n    this.addInputWithSettings('fallingEdge', Type.NUMBER, 10, 'Falling Edge', false);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('out not', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n    this.setOutputData(1, true);\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let inMsg = this.getInputData(0);\n    let risingEdge = this.getInputData(1);\n    let fallingEdge = this.getInputData(2);\n\n    if (risingEdge != null && fallingEdge != null) {\n      if (risingEdge > fallingEdge) {\n        if (inMsg <= fallingEdge) {\n          this.setOutputData(0, false);\n          this.setOutputData(1, true);\n        }\n        if (inMsg >= risingEdge) {\n          this.setOutputData(0, true);\n          this.setOutputData(1, false);\n        }\n      } else if (risingEdge < fallingEdge) {\n        if (inMsg >= fallingEdge) {\n          this.setOutputData(0, false);\n          this.setOutputData(1, true);\n        }\n        if (inMsg <= risingEdge) {\n          this.setOutputData(0, true);\n          this.setOutputData(1, false);\n        }\n      }\n    } else {\n      this.setOutputData(0, false);\n      this.setOutputData(1, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('compare/hysteresis', HysteresisNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass TypeCheckNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.compare[\"type-check\"].title;\n    this.description = NODE_INFO.compare[\"type-check\"].description;\n\n    this.addInput('input', Type.ANY);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('isType', Type.STRING);\n\n    this.settings['type'] = NodeSetting.create({\n      description: 'Type to check',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: Type.STRING, text: Type.STRING },\n          { value: Type.NUMBER, text: Type.NUMBER },\n          { value: Type.BOOLEAN, text: Type.BOOLEAN },\n          { value: Type.JSON, text: Type.JSON },\n        ],\n      },\n      value: Type.STRING,\n    });\n  }\n\n  onAdded() {\n \n    this.updateTitle();\n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let data = this.getInputData(0);\n    if (data === undefined) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n    }\n    const type = this.settings['type'].value;\n    const dataType = typeof data;\n    this.setOutputData(1, dataType);\n    switch (type) {\n      case Type.STRING:\n        this.setOutputData(0, typeof data === Type.STRING);\n        break;\n      case Type.NUMBER:\n        this.setOutputData(0, typeof data === Type.NUMBER);\n        break;\n      case Type.BOOLEAN:\n        this.setOutputData(0, typeof data === Type.BOOLEAN);\n        break;\n      case Type.JSON:\n        if (typeof data === 'string') {\n          try {\n            JSON.parse(data);\n            this.setOutputData(0, true);\n          } catch (e) {\n            this.setOutputData(0, false);\n          }\n        } else if (typeof data === 'object') {\n          try {\n            JSON.parse(JSON.stringify(data));\n            this.setOutputData(0, true);\n          } catch (e) {\n            this.setOutputData(0, false);\n          }\n        }\n        this.setOutputData(0, data === null);\n        break;\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.updateTitle();\n    this.onInputUpdated();\n  }\n\n  updateTitle() {\n    const type = this.settings['type'].value;\n    switch (type) {\n      case Type.STRING:\n        this.title = 'Type Check (string)';\n        break;\n      case Type.NUMBER:\n        this.title = 'Type Check (number)';\n        break;\n      case Type.BOOLEAN:\n        this.title = 'Type Check (boolean)';\n        break;\n      case Type.JSON:\n        this.title = 'Type Check (json)';\n        break;\n    }\n  }\n}\n\nContainer.registerNodeType('compare/type-check', TypeCheckNode);\n","import { isNull } from 'util';\nimport { Connect, Disconnect } from '../../../pub-sub/Decorators';\nimport { DispatchNode } from '../../../pub-sub/DispatchNode';\nimport { Store } from '../../../pub-sub/IPubSub';\nimport { pubSubSingleton } from '../../../pub-sub/PubSub';\nimport { Container } from '../../container';\nimport { BROADCAST } from '../../node';\nimport Icons from '../../node-icons';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nexport class DispatchListener extends DispatchNode {\n  originalHeaderColor: string = '';\n\n  constructor() {\n    super();\n    this.originalHeaderColor = this.headerColor;\n    this.title = NODE_INFO.connection['dispatch-listener'].title;\n    this.description = NODE_INFO.connection['dispatch-listener'].description;\n    this.iconImageUrl = NODE_INFO.connection[\"dispatch-listener\"].iconImageUrl;\n\n    this.addOutput('output', Type.ANY);\n    this.settings['protocol'] = NodeSetting.create({\n      description: 'Protocol',\n      config: { items: [] },\n      value: '',\n      type: SettingType.TREE_SELECT,\n    });\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.settings['blockNull'] = NodeSetting.create({\n      description: 'Block Null',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.setSettingsConfig({\n      groups: [{ enable: { weight: 1 }, blockNull: { weight: 1 } }],\n    });\n  }\n\n  async onAdded() {\n    super.onAdded();\n    this.onAfterSettingsChange();\n    if (this.side === Side.editor) {\n      this.sendMessageToServerSide(null); // for title update it will call onGetMessageToServerSide\n    }\n  }\n\n  @Disconnect\n  onRemoved() {\n    super.onRemoved();\n  }\n\n  @Connect\n  onAfterSettingsChange(oldSettings = {}, oldName = '') {\n    if (this.side !== Side.server) return;\n    this.updateSubscriptionTree();\n    this.updateTitle();\n    this.broadcastSettingsToClients();\n    this.broadcastTitleToClients();\n  }\n\n  updateTitle() {\n    this.title = `${NODE_INFO.connection['dispatch-listener'].title} [${this.getSelectedPointText()}]`;\n  }\n\n  updateSubscriptionTree() {\n    const store: Store = pubSubSingleton.getStore();\n    let items = Object.keys(store).map(protocol => {\n      return {\n        text: protocol,\n        items: Object.keys(store[protocol].points)\n          .filter(point => !store[protocol].points[point].soft)\n          .map(point => {\n            return {\n              text: `${store[protocol].points[point].name} (${point})`,\n              name: store[protocol].points[point].name,\n              value: point,\n              protocol,\n            };\n          }),\n      };\n    });\n    items = items.filter(item => item.items.length); // removed protocol which has soft only\n    this.settings['protocol'].config.items = items;\n  }\n\n  getSelectedProtocol(): string {\n    const matchProtocolItem = this.getMatchProtocolItem();\n    return matchProtocolItem?.protocol || '';\n  }\n\n  getSelectedPoint(): string {\n    return this.settings['protocol'].value;\n  }\n\n  getSelectedPointName(): string {\n    const matchProtocolItem = this.getMatchProtocolItem();\n    return matchProtocolItem?.name || '';\n  }\n\n  getSelectedPointText(): string {\n    const matchProtocolItem = this.getMatchProtocolItem();\n    return matchProtocolItem?.text || '';\n  }\n\n  getMatchProtocolItem(): any {\n    const protocol = this.settings['protocol'].value;\n    const protocolsItems = this.settings['protocol'].config.items;\n    for (let protocolsItem of protocolsItems) {\n      const protocolItems = protocolsItem.items;\n      for (let protocolItem of protocolItems) {\n        if (protocolItem.value === protocol) {\n          return protocolItem;\n        }\n      }\n    }\n    return null;\n  }\n\n  onGetMessageToServerSide() {\n    this.broadcastTitleToClients(false); // false since it needs to reflect even on sub-containers\n  }\n\n  subscribe(value: any) {\n    // this.debugInfo(`Subscribed value: ${value}`);\n    const enable: boolean = this.settings['enable'].value;\n    const blockNull: boolean = this.settings['blockNull'].value;\n    if (enable && !(isNull(value) && blockNull)) {\n      this.setOutputData(0, value);\n    }\n  }\n\n  updateProtocols() {\n    this.updateSubscriptionTree();\n    // this.debugInfo(`Updating protocol to: ${this.settings['protocol'].config.items}`);\n    this.updateTitle();\n    this.broadcastSettingsToClients(false);\n    this.broadcastTitleToClients(false);\n  }\n\n  onGetMessageToEditorSide({ action, payload, key }: { action: any; payload: any; key: any }) {\n    if (action === BROADCAST.UPDATE_TITLE) {\n      this.title = payload;\n      this.size = this.computeSize();\n      if (payload === `${NODE_INFO.connection['dispatch-listener'].title} []`) {\n        this.headerColor = '#A44';\n      } else {\n        this.headerColor = this.originalHeaderColor;\n      }\n    } else if (action === BROADCAST.UPDATE_SETTINGS) {\n      // Sorting only in frontend, don't pressurized the backend much\n      const items = payload['protocol'].config.items;\n      items.sort((item1, item2) => (item1.text.toUpperCase() > item2.text.toUpperCase() ? 1 : -1));\n      items.forEach(item =>\n        item.items.sort((item1, item2) => (item1.text.toUpperCase() > item2.text.toUpperCase() ? 1 : -1)),\n      );\n      payload['protocol'].config.items = items;\n      this.settings = payload;\n    } else {\n      super.onGetMessageToEditorSide({ action, payload, key });\n    }\n  }\n}\nContainer.registerNodeType('connection/dispatch-listener', DispatchListener);\n","import { PubSubHelpers } from './PubSubHelpers';\n\nexport const Map = (target: any, propertyKey: string, descriptor: any) => {\n  const fn = descriptor.value!;\n  descriptor.value = function DescriptorValue(...args: any[]) {\n    PubSubHelpers.map(this);\n    return fn.apply(this, args);\n  };\n  return descriptor;\n};\n\nexport const UnMap = (target: any, propertyKey: string, descriptor: any) => {\n  const fn = descriptor.value!;\n  descriptor.value = function DescriptorValue(...args: any[]) {\n    PubSubHelpers.unMap(this);\n    return fn.apply(this, args);\n  };\n  return descriptor;\n};\n\nexport const Rename = (target: any, propertyKey: string, descriptor: any) => {\n  const fn = descriptor.value!;\n  descriptor.value = function DescriptorValue(...args: any[]) {\n    PubSubHelpers.renameFunction(this);\n    fn.apply(this, args);\n  };\n  return descriptor;\n};\n\nexport const Dispatch = (target: any, propertyKey: string, descriptor: any) => {\n  const fn = descriptor.value!;\n  descriptor.value = function DescriptorValue(...args: any[]) {\n    const value: any = fn.apply(this, args);\n    PubSubHelpers.dispatch(this, value);\n  };\n  return descriptor;\n};\n\nexport const Connect = (target: any, propertyKey: string, descriptor: any) => {\n  const fn = descriptor.value;\n  descriptor.value = function DescriptorValue(...args: any[]) {\n    fn.apply(this, args);\n    PubSubHelpers.connect(this);\n  };\n  return descriptor;\n};\n\nexport const Disconnect = (target: any, propertyKey: string, descriptor: any) => {\n  const fn = descriptor.value;\n  descriptor.value = function DescriptorValue(...args: any[]) {\n    fn.apply(this, args);\n    PubSubHelpers.disconnect(this);\n  };\n  return descriptor;\n};\n","import { Container, ContainerRegistry } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nexport class ConnectionLocalTransmitterNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.connection[\"link-transmitter-single\"].title;\n    this.description = NODE_INFO.connection[\"link-transmitter-single\"].description;\n    this.iconImageUrl = NODE_INFO.connection[\"link-transmitter-single\"].iconImageUrl;\n\n    this.addInput('input', Type.ANY);\n    this.addInputWithSettings('topic', Type.STRING, '1', 'Topic Name', false);\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.settings['ifNew'] = NodeSetting.create({\n      description: 'Only transmit on COV',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  init() {\n    if (!this.properties['topic']) {\n      // we are persisting topic input just because, we don't have getInputData(1) on frontend to update title\n      this.properties['topic'] = null;\n    }\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange();\n    this.updateTitle();\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return;\n\n    this.properties['topic'] = this.getInputData(1);\n    this.persistProperties(false, true);\n\n    const receivers = this.getReceivers();\n    if (this.inputs[1].updated) {\n      this.updateTransmitterTopics();\n    }\n    if (!this.isEnable()) return;\n    const val = this.getInputData(0);\n    const topic = this.getInputData(1);\n    const ifNew = this.settings['ifNew'].value\n    receivers.forEach(receiver => {\n      if (receiver.properties['topic'] === topic) {\n        const blockNull = receiver.settings['blockNull'].value;\n        if (receiver.getInputData(0) === true && ((blockNull && val != null) || !blockNull)) {\n          receiver.properties['val'] = val;\n          receiver.persistProperties(false, true);\n          receiver.setOutputData(0, receiver.properties['val'], ifNew);\n        }\n      }\n    });\n    this.updateTitle();\n  }\n\n  onAfterSettingsChange() {\n    this.updateTransmitterTopics();\n    this.onInputUpdated();\n  }\n\n  onRemoved() {\n    this.updateTransmitterTopics();\n  }\n\n  updateTransmitterTopics() {\n    if (this.side !== Side.server) return;\n    setTimeout(() => {\n      const receivers = this.getReceivers();\n      receivers.forEach(receiver => {\n        receiver['triggerTransmitterTopicUpdate']();\n      });\n    }, 100); // waiting for this node deletion and hence, receiver will not discover this node\n  }\n\n  getReceivers(): Array<Node> {\n    return ContainerRegistry.instance().rootContainer().getNodesByType('connection/link-receiver-single', true);\n  }\n\n  isEnable() {\n    return this.getInputData(2);\n  }\n\n  updateTitle() {\n    this.title = `Link Transmitter Single [${this.properties['topic'] || this.getInputData(1)}]`;\n    this.broadcastTitleToClients();\n  }\n}\n\nContainer.registerNodeType('connection/link-transmitter-single', ConnectionLocalTransmitterNode);\n","import { isNull } from '../../../utils/helper';\nimport { Container, ContainerRegistry } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nexport class ConnectionLocalReceiverNode extends Node {\n  topicList: any = [];\n\n  inputEnable = 0;\n  inputNumTopic = 1;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.connection[\"link-receiver-single\"].title;\n    this.description = NODE_INFO.connection[\"link-receiver-single\"].description;\n    this.iconImageUrl = NODE_INFO.connection[\"link-receiver-single\"].iconImageUrl;\n    \n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.settings['manualTopicOption'] = NodeSetting.create({\n      description: 'Set topic manually',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.addInputWithSettings('topic', Type.STRING, '1', 'Set topic', false);\n    this.addOutput('output', Type.ANY);\n    this.addOutput('topic', Type.STRING);\n    this.properties['topic'] = \"\";\n    this.settings['topicDropdown'] = NodeSetting.create({\n      description: 'Select Topic',\n      config: { items: [] },\n      value: '',\n      type: SettingType.DROPDOWN,\n    });\n    this.settings['blockNull'] = NodeSetting.create({\n      description: 'Block Null',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.setSettingsConfig({\n      conditions: {\n        topicDropdown: setting => {\n          return setting['manualTopicOption'].value === false;\n        }\n      },\n    });\n  }\n\n  init() {\n    if (!this.properties['val']) {\n      this.properties['val'] = null;\n    }\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange();\n    this.setOutputData(0, this.properties['val']);\n  }\n\n  onCreated() {\n    if (isNull(this.properties['topic'])) {\n      this.onAfterSettingsChange();\n    }\n  }\n\n  async onAfterSettingsChange() {\n    await this.setTopic();\n    this.updateTitle();\n    if (this.side !== Side.server) return;\n    this.transmitterTopic();\n    this.updateChannel();\n\n  }\n\n  pushSettings() {\n    const unitCategory = this.topicList.map((point: any) => {\n      return { value: point, text: point };\n    });\n    this.settings['topicDropdown'].config = {\n      items: unitCategory,\n    };\n    this.persistProperties(true);\n    this.updateTitle();\n    this.updateChannel();\n    this.broadcastSettingsToClients(false);\n    this.broadcastTitleToClients(false);\n    this.broadcastOutputsToClients(false);\n  }\n\n  transmitterTopic() {\n    const transmitters = ContainerRegistry.instance().rootContainer().getNodesByType('connection/link-transmitter-single', true);\n    this.topicList = [];\n    transmitters.forEach(transmitter => {\n      this.topicList.push(transmitter.getInputData(1));\n      if (this.properties['topic'] === transmitter.getInputData(1)) {\n        this.setOutputData(0, transmitter.getInputData(0));\n      }\n    });\n    this.pushSettings();\n  }\n\n  updateTitle() {\n    this.title = 'Link Receiver Single [' + this.properties['topic'] + ']';\n  }\n\n  updateChannel() {\n    this.setOutputData(1, this.properties['topic']);\n  }\n\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return;\n    this.onAfterSettingsChange()\n  }\n\n  async setTopic() {\n    const manualTopicOption = this.settings['manualTopicOption'].value\n    if (manualTopicOption) {\n      this.properties['topic'] = this.getInputData(this.inputNumTopic)\n    } else if (!manualTopicOption) {\n      this.properties['topic'] = this.settings['topicDropdown'].value\n    }\n  }\n\n  // @Link: Triggers from transmitter on addition and on remove\n  triggerTransmitterTopicUpdate() {\n    if (this.side !== Side.server) return;\n    this.transmitterTopic();\n  }\n}\nContainer.registerNodeType('connection/link-receiver-single', ConnectionLocalReceiverNode);\n","import { Container, ContainerRegistry } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nexport class ConnectionLocalTransmitterNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.connection[\"link-transmitter\"].title;\n    this.description = NODE_INFO.connection[\"link-transmitter\"].description;\n\n    this.settings['channel'] = NodeSetting.create({\n      description: 'Channel Number',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['inputsCount'] = NodeSetting.create({\n      description: 'Inputs Count',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n  }\n\n  init() {\n    this.properties['inputsCount'] = 0;\n    this.changeTopicsCount(this.settings['inputsCount'].value);\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    for (let i in this.inputs) {\n      let val = this.inputs[i].data;\n      if (val == undefined) val = null;\n      let receivers = ContainerRegistry.instance().rootContainer().getNodesByType('connection/link-receiver', true);\n      receivers.forEach(receiver => {\n        if (receiver.settings['channel'].value == this.settings['channel'].value) {\n          if (receiver.outputs.hasOwnProperty(i)) {\n            receiver.setOutputData(+i, val);\n            if (this.inputs[i].name !== '') receiver.outputs[i].name = this.inputs[i].name;\n          }\n        }\n      });\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.updateTitle();\n    let inputCount = this.settings['inputsCount'].value;\n    inputCount = Utils.clamp(inputCount, 1, 100);\n    if (inputCount !== this.properties['inputsCount']) this.changeTopicsCount(inputCount);\n    this.renameInputs();\n    this.persistProperties(true, true, true);\n    this.onInputUpdated();\n  }\n\n  changeTopicsCount(target_count) {\n    let diff = target_count - this.properties['inputsCount'];\n    if (diff == 0) return;\n\n    //add inputs, outputs\n    this.changeInputsCount(target_count, Type.ANY);\n\n    //change settings for topics\n    if (diff > 0) {\n      for (let i = this.properties['inputsCount'] + 1; i <= target_count; i++) {\n        this.settings['in' + i] = NodeSetting.create({\n          description: 'Input ' + i,\n          value: '',\n          type: SettingType.STRING,\n        });\n      }\n    } else if (diff < 0) {\n      for (let i = this.properties['inputsCount']; i > target_count; i--) {\n        delete this.settings['in' + i];\n      }\n    }\n    this.properties['inputsCount'] = target_count;\n  }\n\n  renameInputs() {\n    for (let i = 0; i <= this.properties['inputsCount'] - 1; i++) {\n      let topic = this.settings['in' + (i + 1)]?.value;\n      if (topic?.length > 20) topic = '...' + topic.substr(topic.length - 20, 20);\n      this.inputs[String(i)].name = '' + (i + 1) + ' | ' + topic;\n    }\n\n    if (this.side == Side.editor) {\n      for (let i = 0; i <= this.properties['inputsCount'] - 1; i++) {\n        this.inputs[String(i)].label = this.inputs[String(i)].name;\n      }\n      this.setDirtyCanvas(true, true);\n    }\n  }\n\n  updateTitle() {\n    this.title = 'Link Transmitter [' + this.settings['channel'].value + ']';\n  }\n}\nContainer.registerNodeType('connection/link-transmitter', ConnectionLocalTransmitterNode);\n","import { Container, ContainerRegistry } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType } from '../../node-io';\n\nexport class ConnectionLocalReceiverNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicOutputsExist = true;\n    this.dynamicInputsExist = false;\n    this.dynamicSettingsExist = false;\n    this.dynamicDefaultOutputs = 1;\n    this.dynamicMinOutputs = 1;\n    this.title = NODE_INFO.connection[\"link-receiver\"].title;\n    this.description = NODE_INFO.connection[\"link-receiver\"].description;\n    this.settings['channel'] = NodeSetting.create({\n      description: 'Channel Number',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n  }\n\n  onCreated() {\n    this.properties['channel'] = 1;\n  }\n\n  onAdded() {\n    this.updateTitle();\n    this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.updateTitle();\n    if (this.properties['channel'] !== this.settings['channel'].value) this.resetOutputs();\n    this.triggerTransmitterNodeUpdate();\n  }\n\n  triggerTransmitterNodeUpdate() {\n    let transmitters = ContainerRegistry.instance().rootContainer().getNodesByType('connection/link-transmitter', true);\n    transmitters.forEach(transmitter => {\n      if (transmitter.settings['channel'].value == this.settings['channel'].value) {\n        transmitter['onInputUpdated']();\n      }\n    });\n  }\n\n  resetOutputs() {\n    for (let i in this.outputs) {\n      this.setOutputData(+i, null);\n    }\n  }\n\n  updateTitle() {\n    this.title = 'Link Receiver [' + this.settings['channel'].value + ']';\n  }\n}\nContainer.registerNodeType('connection/link-receiver', ConnectionLocalReceiverNode);\n","\n// THIS NODE IS A COPY OF THE STREAM-MERGE NODE.  \n// IT SHOULD BE REMOVED ONCE NODES ARE DUPLICATED TO MULTIPLE CATEGORIES\n\nimport { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\n\nclass HubNode extends FlexibleNode {\n  val: number;\n  lastReset: boolean;\n\n  constructor() {\n    super();\n    this.dynamicSettingsExist = false;\n    this.dynamicInputsType = Type.ANY;\n\n    this.title = NODE_INFO.connection.hub.title;\n    this.description = NODE_INFO.connection.hub.description;\n\n    this.addOutput('output', Type.ANY);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n    this.size = this.computeSize();\n  }\n\n  onInputUpdated() {\n    const inputs = this.getInputsCount();\n    for (let i = this.dynamicInputStartPosition; i < inputs; i++) {\n      let inputValue = this.getInputData(i);\n      if (Utils.hasInput(inputValue)) {\n        if (this.inputs[i].updated) {\n          this.setOutputData(0, this.inputs[i].data);\n          return;\n        }\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('connection/hub', HubNode);\n","import { isNull } from '../../../utils/helper';\nimport { Node } from '../../node';\nimport { createNodeDbHelper } from '../../node-db-helper';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeIO, Type } from '../../node-io';\nimport { createLegacyLinkHandler } from '../../node-link';\nimport { NodeTypeRegistry } from '../../node-type-registry';\nimport { AbstractFolderIONode } from './abstract-folder-io';\n\nclass ContainerInputNode extends AbstractFolderIONode {\n  constructor() {\n    super(NODE_INFO.container[\"folder-input\"].title, NODE_INFO.container[\"folder-input\"].description);\n    this.addOutput('input', null);\n  }\n\n  onAdded() {\n    super.onAdded();\n    if (!this.isUnderContainer() || this.hasItself('inputs')) return;\n    const containerNode = this.container.nodeItself();\n    const id = containerNode.addInput(this.name, Type.ANY, undefined, undefined, { subNodeId: this.id });\n    this.name = containerNode.inputs[id].name;\n    createLegacyLinkHandler(containerNode).recomputeInputLinks(containerNode);\n  }\n\n  onRemoved() {\n    if (!this.isUnderContainer() || !this.hasItself('inputs')) return;\n    let containerNode = this.container.nodeItself();\n    let [inputId, _] = this.findParentIOById('inputs');\n    containerNode.removeInput(+inputId);\n    createLegacyLinkHandler(containerNode).recomputeInputLinks(containerNode);\n    createNodeDbHelper().update(containerNode, ['size']);\n  }\n\n  onAfterSettingsChange() {\n    if (!this.isUnderContainer()) return;\n    const containerNode = this.container.nodeItself();\n    let [inputId, _] = this.findParentIOById('inputs');\n    if (isNull(inputId)) {\n      return;\n    }\n    containerNode.inputs[inputId].name = this.name;\n    createNodeDbHelper().update(containerNode, ['inputs']);\n  }\n\n  onExecute() {\n    if (!this.isUnderContainer()) return;\n    let [_, i] = this.findParentIOById('inputs');\n    let input = <NodeIO>i;\n    if (input?.updated) this.setOutputData(0, input.data);\n  }\n\n  protected correctParentIO(containerNode: Node, slot: number) {\n    let input = containerNode.inputs[slot];\n    if (isNull(input)) {\n      return;\n    }\n    input.subNodeId = this.id;\n    createNodeDbHelper().update(containerNode, ['inputs']);\n  }\n\n}\n\nexport const FOLDER_INPUT = 'container/folder-input';\nNodeTypeRegistry.registerNodeType(FOLDER_INPUT, ContainerInputNode, null, true, false, true);\n","import { isNull } from '../../../utils/helper';\nimport { Node } from '../../node';\nimport { createNodeDbHelper } from '../../node-db-helper';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\nimport { createLegacyLinkHandler } from '../../node-link';\nimport { NodeTypeRegistry } from '../../node-type-registry';\nimport { AbstractFolderIONode } from './abstract-folder-io';\n\nclass ContainerOutputNode extends AbstractFolderIONode {\n\n  constructor() {\n    super(NODE_INFO.container[\"folder-output\"].title, NODE_INFO.container[\"folder-output\"].description);\n    this.addInput('output', null);\n  }\n\n  onAdded() {\n    super.onAdded();\n    if (!this.isUnderContainer() || this.hasItself('outputs')) return;\n    const containerNode = this.container.nodeItself();\n    const id = containerNode.addOutput(this.name, Type.ANY, undefined, { subNodeId: this.id });\n    this.name = containerNode.outputs[id].name;\n    createLegacyLinkHandler(containerNode).recomputeOutputLinks(containerNode);\n  }\n\n  onRemoved() {\n    if (!this.isUnderContainer() || !this.hasItself('outputs')) return;\n    let containerNode = this.container.nodeItself();\n    let [outputId, _] = this.findParentIOById('outputs');\n    containerNode.removeOutput(+outputId);\n    createLegacyLinkHandler(containerNode).recomputeOutputLinks(containerNode);\n    createNodeDbHelper().update(containerNode, ['size']);\n  }\n\n  onAfterSettingsChange() {\n    if (!this.isUnderContainer()) return;\n    const containerNode = this.container.nodeItself();\n    let [outputId, _] = this.findParentIOById('outputs');\n    if (isNull(outputId)) {\n      return;\n    }\n    containerNode.outputs[outputId].name = this.name;\n    createNodeDbHelper().update(containerNode, ['outputs']);\n  }\n\n  onInputUpdated() {\n    if (!this.isUnderContainer()) return;\n    let [outputId, _] = this.findParentIOById('outputs');\n    if (isNull(outputId)) {\n      return;\n    }\n    this.isRecentlyActive = true;\n    this.container.nodeItself().setOutputData(+outputId, this.getInputData(0));\n  }\n\n  protected correctParentIO(containerNode: Node, slot: number) {\n    let output = containerNode.outputs[slot];\n    if (isNull(output)) {\n      return;\n    }\n    output.subNodeId = this.id;\n    createNodeDbHelper().update(containerNode, ['outputs']);\n  }\n\n}\n\nexport const FOLDER_OUTPUT = 'container/folder-output';\nNodeTypeRegistry.registerNodeType(FOLDER_OUTPUT, ContainerOutputNode, null, true, false, true);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass BitMaskSingle extends Node {\n  constructor() {\n    super();\n  \n    this.title = NODE_INFO.conversion[\"bit-mask-single\"].title;\n    this.description = NODE_INFO.conversion[\"bit-mask-single\"].description;\n\n    this.settings['bit'] = NodeSetting.create({\n      description: 'bit index (0-7)',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n\n    this.settings['byte'] = NodeSetting.create({\n      description: 'Byte to read if Array',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n\n    this.addInput('input', Type.ANY);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    if (input === undefined || input === null) {\n      return;\n    }\n\n    const BIT = this.settings['bit'].value;\n    const BYTE = this.settings['byte'].value;\n\n    if (typeof input === 'object') {\n      if (!input || !input.length || input.length < BYTE + 1) {\n        return;\n      }\n      input = input[BYTE];\n    }\n\n    this.setOutputData(0, (input >> BIT) & 0x01);\n  }\n\n  onAfterSettingsChange() {\n    this.settings['bit'].value = Utils.clamp(this.settings['bit'].value, 0, 7);\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('conversion/bit-mask-single', BitMaskSingle);\n\nclass BitMaskMultiple extends Node {\n  mask: number = 0;\n\n  constructor() {\n    super();\n    this.title = 'Bit Mask Multiple';\n    this.description = 'A node to mask certain bits of a byte';\n\n    this.settings['bitStart'] = NodeSetting.create({\n      description: 'Lowest bit to start (0-7)',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n\n    this.settings['maskLen'] = NodeSetting.create({\n      description: 'Mask length (1-8)',\n      type: SettingType.NUMBER,\n      value: 1,\n    });\n\n    this.settings['byte'] = NodeSetting.create({\n      description: 'Byte to read if Array',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n\n    this.addInput('input', Type.ANY);\n    this.addOutput('output', Type.NUMBER);\n    this.addOutput('error', Type.STRING);\n  }\n\n  init() {\n    this.updateMask();\n  }\n\n  onAdded() {\n    this.updateMask();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    if (input === undefined || input === null) {\n      return;\n    }\n\n    const BIT_START = this.settings['bitStart'].value;\n    const BYTE = this.settings['byte'].value;\n\n    if (typeof input === 'object') {\n      if (!input || !input.length || input.length < BYTE + 1) {\n        return;\n      }\n      input = input[BYTE];\n    }\n\n    this.setOutputData(0, (input & this.mask) >> BIT_START);\n  }\n\n  onAfterSettingsChange() {\n    this.settings['bitStart'].value = Utils.clamp(this.settings['bitStart'].value, 0, 7);\n    this.settings['maskLen'].value = Utils.clamp(\n      this.settings['maskLen'].value,\n      1,\n      8 - this.settings['bitStart'].value,\n    );\n    this.updateMask();\n    this.onInputUpdated();\n  }\n\n  private updateMask() {\n    this.mask = 0;\n    for (let i = 0; i < this.settings['maskLen'].value; i++) {\n      this.mask |= 1 << i;\n    }\n    this.mask <<= this.settings['bitStart'].value;\n  }\n}\nContainer.registerNodeType('conversion/bit-mask-multiple', BitMaskMultiple);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass IntToBits extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.conversion[\"int-to-bits\"].title;\n    this.description = NODE_INFO.conversion[\"int-to-bits\"].description;\n    this.settings['start'] = NodeSetting.create({\n      description: 'Start index if Array',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n\n    this.settings['bytes'] = NodeSetting.create({\n      description: 'Bytes to read if Array',\n      type: SettingType.NUMBER,\n      value: 1,\n    });\n\n    this.addInput('input', Type.ANY);\n  }\n\n  init() {\n    this.setNewOutputs();\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    if (input === undefined || input === null) {\n      return;\n    }\n\n    if (typeof input === 'number') {\n      input = [input];\n    }\n\n    const START = this.settings['start'].value;\n    const BYTES = this.settings['bytes'].value;\n\n    if (!input || !input.length || input.length < BYTES) {\n      return;\n    }\n\n    let outputIndex = 0;\n    for (let i = 0; i < BYTES; i++) {\n      for (let j = 0; j < 8; j++) {\n        this.setOutputData(outputIndex++, (input[START + i] >> j) & 0x01);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.setNewOutputs();\n    this.onInputUpdated();\n  }\n\n  private setNewOutputs() {\n    let outputsLen = this.getOutputsCount();\n    for (let i = 0; i < outputsLen; i++) {\n      this.removeOutput(i);\n    }\n    outputsLen = this.settings['bytes'].value * 8;\n    for (let i = 0; i < outputsLen; i++) {\n      this.addOutput(i.toString(), Type.NUMBER);\n    }\n    this.updateNodeOutput();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('conversion/int-to-bits', IntToBits);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass BoolToIntNode extends Node {\n    constructor() {\n        super();\n        this.title = NODE_INFO.conversion[\"bool-to-int\"].title;\n        this.description = NODE_INFO.conversion[\"bool-to-int\"].description;\n        this.addInput('input', Type.BOOLEAN);\n        this.addOutput('output', Type.NUMBER);\n    }\n    onInputUpdated() {\n        this.setOutputData(0, this.inputs[0].data ? 1 : 0);\n    }\n}\n\nContainer.registerNodeType('conversion/bool-to-int', BoolToIntNode);\n\nclass IntToBoolNode extends Node {\n    constructor() {\n        super();\n        this.title = NODE_INFO.conversion[\"int-to-bool\"].title;\n        this.description = NODE_INFO.conversion[\"int-to-bool\"].description;\n        this.addInput('input', Type.NUMBER);\n        this.addOutput('output', Type.BOOLEAN);\n    }\n    onInputUpdated() {\n        this.setOutputData(0, !!this.inputs[0].data);\n    }\n}\nContainer.registerNodeType('conversion/int-to-bool', IntToBoolNode);\n\n\nclass StringToBool extends Node {\n    constructor() {\n        super();\n        this.title = NODE_INFO.conversion[\"string-to-bool\"].title;\n        this.description = NODE_INFO.conversion[\"string-to-bool\"].description;\n        this.addInput('input', Type.STRING);\n        this.addOutput('output', Type.BOOLEAN);\n    }\n    onInputUpdated() {\n        const val = this.getInputData(0)\n        if (val === \"0\" || val === 'false') {\n            this.setOutputData(0, false, true);\n        } else if (val === \"1\" || val === 'true') {\n            this.setOutputData(0, true, true);\n        }\n    }\n}\nContainer.registerNodeType('conversion/string-to-bool', StringToBool);\n","import { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { Container } from '../../container';\nimport { NODE_INFO } from '../../node-info';\n\nexport class BufferToHexString extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.conversion[\"buffer-to-hex-string\"].title;\n    this.description = NODE_INFO.conversion[\"buffer-to-hex-string\"].description;\n\n    this.addInput('input', Type.ANY);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onInputUpdated() {\n    let buffer = this.getInputData(0);\n\n    if (!buffer || !Buffer.isBuffer(buffer)) {\n      return;\n    }\n\n    // console.log(buffer);\n    let str = buffer.toString('hex').toUpperCase();\n    // console.log(str);\n    this.setOutputData(0, str);\n  }\n}\nContainer.registerNodeType('conversion/buffer-to-hex-string', BufferToHexString);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport ModbusByteOrder from '../protocols/modbus/modbus-fc/modbus-point-byte-order';\n\nclass BufferToNumNode extends Node {\n  value = null;\n  constructor() {\n    super();\n    this.title = NODE_INFO.conversion[\"buffer-to-num\"].title;\n    this.description = NODE_INFO.conversion[\"buffer-to-num\"].description;\n    this.addInput('in', Type.ANY);\n    this.addOutput('out', Type.JSON);\n    this.addOutput('out buffer', Type.JSON);\n    this.settings['dataType'] = NodeSetting.create({\n      description: 'Set data type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'na' }, // use reg length from setting\n          { value: 1, text: 'INT-16' }, // 1 reg\n          { value: 2, text: `UINT-16` }, // 1 reg\n          { value: 3, text: 'INT-32' }, // 2 reg\n          { value: 4, text: 'UINT-32' }, // 2 reg\n          { value: 5, text: 'FLOAT-32' }, // 2 reg\n          { value: 8, text: 'DOUBLE-64' }, // 4 reg\n        ],\n      },\n      value: 0,\n    });\n    this.settings['dataEndian'] = NodeSetting.create({\n      description: 'Set byte order',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'LE-Byte BE-Word' },\n          { value: 1, text: 'LE-Byte LE-Word' },\n          { value: 2, text: 'BE-Byte LE-Word' },\n          { value: 3, text: 'BE-Byte BE-Word' },\n        ],\n      },\n      value: 0,\n    });\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    const dataEndian = this.settings['dataEndian'].value;\n    const dataType = this.settings['dataType'].value;\n    try {\n      let j = JSON.parse(input);\n      if (!j.length) {\n        return\n      }\n      let buf;\n      if ((j.length === 1 && j[0] > 255) || (j.length === 2 && (j[0] > 255 || j[1] > 255))) {\n        buf = Buffer.alloc(j.length * 2);\n        let index = 0\n        for (let i = 0; i < j.length; i++) {\n          if (dataEndian >= 2) {\n            buf.writeUInt16BE(j[i], index);\n          } else {\n            buf.writeUInt16LE(j[i], index);\n          }\n          index += 2;\n        }\n      } else if(j.length <= 4){\n        buf = Buffer.from(j);\n      }else{\n        return;\n      }\n      const out = ModbusByteOrder.readByteOrder(buf, 0, dataType, dataEndian);\n      this.setOutputData(0, JSON.stringify(out));\n      this.setOutputData(1, JSON.stringify(buf));\n    } catch (error) { }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('conversion/buffer-to-num', BufferToNumNode);\n","import * as convert from 'convert-units';\nimport { get } from 'lodash';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType } from '../../node-io';\n\nclass UnitConversionNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.conversion[\"convert-units\"].title;\n    this.description = NODE_INFO.conversion[\"convert-units\"].description;\n\n    this.addInput('in');\n    this.addOutput('converted');\n\n    this.settings['from-to'] = NodeSetting.create({\n      description: 'From / To unit',\n      type: SettingType.TREE_SELECT,\n      config: { items: [] },\n    });\n    this.ensureFromToConfig();\n  }\n\n  onAdded() {\n    this.updateTitle();\n    this.ensureFromToConfig();\n  }\n\n  // the from-to config is excluded from JSON serialization, we need to maintain it conditionally\n  ensureFromToConfig() {\n    // settings['from-to'].config is omitted from serialization / deserialization\n    if (!get(this, \"settings['from-to'].config.items.length\", 0))\n      this.settings['from-to'].config = { items: this.createTreeSelectItems() };\n    // ensure config exclusion from JSON serialization\n    this.settings['from-to'].toJSON = function() {\n      const { config = null, ...withoutConfig } = { ...this };\n      return withoutConfig;\n    };\n  }\n\n  createTreeSelectItems() {\n    const asItem = unit => ({ value: unit, text: unit });\n    // higher-order function:\n    const addAsChildren = (categoryName: string, units: { value: any; text: any }[]) => from => ({\n      ...from,\n      items: units.map(to => ({\n        ...to,\n        value: { type: categoryName, from: from.value, to: to.value },\n      })),\n    });\n    return convert()\n      .measures()\n      .map(unitType => ({\n        text: unitType,\n        items: convert()\n          .possibilities(unitType)\n          .map(asItem),\n      }))\n      .map(category => ({\n        ...category,\n        items: category.items.map(addAsChildren(category.text, category.items)),\n      }));\n  }\n\n  onInputUpdated() {\n    if (!this.settings['from-to'].value) return;\n    const { from, to } = this.settings['from-to'].value;\n    const value = parseFloat(this.inputs[0].data);\n    this.setOutputData(\n      0,\n      convert(value)\n        .from(from)\n        .to(to),\n    );\n  }\n\n  onAfterSettingsChange() {\n    this.ensureFromToConfig();\n    this.onInputUpdated();\n    this.updateTitle();\n  }\n\n  updateTitle() {\n    if (!this.settings['from-to'].value) return;\n    const { from, to } = this.settings['from-to'].value;\n    this.title = 'Unit converter' + ' ' + '(' + from + '/' + to + ')';\n  }\n}\nContainer.registerNodeType('conversion/convert-units', UnitConversionNode);\n","module.exports = require(\"convert-units\");","import { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { Container } from '../../container';\nimport { NODE_INFO } from '../../node-info';\n\nexport class HexStringToBuffer extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.conversion[\"hex-string-to-buffer\"].title;\n    this.description = NODE_INFO.conversion[\"hex-string-to-buffer\"].description;\n\n    this.addInput('input', Type.STRING);\n    this.addOutput('output', Type.ANY);\n  }\n\n  onInputUpdated() {\n    let str = this.getInputData(0);\n\n    if (!str) {\n      return;\n    }\n\n    // console.log(str);\n    let buffer = Buffer.from(str, 'hex');\n    // console.log(buffer);\n    this.setOutputData(0, buffer);\n  }\n}\nContainer.registerNodeType('conversion/hex-string-to-buffer', HexStringToBuffer);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport ModbusByteOrder from '../protocols/modbus/modbus-fc/modbus-point-byte-order';\nimport { NODE_INFO } from '../../node-info';\n\nclass IntToFourByteArrayNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.conversion[\"int-to-buffer\"].title;\n    this.description = NODE_INFO.conversion[\"int-to-buffer\"].description; this.addInput('in 1', Type.ANY);\n    \n    this.addOutput('out', Type.JSON);\n    this.addOutput('out data', Type.JSON);\n    this.settings['dataType'] = NodeSetting.create({\n      description: 'Set data type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'na' }, // use reg length from setting\n          { value: 1, text: 'INT-16' }, // 1 reg\n          { value: 2, text: `UINT-16` }, // 1 reg\n          { value: 3, text: 'INT-32' }, // 2 reg\n          { value: 4, text: 'UINT-32' }, // 2 reg\n          { value: 5, text: 'FLOAT-32' }, // 2 reg\n          { value: 8, text: 'DOUBLE-64' }, // 4 reg\n        ],\n      },\n      value: 0,\n    });\n    this.settings['dataEndian'] = NodeSetting.create({\n      description: 'Set byte order',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'LE-Byte BE-Word' },\n          { value: 1, text: 'LE-Byte LE-Word' },\n          { value: 2, text: 'BE-Byte LE-Word' },\n          { value: 3, text: 'BE-Byte BE-Word' },\n        ],\n      },\n      value: 0,\n    });\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    const dataEndian = this.settings['dataEndian'].value;\n    const dataType = this.settings['dataType'].value;\n    const out = ModbusByteOrder.writeValue(input, dataType, dataEndian);\n    this.setOutputData(0, JSON.stringify(out));\n    this.setOutputData(1, JSON.parse(JSON.stringify(out)).data);\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('conversion/int-to-buffer', IntToFourByteArrayNode);\n","import { isNull } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass EventCounterNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.count[\"any-event-counter\"].title;\n    this.description = NODE_INFO.count[\"any-event-counter\"].description;\n\n    this.addInput('input');\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('count', Type.NUMBER);\n    this.addOutput('toggle', Type.NUMBER);\n    this.settings['null'] = NodeSetting.create({\n      description: 'Stop count if input is null',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.properties['count'] = 0;\n  }\n\n  onAdded(){\n    this.setOutputData(0, 0);\n    this.setOutputData(1, false);\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const inputUpdated = this.inputs[0].updated;\n    const inputData = this.inputs[0].data;\n    const reset = this.inputs[1].data\n    if (reset && reset == true) this.properties['count'] = 0; //reset count\n    if (this.settings['null'].value && this.isNull(inputData)) return\n     if (inputUpdated) {\n        this.properties['count']++;\n        this.setOutputData(1, !this.outputs[1].data); // toggle\n      }\n    if (this.properties['count'] !== inputData) {\n      this.setOutputData(0, this.properties['count']);\n      this.persistProperties(false, true);\n    }\n  }\n\n  isNull(message: any) {\n    return isNull(message)\n  }\n}\nContainer.registerNodeType('count/any-event-counter', EventCounterNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass CounterNode extends Node {\n  lastUp:boolean;\n  lastDown:boolean;\n  lastReset:boolean;\n\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.count.counter.title;\n    this.description = NODE_INFO.count.counter.description;\n\n    this.addInputWithSettings('set value', Type.NUMBER, 0, 'Set Value');\n    this.addInput('count up', Type.BOOLEAN);\n    this.addInput('count down', Type.BOOLEAN);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('count', Type.NUMBER);\n    this.properties['pointVal'] = 0;\n  }\n\n  onCreated() {\n  }\n\n  onAdded() {\n    this.setOutputData(1, false);\n    this.setOutputData(2, false);\n    this.lastUp = false;\n    this.lastDown = false;\n    this.lastReset = false;\n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const old = this.outputs[0].data;\n    const up = this.getInputData(1) || false;\n    const down = this.getInputData(2) || false;\n    const reset = this.getInputData(3) || false;\n\n    if (this.inputs[1].updated && up && !this.lastUp) this.properties['pointVal']++;\n    this.lastUp = up;\n\n    if (this.inputs[2].updated && down && !this.lastDown) this.properties['pointVal']--;\n    this.lastDown = down;\n\n    const setValue = this.getInputData(0);\n\n    if (this.inputs[3].updated && reset && !this.lastReset) this.properties['pointVal'] = setValue;\n    this.lastReset = reset;\n\n    if (this.properties['pointVal'] !== old) {\n      this.setOutputData(0, this.properties['pointVal']);\n      this.properties['pointVal'] = this.properties['pointVal'];\n      this.persistProperties(false, true);\n    }\n\n    this.setOutputData(0, this.outputs[0].data);\n  }\n}\nContainer.registerNodeType('count/counter', CounterNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass TriggeredRamp extends Node {\n  countUp: boolean;\n  lastTrigger: boolean;\n  lastReset: boolean;\n  currentVal: number;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.count[\"triggered-ramp\"].title;\n    this.description = NODE_INFO.count[\"triggered-ramp\"].description;\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInputWithSettings('min', Type.NUMBER, 0, 'min', false);\n    this.addInputWithSettings('max', Type.NUMBER, 10, 'max', false);\n    this.addInputWithSettings('step', Type.NUMBER, 1, 'Step Size', false);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n    this.settings['countOnFalse'] = NodeSetting.create({\n      description: 'Also count on true->false?',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.settings['rampUpOnly'] = NodeSetting.create({\n      description: 'Ramp Up Only',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n    this.countUp = false;\n    this.lastTrigger = false;\n    this.lastReset = false;\n    this.currentVal = 0;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const min = this.getInputData(1);\n    const max = this.getInputData(2);\n\n    this.currentVal = Number(this.currentVal);\n    if (this.currentVal < min) this.currentVal = min;\n    else if (this.currentVal > max) this.currentVal = max;\n\n    const reset = this.getInputData(4);\n    if (reset && !this.lastReset) this.currentVal = min;\n    this.lastReset = reset;\n\n    const trigger = this.getInputData(0);\n    if (trigger != this.lastTrigger) {\n      if (this.settings['countOnFalse'].value || trigger) {\n        const step = this.getInputData(3);\n        if (this.countUp && this.currentVal + step > max) {\n          if (this.settings['rampUpOnly'].value) {\n            this.countUp = true;\n            this.currentVal = min - step;\n          } else this.countUp = false;\n        } else if (!this.countUp && this.currentVal - step < min) this.countUp = true;\n        if (this.countUp) this.currentVal += step;\n        else this.currentVal -= step;\n      }\n      this.lastTrigger = trigger;\n    }\n\n    this.setOutputData(0, this.currentVal, true); //out\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('count/triggered-ramp', TriggeredRamp);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\n\nclass IntervalRampNode extends Node {\n  countUp: boolean;\n  lastInterval: number;\n  lastReset: boolean;\n  lastEnable: boolean;\n  currentVal: number;\n  timeoutFunc;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.count[\"interval-ramp\"].title;\n    this.description = NODE_INFO.count[\"interval-ramp\"].description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, 0, 'Enable', false);\n    this.addInputWithSettings('min', Type.NUMBER, 0, 'min', false);\n    this.addInputWithSettings('max', Type.NUMBER, 10, 'max', false);\n    this.addInputWithSettings('step', Type.NUMBER, 1, 'Step Size', false);\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Count Interval', false);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n\n    this.settings['rampUpOnly'] = NodeSetting.create({\n      description: 'Ramp Up Only',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n  }\n\n  onAdded() {\n    this.countUp = true;\n    this.lastInterval = 1000;\n    this.lastReset = false;\n    this.lastEnable = true;\n    this.currentVal = 0;\n    this.timeoutFunc = setInterval(() => {\n      const min = this.getInputData(1);\n      const max = this.getInputData(2);\n      this.count(min, max);\n      this.setOutputData(0, this.currentVal, true);\n    }, this.lastInterval);\n    this.inputs[4]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const min = this.getInputData(1);\n    const max = this.getInputData(2);\n\n    this.currentVal = Number(this.currentVal);\n    if (this.currentVal < min) this.currentVal = min;\n    else if (this.currentVal > max) this.currentVal = max;\n\n    const reset = Boolean(this.getInputData(5));\n    if (reset && !this.lastReset) this.currentVal = min;\n    this.countUp = true;\n    this.lastReset = reset;\n\n    let interval = this.getInputData(4);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    const enable = this.getInputData(0);\n    if (enable && !this.lastEnable) {\n      this.timeoutFunc = setInterval(() => {\n        this.count(min, max);\n        this.setOutputData(0, this.currentVal, true);\n      }, interval);\n    } else if (!enable && this.lastEnable) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, null);\n    } else if (enable && this.lastEnable && interval !== this.lastInterval) {\n      clearInterval(this.timeoutFunc);\n      this.timeoutFunc = setInterval(() => {\n        this.count(min, max);\n        this.setOutputData(0, this.currentVal, true);\n      }, interval);\n    }\n    this.lastInterval = interval;\n    this.lastEnable = enable;\n  }\n\n  count(min, max) {\n    const step = this.getInputData(3);\n    if (this.countUp && this.currentVal + step > max) {\n      if (this.settings['rampUpOnly'].value) {\n        this.countUp = true;\n        this.currentVal = min - step;\n      } else this.countUp = false;\n    } else if (!this.countUp && this.currentVal - step < min) this.countUp = true;\n    if (this.countUp) this.currentVal += step;\n    else this.currentVal -= step;\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[4]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('count/interval-ramp', IntervalRampNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 07.03.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass WaveformNode extends Node {\n  lastTime: number;\n  startTime: number;\n  lastReset: boolean;\n  constructor() {\n    super();\n    this.title = NODE_INFO.count.waveform.title;\n    this.description = NODE_INFO.count.waveform.description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, 0, 'min', false);\n    this.settings['signalType'] = NodeSetting.create({\n      description: 'Signal Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'Ramp', text: 'Ramp' },\n          { value: 'Sine', text: 'Sine' },\n          { value: 'Square', text: 'Square' },\n          { value: 'Triangle', text: 'Triangle' },\n          { value: 'Sawtooth', text: 'Sawtooth' },\n        ],\n      },\n      value: 'Ramp',\n    });\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Interval', false);\n    this.addInputWithSettings('period', Type.NUMBER, 10, 'Period', false);\n    this.addInputWithSettings('amplitude', Type.NUMBER, 1, 'Amplitude', false);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.settings['intervalTime'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.settings['periodTime'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [\n        { interval: { weight: 2 }, intervalTime: {} },\n        { period: { weight: 2 }, periodTime: {} },\n        { amplitude: {} },\n      ],\n    });\n    this.settings['enable'] = NodeSetting.create({ description: 'Enable', value: true, type: SettingType.BOOLEAN });\n    this.settings['invert'] = NodeSetting.create({\n      description: 'Invert Output',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n    this.updateTitle();\n    this.inputs[1]['name'] = `[interval] (${this.settings['intervalTime'].value})`;\n    this.inputs[2]['name'] = `[period] (${this.settings['periodTime'].value})`;\n    this.lastReset = false;\n    this.startTime = Date.now();\n    this.onInputUpdated();\n  }\n\n  onExecute() {\n    if (!this.getInputData(0)) return;\n    let interval = this.getInputData(1);\n    interval = TimeUtils.timeConvert(interval, this.settings['intervalTime'].value);\n    const now = Date.now();\n    if (!this.lastTime) {\n      this.lastTime = now;\n    }\n    if (now - this.lastTime >= interval) {\n      this.recalculate();\n    }\n  }\n  onInputUpdated() {\n    const reset = this.getInputData(4);\n    if (reset && !this.lastReset) {\n      this.setOutputData(0, 0, false);\n      this.startTime = Date.now();\n    }\n    this.lastReset = reset;\n\n    if (!this.getInputData(0)) {\n      return;\n    }\n    this.recalculate();\n  }\n\n  recalculate() {\n    const now = Date.now();\n    const signalType = this.settings['signalType'].value || 'Ramp';\n    let period = this.getInputData(2);\n    period = TimeUtils.timeConvert(period, this.settings['periodTime'].value) / 1000;\n    const amplitude = this.getInputData(3);\n    const invert = this.settings['invert'].value ? -1 : 1;\n    let time = (now - this.startTime) / 1000;\n    let t = (time % period) / period;\n    let value = 0;\n    switch (signalType) {\n      case 'Sine':\n        value = Math.sin(2 * Math.PI * t);\n        break;\n      case 'Square':\n        value = Math.sign(Math.sin(2 * Math.PI * t));\n        if (value === -1) {\n          value = 0;\n        }\n        break;\n      case 'Triangle':\n        value = 1 - 4 * Math.abs(Math.round(t - 0.25) - (t - 0.25));\n        break;\n      case 'Sawtooth':\n        value = t;\n        break;\n      case 'Ramp':\n        value = 2 * Math.abs(Math.round(t) - t);\n        break;\n    }\n    value = invert * amplitude * value;\n    this.lastTime = now;\n    this.setOutputData(0, value);\n  }\n\n  onAfterSettingsChange() {\n    this.updateTitle();\n    this.inputs[1]['name'] = `[interval] (${this.settings['intervalTime'].value})`;\n    this.inputs[2]['name'] = `[period] (${this.settings['periodTime'].value})`;\n  }\n\n  updateTitle() {\n    if (!this.settings['signalType'].value) return;\n    const signalType = this.settings['signalType'].value;\n    this.title = 'Waveform' + ' ' + '(' + signalType + ')';\n  }\n}\nContainer.registerNodeType('count/waveform', WaveformNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\n\nlet moment = require('moment-timezone');\n\n//https://github.com/travishorn/csval\n//https://github.com/C2FO/fast-csv\n\nclass CSVMergeRowsNode extends Node {\n  obj = [];\n  constructor() {\n    super();\n    this.title = NODE_INFO.csv[\"csv-merge-rows\"].title;\n    this.description = NODE_INFO.csv[\"csv-merge-rows\"].description;\n    this.addInput('original', Type.STRING);\n    this.addInput('merge', Type.STRING);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n    this.setOutputData(0, '');\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return; // only execute on server\n    if (!this.getInputData(0) || !this.getInputData(1)) return;\n    let outputCSV = this.getInputData(0).slice(0, this.getInputData(0).length - 1);\n    let addCSV = this.getInputData(1);\n    addCSV = addCSV.slice(addCSV.indexOf('\\n'), addCSV.length - 1);\n    outputCSV += addCSV;\n\n    this.setOutputData(0, outputCSV);\n  }\n}\nContainer.registerNodeType('csv/csv-merge-rows', CSVMergeRowsNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\n\nlet moment = require('moment-timezone');\n\n//https://github.com/travishorn/csval\n//https://github.com/C2FO/fast-csv\n\nclass CSVMergeColumnsNode extends Node {\n  obj = [];\n  constructor() {\n    super();\n    this.title = NODE_INFO.csv[\"csv-merge-columns\"].title;\n    this.description = NODE_INFO.csv[\"csv-merge-columns\"].description;\n    this.addInput('original', Type.STRING);\n    this.addInput('merge', Type.STRING);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n    this.setOutputData(0, '');\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return; // only execute on server\n    if (!this.getInputData(0) || !this.getInputData(1)) return;\n\n    let originalColumnsArray = this.getInputData(0).split('\\n');\n    let mergeColumnsArray = this.getInputData(1).split('\\n');\n    let outputCSV = '';\n    const originalColumnsCount = originalColumnsArray[0].split(',').length;\n    const mergeColumnsCount = mergeColumnsArray[0].split(',').length;\n\n    var i = 0;\n    for (i = 0; i < Math.min(mergeColumnsArray.length, originalColumnsArray.length) - 1; i++) {\n      outputCSV += originalColumnsArray[i] + ', ' + mergeColumnsArray[i] + '\\n';\n    }\n    //if(i < originalColumnsArray.length){\n    var x = 0;\n    while (i < originalColumnsArray.length - 1) {\n      outputCSV += originalColumnsArray[i];\n      x = originalColumnsCount;\n      while (x < originalColumnsCount + mergeColumnsCount) {\n        outputCSV += ', ';\n        x++;\n      }\n      outputCSV += '\\n';\n      i++;\n    }\n    while (i < mergeColumnsArray.length - 1) {\n      x = mergeColumnsCount;\n      while (x < originalColumnsCount + mergeColumnsCount) {\n        outputCSV += ', ';\n        x++;\n      }\n      outputCSV += mergeColumnsArray[i];\n      outputCSV += '\\n';\n      i++;\n    }\n    this.setOutputData(0, outputCSV);\n  }\n}\nContainer.registerNodeType('csv/csv-merge-columns', CSVMergeColumnsNode);\n","import axios from 'axios';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport SystemUtils from '../system/system-utils';\nimport { bsaClientConfig } from './bsa-client-config';\n\nclass BSACumulocityDeviceNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.cumulocity[\"cumulocity-device\"].title;\n    this.description =  NODE_INFO.cumulocity[\"cumulocity-device\"].description;\n    this.addInput('createDevice', Type.BOOLEAN);\n    this.addOutput('id', Type.NUMBER);\n    this.addOutput('message', Type.STRING);\n\n    this.settings['CumulocityDeviceName'] = NodeSetting.create({\n      description: 'Cumulocity Device Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n  }\n\n  async onAdded() {\n    await this.onAfterSettingsChange();\n  }\n\n  async onInputUpdated() {\n    if (this.side !== Side.server) return;\n    if (this.getInputData(0) && this.inputs[0].updated) {\n      if (this.outputs[0].data && this.outputs[0].data.length == 0) await this.createDevice();\n      await this.checkDeviceExists();\n    }\n  }\n\n  async onAfterSettingsChange() {\n    if (this.side !== Side.server) return;\n    await this.checkDeviceExists();\n  }\n\n  getDeviceName(): string {\n    let deviceName = this.settings['CumulocityDeviceName'].value || 'unknownDevice';\n    if (!deviceName.startsWith('c8y_')) deviceName = 'c8y_' + deviceName;\n    return deviceName;\n  }\n\n  async checkDeviceExists() {\n    let deviceName = this.getDeviceName();\n    let cfg: any = bsaClientConfig('device');\n    cfg = {\n      ...cfg,\n      method: 'GET',\n      url: `${cfg.url}?query=name+eq+${deviceName}`,\n    };\n    try {\n      const response = await axios(cfg);\n      const ids = [];\n      response.data.managedObjects.forEach(device => {\n        ids.push(Number(device.id));\n      });\n      this.setOutputData(0, ids);\n      this.setOutputData(1, null);\n    } catch (error) {\n      this.setOutputData(1, String(error));\n    }\n  }\n\n  async createDevice() {\n    let clientIdFromPlat;\n    let deviceIdFromPlat;\n    try {\n      clientIdFromPlat = await SystemUtils.getClientIdDb();\n    } catch (e) {\n      clientIdFromPlat = 'unknownClientID';\n    }\n    try {\n      deviceIdFromPlat = await SystemUtils.getDeviceIdDb();\n    } catch (e) {\n      deviceIdFromPlat = 'unknownDeviceID';\n    }\n    let deviceName = this.getDeviceName();\n    let cfg: any = bsaClientConfig('device');\n    cfg = {\n      ...cfg,\n      method: 'POST',\n      data: {\n        name: deviceName,\n        type: 'c8y_nube',\n        deviceid: deviceIdFromPlat,\n        clientid: clientIdFromPlat,\n        c8y_IsDevice: {},\n      },\n    };\n    try {\n      await axios(cfg);\n    } catch (error) {\n      this.setOutputData(1, String(error));\n    }\n  }\n}\n\nContainer.registerNodeType('cumulocity/cumulocity-device', BSACumulocityDeviceNode);\n","import axios from 'axios';\nimport * as moment from 'moment-timezone';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport { bsaClientConfig } from './bsa-client-config';\nimport { NODE_INFO } from '../../node-info';\n\nenum HistoryMode {\n  COV = 0,\n  PERIODIC = 1,\n  TRIGGER_ONLY = 2,\n}\n\nclass BSACumulocityNode extends Node {\n  // dynamically calculate position when starting\n  histTriggerInput: number;\n  clearStoredHisInput: number;\n  histErrorOutput: number;\n  storedHistCountOutput: number;\n  lastHistExportOutput: number;\n  // configurable parameters from each extended node for extracting values to store on DB\n  valueInput: number = 0;\n  // extra parameter for nodes\n  interval: number = -1;\n  timeoutFunc: any;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.cumulocity[\"cumulocity-point\"].title;\n    this.description =  NODE_INFO.cumulocity[\"cumulocity-point\"].description;\n    this.addInput('input', Type.ANY);\n  }\n\n  addHistoryConfiguration() {\n    this.addInput('histTrigger', Type.BOOLEAN);\n    this.addInput('clearStoredHis', Type.BOOLEAN);\n    this.addOutput('histError', Type.ANY);\n    this.addOutput('storedHistCount', Type.NUMBER);\n    this.addOutput('lastHistExport', Type.STRING);\n\n    /**\n     * History settings\n     */\n    this.settings['enable'] = NodeSetting.create({\n      description: 'History Enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.settings['CumulocityDeviceID'] = NodeSetting.create({\n      description: 'Cumulocity Device ID (Number)',\n      value: '',\n      type: SettingType.STRING,\n    });\n\n    this.settings['CumulocityPointName'] = NodeSetting.create({\n      description: 'Measurement Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n\n    this.settings['CumulocityPointType'] = NodeSetting.create({\n      description: 'Measurement Type',\n      value: '',\n      type: SettingType.STRING,\n    });\n\n    this.settings['CumulocitySeries'] = NodeSetting.create({\n      description: 'Series Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n\n    this.settings['historyMode'] = NodeSetting.create({\n      description: 'History Logging Mode',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: HistoryMode.COV, text: 'Change Of Value (COV)' },\n          { value: HistoryMode.PERIODIC, text: 'Periodic' },\n          { value: HistoryMode.TRIGGER_ONLY, text: 'Trigger Only' },\n        ],\n      },\n      value: HistoryMode.COV,\n    });\n\n    this.settings['dataType'] = NodeSetting.create({\n      description: 'Data type for storing',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: Type.NUMBER, text: 'Number' },\n          { value: Type.BOOLEAN, text: 'Boolean' },\n          { value: Type.STRING, text: 'String' },\n        ],\n      },\n      value: Type.NUMBER,\n    });\n    this.settings['threshold'] = NodeSetting.create({\n      description: 'COV Threshold',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['period'] = NodeSetting.create({\n      description: 'Logging Interval',\n      value: 15,\n      type: SettingType.NUMBER,\n    });\n    this.settings['periodUnits'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.MILLISECONDS, text: 'Milliseconds' },\n          { value: TIME_TYPE.SECONDS, text: 'Seconds' },\n          { value: TIME_TYPE.MINUTES, text: 'Minutes' },\n          { value: TIME_TYPE.HOURS, text: 'Hours' },\n        ],\n      },\n      value: TIME_TYPE.MINUTES,\n    });\n\n    this.settings['storage-limit'] = NodeSetting.create({\n      description: 'Local Storage Limit (Max 50)',\n      value: 25,\n      type: SettingType.NUMBER,\n    });\n    this.settings['minuteRoundValue'] = NodeSetting.create({\n      description: 'Round minutes up in increments of',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.settings['decimals'] = NodeSetting.create({\n      description: 'Decimal Places (Limit 5)',\n      value: 3,\n      type: SettingType.NUMBER,\n    });\n    this.settings['timeAsString'] = NodeSetting.create({\n      description: 'Display Timestamp as',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: false, text: 'Numeric' },\n          { value: true, text: 'String' },\n        ],\n      },\n      value: true,\n    });\n\n    this.settings['units'] = NodeSetting.create({\n      description: 'Units',\n      value: '',\n      type: SettingType.STRING,\n    });\n\n    this.properties['obj'] = [];\n  }\n\n  setup() {\n    this.addHistoryConfiguration();\n  }\n\n  init() {\n    this.assignInputsOutputs();\n  }\n\n  onAdded() {\n    this.assignInputsOutputs();\n    this.resetOutputs();\n    this.doPeriodicHistoryFunctions();\n  }\n\n  async onInputUpdated() {\n    if (this.getInputData(this.clearStoredHisInput)) {\n      this.properties['obj'] = [];\n      this.updateHistoryCountOutput();\n    }\n    await this.doNonPeriodicHistoryFunctions();\n  }\n\n  async onAfterSettingsChange() {\n    await this.doNonPeriodicHistoryFunctions();\n    this.doPeriodicHistoryFunctions();\n  }\n\n  onRemoved() {\n    clearInterval(this.timeoutFunc);\n  }\n\n  assignInputsOutputs() {\n    for (let input in this.inputs) {\n      if (this.inputs.hasOwnProperty(input)) {\n        if (this.inputs[input].name == 'histTrigger') this.histTriggerInput = Number(input);\n        if (this.inputs[input].name == 'clearStoredHis') this.clearStoredHisInput = Number(input);\n      }\n    }\n\n    for (let output in this.outputs) {\n      if (this.outputs.hasOwnProperty(output)) {\n        if (this.outputs[output].name == 'histError') this.histErrorOutput = Number(output);\n        else if (this.outputs[output].name == 'storedHistCount') this.storedHistCountOutput = Number(output);\n        else if (this.outputs[output].name == 'lastHistExport') this.lastHistExportOutput = Number(output);\n      }\n    }\n  }\n\n  resetOutputs() {\n    this.updateHistoryCountOutput();\n  }\n\n  async doNonPeriodicHistoryFunctions() {\n    if (this.side !== Side.server) return;\n    if (!this.settings['enable'].value) return;\n    const input = this.getInputData(this.valueInput);\n\n    if (this.checkTriggered()) {\n      await this.storeLogEntry(input);\n    } else if (this.checkCOV(input)) {\n      await this.storeLogEntry(input);\n    }\n\n    if (this.properties['obj'].length > 0) await this.trySendStoredData();\n  }\n\n  async trySendStoredData() {\n    let decimals = this.settings['decimals'].value;\n    decimals = Utils.clamp(decimals, 0, 5);\n\n    const multiPointPost = [];\n\n    let measurementName = this.settings['CumulocityPointName'].value || 'c8y_unknownPoint';\n    if (!measurementName.startsWith('c8y_')) measurementName = 'c8y_' + measurementName;\n    let measurementType = this.settings['CumulocityPointType'].value || 'c8y_unknownType';\n    if (!measurementType.startsWith('c8y_')) measurementType = 'c8y_' + measurementType;\n    const seriesName = this.settings['CumulocitySeries'].value || 'unknownSeries';\n\n    this.properties['obj'].forEach(log => {\n      const dataType = this.settings['dataType'].value;\n      log.payload = this.convertInput(log.payload, dataType, decimals);\n      multiPointPost.push({\n        source: {\n          id: this.settings['CumulocityDeviceID'].value,\n        },\n        time: log.timestamp,\n        type: measurementType,\n        [measurementName]: {\n          [seriesName]: {\n            value: log.payload,\n            unit: String(this.settings['units'].value) || 'undefined',\n          },\n        },\n      });\n    });\n    this.debugInfo(`SENDING DATA: ${JSON.stringify(multiPointPost)}`);\n    let cfg: any = bsaClientConfig('measurement');\n    cfg = { ...cfg, method: 'POST', data: { measurements: multiPointPost } };\n    try {\n      const response = await axios(cfg);\n      this.debugInfo(`RESPONSE FROM SERVER: ${JSON.stringify(response.data)}`);\n      this.properties['obj'] = [];\n      this.persistProperties(false, true);\n      this.setOutputData(this.histErrorOutput, '');\n      this.settings['timeAsString'].value\n        ? this.setOutputData(this.lastHistExportOutput, moment().format(), true)\n        : this.setOutputData(this.lastHistExportOutput, moment().valueOf(), true);\n      this.updateHistoryCountOutput();\n    } catch (e) {\n      this.debugErr(`ERROR: ${e}`);\n      this.setOutputData(this.histErrorOutput, e);\n    }\n  }\n\n  async storeLogEntry(input) {\n    if (input == null) return;\n    // cap the amount of data that can be stored\n    const storageLimit = Utils.clamp(this.settings['storage-limit'].value, 0, 50);\n    const minuteRound = Utils.clamp(this.settings['minuteRoundValue'].value, 0, 60);\n    const now = minuteRound ? TimeUtils.nearestFutureMinutes(minuteRound, moment()) : moment();\n    // object data\n    const msg = {\n      payload: input,\n      timestamp: now.toISOString(),\n    };\n    // build an object\n    this.properties['obj'].push(msg);\n    while (this.properties['obj'].length > storageLimit) {\n      this.properties['obj'].shift();\n    }\n    this.properties['lastHistoryValue'] = input;\n    this.persistProperties(false, true);\n    this.updateHistoryCountOutput();\n  }\n\n  checkTriggered() {\n    return (\n      this.settings['historyMode'].value === HistoryMode.TRIGGER_ONLY &&\n      this.getInputData(this.histTriggerInput) &&\n      this.inputs[this.histTriggerInput].updated\n    );\n  }\n\n  checkCOV(input) {\n    if (this.settings['historyMode'].value === HistoryMode.COV) {\n      const threshold = this.settings['threshold'].value;\n      if (!isNaN(input) && !isNaN(this.properties['lastHistoryValue'])) {\n        return Math.abs(Number(input) - Number(this.properties['lastHistoryValue'])) >= threshold;\n      } else {\n        return input !== this.properties['lastHistoryValue'];\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Sets values in periodic period when HistoryMode is `PERIODIC`\n   */\n  doPeriodicHistoryFunctions() {\n    if (this.side !== Side.server) return;\n    const enable = this.settings['enable'].value;\n    const isPeriodic = this.settings['historyMode'].value === HistoryMode.PERIODIC;\n    if (!enable || !isPeriodic) {\n      if (this.timeoutFunc) {\n        this.interval = -1;\n        clearInterval(this.timeoutFunc);\n        this.debugInfo('Clearing Periodic interval data insertion...');\n      }\n    }\n    if (enable && isPeriodic) {\n      const interval = TimeUtils.timeConvert(this.settings['period'].value, this.settings['periodUnits'].value);\n      if (this.interval !== interval) {\n        clearInterval(this.timeoutFunc);\n        this.timeoutFunc = setInterval(async () => {\n          const input = this.getInputData(this.valueInput);\n          await this.storeLogEntry(input);\n          if (this.properties['obj'].length > 0) await this.trySendStoredData();\n        }, interval);\n        this.interval = interval;\n        this.debugInfo(`Setting Periodic Period of: ${interval} ms`);\n      }\n    }\n  }\n\n  updateHistoryCountOutput() {\n    this.setOutputData(this.storedHistCountOutput, (this.properties['obj'] && this.properties['obj'].length) || 0);\n  }\n}\n\nContainer.registerNodeType('cumulocity/cumulocity-point', BSACumulocityNode);\n","import axios from 'axios';\nimport * as _ from 'lodash';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport { bsaClientConfig } from './bsa-client-config';\nimport { NODE_INFO } from '../../node-info';\n\nlet moment = require('moment-timezone');\n\nenum ALARM_TYPE {\n  WARNING = 'WARNING',\n  MINOR = 'MINOR',\n  MAJOR = 'MAJOR',\n  CRITICAL = 'CRITICAL',\n}\n\nconst alarmConfig = {\n  items: [\n    { value: ALARM_TYPE.WARNING, text: ALARM_TYPE.WARNING },\n    { value: ALARM_TYPE.MINOR, text: ALARM_TYPE.MINOR },\n    { value: ALARM_TYPE.MAJOR, text: ALARM_TYPE.MAJOR },\n    { value: ALARM_TYPE.CRITICAL, text: ALARM_TYPE.CRITICAL },\n  ],\n};\n\nclass BSACumulocityAlarmNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.cumulocity[\"cumulocity-alarm\"].title;\n    this.description =  NODE_INFO.cumulocity[\"cumulocity-alarm\"].description;\n    this.addInput('alarmInput', Type.BOOLEAN);\n    this.addInputWithSettings('alarmText', Type.STRING, 'No Alarm Message Available', 'Enter Alarm Message');\n    this.addInputWithSettings('alarmClass', Type.DROPDOWN, ALARM_TYPE.WARNING, 'Alarm Class', false, alarmConfig);\n\n    this.addOutput('status', Type.BOOLEAN);\n    this.addOutput('error', Type.STRING);\n\n    this.settings['enable'] = NodeSetting.create({\n      description: 'Alarm Enable',\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.settings['CumulocityDeviceID'] = NodeSetting.create({\n      description: 'Cumulocity Device ID (Number)',\n      value: '',\n      type: SettingType.STRING,\n    });\n\n    this.settings['CumulocityAlarmName'] = NodeSetting.create({\n      description: 'Alarm Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n  }\n\n  onCreated() {\n    if (_.isEmpty(this.properties['alarmRegistry'])) this.properties['alarmRegistry'] = {};\n  }\n\n  async onInputUpdated() {\n    if (this.side !== Side.server) return;\n    if (!this.settings['enable'].value) return;\n    if (this.inputs[0].updated) await this.postAlarm(this.getInputData(0));\n  }\n\n  async onAfterSettingsChange() {\n    await this.onInputUpdated();\n  }\n\n  async postAlarm(alarmInput) {\n    let alarmName = this.settings['CumulocityAlarmName'].value || 'c8y_unknownAlarm';\n    if (!alarmName.startsWith('c8y_')) alarmName = 'c8y_' + alarmName;\n\n    let cfg: any = bsaClientConfig('alarm');\n    if (alarmInput) {\n      cfg = {\n        ...cfg,\n        method: 'POST',\n        data: {\n          source: {\n            id: this.settings['CumulocityDeviceID'].value,\n          },\n          text: this.getInputData(1),\n          time: moment().toISOString(),\n          type: alarmName,\n          status: 'ACTIVE',\n          severity: this.getInputData(2),\n        },\n      };\n      try {\n        const response = await axios(cfg);\n        this.setOutputData(0, true);\n        this.setOutputData(1, false);\n        this.properties['alarmRegistry'][alarmName] = response.data.id;\n        this.debugInfo(`ALARM_REGISTRY ${JSON.stringify(this.properties['alarmRegistry'])}`);\n      } catch (error) {\n        this.debugErr(error);\n        this.setOutputData(0, false);\n        this.setOutputData(1, error);\n      }\n    } else if (!alarmInput) {\n      const alarmID = this.properties['alarmRegistry'][alarmName];\n      if (!alarmID) return;\n      cfg = {\n        ...cfg,\n        method: 'PUT',\n        url: `alarm/alarms/${alarmID}`,\n        data: { status: 'CLEARED' },\n      };\n      try {\n        await axios(cfg);\n        this.setOutputData(0, false);\n        this.setOutputData(1, false);\n        delete this.properties['alarmRegistry'][alarmName];\n        this.debugInfo(`Cleared alarm ${alarmName}`);\n        this.debugInfo(`ALARM_REGISTRY ${JSON.stringify(this.properties['alarmRegistry'])}`);\n      } catch (error) {\n        this.debugErr(`ERROR ${error}`);\n        this.setOutputData(0, false);\n        this.setOutputData(1, error);\n      }\n    }\n    this.persistProperties(false, true);\n  }\n}\n\nContainer.registerNodeType('cumulocity/cumulocity-alarm', BSACumulocityAlarmNode);\n","import { Container } from '../../container';\nimport { BaseFunctionNode } from './base-function-node';\nimport { NODE_INFO } from '../../node-info';\n\nexport class FunctionNode extends BaseFunctionNode {\n\n  constructor() {\n    super(NODE_INFO[\"custom-function\"].function.title, NODE_INFO[\"custom-function\"].function.description);\n    this.mixinScriptSetting('// message is the received value\\nreturn message;');\n  }\n\n  protected getScriptInput() {\n    return this.getInputData(0);\n  }\n}\n\nContainer.registerNodeType('custom-function/function', FunctionNode);\n","import { NodeVM } from 'vm2';\nimport { isEmpty } from '../../../utils/helper';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType } from '../../node-io';\n\nexport abstract class BaseFunctionNode extends Node {\n\n  protected constructor(title: string, description: string) {\n    super();\n    this.title = title;\n    this.description = description;\n\n    this.addInput('message');\n    this.addOutput('output');\n    this.addOutput('error');\n  }\n\n  onCreated() {\n  }\n\n  onAdded() {\n  }\n\n  onInputUpdated() {\n    try {\n      this.executeConfiguredScript(this.getScriptInput())\n          .then(result => this.emitResult(result))\n          .catch(e => this.emitError(e));\n    } catch (e) {\n      this.emitError(e);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n\n  protected abstract getScriptInput();\n\n  protected executeConfiguredScript(...variables): Promise<any> {\n    const code = this.settings['script'].value;\n    if (this.side !== Side.server || isEmpty(code)) return;\n    const vm = new NodeVM({ timeout: 1000, sandbox: {} });\n    let func = vm.run(`module.exports = function(message, ...args) {\\n${code}\\n};`);\n    return Promise.resolve(func(...variables));\n  }\n\n  protected emitResult(result: any) {\n    this.setOutputData(0, result);\n    this.setOutputData(1, null); // reset error\n  }\n\n  protected emitError(error: Error) {\n    this.setOutputData(0, null); // reset result\n    this.debugErr(`Error when executing function node ${error.stack}`);\n    this.setOutputData(1, error);\n  }\n\n  protected mixinScriptSetting(defaultScript: string) {\n    this.settings['script'] = NodeSetting.create({ description: 'Function Code', value: defaultScript, type: SettingType.CODE_AREA });\n  }\n}\n","module.exports = require(\"vm2\");","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport UuidUtils from '../../utils/uuid-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass UuidNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"custom-function\"].uuid.title;\n    this.description =  NODE_INFO[\"custom-function\"].uuid.description;\n    this.addInput('trigger');\n    this.addOutput('uuid-out-8');\n    this.addOutput('uuid-out-12');\n    this.addOutput('uuid-out-28');\n  }\n\n  onInputUpdated() {\n    const out8 = UuidUtils.create8DigId();\n    const out12 = UuidUtils.create12DigId();\n    const out28 = UuidUtils.createUUID();\n    this.setOutputData(0, out8);\n    this.setOutputData(1, out12);\n    this.setOutputData(2, out28);\n\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated()\n  }\n\n}\n\nContainer.registerNodeType('custom-function/uuid', UuidNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 25.02.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport { Container } from '../../container';\nimport { NODE_INFO } from '../../node-info';\nimport Utils from '../../utils';\nimport { UiNode } from './ui-node';\n\nexport class UiLabelNode extends UiNode {\n  constructor(container?: Container, id?: number, properties?: any) {\n    super('Label', 'UiLabelNode', properties);\n    this.title = NODE_INFO.dashboard.label.title;\n    this.description = NODE_INFO.dashboard.label.description;\n    this.addInput('input');\n    this.UPDATE_INPUTS_INTERVAL = 100;\n  }\n\n  onInputUpdated() {\n    const state = Utils.formatValue(this.getInputData(0));\n    this.setState(state);\n    this.isRecentlyActive = true;\n  }\n}\n\nContainer.registerNodeType('dashboard/label', UiLabelNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 26.02.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport { Container } from '../../container';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport { UiNode } from './ui-node';\n\nexport class UiButtonNode extends UiNode {\n  interval = null;\n\n  constructor(container?: Container, id?: number, properties?: any) {\n    super('Button', 'UiButtonNode', properties);\n    this.title = NODE_INFO.dashboard.button.title;\n    this.description = NODE_INFO.dashboard.button.description;\n    this.addOutput('output', Type.BOOLEAN);\n    this.settings['button-text'] = NodeSetting.create({\n      description: 'Button Text',\n      value: 'ON',\n      type: SettingType.STRING,\n    });\n    this.setState({ buttonText: 'ON' });\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return;\n  }\n\n  onRemoved() {\n    super.onRemoved();\n  }\n\n  onGetMessageToServerSide() {\n    this.setOutputData(0, true);\n    this.sendIOValuesToEditor();\n  }\n}\n\nContainer.registerNodeType('dashboard/button', UiButtonNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 02.03.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport { Container } from '../../container';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\nimport { UiNode } from './ui-node';\nimport { NODE_INFO } from '../../node-info';\n\nexport class UiSwitchNode extends UiNode {\n  constructor(container?: Container, id?: number, properties?: any) {\n    super('Switch', 'UiSwitchNode', properties);\n    this.title = NODE_INFO.dashboard.switch.title;\n    this.description = NODE_INFO.dashboard.switch.description;\n    this.setState(false);\n\n    this.addInput('input', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    super.onAdded();\n    if (this.side == Side.server) this.setOutputData(0, this.getState());\n  }\n\n  onGetMessageToServerSide(data) {\n    this.setValue(data.state);\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    this.setValue(val);\n  }\n\n  setValue(val) {\n    this.setOutputData(0, val);\n    this.sendIOValuesToEditor();\n    this.isRecentlyActive = true;\n\n    if (this.getState() != val)\n      //prevent loop sending\n      this.setState(val);\n  }\n}\n\nContainer.registerNodeType('dashboard/switch', UiSwitchNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 02.03.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport { Container } from '../../container';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\nimport { UiNode } from './ui-node';\n\nexport class UiProgressNode extends UiNode {\n  constructor(container?: Container, id?: number, properties?: any) {\n    super('Progress', 'UiProgressNode', properties);\n    this.title = NODE_INFO.dashboard.progress.title;\n    this.description = NODE_INFO.dashboard.progress.description;\n    this.addInput('input', Type.NUMBER);\n    this.UPDATE_INPUTS_INTERVAL = 100;\n    this.setState(0);\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    if (val > 100) val = 100;\n    if (val < 0) val = 0;\n\n    this.setState(val);\n    this.isRecentlyActive = true;\n  }\n}\n\nContainer.registerNodeType('dashboard/progress', UiProgressNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 02.03.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport { Container } from '../../container';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\nimport { UiNode } from './ui-node';\n\nexport class UiSliderNode extends UiNode {\n  constructor(container?: Container, id?: number, properties?: any) {\n    super('Slider', 'UiSliderNode', properties);\n    this.title = NODE_INFO.dashboard.slider.title;\n    this.description = NODE_INFO.dashboard.slider.description;\n    this.addInput('input', Type.NUMBER);\n    this.addOutput('output', Type.NUMBER);\n    this.UPDATE_INPUTS_INTERVAL = 100;\n    this.setState(0);\n  }\n\n  onAdded() {\n    super.onAdded();\n    if (this.side == Side.server) this.setOutputData(0, this.getState());\n  }\n\n  onGetMessageToServerSide(data) {\n    this.setValue(data.state);\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    this.setValue(val);\n  }\n\n  setValue(val) {\n    if (val > 100) val = 100;\n    if (val < 0) val = 0;\n\n    this.setOutputData(0, val);\n    this.sendIOValuesToEditor();\n    this.isRecentlyActive = true;\n\n    if (this.getState() != val)\n      //prevent loop sending\n      this.setState(val);\n  }\n}\n\nContainer.registerNodeType('dashboard/slider', UiSliderNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 02.03.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport { Container } from '../../container';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\nimport { UiNode } from './ui-node';\nimport { NODE_INFO } from '../../node-info';\n\nexport class UiTextBoxNode extends UiNode {\n  constructor(container?: Container, id?: number, properties?: any) {\n    super('TextBox', 'UiTextBoxNode', properties);\n\n    this.title = NODE_INFO.dashboard[\"text-box\"].title;\n    this.description = NODE_INFO.dashboard[\"text-box\"].description;\n\n    this.setState('');\n\n    this.addInput('input', Type.STRING);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n    super.onAdded();\n    if (this.side == Side.server) this.setOutputData(0, this.getState());\n  }\n\n  onGetMessageToServerSide(data) {\n    this.setValue(data.state);\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    this.setValue(val);\n  }\n\n  setValue(val) {\n    this.setOutputData(0, val);\n    this.sendIOValuesToEditor();\n    this.isRecentlyActive = true;\n\n    if (this.getState() != val)\n      //prevent loop sending\n      this.setState(val);\n  }\n}\n\nContainer.registerNodeType('dashboard/text-box', UiTextBoxNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 02.03.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\nimport { Container } from '../../container';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType } from '../../node-io';\nimport { UiNode } from './ui-node';\n\nexport class UiLogNode extends UiNode {\n  messagesPerSec = 0;\n\n  constructor(container?: Container, id?: number, properties?: any) {\n    super('Log', 'UiLogNode', properties);\n\n    this.title = NODE_INFO.dashboard.log.title;\n    this.description = NODE_INFO.dashboard.log.description;\n    this.properties['log'] = [];\n    this.settings['maxRecords'] = NodeSetting.create({\n      description: 'Max Records',\n      value: 10,\n      type: SettingType.NUMBER,\n    });\n    this.settings['maxRecordsPerSec'] = NodeSetting.create({\n      description: 'Max records/sec limit',\n      value: 11,\n      type: SettingType.NUMBER,\n    });\n    this.settings['saveToDb'] = NodeSetting.create({\n      description: 'Save log to DB',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.addInput('input');\n  }\n\n  onAdded() {\n    super.onAdded();\n    if (this.side == Side.server) this.updateMessPerSec();\n  }\n\n  onAfterSettingsChange(oldSettings) {\n    if (this.side == Side.server) {\n      if (oldSettings.maxRecords != this.settings.maxRecords) {\n        this.removeOldRecords();\n\n        this.sendMessageToDashboardSide({\n          maxRecords: this.settings['maxRecords'].value,\n        });\n      }\n    }\n  }\n\n  onDbReaded() {\n    // invert log\n    let log = [];\n    this.properties['log'].forEach(rec => log.unshift(rec));\n    this.properties['log'] = log;\n  }\n\n  removeOldRecords() {\n    let records = this.properties['log'] || [];\n    let max = this.settings['maxRecords'].value;\n    let del = records.length - max;\n    records.splice(records.length - del, del);\n  }\n\n  updateMessPerSec() {\n    setInterval(() => {\n      if (this.messagesPerSec > this.settings['maxRecordsPerSec'].value) {\n        let dropped = this.messagesPerSec - this.settings['maxRecordsPerSec'].value;\n        let record = { date: Date.now(), value: 'Dropped ' + dropped + ' records (rec/sec limit)' };\n        this.properties['log'].unshift(record);\n        this.sendMessageToDashboardSide({ record: record });\n      }\n\n      this.messagesPerSec = 0;\n    }, 1000);\n  }\n\n  onInputUpdated() {\n    if (!this.inputs[0].link) return;\n\n    let val = this.getInputData(0);\n    this.isRecentlyActive = true;\n\n    this.messagesPerSec++;\n    if (this.messagesPerSec <= this.settings['maxRecordsPerSec'].value) {\n      let record = { date: Date.now(), value: val };\n      if (this.properties['log']) this.properties['log'].unshift(record);\n\n      this.removeOldRecords();\n\n      this.sendMessageToDashboardSide({ record: record });\n\n      // update in db\n      let max = this.settings['maxRecords'].value;\n      if (this.container.db && this.settings['saveToDb'].value) {\n        this.container.db.updateNode(this.id, this.container.id, {\n          $push: { 'properties.log': { $each: [record], $slice: -max } },\n        });\n      }\n    }\n  }\n\n  onGetMessageToServerSide(message) {\n    if (message == 'getLog') {\n      this.sendMessageToDashboardSide({\n        log: this.properties['log'],\n        maxRecords: this.settings['maxRecords'].value,\n      });\n    } else if (message == 'clearLog') {\n      // clear log\n      this.isRecentlyActive = true;\n      this.properties['log'] = [];\n\n      this.sendMessageToDashboardSide({ log: [] });\n\n      // update in db\n      if (this.container.db) {\n        this.container.db.updateNode(this.id, this.container.id, {\n          $unset: { 'properties.log': true },\n        });\n      }\n    }\n  }\n}\n\nContainer.registerNodeType('dashboard/log', UiLogNode);\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 03.03.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\n\nimport { Container } from '../../container';\nimport { NodeSetting, SettingType } from '../../node-io';\nimport { UiNode } from './ui-node';\nimport { NODE_INFO } from '../../node-info';\n\n// declare let vis;\n// declare let moment;\n// declare let DataSet;\n\nexport class UiChartNode extends UiNode {\n  dataset;\n\n  constructor(container?: Container, id?: number, properties?: any) {\n    super('Chart', 'UiChartNode', properties);\n\n    this.UPDATE_INPUTS_INTERVAL = 100;\n  \n    this.title = NODE_INFO.dashboard.chart.title;\n    this.description = NODE_INFO.dashboard.chart.description;\n   \n    this.properties['log'] = [];\n    this.settings['maxRecords'] = NodeSetting.create({\n      description: 'Max Records',\n      value: 100,\n      type: SettingType.NUMBER,\n    });\n    this.settings['saveToDb'] = NodeSetting.create({\n      description: 'Save data to DB',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['style'] = NodeSetting.create({ description: 'Style', value: 'bars', type: SettingType.STRING });\n    this.settings['autoscroll'] = NodeSetting.create({\n      description: 'Auto scroll',\n      value: 'continuous',\n      type: SettingType.STRING,\n    });\n\n    this.addInput('input');\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    // this.sendIOValuesToEditor();\n    // this.isRecentlyActive = true;\n\n    //add to log\n    let records = this.properties['log'];\n    let record = { x: Date.now(), y: val };\n    records.push(record);\n\n    let max = this.settings['maxRecords'].value;\n    records.splice(0, records.length - max);\n\n    //send to dashboard\n    this.sendMessageToDashboardSide({ record: record });\n\n    //update in db\n    if (this.container.db && this.settings['saveToDb'].value) {\n      this.container.db.updateNode(this.id, this.container.id, {\n        $push: { 'properties.log': { $each: [record], $slice: -max } },\n      });\n    }\n  }\n\n  onGetMessageToServerSide(data) {\n    if (data == 'clear') {\n      this.isRecentlyActive = true;\n      this.properties['log'] = [];\n      this.sendMessageToDashboardSide({ log: [] });\n\n      //update in db\n      if (this.container.db && this.settings['saveToDb'].value) {\n        this.container.db.updateNode(this.id, this.container.id, {\n          $unset: { 'properties.log': true },\n        });\n      }\n    }\n\n    if (data.style) {\n      this.settings['style'].value = data.style;\n      this.sendMessageToDashboardSide({ style: data.style });\n    }\n\n    if (data == 'getLog') {\n      this.sendMessageToDashboardSide({\n        log: this.properties['log'],\n        maxRecords: this.settings['maxRecords'].value,\n      });\n    }\n  }\n\n  // createChart() {\n  //     let that = this;\n\n  //     $('#chart-clear-' + this.id).click(function () {\n  //         that.sendMessageToServerSide({ clear: true });\n  //     });\n\n  //     $('#chart-now-' + this.id).click(function () {\n  //         that.showNow();\n  //     });\n\n  //     $('#chart-all-' + this.id).click(function () {\n  //         that.showAll();\n  //     });\n\n  //     $('#chart-style-' + this.id).click(function () {\n  //         that.changeStyle();\n  //         that.sendMessageToServerSide({ style: that.settings['style'].value });\n  //     });\n\n  //     this.body = document.getElementById('chart-body-' + this.id);\n\n  //     this.options = {\n  //         height: this.CHART_HEIGHT,\n  //         style: 'bar',\n  //         drawPoints: false,\n  //         barChart: { width: 50, align: 'right', sideBySide: false }\n  //     };\n\n  //     this.dataset = new vis.DataSet();\n  //     this.graph2d = new (<any>vis).Graph2d(this.body, this.dataset, this.options);\n\n  //     this.updateChartStyle();\n\n  //     this.showNow();\n\n  //     if (this.properties['log'].length > 0) {\n  //         this.addChartData(this.properties['log']);\n  //     }\n\n  //     this.renderStep();\n\n  // }\n\n  // addChartData(data) {\n  //     this.dataset.add(data);\n\n  //     let max = this.settings['maxRecords'].value;\n  //     let unwanted = this.dataset.length - max;\n  //     if (unwanted > 0) {\n  //         let items = this.dataset.get();\n  //         for (let i = 0; i < unwanted; i++) {\n  //             this.dataset.remove(items[i]);\n  //         }\n  //     }\n  // }\n\n  // renderStep() {\n  //     // move the window (you can think of different strategies).\n  //     let now = vis.moment();\n  //     let range = this.graph2d.getWindow();\n  //     let interval = range.end - range.start;\n  //     let that = this;\n  //     switch (this.settings['autoscroll'].value) {\n  //         case 'continuous':\n  //             // continuously move the window\n  //             this.graph2d.setWindow(now - interval, now, { animation: false });\n  //             requestAnimationFrame(that.renderStep.bind(that));\n  //             break;\n\n  //         case 'discrete':\n  //             this.graph2d.setWindow(now - interval, now, { animation: false });\n  //             setTimeout(that.renderStep.bind(that), 1000);\n  //             break;\n\n  //         case 'none': // 'static'\n  //             // move the window 90% to the left when now is larger than the end of the window\n  //             // if (now > range.end) {\n  //             //     this.graph2d.setWindow(now - 0.1 * interval, now + 0.9 * interval);\n  //             // }\n  //             setTimeout(that.renderStep.bind(that), 1000);\n  //             break;\n  //     }\n  // }\n\n  //     //setOptions cause a bug when switching to dots!!!\n  //     this.graph2d.setOptions(this.options);\n  //     //thats why we need redraw:\n  //     //redrawChart(options);\n\n  // }\n\n  // redrawChart(options, ) {\n  //     let window = this.graph2d.getWindow();\n  //     options.start = window.start;\n  //     options.end = window.end;\n  //     this.graph2d.destroy();\n  //     this.graph2d = new (<any>vis).Graph2d(this.body, this.dataset, options);\n  // }\n\n  // onDashboardGetRequest(req, res) {\n  //     //render log page\n  //     if (req.params[0] == \"/log\") {\n  //         res.render('dashboard/nodes/chart/log', {\n  //             node: this,\n  //             records: this.properties['log'],\n  //             max_records: this.settings['maxRecords'].value\n  //         });\n  //     }\n\n  //     //render chart page\n  //     res.render('dashboard/nodes/chart/index', {\n  //         node: this,\n  //         range_start: req.query.start || Date.now() - 30000,\n  //         range_end: req.query.end || Date.now(),\n  //         autoscroll: req.query.autoscroll || this.settings['autoscroll'].value,\n  //         style: req.query.style || this.settings['style'].value,\n  //         max_records: this.settings['maxRecords'].value\n  //     });\n  // }\n\n  // onEditorApiGetRequest(req, res) {\n  //     //ajax get log\n  //     if (req.params[0] == \"/log\") {\n  //         res.json(this.properties['log']);\n  //     }\n  // }\n\n  // onEditorApiPostRequest(req, res) {\n  //     //ajax get log\n  //     if (req.params[0] == \"/style\") {\n  //         this.settings['style'].value = req.body.style;\n  //         this.sendMessageToDashboardSide({ style: req.body.style });\n  //         res.json(\"ok\");\n  //     }\n  //     if (req.params[0] == \"/clear\") {\n  //         this.isRecentlyActive = true;\n  //         this.properties['log'] = [];\n  //         this.sendMessageToDashboardSide({ clear: true });\n  //         res.json(\"ok\");\n  //     }\n  // }\n}\n\nContainer.registerNodeType('dashboard/chart', UiChartNode);\n","import { Colors, create } from 'logplease';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nconst log = create('node', { color: Colors.Magenta });\n\n// TODO: we don't need this all logic, background does this job\n// Show value inside the debug console\nexport class ConsoleNode extends Node {\n  MAX_MESS_PER_SEC = 11;\n  messagesPerSec = 0;\n  timer: any;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.debug.console.title;\n    this.description = NODE_INFO.debug.console.description;\n    this.addInput('input', Type.ANY);\n  }\n\n  onAdded() {\n    if (this.side == Side.server) this.updateMessPerSec();\n  }\n\n  updateMessPerSec() {\n    let that = this;\n    this.timer = setInterval(function() {\n      if (that.messagesPerSec > that.MAX_MESS_PER_SEC) {\n        let dropped = that.messagesPerSec - that.MAX_MESS_PER_SEC;\n        log.info(\n          'CONSOLE NODE [' +\n            that.container.id +\n            '/' +\n            that.id +\n            ']: dropped ' +\n            dropped +\n            ' messages (data rate limitation)',\n        );\n        that.sendMessageToEditorSide({ dropped: dropped });\n      }\n\n      that.messagesPerSec = 0;\n    }, 1000);\n  }\n\n  onInputUpdated() {\n    if (!this.inputs[0].link) return;\n\n    let val = this.getInputData(0);\n    this.isRecentlyActive = true;\n\n    this.messagesPerSec++;\n    if (this.messagesPerSec <= this.MAX_MESS_PER_SEC) {\n      log.info('CONSOLE NODE [' + this.container.id + '/' + this.id + ']: ' + val);\n      this.sendMessageToEditorSide({ value: val });\n    }\n  }\n\n  onRemoved() {\n    if (this.timer) clearInterval(this.timer);\n  }\n\n  onGetMessageToEditorSide(data) {\n    if (data.value != null) log.info('CONSOLE NODE [' + this.container.id + '/' + this.id + ']: ' + data.value);\n\n    if (data.dropped)\n      log.info(\n        'CONSOLE NODE [' +\n          this.container.id +\n          '/' +\n          this.id +\n          ']: dropped ' +\n          data.dropped +\n          ' messages (data rate limitation)',\n      );\n  }\n}\nContainer.registerNodeType('debug/console', ConsoleNode);\n","import { Container } from '../../container';\nimport { Node, NodeState } from '../../node';\nimport { NODE_INFO } from '../../node-info';\n\nclass NotesNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.debug.comments.title;\n    this.description = NODE_INFO.debug.comments.description;\n  }\n\n  onAdded() {\n    this.nodeColour();\n  }\n\n  nodeColour() {\n    this.setNodeState(NodeState.INFO);\n  }\n}\nContainer.registerNodeType('debug/comments', NotesNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\n// TODO: we don't need this all logic, background does this job\n// Watch a value in the editor\nexport class WatchNode extends Node {\n\n  UPDATE_INTERVAL: number\n  timer: any;\n  lastData: any;\n  dataUpdated = false;\n\n  constructor() {\n    super();\n\n    this.UPDATE_INTERVAL = 300;\n\n    this.title = NODE_INFO.debug.watch.title;\n    this.description = NODE_INFO.debug.watch.description;\n    this.addInput('input', Type.ANY);\n  }\n\n  onAdded() {\n    if (this.side == Side.server) this.startSending();\n  }\n\n  startSending() {\n    let that = this;\n    this.timer = setInterval(function() {\n      if (that.dataUpdated) {\n        that.dataUpdated = false;\n        that.sendMessageToEditorSide({ value: that.lastData });\n      }\n    }, this.UPDATE_INTERVAL);\n  }\n\n  onInputUpdated() {\n    this.lastData = this.getInputData(0);\n    this.dataUpdated = true;\n  }\n\n  onRemoved() {\n    if (this.timer) clearInterval(this.timer);\n  }\n\n  onGetMessageToEditorSide(data) {\n    this.lastData = data.value;\n    this.showValueOnInput(data.value);\n  }\n\n  showValueOnInput(value: any) {\n    // show the current value\n    this.inputs[0].label = value;\n    this.setDirtyCanvas(true, false);\n  }\n\n  updateInputsLabels() {\n    this.showValueOnInput(this.lastData);\n  }\n}\nContainer.registerNodeType('debug/watch', WatchNode);\n","import { Container, ContainerRegistry } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nexport class LinkErrorCheckNode extends Node {\n  lastTrigger;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.error[\"link-check\"].title;\n    this.description = NODE_INFO.error[\"link-check\"].description;\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('errorsCount', Type.NUMBER);\n    this.addOutput('errorsJSON', Type.STRING);\n    //this.addOutput('unresolvedErrors', Type.NUMBER);\n    //this.addOutput('progress', Type.STRING);\n\n    this.settings['allContainer'] = NodeSetting.create({\n      description: \"Search All Containers?\",\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['subContainers'] = NodeSetting.create({\n      description: \"Search Sub-Containers?\",\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n    this.setSettingsConfig({\n      groups: [],\n      conditions: {\n        subContainers: setting => {\n          return !setting['allContainer'].value;\n        },\n      },\n    });\n  \n  }\n  \n  init() {\n  }\n\n  onCreated() {\n  }\n\n  onAdded() {\n    this.properties['errors'] = {};\n    this.properties['errorsCount'] = 0;\n    this.lastTrigger = false;\n    this.setOutputData(0, 0);\n    this.setOutputData(1, '{}');\n    //this.setOutputData(2, null);\n    //this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    let trigger = this.getInputData(0);\n    if (trigger && !this.lastTrigger) {\n      //console.log('THIS', this)\n      //console.log('this.cid', this.cid)\n      //console.log('CONTAINERS', Container.containers)\n      this.properties['errors'] = {};\n      this.properties['errorsCount'] = 0;\n      const searchThisContainer = this.settings['allContainer'].value ? ContainerRegistry.instance().rootContainer() : ContainerRegistry.instance().get(this.cid);\n      const searchSubContainers = this.settings['allContainer'].value ? true : this.settings['subContainers'].value;\n      this.checkLinksForInputOutputData(searchThisContainer, searchSubContainers);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  onAfterSettingsChange() {\n  }\n\n  checkLinksForInputOutputData(searchContainer, includeSubContainers = false, isTopRecursion = true){\n    //console.log('SEARCH CONTAINER', searchContainer)\n    const currentContainer = searchContainer.id;\n    let containers = [];\n    let errors = 0;\n    const nodeList = searchContainer.getAllNodes();\n    const numNodes = nodeList.length;\n    //console.log('numNodes', numNodes)\n    //let currentNodeNum = 0;\n    for(let x = 0; x < numNodes; x++){\n      //currentNodeNum++;\n      //this.setOutputData(2, `${currentNodeNum}/${numNodes}`);\n      console.log(x, nodeList[x])\n      if(nodeList[x].isContainer){\n        //console.log('FOUND CONTAINER', nodeList[x]);\n        containers.push(nodeList[x].id)\n        continue;\n      } \n      //let node: Node = this.container._nodes[`${this.inputs[i].link.target_node_id}`];\n      const node: Node = searchContainer.getNodeById(Number(nodeList[x]['id']));\n      //console.log('node', x, node);\n      if (!node.hasOwnProperty('outputs')) continue;\n\n      let outputs = node.outputs;\n      let outputLinks = [];\n      for (const output in outputs){\n        if (outputs[output].links != null) {\n          console.log('links', output, outputs[output].links)\n          let links = []\n          outputs[output].links.forEach(link => {links.push(link)});\n          outputLinks.push([output, outputs[output].data, links]);\n        }\n      }\n      console.log('outputLinks', outputLinks);\n\n      outputLinks.forEach(linkInfo => {\n        console.log('linkInfo', linkInfo)\n        linkInfo[2].forEach(link => {\n          try {\n            let error = false;\n            const receiver: Node = searchContainer.getNodeById(link['target_node_id']);\n            console.log('receiver.inputs', receiver.inputs)\n            if (receiver.inputs[link['slot']].data != linkInfo[1]) {\n              console.log('LINK ERROR: output data does not match input data.');\n              error = true;\n            }\n            if (receiver.inputs[link['slot']].link.slot != linkInfo[0] &&\n            receiver.inputs[link['slot']].link.nodeId != nodeList[x]['id']) {\n              console.log('LINK ERROR: output link reference does not match input link reference.');\n              error = true;\n            }\n            if (error){\n              errors++;\n              console.log('ERROR');\n              if(!this.properties['errors'].hasOwnProperty(currentContainer)) this.properties['errors'][currentContainer] = {containerName: searchContainer.name, containerErrors: {}};\n              if(!this.properties['errors'][currentContainer]['containerErrors'].hasOwnProperty(nodeList[x]['id'])) this.properties['errors'][currentContainer]['containerErrors'][nodeList[x]['id']] = {nodeName: nodeList[x].name, nodeErrors: {}};\n              this.properties['errors'][currentContainer]['containerErrors'][nodeList[x]['id']]['nodeErrors'][linkInfo[0]] = {outputName: node.outputs[linkInfo[0]].name, outputNum: linkInfo[0], inputNode: receiver.id, inputNodeName: receiver.name, inputNodeSlot: receiver.inputs[link['slot']].link.slot};\n              // CALL onInputUpdated() ON RECEIVER NODE.  I DONT KNOW HOW TO DO IT.\n            }\n          }\n          catch {\n            errors++;\n            console.log('UNKNOWN ERROR');\n            if(!this.properties['errors'].hasOwnProperty(currentContainer)) this.properties['errors'][currentContainer] = {containerName: searchContainer.name, containerErrors: {}};\n            if(!this.properties['errors'][currentContainer]['containerErrors'].hasOwnProperty(nodeList[x]['id'])) this.properties['errors'][currentContainer]['containerErrors'][nodeList[x]['id']] = {nodeName: nodeList[x].name, nodeErrors: {}};\n          }\n        });\n      });\n    }\n\n    this.properties['errorsCount'] += errors;\n    if (this.properties['errors'].hasOwnProperty(currentContainer)) this.properties['errors'][currentContainer]['errorsCount'] = errors;\n    //console.log('containersList', containers);\n    if(includeSubContainers) {\n      containers.forEach(containerNum => {\n        //console.log('containerNum', typeof containerNum, containerNum);\n        this.checkLinksForInputOutputData(ContainerRegistry.instance().get(containerNum), includeSubContainers, false);\n      })\n    }\n    if(isTopRecursion) {\n      this.setOutputData(0, this.properties['errorsCount']);\n      this.properties['errors']['totalErrors'] = this.properties['errorsCount'];\n      this.setOutputData(1, JSON.stringify(this.properties['errors']));\n    }\n  }\n\n}\nContainer.registerNodeType('error/link-check', LinkErrorCheckNode);\n","import { Container, ContainerRegistry } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nexport class OutputErrorCheckNode extends Node {\n  lastTrigger;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.error[\"output-check\"].title;\n    this.description = NODE_INFO.error[\"output-check\"].description;\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('errorsCount', Type.NUMBER);\n    this.addOutput('errorsJSON', Type.STRING);\n    //this.addOutput('unresolvedErrors', Type.NUMBER);\n    //this.addOutput('progress', Type.STRING);\n\n    this.settings['allContainer'] = NodeSetting.create({\n      description: \"Search All Containers?\",\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['subContainers'] = NodeSetting.create({\n      description: \"Search Sub-Containers?\",\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n    this.setSettingsConfig({\n      groups: [],\n      conditions: {\n        subContainers: setting => {\n          return !setting['allContainer'].value;\n        },\n      },\n    });\n\n  }\n\n  init() {\n  }\n\n  onCreated() {\n  }\n\n  onAdded() {\n    this.properties['errors'] = {};\n    this.properties['errorsCount'] = 0;\n    this.lastTrigger = false;\n    this.setOutputData(0, 0);\n    this.setOutputData(1, '{}');\n    //this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    let trigger = this.getInputData(0);\n    if (trigger && !this.lastTrigger) {\n      //console.log('THIS', this)\n      //console.log('this.cid', this.cid)\n      //console.log('CONTAINERS', Container.containers)\n      this.properties['errors'] = {};\n      this.properties['errorsCount'] = 0;\n      const searchThisContainer = this.settings['allContainer'].value ? ContainerRegistry.instance().rootContainer() : ContainerRegistry.instance().get(this.cid);\n      const searchSubContainers = this.settings['allContainer'].value ? true : this.settings['subContainers'].value;\n      this.checkForOutputsWithNoData(searchThisContainer, searchSubContainers);\n\n    }\n    this.lastTrigger = trigger;\n  }\n\n  onAfterSettingsChange() {\n  }\n\n  checkForOutputsWithNoData(searchContainer, includeSubContainers = false, isTopRecursion = true){\n    //console.log('SEARCH CONTAINER', searchContainer)\n    const currentContainer = searchContainer.id;\n    let containers = [];\n    let errors = 0;\n    const nodeList = searchContainer.getAllNodes();\n    const numNodes = nodeList.length;\n    //console.log('numNodes', numNodes)\n    //let currentNodeNum = 0;\n    for(let x = 0; x < numNodes; x++){\n      //currentNodeNum++;\n      //this.setOutputData(2, `${currentNodeNum}/${numNodes}`);\n      //console.log(x, nodeList[x])\n      if(nodeList[x].isContainer){\n        //console.log('FOUND CONTAINER', nodeList[x]);\n        containers.push(nodeList[x].id)\n        continue;\n      } \n      //let node: Node = this.container._nodes[`${this.inputs[i].link.target_node_id}`];\n      const node: Node = searchContainer.getNodeById(Number(nodeList[x]['id']));\n      const outputs = node.outputs;\n      for (const output in outputs){\n        //console.log('output', output, outputs[output])\n        if(!outputs[output].hasOwnProperty('data') || outputs[output].data === undefined) {\n          errors++;\n          //console.log('ERROR');\n          if(!this.properties['errors'].hasOwnProperty(currentContainer)) this.properties['errors'][currentContainer] = {containerName: searchContainer.name, containerErrors: {}};\n          if(!this.properties['errors'][currentContainer]['containerErrors'].hasOwnProperty(nodeList[x]['id'])) this.properties['errors'][currentContainer]['containerErrors'][nodeList[x]['id']] = {nodeName: nodeList[x].name, nodeErrors: {}};\n          this.properties['errors'][currentContainer]['containerErrors'][nodeList[x]['id']]['nodeErrors'][output] = {outputName: outputs[output].name, outputNum: output};\n        }\n      }\n    }\n    this.properties['errorsCount'] += errors;\n    if (this.properties['errors'].hasOwnProperty(currentContainer)) this.properties['errors'][currentContainer]['errorsCount'] = errors;\n    //console.log('containersList', containers);\n    if(includeSubContainers) {\n      containers.forEach(containerNum => {\n        //console.log('containerNum', typeof containerNum, containerNum);\n        this.checkForOutputsWithNoData(ContainerRegistry.instance().get(containerNum), includeSubContainers, false);\n      })\n    }\n    if(isTopRecursion) {\n      this.setOutputData(0, this.properties['errorsCount']);\n      this.properties['errors']['totalErrors'] = this.properties['errorsCount'];\n      this.setOutputData(1, JSON.stringify(this.properties['errors']));\n    }\n  }\n\n}\nContainer.registerNodeType('error/output-check', OutputErrorCheckNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersOnlyTrueNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.filter[\"only-true\"].title;\n    this.description = NODE_INFO.filter[\"only-true\"].description;\n\n    this.addInput('input', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n  }\n\n  onAdded(){\n    this.setOutputData(0, null);\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    if (this.getInputData(0) === true) this.setOutputData(0, true);\n  }\n}\nContainer.registerNodeType('filter/only-true', FiltersOnlyTrueNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersOnlyFalseNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.filter[\"only-false\"].title;\n    this.description = NODE_INFO.filter[\"only-false\"].description;\n\n    this.addInput('input', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n  }\n\n  onAdded(){\n    this.setOutputData(0, null);\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    if (this.getInputData(0) === false) this.setOutputData(0, false);\n  }\n}\nContainer.registerNodeType('filter/only-false', FiltersOnlyFalseNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersOnlyFromRangeNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.filter[\"only-between\"].title;\n    this.description = NODE_INFO.filter[\"only-between\"].description;\n\n    this.addInput('value', Type.NUMBER);\n    this.addInputWithSettings('min', Type.NUMBER, 0, 'min', false);\n    this.addInputWithSettings('max', Type.NUMBER, 10, 'max', false);\n    this.addOutput('value', Type.NUMBER);\n    this.properties['value'];\n  }\n\n  onAdded(){\n    this.setOutputData(0, this.properties['value'] || null);\n    this.onInputUpdated();\n  }\n\n  onAfterSettingsChange(){\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const val = this.getInputData(0);\n    const min = this.getInputData(1);\n    const max = this.getInputData(2);\n\n    if (val == null || min == null || max == null) {\n      this.setOutputData(0, null);\n    } else if (val >= min && val <= max) {\n      this.setOutputData(0, val);\n      this.properties['value'] = val;\n      this.persistProperties(false, true);\n    }\n  }\n}\nContainer.registerNodeType('filter/only-between', FiltersOnlyFromRangeNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersOnlyGreaterNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.filter[\"only-greater\"].title;\n    this.description = NODE_INFO.filter[\"only-greater\"].description;\n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('threshold', Type.NUMBER, 0, 'threshold', false);\n    this.addOutput('output', Type.NUMBER);\n    this.properties['value'];\n  }\n\n  onAdded(){\n    this.setOutputData(0, this.properties['value'] || null);\n    this.onInputUpdated();\n  }\n\n  onAfterSettingsChange(){\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    let threshold = this.getInputData(1);\n    if (val == null || threshold == null) {\n      this.setOutputData(0, null);\n    } else if (val > threshold) {\n      this.setOutputData(0, val);\n      this.properties['value'] = val;\n      this.persistProperties(false, true);\n    }\n  }\n}\nContainer.registerNodeType('filter/only-greater', FiltersOnlyGreaterNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersOnlyLowerNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.filter[\"only-lower\"].title;\n    this.description = NODE_INFO.filter[\"only-lower\"].description;\n\n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('threshold', Type.NUMBER, 0, 'threshold', false);\n    this.addOutput('output', Type.NUMBER);\n    this.properties['value'];\n  }\n\n  onAdded(){\n    this.setOutputData(0, this.properties['value'] || null);\n    this.onInputUpdated();\n  }\n\n  onAfterSettingsChange(){\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    let threshold = this.getInputData(1);\n    if (val == null || threshold == null) {\n      this.setOutputData(0, null);\n    } else if (val < threshold) {\n      this.setOutputData(0, val);\n      this.properties['value'] = val;\n      this.persistProperties(false, true);\n    }\n  }\n}\nContainer.registerNodeType('filter/only-lower', FiltersOnlyLowerNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersOnlyEqualNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.filter[\"only-equal\"].title;\n    this.description = NODE_INFO.filter[\"only-equal\"].description;\n\n    this.addInput('input', Type.ANY);\n    this.addInputWithSettings('match', Type.ANY, '', 'Match Value');\n    this.addOutput('output', Type.ANY);\n    this.properties['value'];\n  }\n\n  onAdded(){\n    this.setOutputData(0, this.properties['value'] || null);\n    this.onInputUpdated();\n  }\n\n  onAfterSettingsChange(){\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    val = (val || '').toString(); // making string null i.e `''` and other `null` same\n    if (val == 'false') val = false;\n    else if (val == 'true') val = true;\n\n    let match = (this.getInputData(1) || '').toString();\n    if (match == 'false') match = false;\n    else if (match == 'true') match = true;\n\n    if (val == match) {\n      this.setOutputData(0, val);\n      this.properties['value'] = val;\n      this.persistProperties(false, true);\n    }\n  }\n}\nContainer.registerNodeType('filter/only-equal', FiltersOnlyEqualNode);\n","import { isNotNull } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersPreventNullNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.filter[\"prevent-null\"].title;\n    this.description = NODE_INFO.filter[\"prevent-null\"].description;\n\n    this.addInput('input');\n    this.addOutput('output');\n    this.properties['value'];\n  }\n\n  onAdded(){\n    this.setOutputData(0, this.properties['value']);\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    if (isNotNull(val) && val !== '') {\n      this.setOutputData(0, val);\n      this.properties['value'] = val;\n      this.persistProperties(false, true);\n    }\n  }\n}\nContainer.registerNodeType('filter/prevent-null', FiltersPreventNullNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersPreventEqualNode extends Node {\n  constructor() {\n    super();\n    \n    this.title = NODE_INFO.filter[\"prevent-equal\"].title;\n    this.description = NODE_INFO.filter[\"prevent-equal\"].description;\n\n    this.addInput('input', Type.ANY);\n    this.addInputWithSettings('match', Type.ANY, null, 'Match Value');\n    this.addOutput('output', Type.ANY);\n    this.properties['value'];\n  }\n\n  onAdded(){\n    this.setOutputData(0, this.properties['value'] || null);\n    this.onInputUpdated();\n  }\n\n  onAfterSettingsChange(){\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    val = (val || '').toString(); // making string null i.e `''` and other `null` same\n\n    let match = (this.getInputData(1) || '').toString();\n    if (match == 'false') match = false;\n    else if (match == 'true') match = true;\n\n    if (val != match) {\n      this.setOutputData(0, val);\n      this.properties['value'] = val;\n      this.persistProperties(false, true);\n    }\n  }\n}\nContainer.registerNodeType('filter/prevent-equal', FiltersPreventEqualNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\n\nclass FiltersPreventDuplicatesNode extends Node {\n  lastVal: any;\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.filter[\"prevent-duplicates\"].title;\n    this.description = NODE_INFO.filter[\"prevent-duplicates\"].description;\n\n    this.addInput('input');\n    this.addOutput('output');\n    this.properties['value'];\n  }\n\n  onAdded(){\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val === '') val = null;\n\n    if (this.lastVal == val) return;\n\n    this.lastVal = val;\n    this.setOutputData(0, val, true);\n    this.properties['value'] = val;\n    this.persistProperties(false, true);\n  }\n}\nContainer.registerNodeType('filter/prevent-duplicates', FiltersPreventDuplicatesNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nconst moment = require('moment-timezone');\n\nclass AnyDataStoreNode extends Node {\n  constructor() {\n    super();\n \n    this.title = NODE_INFO.history[\"data-store\"].title;\n    this.description = NODE_INFO.history[\"data-store\"].description;\n   \n    this.addInput('input', Type.ANY);\n    this.addInput('clear', Type.BOOLEAN);\n    this.addOutput('output', Type.ANY);\n    this.addOutput('storedCount', Type.NUMBER);\n\n    this.settings['time-conversation-enable'] = NodeSetting.create({\n      description: 'Timestamp in system timezone?',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['storage-limit'] = NodeSetting.create({\n      description: 'Storage Limit (Max 50)',\n      value: 25,\n      type: SettingType.NUMBER,\n    });\n    this.settings['date-iso'] = NodeSetting.create({\n      description: 'Typestamp Format',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'YYYY-MM-DD HH:mm:ss TZ (ISO8601)' },\n          { value: 1, text: 'YYYY-MM-DD HH:mm:ss' },\n          { value: 2, text: 'MM-DD-YYYY HH:mm:ss' },\n          { value: 3, text: 'DD-MM-YYYY HH:mm:ss' },\n          { value: 4, text: 'DAY, Month DD, YYYY HH:MM AM/PM' },\n          { value: 5, text: 'Month DD, YYYY HH:MM AM/PM' },\n          { value: 6, text: 'Unix timestamp in Milliseconds' },\n        ],\n      },\n      value: 0,\n    });\n    this.settings['outputFormat'] = NodeSetting.create({\n      description: 'Output Format',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'Array', text: 'Array' },\n          { value: 'CSV', text: 'CSV' },\n          { value: 'JSON', text: 'JSON' },\n        ],\n      },\n      value: 'Array',\n    });\n    this.settings['pointName'] = NodeSetting.create({\n      description: 'Point Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n    this.settings['minuteRoundValue'] = NodeSetting.create({\n      description: 'Round minutes up in increments of',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    //this.settings['inputs'] = NodeSetting.create({ description: 'Tag Count', value: 0, type: SettingType.NUMBER });\n    this.setSettingsConfig({\n      conditions: {\n        pointName: setting => {\n          return setting['outputFormat'].value != 'Array';\n        },\n      },\n    });\n  }\n\n  onCreated() {\n    this.properties['historyLog'] = [];\n  }\n\n  onAdded() {\n    this.setOutputData(0, this.properties['historyLog']);\n    this.setOutputData(1, this.properties['historyLog'] ? this.properties['historyLog'].length : 0);\n  }\n\n  nearestFutureMinutes(interval, someMoment) {\n    const roundedMinutes = Math.ceil(someMoment.minute() / interval) * interval;\n    return someMoment\n      .clone()\n      .minute(roundedMinutes)\n      .second(0);\n  }\n\n  formatOutputs() {\n    // Format Output based on settings\n    // System Timezone or UTC based on settings\n    const timezone = this.settings['time-conversation-enable'].value\n      ? Intl.DateTimeFormat().resolvedOptions().timeZone\n      : 'Etc/UTC';\n    let dateTz = null;\n    const pointName = this.settings['pointName'].value;\n    let timeFormatedArray = this.properties['historyLog'].map(entry => {\n      return entry;\n    });\n    timeFormatedArray = timeFormatedArray.reverse().map(entry => {\n      switch (this.settings['date-iso'].value) {\n        case 0:\n          dateTz = moment(entry.timestamp)\n            .tz(timezone)\n            .format();\n          break;\n        case 1:\n          dateTz = moment(entry.timestamp)\n            .tz(timezone)\n            .format('YYYY-MM-DD HH:mm:ss');\n          break;\n        case 2:\n          dateTz = moment(entry.timestamp)\n            .tz(timezone)\n            .format('MM-DD-YYYY HH:mm:ss');\n          break;\n        case 3:\n          dateTz = moment(entry.timestamp)\n            .tz(timezone)\n            .format('DD-MM-YYYY HH:mm:ss');\n          break;\n        case 4:\n          dateTz = moment(entry.timestamp)\n            .tz(timezone)\n            .format('LLLL');\n          break;\n        case 5:\n          dateTz = moment(entry.timestamp)\n            .tz(timezone)\n            .format('LLL');\n          break;\n        case 6:\n          dateTz = moment(entry.timestamp)\n            .tz(timezone)\n            .valueOf();\n          break;\n        default:\n          dateTz = moment(entry.timestamp)\n            .tz(timezone)\n            .format();\n      }\n      return {\n        payload: entry.payload,\n        timestamp: dateTz,\n      };\n    });\n    switch (this.settings['outputFormat'].value) {\n      case 'Array':\n        return timeFormatedArray;\n      case 'CSV':\n        let csvString = `name, timestamp, payload\\n`;\n        timeFormatedArray.forEach(log => {\n          csvString += `${pointName}, ${log.timestamp}, ${log.payload} \\n`;\n        });\n        return csvString;\n      case 'JSON':\n        return JSON.stringify({ [pointName]: timeFormatedArray });\n    }\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return; // only execute on server\n    if (this.getInputData(1) && this.inputs[1].updated) {\n      this.properties['historyLog'] = []; // clear data if required\n      this.setOutputData(0, this.properties['historyLog'].reverse());\n      this.setOutputData(1, this.properties['historyLog'].length);\n    }\n    if (this.getInputData(0) == null || !this.inputs[0].updated) return;\n    // cap the amount of data that can be stored\n    const storageLimit = Utils.clamp(this.settings['storage-limit'].value, 0, 50);\n    // round the time to the nearest min. For example 15min. 1:00, 1:15\n    const minuteRound = Utils.clamp(this.settings['minuteRoundValue'].value, 0, 60);\n    const now = minuteRound ? TimeUtils.nearestFutureMinutes(minuteRound, moment()) : moment();\n\n    // object data\n    let msg = {\n      payload: this.getInputData(0),\n      timestamp: now._d,\n    };\n    // build an object\n    this.properties['historyLog'].push(msg);\n    while (this.properties['historyLog'].length > storageLimit) {\n      this.properties['historyLog'].shift();\n    }\n\n    this.persistProperties(true, true);\n\n    // Format Output based on settings\n    const newObj = this.formatOutputs() || [];\n    this.setOutputData(0, newObj);\n    this.setOutputData(1, this.properties['historyLog'].length);\n  }\n\n  onAfterSettingsChange() {\n    this.outputs[0].name = `output (${this.settings['outputFormat'].value})`;\n    this.broadcastOutputsToClients();\n    const newObj = this.formatOutputs() || [];\n    this.setOutputData(0, newObj);\n    this.setOutputData(1, this.properties['historyLog'].length);\n  }\n}\nContainer.registerNodeType('history/data-store', AnyDataStoreNode);\n","import config from '../../../config';\nimport { isNull } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nlet moment = require('moment-timezone');\nconst Influx = require('influx');\n\nclass InfluxDBNode extends Node {\n  inName: number = 0;\n  inJsonInput: number = 1;\n  outError: number = 0;\n  outLastExport: number = 1;\n  outMsg: number = 2;\n  client;\n  constructor() {\n    super();\n    this.title = NODE_INFO.history[\"influx-db\"].title;\n    this.description = NODE_INFO.history[\"influx-db\"].description;\n    this.addInput('[name]', Type.STRING);\n    this.addInput('json-input', Type.JSON);\n    this.addOutput('error', Type.BOOLEAN);\n    this.addOutput('outLastExport', Type.STRING);\n    this.addOutput('outMsg', Type.STRING);\n    this.settings['enable'] = NodeSetting.create({ description: 'Enable', value: false, type: SettingType.BOOLEAN });\n    this.settings['useEnv'] = NodeSetting.create({ description: 'Dont use env settings', value: false, type: SettingType.BOOLEAN });\n    this.settings['host'] = NodeSetting.create({ description: 'Host', value: '0.0.0.0', type: SettingType.STRING });\n    this.settings['port'] = NodeSetting.create({ description: 'Port', value: '8086', type: SettingType.STRING });\n    this.settings['authentication'] = NodeSetting.create({\n      description: 'Use Authentication',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['user'] = NodeSetting.create({ description: 'Username', value: '', type: SettingType.STRING });\n    this.settings['password'] = NodeSetting.create({ description: 'Password', value: '', type: SettingType.STRING });\n    this.settings['databaseName'] = NodeSetting.create({\n      description: 'Database Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n    this.setSettingsConfig({\n      groups: [\n        { host: { weight: 3 }, port: { weight: 1 } },\n        { user: {}, password: {} },\n        { period: { weight: 2 }, periodUnits: {} },\n      ],\n      conditions: {\n        host: setting => {\n          return !!setting['useEnv'].value;\n        },\n        port: setting => {\n          return !!setting['useEnv'].value;\n        },\n        authentication: setting => {\n          return !!setting['useEnv'].value;\n        },\n        databaseName: setting => {\n          return !!setting['useEnv'].value;\n        },\n        user: setting => {\n          return !!setting['authentication'].value;\n        },\n        password: setting => {\n          return !!setting['authentication'].value;\n        },\n      },\n    });\n  }\n  onAdded() {\n    this.createClient();\n  }\n\n  createClient() {\n    let { protocol, host, port, databaseName, username, password } = config.influxDb;\n    if (this.settings['useEnv'].value) {\n      // dont use env\n      host = this.settings['host'].value;\n      port = this.settings['port'].value;\n      this.client = new Influx.InfluxDB({\n        host: host || 'localhost',\n        port: +(port || 8086),\n        protocol: 'http',\n        database: this.settings['databaseName'].value || 'undefined',\n        username: this.settings['authentication'].value ? this.settings['user'].value : '',\n        password: this.settings['authentication'].value ? this.settings['password'].value : '',\n      });\n    } else {\n      // use use env\n      this.client = new Influx.InfluxDB({\n        host,\n        port: +port,\n        protocol: protocol === 'https' ? 'https' : 'http',\n        database: databaseName,\n        username,\n        password,\n      });\n    }\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return; // only execute on server\n    if (!this.client) return;\n    if (!this.settings['enable'].value) {\n      this.setOutputData(this.outMsg, `INFLUX-DB NODE: not not enabled`, true);\n      return;\n    }\n\n    // update node name\n    if (this.inputs[0].updated) {\n      let nodeName = this.getInputData(this.inName);\n      if (!isNull(nodeName)) {\n        this.name = nodeName;\n        this.broadcastNameToClients();\n      }\n    }\n\n    let input = this.getInputData(this.inJsonInput);\n    if (isNull(input)) return;\n    const hasMeasurement = input.hasOwnProperty('measurement');\n    const hasMeasurementTags = input.hasOwnProperty('tags');\n    const hasMeasurementFields = input.hasOwnProperty('fields');\n\n    if (isNull(input.tags)) {\n      this.setOutputData(this.outError, false, true);\n      this.setOutputData(this.outMsg, `!tags! is empty,`, true);\n      return;\n    }\n    if (isNull(input.measurement)) {\n      this.setOutputData(this.outError, false, true);\n      this.setOutputData(this.outMsg, `!measurement! is empty,`, true);\n      return;\n    }\n    if (isNull(input.fields)) {\n      this.setOutputData(this.outError, false, true);\n      this.setOutputData(this.outMsg, `!fields! is empty,`, true);\n      return;\n    }\n    if (hasMeasurement && hasMeasurementTags && hasMeasurementFields) {\n      this.setOutputData(this.outError, false, true);\n      this.setOutputData(this.outLastExport, moment().format());\n      this.setOutputData(this.outMsg, `influx write to DB`, true);\n\n      Object.keys(input.tags).forEach(key => {\n        if (!input.tags[key]) {\n          delete input.tags[key];\n        }\n      });\n      this.client.writePoints([input]).catch(err => {\n        this.debugInfo(`INFLUX-DB NODE: error on influx write, ${err}`);\n        this.setOutputData(this.outError, true, true);\n        this.setOutputData(this.outMsg, `error on influx write, ${err}`, true);\n      });\n    } else {\n      this.debugInfo(`INFLUX-DB NODE: input.hasOwnProperty is missing`);\n      this.setOutputData(this.outError, true, true);\n      this.setOutputData(this.outMsg, `input.hasOwnProperty is missing`, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return; // only execute on server\n    this.createClient();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('history/influx-db', InfluxDBNode);\n","import config from '../../../config';\nimport { isNull } from '../../../utils/helper';\nimport { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport PlatformDataSource from '../../../database/datasource/PlatformDataSource';\n\nlet moment = require('moment-timezone');\nconst {InfluxDB, Point, HttpError} = require('@influxdata/influxdb-client');\nconst {SetupAPI} = require('@influxdata/influxdb-client-apis')\n\nclass InfluxDB2Node extends Node {\n  inEnable: number = 0;\n  inJsonInput: number = 1;\n  outError: number = 0;\n  outLastExport: number = 1;\n  outMsg: number = 2;\n  client;\n  lastJSON;\n  constructor() {\n    super();\n    this.title = NODE_INFO.history[\"influx-db-2\"].title;\n    this.description = NODE_INFO.history[\"influx-db-2\"].description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, false, 'Enable');\n    this.addInput('json-input', Type.JSON);\n    this.addOutput('error', Type.BOOLEAN);\n    this.addOutput('outLastExport', Type.STRING);\n    this.addOutput('outMsg', Type.STRING);\n    this.settings['useDefaultTags'] = NodeSetting.create({ description: 'useDefaultTags', value: false, type: SettingType.BOOLEAN });\n    this.settings['dontUseEnv'] = NodeSetting.create({ description: 'Dont use env settings', value: false, type: SettingType.BOOLEAN });\n    this.settings['url'] = NodeSetting.create({ description: 'URL', value: '', type: SettingType.STRING });\n    this.settings['token'] = NodeSetting.create({ description: 'Token', value: '', type: SettingType.STRING });\n    this.settings['org'] = NodeSetting.create({ description: 'Org', value: '', type: SettingType.STRING });\n    this.settings['bucket'] = NodeSetting.create({ description: 'Bucket', value: '', type: SettingType.STRING });\n\n    this.setSettingsConfig({\n      groups: [\n        //{ host: { weight: 3 }, port: { weight: 1 } },\n        //{ user: {}, password: {} },\n        { period: { weight: 2 }, periodUnits: {} },\n      ],\n      conditions: {\n        url: setting => {\n          return !!setting['dontUseEnv'].value;\n        },\n        token: setting => {\n          return !!setting['dontUseEnv'].value;\n        },\n        org: setting => {\n          return !!setting['dontUseEnv'].value;\n        },\n        bucket: setting => {\n          return !!setting['dontUseEnv'].value;\n        },\n      },\n    });\n  }\n  \n  onAdded() {\n  }\n\n  createClient() {\n    let {url, token, org, bucket} = config.influxDb2;\n    if (this.settings['dontUseEnv'].value) {\n      // dont use env\n      url = this.settings['url'].value;\n      token = this.settings['token'].value;\n      org = this.settings['org'].value;\n      bucket = this.settings['bucket'].value;\n    } \n    this.client = new InfluxDB({url: url, token: token}).getWriteApi(org, bucket);\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return; // only execute on server\n    if (!this.settings['enable'].value) {\n      this.setOutputData(this.outMsg, `INFLUX-DB-2 NODE: not enabled`, true);\n      return;\n    }\n\n    // update node name - UPDATE TITLE FROM JSON INSTEAD\n    /*\n    if (this.inputs[0].updated) {\n      let nodeName = this.getInputData(this.inName);\n      if (!isNull(nodeName)) {\n        this.name = nodeName;\n        this.broadcastNameToClients();\n      }\n    }\n    */\n\n    let input = this.getInputData(this.inJsonInput);\n    console.log('INFLUX-DB-2: input = ', input)\n\n    if (isNull(input)) return;\n    const hasMeasurement = input.hasOwnProperty('measurement');\n    const hasMeasurementTags = input.hasOwnProperty('tags');\n    const hasMeasurementFields = input.hasOwnProperty('fields');\n\n    if (isNull(input.tags)) {\n      this.setOutputData(this.outError, false, true);\n      this.setOutputData(this.outMsg, `!tags! is empty,`, true);\n      return;\n    }\n    if (isNull(input.measurement)) {\n      this.setOutputData(this.outError, false, true);\n      this.setOutputData(this.outMsg, `!measurement! is empty,`, true);\n      return;\n    }\n    if (isNull(input.fields)) {\n      this.setOutputData(this.outError, false, true);\n      this.setOutputData(this.outMsg, `!fields! is empty,`, true);\n      return;\n    }\n    if (hasMeasurement && hasMeasurementTags && hasMeasurementFields) {\n      this.setOutputData(this.outError, false, true);\n      this.setOutputData(this.outLastExport, moment().format());\n      this.setOutputData(this.outMsg, `influx write to DB`, true);\n\n      Object.keys(input.tags).forEach(key => {\n        if (!input.tags[key]) {\n          delete input.tags[key];\n        }\n      });\n\n      PlatformDataSource.getPlatform().then(e => {\n        var platformInfo = e;\n        this.setOutputData(2, e)\n      }).catch(err => {\n        this.debugInfo(`INFLUXDB-2 NODE: try/catch  getPlatform info, ${err}`);\n      })\n\n      this.createClient();\n\n      if (this.settings['useDefaultTags'].value) this.client.useDefaultTags({location: 'test'})\n\n      const point = new Point(input.measurement)\n      point.timestamp(new Date());\n      for (const tag in input.tags) point.tag(tag, input.tags[tag]);\n      for (const field in input.fields) {\n        switch (typeof input.fields[field]){\n          case 'number':\n            console.log('its a number')\n            point.floatField(field, input.fields[field])\n            break;\n          case 'string':\n            console.log('its a string')\n            point.stringField(field, input.fields[field])\n            break;\n          case 'boolean':\n            console.log('its a boolean')\n            point.booleanField(field, input.fields[field])\n            break;\n          default:\n            console.log('I dont know its type')\n            point.floatField(field, input.fields[field])\n            break;\n        }\n      }\n      this.client.writePoint(point);\n      console.log(`INFLUXDB-2: ${point.toLineProtocol(this.client)}`);\n\n      this.client.close()\n        .then(() => {\n          console.log('SUCCESS')\n        })\n        .catch(e => {\n          console.error(e)\n          if (e instanceof HttpError && e.statusCode === 401) {\n            console.log('INFLUXDB-2: Run ./onboarding.js to setup a new InfluxDB database.')\n          }\n          console.log('\\n INFLUXDB-2:  Finished ERROR')\n          this.setOutputData(this.outError, true, true);\n          this.setOutputData(this.outMsg, `error on influx write, ${e}`, true);\n        })\n    } else {\n      this.debugInfo(`INFLUX-DB NODE: input.hasOwnProperty is missing`);\n      this.setOutputData(this.outError, true, true);\n      this.setOutputData(this.outMsg, `input.hasOwnProperty is missing`, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return; // only execute on server\n    /*\n    if (this.getInputData(this.inEnable)) this.createClient();\n    else {\n      if (this.client) this.client.dispose()\n        .catch(e => {\n          console.log(`INFLUX-DB-2:`, e)\n        })\n      this.client = null;\n      this.setOutputData(this.outMsg, `INFLUX-DB-2 NODE: not enabled`, true);\n      return;\n    }\n    */\n   this.onInputUpdated();\n  }\n}\nNodeTypeRegistry.registerNodeType('history/influx-db-2', InfluxDB2Node);\n\n/*\ninfluxDb2    : {\n    protocol    : env?.INFLUX_DB_2_PROTOCOL ?? 'http',\n    url         : env?.INFLUX_DB_2_URL ?? '',\n    token       : env?.INFLUX_DB_2_TOKEN ?? '',\n    bucket      : env?.INFLUX_DB_2_BUCKET ?? '',\n    org         : env?.INFLUX_DB_2_ORG ?? '',\n    username    : env?.INFLUX_DB_2_USERNAME ?? '',\n    password    : env?.INFLUX_DB_2_PASSWORD ?? '',\n  },\n*/","module.exports = require(\"@influxdata/influxdb-client\");","module.exports = require(\"@influxdata/influxdb-client-apis\");","import { Container } from '../../container';\nimport { Type } from '../../node-io';\nimport HistoryBase from './HistoryBase';\nimport { NODE_INFO } from '../../node-info';\n\nclass HistoryNode extends HistoryBase {\n  constructor() {\n    super();\n   \n    this.title = NODE_INFO.history.history.title;\n    this.description = NODE_INFO.history.history.description;\n    \n    this.addInput('input', Type.ANY);\n    this.addHistorySettingsConfig();\n  }\n}\nContainer.registerNodeType('history/history', HistoryNode);\n","import { isNull } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\n\nexport class PointPersistence extends Node {\n  lastInterval = 1000;\n  runState: boolean = true;\n  timeoutFunc;\n  lastTrigger;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.history.persistence.title;\n    this.description = NODE_INFO.history.persistence.description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable value resend timer');\n    this.addInput('input', Type.ANY);\n    this.addInputWithSettings('interval', Type.NUMBER, 30, 'Interval');\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('output', Type.ANY);\n    this.properties['output'] = null;\n    this.settings['preventDuplicates'] = NodeSetting.create({\n      description: 'Prevent Duplicates)',\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n  }\n\n  onAdded() {\n    clearInterval(this.timeoutFunc);\n    this.inputs[2]['name'] = `[interval] (${this.settings['time'].value})`;\n    const enable = this.getInputData(0);\n    if (!enable) {\n      this.setOutputData(0, this.properties['output']);\n      this.runState = false;\n      return;\n    }\n    let interval = this.getInputData(2);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    this.timeoutFunc = setInterval(() => {\n      const message = this.getInputData(1);\n      this.setOutputData(0, this.properties['output']);\n    }, interval);\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    // trigger\n    let trigger = this.getInputData(3);\n    const message = this.getInputData(1); //data input\n    if (message !== undefined && message !== null && message.length) {\n      this.properties['output'] = message;\n      this.setOutputData(0, this.properties['output']);\n    }\n\n    if (trigger) {\n      if (\n        this.properties['output'] !== undefined &&\n        this.properties['output'] !== null &&\n        this.properties['output'].length\n      ) {\n        this.setOutputData(0, this.properties['output']);\n      }\n    }\n\n    //pass data on input updated\n    if (this.inputs[1].updated) {\n      const preventDuplicates = this.settings['preventDuplicates'].value\n      if(!isNull(message)){\n        this.properties['output'] = message;\n        this.setOutputData(0, this.properties['output'], preventDuplicates);\n      }\n    }\n\n    // interval\n    const enable = this.getInputData(0);\n    if (!enable && this.runState) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, this.properties['output']);\n      this.runState = false;\n      return;\n    } else if (!enable && !this.runState) {\n      this.setOutputData(0, this.properties['output']);\n      this.runState = false;\n      return;\n    } else if (enable) {\n      let interval = this.getInputData(2);\n      interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n      if (this.runState) {\n        if (interval != this.lastInterval) {\n          this.lastInterval = interval;\n          clearInterval(this.timeoutFunc);\n          this.timeoutFunc = setInterval(() => {\n            this.setOutputData(0, this.properties['output']);\n          }, interval);\n        }\n        return;\n      } else if (!this.runState) {\n        this.runState = true;\n        this.timeoutFunc = setInterval(() => {\n          this.setOutputData(0, this.properties['output']);\n        }, interval);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[2]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('history/persistence', PointPersistence);\n","import * as fs from 'fs';\nimport config from '../../../config';\nimport PlatformDataSource from '../../../database/datasource/PlatformDataSource';\nimport { isJSON, isNull } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport tagRefs from '../../utils/points/point-ref-utils';\n\nenum TOPIC_OPTIONS {\n  NA = 'na',\n  UPPERCASE_SLASH = 'Upper case and /',\n  LOWERCASE_SLASH = 'Lower case and /',\n  UPPERCASE_UNDERSCORE = 'Upper case and _',\n  LOWERCASE_UNDERSCORE = 'Lower case and _',\n}\n\nclass PointTagNode extends Node {\n  //in nums\n  inputOneNum = 0;\n  inputTwoNum = 1;\n  inputThreeNum = 2;\n  pointFeedbackNum = 3;\n  inputJsonNum = 4;\n  pointIdNumIn = 5;\n  equipRefNumIn = 6;\n  measurementNumIn = 7;\n  manualTagsNum = 8;\n  //out nums\n  pointValNumOut = 0;\n  nameNumOut = 1;\n  topicNumOut = 2;\n  jsonNumOut = 3;\n  errorNumOut = 4;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.history[\"point-tags\"].title;\n    this.description = NODE_INFO.history[\"point-tags\"].description;\n    this.settings['point_group'] = NodeSetting.create({\n      description: 'Point Value',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['preventDuplicates'] = NodeSetting.create({\n      description: 'Prevent Duplicates)',\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n    this.addInputWithSettings('in 1', Type.NUMBER, null, 'in 1', false);\n    this.addInputWithSettings('in 2', Type.NUMBER, null, 'in 2', false);\n    this.addInputWithSettings('in 3', Type.NUMBER, null, 'in 3', false);\n    this.addInputWithSettings('point-feedback', Type.NUMBER, null, 'point-feedback', false);\n    this.addInput('json-input', Type.STRING);\n    this.settings['point_group'] = NodeSetting.create({\n      description: 'Point/Equip Settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.addInputWithSettings('pointId', Type.STRING, 'point id', 'point id/name', false);\n    this.addInputWithSettings('equipRef', Type.STRING, 'FCU123', 'Equipment Reference', false);\n    this.addInputWithSettings('measurement', Type.STRING, 'points', 'InfluxDB table name', false);\n    this.settings['topicOptions'] = NodeSetting.create({\n      description: 'Enter manual (optional)',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.addOutput('output', Type.NUMBER);\n    this.addOutput('point-name', Type.STRING);\n    this.addOutput('point-topic', Type.STRING);\n    this.addOutput('output-json', Type.JSON);\n    this.addOutput('output-error', Type.ANY);\n    this.settings['tags_group'] = NodeSetting.create({\n      description: 'Auto generated  Tag Settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['equipType'] = NodeSetting.create({\n      description: 'Equipment Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: tagRefs.tagCategory,\n      },\n    });\n    this.settings['tags'] = NodeSetting.create({\n      description: 'Point Type',\n      value: null,\n      type: SettingType.DROPDOWN,\n    });\n    this.settings['tags_values'] = NodeSetting.create({\n      description: 'tags values',\n      value: null,\n      type: SettingType.READONLY,\n    });\n\n    this.settings['tags_group_manual'] = NodeSetting.create({\n      description: 'Manual Tag Settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['manualSettings'] = NodeSetting.create({\n      description: 'Enter manual (optional)',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['manualEquip'] = NodeSetting.create({\n      description: 'User equip (optional)',\n      value: 'CHILLER',\n      type: SettingType.STRING,\n    });\n    this.settings['manualSensor'] = NodeSetting.create({\n      description: 'User sensor (optional)',\n      value: 'Supply Air Zone Sensor',\n      type: SettingType.STRING,\n    });\n    this.addInputWithSettings('manualTags', Type.JSON, '[\"sensor\", \"ahu\"]', 'manual Tags', false);\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange();\n    const file = `${config.dataDir}/platform.db`;\n    this.onWatchChange(file)\n  }\n\n  onWatchChange(file: string) {\n    try {\n      fs.watch(file, (eventType, filename) => {\n        this.debugInfo(`PLATFORM NODE: file watch platform db file change, ${eventType} ${filename}`);\n        this.onInputUpdated();\n      });\n    } catch (err) {\n      this.debugInfo(`PLATFORM NODE ERROR: file watch platform db file error, ${err}`);\n    }\n  }\n  async onInputUpdated() {\n    if (this.side !== Side.server) return; // only execute on server\n    let deviceId: string, clientId: string, clientName: string, siteId: string, siteName: string, siteAddress: string, state: string, city: string, zip: string, country: string, lat: string, lon: string\n    await PlatformDataSource.getPlatform().then(e => {\n      deviceId = e.deviceID\n      clientId = e.clientId\n      clientName = e.clientName\n      siteId = e.siteId\n      siteName = e.siteName\n      siteAddress = e.siteAddress\n      state = e.state\n      city = e.city\n      zip = e.zip\n      country = e.country\n      lat = e.lat\n      lon = e.lon\n    }).catch(err => {\n      this.debugInfo(`PLATFORM NODE: try/catch  getPlatform info, ${err}`);\n    })\n    const preventDuplicates = this.settings['manualEquip'].value\n    const pointFeedback = this.getInputData(this.pointFeedbackNum);\n    const measurement = this.getInputData(this.measurementNumIn);\n    let pointId = this.getInputData(this.pointIdNumIn);\n    let jsonInput = this.getInputData(this.inputJsonNum);\n    //small point priority\n    let inputOne = this.getInputData(this.inputOneNum);\n    let inputTwo = this.getInputData(this.inputTwoNum);\n    let inputThree = this.getInputData(this.inputThreeNum);\n    let pointValue: number;\n    let pointValueIsJSON = false;\n    // json input\n    if (!isNull(jsonInput)) {\n      let isJSON = true;\n      try {\n        jsonInput = JSON.parse(jsonInput);\n        const msg = `PLATFORM NODE: try/catch  JSON.parse, ${JSON.stringify(jsonInput)}`\n        this.debugInfo(msg);\n        this.setOutputData(this.errorNumOut, pointValue, true);\n      } catch {\n        isJSON = false;\n      }\n      if (isJSON && jsonInput.hasOwnProperty('pointValue') && typeof jsonInput.pointValue === Type.NUMBER) {\n        pointValue = jsonInput.pointValue\n        pointValueIsJSON = true;\n        this.debugInfo(`PLATFORM NODE: try/catch  jsonInput.hasOwnProperty('pointValue') in 3 ${inputThree}`);\n        this.setOutputData(this.pointValNumOut, pointValue, preventDuplicates);\n      }\n      if (isJSON && jsonInput.hasOwnProperty('name') && typeof jsonInput.name === Type.STRING) {\n        pointId = jsonInput.name\n        this.debugInfo(`PLATFORM NODE: try/catch  jsonInput.hasOwnProperty('name') ${pointId}`);\n      }\n    }\n    if (!isNull(inputOne)) {\n      pointValue = inputOne;\n      this.setOutputData(this.pointValNumOut, pointValue, preventDuplicates);\n    } else if (!isNull(inputTwo)) {\n      pointValue = inputTwo;\n      this.setOutputData(this.pointValNumOut, pointValue, preventDuplicates);\n    } else if (!isNull(inputThree) && pointValueIsJSON === false) {\n      pointValue = inputThree;\n      this.setOutputData(this.pointValNumOut, pointValue, preventDuplicates);\n    }\n    if(isNull(pointId)){\n      const msg = `POINT-TAG NODE: pointId is null so return`\n      this.debugInfo(msg);\n      this.setOutputData(this.errorNumOut, pointValue, true);\n      return\n    }\n    if(isNull(measurement)){\n      const msg = `POINT-TAG NODE: measurement is null so return`\n      this.debugInfo(msg);\n      this.setOutputData(this.errorNumOut, pointValue, true);\n      return\n    }\n    let pointArray = JSON.stringify({out: pointValue, in1: inputOne , in2: inputTwo,  in3: inputThree})\n    const equipRef = this.getInputData(this.equipRefNumIn);\n    let equipType = this.settings['equipType'].value;\n    let topic = `${deviceId}/${equipRef}/${pointId}`.toLocaleLowerCase()\n    this.setOutputData(this.nameNumOut, pointId, preventDuplicates);\n    this.setOutputData(this.topicNumOut, topic, preventDuplicates);\n\n    //manual settings\n    const manualSettings = this.settings['manualSettings'].value\n    const manualEquip = this.settings['manualEquip'].value\n    const manualSensor = this.settings['manualSensor'].value\n    const manualTags = this.getInputData(this.manualTagsNum);\n\n    let tagSetting;\n    if (!manualSettings) {\n      tagSetting = tagRefs.tagType(equipType)\n      if (isNull(tagSetting)) {\n        return;\n      }\n      this.settings['tags'].config = {\n        items: Object.keys(tagSetting),\n      };\n      this.broadcastSettingsToClients();\n    }\n    let pointType = this.settings['tags'].value\n    let tags: any;\n    if (manualSettings) {\n      pointType = manualSensor;\n      equipType = manualEquip;\n      tags = manualTags;\n    } else {\n      for (var key in tagSetting) {\n        if (key == pointType) {\n          tags = tagSetting[key]\n        }\n      };\n    }\n    let fields = { value: pointValue }\n    let pointArr = { topic: topic, pointType: pointType, equipRef: equipRef, pointArray:pointArray, pointFeedback: pointFeedback, equipType: equipType, deviceId: deviceId, pointId: pointId, clientId: clientId, clientName: clientName, siteId: siteId, siteName: siteName, siteAddress: siteAddress, city: city, zip: zip, state: state, country: country, lat: lat, lon: lon }\n    if (tags) {\n      if (!manualSettings) {\n        this.settings['tags_values'].value = tags.tags\n        this.broadcastSettingsToClients();\n        tags = tags.tags\n      }\n      let pointTags = {}\n      if (isJSON(tags)) {\n        if (Object.keys(tags).length > 0) { //make sure array isnt empty\n          tags.forEach(x => { pointTags[x] = x })\n          const out = { ...pointArr, ...pointTags }\n          const outOut = { tags: out, measurement: measurement, fields: fields, topic: topic }\n          this.setOutputData(this.jsonNumOut, outOut, preventDuplicates);\n        } else {\n          const msg = `PLATFORM NODE: tag array is empty`\n          this.debugInfo(msg);\n          this.setOutputData(this.errorNumOut, pointValue, true);\n        }\n      }\n    }\n  }\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('history/point-tags', PointTagNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass DeadbandNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.hvac.deadband.title;\n    this.description = NODE_INFO.hvac.deadband.description;\n\n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('setpoint', Type.NUMBER, 0, 'Setpoint');\n    this.addInputWithSettings('deadband', Type.NUMBER, 0, 'Deadband');\n    this.addOutput('out', Type.BOOLEAN);\n    this.addOutput('out not', Type.BOOLEAN);\n    this.settings['invert'] = NodeSetting.create({\n      description: 'Reverses ON direction when true',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n  }\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    const setpoint = this.getInputData(1);\n    let deadband = this.getInputData(2);\n\n    const invert = this.settings['invert'].value;\n    if (invert == true) deadband = deadband * -1;\n\n    const risingEdge = setpoint + deadband / 2;\n    const fallingEdge = setpoint - deadband / 2;\n\n    if (risingEdge > fallingEdge) {\n      if (input <= fallingEdge) {\n        this.setOutputData(0, false, true);\n      }\n      if (input >= risingEdge) {\n        this.setOutputData(0, true, true);\n      }\n    } else if (risingEdge < fallingEdge) {\n      if (input >= fallingEdge) {\n        this.setOutputData(0, false, true);\n      }\n      if (input <= risingEdge) {\n        this.setOutputData(0, true, true);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('hvac/deadband', DeadbandNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass ThermostatNode extends Node {\n  clgMode: boolean;\n  htgMode: boolean;\n\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.hvac.thermostat.title;\n    this.description = NODE_INFO.hvac.thermostat.description; \n   \n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addInputWithSettings('setpoint', Type.NUMBER, 20, 'Setpoint');\n    this.addInputWithSettings('CLG offset', Type.NUMBER, 1, 'CLG offset');\n    this.addInputWithSettings('HTG offset', Type.NUMBER, 1, 'HTG offset');\n    this.addOutput('CLG Mode', Type.BOOLEAN);\n    this.addOutput('HTG Mode', Type.BOOLEAN);\n    this.setOutputData(0, false);\n    this.setOutputData(1, false);\n    this.clgMode = false;\n    this.htgMode = false;\n  }\n\n  onAdded() {\n \n    this.setOutputData(0, false);\n    this.setOutputData(1, false);\n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let enable = this.getInputData(1);\n    if (!enable) {\n      this.setOutputData(0, false);\n      this.setOutputData(1, false);\n      this.clgMode = false;\n      this.htgMode = false;\n      return;\n    }\n    const input = this.getInputData(0);\n    const setpoint = this.getInputData(2);\n    const clgOffset = this.getInputData(3);\n    const htgOffset = this.getInputData(4);\n\n    const clgSP = setpoint + clgOffset;\n    const htgSP = setpoint - htgOffset;\n\n    if (input < htgSP) {\n      this.setOutputData(0, false);\n      this.setOutputData(1, true);\n      this.htgMode = true;\n      this.clgMode = false;\n    } else if (input > clgSP) {\n      this.setOutputData(0, true);\n      this.setOutputData(1, false);\n      this.clgMode = true;\n      this.htgMode = false;\n    } else if ((this.clgMode && input < setpoint) || (this.htgMode && input > setpoint)) {\n      this.setOutputData(0, false);\n      this.setOutputData(1, false);\n      this.clgMode = false;\n      this.htgMode = false;\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('hvac/thermostat', ThermostatNode);\n","import { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport { SSL_OP_SSLEAY_080_CLIENT_DH_BUG } from 'constants';\n\nclass LeadLagStagingNode extends Node {\n  //Inputs\n  ENABLESLOT = 0;\n  ROTATESLOT = 1;\n  UPSLOT = 2;\n  DOWNSLOT = 3;\n  DELAYSLOT = 4;\n  MINONSLOT = 5;\n  FAULTSTARTSLOT = 6;\n\n  //Outputs\n  JSONSLOT = 0;\n  ORDERSLOT = 1;\n  STAGESLOT = 2;\n  OUTPUTSTARTSLOT = 3;\n\n  lastRotate;\n  lastEnable;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.hvac['lead-lag-staging'].title;\n    this.description = NODE_INFO.hvac['lead-lag-staging'].description; \n   \n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addInput('rotateLead', Type.BOOLEAN);\n    this.addInput('stageUp', Type.BOOLEAN);\n    this.addInput('stageDown', Type.BOOLEAN);\n    this.settings['numUnits'] = NodeSetting.create({\n      description: 'Number of Units',\n      value: 2,\n      type: SettingType.NUMBER,\n    });\n    this.addInputWithSettings('stageUpDelay (minutes)', Type.NUMBER, 10, 'Stage Up Delay (Minutes)');\n    this.addInputWithSettings('minOnTime (minutes)', Type.NUMBER, 5, 'Minimum On Time (Minutes)');\n    this.settings['stageUpOnFault'] = NodeSetting.create({\n      description: 'Stage Up On Running Unit Fault?',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['rotateLeadUnit'] = NodeSetting.create({\n      description: `Change Lead Unit Every Rotation`,\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.addOutput('outputJSON', Type.JSON);\n    this.addOutput('order', Type.STRING);\n    this.addOutput('currentStage', Type.NUMBER);\n\n    this.setSettingsConfig({\n      groups: [],\n      conditions: {\n        rotateLeadUnit: setting => {\n          return setting['numUnits'].value > 2;\n        },\n      },\n    });\n  }\n\n  init(){\n    this.properties['currentOrder'] = [1,2];\n    this.properties['orderIndex'] = 0;\n    this.properties['permutations'];\n  }\n\n  onCreated() {\n    this.onAfterSettingsChange();\n  }\n\n  onAdded() {\n    this.EXECUTE_INTERVAL = 10000;\n    this.onAfterSettingsChange();\n  }\n\n  onExecute(){\n    this.onInputUpdated();\n  }\n\n  onAfterSettingsChange() {\n    this.updateCount();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    this.initializeOutputJSON();\n    const enable = this.getInputData(this.ENABLESLOT);\n\n    const rotate = this.getInputData(this.ROTATESLOT);\n    if (rotate && !this.lastRotate){\n      this.properties['orderIndex']++;\n      if (this.properties['orderIndex'] >= this.properties['permutations'].length) this.properties['orderIndex'] = 0;\n      this.properties['lastRotateTime'] = Date.now();\n    }\n    this.lastRotate = rotate;\n    this.properties['currentOrder'] = this.properties['permutations'][this.properties['orderIndex']];\n\n    if (enable) {\n      if (!this.lastEnable) {\n        this.properties['currentStage'] = 1;\n        this.properties['stageStartTime'] = Date.now();\n      }\n\n      const stageUP = this.getInputData(this.UPSLOT);\n      const stageDOWN = this.getInputData(this.DOWNSLOT);\n      const upDelay = TimeUtils.timeConvert(this.getInputData(this.DELAYSLOT), TIME_TYPE.MINUTES);\n      const minOnDelay = TimeUtils.timeConvert(this.getInputData(this.MINONSLOT), TIME_TYPE.MINUTES);\n      const currentStage = this.properties['currentStage'];\n      var stageChange = 0;\n\n\n      if(stageUP && !stageDOWN && currentStage < this.properties['numEnableOutputs']){\n        if (Date.now() > this.properties['stageStartTime'] + upDelay) {\n          stageChange++;\n        }\n      }\n\n      if(stageDOWN && !stageUP && currentStage > 1){\n        if (Date.now() > this.properties['stageStartTime'] + minOnDelay) {\n          stageChange--;\n        }\n      }\n\n      if (this.settings['stageUpOnFault'].value){\n        var faultArray = [];\n        var fault, index;\n        for (var i = 0; i < this.settings['numUnits'].value; i++) {\n          fault = this.getInputData(this.FAULTSTARTSLOT + i);\n          index = this.properties['currentOrder'].indexOf(this.convertNumToLetter(i))\n          fault ? faultArray[index] = true : faultArray[index] = false;\n        }\n        this.properties['outputJSON']['faultArray'] = faultArray;\n        while ((currentStage + stageChange) < this.properties['numEnableOutputs'] && faultArray[currentStage + stageChange - 1]){\n          stageChange++\n        }\n      }\n \n      if (stageChange !== 0){\n        if (this.properties['currentStage'] + stageChange > this.properties['numEnableOutputs']) this.properties['currentStage'] = this.properties['numEnableOutputs'];\n        else this.properties['currentStage'] += stageChange;\n        this.properties['stageStartTime'] = Date.now();\n      }\n\n      this.setOutputs();\n    }\n    // For disabled controller\n    else this.resetController();\n\n    this.lastEnable = enable;\n    this.setOutputJSON();\n\n  }\n\n  resetController(){\n    this.properties['currentStage'] = 0;\n    this.properties['stageStartTime'] = null;\n    this.setOutputData(this.ORDERSLOT, this.properties['currentOrder'].toString());\n    this.setOutputData(this.STAGESLOT, 0);\n    for(var x = 0; x < this.properties['numEnableOutputs']; x++){\n      this.setOutputData(x + this.OUTPUTSTARTSLOT, false);\n    }\n  }\n\n  setOutputs() {\n    this.setOutputData(this.ORDERSLOT, this.properties['currentOrder'].toString());\n    this.setOutputData(this.STAGESLOT, this.properties['currentStage']);\n    var output, index;\n    for(var x = 0; x < this.properties['numEnableOutputs']; x++){\n      index = this.properties['currentOrder'].indexOf(this.convertNumToLetter(x));\n      output = this.properties['currentStage'] >= (index+1);\n      this.setOutputData(x + this.OUTPUTSTARTSLOT, output);\n    }\n  }\n\n  updateCount(){\n    if (this.properties['numEnableOutputs'] !== this.settings['numUnits'].value || this.properties['numFaultInputs'] !== this.settings['numUnits'].value){\n      this.properties['orderIndex'] = 0;\n    }\n    this.updateOutputsCount();\n    this.updateInputsCount();\n    this.generatePermutations();\n    this.properties['currentOrder'] = this.properties['permutations'][this.properties['orderIndex']];\n  }\n\n  generatePermutations(){\n    var list = [];\n    const count = this.properties['numEnableOutputs'];\n    for (var x = 0; x < count; x++) list.push(this.convertNumToLetter(x));\n    var result = this.permutations(list);\n    if (this.settings['rotateLeadUnit'].value){\n      var reorder = []\n      const leadCombinations = this.factorial(count)/count;\n      for (var l = 0; l < (leadCombinations); l++){\n        for (var k = 0; k < count; k++){\n          reorder.push(result[l + (k*leadCombinations)]);\n        }\n      }\n      result = reorder;\n    }\n    this.properties['permutations'] = result;\n  }\n\n  private factorial(n:number) {\n    return (n != 1) ? n * this.factorial(n - 1) : 1;\n  }\n\n  private permutations(list) {\n    // Empty list has one permutation\n    if (list.length == 0) return [[]];\n    var result = [];\n    for (var i=0; i<list.length; i++)\n    {\n      // Clone list (kind of)\n      var copy = Object.create(list);\n      // Cut one element from list\n      var head = copy.splice(i, 1);\n      // Permute rest of list\n      var rest = this.permutations(copy);\n      // Add head to each permutation of rest of list\n      for (var j=0; j<rest.length; j++)\n      {\n        var next = head.concat(rest[j]);\n        result.push(next);\n      }\n    }\n    return result;\n  }\n\n  updateOutputsCount() {\n    this.settings['numUnits'].value = Math.min(Math.max(2, this.settings['numUnits'].value), 10);\n    this.properties['numEnableOutputs'] = this.getOutputsCount() - this.OUTPUTSTARTSLOT;\n    const diff = this.settings['numUnits'].value - this.properties['numEnableOutputs'];\n    if (diff == 0) return;\n    //add\n    let num = null;\n    if (diff > 0) for (let i = 0; i < diff; i++) {\n      num = this.addOutput('Unit'+ this.convertNumToLetter(this.properties['numEnableOutputs'] + i), Type.BOOLEAN);\n      this.setOutputData(num, false);\n    }\n    //remove\n    if (diff < 0) {\n      let ids = Object.keys(this.outputs);\n      for (let i = 0; i > diff; i--) {\n        let id = ids[ids.length + i - 1];\n        this.removeOutput(+id);\n      }\n    }\n    this.properties['numEnableOutputs'] = this.settings['numUnits'].value;\n    if (this.properties['currentStage'] > this.properties['numUnits']) this.properties['currentStage'] = this.properties['numUnits'];\n  }\n\n  updateInputsCount() {\n    this.settings['numUnits'].value = Math.min(Math.max(2, this.settings['numUnits'].value), 10);\n    this.properties['numFaultInputs'] = this.getInputsCount() - this.FAULTSTARTSLOT;\n    var requiredFaultInputs = 0;\n    if (this.settings['stageUpOnFault'].value) requiredFaultInputs = this.settings['numUnits'].value;\n    const diff = requiredFaultInputs - this.properties['numFaultInputs'];\n    if (diff == 0) return;\n    //add\n    let num = null;\n    if (diff > 0) for (let i = 0; i < diff; i++) {\n      num = this.addInput('Fault'+ this.convertNumToLetter(this.properties['numFaultInputs'] + i), Type.BOOLEAN);\n    }\n    //remove\n    if (diff < 0) {\n      let ids = Object.keys(this.inputs);\n      for (let i = 0; i > diff; i--) {\n        let id = ids[ids.length + i - 1];\n        this.removeInput(+id);\n      }\n    }\n    if (this.settings['stageUpOnFault'].value) this.properties['numFaultInputs'] = this.settings['numUnits'].value;\n    else this.properties['numFaultInputs'] = 0;\n  }\n\n  convertNumToLetter(convertNumber:number = 0){\n    return String.fromCharCode(65 + convertNumber);\n  }\n\n  initializeOutputJSON(){\n    this.properties['outputJSON'] = {\n      enableInput: this.getInputData(this.ENABLESLOT),\n      rotateInput: this.getInputData(this.ROTATESLOT),\n      stageUpInput: this.getInputData(this.UPSLOT),\n      stageDownInput: this.getInputData(this.DOWNSLOT),\n      stageUpDelay: this.getInputData(this.DELAYSLOT),\n      minOnTime: this.getInputData(this.MINONSLOT),\n      order: null,\n      orderIndex: null,\n      numUnits: null,\n      currentStage: null,\n      stageArray: [],\n      useFaultInputs: null,\n      faultArray: [],\n      changeLeadEveryRotation: null,\n      currentTime: null,\n      stageStartTime: null,\n    };\n  }\n\n  setOutputJSON(){\n    this.properties['outputJSON']['order'] = this.properties['currentOrder'];\n    this.properties['outputJSON']['orderIndex'] = this.properties['orderIndex'];\n    this.properties['outputJSON']['numUnits'] = this.settings['numUnits'].value;\n    this.properties['outputJSON']['currentStage'] = this.properties['currentStage'];\n    this.properties['outputJSON']['useFaultInputs'] = this.settings['stageUpOnFault'].value;\n    this.properties['outputJSON']['changeLeadEveryRotation'] = this.settings['rotateLeadUnit'].value;\n    for(var x = 0; x < this.properties['numEnableOutputs']; x++){\n      this.properties['outputJSON']['stageArray'].push(this.outputs[String(x+this.OUTPUTSTARTSLOT)].data);\n    }\n    this.properties['outputJSON']['stageStartTime'] = this.properties['stageStartTime'];\n    this.properties['outputJSON']['currentTime'] = Date.now();\n    this.setOutputData(this.JSONSLOT, this.properties['outputJSON']);\n  }\n\n}\nNodeTypeRegistry.registerNodeType('hvac/lead-lag-staging', LeadLagStagingNode);\n\n","import { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass LeadLagSwitchNode extends Node {\n  lastRotate;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.hvac['lead-lag-switch'].title;\n    this.description = NODE_INFO.hvac['lead-lag-switch'].description; \n   \n    this.addInput('rotateLead', Type.BOOLEAN);\n    this.addInput('unit1', Type.BOOLEAN);\n    this.addInput('unit2', Type.BOOLEAN);\n\n    this.addOutput('leadUnit', Type.STRING);\n    this.addOutput('enableA', Type.BOOLEAN);\n    this.addOutput('enableB', Type.BOOLEAN);\n\n  }\n\n  init(){\n    this.properties['currentOrder'] = true;\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const rotate = this.getInputData(0);\n    if (rotate && !this.lastRotate) this.properties['currentOrder'] = !this.properties['currentOrder'];\n    this.lastRotate = rotate;\n\n    const in1 = this.getInputData(1);\n    const in2 = this.getInputData(2);\n\n    if (this.properties['currentOrder']) {\n      this.setOutputData(0, 'A'); \n      this.setOutputData(1, !!in1); \n      this.setOutputData(2, !!in2); \n    }\n    else {\n      this.setOutputData(0, 'B'); \n      this.setOutputData(1, !!in2); \n      this.setOutputData(2, !!in1); \n    }\n\n  }\n\n}\nNodeTypeRegistry.registerNodeType('hvac/lead-lag-switch', LeadLagSwitchNode);\n\n","import { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\n\nclass PACUnitControl extends Node {\n  //Inputs\n  ENABLESLOT = 0;\n  ZTSLOT = 1;\n  SPSLOT = 2;\n  CLGOFSTSLOT = 3;\n  HTGOFSTSLOT = 4;\n  STGUPSLOT = 5;\n  MDLYSLOT = 6;\n  ECONOASLOT = 7;\n  OATSLOT = 8;\n  ECONHISLOT = 9;\n  ECONLOSLOT = 10;\n  FSSLOT = 11;\n\n  //Outputs\n  JSONSLOT = 0;\n  CLGMSLOT = 1;\n  HTGMSLOT = 2;\n  COMPSTGSLOT = 3;\n  ECONOMSLOT = 4;\n  OADMPSLOT = 5;\n  RVSLOT = 6;\n  COMPSTARTSLOT = 7;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.hvac['pac-unit-control'].title;\n    this.description = NODE_INFO.hvac['pac-unit-control'].description; \n   \n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addInput('zoneTemp', Type.NUMBER);\n    this.addInputWithSettings('setpoint', Type.NUMBER, 20, 'Setpoint');\n    this.settings['straddleSP'] = NodeSetting.create({\n      description: 'Setpoint Logic',\n      value: true,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Condition to Setpoint' },\n          { value: false, text: 'Condition past Setpoint' },\n        ],\n      },\n    });\n    this.addInputWithSettings('CLG offset', Type.NUMBER, 1, 'CLG offset');\n    this.addInputWithSettings('HTG offset', Type.NUMBER, 1, 'HTG offset');\n    this.addInputWithSettings('stageUpDelay (minutes)', Type.NUMBER, 10, 'Stage Up Delay (Minutes)');\n    this.addInputWithSettings('modeDelay (minutes)', Type.NUMBER, 15, 'Mode Change Delay (Minutes)');\n    this.addInputWithSettings('econoAllow', Type.BOOLEAN, true, 'Allow Economy Mode');\n    this.addInput('OATemp', Type.NUMBER);\n    this.settings['compStages'] = NodeSetting.create({\n      description: '# Compressor Stages',\n      value: 2,\n      type: SettingType.NUMBER,\n    });\n    this.addInputWithSettings('econoHigh', Type.NUMBER, 22, 'Econo OA High Temp');\n    this.addInputWithSettings('econoLow', Type.NUMBER, 10, 'Econo OA Low Temp');\n    this.settings['econoDB'] = NodeSetting.create({\n      description: 'Economy Conditions Deadband',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n    this.settings['requireFS'] = NodeSetting.create({\n      description: 'Require Fan Status?',\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['FSdelay'] = NodeSetting.create({\n      description: 'Fan Status OFF Delay (Seconds)',\n      value: 20,\n      type: SettingType.NUMBER,\n    });\n    this.addInput('fanStatus', Type.BOOLEAN);\n\n    this.addOutput('outputJSON', Type.JSON);\n    this.addOutput('CLG Mode', Type.BOOLEAN);\n    this.addOutput('HTG Mode', Type.BOOLEAN);\n    this.addOutput('compStage', Type.NUMBER);\n    this.addOutput('econoMode', Type.BOOLEAN);\n    this.addOutput('OADamper', Type.NUMBER);\n    this.addOutput('RV', Type.BOOLEAN);\n    this.addOutput('Comp1', Type.BOOLEAN);\n    this.addOutput('Comp2', Type.BOOLEAN);\n\n    this.setSettingsConfig({\n      groups: [\n        { 'CLG offset': {}, 'HTG offset': {} },\n        { 'stageUpDelay (minutes)': {}, 'modeDelay (minutes)': {} },\n        { econoLow: {}, econoHigh: {} },\n      ],\n      conditions: {},\n    });\n  }\n\n  onCreated() {\n    this.EXECUTE_INTERVAL = 10000;\n    //this.properties['numComps'] = 2;\n    this.properties['FSInput'] = true;\n    this.properties['fanStatus'] = false;\n    this.properties['fanStatusOffTime'] = null;\n    this.properties['clgModeEnd'] = null;\n    this.properties['htgModeEnd'] = null;\n    this.resetController();\n    this.onAfterSettingsChange();\n  }\n\n  onAdded() {\n    this.EXECUTE_INTERVAL = 10000;\n    this.setOutputData(0, this.properties['clgMode']);\n    this.setOutputData(1, this.properties['htgMode']);\n    this.setOutputData(2, this.properties['compStage']);\n    this.setOutputData(3, this.properties['econoConditions']);\n    this.onAfterSettingsChange();\n  }\n\n  onExecute(){\n    this.onInputUpdated();\n  }\n\n  onAfterSettingsChange() {\n    this.updateStageCount();\n    this.updateFSInput();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    this.initializeOutputJSON();\n    const enable = this.getInputData(this.ENABLESLOT);\n    this.properties['outputJSON']['enableInput'] = enable;\n    var fanStatus = true;\n    if (this.settings['requireFS'].value){ \n      const fanStatusInput = this.getInputData(this.FSSLOT);\n      this.properties['outputJSON']['fanStatusActual'] = fanStatusInput;\n      this.properties['outputJSON']['fanStatusEffective'] = true;\n      if (fanStatusInput) {\n        fanStatus = true;\n        this.properties['fanStatus'] = true;\n      }\n      else {\n        if (this.properties['fanStatus']) {\n          this.properties['fanStatusOffTime'] = Date.now() + TimeUtils.timeConvert(this.settings['FSdelay'].value, TIME_TYPE.SECONDS);\n        }\n        this.properties['fanStatus'] = fanStatusInput;\n        if (this.properties['fanStatusOffTime'] <= Date.now()) {\n          fanStatus = false;\n          this.properties['outputJSON']['fanStatusEffective'] = false;\n        }\n        this.properties['outputJSON']['fanStatusOffTime'] = this.properties['fanStatusOffTime'];\n      }\n    } \n\n    var disable = false;\n    if (!enable || (this.settings['requireFS'].value && !fanStatus)) disable = true;\n    \n    const input = this.getInputData(this.ZTSLOT);\n    this.properties['outputJSON']['zoneTemp'] = input;\n    if (input == null || input == undefined) disable = true;\n\n    if (!disable) {\n      const setpoint = this.getInputData(this.SPSLOT);\n      const clgOffset = this.getInputData(this.CLGOFSTSLOT);\n      const htgOffset = this.getInputData(this.HTGOFSTSLOT);\n      const clgSP = setpoint + clgOffset;\n      const htgSP = setpoint - htgOffset;\n\n      if (!this.properties['clgMode'] && !this.properties['htgMode'] && input < htgSP) {\n        if (this.properties['clgModeEnd'] == null || (this.properties['clgModeEnd'] + TimeUtils.timeConvert(this.getInputData(this.MDLYSLOT), TIME_TYPE.MINUTES)) <= Date.now()){\n          this.properties['htgMode'] = true;\n          this.properties['compStage'] = 0;\n        }\n      }\n      else if (!this.properties['htgMode'] && !this.properties['clgMode'] && input > clgSP) {\n        if (this.properties['htgModeEnd'] == null || (this.properties['htgModeEnd'] + TimeUtils.timeConvert(this.getInputData(this.MDLYSLOT), TIME_TYPE.MINUTES)) <= Date.now()){\n          this.properties['clgMode'] = true;\n          this.properties['compStage'] = 0;\n        }\n      }\n\n      if (this.properties['htgMode']){\n        this.properties['econoConditions'] = false;\n        if (input < htgSP) {\n          if(this.properties['compStage'] === 0){\n            this.properties['compStage'] = 1;\n            this.properties['stageStartTime'] = Date.now();\n          }\n          else if (this.properties['compStage'] > 0 && (this.properties['stageStartTime'] + TimeUtils.timeConvert(this.getInputData(this.STGUPSLOT), TIME_TYPE.MINUTES)) <= Date.now()){\n            if (this.properties['compStage'] < this.properties['numComps']) {\n              this.properties['compStage']++;\n              this.properties['stageStartTime'] = Date.now();\n            }\n          }\n        }\n        else {\n          var offSPInterval = htgOffset / this.properties['numComps'];\n          if (this.settings['straddleSP'].value){\n            for (var s = this.properties['compStage']; s > 0; s--) {\n              if (input >= (setpoint - (offSPInterval * (s-1)))) {\n                this.properties['compStage']--;\n                this.properties['stageStartTime'] = Date.now();\n              }\n            }\n          }\n          else if (!this.settings['straddleSP'].value){\n            offSPInterval = (htgOffset*2) / this.properties['numComps'];\n            for (var s = this.properties['compStage']; s > 0; s--) {\n              if (input >= ((setpoint + htgOffset) - (offSPInterval * (s-1)))) {\n                this.properties['compStage']--;\n                this.properties['stageStartTime'] = Date.now();\n              }\n            }\n          }\n          if (this.properties['compStage'] === 0){\n            this.properties['htgMode'] = false;\n            this.properties['htgModeEnd'] = Date.now();\n            this.properties['stageStartTime'] = null;\n          }\n        }\n      }\n      else if (this.properties['clgMode']){\n        if (input > clgSP) {\n          if(this.properties['compStage'] === 0){\n            this.properties['compStage'] = 1;\n            this.properties['stageStartTime'] = Date.now();\n          }\n          else if (this.properties['compStage'] > 0 && (this.properties['stageStartTime'] + TimeUtils.timeConvert(this.getInputData(this.STGUPSLOT), TIME_TYPE.MINUTES)) <= Date.now()){\n            if (this.properties['compStage'] < this.properties['numComps']) {\n              this.properties['compStage']++;\n              this.properties['stageStartTime'] = Date.now();\n            }\n          }\n        }\n        else {\n          var offSPInterval = clgOffset / this.properties['numComps'];\n          if (this.settings['straddleSP'].value){\n            for (var s = this.properties['compStage']; s > 0; s--) {\n              if (input <= (setpoint + (offSPInterval * (s-1)))) {\n                this.properties['compStage']--;\n                this.properties['stageStartTime'] = Date.now();\n              }\n            }\n          }\n          else if (!this.settings['straddleSP'].value){\n            offSPInterval = (clgOffset*2) / this.properties['numComps'];\n            for (var s = this.properties['compStage']; s > 0; s--) {\n              if (input <= ((setpoint - clgOffset) + (offSPInterval * (s-1)))) {\n                this.properties['compStage']--;\n                this.properties['stageStartTime'] = Date.now();\n              }\n            }\n          }\n          if (this.properties['compStage'] === 0){\n            this.properties['clgMode'] = false;\n            this.properties['clgModeEnd'] = Date.now();\n            this.properties['stageStartTime'] = null;\n          }\n        }\n\n        if (this.getInputData(this.ECONOASLOT)){\n          const OATemp = this.getInputData(this.OATSLOT);\n          if (OATemp && this.checkEconoConditions(OATemp)) this.properties['econoConditions'] = true;\n          else this.properties['econoConditions'] = false;\n        }\n        else this.properties['econoConditions'] = false;\n      }\n      this.setOutputs(input, setpoint, clgSP);\n    }\n    // For disabled controller\n    else this.resetController();\n\n    this.properties['outputJSON']['disable'] = disable;\n    this.setOutputJSON();\n\n  }\n\n  setOutputs(temp:number, setpoint:number, clgSP:number) {\n    this.setOutputData(this.CLGMSLOT, this.properties['clgMode']);\n    this.setOutputData(this.HTGMSLOT, this.properties['htgMode']);\n    this.setOutputData(this.COMPSTGSLOT, this.properties['compStage']);\n    this.setOutputData(this.ECONOMSLOT, this.properties['econoConditions']);\n    if (this.properties['econoConditions'] && this.properties['clgMode']) {\n      const OAD = Utils.remap(temp, setpoint, clgSP, 0, 100)\n      this.setOutputData(this.OADMPSLOT, OAD);\n      this.properties['outputJSON']['OADamper'] = OAD;\n    }\n    else {\n      this.setOutputData(this.OADMPSLOT, 0);\n      this.properties['outputJSON']['OADamper'] = 0;\n    }\n    this.setOutputData(this.RVSLOT, this.properties['htgMode']);\n    for(var x = 0; x < this.properties['numComps']; x++){\n      if (this.properties['compStage'] >= (x+1)) this.setOutputData(x + this.COMPSTARTSLOT, true);\n      else this.setOutputData(x + this.COMPSTARTSLOT, false);\n    }\n  }\n\n  checkEconoConditions(OATemp:number) {\n    const econoHigh = this.getInputData(this.ECONHISLOT);\n    const econoLow = this.getInputData(this.ECONLOSLOT);\n    const econoDB = this.settings['econoDB'].value;\n    if (econoHigh <= (econoLow + econoDB) || econoHigh == null || econoLow == null || econoDB == null) {\n      this.properties['econoConditions'] = false;\n      return false;\n    }\n    if (OATemp < econoLow || OATemp > econoHigh) {\n      this.properties['econoConditions'] = false;\n      return false;\n    }\n    if (OATemp <= (econoHigh - econoDB) && OATemp >= (econoLow + econoDB)) {\n      this.properties['econoConditions'] = true;\n    }\n    return this.properties['econoConditions'];  //return current Econo state, or updated.\n  }\n\n  updateFSInput() {\n    if(this.settings['requireFS'].value != this.properties['FSInput']){\n      if(this.settings['requireFS'].value) this.addInput('fanStatus', Type.BOOLEAN);\n      else this.removeInput(11);\n    }\n    this.properties['FSInput'] = this.settings['requireFS'].value;\n  }\n\n  updateStageCount() {\n    const compSettings = Math.min(Math.max(1, this.settings['compStages'].value), 20);\n    if (this.settings['compStages'].value < 1) this.settings['compStages'].value = 1;\n    this.properties['numComps'] = this.getOutputsCount() - this.COMPSTARTSLOT;\n    const diff = this.settings['compStages'].value - this.properties['numComps'];\n    if (diff == 0) return;\n    //add\n    let num = null;\n    if (diff > 0) for (let i = 0; i < diff; i++) {\n      num = this.addOutput('Comp'+(this.properties['numComps'] + i + 1), Type.BOOLEAN);\n      this.setOutputData(num, false);\n    }\n    //remove\n    if (diff < 0) {\n      let ids = Object.keys(this.outputs);\n      for (let i = 0; i > diff; i--) {\n        let id = ids[ids.length + i - 1];\n        this.removeOutput(+id);\n      }\n    }\n    this.properties['numComps'] = this.settings['compStages'].value;\n    if (this.properties['compStage'] > this.properties['numComps']) this.properties['compStage'] = this.properties['numComps'];\n  }\n\n  resetController(){\n    this.properties['clgMode'] = false;\n    this.properties['htgMode'] = false;\n    this.properties['compStage'] = 0;\n    this.properties['econoMode'] = false;\n    this.properties['econoConditions'] = false;\n    this.properties['stageStartTime'] = null;\n    this.setOutputData(this.CLGMSLOT, this.properties['clgMode']);\n    this.setOutputData(this.HTGMSLOT, this.properties['htgMode']);\n    this.setOutputData(this.COMPSTGSLOT, this.properties['compStage']);\n    this.setOutputData(this.ECONOMSLOT, this.properties['econoMode']);\n    this.setOutputData(this.OADMPSLOT, 0);\n    this.setOutputData(this.RVSLOT, false);\n    for(var x = 0; x < this.properties['numComps']; x++){\n      this.setOutputData(x + this.COMPSTARTSLOT, false);\n    }\n  }\n\n  initializeOutputJSON(){\n    this.properties['outputJSON'] = {\n      disable: null,\n      enableInput: null,\n      zoneTemp: null,\n      setpoint: this.getInputData(this.SPSLOT),\n      clgOffset: this.getInputData(this.CLGOFSTSLOT),\n      htgOffset: this.getInputData(this.HTGOFSTSLOT),\n      stageUpDelay: this.getInputData(this.STGUPSLOT),\n      modeChangeDelay: this.getInputData(this.MDLYSLOT),\n      econoAllow: this.getInputData(this.ECONOASLOT),\n      OATemp: this.getInputData(this.OATSLOT),\n      econoHighLimit: this.getInputData(this.ECONHISLOT),\n      econoLowLimit: this.getInputData(this.ECONLOSLOT),\n      fanStatusActual: null,\n      fanStatusEffective: null,\n      fanStatusOffTime: null,\n      clgMode: null,\n      htgMode: null,\n      compStage: null,\n      econoMode: null,\n      OADamper: null,\n      RV: null,\n      compArray: [],\n      setpointMode: this.settings['straddleSP'].value ? 'Condition to Setpoint' : 'Condition past Setpoint',\n      numCompressors: this.properties['numComps'],\n      econoConditionsDB: this.settings['econoDB'].value,\n      requireFanStatus: this.settings['requireFS'].value,\n      fanStatusOffDelay: this.settings['FSdelay'].value,\n      currentTime: null,\n      stageStartTime: null,\n      htgModeEnd:null,\n      clgModeEnd:null,\n    };\n  }\n\n  setOutputJSON(){\n    this.properties['outputJSON']['clgMode'] = this.properties['clgMode'];\n    this.properties['outputJSON']['htgMode'] = this.properties['htgMode'];\n    this.properties['outputJSON']['compStage'] = this.properties['compStage'];\n    this.properties['outputJSON']['econoMode'] = this.properties['econoConditions'];\n    this.properties['outputJSON']['OADamper'] = this.properties['clgMode'];\n    this.properties['outputJSON']['RV'] = this.properties['htgMode'];\n    for(var x = 0; x < this.properties['numComps']; x++){\n      if (this.properties['compStage'] >= (x+1)) this.properties['outputJSON']['compArray'].push(true);\n      else this.properties['outputJSON']['compArray'].push(false);\n    }\n    this.properties['outputJSON']['stageStartTime'] = this.properties['stageStartTime'];\n    this.properties['outputJSON']['clgModeEnd'] = this.properties['clgModeEnd'];\n    this.properties['outputJSON']['htgModeEnd'] = this.properties['htgModeEnd'];\n    this.properties['outputJSON']['currentTime'] = Date.now();\n\n    this.setOutputData(this.JSONSLOT, this.properties['outputJSON']);\n  }\n\n}\nNodeTypeRegistry.registerNodeType('hvac/pac-unit-control', PACUnitControl);\n\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nconst PID = require('../../lib/pid-controller');\n\nclass PIDFunctionNode extends Node {\n  lastTime: number;\n  startTime: number;\n  lastResetVal: boolean = false;\n  pid = new PID(1, 1, 1, 0, 0, 'reverse');\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.hvac.PID.title;\n    this.description = NODE_INFO.hvac.PID.description;\n\n    this.addInput('enable', Type.BOOLEAN); // 0\n    this.addInput('processVariable', Type.NUMBER); // 1\n    this.addInputWithSettings('setpoint', Type.NUMBER, 1, 'setpoint'); // 2\n    this.addInputWithSettings('minOut', Type.NUMBER, 0, 'minOut'); // 3\n    this.addInputWithSettings('maxOut', Type.NUMBER, 100, 'maxOut'); // 4\n    this.addInputWithSettings('inP', Type.NUMBER, 1, 'P'); // 5\n    this.addInputWithSettings('inI', Type.NUMBER, 0, 'I'); // 6\n    this.addInputWithSettings('inD', Type.NUMBER, 0, 'D'); // 7\n    //this.addInputWithSettings('direction', Type.BOOLEAN, true, 'Direction (OFF = Reverse, ON = Direct)'); // Direct or Reverse // 8\n    this.addInputWithSettings(\n      'direction',\n      Type.BOOLEAN,\n      true,\n      'Direction (OFF = Reverse, ON = Direct)',\n    ); // Direct or Reverse // 8\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Interval (min 500ms)'); // 9\n    this.addInputWithSettings('bias', Type.NUMBER, 0, 'Bias'); // 10\n    this.addInputWithSettings('manual', Type.NUMBER, 0, \"Manual ('output' value on disabled)\"); // 11\n    this.addInput('reset', Type.BOOLEAN); // 12\n    this.addOutput('output', Type.NUMBER); // 0\n    this.settings['time'] = NodeSetting.create({\n      description: 'Time',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [\n        { minOut: {}, maxOut: {} },\n        { inP: {}, inI: {}, inD: {} },\n        { time: {}, interval: { weight: 2 } },\n      ],\n    });\n    this.startTime = Date.now();\n    this.pid.setSampleTime(1000);\n    this.pid.setOutputLimits(0, 100);\n    this.pid.setMode('MANUAL');\n    this.pid.setOutput(0);\n    this.pid.setBias(0);\n  }\n\n  onAdded() {\n    this.inputs[9]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n\n  onExecute() {\n    if (this.pid.compute()) this.setOutputData(0, this.pid.getOutput().toFixed(1), true);\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(12);\n    if (reset && !this.lastResetVal) this.pid.initialize();\n    this.lastResetVal = reset;\n\n    let enable = this.getInputData(0);\n    if (!enable) {\n      this.pid.setMode('MANUAL');\n      const manual = this.getInputData(11) || 0;\n      this.setOutputData(0, manual.toFixed(1));\n      this.pid.setOutput(manual);\n      return;\n    }\n\n    let processVariable = this.getInputData(1);\n    if (\n      processVariable === null ||\n      processVariable === undefined ||\n      typeof processVariable !== Type.NUMBER\n    ) {\n      this.pid.setMode('MANUAL');\n      const manual = this.getInputData(11) || 0;\n      this.setOutputData(0, manual.toFixed(1), true);\n      this.pid.setOutput(manual);\n      return;\n    }\n\n    const setpoint = this.getInputData(2);\n    const minOut = this.getInputData(3);\n    const maxOut = this.getInputData(4);\n    const inP = this.getInputData(5);\n    const inI = this.getInputData(6);\n    const inD = this.getInputData(7);\n    let direction = this.getInputData(8);\n    if (direction == true) direction = 'direct';\n    else direction = 'reverse';\n    let interval = this.getInputData(9);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    interval = Math.max(500, interval);\n    const bias = this.getInputData(10);\n\n    this.pid.setBias(bias);\n    this.pid.setSampleTime(interval);\n    this.pid.setOutputLimits(minOut, maxOut);\n    this.pid.setPoint(setpoint);\n    this.pid.setTunings(inP, inI, inD);\n    this.pid.setControllerDirection(direction);\n    this.pid.setMode('auto');\n    this.pid.setInput(processVariable);\n    this.pid.compute();\n    this.setOutputData(0, this.calculatePidOutput(), true);\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[9]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n\n  private calculatePidOutput(): number {\n    return this.pid.getOutput().toFixed(1);\n  }\n}\nContainer.registerNodeType('hvac/PID', PIDFunctionNode);\n","/**\n * pid-controller -  A node advanced PID controller based on the Arduino PID library\n * github@wilberforce.co.nz Rhys Williams\n * Based on:\n * Arduino PID Library - Version 1.0.1\n * by Brett Beauregard <br3ttb@gmail.com> brettbeauregard.com\n *\n * This Library is licensed under a GPL-3.0 License\n */\n\n'use strict';\nvar PID = function(Input, Setpoint, Kp, Ki, Kd, ControllerDirection) {\n  this.input = Input;\n  this.mySetpoint = Setpoint;\n  this.inAuto = false;\n  this.setOutputLimits(0, 255); // default output limits\n  this.SampleTime = 100; // default Controller Sample Time is 0.1 seconds\n  this.setTunings(Kp, Ki, Kd);\n  this.setControllerDirection(ControllerDirection);\n  this.lastTime = this.millis() - this.SampleTime;\n\n  this.myBias = 0;\n  this.ITerm = 0;\n  this.myOutput = 0;\n};\n\n// Constants for backward compatibility\n// PID.AUTOMATIC = 1;\n// PID.MANUAL = 0;\n// PID.DIRECT = 0;\n// PID.REVERSE = 1;\n\nPID.prototype.setInput = function(current_value) {\n  this.input = Number(current_value);\n};\n\nPID.prototype.setPoint = function(current_value) {\n  this.mySetpoint = Number(current_value);\n};\n\nPID.prototype.setBias = function(current_value) {\n  if (current_value > this.outMax) {\n    current_value = this.outMax; // POSSIBLY INCORRECT\n  } else if (current_value < this.outMin) {\n    current_value = this.outMin;\n  }\n  this.myBias = Number(current_value);\n};\n\nPID.prototype.millis = function() {\n  var d = new Date();\n  return d.getTime();\n};\n\n/**\n * Compute()\n * This, as they say, is where the magic happens.  this function should be called\n * every time \"void loop()\" executes.  the function will decide for itself whether a new\n * pid Output needs to be computed.  returns true when the output is computed,\n * false when nothing has been done.\n */\n\nPID.prototype.compute = function() {\n  if (!this.inAuto) {\n    return false;\n  }\n\n  var now = this.millis();\n  var timeChange = now - this.lastTime;\n  if (timeChange >= this.SampleTime) {\n    // Compute all the working error variables\n    var input = this.input;\n\n    //var error = this.mySetpoint - input;\n    var error = input - this.mySetpoint; // above setpoint = positive error\n    error = error * this.setDirection;\n\n    this.ITerm += this.ki * error;\n    if (this.ITerm > this.outMax - this.myBias) {\n      this.ITerm = this.outMax - this.myBias;\n    } else if (this.ITerm < this.outMin - this.myBias) {\n      this.ITerm = this.outMin - this.myBias;\n    }\n\n    var dInput = input - this.lastInput;\n\n    // Compute PID Output\n    //var output = ((this.kp * error) + this.ITerm - (this.kd * dInput)) * this.setDirection;\n    var output = this.kp * error + this.ITerm - this.kd * dInput + this.myBias;\n    //var output = ((this.kp * error) + this.ITerm - (this.kd * dInput));\n\n    if (output > this.outMax) {\n      output = this.outMax;\n    } else if (output < this.outMin) {\n      output = this.outMin;\n    }\n    this.myOutput = output;\n\n    // Remember some variables for next time\n    this.lastInput = input;\n    this.lastTime = now;\n    return true;\n  } else {\n    return false;\n  }\n};\n\n/**\n * SetTunings(...)\n * This function allows the controller's dynamic performance to be adjusted.\n * it's called automatically from the constructor, but tunings can also\n * be adjusted on the fly during normal operation\n */\nPID.prototype.setTunings = function(Kp, Ki, Kd) {\n  if (Kp < 0 || Ki < 0 || Kd < 0) {\n    return;\n  }\n\n  this.dispKp = Kp;\n  this.dispKi = Ki;\n  this.dispKd = Kd;\n\n  this.SampleTimeInSec = this.SampleTime / 1000;\n  this.kp = Kp;\n  this.ki = Ki * this.SampleTimeInSec;\n  this.kd = Kd / this.SampleTimeInSec;\n};\n\n/**\n * SetSampleTime(...)\n * sets the period, in Milliseconds, at which the calculation is performed\n */\nPID.prototype.setSampleTime = function(NewSampleTime) {\n  if (NewSampleTime > 0) {\n    var ratio = NewSampleTime / (1.0 * this.SampleTime);\n    this.ki *= ratio;\n    this.kd /= ratio;\n    this.SampleTime = Math.round(NewSampleTime);\n  }\n};\n\n/**\n * SetOutput( )\n * Set output level if in manual mode\n */\nPID.prototype.setOutput = function(val) {\n  if (val > this.outMax) {\n    val = this.outMax; // POSSIBLY INCORRECT\n  } else if (val < this.outMin) {\n    val = this.outMin;\n  }\n  this.myOutput = val;\n};\n\n/**\n * SetOutputLimits(...)\n * This function will be used far more often than SetInputLimits.  while\n * the input to the controller will generally be in the 0-1023 range (which is\n * the default already,)  the output will be a little different.  maybe they'll\n * be doing a time window and will need 0-8000 or something.  or maybe they'll\n * want to clamp it from 0-125.  who knows.  at any rate, that can all be done here.\n */\nPID.prototype.setOutputLimits = function(Min, Max) {\n  if (Min >= Max) {\n    return;\n  }\n  this.outMin = Min;\n  this.outMax = Max;\n\n  if (this.inAuto) {\n    if (this.myOutput > this.outMax) {\n      this.myOutput = this.outMax;\n    } else if (this.myOutput < this.outMin) {\n      this.myOutput = this.outMin;\n    }\n\n    if (this.ITerm > this.outMax - this.myBias) {\n      this.ITerm = this.outMax - this.myBias;\n    } else if (this.ITerm < this.outMin - this.myBias) {\n      this.ITerm = this.outMin - this.myBias;\n    }\n  }\n};\n\n/**\n * SetMode(...)\n * Allows the controller Mode to be set to manual (0) or Automatic (non-zero)\n * when the transition from manual to auto occurs, the controller is\n * automatically initialized\n */\nPID.prototype.setMode = function(Mode) {\n  var newAuto;\n  if (\n    Mode == 0 ||\n    Mode.toString().toLowerCase() == 'automatic' ||\n    Mode.toString().toLowerCase() == 'auto'\n  ) {\n    newAuto = 1;\n  } else if (Mode == 1 || Mode.toString().toLowerCase() == 'manual') {\n    newAuto = 0;\n  } else {\n    throw new Error('Incorrect Mode Chosen');\n  }\n  /*  Removed in favor of manually triggered 'Reset'(using Initialize()).\n  if (newAuto == !this.inAuto) {\n    //we just went from manual to auto\n    this.initialize();   \n  }\n  */\n  this.inAuto = newAuto;\n};\n\n/**\n * Initialize()\n * does all the things that need to happen to ensure a bumpless transfer\n * from manual to automatic mode.\n */\nPID.prototype.initialize = function() {\n  //this.ITerm = this.myOutput;\n  this.ITerm = 0;\n  this.myOutput = this.myBias;\n  this.lastInput = this.input;\n  /*\n  if (this.ITerm > this.outMax) {\n    this.ITerm = this.outMax;\n  } else if (this.ITerm < this.outMin) {\n    this.ITerm = this.outMin;\n  }\n  */\n};\n\n/**\n * SetControllerDirection(...)\n * The PID will either be connected to a DIRECT acting process (+Output leads\n * to +Input) or a REVERSE acting process(+Output leads to -Input.)  we need to\n * know which one, because otherwise we may increase the output when we should\n * be decreasing.  This is called from the constructor.\n */\nPID.prototype.setControllerDirection = function(ControllerDirection) {\n  if (ControllerDirection == 0 || ControllerDirection.toString().toLowerCase() == 'direct') {\n    this.setDirection = 1;\n  } else if (\n    ControllerDirection == 1 ||\n    ControllerDirection.toString().toLowerCase() == 'reverse'\n  ) {\n    this.setDirection = -1;\n  } else {\n    throw new Error('Incorrect Controller Direction Chosen');\n  }\n};\n\n/**\n * Status Functions\n * Just because you set the Kp=-1 doesn't mean it actually happened.  these\n * functions query the internal state of the PID.  they're here for display\n * purposes.  this are the functions the PID Front-end uses for example\n */\nPID.prototype.getKp = function() {\n  return this.dispKp;\n};\n\nPID.prototype.getKd = function() {\n  return this.dispKd;\n};\n\nPID.prototype.getKi = function() {\n  return this.dispKi;\n};\n\nPID.prototype.getMode = function() {\n  return this.inAuto ? 'Auto' : 'Manual';\n};\n\nPID.prototype.getDirection = function() {\n  return this.controllerDirection;\n};\n\nPID.prototype.getOutput = function() {\n  return this.myOutput;\n};\n\nPID.prototype.getInput = function() {\n  return this.input;\n};\n\nPID.prototype.getSetPoint = function() {\n  return this.mySetpoint;\n};\n\nPID.prototype.getBias = function() {\n  return this.myBias;\n};\n\nmodule.exports = PID;\n","import { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass ToggleDurationNode extends Node {\n  startTime;\n  lastTrigger;\n  runState;\n  runtimeVal;\n  timeoutFunc;\n\n  constructor() {\n    super();\n  \n    this.title = NODE_INFO.hvac[\"toggle-duration\"].title;\n    this.description = NODE_INFO.hvac[\"toggle-duration\"].description;\n   \n    this.addInput('pushButton', Type.BOOLEAN);\n    this.addInputWithSettings('runtime', Type.NUMBER, 120, 'Runtime');\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('remainingRuntime', Type.NUMBER);\n    \n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.SECONDS, text: 'Seconds' },\n          { value: TIME_TYPE.MINUTES, text: 'Minutes' },\n          { value: TIME_TYPE.HOURS, text: 'Hours' },\n        ],\n      },\n      value: TIME_TYPE.MINUTES,\n    });\n    this.settings['useOffDelay'] = NodeSetting.create({\n      description: 'Long Hold for OFF?',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['offDelay'] = NodeSetting.create({\n      description: 'OFF Push Delay (Seconds)',\n      value: 20,\n      type: SettingType.NUMBER,\n    });\n    this.setSettingsConfig({\n      groups: [\n        { runtime: { weight: 2 }, time: {} },\n      ],\n      conditions: {\n        offDelay: setting => !!setting['useOffDelay'].value,\n      },\n    });\n  }\n\n  onCreated() {\n    this.setOutputData(0, false);\n    this.lastTrigger = false;\n    this.onAfterSettingsChange();\n  }\n\n  onAdded() {\n    this.inputs[1]['name'] = `[runtime] (${this.settings['time'].value})`;\n    this.EXECUTE_INTERVAL = 10000;\n    this.onAfterSettingsChange();\n  }\n\n  onExecute() {\n    if (this.runState) {\n      const remainingMins = (this.runtimeVal - (new Date().valueOf() - this.startTime)) * 1.6667e-5;\n      this.setOutputData(1, remainingMins.toFixed(1));\n      if (remainingMins <= 0) this.stop();\n    }\n  }\n\n  onInputUpdated() {\n    let trigger = this.getInputData(0);\n    if (trigger == null) this.lastTrigger = false;\n    if (!trigger) this.properties['offPushStartTime'] = null;\n    else if (trigger && !this.lastTrigger) {\n      let runtime = this.getInputData(1);\n      runtime = TimeUtils.timeConvert(runtime, this.settings['time'].value);\n      if (this.runState){ \n        if (this.settings['useOffDelay'].value && this.properties['offPushStartTime'] == null){\n          this.startCountdown();\n        }\n        else this.stop();\n      }\n      else this.start(runtime);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  startCountdown(){\n    this.properties['offPushStartTime'] = Date.now();\n    this.timeoutFunc = setInterval(() => {\n      const trigger = this.getInputData(0);\n      console.log(\"checking if the button is till held\")\n      if (!trigger || !this.settings['useOffDelay'].value) {\n        this.properties['offPushStartTime'] = null;\n        clearInterval(this.timeoutFunc);\n      }\n      else if ((this.properties['offPushStartTime'] + TimeUtils.timeConvert(this.settings['offDelay'].value, TIME_TYPE.SECONDS)) <= Date.now()) {\n        this.properties['offPushStartTime'] = null;\n        clearInterval(this.timeoutFunc);\n        this.stop();\n      }\n    }, 1000);\n  }\n\n  start(runtime) {\n    this.runState = true;\n    this.runtimeVal = runtime;\n    this.EXECUTE_INTERVAL = Math.max(Math.min(10000, runtime / 10), 250);\n    this.startTime = new Date().valueOf();\n    this.setOutputData(0, true);\n    this.onExecute();\n  }\n\n  stop() {\n    this.runState = false;\n    this.setOutputData(0, false);\n    this.setOutputData(1, 0);\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[1]['name'] = `[runtime] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n}\nNodeTypeRegistry.registerNodeType('hvac/toggle-duration', ToggleDurationNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nconst psychrolib = require('../../lib/psychrolib');\n\nclass PsychrometricCalculationsNode extends Node {\n  psychro = new psychrolib();\n  conversionFunction;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.hvac.psychrometrics.title;\n    this.description = NODE_INFO.hvac.psychrometrics.description;\n    this.addInput('DryBulb', Type.NUMBER);\n    this.addInput('RelHum(0-1)', Type.NUMBER);\n    this.addInput('Pressure', Type.NUMBER);\n    this.addOutput('HumRatio', Type.NUMBER);\n    this.addOutput('TWetBulb', Type.NUMBER);\n    this.addOutput('TDewPoint', Type.NUMBER);\n    this.addOutput('VapPres', Type.NUMBER);\n    this.addOutput('MoistAirEnthalpy', Type.NUMBER);\n    this.addOutput('MoistAirVolume', Type.NUMBER);\n    this.addOutput('DegreeOfSaturation', Type.NUMBER);\n    this.addOutput('error', Type.STRING);\n    this.settings['units'] = NodeSetting.create({\n      description: 'Select Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'SI', text: 'Metric/SI' },\n          { value: 'IP', text: 'Imperial/IP' },\n        ],\n      },\n      value: 'SI',\n    });\n    this.settings['inputsSelect'] = NodeSetting.create({\n      description: 'Select Inputs',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'DB_RH_P', text: 'Dry Bulb, Rel. Humidity, Pressure' },\n          { value: 'DB_WB_P', text: 'Dry Bulb, Wet Bulb, Pressure' },\n          { value: 'DB_DP_P', text: 'Dry Bulb, Dew Point, Pressure ' },\n        ],\n      },\n      value: 'DB_RH_P',\n    });\n    this.settings['precision'] = NodeSetting.create({ description: 'Precision', type: SettingType.NUMBER, value: 4 });\n    this.psychro.SetUnitSystem(this.psychro.SI);\n  }\n\n  onAdded() {\n    this.setConversionFunction();\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.setConversionFunction();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    const input1 = this.getInputData(0);\n    const input2 = this.getInputData(1);\n    const input3 = this.getInputData(2);\n\n    if (!Utils.hasInput(input1) || !Utils.hasInput(input2) || !Utils.hasInput(input3)) {\n      this.clearOutputs();\n      this.setOutputData(7, null);\n      return;\n    }\n\n    let outputArray: number[];\n    try {\n      outputArray = this.conversionFunction(input1, input2, input3);\n    } catch (error) {\n      this.clearOutputs();\n      this.setOutputData(7, String(error));\n      return;\n    }\n    const precision = Math.abs(this.settings['precision'].value);\n    this.setOutputData(0, Number(outputArray[0]).toFixed(precision));\n    this.setOutputData(1, Number(outputArray[1]).toFixed(precision));\n    this.setOutputData(2, Number(outputArray[2]).toFixed(precision));\n    this.setOutputData(3, Number(outputArray[3]).toFixed(precision));\n    this.setOutputData(4, Number(outputArray[4]).toFixed(precision));\n    this.setOutputData(5, Number(outputArray[5]).toFixed(precision));\n    this.setOutputData(6, Number(outputArray[6]).toFixed(precision));\n    this.setOutputData(7, null);\n  }\n\n  private clearOutputs() {\n    this.setOutputData(0, null);\n    this.setOutputData(1, null);\n    this.setOutputData(2, null);\n    this.setOutputData(3, null);\n    this.setOutputData(4, null);\n    this.setOutputData(5, null);\n    this.setOutputData(6, null);\n  }\n\n  private setConversionFunction() {\n    const units = this.settings['units'].value;\n    if (units == 'IP') {\n      this.psychro.SetUnitSystem(this.psychro.IP);\n      this.title = 'Psychrometric Calcs (Imperial/IP)';\n    } else {\n      this.psychro.SetUnitSystem(this.psychro.SI);\n      this.title = 'Psychrometric Calcs (Metric/SI)';\n    }\n\n    const conversion = this.settings['inputsSelect'].value;\n    switch (conversion) {\n      case 'DB_RH_P':\n        this.inputs[0].name = 'DryBulb';\n        this.inputs[1].name = 'RelHum(0-1)';\n        this.inputs[2].name = 'Pressure';\n        this.outputs[0].name = 'HumRatio';\n        this.outputs[1].name = 'TWetBulb';\n        this.outputs[2].name = 'TDewPoint';\n        this.conversionFunction = (in1, in2, in3) => {\n          return this.psychro.CalcPsychrometricsFromRelHum(in1, in2, in3);\n        };\n        break;\n      case 'DB_WB_P':\n        this.inputs[0].name = 'DryBulb';\n        this.inputs[1].name = 'TWetBulb';\n        this.inputs[2].name = 'Pressure';\n        this.outputs[0].name = 'HumRatio';\n        this.outputs[1].name = 'TDewPoint';\n        this.outputs[2].name = 'RelHum';\n        this.conversionFunction = (in1, in2, in3) => {\n          return this.psychro.CalcPsychrometricsFromTWetBulb(in1, in2, in3);\n        };\n        break;\n      case 'DB_DP_P':\n        this.inputs[0].name = 'DryBulb';\n        this.inputs[1].name = 'TDewPoint';\n        this.inputs[2].name = 'Pressure';\n        this.outputs[0].name = 'HumRatio';\n        this.outputs[1].name = 'TWetBulb';\n        this.outputs[2].name = 'RelHum';\n        this.conversionFunction = (in1, in2, in3) => {\n          return this.psychro.CalcPsychrometricsFromTDewPoint(in1, in2, in3);\n        };\n        break;\n      default:\n        this.inputs[0].name = 'DryBulb';\n        this.inputs[1].name = 'RelHum(0-1)';\n        this.inputs[2].name = 'Pressure';\n        this.outputs[0].name = 'HumRatio';\n        this.outputs[1].name = 'TWetBulb';\n        this.outputs[2].name = 'TDewPoint';\n        this.conversionFunction = (in1, in2, in3) => {\n          return this.psychro.CalcPsychrometricsFromRelHum(in1, in2, in3);\n        };\n    }\n  }\n}\nContainer.registerNodeType('hvac/psychrometrics', PsychrometricCalculationsNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass EnergyUnitConversionNode extends Node {\n  conversionFunction;\n\n  constructor() {\n    super();\n   \n    this.title = NODE_INFO.hvac[\"energy-conversion\"].title;\n    this.description = NODE_INFO.hvac[\"energy-conversion\"].description;\n\n    this.addInput('Wh', Type.NUMBER);\n    this.addOutput('kWh', Type.NUMBER);\n    this.addOutput('Btu', Type.NUMBER);\n    this.addOutput('cal', Type.NUMBER);\n    this.addOutput('J', Type.NUMBER);\n    this.addOutput('kJ', Type.NUMBER);\n    this.settings['inputType'] = NodeSetting.create({\n      description: 'Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'Wh', text: 'watt-hour (Wh)' },\n          { value: 'kWh', text: 'kilowatt-hour (kWh)' },\n          { value: 'Btu', text: 'British Thermal Unit (Btu)' },\n          { value: 'cal', text: 'calorie (cal)' },\n          { value: 'J', text: 'joule(J)' },\n          { value: 'kJ', text: 'kilojoule(kJ)' },\n        ],\n      },\n      value: 'Wh',\n    });\n    this.settings['precision'] = NodeSetting.create({ description: 'Precision', type: SettingType.NUMBER, value: '4' });\n  }\n\n  onAdded() {\n    this.setConversionFunction();\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.setConversionFunction();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    const input = this.getInputData(0);\n    if (!Utils.hasInput(input)) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n      this.setOutputData(2, null);\n      this.setOutputData(3, null);\n      this.setOutputData(4, null);\n      return;\n    }\n    const output = this.conversionFunction(input);\n    const precision = Math.abs(this.settings['precision'].value);\n    this.setOutputData(0, Number(output[0]).toFixed(precision));\n    this.setOutputData(1, Number(output[1]).toFixed(precision));\n    this.setOutputData(2, Number(output[2]).toFixed(precision));\n    this.setOutputData(3, Number(output[3]).toFixed(precision));\n    this.setOutputData(4, Number(output[4]).toFixed(precision));\n  }\n\n  setConversionFunction() {\n    const inputType = this.settings['inputType'].value;\n    switch (inputType) {\n      case 'Wh':\n        this.title = 'Energy Conversion (Wh)';\n        this.inputs[0].name = 'Wh';\n        this.outputs[0].name = 'kWh';\n        this.outputs[1].name = 'Btu';\n        this.outputs[2].name = 'cal';\n        this.outputs[3].name = 'J';\n        this.outputs[4].name = 'kJ';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null, null];\n          outputArray[0] = input * 0.001;\n          outputArray[1] = input * 3.4121416331;\n          outputArray[2] = input * 859.8456;\n          outputArray[3] = input * 3600;\n          outputArray[4] = input * 3.6;\n          return outputArray;\n        };\n        break;\n      case 'kWh':\n        this.title = 'Energy Conversion (kWh)';\n        this.inputs[0].name = 'kWh';\n        this.outputs[0].name = 'Wh';\n        this.outputs[1].name = 'Btu';\n        this.outputs[2].name = 'cal';\n        this.outputs[3].name = 'J';\n        this.outputs[4].name = 'kJ';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null, null];\n          outputArray[0] = input * 1000;\n          outputArray[1] = input * 3412.1416331279;\n          outputArray[2] = input * 859845.6;\n          outputArray[3] = input * 3600000;\n          outputArray[4] = input * 3600;\n          return outputArray;\n        };\n        break;\n      case 'Btu':\n        this.title = 'Energy Conversion (Btu)';\n        this.inputs[0].name = 'Btu';\n        this.outputs[0].name = 'Wh';\n        this.outputs[1].name = 'kWh';\n        this.outputs[2].name = 'cal';\n        this.outputs[3].name = 'J';\n        this.outputs[4].name = 'kJ';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null, null];\n          outputArray[0] = input * 0.2930710702;\n          outputArray[1] = input * 0.0002930711;\n          outputArray[2] = input * 251.99587;\n          outputArray[3] = input * 1055.05585262;\n          outputArray[4] = input * 1.0550558526;\n          return outputArray;\n        };\n        break;\n      case 'cal':\n        this.title = 'Energy Conversion (cal)';\n        this.inputs[0].name = 'cal';\n        this.outputs[0].name = 'Wh';\n        this.outputs[1].name = 'kWh';\n        this.outputs[2].name = 'Btu';\n        this.outputs[3].name = 'J';\n        this.outputs[4].name = 'kJ';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null, null];\n          outputArray[0] = input * 0.0011629995;\n          outputArray[1] = input * 0.000001163;\n          outputArray[2] = input * 0.003968319;\n          outputArray[3] = input * 4.1867982;\n          outputArray[4] = input * 0.0041867982;\n          return outputArray;\n        };\n        break;\n      case 'J':\n        this.title = 'Energy Conversion (J)';\n        this.inputs[0].name = 'J';\n        this.outputs[0].name = 'Wh';\n        this.outputs[1].name = 'kWh';\n        this.outputs[2].name = 'Btu';\n        this.outputs[3].name = 'cal';\n        this.outputs[4].name = 'kJ';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null, null];\n          outputArray[0] = input * 0.0002777778;\n          outputArray[1] = input * 0.0000002777778;\n          outputArray[2] = input * 0.0009478171;\n          outputArray[3] = input * 0.238846;\n          outputArray[4] = input * 0.001;\n          return outputArray;\n        };\n        break;\n      case 'kJ':\n        this.title = 'Energy Conversion (kJ)';\n        this.inputs[0].name = 'kJ';\n        this.outputs[0].name = 'Wh';\n        this.outputs[1].name = 'kWh';\n        this.outputs[2].name = 'Btu';\n        this.outputs[3].name = 'cal';\n        this.outputs[4].name = 'J';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null, null];\n          outputArray[0] = input * 0.2777777778;\n          outputArray[1] = input * 0.0002777778;\n          outputArray[2] = input * 0.9478171203;\n          outputArray[3] = input * 238.846;\n          outputArray[4] = input * 1000;\n          return outputArray;\n        };\n        break;\n      default:\n        this.title = 'Energy Conversion (Wh)';\n        this.inputs[0].name = 'Wh';\n        this.outputs[0].name = 'kWh';\n        this.outputs[1].name = 'Btu';\n        this.outputs[2].name = 'cal';\n        this.outputs[3].name = 'J';\n        this.outputs[4].name = 'kJ';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null, null];\n          outputArray[0] = input * 0.001;\n          outputArray[1] = input * 3.4121416331;\n          outputArray[2] = input * 859.8456;\n          outputArray[3] = input * 3600;\n          outputArray[4] = input * 3.6;\n          return outputArray;\n        };\n    }\n  }\n}\nContainer.registerNodeType('hvac/energy-conversion', EnergyUnitConversionNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass PowerUnitConversionNode extends Node {\n  conversionFunction;\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.hvac[\"power-conversion\"].title;\n    this.description = NODE_INFO.hvac[\"power-conversion\"].description;\n\n    this.addInput('kW', Type.NUMBER);\n    this.addOutput('tons', Type.NUMBER);\n    this.addOutput('Btu/h', Type.NUMBER);\n    this.addOutput('hp', Type.NUMBER);\n    this.settings['inputType'] = NodeSetting.create({\n      description: 'Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'kW', text: 'kilowatt (kW)' },\n          { value: 'tons', text: 'Tons of Refrigeration (tons)' },\n          { value: 'Btu/h', text: 'British Thermal Unit per hour (Btu/h)' },\n          { value: 'hp', text: 'Electrical Horsepower (hp)' },\n        ],\n      },\n      value: 'kW',\n    });\n    this.settings['precision'] = NodeSetting.create({ description: 'Precision', type: SettingType.NUMBER, value: '4' });\n  }\n\n  onAdded() {\n    this.setConversionFunction();\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.setConversionFunction();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    const input = this.getInputData(0);\n    if (!Utils.hasInput(input)) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n      this.setOutputData(2, null);\n\n      return;\n    }\n    const output = this.conversionFunction(input);\n    const precision = Math.abs(this.settings['precision'].value);\n    this.setOutputData(0, Number(output[0]).toFixed(precision));\n    this.setOutputData(1, Number(output[1]).toFixed(precision));\n    this.setOutputData(2, Number(output[2]).toFixed(precision));\n  }\n\n  setConversionFunction() {\n    const inputType = this.settings['inputType'].value;\n    switch (inputType) {\n      case 'kW':\n        this.title = 'Power Conversion (kW)';\n        this.inputs[0].name = 'kW';\n        this.outputs[0].name = 'tons';\n        this.outputs[1].name = 'Btu/h';\n        this.outputs[2].name = 'hp';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 0.284345;\n          outputArray[1] = input * 3412.141635133076;\n          outputArray[2] = input * 1.340482573727;\n          return outputArray;\n        };\n        break;\n      case 'tons':\n        this.title = 'Power Conversion (tons)';\n        this.inputs[0].name = 'tons';\n        this.outputs[0].name = 'kW';\n        this.outputs[1].name = 'Btu/h';\n        this.outputs[2].name = 'hp';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 3.51685;\n          outputArray[1] = input * 12000;\n          outputArray[2] = input * 4.71427613941;\n          return outputArray;\n        };\n        break;\n      case 'Btu/h':\n        this.title = 'Power Conversion (Btu/h)';\n        this.inputs[0].name = 'Btu/h';\n        this.outputs[0].name = 'kW';\n        this.outputs[1].name = 'tons';\n        this.outputs[2].name = 'hp';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 0.00029307107;\n          outputArray[1] = input * 8.33333332843549e-5;\n          outputArray[2] = input * 0.000392856662;\n          return outputArray;\n        };\n        break;\n      case 'hp':\n        this.title = 'Power Conversion (hp)';\n        this.inputs[0].name = 'hp';\n        this.outputs[0].name = 'kW';\n        this.outputs[1].name = 'tons';\n        this.outputs[2].name = 'Btu/h';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 0.746;\n          outputArray[1] = input * 2545.457659809275;\n          outputArray[2] = input * 0.21212147;\n          return outputArray;\n        };\n        break;\n      default:\n        this.title = 'Power Conversion (kW)';\n        this.inputs[0].name = 'kW';\n        this.outputs[0].name = 'tons';\n        this.outputs[1].name = 'Btu/h';\n        this.outputs[2].name = 'hp';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 0.284345;\n          outputArray[1] = input * 3412.141635133076;\n          outputArray[2] = input * 1.340482573727;\n          return outputArray;\n        };\n    }\n  }\n}\nContainer.registerNodeType('hvac/power-conversion', PowerUnitConversionNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass VolumeUnitConversionNode extends Node {\n  conversionFunction;\n\n  constructor() {\n    super();\n    \n    this.title = NODE_INFO.hvac[\"volume-conversion\"].title;\n    this.description = NODE_INFO.hvac[\"volume-conversion\"].description;\n   \n    this.addInput('L', Type.NUMBER);\n    this.addOutput('M', Type.NUMBER);\n    this.addOutput('ft', Type.NUMBER);\n    this.addOutput('gal', Type.NUMBER);\n    this.settings['inputType'] = NodeSetting.create({\n      description: 'Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'L', text: 'Litre (L)' },\n          { value: 'm', text: 'Cubic Metre (m)' },\n          { value: 'ft', text: 'Cubic Foot (ft)' },\n          { value: 'gal', text: 'Gallon (gal)' },\n        ],\n      },\n      value: 'L',\n    });\n    this.settings['precision'] = NodeSetting.create({ description: 'Precision', type: SettingType.NUMBER, value: '4' });\n  }\n\n  onAdded() {\n    this.setConversionFunction();\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.setConversionFunction();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    const input = this.getInputData(0);\n    if (!Utils.hasInput(input)) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n      this.setOutputData(2, null);\n\n      return;\n    }\n    const output = this.conversionFunction(input);\n    const precision = Math.abs(this.settings['precision'].value);\n    this.setOutputData(0, Number(output[0]).toFixed(precision));\n    this.setOutputData(1, Number(output[1]).toFixed(precision));\n    this.setOutputData(2, Number(output[2]).toFixed(precision));\n  }\n\n  private setConversionFunction() {\n    const inputType = this.settings['inputType'].value;\n    switch (inputType) {\n      case 'L':\n        this.title = 'Volume Conversion (L)';\n        this.inputs[0].name = 'L';\n        this.outputs[0].name = 'm';\n        this.outputs[1].name = 'ft';\n        this.outputs[2].name = 'gal';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 0.001;\n          outputArray[1] = input * 0.0353147;\n          outputArray[2] = input * 0.2642;\n          return outputArray;\n        };\n        break;\n      case 'm':\n        this.title = 'Volume Conversion (m)';\n        this.inputs[0].name = 'm';\n        this.outputs[0].name = 'L';\n        this.outputs[1].name = 'ft';\n        this.outputs[2].name = 'gal';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 1000;\n          outputArray[1] = input * 35.3147;\n          outputArray[2] = input * 264.2;\n          return outputArray;\n        };\n        break;\n      case 'ft':\n        this.title = 'Volume Conversion (ft)';\n        this.inputs[0].name = 'ft';\n        this.outputs[0].name = 'm';\n        this.outputs[1].name = 'L';\n        this.outputs[2].name = 'gal';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 0.0283168;\n          outputArray[1] = input * 28.3168;\n          outputArray[2] = input * 7.481;\n          return outputArray;\n        };\n        break;\n      case 'gal':\n        this.title = 'Volume Conversion (gal)';\n        this.inputs[0].name = 'gal';\n        this.outputs[0].name = 'm';\n        this.outputs[1].name = 'L';\n        this.outputs[2].name = 'ft';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 0.00378541;\n          outputArray[1] = input * 3.78541;\n          outputArray[2] = input * 0.133681;\n          return outputArray;\n        };\n        break;\n      default:\n        this.title = 'Volume Conversion (L)';\n        this.inputs[0].name = 'L';\n        this.outputs[0].name = 'm';\n        this.outputs[1].name = 'ft';\n        this.outputs[2].name = 'gal';\n        this.conversionFunction = input => {\n          const outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 0.001;\n          outputArray[1] = input * 0.0353147;\n          outputArray[2] = input * 0.2642;\n          return outputArray;\n        };\n    }\n  }\n}\nContainer.registerNodeType('hvac/volume-conversion', VolumeUnitConversionNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nconst psychrolib = require('../../lib/psychrolib');\n\nclass TempConvertNode extends Node {\n  conversionFunction;\n  psychro = new psychrolib();\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.hvac[\"temperature-conversion\"].title;\n    this.description = NODE_INFO.hvac[\"temperature-conversion\"].description;\n    this.addInput('input', Type.NUMBER);\n    this.addOutput('output', Type.NUMBER);\n    this.settings['convertType'] = NodeSetting.create({\n      description: 'Conversion Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'C_to_F', text: 'Celsius to Fahrenheit' },\n          { value: 'C_to_K', text: 'Celsius to Kelvin' },\n          { value: 'C_to_R', text: 'Celsius to Rankine' },\n          { value: 'F_to_C', text: 'Fahrenheit to Celsius' },\n          { value: 'F_to_K', text: 'Fahrenheit to Kelvin' },\n          { value: 'F_to_R', text: 'Fahrenheit to Rankine' },\n          { value: 'K_to_C', text: 'Kelvin to Celsius' },\n          { value: 'K_to_F', text: 'Kelvin to Fahrenheit' },\n          { value: 'K_to_R', text: 'Kelvin to Rankine' },\n          { value: 'R_to_C', text: 'Rankine to Celsius' },\n          { value: 'R_to_F', text: 'Rankine to Fahrenheit' },\n          { value: 'R_to_K', text: 'Rankine to Kelvin' },\n        ],\n      },\n      value: 'C_to_F',\n    });\n    this.settings['precision'] = NodeSetting.create({ description: 'Precision', type: SettingType.NUMBER, value: 2 });\n  }\n\n  onAdded() {\n    this.setConversionFunction();\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.setConversionFunction();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    const input = Number(this.getInputData(0));\n    if (!Utils.hasInput(input)) {\n      this.setOutputData(0, null);\n      return;\n    }\n    const precision = Math.abs(this.settings['precision'].value);\n    const output = Number(this.conversionFunction(input)).toFixed(precision);\n    this.setOutputData(0, output);\n  }\n\n  private setConversionFunction() {\n    const conversion = this.settings['convertType'].value;\n    console.log(conversion, ': converstion');\n    switch (conversion) {\n      case 'C_to_F':\n        this.title = 'Temperature Conversion (C-> F)';\n        this.conversionFunction = this.psychro.GetTFahrenheitFromTCelsius;\n        break;\n      case 'C_to_K':\n        this.title = 'Temperature Conversion (C-> K)';\n        console.log('C_to_K');\n        this.conversionFunction = this.psychro.GetTKelvinFromTCelsius;\n        break;\n      case 'C_to_R':\n        this.title = 'Temperature Conversion (C-> R)';\n        this.conversionFunction = this.psychro.GetTRankineFromTCelsius;\n        break;\n      case 'F_to_C':\n        this.title = 'Temperature Conversion (F-> C)';\n        this.conversionFunction = this.psychro.GetTCelsiusFromTFahrenheit;\n        break;\n      case 'F_to_K':\n        this.title = 'Temperature Conversion (F-> K)';\n        this.conversionFunction = this.psychro.GetTKelvinFromTFahrenheit;\n        break;\n      case 'F_to_R':\n        this.title = 'Temperature Conversion (F-> R)';\n        this.conversionFunction = this.psychro.GetTRankineFromTFahrenheit;\n        break;\n      case 'K_to_C':\n        this.title = 'Temperature Conversion (K-> C)';\n        this.conversionFunction = this.psychro.GetTCelsiusFromTKelvin;\n        break;\n      case 'K_to_F':\n        this.title = 'Temperature Conversion (K-> F)';\n        this.conversionFunction = this.psychro.GetTFahrenheitFromTKelvin;\n        break;\n      case 'K_to_R':\n        this.title = 'Temperature Conversion (K-> R)';\n        this.conversionFunction = this.psychro.GetTRankineFromTKelvin;\n        break;\n      case 'R_to_C':\n        this.title = 'Temperature Conversion (R-> C)';\n        this.conversionFunction = this.psychro.GetTCelsiusFromTRankine;\n        break;\n      case 'R_to_F':\n        this.title = 'Temperature Conversion (R-> F)';\n        this.conversionFunction = this.psychro.GetTFahrenheitFromTRankine;\n        break;\n      case 'R_to_K':\n        this.title = 'Temperature Conversion (R-> K)';\n        this.conversionFunction = this.psychro.GetTKelvinFromTRankine;\n        break;\n      default:\n        this.title = 'Temperature Conversion (C-> F)';\n        this.conversionFunction = this.psychro.GetTFahrenheitFromTCelsius;\n    }\n  }\n}\nContainer.registerNodeType('hvac/temperature-conversion', TempConvertNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nconst psychrolib = require('../../lib/psychrolib');\n\nclass AtmosphericPressureNode extends Node {\n  psychro = new psychrolib();\n\n  constructor() {\n    super();\n   \n    this.title = NODE_INFO.hvac[\"atmospheric-pressure\"].title;\n    this.description = NODE_INFO.hvac[\"atmospheric-pressure\"].description;\n\n    this.addInput('altitude', Type.NUMBER);\n    this.addOutput('pressure', Type.NUMBER);\n    this.settings['units'] = NodeSetting.create({\n      description: 'Select Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'SI', text: 'Metric/SI (Meters-> Pa)' },\n          { value: 'IP', text: 'Imperial/IP (Feet-> Psi)' },\n        ],\n      },\n      value: 'SI',\n    });\n    this.settings['precision'] = NodeSetting.create({ description: 'Precision', type: SettingType.NUMBER, value: 2 });\n    this.psychro.SetUnitSystem(this.psychro.SI);\n  }\n\n  onAdded() {\n    this.updateTitleAndFunction();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.updateTitleAndFunction();\n    this.onInputOrSettingsChange();\n  }\n\n  private updateTitleAndFunction() {\n    const units = this.settings['units'].value;\n    if (units == 'IP') {\n      this.title = 'Atmospheric Pressure (Feet-> Psi)';\n      this.psychro.SetUnitSystem(this.psychro.IP);\n    } else {\n      this.title = 'Atmospheric Pressure (Meters-> Pa)';\n      this.psychro.SetUnitSystem(this.psychro.SI);\n    }\n  }\n\n  private onInputOrSettingsChange() {\n    const altitude = this.getInputData(0);\n    if (!Utils.hasInput(altitude)) {\n      this.setOutputData(0, null);\n      return;\n    }\n    const pressure = this.psychro.GetStandardAtmPressure(altitude);\n    const precision = Math.abs(this.settings['precision'].value);\n    this.setOutputData(0, Number(pressure).toFixed(precision));\n  }\n}\nContainer.registerNodeType('hvac/atmospheric-pressure', AtmosphericPressureNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass PressureConvertNode extends Node {\n  conversionFunction;\n  constructor() {\n    super();\n   \n    this.title = NODE_INFO.hvac[\"pressure-conversion\"].title;\n    this.description = NODE_INFO.hvac[\"pressure-conversion\"].description;\n   \n    this.addInput('Pa', Type.NUMBER);\n    this.addOutput('atm', Type.NUMBER);\n    this.addOutput('bar', Type.NUMBER);\n    this.addOutput('lbf/in2', Type.NUMBER);\n    this.settings['inputType'] = NodeSetting.create({\n      description: 'Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'Pa', text: 'Pascal (Pa)' },\n          { value: 'atm', text: 'Standard Atmosphere (atm)' },\n          { value: 'bar', text: 'Bar (bar)' },\n          { value: 'lbf/in2', text: 'Pound-force per square inch (lbf/in2)' },\n        ],\n      },\n      value: 'Pa',\n    });\n    this.settings['precision'] = NodeSetting.create({ description: 'Precision', type: SettingType.NUMBER, value: '2' });\n  }\n\n  onAdded() {\n    this.setConversionFunction();\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.setConversionFunction();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    const input = this.getInputData(0);\n    if (!Utils.hasInput(input)) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n      this.setOutputData(2, null);\n      return;\n    }\n    const output = this.conversionFunction(input);\n    const precision = Math.abs(this.settings['precision'].value);\n    this.setOutputData(0, Number(output[0]).toFixed(precision));\n    this.setOutputData(1, Number(output[1]).toFixed(precision));\n    this.setOutputData(2, Number(output[2]).toFixed(precision));\n  }\n\n  setConversionFunction() {\n    const inputType = this.settings['inputType'].value;\n    switch (inputType) {\n      case 'Pa':\n        this.title = 'Pressure Conversion (Pa)';\n        this.inputs[0].name = 'Pa';\n        this.outputs[0].name = 'atm';\n        this.outputs[1].name = 'bar';\n        this.outputs[2].name = 'lbf/in2';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 9.8692e-6;\n          outputArray[1] = input * 1e-5;\n          outputArray[2] = input * 0.000145038;\n          return outputArray;\n        };\n        break;\n      case 'atm':\n        this.title = 'Pressure Conversion (atm)';\n        this.inputs[0].name = 'atm';\n        this.outputs[0].name = 'Pa';\n        this.outputs[1].name = 'bar';\n        this.outputs[2].name = 'lbf/in2';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 101325;\n          outputArray[1] = input * 1.01325;\n          outputArray[2] = input * 14.6959;\n          return outputArray;\n        };\n        break;\n      case 'bar':\n        this.title = 'Pressure Conversion (bar)';\n        this.inputs[0].name = 'bar';\n        this.outputs[0].name = 'Pa';\n        this.outputs[1].name = 'atm';\n        this.outputs[2].name = 'lbf/in2';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 100000;\n          outputArray[1] = input * 0.986923;\n          outputArray[2] = input * 14.5038;\n          return outputArray;\n        };\n        break;\n      case 'lbf/in2':\n        this.title = 'Pressure Conversion (lbf/in2)';\n        this.inputs[0].name = 'lbf/in2';\n        this.outputs[0].name = 'Pa';\n        this.outputs[1].name = 'atm';\n        this.outputs[2].name = 'bar';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 6894.76;\n          outputArray[1] = input * 0.068046;\n          outputArray[2] = input * 0.0689476;\n          return outputArray;\n        };\n        break;\n      default:\n        this.title = 'Pressure Conversion (Pa)';\n        this.inputs[0].name = 'Pa';\n        this.outputs[0].name = 'atm';\n        this.outputs[1].name = 'bar';\n        this.outputs[2].name = 'lbf/in2';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null];\n          outputArray[0] = input * 9.8692e-6;\n          outputArray[1] = input * 1e-5;\n          outputArray[2] = input * 0.000145038;\n          return outputArray;\n        };\n    }\n  }\n}\nContainer.registerNodeType('hvac/pressure-conversion', PressureConvertNode);\n","import { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass ActuatorSizingNode extends Node {\n  conversionFunction;\n  constructor() {\n    super();\n   \n    this.title = NODE_INFO.hvac[\"actuator-sizing\"].title;\n    this.description = NODE_INFO.hvac[\"actuator-sizing\"].description;\n   \n    this.addInput('damperArea(m)', Type.NUMBER);\n    this.addOutput('torque(Nm)', Type.NUMBER);\n    this.addOutput('torque(lbf-in)', Type.NUMBER);\n\n    this.settings['units'] = NodeSetting.create({\n      description: 'Input Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Square Meters (m)' },\n          { value: false, text: 'Square Feet (ft)' },\n        ],\n      },\n      value: true,\n    });\n\n    this.settings['type'] = NodeSetting.create({\n      description: 'Damper Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 6, text: 'No Seals (Low Resistance)' },\n          { value: 7, text: 'With Seals (Medium Resistance)' },\n          { value: 8, text: 'Fire/Smoke (High Resistance)' },\n        ],\n      },\n      value: 6,\n    });\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.updateTitles();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    var input = this.getInputData(0);\n    if (!Utils.hasInput(input)) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n      return;\n    }\n\n    if (this.settings['units'].value) input = input * 10.7639;\n    const type = this.settings['type'].value;\n\n    // calculations are roughly based on https://controltrends.org/by-industry/commercial-hvac/actuators-and-valves/05/sizing-electronic-damper-actuators/ (with sizing reduced slightly);\n    const outputm2 = input * type * 0.112985;\n    const outputft2 = input * type;\n\n    this.setOutputData(0, outputm2.toFixed(2));\n    this.setOutputData(1, outputft2.toFixed(2));\n  }\n\n  updateTitles(){\n    if (this.settings['units'].value) this.inputs[0].name = 'ductArea(m)';\n    else this.inputs[0].name = 'ductArea(ft)';\n  }\n}\nNodeTypeRegistry.registerNodeType('hvac/actuator-sizing', ActuatorSizingNode);\n","import { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass KFactorNode extends Node {\n  constructor() {\n    super();\n   \n    this.title = NODE_INFO.hvac[\"k-factor\"].title;\n    this.description = NODE_INFO.hvac[\"k-factor\"].description;\n   \n    this.addInput('ductArea(m)', Type.NUMBER);\n    this.addInput('diffPressure(Pa)', Type.NUMBER);\n    this.addInput('airflow(L/s)', Type.NUMBER);\n    this.addOutput('Kfactor', Type.NUMBER);\n\n    this.settings['areaUnits'] = NodeSetting.create({\n      description: 'Duct Area Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Square Meters (m)' },\n          { value: false, text: 'Square Feet (ft)' },\n        ],\n      },\n      value: true,\n    });\n\n    this.settings['DPUnits'] = NodeSetting.create({\n      description: 'Differential Pressure Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Pascals (Pa)' },\n          { value: false, text: 'Inches of Water (in. w.g.)' },\n        ],\n      },\n      value: true,\n    });\n\n    this.settings['airflowUnits'] = NodeSetting.create({\n      description: 'Airflow Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Litres per Second (L/s)' },\n          { value: false, text: 'Cubic Feet per Minute (cfm)' },\n        ],\n      },\n      value: true,\n    });\n  }\n\n  onAdded() {\n    this.setOutputData(0, null);\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.updateTitles();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    var area = this.getInputData(0);\n    var DP = this.getInputData(1);\n    var airflow = this.getInputData(2);\n    if (area == null || DP == null || airflow == null) {\n      this.setOutputData(0, null);\n      return;\n    }\n\n    if (this.settings['areaUnits'].value) area = area * 10.7639;\n    if (this.settings['DPUnits'].value) DP = DP * 0.00401865;\n    if (this.settings['airflowUnits'].value) airflow = airflow * 2.11888;\n    \n    //Calculation reference https://cgproducts.johnsoncontrols.com/MET_PDF/6375120.PDF page 30\n    const kFactor = DP*Math.pow(((4005 * area)/airflow), 2);\n    this.setOutputData(0, kFactor.toFixed(2));\n\n  }\n\n  updateTitles(){\n    if (this.settings['areaUnits'].value) this.inputs[0].name = 'ductArea(m)';\n    else this.inputs[0].name = 'ductArea(ft)';\n    if (this.settings['areaUnits'].value) this.inputs[1].name = 'diffPressure(Pa)';\n    else this.inputs[1].name = 'diffPressure(in. w.g)';\n    if (this.settings['areaUnits'].value) this.inputs[0].name = 'airflow(L/s)';\n    else this.inputs[2].name = 'airflow(cfm)';\n  }\n}\nNodeTypeRegistry.registerNodeType('hvac/k-factor', KFactorNode);\n","import { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass DPAirflowNode extends Node {\n  constructor() {\n    super();\n   \n    this.title = NODE_INFO.hvac[\"dp-airflow\"].title;\n    this.description = NODE_INFO.hvac[\"dp-airflow\"].description;\n   \n    this.addInput('ductArea(m)', Type.NUMBER);\n    this.addInput('diffPressure(Pa)', Type.NUMBER);\n    this.addInput('Kfactor', Type.NUMBER);\n    this.addOutput('airflow(L/s)', Type.NUMBER);\n    this.addOutput('airflow(cfm)', Type.NUMBER);\n\n    this.settings['areaUnits'] = NodeSetting.create({\n      description: 'Duct Area Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Square Meters (m)' },\n          { value: false, text: 'Square Feet (ft)' },\n        ],\n      },\n      value: true,\n    });\n\n    this.settings['DPUnits'] = NodeSetting.create({\n      description: 'Differential Pressure Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Pascals (Pa)' },\n          { value: false, text: 'Inches of Water (in. w.g.)' },\n        ],\n      },\n      value: true,\n    });\n  }\n\n  onAdded() {\n    this.setOutputData(0, null);\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.updateTitles();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    var area = this.getInputData(0);\n    var DP = this.getInputData(1);\n    var KFactor = this.getInputData(2);\n    if (area == null || DP == null || KFactor == null) {\n      this.setOutputData(0, null);\n      return;\n    }\n\n    if (this.settings['areaUnits'].value) area = area * 10.7639;\n    if (this.settings['DPUnits'].value) DP = DP * 0.00401865;\n    \n\n    //Calculation reference https://cgproducts.johnsoncontrols.com/MET_PDF/6375120.PDF page 30\n    const airflowCFM = (4005 * area) * Math.sqrt(DP/KFactor);\n    const airflowLS = airflowCFM * 0.4719474;\n\n    this.setOutputData(0, airflowLS.toFixed(2));\n    this.setOutputData(1, airflowCFM.toFixed(2));\n  }\n\n  updateTitles(){\n    if (this.settings['areaUnits'].value) this.inputs[0].name = 'ductArea(m)';\n    else this.inputs[0].name = 'ductArea(ft)';\n    if (this.settings['areaUnits'].value) this.inputs[1].name = 'diffPressure(Pa)';\n    else this.inputs[1].name = 'diffPressure(in. w.g)';\n  }\n}\nNodeTypeRegistry.registerNodeType('hvac/dp-airflow', DPAirflowNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass ArrayBuilderNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.STRING;\n    this.title = NODE_INFO.json[\"array-builder\"].title;\n    this.description = NODE_INFO.json[\"array-builder\"].description; \n    this.addOutput('out', Type.STRING);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let out = []\n    for (let i = this.dynamicInputStartPosition; i < this.getInputsCount(); i++) {\n      out.push(this.getInputData(i))\n    }\n    this.setOutputData(0, out);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('json/array-builder', ArrayBuilderNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass ArrayBuilderNumNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    this.title = NODE_INFO.json[\"array-builder-number\"].title;\n    this.description = NODE_INFO.json[\"array-builder-number\"].description; \n    this.addOutput('out', Type.STRING);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let out = []\n    for (let i:any = this.dynamicInputStartPosition; i < this.getInputsCount(); i++) {\n      out.push(this.getInputData(parseInt(i)))\n    }\n    this.setOutputData(0, out);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('json/array-builder-number', ArrayBuilderNumNode);\n","import { Node } from '../../node';\nimport { Container } from '../../container';\nimport * as _ from 'lodash';\nimport { Type } from '../../node-io';\nimport { isNull } from '../../../utils/helper';\nimport { NODE_INFO } from '../../node-info';\n\nexport class ArrayCombineNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"array-combine\"].title;\n    this.description = NODE_INFO.json[\"array-combine\"].description; \n    this.addInput('input-1', Type.JSON);\n    this.addInput('input-2', Type.JSON);\n    this.addOutput('output-array', Type.JSON);\n    this.addOutput('output-object', Type.JSON);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let out = {};\n    const in1 = this.getInputData(0);\n    const in2 = this.getInputData(1);\n    if (isNull(in1)) return\n    if (isNull(in2)) return\n    try {\n      out = [...in1, ...in2]\n      this.setOutputData(0, out);\n    } catch (err) {\n      this.debugInfo(`ARRY-COMBINE NODE: try/catch concat, ${err}`);\n    }\n    try {\n      const merged = Object.assign({}, in1, in2)  \n      this.setOutputData(1, merged);\n    } catch (err) {\n      this.debugInfo(`ARRY-COMBINE NODE: try/catch assign, ${err}`);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n\n\n\n}\nContainer.registerNodeType('json/array-combine', ArrayCombineNode);\n","import * as _ from 'lodash';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nexport class JSONBuilderNode extends Node {\n  filterKeys: string[] = [];\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.json['json-builder'].title;\n    this.description = NODE_INFO.json['json-builder'].description;\n    this.settings['definition'] =NodeSetting.create({\n      description: 'payload definition (JSON)',\n      type: SettingType.STRING,\n      value: '',\n    });\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('output', Type.JSON);\n  }\n\n  init() {\n    this.addInputs();\n  }\n\n  onAdded() {\n    this.filterKeys = this.getFilterKeys();\n  }\n\n  onInputUpdated() {\n    let out = {};\n    for (let i = this.dynamicOutputStartPosition(); i < this.getInputsCount(); i++) {\n      out = { ...out, ...{ [this.filterKeys[i - 1]]: this.inputs[i].data } };\n    }\n    this.setOutputData(0, out);\n  }\n\n  onAfterSettingsChange() {\n    this.updateInputs();\n    this.onInputUpdated();\n  }\n\n  private updateInputs() {\n    const filterKeys = this.getFilterKeys();\n    let diffKeyFromPos = Math.min(this.filterKeys.length, filterKeys.length);\n    for (let i = 0; i < filterKeys.length; i++) {\n      if (this.filterKeys?.[i] != filterKeys[i]) {\n        diffKeyFromPos = i;\n        break;\n      }\n    }\n    const inputsCount = this.getInputsCount();\n    for (let i = diffKeyFromPos + this.dynamicOutputStartPosition(); i < inputsCount; i++) {\n      this.removeInput(i);\n    }\n    this.addInputs(diffKeyFromPos);\n  }\n\n  private addInputs(fromPos = 0) {\n    this.filterKeys = this.getFilterKeys();\n    for (let i = fromPos; i < this.filterKeys.length; i++) {\n      let name = this.filterKeys[i];\n      this.addInput(name.toString(), Type.ANY);\n    }\n  }\n\n  private getFilterKeys(): string[] {\n    return this.settings['definition'].value\n      .replace(/\\s+/g, '')\n      .split(',')\n      .filter(x => !!x);\n  }\n\n  private dynamicOutputStartPosition() {\n    return 1;\n  }\n}\nContainer.registerNodeType('json/json-builder', JSONBuilderNode);\n","import { isEmpty, isJSON, isNull } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nexport class JSONEnumBuilderNode extends Node {\n  filterKeys = [];\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"json-enum-builder\"].title;\n    this.description = NODE_INFO.json[\"json-enum-builder\"].description;\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInputWithSettings('definition', Type.JSON, '{\"pointOne\":22, \"pointTwo\":33}', 'JSON value');\n    this.addOutput('output', Type.ANY);\n    this.addOutput('valid-json', Type.BOOLEAN);\n    this.settings['json'] = NodeSetting.create({\n      description: 'Select output',\n      type: SettingType.DROPDOWN,\n      value: '',\n    });\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange()\n  }\n\n  onInputUpdated() {\n    this.getInputData(0);\n    this.onAfterSettingsChange()\n  }\n\n  onAfterSettingsChange() {\n    const input = this.getInputData(1);\n    if (isNull(input)) return;\n    if (isJSON(input) && !isEmpty(input)) {\n      const definition = Object.entries(input).map(\n        e => {\n          return { value: e[1], text: e[0] };\n        },\n      );\n      if (definition) {\n        this.settings['json'].config = {\n          items: definition,\n        };\n        const out = this.settings['json'].value\n        this.setOutputData(0, out);\n        this.setOutputData(1, true);\n        this.broadcastSettingsToClients();\n      }\n    } else this.setOutputData(1, false);\n  }\n\n\n\n\n}\nContainer.registerNodeType('json/json-enum-builder', JSONEnumBuilderNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport jsonStringCompare from '../../utils/string-json-compare-utils';\n\nclass JsonFilter extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"json-filter\"].title;\n    this.description = NODE_INFO.json[\"json-filter\"].description;\n    this.addInput('input', Type.JSON);\n    this.addOutput('output', Type.JSON);\n    this.addOutput('output-key', Type.STRING);\n    this.settings['filter'] = NodeSetting.create({\n      description: 'Example: key',\n      value: 'key',\n      type: SettingType.STRING,\n    });\n  }\n\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    if (input === null) {\n      this.setOutputData(0, null);\n      return;\n    }\n\n    try {\n      const filter = this.settings['filter'].value;\n      const out = input[0][filter]\n      this.setOutputData(0, out);\n\n    } catch (e) {\n      this.setOutputData(0, null);\n\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('json/json-filter', JsonFilter);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass JsonObjFilter extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"json-obj-filter\"].title;\n    this.description = NODE_INFO.json[\"json-obj-filter\"].description;\n    this.addInput('input', Type.JSON);\n    this.addOutput('output', Type.JSON);\n    this.settings['key'] = NodeSetting.create({\n      description: 'Example: key',\n      value: 'key',\n      type: SettingType.STRING,\n    });\n    this.settings['filter'] = NodeSetting.create({\n      description: 'Example: value',\n      value: 'value',\n      type: SettingType.STRING,\n    });\n  }\n\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    if (input === null) {\n      this.setOutputData(0, null);\n      return;\n    }\n\n    try {\n      const key = this.settings['key'].value;\n      const filter = this.settings['filter'].value;\n      const out = input.filter(obj => (obj[key] === filter)); \n      this.setOutputData(0, out);\n    } catch (e) {\n      this.setOutputData(0, null);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('json/json-obj-filter', JsonObjFilter);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport jsonStringCompare from '../../utils/string-json-compare-utils';\nimport { NODE_INFO } from '../../node-info';\n\nenum compareType {\n  Equals = 'Equals',\n  NotEquals = 'Not Equal',\n  GreaterThanEqual = 'Greater Than Equal',\n  GreaterThan = 'Greater Than',\n  LessThanEqual = 'Less Than Equal',\n  LessThan = 'Less Than',\n  Includes = 'Includes',\n  startsWith = 'Starts With',\n  endsWith = 'Ends With'\n}\n\nclass JsonFilterCompare extends Node {\n  conversionFunction;\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"json-filter-compare\"].title;\n    this.description = NODE_INFO.json[\"json-filter-compare\"].description; \n    this.addInput('input', Type.STRING);\n    this.addInputWithSettings('comparison-to', Type.STRING, '', 'Comparison Value');\n    this.addOutput('output', Type.STRING);\n    this.addOutput('output-key', Type.STRING);\n    this.addOutput('match', Type.BOOLEAN);\n    this.settings['filter'] = NodeSetting.create({\n      description: 'Example: msg.myKey',\n      value: 'myKey',\n      type: SettingType.STRING,\n    });\n    this.settings['function'] = NodeSetting.create({\n      description: 'Comparison Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: compareType.Equals, text: compareType.Equals },\n          { value: compareType.NotEquals, text: compareType.NotEquals },\n          { value: compareType.GreaterThanEqual, text: compareType.GreaterThanEqual },\n          { value: compareType.GreaterThan, text: compareType.GreaterThan },\n          { value: compareType.LessThanEqual, text: compareType.LessThanEqual },\n          { value: compareType.LessThan, text: compareType.LessThan },\n          { value: compareType.Includes, text: compareType.Includes },\n          { value: compareType.startsWith, text: compareType.startsWith },\n          { value: compareType.endsWith, text: compareType.endsWith },\n        ],\n      },\n      value: compareType.Equals,\n    });\n    this.settings['isNumber'] = NodeSetting.create({\n      description: 'Comparison value is a number',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['passNull'] = NodeSetting.create({\n      description: 'Send null if not a match',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n  this.onAfterSettingsChange()\n  }\n\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    if (input === null || input === undefined) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n      this.setOutputData(2, null);\n      return;\n    }\n    try {\n      const jsonCheck = JSON.parse(input);\n      const filter = this.settings['filter'].value;\n      let out = jsonStringCompare.findVal(jsonCheck, filter);\n      const string2 = this.getInputData(1);\n      if (jsonStringCompare.compare(this, out.value, string2)) {\n        this.setOutputData(0, out.value);\n        this.setOutputData(1, out.valueWithKey);\n        this.setOutputData(2, true);\n      } else if (this.settings['passNull'].value === true) {\n        this.setOutputData(0, null);\n        this.setOutputData(1, null);\n        this.setOutputData(2, false);\n      } else this.setOutputData(2, false);\n    } catch (e) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n      this.setOutputData(2, true);\n    }\n  }\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n    const inputType = this.settings['function'].value\n    const title = \"Json Comparison\"\n    this.title = `${title} Compare (${inputType})`;\n    this.broadcastTitleToClients();\n  }\n\n}\nContainer.registerNodeType('json/json-filter-compare', JsonFilterCompare);\n","import * as _ from 'lodash';\nimport { ErrorHandler } from '../../../utils/decorators';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\n\nclass JsonFilterMultiple extends Node {\n  outputsCount = 0;\n  filterKeys: Array<string> = [];\n\n  inInput: number = 0;\n\n  outError: number = 0;\n  outJsonOutput: number = 1;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.json['json-filter-multiple'].title;\n    this.description = NODE_INFO.json['json-filter-multiple'].description;\n    this.addInput('input', Type.JSON);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('json-output', Type.JSON);\n    this.settings['outputs_count'] = NodeSetting.create({\n      description: 'Number of Outputs',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n\n    this.setSettingsConfig({\n      groups: [{ outputs_count: {} }],\n    });\n  }\n\n  init() {\n    this.changeOutputsAndSettings();\n  }\n\n  onCreated() {\n    this.renameInputsOutputs();\n  }\n\n  onAdded() {\n    this.outputsCount = this.settings['outputs_count'].value;\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    const input = this.getInputData(this.inInput);\n    if (input == null) {\n      this.setOutputData(this.outError, null);\n      return;\n    }\n    try {\n      const outputJson: any = {};\n      for (let i = 0; i < this.filterKeys.length; i++) {\n        let out = _.get(input, this.filterKeys[i]);\n        if (out !== undefined) {\n          outputJson[this.filterKeys[i]] = out;\n          this.setOutputData(i + this.dynamicOutputStartPosition(), out);\n        }\n      }\n      this.setOutputData(this.outJsonOutput, outputJson);\n      this.setOutputData(this.outError, null);\n    } catch (e) {\n      this.setOutputData(this.outError, e.toString());\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.changeOutputsAndSettings();\n    this.renameInputsOutputs();\n    // update db\n    if (this.container.db)\n      this.container.db.updateNode(this.id, this.container.id, {\n        $set: { outputs: this.outputs, settings: this.settings },\n      });\n    this.onInputUpdated();\n  }\n\n  @ErrorHandler\n  changeOutputsAndSettings() {\n    let outputs = this.settings['outputs_count'].value;\n    outputs = Utils.clamp(outputs, 1, 10);\n    this.settings['outputs_count'].value = outputs;\n    // change outputs count\n    if (this.outputsCount != outputs) this.changeMyOutputsCount(outputs);\n  }\n\n  @ErrorHandler\n  changeMyOutputsCount(targetOutputCount) {\n    const diff = targetOutputCount - this.outputsCount;\n    if (diff == 0) return;\n    // add inputs, outputs\n    this.changeOutputsCount(targetOutputCount + this.dynamicOutputStartPosition(), Type.STRING);\n\n    // change settings for outputs\n    if (diff > 0) {\n      for (\n        let i = this.outputsCount + this.dynamicOutputStartPosition();\n        i < targetOutputCount + this.dynamicOutputStartPosition();\n        i++\n      ) {\n        this.settings['output' + this.getOutputNumber(i)] = NodeSetting.create({\n          description: 'Output ' + this.getOutputNumber(i),\n          value: '',\n          type: SettingType.STRING,\n        });\n      }\n    } else if (diff < 0) {\n      for (\n        let i = this.outputsCount + this.dynamicOutputStartPosition() - 1;\n        i >= targetOutputCount + this.dynamicOutputStartPosition();\n        i--\n      ) {\n        delete this.settings['output' + this.getOutputNumber(i)];\n      }\n    }\n    this.outputsCount = targetOutputCount;\n  }\n\n  @ErrorHandler\n  renameInputsOutputs() {\n    this.filterKeys = [];\n    for (let i = this.dynamicOutputStartPosition(); i < this.outputsCount + this.dynamicOutputStartPosition(); i++) {\n      this.filterKeys.push(this.settings['output' + this.getOutputNumber(i)].value);\n      const output = this.settings['output' + this.getOutputNumber(i)].value || '';\n      this.outputs[i].name = this.getOutputNumber(i) + ' | ' + output;\n      this.setOutputData(i, '');\n    }\n  }\n\n  private getOutputNumber(i: number): number {\n    return i - this.dynamicOutputStartPosition() + 1;\n  }\n\n  private dynamicOutputStartPosition() {\n    return 2;\n  }\n}\nContainer.registerNodeType('json/json-filter-multiple', JsonFilterMultiple);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass JsonCheckerNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"json-checker\"].title;\n    this.description = NODE_INFO.json[\"json-checker\"].description; \n    this.addInput('input', Type.STRING)\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('msg', Type.STRING);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  isJson(item: any): boolean {\n    item = typeof item !== 'string' ? JSON.stringify(item) : item;\n\n    try {\n      item = JSON.parse(item);\n    } catch (e) {\n      return false;\n    }\n\n    if (typeof item === 'object' && item !== null) {\n      return true;\n    }\n\n    return false;\n  }\n\n  onInputUpdated() {\n    const val = this.getInputData(0);\n    try {\n      if (this.isJson(val)) {\n        this.setOutputData(0, true);\n        this.setOutputData(1, 'valid JSON');\n      } else { \n        this.setOutputData(0, false);\n        this.setOutputData(1, 'invalid JSON');\n      }\n    } catch (err) {\n      this.setOutputData(0, false);\n      this.setOutputData(1, err);\n    }\n  }\n}\nContainer.registerNodeType('json/json-checker', JsonCheckerNode);\n","import { isNull } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\n\nclass JsonParse extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"json-parse\"].title;\n    this.description = NODE_INFO.json[\"json-parse\"].description;\n    this.addInput('json-input', Type.JSON);\n    this.addOutput('output', Type.JSON);\n  }\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    if (isNull(input)) return;\n    try {\n      this.setOutputData(0, input);\n    } catch (err) {\n      this.debugInfo(`JSON PARSE: try/catch , ${err}`);\n    };\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('json/json-parse', JsonParse);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport {Type } from '../../node-io';\nimport { isNull } from '../../../utils/helper';\n\n\nclass JsonPreventDuplicates extends Node {\n  older;\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"json-prevent-duplicates\"].title;\n    this.description = NODE_INFO.json[\"json-prevent-duplicates\"].description;\n    this.addInput('input', Type.JSON);\n    this.addOutput('output', Type.JSON);\n  }\n\n  getChanges = function (oldArray: any, newArray: any) {\n    if (JSON.stringify(oldArray) === JSON.stringify(newArray)) {\n      return false;\n    } else return true;\n  \n  };\n\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    if (input === null) {\n      this.setOutputData(0, null);\n      return;\n    }\n    try {\n      // first run\n      if(isNull(this.older)){\n        this.setOutputData(0, input);\n        this.older = input\n      }\n      const test = this.getChanges(this.older, input)\n      if(test == false) return\n      if(test == true){\n        this.older = input\n        this.setOutputData(0, input);\n      }\n    \n    } catch (e) {\n      this.setOutputData(0, null);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('json/json-prevent-duplicates', JsonPreventDuplicates);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { isNull } from '../../../utils/helper';\nimport { NODE_INFO } from '../../node-info';\nconst jsonata = require('jsonata');\n\nclass JsonQueryNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.json[\"json-query\"].title;\n    this.description = NODE_INFO.json[\"json-query\"].description;\n    this.addInput('input', Type.JSON);\n    this.addInputWithSettings('query', Type.STRING, `deviceID &  ', ' & clientId`, 'Query', false);\n    this.addOutput('output', Type.JSON);\n    this.addOutput('error', Type.STRING);\n  }\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    let queryInput = this.getInputData(1);\n    if (isNull(input)) return\n    if (isNull(queryInput)) return\n    try {\n      let expression = jsonata(queryInput);\n      let result = expression.evaluate(input);\n      this.setOutputData(0, result);\n      this.setOutputData(1, null);\n    } catch (e) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, e);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('json/json-query', JsonQueryNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass AnyLatchNode extends Node {\n  lastLatchValue: boolean;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.latch[\"any-latch\"].title;\n    this.description =NODE_INFO.latch[\"any-latch\"].description;\n\n    this.addInput('input', Type.ANY);\n    this.addInput('latch', Type.BOOLEAN);\n    this.addOutput('output', Type.ANY);\n    this.settings['passOnly'] = NodeSetting.create({\n      description: 'Only if input value is updated',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const passOnly = this.settings['passOnly'].value\n    let latch = this.getInputData(1);\n    if (latch == null) {\n      if (passOnly) {\n        this.setOutputData(0, null);\n      } else this.setOutputData(0, null);\n      return;\n    }\n    if (latch == this.lastLatchValue) return;\n    this.lastLatchValue = latch;\n    if (latch == true) {\n      let input = this.getInputData(0);\n      if (!Utils.hasInput(input)) {\n        if (passOnly) {\n          this.setOutputData(0, null);\n        } else this.setOutputData(0, null);\n        return;\n      }\n      if (input === '') input = null;\n      if (passOnly) {\n        this.setOutputData(0, input);\n      } else this.setOutputData(0, input);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('latch/any-latch', AnyLatchNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass BoolLatchNode extends Node {\n  lastLatchValue: boolean;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.latch[\"bool-latch\"].title;\n    this.description =NODE_INFO.latch[\"bool-latch\"].description;\n    this.addInput('input', Type.BOOLEAN);\n    this.addInput('latch', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.setOutputData(0, false);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n  \n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let latch = this.getInputData(1);\n    if (latch == null) {\n      this.setOutputData(0, null);\n      return;\n    }\n    if (latch == this.lastLatchValue) return;\n    this.lastLatchValue = latch;\n    if (latch == true) {\n      let input = this.getInputData(0);\n      if (!Utils.hasInput(input)) {\n        this.setOutputData(0, null);\n        return;\n      }\n      this.setOutputData(0, input);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('latch/bool-latch', BoolLatchNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass NumLatchNode extends Node {\n  lastLatchValue: boolean;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.latch[\"num-latch\"].title;\n    this.description =NODE_INFO.latch[\"num-latch\"].description;\n    this.addInput('input', Type.NUMBER);\n    this.addInput('latch', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let latch = this.getInputData(1);\n    if (latch == null) {\n      this.setOutputData(0, null);\n      return;\n    }\n    if (latch == this.lastLatchValue) return;\n    this.lastLatchValue = latch;\n    if (latch == true) {\n      let input = this.getInputData(0);\n      if (!Utils.hasInput(input)) {\n        this.setOutputData(0, null);\n        return;\n      }\n      if (input === '') input = null;\n      this.setOutputData(0, input);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('latch/num-latch', NumLatchNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass StringLatchNode extends Node {\n  lastLatchValue: boolean;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.latch[\"string-latch\"].title;\n    this.description =NODE_INFO.latch[\"string-latch\"].description;\n    this.addInput('input', Type.STRING);\n    this.addInput('latch', Type.BOOLEAN);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let latch = this.getInputData(1);\n    if (latch == null) {\n      this.setOutputData(0, null);\n      return;\n    }\n    if (latch == this.lastLatchValue) return;\n    this.lastLatchValue = latch;\n    if (latch == true) {\n      let input = this.getInputData(0);\n      if (!Utils.hasInput(input)) {\n        this.setOutputData(0, null);\n        return;\n      }\n      if (input === '') input = null;\n      this.setOutputData(0, input);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('latch/string-latch', StringLatchNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass SetResetNode extends Node {\n  out = null;\n\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.latch[\"set-reset\"].title;\n    this.description =NODE_INFO.latch[\"set-reset\"].description;\n\n    this.addInput('set', Type.BOOLEAN);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.settings['lock'] = NodeSetting.create({\n      description: 'Reset when set=true',\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n \n    this.setOutputData(0, false);\n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let set = this.inputs[0].data;\n    let reset = this.inputs[1].data;\n    let lock = this.settings['lock'].value;\n    let out = this.out;\n    if (set && !reset) {\n      this.setOutputData(0, true);\n      this.out = true;\n    } else if (lock && reset && out && set) {\n      //when lock = true\n      this.setOutputData(0, false);\n      this.out = false;\n    } else if (!set && out && reset) {\n      //when lock = false\n      this.setOutputData(0, false);\n      this.out = false;\n    }\n  }\n}\nContainer.registerNodeType('latch/set-reset', SetResetNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass AddNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    this.title = NODE_INFO.math.add.title;\n    this.description = NODE_INFO.math.add.description;\n\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const inputCount = this.getInputsCount();\n    let total = 0;\n    for (let i = this.dynamicInputStartPosition; i < inputCount; i++) {\n      total = total + this.getInputData(i);\n    }\n    this.settingOutput(total);\n  }\n\n  settingOutput(total): any {\n    this.setOutputData(0, total);\n    return total;\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('math/add', AddNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass MathSubNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    \n    this.title = NODE_INFO.math.subtract.title;\n    this.description = NODE_INFO.math.subtract.description; \n\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const inputCount = this.getInputsCount();\n    let total = this.getInputData(0);\n    for (let i = this.dynamicInputStartPosition + 1; i < inputCount; i++) {\n      total = total - this.getInputData(i);\n    }\n    this.setOutputData(0, total);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('math/subtract', MathSubNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass MathMultiplyNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    this.title = NODE_INFO.math.multiply.title;\n    this.description = NODE_INFO.math.multiply.description; \n    \n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const inputCount = this.getInputsCount();\n    let total = 1;\n    for (let i = this.dynamicInputStartPosition; i < inputCount; i++) {\n      total = total * this.getInputData(i);\n    }\n    this.setOutputData(0, total);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('math/multiply', MathMultiplyNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass MathDivideNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    this.title = NODE_INFO.math.divide.title;\n    this.description = NODE_INFO.math.divide.description; \n    \n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const inputCount = this.getInputsCount();\n    let total = 1;\n    let div = 0;\n    for (let i = this.dynamicInputStartPosition; i < inputCount; i++) {\n      div = this.getInputData(i);\n      if (!div) {\n        // when it's 0 or null\n        this.setOutputData(0, 0);\n        return;\n      }\n      if (i === this.dynamicInputStartPosition) {\n        total = div;\n      } else {\n        total = total / div;\n      }\n    }\n    this.setOutputData(0, total);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('math/divide', MathDivideNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport Icons from '../../node-icons';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nlet uiMainIcon = Icons.uiMainIcon;\nlet uiMainColour = Icons.uiMainColour;\n\nclass MathAbsNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.math.absolute.title;\n    this.description = NODE_INFO.math.absolute.description;\n    //this.headerColor = uiMainIcon;\n    //this.iconImageUrl = uiMainIcon;\n\n    this.addInput('input', Type.NUMBER);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, Math.abs(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math/absolute', MathAbsNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathModulusNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.math.modulus.title;\n    this.description = NODE_INFO.math.modulus.description; \n   \n    this.addInputWithSettings('in 1', Type.NUMBER, 0, 'in 1');\n    this.addInputWithSettings('in 2', Type.NUMBER, 1, 'in 2');\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const a = this.getInputData(0);\n    const b = this.getInputData(1);\n\n    if (a != null && b != null) this.setOutputData(0, a % b);\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math/modulus', MathModulusNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathPowNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.math.power.title;\n    this.description = NODE_INFO.math.power.description; \n    this.addInputWithSettings('in 1', Type.NUMBER, 0, 'in 1');\n    this.addInputWithSettings('in 2', Type.NUMBER, 1, 'in 2');\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let x = this.getInputData(0);\n    let y = this.getInputData(1);\n    if (x != null && y != null) this.setOutputData(0, Math.pow(x, y));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math/power', MathPowNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathAcosNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].acos.title;\n    this.description = NODE_INFO[\"math-advanced\"].acos.description;\n\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('acos(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    if (val != null) this.setOutputData(0, Math.acos(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/acos', MathAcosNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathAsinNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].asin.title;\n    this.description = NODE_INFO[\"math-advanced\"].asin.description;\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('asin(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    if (val != null) this.setOutputData(0, Math.asin(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/asin', MathAsinNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathAtanNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].atan.title;\n    this.description = NODE_INFO[\"math-advanced\"].atan.description;\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('atan(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    if (val != null) this.setOutputData(0, Math.atan(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/atan', MathAtanNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathCbrtNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].cbrt.title;\n    this.description = NODE_INFO[\"math-advanced\"].cbrt.description;\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('cbrt(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    if (val != null) this.setOutputData(0, Math.cbrt(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/cbrt', MathCbrtNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathCosNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].cos.title;\n    this.description = NODE_INFO[\"math-advanced\"].cos.description;\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('cos(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, Math.cos(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/cos', MathCosNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathExpNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].exp.title;\n    this.description = NODE_INFO[\"math-advanced\"].exp.description; \n   \n    this.addInput('x', Type.NUMBER);\n    this.addOutput('exp(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, Math.exp(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/exp', MathExpNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathLogarithmNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].log.title;\n    this.description = NODE_INFO[\"math-advanced\"].log.description;\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('log(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, Math.log(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/log', MathLogarithmNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathLogarithmNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].log10.title;\n    this.description = NODE_INFO[\"math-advanced\"].log10.description;\n\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('log10(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, Math.log10(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/log10', MathLogarithmNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathSinNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].sin.title;\n    this.description = NODE_INFO[\"math-advanced\"].sin.description;\n    \n    this.addInput('x', Type.NUMBER);\n    this.addOutput('sin(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, Math.sin(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/sin', MathSinNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathSqrtNode extends Node {\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-advanced\"].sqrt.title;\n    this.description = NODE_INFO[\"math-advanced\"].sqrt.description;\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('sqrt(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, Math.sqrt(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/sqrt', MathSqrtNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathTanNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"math-advanced\"].tan.title;\n    this.description = NODE_INFO[\"math-advanced\"].tan.description;\n    this.addInput('x', Type.NUMBER);\n    this.addOutput('tan(x)', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, Math.tan(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('math-advanced/tan', MathTanNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass TriggerAddNode extends FlexibleNode {\n  lastTrigger: boolean;\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    super.dynamicInputStartPosition = 1;\n    this.title = NODE_INFO[\"math-trigger\"][\"trigger-add\"].title;\n    this.description = NODE_INFO[\"math-trigger\"][\"trigger-add\"].description; \n   \n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.lastTrigger = false;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const trigger = this.getInputData(0);\n    if (trigger && !this.lastTrigger) {\n      const inputCount = this.getInputsCount();\n      let total = 0;\n      for (let i = this.dynamicInputStartPosition; i < inputCount; i++) {\n        total += this.getInputData(i);\n      }\n      this.setOutputData(0, total);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('math-trigger/trigger-add', TriggerAddNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass MathTriggerSubNode extends FlexibleNode {\n  lastTrigger: boolean;\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    super.dynamicInputStartPosition = 1;\n    this.title = NODE_INFO[\"math-trigger\"][\"trigger-subtract\"].title;\n    this.description = NODE_INFO[\"math-trigger\"][\"trigger-subtract\"].description; \n    \n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.lastTrigger = false;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const trigger = this.getInputData(0);\n    if (trigger && !this.lastTrigger) {\n      const inputCount = this.getInputsCount();\n      let total = this.getInputData(1);\n      for (let i = this.dynamicInputStartPosition + 1; i < inputCount; i++) {\n        total -= this.getInputData(i);\n      }\n      this.setOutputData(0, total);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('math-trigger/trigger-subtract', MathTriggerSubNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass MathTriggerMultiplyNode extends FlexibleNode {\n  lastTrigger: boolean;\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    super.dynamicInputStartPosition = 1;\n    this.title = NODE_INFO[\"math-trigger\"][\"trigger-multiply\"].title;\n    this.description = NODE_INFO[\"math-trigger\"][\"trigger-multiply\"].description; \n    \n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.lastTrigger = false;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const trigger = this.getInputData(0);\n    if (trigger && !this.lastTrigger) {\n      const inputCount = this.getInputsCount();\n      let total = 1;\n      for (let i = this.dynamicInputStartPosition; i < inputCount; i++) {\n        total *= this.getInputData(i);\n      }\n      this.setOutputData(0, total);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('math-trigger/trigger-multiply', MathTriggerMultiplyNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass MathTriggerDivideNode extends FlexibleNode {\n  lastTrigger: boolean;\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    super.dynamicInputStartPosition = 1;\n    this.title = NODE_INFO[\"math-trigger\"][\"trigger-divide\"].title;\n    this.description = NODE_INFO[\"math-trigger\"][\"trigger-divide\"].description; \n   \n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.lastTrigger = false;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const trigger = this.getInputData(0);\n    if (trigger && !this.lastTrigger) {\n      const inputCount = this.getInputsCount();\n      let total = 1;\n      let div = 0;\n      for (let i = this.dynamicInputStartPosition; i < inputCount; i++) {\n        div = this.getInputData(i);\n        if (div === 0) {\n          this.setOutputData(0, 0);\n          return;\n        }\n        if (i === this.dynamicInputStartPosition) {\n          total = div;\n        } else {\n          total = total / div;\n        }\n      }\n      this.setOutputData(0, total);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('math-trigger/trigger-divide', MathTriggerDivideNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathTriggerModulusNode extends Node {\n  lastTrigger: boolean;\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-trigger\"][\"trigger-modulus\"].title;\n    this.description = NODE_INFO[\"math-trigger\"][\"trigger-modulus\"].description; \n   \n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInputWithSettings('in 1', Type.NUMBER, 0, 'in 1');\n    this.addInputWithSettings('in 2', Type.NUMBER, 2, 'in 2');\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.lastTrigger = false;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const trigger = this.getInputData(0);\n    if (trigger && !this.lastTrigger) {\n      let a = this.getInputData(1);\n      let b = this.getInputData(2);\n\n      if (a != null && b != null) this.setOutputData(0, a % b);\n      else this.setOutputData(0, null);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  dynamicInputStartPosition(): number {\n    return 1;\n  }\n}\nContainer.registerNodeType('math-trigger/trigger-modulus', MathTriggerModulusNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n//import Icons from '../../node-icons';\n\n//let uiMainIcon = Icons.uiMainIcon;\n//let uiMainColour = Icons.uiMainColour;\n\nclass MathTriggerPowNode extends Node {\n  lastTrigger: boolean;\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"math-trigger\"][\"trigger-power\"].title;\n    this.description = NODE_INFO[\"math-trigger\"][\"trigger-power\"].description; \n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInputWithSettings('in 1', Type.NUMBER, 0, 'in 1');\n    this.addInputWithSettings('in 2', Type.NUMBER, 2, 'in 2');\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.lastTrigger = false;\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const trigger = this.getInputData(0);\n    if (trigger && !this.lastTrigger) {\n      const x = this.getInputData(1);\n      const y = this.getInputData(2);\n\n      if (x != null && y != null) this.setOutputData(0, Math.pow(x, y));\n      else this.setOutputData(0, null);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  dynamicInputStartPosition(): number {\n    return 1;\n  }\n}\nContainer.registerNodeType('math-trigger/trigger-power', MathTriggerPowNode);\n","import { Container } from '../../container';\nimport { Node} from '../../node';\nimport { Type } from '../../node-io';\nimport {isNull } from '../../../utils/helper';\nconst geohash = require('ngeohash');\nimport { NODE_INFO } from '../../node-info';\n\nclass GeoHashNode extends Node {\n  client: any;\n  outputsCount = 0;\n  constructor() {\n    super();\n    this.title = NODE_INFO.miscellaneous[\"geo-hash\"].title;\n    this.description = NODE_INFO.miscellaneous[\"geo-hash\"].description; \n    this.addInputWithSettings('encode', Type.JSON, '151.1677778, -34.0316667', 'Lon at Lat Values Encode');\n    this.addInputWithSettings('decode', Type.STRING, 'ww8p1r4t8, ', 'Hash Decode');\n    this.addOutput('encode-out', Type.STRING);\n    this.addOutput('decode-out', Type.JSON);\n  }\n  \n\n\n  onAdded() {\n    this.onInputUpdated()\n  }\n\n  onInputUpdated(){\n    const encode = this.getInputData(0);\n    const decode = this.getInputData(1);\n\n    if (!isNull(encode)) {\n      this.setOutputData(0, geohash.encode(parseInt(encode[0]), parseInt(encode[1])))\n   \n    }\n    if (!isNull(decode)) {\n      this.setOutputData(1, geohash.decode(decode))\n  \n    }\n\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated()\n  }\n\n\n\n}\nContainer.registerNodeType('miscellaneous/geo-hash', GeoHashNode);\n","module.exports = require(\"ngeohash\");","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nexport class NumSeriesGenerator extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicOutputsExist = true;\n    this.dynamicInputsExist = false;\n    this.dynamicSettingsExist = true;\n    super.dynamicOutputsType = Type.NUMBER;\n    this.title = NODE_INFO.miscellaneous[\"num-series-generator\"].title;\n    this.description = NODE_INFO.miscellaneous[\"num-series-generator\"].description; \n    this.addInputWithSettings('startVal', Type.NUMBER, 0, 'Start Value');\n    this.addInputWithSettings('addVal', Type.NUMBER, 1, 'Added Value ');\n    this.settings['factor'] = NodeSetting.create({\n      description: 'Multiply factor',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n  }\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    let factor = this.settings['factor'].value; \n    if (typeof input === 'undefined') return;\n    if (typeof input === 'number') {\n      const len = this.getOutputsCount();\n      let diff = this.getInputData(1);\n      if (typeof diff !== 'number') diff = 1;\n      for (let i = 0; i < len; i++) {\n        this.setOutputData(i, i + (input * diff) + (i * factor));\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated()\n  }\n}\nContainer.registerNodeType('miscellaneous/num-series-generator', NumSeriesGenerator);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass AddressHelperString extends Node {\n  client: any;\n  outputsCount = 0;\n  constructor() {\n    super();\n    this.title = NODE_INFO.miscellaneous[\"append-to-strings\"].title;\n    this.description = NODE_INFO.miscellaneous[\"append-to-strings\"].description; \n\n    this.addInputWithSettings('prepend', Type.STRING, '', 'Prepend Value');\n    this.addInputWithSettings('append', Type.STRING, '', 'Append Value');\n\n    this.settings['outputs_count'] = NodeSetting.create({\n      description: 'Number of Outputs',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n\n    this.setSettingsConfig({\n      groups: [{ outputs_count: {} }],\n    });\n  }\n\n  init() {\n    this.changeOutputsAndSettings();\n  }\n\n  onCreated() {\n    this.renameInputsOutputs();\n  }\n\n  onAdded() {\n    this.outputsCount = this.settings['outputs_count'].value;\n    this.onAfterSettingsChange()\n  }\n\n  onInputUpdated(){\n    this.renameInputsOutputs();\n  }\n\n  onAfterSettingsChange() {\n    this.changeOutputsAndSettings();\n    this.renameInputsOutputs();\n    //update db\n    if (this.container.db)\n      this.container.db.updateNode(this.id, this.container.id, {\n        $set: { outputs: this.outputs, settings: this.settings },\n      });\n  }\n\n  private changeOutputsAndSettings() {\n    let outputs = this.settings['outputs_count'].value;\n    outputs = Utils.clamp(outputs, 1, 100);\n    this.settings['outputs_count'].value = outputs;\n    // change outputs count\n    if (this.outputsCount != outputs) this.changeMyOutputsCount(outputs);\n  }\n\n  changeMyOutputsCount(target_count) {\n    const diff = target_count - this.outputsCount;\n    if (diff == 0) return;\n\n    // add inputs, outputs\n    this.changeOutputsCount(target_count + 1, Type.STRING);\n\n    // change settings for outputs\n    if (diff > 0) {\n      for (let i = this.outputsCount + 1; i <= target_count; i++) {\n        this.settings['output' + i] = NodeSetting.create({\n          description: 'Output ' + i,\n          value: '',\n          type: SettingType.STRING,\n        });\n        for (let i = this.outputsCount + 1; i <= target_count; i++) {\n          this.settingConfigs.groups.push({\n            [`output${i}`]: { weight: 5 },\n          });\n        }\n      }\n    } else if (diff < 0) {\n      for (let i = this.outputsCount; i > target_count; i--) {\n        delete this.settings['output' + i];\n        this.settingConfigs.groups.pop();\n      }\n    }\n\n    this.outputsCount = target_count;\n  }\n\n  renameInputsOutputs() {\n    const prepend = this.getInputData(0);\n    const append = this.getInputData(1);\n    for (let i = 1; i <= this.outputsCount; i++) {\n      const output = this.settings['output' + i].value || '';\n      this.outputs[i].name = '' + i + ' | ' + output;\n      this.setOutputData(i, '' + prepend + output + append);\n    }\n  }\n}\nContainer.registerNodeType('miscellaneous/append-to-strings', AddressHelperString);\n","import axios from 'axios';\nimport config from '../../../config';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport SystemUtils from '../system/system-utils';\n\nconst btoa = require('btoa');\n\nclass GetSchedulesNode extends Node {\n  enable;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.nube[\"get-schedules\"].title;\n    this.description = NODE_INFO.nube[\"get-schedules\"].description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addOutput('data', Type.JSON);\n    this.addOutput('error', Type.BOOLEAN);\n\n    this.settings['interval'] = NodeSetting.create({\n      description: 'Update Interval (min 10 seconds)',\n      type: SettingType.NUMBER,\n      value: 60,\n    });\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.SECONDS, text: 'Seconds' },\n          { value: TIME_TYPE.MINUTES, text: 'Minutes' },\n          { value: TIME_TYPE.HOURS, text: 'Hours' },\n        ],\n      },\n      value: TIME_TYPE.SECONDS,\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n  }\n\n  async onAdded() {\n    if (this.properties['scheduleData']) this.setOutputData(0, this.properties['scheduleData']);\n    await this.onAfterSettingsChange();\n  }\n\n  async onAfterSettingsChange() {\n    this.setExecuteInterval();\n    await this.onInputUpdated();\n  }\n\n  async onInputUpdated() {\n    await this.getDittoSchedules();\n  }\n\n  async onExecute() {\n    await this.getDittoSchedules();\n  }\n \n  async getDittoSchedules() {\n    if (this.side !== Side.server || !this.getInputData(0)) return;\n    try {\n      const deviceIdFromPlat = await SystemUtils.getDeviceIdDb();\n      const { username, password } = config.ditto;\n      const dittoUrl =  config.ditto.baseURL\n      const response = await axios({\n        method: 'get',\n        url:\n        dittoUrl + deviceIdFromPlat + '/features/schedules/properties',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Basic ${btoa(`${username}:${password}`)}`,\n        },\n      });\n      this.setOutputData(0, response.data, false);\n      this.setOutputData(1, false);\n      this.properties['scheduleData'] = response.data;\n      this.persistProperties(false, true);\n    } catch (error) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, error);\n      this.debugErr(error);\n      return;\n    }\n  }\n\n  setExecuteInterval() {\n    let interval = this.settings['interval'].value;\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    interval = Math.max(interval, 10000);\n    this.EXECUTE_INTERVAL = interval;\n  }\n}\nContainer.registerNodeType('nube/get-schedules', GetSchedulesNode);\n","module.exports = require(\"btoa\");","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass MathDecimalPlaceNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"num-transform\"].round.title;\n    this.description = NODE_INFO[\"num-transform\"].round.description; this.addInput('input', Type.NUMBER);\n\n    this.addOutput('output', Type.NUMBER);\n    this.settings['decimals'] = NodeSetting.create({\n      description: 'Decimal Places (Limit 5)',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let decimals = this.settings['decimals'].value;\n    if (decimals > 5) decimals = 5;\n    this.emitTransformedInput(x => x.toFixed(decimals));\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('num-transform/round', MathDecimalPlaceNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass MathFloorNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"num-transform\"].floor.title;\n    this.description = NODE_INFO[\"num-transform\"].floor.description; \n\n    this.addInput('input', Type.NUMBER);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    this.emitTransformedInput(x => Math.floor(x));\n  }\n}\nContainer.registerNodeType('num-transform/floor', MathFloorNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass MathCeilNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"num-transform\"].ceil.title;\n    this.description = NODE_INFO[\"num-transform\"].ceil.description; \n\n    this.addInput('input', Type.NUMBER);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    this.emitTransformedInput(x => Math.ceil(x));\n  }\n}\nContainer.registerNodeType('num-transform/ceil', MathCeilNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass LimitNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO[\"num-transform\"].limit.title;\n    this.description = NODE_INFO[\"num-transform\"].limit.description; \n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('min', Type.NUMBER, 0, 'min', false);\n    this.addInputWithSettings('max', Type.NUMBER, 5, 'max', false);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onCreated() {\n    this.setOutputData(0, this.settings['min'].value);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const val = this.getInputData(0);\n\n    const min = this.getInputData(1);\n    const max = this.getInputData(2);\n\n    if (val >= max) {\n      this.setOutputData(0, max);\n    } else if (val <= min) {\n      this.setOutputData(0, min);\n    } else {\n      this.setOutputData(0, val);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('num-transform/limit', LimitNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass ScaleNode extends Node {\n  lastTime: number;\n  interval: number = 250;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"num-transform\"].scale.title;\n    this.description = NODE_INFO[\"num-transform\"].scale.description; \n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('in-min', Type.NUMBER, 0, 'Minimum Input', false);\n    this.addInputWithSettings('in-max', Type.NUMBER, 100, 'Maximum Input', false);\n    this.addInputWithSettings('out-min', Type.NUMBER, 0, 'Minimum Output', false);\n    this.addInputWithSettings('out-max', Type.NUMBER, 10, 'Maximum Output', false);\n    this.addOutput('output', Type.NUMBER);\n    this.lastTime = Date.now();\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onAfterSettingsChange(){\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let now = Date.now();\n    if (now - this.lastTime >= this.interval) {\n      this.lastTime = now;\n      let val = this.getInputData(0);\n      const inMin = this.getInputData(1);\n      const inMax = this.getInputData(2);\n      const outMin = this.getInputData(3);\n      const outMax = this.getInputData(4);\n\n      if (val == null) {\n        this.setOutputData(0, 0);\n      } else {\n        val = Utils.remap(val, inMin, inMax, outMin, outMax);\n        this.setOutputData(0, val.toFixed(1));\n      }\n    }\n  }\n}\nContainer.registerNodeType('num-transform/scale', ScaleNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass LinearShaperNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"num-transform\"][\"linear-shaper\"].title;\n    this.description = NODE_INFO[\"num-transform\"][\"linear-shaper\"].description; \n    this.addInput('input', Type.NUMBER);\n    this.settings['inputs'] = NodeSetting.create({\n      description: 'Inflection Points Count',\n      value: 3,\n      type: SettingType.NUMBER,\n    });\n    this.settings['in1'] = NodeSetting.create({\n      description: 'output value @ input = 0',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.settings['in2'] = NodeSetting.create({\n      description: 'output value @ input = 50',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.settings['in3'] = NodeSetting.create({\n      description: 'output value @ input = 100',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.addInput('[0]', Type.NUMBER);\n    this.addInput('[50]', Type.NUMBER);\n    this.addInput('[100]', Type.NUMBER);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAfterSettingsChange() {\n    const inputCountBefore = this.getInputsCount();\n    let inputs = this.settings['inputs'].value;\n    inputs = Utils.clamp(inputs, 3, 100);\n    inputs = inputs + 1;\n    if (inputs == inputCountBefore) return;\n    this.changeInputsCount(inputs, Type.NUMBER);\n\n    if (inputs > 4) {\n      for (let i = 4; i < inputs; i++) {\n        if (!this.settings['in' + i]) {\n          this.settings['in' + i] = NodeSetting.create({\n            description: 'in ' + i,\n            value: 0,\n            type: SettingType.NUMBER,\n          });\n        }\n      }\n    }\n    for (let j = inputs; j < inputCountBefore; j++) {\n      delete this.settings['in' + j];\n    }\n    this.renameInputsAndSettings(inputs);\n\n    if (this.side == Side.editor) this.updateInputsLabels();\n    this.onInputUpdated();\n  }\n\n  renameInputsAndSettings(count) {\n    count = count - 1;\n    this.inputs[1].name = '[0]';\n    for (let i = 1; i < count; i++) {\n      let point = (100.0 / (count - 1)) * i;\n      let pointFormatted = point.toFixed(2).replace(/[.,]00$/, '');\n      this.inputs[i + 1].name = '[' + pointFormatted + ']';\n      this.settings['in' + (i + 1)] = NodeSetting.create({\n        description: 'output value @ input = ' + pointFormatted,\n        value: 0,\n        type: SettingType.NUMBER,\n      });\n    }\n    this.updateNodeInput();\n  }\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    if (input == null) {\n      this.setOutputData(0, null, true);\n      return;\n    }\n    const position = Utils.clamp(input, 0, 100);\n    const pointsCount = this.getInputsCount() - 1;\n    const stepSize = 100.0 / (pointsCount - 1);\n    const stepIndex = position / stepSize;\n    if (position % stepSize == 0) {\n      let valueAtPosition = this.getInputData(stepIndex + 1);\n      if (!Utils.hasInput(valueAtPosition)) {\n        valueAtPosition = this.settings['in' + (stepIndex + 1)].value;\n      }\n      valueAtPosition = Number(valueAtPosition);\n      this.setOutputData(0, valueAtPosition);\n      return;\n    }\n    const positionInStep = stepIndex - Math.floor(stepIndex);\n    const startValueIndex = Math.floor(stepIndex);\n    console.log(stepIndex, 'stepIndex');\n    console.log(startValueIndex, 'startValueIndex');\n    console.log('in' + (startValueIndex + 1), \"'in' + (startValueIndex + 1)\");\n    let startValue = this.getInputData(startValueIndex + 1);\n    if (!Utils.hasInput(startValue)) startValue = this.settings['in' + (startValueIndex + 1)].value;\n    let endValue = this.getInputData(startValueIndex + 2);\n    if (!Utils.hasInput(endValue)) endValue = this.settings['in' + (startValueIndex + 2)].value;\n    let output = Utils.remap(positionInStep, 0, 1, startValue, endValue);\n    this.setOutputData(0, output, true);\n  }\n}\nContainer.registerNodeType('num-transform/linear-shaper', LinearShaperNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass TimeFadeNode extends Node {\n  updateInterval: number = 500;\n  stepSize: number;\n  lastEnable: boolean;\n  timerFinished: boolean;\n  currentVal: number;\n  timeoutFunc;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"num-transform\"].fade.title;\n    this.description = NODE_INFO[\"num-transform\"].fade.description; \n   \n    this.addInput('enable', Type.BOOLEAN);\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Interval', false);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n    this.addInputWithSettings('from', Type.NUMBER, 0, 'To Value', false);\n    this.addInputWithSettings('to', Type.NUMBER, 100, 'From Value', false);\n    this.addOutput('output');\n    this.addOutput('out=to');\n\n    this.updateInterval = 250;\n  }\n\n  onAdded() {\n \n    this.lastEnable = false;\n    this.timerFinished = false;\n    this.setOutputData(1, false);\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n  }\n\n  onInputUpdated() {\n    const enable = this.getInputData(0);\n    if (!enable && this.lastEnable) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, 0);\n      this.setOutputData(1, false);\n      this.timerFinished = false;\n      this.lastEnable = enable;\n      return;\n    } else if (!enable) {\n      this.setOutputData(0, 0);\n      this.setOutputData(1, false);\n      return;\n    }\n    const to = this.getInputData(3);\n    if (enable && this.timerFinished) {\n      this.setOutputData(0, to);\n      this.setOutputData(1, true);\n      return;\n    }\n\n    const from = this.getInputData(2);\n    let interval = this.getInputData(1);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    if (enable && !this.lastEnable) {\n      this.stepSize = (to - from) / (interval / this.updateInterval);\n      this.currentVal = from;\n      this.timeoutFunc = setInterval(() => {\n        this.update();\n      }, this.updateInterval);\n    } else if (!enable && this.lastEnable) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, 0);\n      this.timerFinished = false;\n    }\n    this.lastEnable = enable;\n  }\n\n  update() {\n    let to = this.getInputData(3);\n    const val = this.currentVal + this.stepSize;\n    if (val >= to) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, to);\n      this.setOutputData(1, true);\n      this.timerFinished = true;\n      this.currentVal = 0;\n      return;\n    } else {\n      this.currentVal = val;\n      this.setOutputData(0, val);\n    }\n  }\n}\nContainer.registerNodeType('num-transform/fade', TimeFadeNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass RateLimitNode extends Node {\n  lastEnable: boolean;\n  lastInterval: number;\n  currentVal: number;\n  timeoutFunc;\n\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"num-transform\"][\"rate-limit\"].title;\n    this.description = NODE_INFO[\"num-transform\"][\"rate-limit\"].description; \n    this.addInput('input', Type.NUMBER);\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable', false);\n    this.addInputWithSettings('step', Type.NUMBER, 1, 'Step Size', false);\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Update Interval', false);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n    this.addOutput('output', Type.NUMBER);\n    this.lastInterval = 1000;\n    this.lastEnable = true;\n    this.currentVal = 0;\n  }\n\n  onAdded() {\n \n    this.lastInterval = 1000;\n    this.lastEnable = true;\n    this.currentVal = 0;\n    this.setOutputData(0, null);\n    this.inputs[3]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.timeoutFunc = setInterval(() => {\n      this.step();\n    }, this.lastInterval);\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let input = this.getInputData(0);\n    if (input == null) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, null);\n      this.lastEnable = false;\n      return;\n    }\n    let interval = this.getInputData(3);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    const enable = this.getInputData(1);\n    if (enable && !this.lastEnable) {\n      this.currentVal = 0;\n      this.timeoutFunc = setInterval(() => {\n        this.step();\n      }, interval);\n    } else if (!enable && this.lastEnable) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, null);\n    } else if (enable && this.lastEnable && interval !== this.lastInterval) {\n      clearInterval(this.timeoutFunc);\n      this.timeoutFunc = setInterval(() => {\n        this.step();\n      }, interval);\n    }\n    this.lastInterval = interval;\n    this.lastEnable = enable;\n  }\n\n  step() {\n    const step = this.getInputData(2);\n    let input = this.getInputData(0);\n    if (input >= this.currentVal) {\n      this.currentVal = this.currentVal + step;\n      if (this.currentVal > input) this.currentVal = input;\n      this.setOutputData(0, this.currentVal);\n    } else if (input < this.currentVal) {\n      this.currentVal = this.currentVal - step;\n      if (this.currentVal < input) this.currentVal = input;\n      this.setOutputData(0, this.currentVal);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[3]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('num-transform/rate-limit', RateLimitNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\n//Bool Constant\nclass BoolConstantNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.point[\"bool-constant\"].title;\n    this.description = NODE_INFO.point[\"bool-constant\"].description;\n\n    this.settings['value'] = NodeSetting.create({\n      description: 'Payload',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: false, text: 'false' },\n          { value: true, text: 'true' },\n          { value: null, text: 'null' },\n        ],\n      },\n      value: null,\n    });\n\n    this.addOutput('output', Type.BOOLEAN);\n  }\n\n  onAdded() {\n \n    if (this.side != Side.server) return;\n    let val = this.settings['value'].value;\n    this.setOutputData(0, val);\n  }\n\n  onExecute(){\n    // this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    let val = this.settings['value'].value;\n    this.setOutputData(0, val);\n  }\n}\nContainer.registerNodeType('point/bool-constant', BoolConstantNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\n//Numeric Constant\nclass NumConstantNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.point[\"num-constant\"].title;\n    this.description = NODE_INFO.point[\"num-constant\"].description; \n    this.settings['value'] = NodeSetting.create({ description: 'Value', value: null, type: SettingType.NUMBER });\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onAfterSettingsChange();\n  }\n\n  onExecute(){\n    // this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    const val = this.settings['value'].value;\n    this.setOutputData(0, Utils.parseValue(val, Type.NUMBER));\n  }\n}\nContainer.registerNodeType('point/num-constant', NumConstantNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\n\n//String\nclass StringConstantNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.point[\"string-constant\"].title;\n    this.description = NODE_INFO.point[\"string-constant\"].description;\n    this.settings['value'] = NodeSetting.create({ description: 'Value', value: '', type: SettingType.STRING });\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n \n    this.onAfterSettingsChange();\n  }\n\n  onExecute(){\n    // this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    const val = this.settings['value'].value;\n    this.setOutputData(0, Utils.parseValue(val, Type.STRING));\n  }\n}\nContainer.registerNodeType('point/string-constant', StringConstantNode);\n","import { isEmpty, isJSON } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass JsonConstantNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.point[\"json-constant\"].title;\n    this.description = NODE_INFO.point[\"json-constant\"].description;\n     this.addInputWithSettings('value', Type.JSON, '{ \"measurement\": 22 }', 'JSON value');\n    this.settings['passNull'] = NodeSetting.create({\n      description: 'Send null if not a match',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.addOutput('output', Type.JSON);\n    this.addOutput('valid-json', Type.BOOLEAN);\n    this.addOutput('msg', Type.STRING);\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    const passNull = this.settings['passNull'].value;\n    try {\n      if (isJSON(val) && !isEmpty(val)) {\n        this.setOutputData(0, val);\n        this.setOutputData(1, true);\n        this.setOutputData(2, 'valid JSON');\n      } else if(passNull) {\n        this.setOutputData(0, null);\n        this.setOutputData(1, false);\n        this.setOutputData(2, 'invalid JSON');\n      } else {\n        this.setOutputData(1, false);\n        this.setOutputData(2, 'invalid JSON');\n      }\n    } catch (err) {\n      this.setOutputData(1, false);\n      this.setOutputData(2, err);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated()\n  }\n}\nContainer.registerNodeType('point/json-constant', JsonConstantNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass BoolPriorityNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.BOOLEAN;\n    this.title = NODE_INFO.point[\"bool-writable\"].title;\n    this.description = NODE_INFO.point[\"bool-writable\"].description; \n    this.addOutput('out', Type.BOOLEAN);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const inputs = this.getInputsCount();\n    for (let i = this.dynamicInputStartPosition; i < inputs; i++) {\n      let inputValue = this.getInputData(i);\n      if (inputValue != null) {\n        this.setOutputData(0, inputValue);\n        return;\n      }\n    }\n    this.setOutputData(0, null);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('point/bool-writable', BoolPriorityNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass NumWritableNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    this.title = NODE_INFO.point[\"num-writable\"].title;\n    this.description = NODE_INFO.point[\"num-writable\"].description; \n   \n    this.addOutput('out', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n    this.size = this.computeSize();\n  }\n\n  onInputUpdated() {\n    const inputs = this.getInputsCount();\n    for (let i = this.dynamicInputStartPosition; i < inputs; i++) {\n      let inputValue = this.getInputData(i);\n      if (inputValue != null) {\n        this.setOutputData(0, inputValue);\n        return;\n      }\n    }\n    this.setOutputData(0, null);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType('point/num-writable', NumWritableNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass StringPriorityNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.STRING;\n    this.title = NODE_INFO.point[\"string-writable\"].title;\n    this.description = NODE_INFO.point[\"string-writable\"].description; \n   \n    this.addOutput('out', Type.STRING);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    for (let i = this.dynamicInputStartPosition; i < this.getInputsCount(); i++) {\n      let inputValue = this.getInputData(i);\n      if (inputValue) {\n        this.setOutputData(0, inputValue);\n        return;\n      }\n    }\n    this.setOutputData(0, '');\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('point/string-writable', StringPriorityNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport HistoryConfig from '../../utils/points/history-config';\nimport PriorityConfig from '../../utils/points/priority-config';\nimport { NODE_INFO } from '../../node-info';\n\n// TODO change history config to HistoryBase\nclass GenericNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.point[\"generic-point\"].title;\n    this.description = NODE_INFO.point[\"generic-point\"].description; \n\n    PriorityConfig.addPrioritySettings(this);\n    HistoryConfig.addHistorySettings(this);\n    this.setSettingsConfig({ groups: [], conditions: {} });\n    PriorityConfig.addPrioritySettingsConfig(this);\n    HistoryConfig.addHistorySettingsConfig(this, 0, false);\n  }\n\n  onCreated() {\n    PriorityConfig.priorityOnCreated(this);\n    HistoryConfig.historyOnCreated(this);\n  }\n\n  onAdded() {\n    //this.size = this.computeSize();\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    PriorityConfig.doPriorityFunctions(this);\n    if (this.side !== Side.server) return; // only execute on server\n    HistoryConfig.doHistoryFunctions(this);\n  }\n\n  onAfterSettingsChange() {\n    PriorityConfig.priorityFunctionsForAfterSettingsChange(this);\n    HistoryConfig.historyFunctionsForAfterSettingsChange(this, this.settings['pointName'].value);\n    PriorityConfig.doPriorityFunctions(this);\n    if (this.side !== Side.server) return; // only execute on server\n    HistoryConfig.doHistoryFunctions(this);\n    /*\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n    */\n  }\n}\n\nContainer.registerNodeType('point/generic-point', GenericNode);\n","/******************************************************\n *\n * Node Constructor should include the following:\n * Add this line in the settings setup, where the history settings should appear:\n *      HistoryConfig.addHistorySettings(this);\n *\n * Add this line at the end after this.setSettingsConfig() has been called,\n * or if this.setSettingsConfig() has not been used, then add this line after settings setup in Node Constructor:\n *      HistoryConfig.addHistorySettingsConfig(this);\n *\n *\n * Node Functions should include the following:\n *     async onInputUpdated() {\n *       if (this.side !== Side.server) return; // only execute on server\n *       HistoryConfig.doHistoryFunctions(this, 0, this.settings['pointName'].value);\n *     }\n *\n *     onAfterSettingsChange() {\n *       HistoryConfig.historyFunctionsForAfterSettingsChange(this, this.settings['pointName'].value);\n *       this.onInputUpdated();\n *       if (this.side !== Side.server) return; // HISTORY FUNCTONS MUST BE DONE ON BOTH SIDES\n *     }\n *\n */\n\nimport { Side } from '../../node-interface';\nimport { SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport TimeUtils from '../time-utils';\nimport SettingUtils from '../setting-utils';\nimport CryptoUtils from '../crypto-utils';\nimport NodeUtils from '../../utils/node-utils';\nimport axios from 'axios';\nimport config from '../../../config';\nimport SystemUtils from '../../nodes/system/system-utils';\nconst Influx = require('influx');\nconst moment = require('moment-timezone');\n\n\n\n/**\n * @Deprecated: Use HistoryBase instead of this one\n */\nexport default class HistoryConfig {\n  static addHistorySettings(self) {\n    self.addInput('histTrigger', Type.BOOLEAN);\n    self.addOutput('histError', Type.ANY);\n    self.addOutput('storedHistCount', Type.NUMBER);\n    self.addOutput('lastHistExport', Type.STRING);\n    for (let input in self.inputs) {\n      if (self.inputs.hasOwnProperty(input)) {\n        if (self.inputs[input].name == 'histTrigger') self.histTriggerInput = input;\n      }\n    }\n\n    for (let output in self.outputs) {\n      if (self.outputs.hasOwnProperty(output)) {\n        if (self.outputs[output].name == 'histError') self.histErrorOutput = output;\n        else if (self.outputs[output].name == 'storedHistCount') self.storedHistCountOutput = output;\n        else if (self.outputs[output].name == 'lastHistExport') self.lastHistExportOutput = output;\n      }\n    }\n\n    /**\n     * History settings\n     */\n    self.settings['history_group'] = {\n      description: 'History Settings',\n      value: '',\n      type: SettingType.GROUP,\n    };\n\n    self.settings['databaseType'] = {\n      description: 'Database Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'Nube DB (Postgres)' },\n          { value: 1, text: 'InfluxDB' },\n        ],\n      },\n      value: 0,\n    };\n\n    // THESE SETTINGS FOR INFLUX HISTORY STORAGE\n\n    self.settings['enable'] = {\n      description: 'History Enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['host'] = { description: 'Host', value: '', type: SettingType.STRING };\n    self.settings['port'] = { description: 'Port', value: '', type: SettingType.STRING };\n\n    self.settings['authentication'] = {\n      description: 'Use Authentication',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['user'] = { description: 'Username', value: '', type: SettingType.STRING };\n    self.settings['password'] = { description: 'Password', value: '', type: SettingType.STRING };\n\n    self.settings['databaseName'] = {\n      description: 'Database Name',\n      value: '',\n      type: SettingType.STRING,\n    };\n\n    self.settings['tableName'] = {\n      description: 'Measurement Name',\n      value: '',\n      type: SettingType.STRING,\n    };\n\n    // END OF INFLUX SPECIFIC SETTINGS\n\n    self.settings['pointName'] = {\n      description: 'Point Name',\n      value: '',\n      type: SettingType.STRING,\n    };\n\n    self.settings['historyMode'] = {\n      description: 'History Logging Mode',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'Change Of Value (COV)' },\n          { value: 1, text: 'Periodic' },\n          { value: 2, text: 'Trigger Only' },\n        ],\n      },\n      value: 0,\n    };\n\n    self.settings['threshold'] = {\n      description: 'COV Threshold',\n      value: 0,\n      type: SettingType.NUMBER,\n    };\n\n    self.settings['period'] = {\n      description: 'Logging Interval',\n      value: 15,\n      type: SettingType.NUMBER,\n    };\n    self.settings['periodUnits'] = {\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'minutes',\n    };\n\n    self.settings['storage-limit'] = {\n      description: 'Local Storage Limit (Max 50)',\n      value: 25,\n      type: SettingType.NUMBER,\n    };\n    self.settings['minuteRoundValue'] = {\n      description: 'Round minutes up in increments of',\n      value: 0,\n      type: SettingType.NUMBER,\n    };\n\n    self.settings['decimals'] = {\n      description: 'Decimal Places (Limit 5)',\n      value: 3,\n      type: SettingType.NUMBER,\n    };\n\n    self.settings['timeAsString'] = {\n      description: 'Display Timestamp as:',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: false, text: 'Numeric' },\n          { value: true, text: 'String' },\n        ],\n      },\n      value: true,\n    };\n\n    /**\n     * Alarm settings\n     */\n    self.settings['alarm_group'] = {\n      description: 'Alarm Settings',\n      value: '',\n      type: SettingType.GROUP,\n    };\n\n    self.settings['alarms_count'] = {\n      description: 'Alarms Count (Max 10)',\n      value: 0,\n      type: SettingType.NUMBER,\n    };\n\n    /**\n     * Tag settings\n     */\n    self.settings['tags_group'] = {\n      description: 'Tag Settings',\n      value: '',\n      type: SettingType.GROUP,\n    };\n\n    self.settings['tags_count'] = {\n      description: 'Tag Count (Max 10)',\n      value: 0,\n      type: SettingType.NUMBER,\n    };\n  }\n\n  static addHistorySettingsConfig(self, valueInput: number = 0, isOutput: boolean = true) {\n    if (!self.settingConfigs.hasOwnProperty('groups') && !self.settingConfigs.hasOwnProperty('conditions'))\n      self.setSettingsConfig({ groups: [], conditions: {} });\n    self.settingConfigs.groups.push({ history_group: {} });\n    self.settingConfigs.groups.push({ databaseType: {} });\n    self.settingConfigs.groups.push({ host: { weight: 3 }, port: { weight: 1 } });\n    self.settingConfigs.groups.push({ user: {}, password: {} });\n    self.settingConfigs.groups.push({ period: { weight: 2 }, periodUnits: {} });\n    self.settingConfigs.conditions['authentication'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['host'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['port'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['databaseName'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['tableName'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['user'] = setting => {\n      return !!setting['authentication'].value && setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['password'] = setting => {\n      return !!setting['authentication'].value && setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['threshold'] = setting => {\n      return !setting['historyMode'].value;\n    };\n    self.settingConfigs.conditions['period'] = setting => {\n      return setting['historyMode'].value == 1;\n    };\n    self.settingConfigs.conditions['periodUnits'] = setting => {\n      return setting['historyMode'].value == 1;\n    };\n    self.settingConfigs.conditions['alarm_group'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['alarms_count'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['tags_group'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    self.settingConfigs.conditions['tags_count'] = setting => {\n      return setting['databaseType'].value == 1;\n    };\n    if (self.settings['authentication']) {\n      self.settingConfigs.groups.push({ host: { weight: 3 }, port: { weight: 1 } });\n      self.settingConfigs.groups.push({ user: {}, password: {} });\n      self.settingConfigs.conditions['user'] = setting => {\n        return !!setting['authentication'].value;\n      };\n      self.settingConfigs.conditions['password'] = setting => {\n        return !!setting['authentication'].value;\n      };\n    }\n\n    self.properties['alarmsCount'] = self.settings['alarms_count'].value;\n    self.properties['tagsCount'] = self.settings['tags_count'].value;\n    self.properties['valueInput'] = valueInput || 0;\n    self.properties['isOutput'] = isOutput;\n  }\n\n  static historyOnCreated(self) {\n    self.useInterval = false;\n    self.properties['alarmsCount'] = 0;\n    self.properties['tagsCount'] = 0;\n    self.properties['valueInput'] = 0;\n    self.properties['isOutput'] = true;\n    self.properties['pointName'] = 'undefined';\n    self.properties['obj'] = [];\n    self.properties['lastHistoryValue'] = null;\n    self.properties['dynamicInputStartPosition'] = 2;\n  }\n\n  //static async doHistoryFunctions(self, valueInput:number, histTrigger:number, histErrorOutput:number, storedHistCountOutput:number, lastHistExportOutput:number) {\n  static async doHistoryFunctions(self) {\n    let input = null;\n    if (self.properties['isOutput']) input = self.getInputData(self.properties['valueInput']);\n    else input = self.outputs[self.properties['valueInput']].data;\n    if (self.getInputData(self.histTriggerInput) && self.inputs[self.histTriggerInput].updated)\n      await HistoryConfig.storeLogEntry(self, input);\n    else if (input != null && (await HistoryConfig.checkCOV(self, input))) {\n      await HistoryConfig.storeLogEntry(self, input);\n    }\n    if (self.properties['obj'].length > 0) await HistoryConfig.trySendStoredData(self);\n    self.setOutputData(self.storedHistCountOutput, self.properties['obj'].length);\n  }\n\n  static async trySendStoredData(self) {\n    let decimals = self.settings['decimals'].value;\n    if (decimals > 5) decimals = 5;\n\n    var points = [];\n    self.properties['obj'].forEach(log => {\n      if (typeof log.payload == 'number') log.payload = log.payload.toFixed(decimals);\n      var tagList = {};\n      tagList['point'] = self.properties['pointName'] || 'undefined';\n      for (var j = 2; j < Object.keys(log).length - 1; j++) {\n        var key = Object.keys(log)[j];\n        tagList[key] = log[key];\n      }\n      for (var i = 0; i < 10; i++) {\n        tagList['tag' + (i + 1)] = log['tags'][i] || null;\n      }\n      // this.getInputData(2), //tableName\n      points.push({\n        measurement: self.getInputData(2),\n        fields: {\n          val: log.payload,\n          //ts: log.timestamp.valueOf(), // check that self is the correct DATE format.\n        },\n        tags: tagList,\n        time: log.timestamp, // check that self is the correct DATE format.\n      });\n      /* \n        measurement: self.settings['tableName'].value,\n        fields: {\n          val: log.payload,\n          //ts: log.timestamp.valueOf(), // check that self is the correct DATE format.\n        },\n        alarms: {\n          point: pointName || 'undefined',\n        },\n        time: log.timestamp.valueOf(), // check that self is the correct DATE format.\n      });\n      */\n    });\n    var errorFlag = false;\n\n    /////////////////////////////////////////////////////////////\n    // This section should be replaced with the history storage mode of choice.\n\n    // FOR POSTGRESQL DB (NUBE DATABASE)\n    if (self.settings['databaseType'].value == 0) {\n      //USING AXIOS\n      // For Multiple points in 1 push\n      var multiPointPost = [];\n      const clientIDfromPlat = await SystemUtils.getDeviceIdDb();\n      const deviceIDfromPlat = await SystemUtils.getDeviceIdDb();\n      let foundDeviceID = false;\n      let foundClientID = false;\n      typeof deviceIDfromPlat == 'string' ? (foundDeviceID = true) : null;\n      typeof deviceIDfromPlat == 'string' ? (foundClientID = true) : null;\n      var inputVal;\n      var typeOfVal;\n      var valAsNum;\n      const pgUrl = config.pg.baseURL;\n      points.forEach(point => {\n        inputVal = point['fields']['val'];\n        typeOfVal = typeof inputVal;\n        if (typeOfVal === 'string' || typeOfVal === 'boolean') valAsNum = Number(point['fields']['val']);\n        else valAsNum = inputVal;\n        multiPointPost.push({\n          deviceid: foundDeviceID ? deviceIDfromPlat : 'unknownDeviceID',\n          clientid: foundClientID ? clientIDfromPlat : 'unknownClientID',\n          val: valAsNum,\n          point: point['tags']['point'],\n          ts: moment(point['time'])._d,\n        });\n      });\n\n      axios({\n        method: 'post',\n        url: pgUrl,\n        data: multiPointPost,\n      })\n        .then(function() {})\n        .catch(function(error) {\n          self.setOutputData(self.histErrorOutput, String(error));\n          errorFlag = true;\n        });\n    }\n\n    // FOR INFLUX DB\n    if (self.settings['databaseType'].value == 1) {\n      const host = self.settings['host'].value || 'localhost';\n      const port = self.settings['port'].value || 8086;\n      var writeOptions = {};\n\n      var client = new Influx.InfluxDB({\n        host: self.settings['host'].value || 'localhost',\n        port: self.settings['port'].value || 8086,\n        protocol: 'http', //self.influxdbConfig.usetls ? \"https\" : \"http\",\n        database: self.settings['databaseName'].value || 'undefined',\n        username: self.settings['authentication'].value ? self.settings['user'].value : '',\n        password: self.settings['authentication'].value ? CryptoUtils.decrypt(self.settings['password'].value) : '',\n        /*\n      schema: [\n        {\n          measurement: self.settings['tableName'].value,\n          fields: {\n            point: Influx.FieldType.STRING,\n            val: Influx.FieldType.ANY,\n            ts: Influx.FieldType.TIMESTAMP\n          },\n          tags: [],\n        }\n      ]\n      */\n      });\n      await client.writePoints(points, writeOptions).catch(err => {\n        self.setOutputData(self.histErrorOutput, String(err.code));\n        errorFlag = true;\n        //console.log('err', err);\n      });\n    }\n\n    /////////////////////////////////////////////////////////////\n\n    if (!errorFlag) {\n      self.properties['obj'] = [];\n      self.setOutputData(self.histErrorOutput, '');\n      self.settings['timeAsString'].value\n        ? self.setOutputData(self.lastHistExportOutput, moment().format(), true)\n        : self.setOutputData(self.lastHistExportOutput, moment().valueOf(), true);\n    }\n  }\n\n  static historyFunctionsForAfterSettingsChange(self, pointName: string, save: boolean = true) {\n    self.properties['pointName'] = pointName;\n    if (self.settings['databaseType'].value == 0) {\n      self.settings['alarms_count'].value = 0;\n      self.settings['tags_count'].value = 0;\n    }\n    HistoryConfig.changeAlarmsCount(self, self.settings['alarms_count'].value);\n    // Alarms settings values gets inserted after certain time -- Container.setSettings(properties, node);\n    setTimeout(() => {\n      HistoryConfig.renameAlarmInputs(self);\n    }, 100);\n    HistoryConfig.changeTagsCount(self, self.settings['tags_count'].value);\n    HistoryConfig.setPeriodicLogging(self);\n    if (save) {\n      NodeUtils.persistProperties(self, true, true, true);\n    }\n    if (self.properties['isOutput']) self.onInputUpdated();\n  }\n\n  static async storeLogEntry(self, input) {\n    if (input == null) return -1;\n    // cap the amount of data that can be stored\n    const storageLimit = Utils.clamp(self.settings['storage-limit'].value, 0, 50);\n    // round the time to the nearest min. For example 15min. 1:00, 1:15\n    const minuteRound = Utils.clamp(self.settings['minuteRoundValue'].value, 0, 60);\n    const now = minuteRound ? await self.nearestFutureMinutes(minuteRound, moment()) : moment();\n\n    // object data\n    let msg = {\n      payload: input,\n      timestamp: now._d,\n    };\n    // add alarm values\n    for (\n      var i = self.properties['dynamicInputStartPosition'];\n      i < self.properties['dynamicInputStartPosition'] + Number(self.properties['alarmsCount']);\n      i++\n    ) {\n      let alarmNum = i - self.properties['dynamicInputStartPosition'] + 1;\n      let alarmName = self.settings['alarm' + alarmNum].value || 'alarm' + alarmNum;\n      msg[alarmName] = self.getInputData(i) || 'null';\n    }\n    // add tags\n    var tags = [];\n    var j = 1;\n    while (j <= Number(self.properties['tagsCount'])) {\n      if (self.settings['tag' + j].value) tags.push(self.settings['tag' + j].value);\n      j++;\n    }\n    msg['tags'] = tags;\n\n    // build an object\n    self.properties['obj'].push(msg);\n    while (self.properties['obj'].length > storageLimit) {\n      self.properties['obj'].shift();\n    }\n    self.properties['lastHistoryValue'] = input;\n    NodeUtils.persistProperties(self, true, true, true);\n    //HistoryConfig.persistProperties(self);\n    return self.properties['obj'].length;\n  }\n\n  static async checkCOV(self, input) {\n    if (!self.settings['historyMode'].value) {\n      // if COV mode\n      const threshold = self.settings['threshold'].value;\n      if (threshold === 0 && input !== self.properties['lastHistoryValue']) return true;\n      const isNumber = typeof input === 'number';\n      if (input !== self.properties['lastHistoryValue']) {\n        if (\n          typeof self.properties['lastHistoryValue'] !== 'number' ||\n          !isNumber ||\n          (isNumber && Math.abs(input - self.properties['lastHistoryValue']) >= self.settings['threshold'].value)\n        )\n          return true;\n      }\n    }\n    return false;\n  }\n\n  static setPeriodicLogging(self) {\n    if (self.settings['historyMode'].value == 1 && !self.useInterval) {\n      self.useInterval = true;\n      let interval = self.settings['period'].value;\n      interval = TimeUtils.timeConvert(interval, self.settings['periodUnits'].value);\n      self.timeoutFunc = setInterval(async () => {\n        let input = null;\n        if (self.properties['isOutput']) input = self.getInputData(self.properties['valueInput']);\n        else input = self.outputs[self.properties['valueInput']].data;\n        await HistoryConfig.storeLogEntry(self, input);\n        if (self.properties['obj'].length > 0) await HistoryConfig.trySendStoredData(self);\n        self.setOutputData(self.storedHistCountOutput, self.properties['obj'].length);\n        // add status output\n      }, interval);\n    } else if (self.settings['historyMode'].value != 1 && self.useInterval) {\n      self.useInterval = false;\n      clearInterval(self.timeoutFunc);\n    }\n  }\n\n  static nearestFutureMinutes(interval, someMoment) {\n    const roundedMinutes = Math.ceil(someMoment.minute() / interval) * interval;\n    return someMoment\n      .clone()\n      .minute(roundedMinutes)\n      .second(0);\n  }\n\n  static changeAlarmsCount(self, target_count) {\n    if (target_count > 10) {\n      target_count = 10;\n      self.settings['alarms_count'].value = 10;\n    } else if (target_count < 0) {\n      target_count = 0;\n      self.settings['alarms_count'].value = 0;\n    }\n    self.properties['alarmsCount'] = Number(self.properties['alarmsCount']);\n    let diff = target_count - self.properties['alarmsCount'];\n    if (diff == 0) return;\n\n    //add inputs\n    self.changeInputsCount(target_count + self.properties['dynamicInputStartPosition'], Type.STRING);\n\n    //change settings for topics\n    var alarmsToAdd = {};\n    if (diff > 0) {\n      for (let i = self.properties['alarmsCount'] + 1; i <= target_count; i++) {\n        alarmsToAdd['alarm' + i] = {\n          description: 'Alarm ' + i,\n          value: '',\n          type: SettingType.STRING,\n        };\n      }\n      if (self.properties['alarmsCount'] <= 0)\n        self.settings = SettingUtils.insertIntoObjectAtPosition(self.settings, alarmsToAdd, 'alarms_count');\n      else\n        self.settings = SettingUtils.insertIntoObjectAtPosition(\n          self.settings,\n          alarmsToAdd,\n          'alarm' + self.properties['alarmsCount'],\n        );\n    } else if (diff < 0) {\n      for (let i = self.properties['alarmsCount']; i > target_count; i--) {\n        delete self.settings['alarm' + i];\n      }\n    }\n    self.properties['alarmsCount'] = target_count;\n  }\n\n  static renameAlarmInputs(self) {\n    for (let i = 1; i <= self.properties['alarmsCount']; i++) {\n      //this.inputs[i].name = '[' + i + ']';\n      let alarm = self.settings['alarm' + i].value;\n      if (alarm.length > 20) alarm = '...' + alarm.substr(alarm.length - 20, 20);\n      self.inputs[self.properties['dynamicInputStartPosition'] + i - 1].name = 'alarm' + i + ' | ' + alarm;\n    }\n\n    if (self.side == Side.editor) {\n      for (let i = 1; i <= self.properties['alarmsCount']; i++) {\n        self.inputs[self.properties['dynamicInputStartPosition'] + i - 1].label =\n          self.inputs[self.properties['dynamicInputStartPosition'] + i - 1].name;\n      }\n      self.setDirtyCanvas(true, true);\n    }\n  }\n\n  static changeTagsCount(self, target_count) {\n    if (target_count > 10) {\n      target_count = 10;\n      self.settings['tags_count'].value = 10;\n    } else if (target_count < 0) {\n      target_count = 0;\n      self.settings['tags_count'].value = 0;\n    }\n    self.properties['tagsCount'] = Number(self.properties['tagsCount']);\n    let diff = target_count - self.properties['tagsCount'];\n    if (diff == 0) return;\n\n    //change settings for topics\n    var tagsToAdd = {};\n    if (diff > 0) {\n      for (let i = self.properties['tagsCount'] + 1; i <= target_count; i++) {\n        tagsToAdd['tag' + i] = {\n          description: 'Tag ' + i,\n          value: '',\n          type: SettingType.STRING,\n        };\n      }\n      if (self.properties['tagsCount'] == 0)\n        self.settings = SettingUtils.insertIntoObjectAtPosition(self.settings, tagsToAdd, 'tags_count');\n      else\n        self.settings = SettingUtils.insertIntoObjectAtPosition(\n          self.settings,\n          tagsToAdd,\n          'tag' + self.properties['tagsCount'],\n        );\n    } else if (diff < 0) {\n      for (let i = self.properties['tagsCount']; i > target_count; i--) {\n        delete self.settings['tag' + i];\n      }\n    }\n    self.properties['tagsCount'] = target_count;\n  }\n\n  // static getDeviceID(self): Promise<Array<any>> {\n  //   return new Promise((resolve, reject) => {\n  //     try {\n  //       HistoryConfig.findMainContainer(self).db.getNodeType('system/platform', (err, docs) => {\n  //         if (!err) {\n  //           let output = [];\n  //           output.push(docs);\n  //           if (output[0] && output[0][0] && output[0][0].properties) {\n  //             resolve(output[0][0].properties['deviceID'].trim());\n  //             return output[0][0].properties['deviceID'].trim();\n  //           } else {\n  //           }\n  //           resolve(output);\n  //           return output;\n  //         } else {\n  //           console.log(err);\n  //           reject(err);\n  //         }\n  //       });\n  //     } catch (error) {\n  //       console.log(error);\n  //     }\n  //   });\n  // }\n\n  // static getClientID(self): Promise<Array<any>> {\n  //   return new Promise((resolve, reject) => {\n  //     try {\n  //       HistoryConfig.findMainContainer(self).db.getNodeType('system/platform', (err, docs) => {\n  //         if (!err) {\n  //           let output = [];\n  //           output.push(docs);\n  //           if (output[0] && output[0][0] && output[0][0].settings) {\n  //             resolve(output[0][0].settings['clientId'].value.trim());\n  //             return output[0][0].settings['clientId'].value.trim();\n  //           } else {\n  //           }\n  //           resolve(output);\n  //           return output;\n  //         } else {\n  //           console.log(err);\n  //           reject(err);\n  //         }\n  //       });\n  //     } catch (error) {\n  //       console.log(error);\n  //     }\n  //   });\n  // }\n\n  static findMainContainer(self) {\n    if (self.hasOwnProperty('container')) return HistoryConfig.findMainContainer(self.container);\n    else return self;\n  }\n\n  static persistProperties(self) {\n    if (!self.container.db) return;\n    self.container.db.updateNode(self.id, self.container.id, {\n      $set: {\n        properties: self.properties,\n        inputs: self.inputs,\n        settings: self.settings,\n      },\n    });\n  }\n}\n","/******************************************************\n *\n * Node Constructor should include the following:\n * Add this line in the settings setup, where the history settings should appear:\n *      PriorityConfig.addPrioritySettings(this);\n *\n * Add this line at the end after this.setSettingsConfig() has been called,\n * or if this.setSettingsConfig() has not been used, then add this line after settings setup in Node Constructor:\n *      PriorityConfig.addPrioritySettingsConfig(this);\n *\n *\n * Node Functions should include the following:\n *     async onInputUpdated() {\n *       if (this.side !== Side.server) return; // only execute on server\n *       PriorityConfig.doPriorityFunctions(this);\n *     }\n *\n *     onAfterSettingsChange() {\n *       PriorityConfig.priorityFunctionsForAfterSettingsChange(this);\n         PriorityConfig.doPriorityFunctions(this);\n *       if (this.side !== Side.server) return; // HISTORY FUNCTONS MUST BE DONE ON BOTH SIDES\n *     }\n *\n */\n\nimport { SettingType, Type } from '../../node-io';\nimport NodeUtils from '../../utils/node-utils';\n//import { tagsAll } from './tags';\n\nexport default class PriorityConfig {\n  static addPrioritySettings(self) {\n    self.properties['priorityStartInput'] = self.getFreeInputId();\n    self.properties['priorityStartOutput'] = self.getFreeOutputId();\n    self.addInput('inputValue', Type.ANY);\n    self.addInput('inputPriority', Type.NUMBER);\n    self.addOutput('outputValue', Type.ANY);\n    self.addOutput('outputPriority', Type.NUMBER);\n    self.addOutput('outputJSON', Type.STRING);\n\n    for (let input in self.inputs) {\n      if (self.inputs[input].name == 'inputValue') {\n        self.properties['valueInput'] = input;\n      } else if (self.inputs[input].name == 'inputPriority') self.properties['priorityInput'] = input;\n    }\n\n    for (let output in self.outputs) {\n      if (self.outputs[output].name == 'outputValue') {\n        self.properties['valueOutput'] = output;\n      } else if (self.outputs[output].name == 'outputPriority') {\n        self.properties['priorityOutput'] = output;\n      } else if (self.outputs[output].name == 'outputJSON') self.properties['jsonOutput'] = output;\n    }\n\n    /**\n     Point settings\n     */\n    self.settings['input_group'] = {\n      description: 'Input Settings',\n      value: '',\n      type: SettingType.GROUP,\n    };\n\n    self.settings['decimals'] = {\n      description: 'Decimal Places (Limit 5)',\n      value: 3,\n      type: SettingType.NUMBER,\n    };\n\n    self.settings['inputMethod'] = {\n      description: 'Input Method',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'Value and Priority' },\n          { value: 1, text: 'Priority Array' },\n          { value: 2, text: 'JSON' },\n        ],\n      },\n      value: 0,\n    };\n\n    // SETTINGS FOR \"VALUE AND PRIORITY\"\n    self.properties['priorityLevelItems'] = Array(16)\n      .fill(null)\n      .map((_, i) => ({ value: i + 1, text: (i + 1).toString() }));\n\n    self.settings['priorityLevel'] = {\n      description: 'Write Priority Level',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: self.properties['priorityLevelItems'],\n      },\n      value: 16,\n    };\n\n    // SETTINGS FOR \"PRIORITY ARRAY\"\n    self.settings['in1'] = {\n      description: 'in1',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in2'] = {\n      description: 'in2',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in3'] = {\n      description: 'in3',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in4'] = {\n      description: 'in4',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in5'] = {\n      description: 'in5',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in6'] = {\n      description: 'in6',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in7'] = {\n      description: 'in7',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in8'] = {\n      description: 'in8',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in9'] = {\n      description: 'in9',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in10'] = {\n      description: 'in10',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in11'] = {\n      description: 'in11',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in12'] = {\n      description: 'in12',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in13'] = {\n      description: 'in13',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in14'] = {\n      description: 'in14',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in15'] = {\n      description: 'in15',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n    self.settings['in16'] = {\n      description: 'in16',\n      value: false,\n      type: SettingType.BOOLEAN,\n    };\n  }\n\n  static addPrioritySettingsConfig(self) {\n    if (!self.settingConfigs.hasOwnProperty('groups') && !self.settingConfigs.hasOwnProperty('conditions')) {\n      self.setSettingsConfig({ groups: [], conditions: {} });\n    }\n    self.settingConfigs.groups.push({ input_group: {} });\n    self.settingConfigs.conditions['priorityLevel'] = setting => {\n      return setting['inputMethod'].value == 0;\n    };\n    self.settingConfigs.conditions['in1'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in2'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in3'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in4'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in5'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in6'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in7'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in8'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in9'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in10'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in11'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in12'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in13'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in14'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in15'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n    self.settingConfigs.conditions['in16'] = setting => {\n      return setting['inputMethod'].value == 1;\n    };\n\n    //self.properties['priorityArray'] = new Array<Object>(16).fill(null);\n    self.properties['priorityArray'] = {};\n    for (var i = 1; i < 16; i++) {\n      self.properties['priorityArray'][String(i)] = null;\n    }\n    self.properties['inputMethod'] = self.settings['inputMethod'].value;\n    self.properties['prioritySettingsArray'] = new Array<Object>(16).fill(false);\n  }\n\n  static priorityOnCreated(self) {\n    self.properties['dynamicInputStartPosition'] = self.getInputsCount();\n    NodeUtils.persistProperties(self, true, true, true, true);\n  }\n\n  static async doPriorityFunctions(self) {\n    let input = null;\n    let priority = null;\n    switch (self.properties['inputMethod']) {\n      case 0:\n        input = self.getInputData(self.properties['priorityStartInput']);\n        if (input == undefined) input = null;\n        priority = self.getInputData(self.properties['priorityStartInput'] + 1) || 16;\n        if (priority > 16 || priority == null) priority = 16;\n        //self.properties['priorityArray'][`${priority-1}`] = input;\n        self.properties['priorityArray'][String(priority)] = input;\n        break;\n      case 1:\n        var inputsCount = 0;\n        self.properties['prioritySettingsArray'].forEach(setting => {\n          if (setting) inputsCount++;\n        });\n        for (var i = 0; i < inputsCount; i++) {\n          input = self.getInputData(self.properties['priorityStartInput'] + i);\n          if (input == undefined) input = null;\n          const inputName = self.inputs[self.properties['priorityStartInput'] + i].name;\n          if (inputName.startsWith('in')) {\n            const inputNumber = Number(inputName.replace(/\\D/g, ''));\n            if (!isNaN(inputNumber)) {\n              self.properties['priorityArray'][`${inputNumber}`] = input;\n            }\n          }\n        }\n        break;\n      case 2:\n        input = self.getInputData(self.properties['priorityStartInput']);\n        if (typeof input === 'string') {\n          try {\n            self.properties['priorityArray'] = JSON.parse(input);\n          } catch (e) {\n            console.log('PRIORITY ARRAY JSON ERROR: ', e);\n          }\n        }\n        break;\n    }\n\n    // CODE FOR A FUTURE INPUT METHOD\n    /*\n    if (payload.hasOwnProperty('priority') && payload.hasOwnProperty('value')) {\n      const priority = parseInt(payload['priority']);\n      if (isNaN(priority) || priority < 1 || priority > 16) {\n        this.debugErr('Invalid priority');\n        return;\n      }\n      // Release override\n      if (payload.value === '' || payload.value === null) {\n        this.priorityArray[priority - 1] = {}; // 1 priority on 0 position, 2 on 1 and so on...\n      } else {\n        this.priorityArray[priority - 1] = payload;\n      }\n    }\n    */\n\n    //const highestPriorityIndex = self.properties['priorityArray'].findIndex(\n    const highestPriorityIndex =\n      Object.values(self.properties['priorityArray']).findIndex(element => element != null) + 1;\n\n    if (highestPriorityIndex <= 0) {\n      self.setOutputData(self.properties['priorityStartOutput'], null);\n      self.setOutputData(self.properties['priorityStartOutput'] + 1, null);\n      self.setOutputData(self.properties['priorityStartOutput'] + 2, null);\n    } else {\n      self.setOutputData(\n        self.properties['priorityStartOutput'],\n        self.properties['priorityArray'][String(highestPriorityIndex)],\n      );\n      self.setOutputData(self.properties['priorityStartOutput'] + 1, highestPriorityIndex);\n      self.setOutputData(self.properties['priorityStartOutput'] + 2, self.properties['priorityArray']);\n    }\n  }\n\n  static async priorityFunctionsForAfterSettingsChange(self) {\n    if (self.properties['inputMethod'] !== self.settings['inputMethod'].value) {\n      PriorityConfig.initializePriorityArray(self);\n      switch (self.settings['inputMethod'].value) {\n        case 0:\n          if (self.properties['inputMethod'] == 2) {\n            self.removeInputAtPosition(self.properties['priorityStartInput']);\n          } else if (self.properties['inputMethod'] == 1) {\n            PriorityConfig.updatePriorityInputsFromSettings(self, true);\n          }\n          self.addInputAtPosition(self.properties['priorityStartInput'], 'inputValue', Type.ANY);\n          self.addInputAtPosition(self.properties['priorityStartInput'] + 1, 'inputPriority', Type.NUMBER);\n          break;\n        case 1:\n          if (self.properties['inputMethod'] == 2) {\n            self.removeInputAtPosition(self.properties['priorityStartInput']);\n          } else if (self.properties['inputMethod'] == 0) {\n            self.removeInputAtPosition(self.properties['priorityStartInput']);\n            self.removeInputAtPosition(self.properties['priorityStartInput']);\n          }\n          PriorityConfig.updatePriorityInputsFromSettings(self);\n          break;\n        case 2:\n          if (self.properties['inputMethod'] == 1) {\n            PriorityConfig.updatePriorityInputsFromSettings(self, true);\n          } else if (self.properties['inputMethod'] == 0) {\n            self.removeInputAtPosition(self.properties['priorityStartInput']);\n            self.removeInputAtPosition(self.properties['priorityStartInput']);\n          }\n          self.addInputAtPosition(self.properties['priorityStartInput'], 'inputJSON', Type.ANY);\n          break;\n      }\n    } else if (self.properties['inputMethod'] == 1) PriorityConfig.updatePriorityInputsFromSettings(self);\n    self.properties['inputMethod'] = self.settings['inputMethod'].value;\n    NodeUtils.persistProperties(self, true, true, true);\n  }\n\n  static async updatePriorityInputsFromSettings(self, removeAll = false) {\n    const startPosition = self.properties['priorityStartInput'];\n    var settingsArray = new Array(16).fill(false);\n    var inputsArray = new Array(16).fill(-1);\n    //console.log('INPUTS BEFORE', self.inputs)\n\n    for (var i = 0; i < 16; i++) {\n      removeAll ? (settingsArray[i] = false) : (settingsArray[i] = self.settings['in' + (i + 1)].value);\n      if (self.inputs.hasOwnProperty(`${startPosition + i}`)) {\n        const inputName = self.inputs[`${startPosition + i}`].name;\n        if (inputName.startsWith('in')) {\n          const inputNumber = Number(inputName.replace(/\\D/g, ''));\n          if (!isNaN(inputNumber)) {\n            inputsArray[i] = inputNumber;\n          }\n        }\n      }\n      self.properties['prioritySettingsArray'] = settingsArray;\n    }\n    //console.log('settingsArray', settingsArray)\n    //console.log('inputsArray', inputsArray)\n\n    for (var j = 0; j < 16; j++) {\n      //console.log('J', j)\n      if (settingsArray[j]) {\n        for (var y = 0; y <= j; y++) {\n          //console.log('Y', y)\n          const inputArrayatY = inputsArray[y];\n          //console.log('inputArrayatY', inputArrayatY)\n          if (inputArrayatY == j + 1) break;\n          //console.log('pastBreak')\n          if (inputArrayatY == -1 || inputArrayatY > j + 1) {\n            self.addInputAtPosition(startPosition + y, 'in' + (j + 1), Type.ANY);\n            inputsArray.splice(y, 0, j + 1);\n            inputsArray.pop();\n            //console.log('inputsArray', inputsArray);\n            //console.log('INPUTS', self.inputs)\n            break;\n          }\n        }\n      } else if (!settingsArray[j]) {\n        for (var x = 0; x <= j; x++) {\n          //console.log('X', x)\n          const inputArrayatX = inputsArray[x];\n          if (inputArrayatX == -1 || inputArrayatX > j + 1) {\n            break;\n          } else if (inputsArray[x] == j + 1) {\n            self.removeInputAtPosition(startPosition + x);\n            inputsArray.splice(x, 1);\n            inputsArray.push(-1);\n            //console.log('inputsArray', inputsArray)\n            //console.log('INPUTS', self.inputs)\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  static async initializePriorityArray(self) {\n    self.properties['priorityArray'] = {};\n    for (var i = 1; i < 16; i++) {\n      self.properties['priorityArray'][String(i)] = null;\n    }\n  }\n}\n","import * as nodemailer from 'nodemailer';\nimport { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport CryptoUtils from '../../../utils/crypto-utils';\n\nclass EmailNode extends Node {\n  lastTrigger: boolean;\n  // Supported services: https://github.com/nodemailer/nodemailer/blob/master/lib/well-known/services.json\n  services = ['Gmail', 'Hotmail', 'Outlook365', 'Yahoo'].map(service => {\n    return { value: service, text: service };\n  });\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/misc\"].email.title;\n    this.description = NODE_INFO[\"protocols/misc\"].email.description;\n    this.settings['service'] = NodeSetting.create({\n      description: 'Service',\n      value: this.services[0].value,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: this.services,\n      },\n    });\n    this.settings['user'] = NodeSetting.create({ description: 'Email', value: '', type: SettingType.STRING });\n    this.settings['pass'] = NodeSetting.create({ description: 'Password', value: '', type: SettingType.PASSWORD });\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInputWithSettings('recipient', Type.STRING, '', 'To', false);\n    this.addInputWithSettings('subject', Type.STRING, '', 'Subject', false);\n    this.addInputWithSettings('message', Type.STRING, '', 'Message', false);\n    this.addOutput('response', Type.STRING);\n    this.addOutput('error', Type.STRING);\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return; // only execute on server\n\n    let trigger = this.getInputData(0);\n    if (!Utils.hasInput(trigger)) trigger = false;\n    if (trigger == this.lastTrigger) return;\n    else this.lastTrigger = trigger;\n    if (trigger == false) return;\n\n    const service = this.settings['service'].value;\n    const user = this.settings['user'].value;\n    const from = user;\n    const pass = this.settings['pass'].value;\n    const to = this.getInputData(1);\n    const subject = this.getInputData(2);\n    const text = this.getInputData(3);\n\n    const transporter = nodemailer.createTransport({\n      service,\n      auth: { user, pass: CryptoUtils.decrypt(pass) },\n    });\n\n    transporter.sendMail({ from, to, subject, text }, error => {\n      if (error) {\n        this.emitError(error.message);\n      } else {\n        this.emitResult(true);\n      }\n    });\n  }\n\n  emitResult(result) {\n    this.setOutputData(0, result);\n    this.setOutputData(1, null);\n  }\n\n  emitError(body) {\n    this.setOutputData(0, null);\n    this.setOutputData(1, body);\n  }\n}\n\nContainer.registerNodeType('protocols/misc/email', EmailNode);\n","module.exports = require(\"nodemailer\");","import { default as axios, Method } from 'axios';\nimport { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { NodeSetting, SettingType } from '../../../node-io';\n\nenum HttpMethod {\n  GET = 'GET',\n  POST = 'POST',\n  PUT = 'PUT',\n  DELETE = 'DELETE',\n  PATCH = 'PATCH',\n}\n\nclass HttpClientNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/http\"][\"http-client\"].title;\n    this.description = NODE_INFO[\"protocols/http\"][\"http-client\"].description;\n    this.addInput('request body');\n    this.addOutput('response');\n    this.settings['enable'] = NodeSetting.create({ description: 'Enable', value: true, type: SettingType.BOOLEAN });\n    this.settings['method'] = NodeSetting.create({\n      description: 'Request Method',\n      value: HttpMethod.GET,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: Object.keys(HttpMethod),\n      },\n    });\n    this.settings['url'] = NodeSetting.create({ description: 'HTTP URL', value: 'http://', type: SettingType.STRING });\n  }\n\n  onInputUpdated() {\n    if (!this.isEnabled()) return;\n    const methodsWithBody = [HttpMethod.PATCH, HttpMethod.PUT, HttpMethod.POST].map(v =>\n      v.toString().toLowerCase(),\n    );\n    const url = this.getSanitizedUrl();\n    const method = this.getSanitizedMethod();\n    const input_data = this.inputs[0].data;\n    const data =\n      methodsWithBody.includes(method) && typeof input_data === 'object' ? input_data : undefined;\n    try {\n      this.validateMethod(method);\n      axios.request({ url, method, data }).then(\n        r => this.setOutputData(0, r.data),\n        e => this.debugErr(e.message),\n      );\n    } catch (e) {\n      this.debugErr(e.message);\n    }\n  }\n\n  isEnabled(): boolean {\n    return this.settings['enable'].value;\n  }\n\n  getSanitizedUrl(): string {\n    return this.settings['url'].value.trim();\n  }\n\n  getSanitizedMethod(): Method {\n    return this.settings['method'].value.trim().toLowerCase();\n  }\n\n  validateMethod(method: string) {\n    if (Object.keys(HttpMethod).indexOf(method.toUpperCase()) === -1) {\n      throw new Error('Unknown HTTP request method: ' + method);\n    }\n  }\n\n  onCreated() {}\n  onAdded() {}\n  onAfterSettingsChange() {}\n}\n\nContainer.registerNodeType('protocols/http-client', HttpClientNode);\n","import axios from 'axios';\nimport { EDGE_28_NETWORK } from '../../../constants';\nimport { Container } from '../../../container';\nimport { ContainerNode } from '../../../container-node';\nimport { Node } from '../../../node';\nimport Icons from '../../../node-icons';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport TimeUtils from '../../../utils/time-utils';\nimport { ADD_POINT, edgeApiVer, edgeIp, edgePort, REMOVE_POINT } from './edge-constant';\nimport Edge28Utils from './edge-utils';\n\nclass Edge28ApiNode extends ContainerNode {\n  // point object\n  pointNodes: Array<Node> = [];\n  edgeReadDI_Store: {};\n  edgeReadUI_Store: {};\n\n  // node inputs\n  inAlarmTrigger = 0;\n  inHistoryTrigger = 1;\n  inInput = 2;\n\n  // node outputs\n  outVal = 0;\n  outError = 1;\n  outMessageJson = 2;\n  outAlarm = 3;\n\n  lastInterval = 1000;\n  runState: boolean = true;\n  UI_timeoutFunc;\n  DI_timeoutFunc;\n  _ui = 'ui';\n  _di = 'di';\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/nube\"][\"edge-28-network\"].title;\n    this.description = NODE_INFO[\"protocols/nube\"][\"edge-28-network\"].description;\n    if (this.side !== Side.server) {\n      this.iconImageUrl = NODE_INFO[\"protocols/nube\"][\"edge-28-network\"].iconImageUrl;\n    }\n\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addInputWithSettings('interval', Type.NUMBER, 2, 'Polling Interval');\n    this.addOutput('connected', Type.BOOLEAN);\n    this.addOutput('error', Type.STRING);\n\n    this.headerColor = '#184840';\n    this.settings['time'] = NodeSetting.create({\n      description: 'Polling Interval Time Setting',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          // { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n  }\n\n  async fetchPointValue(host: string, port: number, apiVer: string, pointType: string): Promise<any> {\n    const url = `${Utils.buildUrl(host, port)}/api/${apiVer}/read/all/${pointType}`;\n    const pointValue = await axios.get(url);\n    return pointValue.data;\n  }\n\n  async onAdded() {\n    super.onAdded();\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n    clearInterval(this.UI_timeoutFunc);\n    clearInterval(this.DI_timeoutFunc);\n    let enable = this.getInputData(0);\n    if (!enable) {\n      this.setOutputData(0, false); //connected\n      this.runState = false;\n      return;\n    }\n    let interval = this.getInputData(1);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    this.startInputPolling(interval);\n    await this.onInputUpdated();\n  }\n\n  async onRemoved() {\n    super.onRemoved();\n    clearInterval(this.UI_timeoutFunc);\n    clearInterval(this.DI_timeoutFunc);\n  }\n\n  startInputPolling(interval: number) {\n    if (this.side !== Side.server) return;\n    this.UI_timeoutFunc = setInterval(async () => {\n      // get UIs\n      await this.pollUIs();\n      this.sendPayloadToPointNodesFunc();\n    }, interval);\n    this.DI_timeoutFunc = setInterval(async () => {\n      // get DIs\n      await this.pollDIs();\n      this.sendPayloadToPointNodesFunc();\n    }, interval + 5);\n  }\n\n  async pollUIs() {\n    try {\n      this.edgeReadUI_Store = await this.fetchPointValue(edgeIp, edgePort, edgeApiVer, this._ui);\n      this.setOutputData(0, true); //connected\n      this.setOutputData(1, false); //error\n      // NodeColours.nodeColourChange(this, NodeState.ONLINE);\n    } catch (err) {\n      this.debugInfo(`ERROR: getting edge point type: ${this._ui} ${err}`);\n      this.setOutputData(0, false); //connected\n      this.setOutputData(1, true); //error\n      // NodeColours.nodeColourChange(this, NodeState.OFFLINE);\n    }\n  }\n\n  async pollDIs() {\n    try {\n      this.edgeReadDI_Store = await this.fetchPointValue(edgeIp, edgePort, edgeApiVer, this._di);\n      this.setOutputData(0, true); //connected\n      this.setOutputData(1, false); //error\n      // NodeColours.nodeColourChange(this, NodeState.ONLINE);\n    } catch (err) {\n      this.debugInfo(`ERROR: getting edge point type: ${this._di} ${err}`);\n      this.setOutputData(0, false); //connected\n      this.setOutputData(1, true); //error\n      // NodeColours.nodeColourChange(this, NodeState.OFFLINE);\n    }\n  }\n\n  async pollInputsAndSend() {\n    if (this.side !== Side.server) return;\n    await this.pollUIs();\n    await this.pollDIs();\n    this.sendPayloadToPointNodesFunc();\n  }\n\n  sendPayloadToPointNodesFunc() {\n    if (this.side !== Side.server) return;\n    for (let pointNode of this.pointNodes) {\n      Edge28Utils.sendPayloadToChild(pointNode, {\n        pointsDI: this.edgeReadDI_Store,\n        pointsUI: this.edgeReadUI_Store,\n      });\n    }\n  }\n\n  subscribe({ action, payload }) {\n    switch (action) {\n      case ADD_POINT:\n        this.pointNodes.push(payload);\n        break;\n      case REMOVE_POINT:\n        this.pointNodes = this.pointNodes.filter(pointNode => pointNode.id !== payload.id);\n        break;\n      default:\n        this.debugWarn(\"Request action doesn't match\");\n    }\n  }\n\n  async onInputUpdated() {\n    if (this.side !== Side.server) return;\n    let enable = this.getInputData(0);\n    if (!enable && this.runState) {\n      clearInterval(this.UI_timeoutFunc);\n      clearInterval(this.DI_timeoutFunc);\n      this.setOutputData(0, false, true); //connected\n      this.runState = false;\n      return;\n    } else if (!enable && !this.runState) {\n      this.setOutputData(0, false, true); //connected\n      this.runState = false;\n      return;\n    } else if (enable) {\n      let interval = this.getInputData(1);\n      interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n      if (this.runState) {\n        if (interval != this.lastInterval) {\n          this.lastInterval = interval;\n          clearInterval(this.UI_timeoutFunc);\n          clearInterval(this.DI_timeoutFunc);\n          this.startInputPolling(interval);\n        }\n        return;\n      } else if (!this.runState) {\n        this.runState = true;\n        this.startInputPolling(interval);\n        return;\n      }\n      await this.pollInputsAndSend();\n    }\n  }\n\n  async onAfterSettingsChange(oldSettings: any) {\n    super.onAfterSettingsChange(oldSettings);\n    if (this.side !== Side.server) return;\n    await this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType(EDGE_28_NETWORK, Edge28ApiNode);\n","import { EDGE_28_INPUT, EDGE_28_NETWORK } from '../../../constants';\nimport { Container } from '../../../container';\nimport { NodeState } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport MathUtils, { MATH_FUNC_TYPE } from '../../../utils/MathUtils';\nimport BACnetEnumsUnits from '../../../utils/points/BACnet-enums-units';\nimport HistoryBase from '../../history/HistoryBase';\nimport Edge10kSensorUtils from './edge-10k-sensor-calc';\nimport { SEND_PAYLOAD_TO_CHILD } from './edge-constant';\nimport EdgeGPIOUtils from './edge-gpio-utils';\nimport Edge28Utils from './edge-utils';\n\nenum POINT_TYPE {\n  DIGITAL = 1,\n  UI_DIGITAL = 2,\n  _0_10DC = 3,\n  _0_20MA = 4,\n  _4_20MA = 5,\n  _10K_THERMISTOR = 6,\n}\n\nenum POINT_TYPE_TEXT {\n  DIGITAL = 'Digital',\n  UI_DIGITAL = `UI-Digital`,\n  _0_10DC = `0-10dc`,\n  _0_20MA = `0-20ma`,\n  _4_20MA = `4-20ma`,\n  _10K_THERMISTOR = `10k-thermistor`,\n}\n\nclass Edge28InputPointNode extends HistoryBase {\n  out: any;\n  constructor() {\n    super();\n    this.title = NODE_INFO['protocols/nube']['edge-28-input'].title;\n    this.description = NODE_INFO['protocols/nube']['edge-28-input'].description;\n    this.addOutput('output', Type.NUMBER);\n    this.addOutput('output-json', Type.STRING);\n    this.addOutput('error', Type.STRING);\n\n    /**\n      Default point Settings (Will be in point class)\n   */\n    this.settings['pointEnable'] = NodeSetting.create({\n      description: 'Point enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['pointDebug'] = NodeSetting.create({\n      description: 'Point Debug',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['pointNumber'] = NodeSetting.create({\n      description: 'Point',\n      value: 'DI1',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'DI1', text: `DI1` },\n          { value: 'DI2', text: `DI2` },\n          { value: 'DI3', text: `DI3` },\n          { value: 'DI4', text: `DI4` },\n          { value: 'DI5', text: `DI5` },\n          { value: 'DI6', text: `DI6` },\n          { value: 'DI7', text: `DI7` },\n          { value: 'UI1', text: `UI1` },\n          { value: 'UI2', text: `UI2` },\n          { value: 'UI3', text: `UI3` },\n          { value: 'UI4', text: `UI4` },\n          { value: 'UI5', text: `UI5` },\n          { value: 'UI6', text: `UI6` },\n          { value: 'UI7', text: `UI7` },\n        ],\n      },\n    });\n    this.settings['pointType'] = NodeSetting.create({\n      description: 'Point Type',\n      value: 1,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: POINT_TYPE.DIGITAL, text: `Digital` },\n          { value: POINT_TYPE.UI_DIGITAL, text: `UI-Digital` },\n          { value: POINT_TYPE._0_10DC, text: `0-10dc` },\n          { value: POINT_TYPE._0_20MA, text: `0-20ma` },\n          { value: POINT_TYPE._4_20MA, text: `4-20ma` },\n          { value: POINT_TYPE._10K_THERMISTOR, text: `10k-thermistor` },\n        ],\n        value: POINT_TYPE.DIGITAL,\n      },\n    });\n\n    this.settings['value_group'] = NodeSetting.create({\n      description: 'Point Settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['lowScale'] = NodeSetting.create({\n      description: 'Low scale',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.settings['highScale'] = NodeSetting.create({\n      description: 'High scale',\n      value: 100,\n      type: SettingType.NUMBER,\n    });\n    this.settings['decimals'] = NodeSetting.create({\n      description: 'Out value precision',\n      value: 2,\n      type: SettingType.NUMBER,\n    });\n    this.settings['offset'] = NodeSetting.create({\n      description: 'Out value offset',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    /**\n        Point Math settings\n     */\n    this.settings['mathFunc'] = NodeSetting.create({\n      description: 'Math on output value (optional)',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: MATH_FUNC_TYPE.NA, text: 'na' },\n          { value: MATH_FUNC_TYPE.ADD, text: 'add' },\n          { value: MATH_FUNC_TYPE.SUBTRACT, text: 'subtract' },\n          { value: MATH_FUNC_TYPE.MULTIPLY, text: 'multiply' },\n          { value: MATH_FUNC_TYPE.DIVIDE, text: 'divide' },\n          { value: MATH_FUNC_TYPE.NUMBER_INVERT, text: 'invert' },\n        ],\n      },\n      value: MATH_FUNC_TYPE.NA,\n    });\n    this.settings['mathValue'] = NodeSetting.create({\n      description: 'Enter a value',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['units_group'] = NodeSetting.create({\n      description: 'Units (Save to get units)',\n      type: SettingType.GROUP,\n    });\n    this.settings['unitsType'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: BACnetEnumsUnits.unitCategory,\n      },\n    });\n    this.settings['units'] = NodeSetting.create({\n      description: 'Units',\n      value: BACnetEnumsUnits.COMMON_METRIC.NO_UNITS,\n      type: SettingType.DROPDOWN,\n    });\n\n    const isDigitalType = [POINT_TYPE.DIGITAL, POINT_TYPE.UI_DIGITAL];\n\n    this.setSettingsConfig({\n      groups: [\n        { pointEnable: {}, pointDebug: {} },\n        { pointNumber: {}, pointType: {} },\n        { decimals: {}, offset: {} },\n        { lowScale: {}, highScale: {} },\n        { mathFunc: {}, mathValue: {} },\n        { unitsType: {}, units: {} },\n      ],\n      conditions: {\n        decimals: setting => {\n          const val = setting['pointType'].value;\n          return !isDigitalType.includes(val);\n        },\n        offset: setting => {\n          const val = setting['pointType'].value;\n          return !isDigitalType.includes(val);\n        },\n        lowScale: setting => {\n          const val = setting['pointType'].value;\n          return !isDigitalType.includes(val);\n        },\n        highScale: setting => {\n          const val = setting['pointType'].value;\n          return !isDigitalType.includes(val);\n        },\n        mathValue: setting => {\n          const val = setting['mathFunc'].value;\n          return ![MATH_FUNC_TYPE.NUMBER_INVERT, MATH_FUNC_TYPE.NA].includes(val);\n        },\n      },\n    });\n    this.addHistorySettingsConfig(0, false);\n  }\n\n  async onAdded() {\n    this.updateTitle();\n    super.onAdded();\n    if (this.side !== Side.server) return;\n    await Utils.sleep(1000); // TODO: Since this node should start after network, import may shows issue if we don't have this\n    Edge28Utils.addPoint(this.getParentNode(), this);\n  }\n\n  async onAfterSettingsChange() {\n    await super.onAfterSettingsChange();\n    if (this.side !== Side.server) return;\n    this.updateTitle();\n    // this.nodeColour();\n    const unitsType = this.settings['unitsType'].value;\n    this.settings['units'].config = {\n      items: BACnetEnumsUnits.unitType(unitsType),\n    };\n    this.sendPointValue(this.out);\n    this.broadcastSettingsToClients();\n\n    setTimeout(() => {\n      this.settings['pointDebug'].value = false;\n      // this.broadcastSettingsToClients(); // TODO is not updating the settings to false.. fuck knows why\n    }, 120 * 1000); // stop debug after 120 sec\n  }\n\n  onRemoved() {\n    super.onRemoved();\n    Edge28Utils.removePoint(this.getParentNode(), this);\n  }\n\n  sendJson() {\n    return {\n      name: this.name,\n      pointValue: this.out,\n      enable: this.settings['pointEnable'].value,\n      units: this.settings['units'].value,\n      pointNumber: this.settings['pointNumber'].value,\n      pointType: this.settings['pointType'].value,\n      pointOffset: this.settings['offset'].value,\n    };\n  }\n\n  nodeColour() {\n    if (this.settings['pointEnable'].value === false) {\n      this.setNodeState(NodeState.INFO);\n    } else this.setNodeState(NodeState.NORMAL);\n  }\n\n  sendPointValue(val) {\n    const debug = this.settings['pointDebug'].value;\n    if (debug) {\n      this.setOutputData(0, val);\n      this.setOutputData(1, this.sendJson());\n    } else {\n      this.setOutputData(0, val);\n      this.setOutputData(1, this.sendJson());\n    }\n  }\n\n  pointOffset(val: any) {\n    let offset = this.settings['offset'].value;\n    if (offset === null) {\n      offset = 0;\n    }\n    return parseFloat(val) + parseFloat(offset);\n  }\n\n  pointTypeText(type) {\n    switch (type) {\n      case POINT_TYPE.DIGITAL:\n        return POINT_TYPE_TEXT.DIGITAL;\n      case POINT_TYPE.UI_DIGITAL:\n        return POINT_TYPE_TEXT.UI_DIGITAL;\n      case POINT_TYPE._0_10DC:\n        return POINT_TYPE_TEXT._0_10DC;\n      case POINT_TYPE._0_20MA:\n        return POINT_TYPE_TEXT._0_20MA;\n      case POINT_TYPE._4_20MA:\n        return POINT_TYPE_TEXT._4_20MA;\n      case POINT_TYPE._10K_THERMISTOR:\n        return POINT_TYPE_TEXT._10K_THERMISTOR;\n\n      default:\n        this.debugWarn('Unknown type of object');\n    }\n  }\n\n  updateTitle() {\n    const pointNumber = this.settings['pointNumber'].value;\n    this.title = `Edge-28-Input: (${pointNumber} as ${this.pointTypeText(this.settings['pointType'].value)})`;\n    this.broadcastTitleToClients();\n  }\n\n  pointCalcs(val: number) {\n    const mathFunc = this.settings['mathFunc'].value;\n    const mathValue = this.settings['mathValue'].value;\n    const decimals = this.settings['decimals'].value;\n    const pointType = this.settings['pointType'].value;\n    const isDigitalType = [POINT_TYPE.DIGITAL, POINT_TYPE.UI_DIGITAL];\n    if (MathUtils.validateNumbers(val, mathValue)) {\n      if (mathFunc !== MATH_FUNC_TYPE.NA) {\n        if (!isDigitalType.includes(pointType)) {\n          this.out = MathUtils.mathSwitch(mathFunc, val, mathValue);\n          this.out = MathUtils.decimals(this.out, decimals);\n          this.out = this.pointOffset(this.out);\n          this.sendPointValue(this.out);\n        } else {\n          this.out = MathUtils.mathSwitch(mathFunc, val, mathValue);\n          this.out = this.pointOffset(this.out);\n          this.sendPointValue(this.out);\n        }\n      } else {\n        if (!isDigitalType.includes(pointType)) {\n          this.out = MathUtils.decimals(val, decimals);\n          this.out = this.pointOffset(this.out);\n        } else {\n          this.out = val;\n        }\n        this.sendPointValue(this.out);\n      }\n    }\n  }\n\n  uiType(type: number, val: number, min_range?: number, max_range?: number) {\n    const lowScale = this.settings['lowScale'].value;\n    const highScale = this.settings['highScale'].value;\n    switch (type) {\n      case POINT_TYPE.DIGITAL:\n        this.pointCalcs(EdgeGPIOUtils.diInvert(val));\n        break;\n      case POINT_TYPE.UI_DIGITAL:\n        this.pointCalcs(EdgeGPIOUtils.uiAsDI(val));\n        break;\n      case POINT_TYPE._0_10DC:\n        const limitValDc = Utils.clamp(val, 0, highScale);\n        this.pointCalcs(EdgeGPIOUtils.scaleFromGPIOValue(limitValDc, lowScale, highScale));\n        break;\n      case POINT_TYPE._0_20MA:\n        const limitValMaZero = Utils.clamp(val, 0, highScale);\n        this.pointCalcs(EdgeGPIOUtils.scaleFromGPIOValue(limitValMaZero, lowScale, highScale));\n        break;\n      case POINT_TYPE._4_20MA:\n        const limitValMaFour = EdgeGPIOUtils.scaleUI420ma(val, min_range, max_range);\n        this.pointCalcs(EdgeGPIOUtils.scale420maToRange(limitValMaFour, lowScale, highScale));\n        break;\n      case POINT_TYPE._10K_THERMISTOR:\n        this.pointCalcs(Edge10kSensorUtils.calc10kThermistor(val));\n        break;\n    }\n  }\n\n  subscribe({ action, payload }) {\n    switch (action) {\n      case SEND_PAYLOAD_TO_CHILD:\n        if (this.settings['pointEnable'].value === false) return;\n        const pointType = this.settings['pointType'].value;\n        const pointNumber = this.settings['pointNumber'].value;\n        let out: number;\n        let min_range: number;\n        let max_range: number;\n        if (pointType === POINT_TYPE.DIGITAL) {\n          if (!['DI1', 'DI2', 'DI3', 'DI4', 'DI5', 'DI6', 'DI7'].includes(pointNumber)) return;\n          try {\n            for (let val of [payload]) {\n              out = val.pointsDI['4_val'][this.settings['pointNumber'].value].val;\n            }\n            this.uiType(pointType, out, payload);\n          } catch (err) {\n            this.debugErr(err);\n          }\n        } else {\n          if (!['UI1', 'UI2', 'UI3', 'UI4', 'UI5', 'UI6', 'UI7'].includes(pointNumber)) return;\n          try {\n            for (let val of [payload]) {\n              out = val.pointsUI['4_val'][this.settings['pointNumber'].value].val;\n              min_range = val.pointsUI['6_min_range'][this.settings['pointNumber'].value];\n              max_range = val.pointsUI['7_max_range'][this.settings['pointNumber'].value];\n            }\n            this.uiType(pointType, out, min_range, max_range);\n          } catch (err) {\n            this.debugErr(err);\n          }\n        }\n        break;\n      default:\n        this.debugWarn(\"Request action doesn't match\");\n    }\n  }\n}\n\nContainer.registerNodeType(EDGE_28_INPUT, Edge28InputPointNode, EDGE_28_NETWORK);\n","export default class Edge10kSensorUtils {\n  /*\n    used for scaling a UO from a float to a 10K temp reading\n    */\n  static calc10kThermistor = (val: number): number => {\n    const raw10K = [\n      0.9556905617,\n      0.9540427367,\n      0.9523006917,\n      0.9504602339,\n      0.9485172744,\n      0.946467535,\n      0.944306865,\n      0.9420290739,\n      0.9396319594,\n      0.9371093311,\n      0.9344568928,\n      0.9316708217,\n      0.9287447039,\n      0.9256742939,\n      0.9224557261,\n      0.91908403,\n      0.9155539628,\n      0.9118616967,\n      0.9080003267,\n      0.9039690867,\n      0.8997620283,\n      0.8953731717,\n      0.8908015628,\n      0.8860418194,\n      0.8810918183,\n      0.8759457717,\n      0.8706035044,\n      0.8650596894,\n      0.8593146611,\n      0.8533643761,\n      0.8472041872,\n      0.8408402328,\n      0.8342674089,\n      0.8274824028,\n      0.8204910228,\n      0.8132897394,\n      0.8058858472,\n      0.7982715539,\n      0.7904548383,\n      0.7824349294,\n      0.7742229339,\n      0.7658146322,\n      0.7572185678,\n      0.7484302572,\n      0.7394743383,\n      0.73033582,\n      0.7210303644,\n      0.7115748456,\n      0.7019597739,\n      0.6922074256,\n      0.6823111222,\n      0.6722912061,\n      0.6621575094,\n      0.6519178717,\n      0.6415775039,\n      0.6311526306,\n      0.6206437806,\n      0.6100630156,\n      0.5994548717,\n      0.588779615,\n      0.5780593139,\n      0.5673369194,\n      0.5565970278,\n      0.5458604304,\n      0.5351246092,\n      0.5244065761,\n      0.513722581,\n      0.5030878249,\n      0.4924882451,\n      0.4819615594,\n      0.4714876446,\n      0.4611024332,\n      0.450811465,\n      0.4405833684,\n      0.4304850415,\n      0.4204801987,\n      0.4106001113,\n      0.4008382911,\n      0.3912252038,\n      0.3817085907,\n      0.3723569356,\n      0.3631557389,\n      0.3540861978,\n      0.3451724444,\n      0.3363907538,\n      0.3277628108,\n      0.3193109318,\n      0.3110054108,\n      0.3028656927,\n      0.2949116408,\n      0.2871070734,\n      0.2794687028,\n      0.272013505,\n      0.264698569,\n      0.2575375869,\n      0.2505444204,\n      0.2437330494,\n      0.2370527064,\n      0.2305799944,\n      0.2242619327,\n      0.2180410733,\n      0.2119941474,\n      0.2061319159,\n      0.2003937116,\n      0.1948594611,\n      0.1893929343,\n      0.1841473882,\n      0.1789825137,\n      0.1739791116,\n      0.1691445094,\n      0.1644078283,\n      0.1597735289,\n      0.1553259162,\n      0.1509105486,\n      0.1466923378,\n      0.1425957094,\n      0.1386248913,\n      0.1347001575,\n      0.1309926256,\n      0.1273378137,\n      0.1237375067,\n      0.1202802759,\n      0.116969961,\n      0.1137221844,\n      0.1105386486,\n      0.107421042,\n      0.1044610471,\n      0.1015715166,\n      0.09875404639,\n      0.09610194494,\n      0.09343384,\n      0.09084241711,\n      0.0884225005,\n      0.08598938206,\n      0.08363729444,\n      0.08136762256,\n      0.07918171356,\n      0.07698514917,\n      0.07497021833,\n      0.07294627961,\n      0.07091327239,\n      0.06906601989,\n      0.06721124833,\n      0.06544711883,\n      0.06367616028,\n      0.061997282,\n      0.06041153422,\n      0.05882030111,\n      0.05722355406,\n      0.05572157039,\n      0.05431530289,\n      0.05290475159,\n      0.05148989689,\n      0.05017223272,\n      0.04895260508,\n      0.04762772774,\n      0.04640141447,\n      0.045274458,\n      0.04414477874,\n      0.04301236682,\n      0.04187721228,\n      0.04084286529,\n      0.03980623591,\n      0.03887131178,\n      0.03793452726,\n      0.03699587678,\n      0.03605535477,\n      0.03511295563,\n      0.03427368709,\n      0.03343292697,\n      0.03269603518,\n      0.03185246761,\n      0.03111311315,\n      0.03037260522,\n      0.02963094111,\n      0.02888811812,\n      0.02825048826,\n      0.02761200327,\n      0.02697266141,\n      0.02633246097,\n      0.02569140021,\n      0.02504947741,\n      0.02451388196,\n      0.02397768566,\n      0.02333345552,\n      0.02279593374,\n      0.02236548142,\n      0.02182687151,\n      0.02128765566,\n      0.02085584601,\n      0.02042364737,\n    ];\n    const temps10K = [\n      -40,\n      -39,\n      -38,\n      -37,\n      -36,\n      -35,\n      -34,\n      -33,\n      -32,\n      -31,\n      -30,\n      -29,\n      -28,\n      -27,\n      -26,\n      -25,\n      -24,\n      -23,\n      -22,\n      -21,\n      -20,\n      -19,\n      -18,\n      -17,\n      -16,\n      -15,\n      -14,\n      -13,\n      -12,\n      -11,\n      -10,\n      -9,\n      -8,\n      -7,\n      -6,\n      -5,\n      -4,\n      -3,\n      -2,\n      -1,\n      0,\n      1,\n      2,\n      3,\n      4,\n      5,\n      6,\n      7,\n      8,\n      9,\n      10,\n      11,\n      12,\n      13,\n      14,\n      15,\n      16,\n      17,\n      18,\n      19,\n      20,\n      21,\n      22,\n      23,\n      24,\n      25,\n      26,\n      27,\n      28,\n      29,\n      30,\n      31,\n      32,\n      33,\n      34,\n      35,\n      36,\n      37,\n      38,\n      39,\n      40,\n      41,\n      42,\n      43,\n      44,\n      45,\n      46,\n      47,\n      48,\n      49,\n      50,\n      51,\n      52,\n      53,\n      54,\n      55,\n      56,\n      57,\n      58,\n      59,\n      60,\n      61,\n      62,\n      63,\n      64,\n      65,\n      66,\n      67,\n      68,\n      69,\n      70,\n      71,\n      72,\n      73,\n      74,\n      75,\n      76,\n      77,\n      78,\n      79,\n      80,\n      81,\n      82,\n      83,\n      84,\n      85,\n      86,\n      87,\n      88,\n      89,\n      90,\n      91,\n      92,\n      93,\n      94,\n      95,\n      96,\n      97,\n      98,\n      99,\n      100,\n      101,\n      102,\n      103,\n      104,\n      105,\n      106,\n      107,\n      108,\n      109,\n      110,\n      111,\n      112,\n      113,\n      114,\n      115,\n      116,\n      117,\n      118,\n      119,\n      120,\n      121,\n      122,\n      123,\n      124,\n      125,\n      126,\n      127,\n      128,\n      129,\n      130,\n      131,\n      132,\n      133,\n      134,\n      135,\n      136,\n      137,\n      138,\n      139,\n      140,\n      141,\n      142,\n      143,\n      144,\n      145,\n      146,\n      147,\n      148,\n      149,\n      150,\n    ];\n    let value = val;\n    for (let i = 0; i < 190; i++) {\n      if (value <= raw10K[i] && value > raw10K[i + 1]) {\n        value = temps10K[i + 1] - (value - raw10K[i + 1]) / (raw10K[i] - raw10K[i + 1]);\n        break;\n      }\n    }\n    return value;\n  };\n}\n","import { isNull } from '../../../../utils/helper';\nimport { EDGE_28_NETWORK, EDGE_28_OUTPUT } from '../../../constants';\nimport { Container } from '../../../container';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport BACnetEnumsUnits from '../../../utils/points/BACnet-enums-units';\nimport HistoryBase from '../../history/HistoryBase';\nimport { edgeApiVer, edgeIp, edgePort } from './edge-constant';\nimport EdgeGPIOUtils from './edge-gpio-utils';\nimport Edge28Utils from './edge-utils';\n\nenum OUTPUT_POINT_TYPE {\n  DO = 1,\n  UO_AS_DIGITAL = 2,\n  UO_AS_0_10DC = 3,\n}\n\nenum OUTPUT_POINT_TYPE_TEXT {\n  DO = 'DO',\n  UO_AS_DIGITAL = 'UO As Digital',\n  UO_AS_0_10DC = 'UO As 0-10dc',\n}\n\nclass Edge28OutputPointNode extends HistoryBase {\n  uuid: Number = null;\n  deviceContainerID: Number = null;\n  topic: string = null;\n  newSetting = false;\n  lastSendTime;\n  lastInput;\n  resendTime = 120000; //resend output every 120 seconds even if it hasn't changed.\n\n  // node inputs\n  inInput: number = 0;\n  inAlarmTrigger: number = 1;\n  inHistoryTrigger: number = 2;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/nube\"][\"edge-28-output\"].title;\n    this.description = NODE_INFO[\"protocols/nube\"][\"edge-28-output\"].description;\n\n    this.addInput('input', Type.ANY);\n    this.addOutput('output', Type.NUMBER);\n    this.addOutput('output-json', Type.JSON);\n    this.properties['pointVal'] = null;\n\n    // Default point Settings (Will be in point class)\n    this.settings['pointEnable'] = NodeSetting.create({\n      description: 'Point enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['pointType'] = NodeSetting.create({\n      description: 'Point Type',\n      value: OUTPUT_POINT_TYPE.DO,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: OUTPUT_POINT_TYPE.DO, text: OUTPUT_POINT_TYPE_TEXT.DO },\n          { value: OUTPUT_POINT_TYPE.UO_AS_DIGITAL, text: OUTPUT_POINT_TYPE_TEXT.UO_AS_DIGITAL },\n          { value: OUTPUT_POINT_TYPE.UO_AS_0_10DC, text: OUTPUT_POINT_TYPE_TEXT.UO_AS_0_10DC },\n        ],\n      },\n    });\n    this.settings['inputType'] = NodeSetting.create({\n      description: 'Input Type',\n      value: true,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Percent (0-100 -> 0-10vdc)' },\n          { value: false, text: 'Voltage (0-10 -> 0-10vdc)' },\n        ],\n      },\n    });\n    this.settings['pointNumber'] = NodeSetting.create({\n      description: 'Point',\n      value: 'UO1',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'UO1', text: `UO1` },\n          { value: 'UO2', text: `UO2` },\n          { value: 'UO3', text: `UO3` },\n          { value: 'UO4', text: `UO4` },\n          { value: 'UO5', text: `UO5` },\n          { value: 'UO6', text: `UO6` },\n          { value: 'UO7', text: `UO7` },\n          { value: 'DO1', text: `DO1` },\n          { value: 'DO2', text: `DO2` },\n          { value: 'DO3', text: `DO3` },\n          { value: 'DO4', text: `DO4` },\n          { value: 'DO5', text: `DO5` },\n          { value: 'R1', text: `R1` },\n          { value: 'R2', text: `R2` },\n        ],\n      },\n    });\n    this.settings['units_group'] = NodeSetting.create({\n      description: 'Units (Save to get units)',\n      type: SettingType.GROUP,\n    });\n    this.settings['unitsType'] = NodeSetting.create({\n      description: 'Units Category',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: BACnetEnumsUnits.unitCategory,\n      },\n    });\n    this.settings['units'] = NodeSetting.create({\n      description: 'Units Type',\n      value: BACnetEnumsUnits.COMMON_METRIC.NO_UNITS,\n      type: SettingType.DROPDOWN,\n    });\n\n    this.setSettingsConfig({\n      groups: [\n        { pointNumber: {}, pointType: {} },\n        { mathFunc: {}, mathValue: {} },\n        { unitsType: {}, units: {} },\n      ],\n      conditions: {\n        mathValue: setting => {\n          const val = setting['mathFunc'].value;\n          return ![10, 0].includes(val);\n        },\n        inputType: setting => {\n          return setting['pointType'].value === OUTPUT_POINT_TYPE.UO_AS_0_10DC;\n        },\n      },\n    });\n\n    this.addHistorySettingsConfig();\n  }\n\n  onAdded() {\n    super.onAdded();\n    this.updateTitle();\n    if (this.side !== Side.server) return;\n    this.EXECUTE_INTERVAL = 60000;\n    this.lastSendTime = new Date().valueOf();\n    this.lastInput = null\n    this.inputChange();\n  }\n\n  async onExecute() {\n    if (this.side !== Side.server) return;\n    if (new Date().valueOf() - this.resendTime > this.lastSendTime) {\n      this.lastInput = null; //to trigger output rewrite\n      await this.onInputUpdated();\n    }\n  }\n\n  pointType(type) {\n    switch (type) {\n      case OUTPUT_POINT_TYPE.DO:\n        return 'do';\n      case OUTPUT_POINT_TYPE.UO_AS_DIGITAL:\n        return 'uo';\n      case OUTPUT_POINT_TYPE.UO_AS_0_10DC:\n        return 'uo';\n      default:\n        this.debugWarn('Unknown type of object');\n    }\n  }\n\n  pointTypeText(type) {\n    switch (type) {\n      case OUTPUT_POINT_TYPE.DO:\n        return OUTPUT_POINT_TYPE_TEXT.DO;\n      case OUTPUT_POINT_TYPE.UO_AS_DIGITAL:\n        return OUTPUT_POINT_TYPE_TEXT.UO_AS_DIGITAL;\n      case OUTPUT_POINT_TYPE.UO_AS_0_10DC:\n        return OUTPUT_POINT_TYPE_TEXT.UO_AS_0_10DC;\n      default:\n        this.debugWarn('Unknown type of object');\n    }\n  }\n\n  async onInputUpdated() {\n    await super.onInputUpdated();\n    this.inputChange();\n  }\n\n  onRemoved() {\n    super.onRemoved();\n  }\n\n  async onAfterSettingsChange() {\n    await super.onAfterSettingsChange();\n    this.updateTitle();\n    const unitsType = this.settings['unitsType'].value;\n    this.settings['units'].config = {\n      items: BACnetEnumsUnits.unitType(unitsType),\n    };\n    this.broadcastSettingsToClients();\n    this.inputChange();\n  }\n\n  inputChange() {\n    if (this.side !== Side.server) return;\n    const inputVal: number = this.getInputData(this.inInput);\n    if (this.lastInput == null || inputVal !== this.lastInput) this.apiCall(inputVal);\n  }\n\n  updateTitle() {\n    const pointNumber = this.settings['pointNumber'].value;\n    if (this.settings['pointType'].value == OUTPUT_POINT_TYPE.UO_AS_0_10DC) {\n      const inputType = this.settings['inputType'].value ? '0-100 -> 0-10vdc' : '0-10 -> 0-10vdc';\n      this.title = `Edge-28-Output: [${pointNumber}] ${this.pointTypeText(this.settings['pointType'].value)} (${inputType})`;\n    }\n    else this.title = `Edge-28-Output: [${pointNumber}] ${this.pointTypeText(this.settings['pointType'].value)}`;\n    this.broadcastTitleToClients();\n  }\n\n  sendJson() {\n    const pointIsUO0to10 = this.settings['pointType'].value == OUTPUT_POINT_TYPE.UO_AS_0_10DC;\n    var inputType = null;\n    if (pointIsUO0to10) inputType = this.settings['inputType'].value ? 'Percent (0-100 -> 0-10vdc)' : 'Voltage (0-10 -> 0-10vdc)';\n\n    return {\n      name: this.name,\n      pointValue: this.properties['pointVal'],\n      enable: this.settings['pointEnable'].value,\n      units: this.settings['units'].value,\n      pointNumber: this.settings['pointNumber'].value,\n      pointType: this.settings['pointType'].value,\n      inputType: inputType,\n    };\n  }\n\n  apiCall(inputVal: number) {\n    this.lastInput = inputVal;\n    if (this.side !== Side.server) return;\n    if (this.settings['pointEnable'].value === false) return;\n    const pointNumber = this.settings['pointNumber'].value;\n    let outVal: number = null;\n    const nodeVal = inputVal;\n    if (inputVal === undefined || inputVal === null) return;\n\n    if (this.settings['pointType'].value === OUTPUT_POINT_TYPE.DO) {\n      // if type = DO 0 is off 1 is on\n      if (typeof inputVal === 'boolean') {\n        outVal = inputVal ? 1 : 0;\n      } else if (typeof inputVal === 'string') {\n        if (inputVal === '1' || inputVal === 'true') {\n          outVal = 1;\n        } else if (inputVal === '0' || inputVal === 'false') {\n          outVal = 0;\n        }\n      } else if (typeof inputVal === 'number') {\n        if (inputVal >= 1) {\n          outVal = 1;\n        } else if (inputVal < 1) outVal = 0; // drive to 0vdc\n      } else this.debugInfo(`ERROR: input value must be a int 1 or 0 or a bool`);\n    } else if (this.settings['pointType'].value === OUTPUT_POINT_TYPE.UO_AS_DIGITAL) {\n      // UO as a DO\n      // if type = DO\n      if (typeof inputVal === 'boolean') {\n        if (inputVal) {\n          outVal = 0;\n        } else outVal = 100;\n      } else if (typeof inputVal === 'string') {\n        if (inputVal === '1' || inputVal === 'true') {\n          outVal = 0;\n        } else if (inputVal === '0' || inputVal === 'false') {\n          outVal = 100;\n        }\n      } else if (typeof inputVal === 'number') {\n        if (inputVal >= 1) {\n          outVal = 0; // drive to 12vdc\n        } else if (inputVal < 1) outVal = 100; // drive to 0vdc\n      } else this.debugInfo(`ERROR: input value must be a int 1 or 0 or a bool`);\n    } else if (this.settings['pointType'].value === OUTPUT_POINT_TYPE.UO_AS_0_10DC) {\n      // if type = UO\n      if (typeof inputVal === 'number') {\n        if (!this.settings['inputType'].value) inputVal = inputVal * 10; //scale from 0-10 to 0-100\n        if (inputVal >= 100) outVal = EdgeGPIOUtils.scaleToGPIOValue(100, 0, 100);\n        // this is to cap writing a value > 12vdc\n        else {\n          inputVal = inputVal * 0.9839; // * 0.9839 this is to software cal the UOs\n          outVal = EdgeGPIOUtils.scaleToGPIOValue(inputVal, 0, 100);\n        }\n      } else if (typeof inputVal === 'string') {\n        this.debugInfo(`ERROR: input value must be a float`);\n      }\n    }\n\n    if (isNull(outVal)) return;\n    const pointType = this.pointType(this.settings['pointType'].value);\n    Edge28Utils.writePointValue(edgeIp, edgePort, edgeApiVer, pointType, pointNumber, outVal, 16)\n      .then(e => {\n        this.properties['pointVal'] = nodeVal;\n        this.setOutputData(0, nodeVal);\n        this.setOutputData(1, this.sendJson()); // json\n        this.lastSendTime = new Date().valueOf();\n      })\n      .catch(err => {\n        this.debugInfo(`ERROR: getting edge point type: ${pointType} ${err}`);\n      });\n  }\n}\n\nContainer.registerNodeType(EDGE_28_OUTPUT, Edge28OutputPointNode, EDGE_28_NETWORK);\n","import axios from 'axios';\nimport { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport TimeUtils from '../../../utils/time-utils';\nimport { edgeApiVer, edgeIp, edgePort } from './edge-constant';\nimport Edge28Utils from './edge-utils';\n\nexport class Edge28LORAResetNode extends Node {\n  lastSendTime;\n  lastTrigger;\n  timeoutFunc;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/nube\"][\"edge-28-lora-reset\"].title;\n    this.description = NODE_INFO[\"protocols/nube\"][\"edge-28-lora-reset\"].description;\n    this.addInputWithSettings('enableInterval', Type.BOOLEAN, false, 'Enable Interval Reset');\n    this.addInputWithSettings('interval', Type.NUMBER, 15, 'Interval');\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('lastReset');\n\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'minutes',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n  }\n\n  async writePointValue(\n    host: string,\n    port: number,\n    apiVer: string,\n    pointType: string,\n    pointId: string,\n    val: number,\n    priority: number,\n  ): Promise<any> {\n    const url = `${Utils.buildUrl(host, port)}/api/${apiVer}/write/${pointType}/${pointId}/${val}/${priority}`;\n    //console.log(url);\n    const pointValue = await axios.get(url);\n    //console.log('writePointValue()', pointValue)\n    return pointValue.data;\n  }\n\n  onAdded() {\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n    if (this.side !== Side.server) return;\n    let interval = this.getInputData(1);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    this.EXECUTE_INTERVAL = interval;\n    try {\n      Edge28Utils.addPoint(this.getParentNode(), this);\n    } catch (error) {}\n  }\n\n  onExecute() {\n    if (this.side !== Side.server) return;\n    if (!this.getInputData(0)) return;\n    this.resetLORAConnect();\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return;\n    let interval = this.getInputData(1);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    this.EXECUTE_INTERVAL = interval;\n    let trigger = this.getInputData(2);\n    //if (trigger && this.inputs[2].updated) {\n    if (trigger && !this.lastTrigger) this.resetLORAConnect();\n    this.lastTrigger = trigger;\n  }\n\n  resetLORAConnect() {\n    if (this.side !== Side.server) return;\n    const pointType = 'do';\n    const pointNumber = 'lc';\n    this.writePointValue(edgeIp, edgePort, edgeApiVer, pointType, pointNumber, 0, 16)\n      .then(e => {\n        this.setOutputData(0, new Date().valueOf(), true);\n        this.timeoutFunc = setTimeout(() => {\n          this.writePointValue(edgeIp, edgePort, edgeApiVer, pointType, pointNumber, 1, 16);\n        }, 2000);\n      })\n      .catch(err => this.debugInfo(`ERROR: LoRa Edge-28 Reset - ${err}`));\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n    if (this.side !== Side.server) return;\n    this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType('protocols/nube/edge-28-lora-reset', Edge28LORAResetNode);\n","import * as Bacnet from 'node-bacnet';\nimport { BACNET_NETWORK } from '../../../constants';\nimport { Container } from '../../../container';\nimport { ContainerNode } from '../../../container-node';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport { ADD_DEVICE, GET_BACNET_CLIENT, GET_NETWORK_NODE, REMOVE_DEVICE } from './bacnet-constant';\nimport BacnetUtils from './bacnet-utils';\n\nexport class BACnetNetwork extends ContainerNode {\n  bacnetClient: Bacnet = null;\n  deviceNodes: Array<Node> = [];\n\n  // node input\n  inNetworkEnable: number = 0;\n  inDiscover: number = 1;\n\n  // node outputs\n  outMsg: number = 0;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO['protocols/bacnet']['bacnet-network'].title;\n    this.description = NODE_INFO['protocols/bacnet']['bacnet-network'].description;\n\n    this.addInputWithSettings('enable', Type.BOOLEAN, false, 'Network Enable', false);\n    this.addInput('discover', Type.BOOLEAN);\n    this.addOutput('msg', Type.STRING);\n    this.settings['interface'] = NodeSetting.create({\n      description: 'interface',\n      value: '0.0.0.0',\n      type: SettingType.STRING,\n    });\n    this.settings['port'] = NodeSetting.create({\n      description: 'port',\n      value: 47808,\n      type: SettingType.NUMBER,\n    });\n    this.settings['broadcastAddress'] = NodeSetting.create({\n      description: 'broadcastAddress',\n      value: '255.255.255.255',\n      type: SettingType.STRING,\n    });\n    this.settings['apduTimeout'] = NodeSetting.create({\n      description: 'BACnet apduTimeout',\n      value: 6000,\n      type: SettingType.NUMBER,\n    });\n    this.settings['networkNumber'] = NodeSetting.create({\n      description: 'BACnet network Number (Set to -1 to disable)',\n      value: -1,\n      type: SettingType.NUMBER,\n    });\n    this.settings['networkNumberWhoIs'] = NodeSetting.create({\n      description: 'BACnet Network Number for Discover',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'This network number' },\n          { value: 1, text: 'Global (0xFFFF)' },\n          { value: 2, text: 'Blank' },\n        ],\n      },\n      value: 0,\n    });\n    this.settings['devicePolling'] = NodeSetting.create({\n      description: 'Polling time setting in ms',\n      value: 2000, // TODO add validation range later\n      type: SettingType.NUMBER,\n    });\n  }\n\n  onAdded() {\n    super.onAdded();\n    // this.name = `BACnet Network:  cid_${this.container.id.toString()}_sid_${this.sub_container.id.toString()}_id${this.id.toString()}`; //set default node name\n    this.initializeBacnetClient();\n  }\n\n  onAfterSettingsChange(oldSettings: any) {\n    super.onAfterSettingsChange(oldSettings);\n    if (this.side !== Side.server) return;\n    this.initializeBacnetClient();\n  }\n\n  onInputUpdated() {\n    if (this.inputs[this.inDiscover].updated) {\n      this.iAm();\n      this.whoIs();\n    }\n    if (this.inputs[this.inNetworkEnable].updated) {\n      this.initializeBacnetClient();\n    }\n  }\n\n  whoIs() {\n    if (this.side !== Side.server) return;\n    const iface = this.settings['interface'].value;\n    const networkNumber = this.settings['networkNumber'].value;\n    const networkNumberWhoIs = this.settings['networkNumberWhoIs'].value;\n    if (this.bacnetClient) {\n      if (networkNumberWhoIs === 0) {\n        this.bacnetClient.whoIs({ net: networkNumber, interface: iface });\n        this.setOutputData(this.outMsg, `INFO: Send a WhoIs on net: ${networkNumber} interface: ${iface}`);\n      } else if (networkNumberWhoIs === 1) {\n        this.bacnetClient.whoIs({ net: 0xffff, interface: iface });\n        this.setOutputData(this.outMsg, `INFO: Send a WhoIs on net: ${0xffff} interface: ${iface}`);\n      } else if (networkNumberWhoIs === 2) {\n        this.bacnetClient.whoIs({ interface: iface });\n        this.setOutputData(this.outMsg, `INFO: Send a WhoIs on net: BLANK interface: ${iface}`);\n      }\n    } else this.setOutputData(this.outMsg, `ERROR: Failed to send whoIs`);\n  }\n\n  iAm() {\n    if (this.side !== Side.server) return;\n    this.setOutputData(this.outMsg, `INFO: On iAm replay`);\n    this.bacnetClient.on('iAm', device => {\n      this.setOutputData(this.outMsg, `INFO: On iAm replay from device: ${device.payload.deviceId}`);\n    });\n  }\n\n  subscribe({ action, payload }) {\n    switch (action) {\n      case ADD_DEVICE:\n        this.deviceNodes.push(payload);\n        break;\n      case REMOVE_DEVICE:\n        this.deviceNodes = this.deviceNodes.filter(pointNode => pointNode.id !== payload.id);\n        break;\n      case GET_BACNET_CLIENT:\n        return this.bacnetClient;\n      case GET_NETWORK_NODE:\n        return this;\n      default:\n        this.debugWarn(\"Request action doesn't match\");\n    }\n  }\n\n  onRemoved() {\n    super.onRemoved();\n    this.closeBacnetClient();\n  }\n\n  private closeBacnetClient() {\n    if (this.bacnetClient) {\n      this.setOutputData(this.outMsg, `INFO: Closing BACnet client...`);\n      this.bacnetClient.close();\n    }\n  }\n\n  initializeBacnetClient() {\n    if (this.side !== Side.server) return; // only execute on server\n    this.closeBacnetClient();\n    this.setOutputData(this.outMsg, `INFO: Initializing BACnet...`);\n    this.bacnetClient = new Bacnet({\n      apduTimeout: this.settings['apduTimeout'].value,\n      interface: this.settings['interface'].value,\n      port: this.settings['port'].value,\n      broadcastAddress: this.settings['broadcastAddress'].value,\n    });\n    if (this.bacnetClient) {\n      this.setOutputData(this.outMsg, `INFO: Started BACnet Stack :)`);\n    } else this.setOutputData(this.outMsg, `ERROR: Failed to started BACnet Stack :(`);\n\n    for (let deviceNode of this.deviceNodes) {\n      BacnetUtils.sendPayloadToChild(deviceNode, {\n        bacnetClient: this.bacnetClient,\n        networkNode: this,\n      });\n    }\n  }\n}\nContainer.registerNodeType(BACNET_NETWORK, BACnetNetwork);\n","import * as Bacnet from 'node-bacnet';\nimport { BACNET_DEVICE, BACNET_NETWORK } from '../../../constants';\nimport { Container } from '../../../container';\nimport { ContainerNode } from '../../../container-node';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport {\n  ADD_POINT,\n  GET_NETWORK_NODE,\n  GET_POINTS,\n  GET_PRESENT_VALUE,\n  REMOVE_POINT,\n  SEND_PAYLOAD_TO_CHILD,\n  WRITE_PRESENT_VALUE,\n} from './bacnet-constant';\nimport { BACnetNetwork } from './bacnet-network';\nimport BacnetUtils, { singleton as actor } from './bacnet-utils';\nimport { DeviceObject } from './interface';\n\nenum Poll {\n  STOP = 0,\n  START = 1,\n}\n\nclass BACnetDevice extends ContainerNode {\n  bacnetClient: Bacnet = null;\n  networkNode: BACnetNetwork = null;\n  points: Array<DeviceObject> = [];\n  pointNodes: Array<Node> = [];\n  isFirst: boolean = true;\n  isPolling: boolean = false;\n  shouldPoll: boolean = true;\n  delayBetweenDevice: number = 100;\n  delayBetweenPoint: number = 30;\n  outputMsg: 1;\n  networkNumber: number = null;\n  constructor() {\n    super();\n    this.title = NODE_INFO['protocols/bacnet']['bacnet-device'].title;\n    this.description = NODE_INFO['protocols/bacnet']['bacnet-device'].description;\n    this.addInput('get-point-list', Type.BOOLEAN);\n    this.addOutput('out', Type.STRING);\n    this.addOutput('out msg', Type.STRING);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('points-discovered', Type.STRING);\n    this.addOutput('points-to-poll', Type.STRING);\n    this.properties['pointsList'] = null;\n    this.settings['deviceEnable'] = NodeSetting.create({\n      description: 'Device enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    // device\n    this.settings['ip'] = NodeSetting.create({ description: 'ip', value: '192.168.13.13', type: SettingType.STRING });\n    this.settings['deviceId'] = NodeSetting.create({ description: 'deviceId', value: 2508, type: SettingType.NUMBER });\n    this.settings['port'] = NodeSetting.create({ description: 'port', value: 47808, type: SettingType.NUMBER });\n\n    // device mac address if under a IP to MS/TP router\n    this.settings['deviceTypeMstp'] = NodeSetting.create({\n      description: 'BACnet MS/TP device',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    // device mac address if under a IP to MS/TP router\n    this.settings['macAddress'] = NodeSetting.create({\n      description: 'BACnet Mac address',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['networkNumber'] = NodeSetting.create({\n      description: 'BACnet network number ',\n      // value: null,\n      type: SettingType.READONLY,\n    });\n  }\n\n  async onAdded() {\n    super.onAdded();\n    // this.name = `BACnet Device: cid_${this.container.id.toString()}_sid_${this.sub_container.id.toString()}_id${this.id.toString()}`; //set default node name\n    await Utils.sleep(1000); // TODO: Since device should start after network, import may shows issue if we don't have this\n    this.setBacnetClient();\n    this.setPayloadsToPointNodes();\n    if (this.side !== Side.server) return;\n    BacnetUtils.addDevice(this.getParentNode(), this);\n    this.updateNetworkSettings();\n    await this.requestPoll();\n  }\n\n  onAfterSettingsChange(oldSettings: any) {\n    super.onAfterSettingsChange(oldSettings);\n    this.setPayloadsToPointNodes();\n    this.requestPoll().then(); // don't await, it will unable to set setting value\n  }\n\n  onRemoved() {\n    super.onRemoved();\n    this.shouldPoll = false;\n    BacnetUtils.removeDevice(this.getParentNode(), this);\n  }\n\n  updateNetworkSettings() {\n    if (this.side !== Side.server) return;\n    this.networkNode = BacnetUtils.getNetworkNode(this.getParentNode());\n    this.networkNumber = this.networkNode.settings['networkNumber'].value;\n    this.settings['networkNumber'].value = this.networkNumber;\n    this.broadcastSettingsToClients();\n    this.persistSettings();\n  }\n\n  onInputUpdated() {\n    let pntList = [];\n    for (let pointNode of this.pointNodes) {\n      const settings = pointNode.settings;\n      const id = pointNode.id;\n      const cid = pointNode.id;\n      const name = pointNode.name;\n      let a = {\n        id: id,\n        cid: cid,\n        name: name,\n        settings: settings,\n      };\n      pntList.push(a);\n    }\n    this.setOutputData(4, JSON.stringify(pntList));\n    this.setOutputData(3, JSON.stringify(this.points));\n  }\n\n  async requestPoll() {\n    if (this.currentPollValue() === Poll.START && !this.isPolling) {\n      this.isPolling = true;\n      await this.polling();\n    }\n  }\n\n  // check if network and device are enabled\n  currentPollValue(): Poll {\n    return this.settings['deviceEnable'].value && this.networkNode.getInputData(this.networkNode.inNetworkEnable)\n      ? Poll.START\n      : Poll.STOP;\n  }\n  // send points list to point node\n  setPayloadsToPointNodes() {\n    if (this.side !== Side.server) return; // only execute on server\n    this.setOutputData(this.outputMsg, `INFO: Scan devices`);\n    actor\n      .process<Array<DeviceObject>>(() => this.scanDeviceFunc())\n      .then(points => {\n        this.points = points;\n        this.sendPayloadToPointNodesFunc();\n      });\n    actor.process(async () => await Utils.sleep(this.delayBetweenDevice)).then();\n  }\n\n  // send points list to point node\n  sendPayloadToPointNodesFunc() {\n    for (let pointNode of this.pointNodes) {\n      BacnetUtils.sendPayloadToChild(pointNode, {\n        points: this.points,\n        networkNode: this.networkNode,\n      });\n    }\n  }\n\n  // get bacnet client from network node\n  setBacnetClient() {\n    if (this.side !== Side.server) return;\n    this.bacnetClient = BacnetUtils.getBacnetClient(this.getParentNode());\n  }\n\n  // bacnet lib point write function\n  writePresentValue(deviceAddress, type, instance, value, priority, tag) {\n    if (!this.bacnetClient) return;\n    if (this.settings['deviceTypeMstp'].value) {\n      this.bacnetClient.writeProperty(\n        {\n          address: deviceAddress,\n          net: this.networkNumber,\n          adr: [this.settings['macAddress'].value],\n        },\n        { type: type, instance: instance },\n        85,\n        [{ type: tag, value: value }],\n        { priority: priority },\n        (err, value) => {\n          console.log(err, value);\n        },\n      );\n    } else {\n      this.bacnetClient.writeProperty(\n        deviceAddress,\n        { type: type, instance: instance },\n        85,\n        [{ type: tag, value: value }],\n        { priority: priority },\n        (err, value) => {},\n      );\n    }\n  }\n  // bacnet lib get points list function\n  readObjectList(deviceAddress, deviceId, callback) {\n    // Read Device Object\n    const requestArray = [\n      {\n        objectId: { type: Bacnet.enum.ObjectType.DEVICE, instance: deviceId },\n        properties: [{ id: Bacnet.enum.PropertyIdentifier.OBJECT_LIST }],\n      },\n    ];\n    if (!this.bacnetClient) return;\n    if (this.settings['deviceTypeMstp'].value) {\n      this.bacnetClient.readPropertyMultiple(\n        {\n          address: deviceAddress,\n          net: this.networkNumber,\n          adr: [this.settings['macAddress'].value],\n        },\n        requestArray,\n        requestArray,\n        callback,\n      );\n    } else this.bacnetClient.readPropertyMultiple(deviceAddress, requestArray, callback);\n  }\n\n  readObjectFull(deviceAddress, type): Promise<any> {\n    return this.readObject(deviceAddress, type, [\n      { id: Bacnet.enum.PropertyIdentifier.OBJECT_IDENTIFIER },\n      { id: Bacnet.enum.PropertyIdentifier.OBJECT_NAME },\n      { id: Bacnet.enum.PropertyIdentifier.OBJECT_TYPE },\n      { id: Bacnet.enum.PropertyIdentifier.DESCRIPTION },\n      { id: Bacnet.enum.PropertyIdentifier.UNITS },\n      { id: Bacnet.enum.PropertyIdentifier.PRESENT_VALUE },\n      // { id: Bacnet.enum.PropertyIdentifier.PRIORITY_ARRAY },\n      // { id: Bacnet.enum.PropertyIdentifier.PRIORITY_FOR_WRITING },\n    ]);\n  }\n  // bacnet lib point read function\n  readObject(deviceAddress, obj, properties): Promise<any> {\n    return new Promise(resolve => {\n      const requestArray = [\n        {\n          objectId: { type: obj.type, instance: obj.instance },\n          properties: properties,\n        },\n      ];\n      if (!this.bacnetClient) return;\n      if (this.settings['deviceTypeMstp'].value) {\n        this.bacnetClient.readPropertyMultiple(\n          {\n            address: deviceAddress,\n            net: this.networkNumber,\n            adr: [this.settings['macAddress'].value],\n          },\n          requestArray,\n          (error, value) => {\n            resolve({\n              error: error,\n              value: value,\n            });\n          },\n        );\n      } else {\n        this.bacnetClient.readPropertyMultiple(deviceAddress, requestArray, (error, value) => {\n          resolve({\n            error: error,\n            value: value,\n          });\n        });\n      }\n    });\n  }\n\n  // bacnet lib point read function\n  readProperty(deviceAddress, obj): Promise<any> {\n    return new Promise(resolve => {\n      if (this.settings['deviceTypeMstp'].value) {\n        this.bacnetClient.readProperty(\n          { address: deviceAddress, net: this.networkNumber, adr: [this.settings['macAddress'].value] },\n          { type: obj.type, instance: obj.instance },\n          Bacnet.enum.PropertyIdentifier.PRESENT_VALUE,\n          (error, value) => {\n            resolve({\n              error: error,\n              value: value,\n            });\n          },\n        );\n      } else {\n        this.bacnetClient.readProperty(\n          deviceAddress,\n          { type: obj.type, instance: obj.instance },\n          Bacnet.enum.PropertyIdentifier.PRESENT_VALUE,\n          (error, value) => {\n            resolve({\n              error: error,\n              value: value,\n            });\n          },\n        );\n      }\n    });\n  }\n\n  readPresentValue(obj): any {\n    return this.readProperty(this.settings['ip'].value, obj);\n  }\n\n  findValueById(properties, id) {\n    const property = properties.find(function(element) {\n      return element.id === id;\n    });\n    if (property && property.value && property.value.length > 0) {\n      if (property.value[0].value.errorClass) {\n        return null;\n      }\n      return property.value[0].value;\n    } else {\n      return null;\n    }\n  }\n\n  mapToDeviceObject(object): DeviceObject {\n    if (!object || !object.values) {\n      return null;\n    }\n    const objectInfo = object.values[0].objectId.instance;\n    const objectProperties = object.values[0].values;\n    const name = this.findValueById(objectProperties, Bacnet.enum.PropertyIdentifier.OBJECT_NAME);\n    const description = this.findValueById(objectProperties, Bacnet.enum.PropertyIdentifier.DESCRIPTION);\n    const type = this.findValueById(objectProperties, Bacnet.enum.PropertyIdentifier.OBJECT_TYPE);\n    const units = this.findValueById(objectProperties, Bacnet.enum.PropertyIdentifier.UNITS);\n    const presentValue = this.findValueById(objectProperties, Bacnet.enum.PropertyIdentifier.PRESENT_VALUE);\n\n    return { objectInfo, name, description, type, units, presentValue };\n  }\n\n  async scanDeviceFunc(): Promise<Array<DeviceObject>> {\n    const device = {\n      deviceId: this.settings['deviceId'].value,\n      address: this.settings['ip'].value,\n    };\n    this.setOutputData(1, `INFO: Scan device ID: ${JSON.stringify(device)}`);\n    this.setOutputData(2, ``);\n    return new Promise((resolve, reject) => {\n      this.readObjectList(device.address, device.deviceId, async (err, result) => {\n        if (!err) {\n          const objectArray = result.values[0].values[0].value;\n\n          this.setOutputData(1, `INFO: Scan device ID: ${JSON.stringify(device)}`);\n          this.setOutputData(2, ``);\n          const outputs = [];\n          for (const object of objectArray) {\n            try {\n              const output = await this.readObjectFull(device.address, {\n                type: object.value.type,\n                instance: object.value.instance,\n              });\n              outputs.push(output);\n            } catch (error) {\n              this.setOutputData(1, ``);\n              this.setOutputData(2, `ERROR: while fetching objects: ${JSON.stringify(error)}`);\n              reject(error);\n            }\n            await Utils.sleep(this.delayBetweenDevice);\n          }\n          const successfulResults = outputs.filter(element => !element.error);\n          const deviceObjects = successfulResults.map(element => {\n            return this.mapToDeviceObject(element.value);\n          });\n          this.debugInfo(`BACNET-NETWORK-POINT-NODE: msg from device ${JSON.stringify(deviceObjects)}`);\n          this.setOutputData(1, `INFO: Scan device ID: ${JSON.stringify(deviceObjects)}`);\n          resolve(deviceObjects);\n        } else {\n          this.setOutputData(1, ``);\n          this.setOutputData(2, `ERROR: while fetching objects: ${JSON.stringify(err)}`);\n          reject(err);\n        }\n      });\n    });\n  }\n\n  subscribe({ action, payload }) {\n    switch (action) {\n      case ADD_POINT:\n        this.pointNodes.push(payload);\n        break;\n      case REMOVE_POINT:\n        this.pointNodes = this.pointNodes.filter(pointNode => pointNode.id !== payload.id);\n        break;\n      case GET_NETWORK_NODE:\n        return BacnetUtils.getNetworkNode(this.getParentNode());\n      case GET_POINTS:\n        return this.points;\n      case GET_PRESENT_VALUE:\n        return this.readPresentValue(payload);\n      case SEND_PAYLOAD_TO_CHILD:\n        this.bacnetClient = payload.bacnetClient;\n        this.networkNode = payload.networkNode;\n        this.updateNetworkSettings();\n        if (!this.isFirst) {\n          // We can check settings with older settings if we want\n          this.setPayloadsToPointNodes();\n        }\n        this.isFirst = false;\n        this.requestPoll().then();\n        break;\n      case WRITE_PRESENT_VALUE:\n        this.writePresentValue(this.settings['ip'].value, payload[0], payload[1], payload[2], payload[3], payload[4]);\n\n        break;\n      default:\n        this.debugWarn(\"Request action doesn't match\");\n    }\n  }\n\n  persistSettings() {\n    if (!this.container.db) return;\n    this.container.db.updateNode(this.id, this.container.id, {\n      $set: {\n        settings: this.settings,\n        properties: this.properties,\n      },\n    });\n  }\n\n  async polling() {\n    if (this.currentPollValue() !== Poll.START || !this.shouldPoll) {\n      this.isPolling = false;\n      return;\n    }\n    await actor.process<any>(() => this.pollingFuncOrTimeout());\n    await actor.process<any>(async () => await Utils.sleep(this.delayBetweenDevice));\n    await Utils.sleep(this.networkNode.settings['devicePolling'].value);\n    await this.polling();\n  }\n\n  /**\n   * If any reason await function got to wait indefinitely long then timeout such function\n   */\n  pollingFuncOrTimeout(): Promise<any> {\n    const that = this;\n    return Promise.race([\n      this.pollingFunc(),\n      new Promise((_, reject) =>\n        setTimeout(() => reject(new Error('timeout')), this.networkNode.settings['devicePolling'].value),\n      ),\n    ]).catch(function(err) {\n      that.debugErr(`Error: ${err}`);\n    });\n  }\n\n  async pollingFunc() {\n    for (let pointNode of this.pointNodes) {\n      let selectPoint = pointNode.settings['pointsList'].value;\n      const manualPoint = pointNode.settings['manualPoint'].value;\n      const objectType = pointNode.settings['objectType'].value;\n      const objectInstance = pointNode.settings['objectInstance'].value;\n      if (manualPoint) {\n        selectPoint = { type: objectType, instance: objectInstance };\n      }\n      if (selectPoint) {\n        const value = await this.readPresentValue(selectPoint);\n        this.debugInfo(`BACNET-NETWORK-DEVICE-NODE: msg from readPresentValue ${JSON.stringify(value)}`);\n        BacnetUtils.sendPointValue(pointNode, value);\n        await Utils.sleep(this.delayBetweenPoint);\n      }\n    }\n  }\n}\nContainer.registerNodeType(BACNET_DEVICE, BACnetDevice, BACNET_NETWORK);\n","import { isNull } from '../../../../utils/helper';\nimport { BACNET_DEVICE, BACNET_POINT } from '../../../constants';\nimport { Container } from '../../../container';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport HistoryBase from '../../history/HistoryBase';\nimport { SEND_PAYLOAD_TO_CHILD, SEND_POINT_VALUE } from './bacnet-constant';\nimport { BACnetNetwork } from './bacnet-network';\nimport BacnetUtils from './bacnet-utils';\nimport { DeviceObject } from './interface';\n\nclass BACnetPoint extends HistoryBase {\n  networkNumber: number;\n  points: Array<DeviceObject> = [];\n  // poll count\n  pollCount = 0;\n  pollCountFail = 0;\n\n  // node input nums\n  inputInNum = 0;\n\n  // node output nums\n  outputOutNum = 0;\n  jsonOutNum = 1;\n  errorOutNum = 2;\n  logsOutNum = 3;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO['protocols/bacnet']['bacnet-point'].title;\n    this.description = NODE_INFO['protocols/bacnet']['bacnet-point'].description;\n    this.addInput('input', Type.ANY);\n    this.addOutput('output', Type.STRING);\n    this.addOutput('output json', Type.STRING);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('logs', Type.STRING);\n    this.settings['pointEnable'] = NodeSetting.create({\n      description: 'Point enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['pointWriteEnable'] = NodeSetting.create({\n      description: 'Point write enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['manualPoint'] = NodeSetting.create({\n      description: 'Add point manually',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.settings['pointsList'] = NodeSetting.create({\n      description: 'Select a point',\n      value: null,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [],\n      },\n    });\n    this.settings['objectType'] = NodeSetting.create({\n      description: 'Output type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'analog-input' },\n          { value: 1, text: 'analog-output' },\n          { value: 2, text: 'analog-value' },\n          { value: 3, text: 'binary-input' },\n          { value: 4, text: 'binary-output' },\n          { value: 5, text: 'binary-value' },\n          { value: 13, text: 'multi-state-input' },\n          { value: 14, text: 'multi-state-output' },\n          { value: 19, text: 'multi-state-value' },\n        ],\n      },\n      value: 0,\n    });\n    // The data-type of the value to be written.\n    this.settings['objectTag'] = NodeSetting.create({ //The data-type of the value to be written.\n      description: 'Data type value to be written',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'NULL(0)' },\n          { value: 1, text: 'BOOLEAN(1)' },\n          { value: 2, text: 'UNSIGNED_INTEGER(2)' },\n          { value: 3, text: 'SIGNED_INTEGER(3)' },\n          { value: 4, text: 'REAL(4)' },\n          { value: 5, text: 'DOUBLE(5)' },\n          { value: 6, text: 'OCTET_STRING(6)' },\n          { value: 7, text: 'CHARACTER_STRING(7)' },\n          { value: 8, text: 'BIT_STRING(8)' },\n          { value: 9, text: 'ENUMERATED(9)' },\n          { value: 10, text: 'DATE(10)' },\n          { value: 11, text: 'TIME(11)' },\n          { value: 12, text: 'OBJECTIDENTIFIER(12)' },\n        ],\n      },\n      value: 1,\n    });\n\n    this.settings['objectInstance'] = NodeSetting.create({\n      description: 'Point ID',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['priority'] = NodeSetting.create({\n      description: 'Priority Number',\n      value: 16,\n      type: SettingType.NUMBER,\n    });\n    this.settings['logs'] = NodeSetting.create({\n      description: 'Return full bacnet payload',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.setSettingsConfig({\n      conditions: {\n        pointsList: setting => {\n          return !setting['manualPoint'].value;\n        },\n        objectType: setting => {\n          return setting['manualPoint'].value;\n        },\n      },\n    });\n    this.addHistorySettingsConfig(0, false);\n  }\n\n  async onAdded() {\n    super.onAdded();\n    // this.name = `BACnet Point: cid_${this.container.id.toString()}_id${this.id.toString()}`; //set default node name\n    if (this.side !== Side.server) return; // only execute on server\n    await Utils.sleep(2000); // TODO: Since device should start after network > device, import may shows issue if we don't have this\n    this.points = BacnetUtils.getPoints(this.getParentNode());\n    this.setPointsListItems();\n    this.getPresentValue();\n    BacnetUtils.addPoint(this.getParentNode(), this);\n  }\n\n  async onInputUpdated() {\n    // this.setOutputData(0, 1);\n    await super.onInputUpdated();\n    if (this.side !== Side.server) return; // only execute on server\n    let objectType: number;\n    let objectInstance: number;\n    const value = this.getInputData(0);\n    const priority = this.settings['priority'].value;\n    const manualPoint = this.settings['manualPoint'].value;\n    const selectPoint = this.settings['pointsList'].value;\n    const objectTag = this.settings['objectTag'].value;\n    let pointWriteEnable = this.settings['pointWriteEnable'].value;\n    if (manualPoint) {\n      objectType = this.settings['objectType'].value;\n      objectInstance = this.settings['objectInstance'].value;\n    }\n    if (selectPoint) {\n      objectType = selectPoint.type;\n      objectInstance = selectPoint.instance;\n    }\n    if (isNull(value)) return;\n    if (pointWriteEnable === false) return;\n    // write point value\n    BacnetUtils.writePresentValue(this.getParentNode(), [objectType, objectInstance, value, priority, objectTag]);\n  }\n\n  async onAfterSettingsChange() {\n    await super.onAfterSettingsChange();\n    this.getPresentValue();\n    const networkNode: BACnetNetwork = BacnetUtils.getNetworkNode(this.getParentNode());\n    if (networkNode.settings?.networkNumber?.value) {\n      this.networkNumber = networkNode.settings?.networkNumber?.value;\n    }\n  }\n\n  onRemoved() {\n    super.onRemoved();\n    BacnetUtils.removePoint(this.getParentNode(), this);\n  }\n\n  getPresentValue() {\n    if (this.side !== Side.server) return; // only execute on serve\n    let selectPoint = this.settings['pointsList'].value;\n    const manualPoint = this.settings['manualPoint'].value;\n    const objectType = this.settings['objectType'].value;\n    const objectInstance = this.settings['objectInstance'].value;\n    if (manualPoint) {\n      selectPoint = { type: objectType, instance: objectInstance };\n    }\n    if (selectPoint) {\n      BacnetUtils.getPresentValue(this.getParentNode(), selectPoint).then(msg => {\n        this.setPointValue(msg);\n      });\n    }\n  }\n\n  setPointValue(msg) {\n    const logs = this.settings['logs'].value;\n    if (logs) {\n      this.setOutputData(this.logsOutNum, true, true);\n      this.debugInfo(`BACNET-NETWORK-POINT-NODE: msg from device ${JSON.stringify(msg)}`);\n    }\n    if (msg?.value?.values?.[0]?.value === undefined) {\n      this.setOutputData(this.errorOutNum, true, true);\n      this.debugErr(`BACNET-NETWORK-POINT-NODE: msg from device node is invalid ${JSON.stringify(msg)}`);\n      return;\n    }\n    let pointValue = msg.value.values[0].value;\n    let objectType: number;\n    let objectInstance: number;\n    let pointEnable = this.settings['pointEnable'].value;\n    let pointWriteEnable = this.settings['pointWriteEnable'].value;\n    const priority = this.settings['priority'].value;\n    const manualPoint = this.settings['manualPoint'].value;\n    const selectPoint = this.settings['pointsList'].value;\n    const pointsList = this.settings['pointsList'].config.items;\n    let bacnetPointName;\n\n    if (manualPoint) {\n      objectType = this.settings['objectType'].value;\n      objectInstance = this.settings['objectInstance'].value;\n    }\n    if (selectPoint) {\n      objectType = selectPoint.type;\n      objectInstance = selectPoint.instance;\n      // get bacnet point name\n      if (pointsList) {\n        let obj = pointsList;\n        for (let key in obj) {\n          if (\n            obj.hasOwnProperty(key) &&\n            obj[key].value.type === selectPoint.type &&\n            obj[key].value.instance === selectPoint.instance\n          ) {\n            bacnetPointName = obj[key];\n          }\n        }\n      }\n    }\n\n    if (msg.value) {\n      this.pollCount++;\n      const json = {\n        name: this.name,\n        pointValue: pointValue,\n        enable: pointEnable,\n        pointWriteEnable: pointWriteEnable,\n        objectType: objectType,\n        objectInstance: objectInstance,\n        priority: priority,\n        bacnetPointName: bacnetPointName,\n        pollCount: this.pollCount,\n        pollCountFail: this.pollCountFail,\n      };\n      this.setOutputData(this.outputOutNum, pointValue);\n      this.setJsonOutput(json);\n      this.setOutputData(this.errorOutNum, null, true);\n    } else {\n      this.setOutputData(this.outputOutNum, null, true);\n      this.setJsonOutput(null);\n      if (msg.error) {\n        this.setOutputData(this.errorOutNum, 'Error on reading value');\n        this.pollCountFail++;\n      }\n    }\n  }\n\n  setJsonOutput(json) {\n    this.setOutputData(this.jsonOutNum, json);\n    return json;\n  }\n\n  setPointsListItems() {\n    this.settings['pointsList'].config.items = this.points.map(point => {\n      return {\n        value: { type: point.type, instance: point.objectInfo },\n        text: point.name,\n      };\n    });\n    this.persistConfiguration();\n    this.broadcastSettingsToClients();\n  }\n\n  subscribe({ action, payload }) {\n    switch (action) {\n      case SEND_PAYLOAD_TO_CHILD:\n        this.points = payload.points;\n        this.setPointsListItems();\n        break;\n      case SEND_POINT_VALUE:\n        this.setPointValue(payload);\n        break;\n      default:\n        this.debugWarn(\"Request action doesn't match\");\n    }\n  }\n}\nContainer.registerNodeType(BACNET_POINT, BACnetPoint, BACNET_DEVICE);\n","import { Enumify } from 'enumify';\n\nexport class InputMethod extends Enumify {\n  static VALUE_PRIORITY = new InputMethod('Value and Priority');\n  static PRIORITY_ARRAY_LOT = new InputMethod('Priority Array');\n  static PRIORITY_ARRAY_JSON = new InputMethod('JSON');\n  static _ = InputMethod.closeEnum();\n\n  readonly label: string;\n\n  constructor(label: string) {\n    super();\n    this.label = label;\n  }\n\n  static items(): { text: string; value: any }[] {\n    return InputMethod.enumKeys.map(k => {\n      return { value: k, text: (<InputMethod>InputMethod.enumValueOf(k)).label };\n    });\n  }\n}\n","//\n// BACnet device implementation.\n// Top level structure for a device object.\n//\n\nconst assert = require('assert');\nconst bacnet = require('node-bacnet');\nconst logger = require('logplease').create('bacnet', { color: 4 });\n\nconst BE = bacnet && bacnet.enum;\nconst PI = BE && BE.PropertyIdentifier;\n\nconst BACnetObject         = require('./bacnet-object');\nconst BACnetObjectProperty = require('./bacnet-object-property');\nconst Util                 = require('./util');\n\nclass BACnetDevice extends BACnetObject {\n  /**\n   * Create a new BACnet device and listen for BACnet traffic.\n   *\n   * @param deviceInfo\n   *   Must contain all members in `devicePropMap`, plus:\n   *   - `name`: Device friendly name for user display.\n   *   - `deviceId`: BACnet device instance.  Must be a unique number on the\n   *     BACnet network.\n   *\n   * @param hostInfo\n   *   - port: BACnet port to listen on, omit for default 47808.\n   *   - ip: If functioning as a BBMD, this is our own IP address.  Must be\n   *     reachable by the BMS, which will contact us directly on the IP after\n   *     locating us by using the BBMD to forward us broadcasts.\n   *   - interface: Optional IP address to bind to.\n   * @param covListener BACnet change of value listener\n   */\n  constructor(deviceInfo, hostInfo = {}, covListener) {\n    super(null, deviceInfo.deviceId, BE.ObjectType.DEVICE, deviceInfo.name);\n    this.dev         = this;\n    this.deviceInfo  = deviceInfo;\n    this.hostInfo    = hostInfo;\n    this.client      = null;\n    this.covListener = covListener;\n  }\n\n  getProperty(propertyId) {\n    switch (propertyId) {\n      case PI.APDU_TIMEOUT: {\n        // Get the timeout value from node-bacstack\n        const prop  = new BACnetObjectProperty(this, propertyId, undefined, true);\n        prop._value = this.client._settings.apduTimeout;\n        return prop;\n      }\n      default:\n        return super.getProperty(propertyId);\n    }\n  }\n\n  /**\n   * The default code will respond to unhandled messages with an error, however\n   * the error will be broadcasted to the local subnet.  Since we are\n   * functioning as a hybrid device+BBMD, we need to examine the message and if\n   * it has been sent to us as if we're a BBMD, then we need to respond in BBMD\n   * mode instead, otherwise the error response won't make it to the caller and\n   * they will think we have gone offline.\n   */\n  onUnhandledEvent(msg) {\n    if (msg.header.expectingReply) {\n      if (msg.header.sender.forwardedFrom) {\n        // Message came from a BBMD, so need to reply as if we're a BBMD.\n        msg.header.sender.forwardedFrom = this.ip;\n      }\n      const enumType = msg.header.confirmedService ? BE.ConfirmedServiceChoice : BE.UnconfirmedServiceChoice;\n      logger.debug('Replying with error for unhandled service:' + BE.getEnumName(enumType, msg.service));\n      this.client.errorResponse(msg.header.sender, msg.service, msg.invokeId, BE.ErrorClass.SERVICES,\n                                BE.ErrorCode.REJECT_UNRECOGNIZED_SERVICE);\n    }\n  }\n\n  onRegisterForeignDevice(msg) {\n    logger.debug('[recv] Register foreign device:', msg.header.sender.address, 'for TTL', msg.payload.ttl);\n    // Add to device table\n    // TODO: Use a date + TTL so we don't have to keep checking it\n    this.bdt[msg.header.sender.address] = msg.payload.ttl;\n    this.client.resultResponse(msg.header.sender, BE.BvlcResultFormat.SUCCESSFUL_COMPLETION);\n  }\n\n  onWhoIs(msg) {\n    logger.debug('onWhoIs');\n    if (msg.payload.lowLimit === undefined || msg.payload.highLimit === undefined ||\n        (msg.payload.lowLimit <= this.instance && msg.payload.highLimit >= this.instance)) {\n      if (msg.header.sender.forwardedFrom) {\n        // Message came from a BBMD, so need to reply as if we're a BBMD.\n        //msg.header.sender.forwardedFrom = this.ip;\n\n        // Actually it seems like responses should be returned direct to the\n        // caller by the device, bypassing the BBMD.\n        msg.header.sender.forwardedFrom = null;\n      }\n\n      logger.debug(msg.header.sender, this.instance, this.getProperty(PI.SEGMENTATION_SUPPORTED).value,\n                   this.getProperty(PI.VENDOR_IDENTIFIER).value);\n\n      logger.debug(\n        `[send] Replying to whoIs(${msg.payload.lowLimit}..` + `${msg.payload.highLimit}): iAm ${this.instance} -> ` +\n        `${msg.header.sender.address}/${msg.header.sender.forwardedFrom}`);\n      this.client.iAmResponse(msg.header.sender, this.instance, this.getProperty(PI.SEGMENTATION_SUPPORTED).value,\n                              this.getProperty(PI.VENDOR_IDENTIFIER).value);\n    }\n  }\n\n  onWriteProperty(data) {\n    logger.debug(`onWriteProperty: ${JSON.stringify(data)}`);\n    const object = this.getObject(data.payload.objectId.instance, data.payload.objectId.type);\n    if (!object) {\n      return this.client.errorResponse(data.header.sender, data.service, data.invokeId, BE.ErrorClass.OBJECT,\n                                       BE.ErrorCode.UNKNOWN_OBJECT);\n    }\n    let property  = object.getProperty(data.payload.value.property.id);\n    let property3 = object.getProperty(PI.PRIORITY_ARRAY);\n    let value2    = this.encodePropValue(property3);\n\n    if (!property) {\n      return this.client.errorResponse(data.header.sender, data.service, data.invokeId, BE.ErrorClass.PROPERTY,\n                                       BE.ErrorCode.UNKNOWN_PROPERTY);\n    }\n    if (data.payload.value.property.index === 0xffffffff) {\n      let pri = data.payload.value.priority;\n      let val = data.payload.value.value[0].value;\n\n      function arrType(arr, pri, value) {\n        let i;\n        for (i in arr) {\n          let arrNum = parseInt(i) + 1;\n          if (arrNum === pri) {\n            arr[i].value = value;\n            // break;\n          }\n        }\n        return arr;\n      }\n\n      let aa  = arrType(value2, pri, val);\n      let arr = [];\n      let p;\n      for (p in aa) {\n        arr.push(aa[p].value);\n      }\n\n      let priorityValue;\n      let priorityNum;\n      let priorityArr;\n      let q;\n      for (q in arr) {\n        priorityValue = arr[q];\n        priorityNum   = parseInt(q) + 1;\n        priorityArr   = { priorityNum: parseInt(q) + 1, val: arr[q] };\n\n        if (arr[q] != null) {\n          break;\n        }\n      }\n      const inpPresentValue2 = object.addProperty(PI.PRIORITY_ARRAY, BE.ApplicationTags.REAL);\n      inpPresentValue2.value = arr;\n\n      const inpPresentValue23 = object.addProperty(PI.PRESENT_VALUE, BE.ApplicationTags.REAL);\n      inpPresentValue23.value = priorityValue;\n\n      this.client.simpleAckResponse(data.header.sender, data.service, data.invokeId);\n      this.covListener({\n                         objectType   : data.payload.objectId.type,\n                         objectId     : data.payload.objectId.instance,\n                         presentValue : priorityValue,\n                         priority     : priorityNum,\n                         priorityArray: arr,\n                       });\n    } else {\n      let slot = data.payload.value.property.index;\n      if (!slot) {\n        return this.client.errorResponse(data.header.sender, data.service, data.invokeId, BE.ErrorClass.PROPERTY,\n                                         BE.ErrorCode.INVALID_ARRAY_INDEX);\n      }\n      this.client.simpleAckResponse(data.header.sender, data.service, data.invokeId);\n    }\n  }\n\n  onReadProperty(msg) {\n    logger.debug('onReadProperty', msg);\n    const propertyName = Util.getEnumName(PI, msg.payload.property.id);\n    const typeName     = Util.getEnumName(BE.ObjectType, msg.payload.objectId.type);\n    const objectIdName = typeName + ':' + msg.payload.objectId.instance;\n    logger.debug(`[recv/${msg.header.sender.address}] readProperty: ${objectIdName}/${propertyName}`);\n\n    const object = this.getObject(msg.payload.objectId.instance, msg.payload.objectId.type);\n    if (!object) {\n      logger.debug(\n        `[send/${msg.header.sender.address}] Requested non-existent ` + `object ${objectIdName}, responding with error`,\n      );\n      return this.client.errorResponse(msg.header.sender, BE.ConfirmedServiceChoice.READ_PROPERTY, msg.invokeId,\n                                       BE.ErrorClass.OBJECT, BE.ErrorCode.UNKNOWN_OBJECT);\n    }\n\n    let property = object.getProperty(msg.payload.property.id);\n    if (!property) {\n      logger.debug(\n        `[send/${msg.header.sender.address}] Requested non-existent ` +\n        `property ${propertyName} for object ${objectIdName}, responding ` +\n        `with error`,\n      );\n      return this.client.errorResponse(msg.header.sender, BE.ConfirmedServiceChoice.READ_PROPERTY, msg.invokeId,\n                                       BE.ErrorClass.PROPERTY, BE.ErrorCode.UNKNOWN_PROPERTY);\n    }\n\n    if (msg.payload.property.index === 0xffffffff) {\n      const content = this.encodePropValue(property);\n      // const inpPresentValue = object.addProperty(\n      // \tPI.PRESENT_VALUE,\n      // \tBE.ApplicationTags.REAL\n      // );\n      // inpPresentValue.value = Math.floor(Math.random() * 100);  //FOR TESTING\n      this.client.readPropertyResponse(msg.header.sender, msg.invokeId, msg.payload.objectId, msg.payload.property,\n                                       content);\n      logger.debug(\n        `[send/${msg.header.sender.address}] readPropertyResponse@all: ${objectIdName}/${propertyName} => %O`, content);\n    } else {\n      const slot = property.value[msg.payload.property.index];\n      if (!slot) {\n        return this.client.errorResponse(msg.header.sender, BE.ConfirmedServiceChoice.READ_PROPERTY, msg.invokeId,\n                                         BE.ErrorClass.PROPERTY, BE.ErrorCode.INVALID_ARRAY_INDEX);\n      }\n\n      this.client.readPropertyResponse(msg.header.sender, msg.invokeId, msg.payload.objectId, msg.payload.property,\n                                       this.encodePropValue(slot));\n      logger.debug(\n        `[send/${msg.header.sender.address}] readPropertyResponse@${msg.payload.property.index}: ${objectIdName}/${propertyName}`,\n      );\n    }\n  }\n\n  onReadPropertyMultiple(msg) {\n    logger.debug(`onReadPropertyMultiple: ${msg}`);\n    logger.debug(`[recv/${msg.header.sender.address}] readPropertyMultiple`);\n    const responseList = [];\n    const propGroups   = msg.payload.properties;\n\n    propGroups.forEach(propGroup => {\n      const typeName         = Util.getEnumName(BE.ObjectType, propGroup.objectId.type);\n      const objectIdName     = typeName + ':' + propGroup.objectId.instance;\n      const propListFriendly = propGroup.properties.map(prop => Util.getEnumName(PI, prop.id));\n      logger.debug(\n        `[recv/${msg.header.sender.address}] readPropertyMultiple: object ${objectIdName}/%o`,\n        propListFriendly,\n      );\n\n      // BACnet spec 15.7.2\n      // If a device ID of 4194303 is given for a DEVICE(8) read, it should be\n      // treated as if the correct device instance was supplied, to allow\n      // discovering a device that does not respond with I-Am messages.\n      logger.debug(\n        `[BE.ObjectTypesSupported.DEVICE ${propGroup.objectId.instance}] readPropertyMultiple: instance ${BE.ASN1_MAX_PROPERTY_ID}`,\n      );\n      if (propGroup.objectId.type === BE.ObjectTypesSupported.DEVICE &&\n          propGroup.objectId.instance === BE.ASN1_MAX_PROPERTY_ID) {\n        propGroup.objectId.instance = this.instance;\n      }\n      const object   = this.getObject(propGroup.objectId.instance, propGroup.objectId.type);\n      const propList = [];\n\n      propGroup.properties.forEach(item => {\n        let content;\n        if (!object) {\n          // Object was invalid, so every prop is going to be an error.\n          content = [{\n            type : 0,\n            value: {\n              type      : 'BacnetError',\n              errorClass: BE.ErrorClass.OBJECT,\n              errorCode : BE.ErrorCode.UNKNOWN_OBJECT,\n            },\n          }];\n        } else {\n          if (item.id === PI.ALL) {\n            // Caller wants all properties for this object.\n            object.getAllPropertyIds().forEach(propertyId => {\n              // BACnet spec 15.7.3.1.2\n              // ALL and REQUIRED bulk property requests omit PROPERTY_LIST.\n              if (propertyId === PI.PROPERTY_LIST) return;\n\n              const prop = object.getProperty(propertyId);\n              propList.push(\n                { property: { id: propertyId, index: BE.ASN1_ARRAY_ALL }, value: this.encodePropValue(prop) });\n            });\n            return;\n          }\n\n          // Specific properties are listed, so just get those.\n          const property = object.getProperty(item.id);\n          if (!property) {\n            // Property doesn't exist, include an error for this property but\n            // still allow other valid ones to be returned.\n            content = [{\n              type : 0,\n              value: {\n                type      : 'BacnetError',\n                errorClass: BE.ErrorClass.PROPERTY,\n                errorCode : BE.ErrorCode.UNKNOWN_PROPERTY,\n              },\n            }];\n          } else if (item.index === BE.ASN1_ARRAY_ALL) {\n            content = this.encodePropValue(property);\n          } else {\n            const slot = Array.isArray(property.value) && property.value[item.index];\n            if (!slot) {\n              // This array index within the property is invalid.\n              content = [{\n                type : 0,\n                value: {\n                  type      : 'BacnetError',\n                  errorClass: BE.ErrorClass.PROPERTY,\n                  errorCode : BE.ErrorCode.INVALID_ARRAY_INDEX,\n                },\n              }];\n            } else {\n              content = this.encodePropValue(slot);\n            }\n          }\n        }\n\n        // Add the requested property to the list we will be returning, along\n        // with either its value or an error code.\n        assert(Array.isArray(content));\n        propList.push({ property: { id: item.id, index: item.index }, value: content });\n      });\n\n      // Add the object's props (along with any errors for invalid props), or\n      // the single error object if an invalid object instance was given.\n      responseList.push(\n        { objectId: { type: propGroup.objectId.type, instance: propGroup.objectId.instance }, values: propList });\n    });\n\n    logger.debug(\n      `[send/${msg.header.sender.address}] readPropertyMultiple response: %d objects, %d total properties`,\n      responseList.length,\n      responseList.map(o => o.values.length).reduce((a, b) => a + b),\n    );\n    this.client.readPropertyMultipleResponse(msg.header.sender, msg.invokeId, responseList);\n  }\n\n  onSubscribeCov(msg) {\n    logger.debug('onSubscribeCov');\n    const typeName     = Util.getEnumName(BE.ObjectType, msg.payload.monitoredObjectId.type);\n    const objectIdName = typeName + ':' + msg.payload.monitoredObjectId.instance;\n    logger.debug(`[recv/${msg.header.sender.address}] subscribeCov: object ${objectIdName}`);\n\n    const object = this.getObject(msg.payload.monitoredObjectId.instance, msg.payload.monitoredObjectId.type);\n    if (!object) {\n      // Invalid object\n      logger.debug(`${msg.header.sender.address} tried to subscribe to non-existent object ${objectIdName}`);\n      logger.debug(`[send/${msg.header.sender.address}] Returning error OBJECT:UNKNOWN_OBJECT`);\n      this.client.errorResponse(msg.header.sender, msg.service, msg.invokeId, BE.ErrorClass.OBJECT,\n                                BE.ErrorCode.UNKNOWN_OBJECT);\n      return;\n    }\n\n    // Remove any existing subscription for this property and device, as well as\n    // any expired ones.\n    object.subscriptions = object.subscriptions.filter(\n      sub => sub.subscriberAddress !== msg.header.sender && sub.subscriberProcessId !==\n             msg.payload.subscriberProcessId && sub.lifetime > 0);\n\n    // Add the new subscription if a non-zero lifetime is given (as a zero or\n    // missing lifetime means 'unsubscribe').\n    if (msg.payload.lifetime) {\n      const sub = {\n        subscriberAddress          : msg.header.sender,\n        monitoredObjectId          : msg.payload.monitoredObjectId,\n        subscriberProcessId        : msg.payload.subscriberProcessId,\n        issueConfirmedNotifications: true,\n        invokeId                   : msg.invokeId,\n        lifetime                   : msg.payload.lifetime,\n      };\n      object.subscriptions.push(sub);\n      logger.debug(\n        `Adding subscription to object ${objectIdName} for ${msg.header.sender.address}#${msg.payload.subscriberProcessId}`,\n      );\n\n      // We have to send an update immediately after the subscription, even if\n      // the value hasn't changed.\n      let propList = [];\n      // Get all property values.\n      object.getAllPropertyIds().forEach(propertyId => {\n        const property = object.getProperty(propertyId);\n        propList.push({ property: { id: propertyId }, value: this.encodePropValue(property) });\n      });\n      this.sendPropertyCov(sub, propList);\n    } else {\n      logger.debug(\n        `Removing subscription to object ${objectIdName} by ${msg.header.sender.address}#${msg.payload.subscriberProcessId}`,\n      );\n    }\n\n    logger.debug(`[send/${msg.header.sender.address}] simpleAckResponse for subscribeCov`);\n    this.client.simpleAckResponse(msg.header.sender, msg.service, msg.invokeId);\n  }\n\n  onSubscribeProperty(msg) {\n    logger.debug('onSubscribeProperty');\n    const typeName     = Util.getEnumName(BE.ObjectType, msg.payload.monitoredObjectId.type);\n    const objectIdName = typeName + ':' + msg.payload.monitoredObjectId.instance;\n    logger.debug(`[recv/${msg.header.sender.address}] subscribeCovProperty: object ${objectIdName}`);\n\n    if (!msg.payload.issueConfirmedNotifications) {\n      // Unconfirmed notifications aren't yet implemented in bacstack\n      logger.debug(\n        `Returning error to ${msg.header.sender.address} - unable to subscribe with unconfirmed notifications`,\n      );\n      logger.debug(`[send/${msg.header.sender.address}] Returning error OBJECT:OPTIONAL_FUNCTIONALITY_NOT_SUPPORTED`);\n      this.client.errorResponse(msg.header.sender, msg.service, msg.invokeId, BE.ErrorClass.OBJECT,\n                                BE.ErrorCode.OPTIONAL_FUNCTIONALITY_NOT_SUPPORTED);\n      return;\n    }\n\n    const object = this.getObject(msg.payload.monitoredObjectId.instance, msg.payload.monitoredObjectId.type);\n    if (!object) {\n      // Invalid object\n      logger.debug(`${msg.header.sender.address} tried to subscribe to non-existent object ${objectIdName}`);\n      logger.debug(`[send/${msg.header.sender.address}] Returning error OBJECT:UNKNOWN_OBJECT`);\n      this.client.errorResponse(msg.header.sender, msg.service, msg.invokeId, BE.ErrorClass.OBJECT,\n                                BE.ErrorCode.UNKNOWN_OBJECT);\n      return;\n    }\n\n    const property     = object.getProperty(msg.payload.monitoredProperty.id);\n    const propertyName = Util.getPropName(msg.payload.monitoredProperty.id);\n    if (!property) {\n      // Invalid property\n      logger.debug(\n        `${msg.header.sender.address} tried to subscribe to non-existent property ${objectIdName}/${propertyName}`,\n      );\n      logger.debug(`[send/${msg.header.sender.address}] Returning error PROPERTY:UNKNOWN_PROPERTY`);\n      this.client.errorResponse(msg.header.sender, msg.service, msg.invokeId, BE.ErrorClass.PROPERTY,\n                                BE.ErrorCode.UNKNOWN_PROPERTY);\n      return;\n    }\n\n    // Remove any existing subscription for this property and device, as well as\n    // any expired ones.\n    property.subscriptions = property.subscriptions.filter(\n      sub => sub.subscriberAddress !== msg.header.sender && sub.subscriberProcessId !==\n             msg.payload.subscriberProcessId && sub.lifetime > 0);\n\n    // Add the new subscription if a non-zero lifetime is given (as a zero or\n    // missing lifetime means 'unsubscribe').\n    if (msg.payload.lifetime) {\n      const sub = {\n        subscriberAddress          : msg.header.sender,\n        monitoredObjectId          : msg.payload.monitoredObjectId,\n        subscriberProcessId        : msg.payload.subscriberProcessId,\n        issueConfirmedNotifications: msg.payload.issueConfirmedNotifications,\n        monitoredIndex             : msg.payload.monitoredProperty.index,\n        invokeId                   : msg.invokeId,\n        lifetime                   : msg.payload.lifetime,\n      };\n      property.subscriptions.push(sub);\n      logger.debug(\n        `Adding subscription to property ${objectIdName}/${propertyName} for ${msg.header.sender.address}#${msg.payload.subscriberProcessId}`);\n\n      // We have to send an update immediately after the subscription, even if\n      // the value hasn't changed.\n      let propList = [];\n      propList.push({ property: { id: property.propertyId }, value: this.encodePropValue(property) });\n      this.sendPropertyCov(sub, propList);\n    } else {\n      logger.debug(\n        `Removing subscription to ${objectIdName}/${propertyName} by ${msg.header.sender.address}#${msg.payload.subscriberProcessId}`);\n    }\n\n    logger.debug(`[send/${msg.header.sender.address}] simpleAckResponse for subscribeCovProperty`);\n    this.client.simpleAckResponse(msg.header.sender, msg.service, msg.invokeId);\n  }\n\n  /**\n   * Top-level callback function when any property is changed.  We need to look\n   * up any subscriptions and send messages out as needed.\n   */\n  onObjectPropertyChanged(object, property) {\n    // logger.debug(\"onObjectPropertyChanged\")\n    let propList = [];\n\n    propList.push({ property: { id: property.propertyId }, value: this.encodePropValue(property) });\n\n    if (object.subscriptions) {\n      // TODO: add batch/transaction start/stop functions to collect all changes\n      // up into small number of messages, instead of one per property.\n      object.subscriptions.forEach(sub => {\n        const typeName     = Util.getEnumName(BE.ObjectType, sub.monitoredObjectId.type);\n        const objectIdName = typeName + ':' + sub.monitoredObjectId.instance;\n        this.sendPropertyCov(sub, propList);\n      });\n    }\n\n    if (property.subscriptions) {\n      property.subscriptions.forEach(sub => {\n        const typeName     = Util.getEnumName(BE.ObjectType, sub.monitoredObjectId.type);\n        const objectIdName = typeName + ':' + sub.monitoredObjectId.instance;\n        const propertyName = Util.getPropName(property.propertyId);\n        logger.debug(\n          `[send/${sub.subscriberAddress.address}] confirmedCOVNotification: property ${objectIdName}/${propertyName}`,\n        );\n        this.sendPropertyCov(sub, propList);\n      });\n    }\n  }\n\n  /**\n   * Send a COV notification.\n   *\n   * This is a separate function as we need to send the same message both when\n   * the value changes, as well as when a subscription request comes through.\n   */\n  sendPropertyCov(sub, propList) {\n    logger.debug('sendPropertyCov');\n    const typeName     = Util.getEnumName(BE.ObjectType, sub.monitoredObjectId.type);\n    const objectIdName = typeName + ':' + sub.monitoredObjectId.instance;\n    logger.debug(\n      `[send/${sub.subscriberAddress.address}] confirmedCOVNotification: object ${objectIdName}, ${propList.length} items`,\n    );\n    if (sub.issueConfirmedNotifications) {\n      this.client.confirmedCOVNotification(sub.subscriberAddress, sub.monitoredObjectId, sub.subscriberProcessId,\n                                           this.instance, sub.lifetime, propList, { invokeId: sub.invokeId }, err => {\n          if (err) {\n            logger.debug(`[recv/${sub.subscriberAddress.address}] confirmedCOVNotification was rejected:`, err);\n          } else {\n            logger.debug(`[recv/${sub.subscriberAddress.address}] confirmedCOVNotification was ACKed`);\n          }\n        },\n      );\n    } else {\n      // Sending unsubscribedCOV notifications is not yet implemented in bacstack\n    }\n  }\n\n  /**\n   * Encode a property value so that it matches the requested type.\n   *\n   * This is because we store some values differently to the way they are\n   * transmitted via BACnet.  For example we store a bit string as an array of\n   * enum items, so this needs to be encoded into an integer value before\n   * it can be sent in a readProperty response.\n   *\n   * @param BACnetObjectProperty property\n   *   Property class instance to encode.  This must be an instance of\n   *   BACnetObjectProperty as we need to access the property data type.\n   *\n   * @return Object suitable for passing to node-bacstack in a BACnet message\n   *   response.\n   */\n  encodePropValue(property) {\n    // logger.debug(\"encodePropValue\")\n\n    let encodedValue = property.value;\n    if (!Array.isArray(encodedValue)) encodedValue = [encodedValue];\n\n    // These types need the whole array\n    switch (property.typeId) {\n      case BE.ApplicationTags.BIT_STRING:\n        return [\n          {\n            value: bacnet.createBitstring(encodedValue),\n            type : property.typeId,\n          },\n        ];\n    }\n\n    // These types encode per item within the array.\n    return encodedValue.map(item => ({\n      value: (() => {\n        switch (property.typeId) {\n          case BE.ApplicationTags.NULL:\n          case BE.ApplicationTags.BOOLEAN:\n          case BE.ApplicationTags.UNSIGNED_INTEGER:\n          case BE.ApplicationTags.SIGNED_INTEGER:\n          case BE.ApplicationTags.REAL:\n          case BE.ApplicationTags.DOUBLE:\n          case BE.ApplicationTags.CHARACTER_STRING:\n          case BE.ApplicationTags.ENUMERATED:\n            // Nothing to do\n            return item;\n          //TODO case BE.ApplicationTags.OCTET_STRING:\n          // BIT_STRING is handled above\n          //TODO case BE.ApplicationTags.DATE:\n          //TODO case BE.ApplicationTags.TIME:\n          case BE.ApplicationTags.OBJECTIDENTIFIER:\n            // This comes from the structure used in BACnetObject.getProperty()\n            // for the OBJECT_LIST dynamic property handler.\n            return {\n              type    : item.typeId,\n              instance: item.instance,\n            };\n          default:\n            const typeName = Util.getEnumName(BE.ApplicationTags, property.typeId);\n            logger.debug(`No encoding for data type ${typeName}`);\n            throw new Error(`Encoding for data type ${typeName} has not been implemented in bacnet-device yet.`);\n        }\n      })(),\n      type : property.typeId,\n    }));\n  }\n\n  start() {\n    assert(this.deviceInfo.deviceId, 'Cannot create a new device without a deviceId');\n    assert(this.deviceInfo.name, 'Cannot create a new device without a name');\n\n    // Set some defaults to ensure we comply with BACnet standards\n    this.addProperty(PI.SYSTEM_STATUS).value                = BE.DeviceStatus.OPERATIONAL;\n    this.addProperty(PI.VENDOR_NAME).value                  = 'Nube iO Operations';\n    this.addProperty(PI.VENDOR_IDENTIFIER).value            = 1173;\n    this.addProperty(PI.MODEL_NAME).value                   = 'nube-io-bacnet';\n    this.addProperty(PI.FIRMWARE_REVISION).value            = 1;\n    this.addProperty(PI.APPLICATION_SOFTWARE_VERSION).value = 1;\n    this.addProperty(PI.PROTOCOL_VERSION).value             = 1;\n    this.addProperty(PI.PROTOCOL_REVISION).value            = 1;\n    this.addProperty(PI.PROTOCOL_SERVICES_SUPPORTED).value  = [\n      // These are the BACnet calls we support.\n\n      // BE.ServicesSupported.ACKNOWLEDGE_ALARM,\n      BE.ServicesSupported.CONFIRMED_COV_NOTIFICATION,\n      // BE.ServicesSupported.CONFIRMED_EVENT_NOTIFICATION,\n      // BE.ServicesSupported.GET_ALARM_SUMMARY,\n      // BE.ServicesSupported.GET_ENROLLMENT_SUMMARY,\n      BE.ServicesSupported.SUBSCRIBE_COV,\n      // BE.ServicesSupported.ATOMIC_READ_FILE,\n      // BE.ServicesSupported.ATOMIC_WRITE_FILE,\n      // BE.ServicesSupported.ADD_LIST_ELEMENT,\n      // BE.ServicesSupported.REMOVE_LIST_ELEMENT,\n      // BE.ServicesSupported.CREATE_OBJECT,\n      // BE.ServicesSupported.DELETE_OBJECT,\n      BE.ServicesSupported.READ_PROPERTY,\n      BE.ServicesSupported.READ_PROPERTY_MULTIPLE,\n      BE.ServicesSupported.WRITE_PROPERTY,\n      // BE.ServicesSupported.WRITE_PROPERTY_MULTIPLE,\n      // BE.ServicesSupported.DEVICE_COMMUNICATION_CONTROL,\n      // BE.ServicesSupported.CONFIRMED_PRIVATE_TRANSFER,\n      // BE.ServicesSupported.CONFIRMED_TEXT_MESSAGE,\n      // BE.ServicesSupported.REINITIALIZE_DEVICE,\n      // BE.ServicesSupported.VT_OPEN,\n      // BE.ServicesSupported.VT_CLOSE,\n      // BE.ServicesSupported.VT_DATA,\n      // BE.ServicesSupported.READ_PROPERTY_CONDITIONAL,\n      // BE.ServicesSupported.AUTHENTICATE,\n      // BE.ServicesSupported.REQUEST_KEY,\n      BE.ServicesSupported.I_AM,\n      // BE.ServicesSupported.I_HAVE,\n      // BE.ServicesSupported.UNCONFIRMED_COV_NOTIFICATION,\n      // BE.ServicesSupported.UNCONFIRMED_EVENT_NOTIFICATION,\n      // BE.ServicesSupported.UNCONFIRMED_PRIVATE_TRANSFER,\n      // BE.ServicesSupported.UNCONFIRMED_TEXT_MESSAGE,\n      // BE.ServicesSupported.TIME_SYNCHRONIZATION,\n      // BE.ServicesSupported.WHO_HAS,\n      BE.ServicesSupported.WHO_IS,\n      // BE.ServicesSupported.READ_RANGE,\n      // BE.ServicesSupported.UTC_TIME_SYNCHRONIZATION,\n      // BE.ServicesSupported.LIFE_SAFETY_OPERATION,\n      BE.ServicesSupported.SUBSCRIBE_COV_PROPERTY,\n      // BE.ServicesSupported.GET_EVENT_INFORMATION,\n      // BE.ServicesSupported.WRITE_GROUP,\n      // BE.ServicesSupported.SUBSCRIBE_COV_PROPERTY_MULTIPLE,\n      // BE.ServicesSupported.CONFIRMED_COV_NOTIFICATION_MULTIPLE,\n      // BE.ServicesSupported.UNCONFIRMED_COV_NOTIFICATION_MULTIPLE,\n    ];\n    // PROTOCOL_OBJECT_TYPES_SUPPORTED is handled by our parent class.\n    // OBJECT_LIST is handled by our parent class.\n    this.addProperty(PI.MAX_APDU_LENGTH_ACCEPTED).value = 1482;\n    this.addProperty(PI.SEGMENTATION_SUPPORTED).value   = BE.Segmentation.SEGMENTED_BOTH;\n    // APDU_TIMEOUT is handled by getProperty().\n    this.addProperty(PI.NUMBER_OF_APDU_RETRIES).value   = 3;\n    this.addProperty(PI.DEVICE_ADDRESS_BINDING).value   = [];\n    this.addProperty(PI.DATABASE_REVISION).value        = 1;\n\n    // This property is dynamic since we override getProperty() and provide a\n    // value there.  We have to add it to the list of dynamic properties so that\n    // it gets included when lists of properties are requested, as it will never\n    // appear in `this.properties`.\n    this.dynamicProperties.push(PI.APDU_TIMEOUT);\n\n    // Add ourself to the object list.  We can't use addObject() here as that\n    // will create a new object (with no child properties), whereas we need\n    // this same device object as a child object in order for the OBJECT_LIST\n    // property to be correctly constructed.\n    if (!this.objects[BE.ObjectType.DEVICE]) {\n      this.objects[BE.ObjectType.DEVICE] = {};\n    }\n    this.objects[BE.ObjectType.DEVICE][this.instance] = this;\n\n    this.ip     = this.hostInfo.address;\n    this.client = new bacnet({\n                               adpuTimeout     : this.hostInfo.adpuTimeout,\n                               port            : this.hostInfo.port,\n                               interface       : this.hostInfo.address,\n                               broadcastAddress: this.hostInfo.broadcast,\n                             });\n    // Start with an empty Broadcast Distribution Table.\n    this.bdt    = {};\n\n    // And and empty list of SubscribeCov entries.\n    this.subscriptions = [];\n\n    // Set up BACnet callbacks\n    this.client.on('unhandledEvent', this.onUnhandledEvent.bind(this));\n    this.client.on('registerForeignDevice', this.onRegisterForeignDevice.bind(this));\n    this.client.on('whoIs', this.onWhoIs.bind(this));\n    this.client.on('writeProperty', this.onWriteProperty.bind(this));\n    this.client.on('readProperty', this.onReadProperty.bind(this));\n    this.client.on('readPropertyMultiple', this.onReadPropertyMultiple.bind(this));\n    this.client.on('subscribeCov', this.onSubscribeCov.bind(this));\n    this.client.on('subscribeProperty', this.onSubscribeProperty.bind(this));\n    this.client.reinitializeDevice(this.ip, BE.ReinitializedState.COLDSTART, (err, value) => {\n      //TODO check why client report timeout\n      logger.debug('err: ', err);\n      logger.debug('info: ', value);\n    });\n  }\n\n  stop() {\n    if (this.client !== null) {\n      this.client.close();\n    }\n  }\n\n  /**\n   * Add a new object to the device, such as a sensor reading.\n   *\n   * @param bacnetPoint bacnet point\n   * @return BACnetObject\n   */\n  addPoint(bacnetPoint) {\n    if (!bacnetPoint) {\n      return null;\n    }\n    logger.info(`Adding BACnet point ${bacnetPoint.objectType.label}:${bacnetPoint.objectInstance}...`);\n    logger.info(`Adding BACnet point ${bacnetPoint.objectType.label}:${bacnetPoint.objectInstance}...`);\n    assert(Number.isInteger(bacnetPoint.objectType.value), 'Object type must be a BE.ObjectType value.');\n    assert(Number.isInteger(bacnetPoint.objectInstance), 'Instance ID must be an integer.');\n\n    if (!this.objects[bacnetPoint.objectType.value]) this.objects[bacnetPoint.objectType.value] = {};\n    let object = new BACnetObject(this, bacnetPoint.objectInstance, bacnetPoint.objectType.value, bacnetPoint.objectName);\n    return (this.objects[bacnetPoint.objectType.value][bacnetPoint.objectInstance] = object);\n  }\n\n  updatePoint(bacnetPoint) {\n    if (!bacnetPoint) {\n      return null;\n    }\n    let object = this.getObject(bacnetPoint.objectInstance, bacnetPoint.objectType.value);\n    logger.info(`Updating BACNet point properties ${bacnetPoint.objectType.label}:${bacnetPoint.objectInstance}...`);\n    if (!object) {\n      return this.addPoint(bacnetPoint);\n    }\n    object.addProperty(bacnet.enum.PropertyIdentifier.OBJECT_NAME).value = bacnetPoint.objectName;\n    return (this.objects[bacnetPoint.objectType.value][bacnetPoint.objectInstance] = object);\n  }\n\n  updateValue(bacnetPoint) {\n    if (!bacnetPoint) {\n      return null;\n    }\n    logger.info(`Pushing BACNet point Value ${bacnetPoint.objectType.label}:${bacnetPoint.objectInstance}...`);\n    let object = this.getObject(bacnetPoint.objectInstance, bacnetPoint.objectType.value);\n    if (!object) {\n      return null;\n    }\n    let pv                                                                   = bacnetPoint.pointValue;\n    object.addProperty(PI.PRESENT_VALUE, BE.ApplicationTags.REAL).value      = pv.presentValue;\n    object.addProperty(PI.PRIORITY, BE.ApplicationTags.SIGNED_INTEGER).value = pv.priority;\n    object.addProperty(PI.PRIORITY_ARRAY, BE.ApplicationTags.REAL).value     = Object.values(pv.priorityArray);\n    return pv;\n  }\n\n  delObject(instance, objectTypeId) {\n    assert(Number.isInteger(instance), 'Instance ID must be an integer.');\n    assert(Number.isInteger(objectTypeId), 'Object type must be a BE.ObjectType value.');\n    logger.debug(`BACNet delete object ${objectTypeId}:${instance}`);\n    if (this.objects[objectTypeId]) {\n      delete this.objects[objectTypeId][instance];\n    }\n  }\n}\n\nexport default BACnetDevice;\n","module.exports = require(\"assert\");","//\n// BACnet device implementation.\n// Objects attached to devices.\n//\nconst bacnet = require('node-bacnet');\nconst logger = require('logplease').create('bacnet', { color: 6 });\n\nconst BACnetObjectProperty = require('./bacnet-object-property');\nconst MandatoryProperties  = require('./mandatory-properties');\nconst Util                 = require('./util');\n\nclass BACnetObject {\n  constructor(dev, instance, typeId, name) {\n    this.dev           = dev;\n    this.instance      = instance;\n    this.objects       = {};\n    this.properties    = {};\n    this.subscriptions = [];\n\n    // This is a list of dynamic properties provided by getProperty().  It is\n    // an instance variable so that subclasses can append to it if they override\n    // getProperty().\n    this.dynamicProperties = [\n      bacnet.enum.PropertyIdentifier.OBJECT_IDENTIFIER,\n      bacnet.enum.PropertyIdentifier.PROPERTY_LIST,\n      bacnet.enum.PropertyIdentifier.OBJECT_LIST,\n      bacnet.enum.PropertyIdentifier.PROTOCOL_OBJECT_TYPES_SUPPORTED,\n    ];\n\n    // Set some defaults to ensure we comply with BACnet standards\n    this.addProperty(bacnet.enum.PropertyIdentifier.OBJECT_TYPE).value = typeId;\n    this.addProperty(bacnet.enum.PropertyIdentifier.OBJECT_NAME).value = name;\n    // We don't set PRESENT_VALUE in case the user wants to, and wants to set\n    // it to a different type to the one we might use (e.g. analogue values\n    // are REAL while digital values are BOOLEAN.)\n    this.addProperty(bacnet.enum.PropertyIdentifier.STATUS_FLAGS).value   = [];\n    this.addProperty(bacnet.enum.PropertyIdentifier.EVENT_STATE).value    =\n      bacnet.enum.EventState.NORMAL;\n    this.addProperty(bacnet.enum.PropertyIdentifier.OUT_OF_SERVICE).value = false;\n    this.addProperty(bacnet.enum.PropertyIdentifier.UNITS).value          = bacnet.enum.EngineeringUnits.NO_UNITS;\n  }\n\n  /**\n   * Add a new property if it doesn't already exist, and return it either way.\n   */\n  addProperty(propertyId, typeId = undefined) {\n    propertyId = parseInt(propertyId);\n    if (this.dynamicProperties.includes(propertyId)) {\n      const propertyName = Util.getPropName(propertyId);\n      throw new Error(`Property ${propertyName} is generated on-the-fly and cannot be set.`);\n    }\n    return (\n      this.properties[propertyId] ||\n      (this.properties[propertyId] = new BACnetObjectProperty(this, propertyId, typeId))\n    );\n  }\n\n  /**\n   * Add multiple properties and set their values at the same time.\n   *\n   * This is typically used to set static values like names and descriptions.\n   *\n   * @param object propList\n   *   Associative array.  Array key is PropertyIdentifier enum, and the array\n   *   value is used as the property value.\n   */\n  addPropertyBulk(propList) {\n    Object.keys(propList).forEach(p => {\n      this.addProperty(p).value = propList[p];\n    });\n  }\n\n  /**\n   * Remove a property, since properties can't have 'undefined' as a value.\n   */\n  delProperty(propertyId, index = undefined) {\n    if (index !== undefined) {\n      delete this.properties[propertyId][index];\n    } else {\n      delete this.properties[propertyId];\n    }\n  }\n\n  getProperty(propertyId) {\n    propertyId = parseInt(propertyId);\n    // Some properties are generated dynamically\n    switch (propertyId) {\n      case bacnet.enum.PropertyIdentifier.OBJECT_IDENTIFIER: {\n        // Construct this one from the other properties.\n        const prop  = new BACnetObjectProperty(this, propertyId, undefined, true);\n        prop._value = {\n          // Object type, e.g. BE.ObjectTypesSupported.DEVICE\n          typeId  : this.getProperty(bacnet.enum.PropertyIdentifier.OBJECT_TYPE).value,\n          // Instance number.\n          instance: this.instance,\n        };\n        return prop;\n      }\n\n      case bacnet.enum.PropertyIdentifier.PROPERTY_LIST: {\n        // Return a list of all properties.\n\n        // These properties are not included per the BACnet standard.\n        const ignoreProps  = [\n          bacnet.enum.PropertyIdentifier.OBJECT_NAME,\n          bacnet.enum.PropertyIdentifier.OBJECT_TYPE,\n          bacnet.enum.PropertyIdentifier.OBJECT_IDENTIFIER,\n          bacnet.enum.PropertyIdentifier.PROPERTY_LIST,\n        ];\n        const prop         = new BACnetObjectProperty(this, propertyId, undefined, true);\n        const propertyList = this.getAllPropertyIds();\n        prop._value        = propertyList.filter(p => !ignoreProps.includes(p));\n\n        // Check to ensure all the mandatory properties are included, and warn\n        // the user if not.  This is not required but will help users of this\n        // library create confirmant BACnet devices.\n        const selfTypeId = this.getProperty(bacnet.enum.PropertyIdentifier.OBJECT_TYPE).value;\n        if (MandatoryProperties[selfTypeId]) {\n          const missingProperties = MandatoryProperties[selfTypeId].filter(\n            p => !prop._value.includes(p),\n          );\n          if (missingProperties.length > 0) {\n            const selfName             = this.getProperty(bacnet.enum.PropertyIdentifier.OBJECT_NAME).value;\n            const missingPropertyNames = missingProperties.map(p => Util.getPropName(p));\n            logger.error(\n              `Object #${this.instance}(\"${selfName}\") is missing these mandatory properties: %o`,\n              missingPropertyNames,\n            );\n          }\n        } else {\n          const typeName = Util.getEnumName(bacnet.enum.ObjectType, selfTypeId);\n          logger.error(\n            `TODO: No mandatory properties have been defined for the object type ${typeName}`,\n          );\n        }\n        return prop;\n      }\n\n      case bacnet.enum.PropertyIdentifier.OBJECT_LIST: {\n        let objectList = [];\n        Object.keys(this.objects).forEach(objType => {\n          const objectsOfType = this.objects[objType];\n          Object.keys(objectsOfType).forEach(objectInstance => {\n            const obj = objectsOfType[objectInstance];\n            objectList.push({\n                              typeId  : obj.getProperty(bacnet.enum.PropertyIdentifier.OBJECT_TYPE).value,\n                              instance: obj.instance,\n                            });\n          });\n        });\n        const prop  = new BACnetObjectProperty(this, propertyId, undefined, true);\n        prop._value = objectList;\n        return prop;\n      }\n\n      case bacnet.enum.PropertyIdentifier.PROTOCOL_OBJECT_TYPES_SUPPORTED: {\n        // Run through all our objects and return just the types in use.\n        let typeList = {};\n        Object.keys(this.objects).forEach(objType => {\n          const objectsOfType = this.objects[objType];\n          Object.keys(objectsOfType).forEach(objectInstance => {\n            const obj      = objectsOfType[objectInstance];\n            const type     = obj.getProperty(bacnet.enum.PropertyIdentifier.OBJECT_TYPE).value;\n            typeList[type] = true;\n          });\n        });\n        const prop  = new BACnetObjectProperty(this, propertyId, undefined, true);\n        prop._value = Object.keys(typeList).map(t => parseInt(t));\n        return prop;\n      }\n\n      default:\n        break;\n    }\n    return this.properties[propertyId];\n  }\n\n  getAllPropertyIds() {\n    const propertyList = [\n      ...Object.keys(this.properties),\n      // Also add the dynamic properties generated by this function, since\n      // they won't be in this.properties.\n      ...this.dynamicProperties,\n    ];\n    // Convert the string keys back into integer values that will match enums.\n    return propertyList.map(p => parseInt(p));\n  }\n\n  /**\n   * Called when a child property's value has changed, so that we can notify\n   * any object-level subscribers.\n   */\n  onPropertyChanged(property) {\n    if (!this.dev) return; // happens during init on Device object\n    this.dev.onObjectPropertyChanged(this, property);\n  }\n\n  /**\n   * Return an object with the properties as string keys, suitable for passing\n   * to console.log() to check the current state of the object.\n   *\n   * This is more useful than dumping `this.properties`, as this function will\n   * convert the enums from integers into strings.\n   */\n  dumpProperties() {\n    let fullPropList = Object.keys(this.properties).map(p => parseInt(p));\n\n    // Include dynamic props in the dump\n    fullPropList.push(bacnet.enum.PropertyIdentifier.PROTOCOL_OBJECT_TYPES_SUPPORTED);\n    fullPropList.push(bacnet.enum.PropertyIdentifier.OBJECT_IDENTIFIER);\n    fullPropList.push(bacnet.enum.PropertyIdentifier.PROPERTY_LIST);\n    fullPropList.push(bacnet.enum.PropertyIdentifier.OBJECT_LIST);\n\n    let props = {};\n    fullPropList.forEach(key => {\n      const property = this.getProperty(key);\n      const keyName  = Util.getPropName(key);\n      props[keyName] = property.valueAsString();\n    });\n    return props;\n  }\n\n  /**\n   * Get the sub-object identified by the given instance ID, optionally matching\n   * the given type as well.\n   *\n   * @param instance ID number for the object.\n   *\n   * @param objectTypeId bacnet.enum.ObjectType objectTypeId\n   *   Object type, such as an analogue input or digital output.  This must be\n   *   specified because it is possible to have multiple objects with the same\n   *   instance ID, differing only by type (such as Analogue Input #1 and\n   *   Digital Output #1).\n   *\n   * @return If `instance` and `objectTypeId` are valid, the `BACnetObject` is\n   *   returned.  If `instance` or `objectTypeId` are invalid, `undefined` is\n   *   returned.\n   */\n  getObject(instance, objectTypeId) {\n    const typeGroup = this.objects[objectTypeId];\n    if (!typeGroup) return undefined;\n\n    return typeGroup[instance];\n  }\n}\n\nmodule.exports = BACnetObject;\n","//\n// BACnet device implementation.\n// Mapping between properties and default types.\n//\n\nconst bacnet = require('node-bacnet');\n\nconst pi   = bacnet && bacnet.enum.PropertyIdentifier;\nconst type = bacnet && bacnet.enum.ApplicationTags;\n\nconst propertyTypeMap = bacnet && {\n  [pi.APPLICATION_SOFTWARE_VERSION]   : type.CHARACTER_STRING,\n  [pi.APDU_TIMEOUT]                   : type.UNSIGNED_INTEGER,\n  [pi.DATABASE_REVISION]              : type.UNSIGNED_INTEGER,\n  [pi.DESCRIPTION]                    : type.CHARACTER_STRING,\n  [pi.DEVICE_ADDRESS_BINDING]         : type.CHARACTER_STRING,\n  [pi.DEVICE_TYPE]                    : type.CHARACTER_STRING,\n  [pi.EVENT_STATE]                    : type.ENUMERATED,\n  [pi.FIRMWARE_REVISION]              : type.CHARACTER_STRING,\n  [pi.DEVICE_ADDRESS_BINDING]         : type.OCTET_STRING, // just a guess\n  [pi.MAX_APDU_LENGTH_ACCEPTED]       : type.UNSIGNED_INTEGER,\n  [pi.MODEL_NAME]                     : type.CHARACTER_STRING,\n  [pi.NUMBER_OF_APDU_RETRIES]         : type.UNSIGNED_INTEGER,\n  [pi.OBJECT_IDENTIFIER]              : type.OBJECTIDENTIFIER,\n  [pi.OBJECT_LIST]                    : type.OBJECTIDENTIFIER,\n  [pi.OBJECT_NAME]                    : type.CHARACTER_STRING,\n  [pi.OBJECT_TYPE]                    : type.ENUMERATED,\n  [pi.OUT_OF_SERVICE]                 : type.BOOLEAN,\n  //[pi.PRESENT_VALUE]: Not set as this depends on the object type\n  [pi.PROPERTY_LIST]                  : type.ENUMERATED,\n  [pi.PROTOCOL_OBJECT_TYPES_SUPPORTED]: type.BIT_STRING,\n  [pi.PROTOCOL_REVISION]              : type.UNSIGNED_INTEGER,\n  [pi.PROTOCOL_SERVICES_SUPPORTED]    : type.BIT_STRING,\n  [pi.PROTOCOL_VERSION]               : type.UNSIGNED_INTEGER,\n  [pi.RELIABILITY]                    : type.ENUMERATED,\n  [pi.SEGMENTATION_SUPPORTED]         : type.ENUMERATED,\n  [pi.STATUS_FLAGS]                   : type.BIT_STRING,\n  [pi.SYSTEM_STATUS]                  : type.ENUMERATED,\n  [pi.UNITS]                          : type.ENUMERATED,\n  [pi.UPDATE_INTERVAL]                : type.UNSIGNED_INTEGER,\n  [pi.VENDOR_IDENTIFIER]              : type.UNSIGNED_INTEGER,\n  [pi.VENDOR_IDENTIFIER]              : type.UNSIGNED_INTEGER,\n  [pi.VENDOR_NAME]                    : type.CHARACTER_STRING,\n};\n\nmodule.exports = propertyTypeMap;\n","const bacnet = require('node-bacnet');\n\nconst BE = bacnet && bacnet.enum;\nconst PI = bacnet && BE.PropertyIdentifier;\n\n// Note that OBJECT_IDENTIFIER, OBJECT_NAME, OBJECT_TYPE and PROPERTY_LIST are\n// not included in the lists below, as they are not returned by the\n// PROPERTY_LIST request.  They are also handled internally so should never be\n// omitted by accident.\nmodule.exports = bacnet && {\n  [BE.ObjectType.ANALOG_OUTPUT]: [\n    // PAGE 161 of spec\n    // Object_Identifier  PROP_OBJECT_IDENTIFIER  Type is 12 for a // ASHRE 135-2016 - 20.2.1.4 Application Tags - Enumerators\n    // Object_Name  // CharacterString // type.CHARACTER_STRING,\n    // Object_Type  // BACnetObjectType // type.ENUMERATED,\n    PI.PRESENT_VALUE, // PROP_PRESENT_VALUE Type 4 is  REAL: 4,\n    PI.STATUS_FLAGS, // BACnetStatusFlags  // type.BIT_STRING\n    PI.EVENT_STATE, // BACnetEventState  //  type.ENUMERATED,\n    PI.OUT_OF_SERVICE, //BOOLEAN\n    PI.UNITS, // PAGE 156 of spec Example milliamperes (2),   // type.ENUMERATED\n    PI.PRIORITY_ARRAY, //Type BACnetPriorityArray // PAGE 831 of spec. // depands on the data type. So for an AO its type: 4 and the value is real\n    PI.RELINQUISH_DEFAULT, //REAL\n  ],\n  [BE.ObjectType.ANALOG_INPUT] : [\n    // PAGE 156 of spec\n    // Object_Identifier\n    // Object_Name\n    // Object_Type\n    PI.PRESENT_VALUE,\n    PI.STATUS_FLAGS,\n    PI.EVENT_STATE,\n    PI.OUT_OF_SERVICE,\n    PI.UNITS,\n  ],\n  [BE.ObjectType.DEVICE]       : [\n    PI.SYSTEM_STATUS,\n    PI.VENDOR_NAME,\n    PI.VENDOR_IDENTIFIER,\n    PI.MODEL_NAME,\n    PI.FIRMWARE_REVISION,\n    PI.APPLICATION_SOFTWARE_VERSION,\n    PI.PROTOCOL_VERSION,\n    PI.PROTOCOL_REVISION,\n    PI.PROTOCOL_SERVICES_SUPPORTED,\n    PI.PROTOCOL_OBJECT_TYPES_SUPPORTED,\n    PI.OBJECT_LIST,\n    PI.MAX_APDU_LENGTH_ACCEPTED,\n    PI.SEGMENTATION_SUPPORTED,\n    PI.APDU_TIMEOUT,\n    PI.NUMBER_OF_APDU_RETRIES,\n    PI.DEVICE_ADDRESS_BINDING,\n    PI.DATABASE_REVISION,\n  ],\n};\n","import { PointOutput, PointValueCreator } from '../../../../backend/models/point-model';\nimport { isNull } from '../../../../utils/helper';\nimport { IdGenerator } from '../../../../utils/id-generator';\nimport {\n  DefaultObservable,\n  HasCentralizedListener,\n  ICentralizedListener,\n  MockCentralizedListener,\n  NodeStoreItem,\n  Observer,\n} from '../../../../utils/pattern';\nimport { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { Side } from '../../../node-interface';\nimport { NodeInput, NodeSetting, SettingType, Type } from '../../../node-io';\nimport { DependantConnectionNode, DependantConnectionNodeMixin } from '../connection-node-mixin';\nimport {\n  DataPointFlowHandler,\n  HasDataPointFlowHandler,\n  HasPointOutputObservers,\n  MockHasPointOutputObservers,\n  PointNodeMixin,\n} from '../model/point-node';\nimport {\n  BACNET_SERVER_NODE_TYPE,\n  PUSH_BACNET_POINT_VALUE,\n  REGISTER_BACNET_POINT,\n  UNREGISTER_BACNET_POINT,\n  UPDATE_BACNET_POINT,\n} from './bacnet-server-node';\nimport { BacnetPoint, BacnetPointCreator, PointKind } from './core/bacnet-model';\n\nclass BACnetServerPointNode extends DependantConnectionNodeMixin(PointNodeMixin(Node))\n  implements HasPointOutputObservers<BacnetPoint>, HasDataPointFlowHandler<BacnetPoint>, DataPointFlowHandler<BacnetPoint>,\n    DependantConnectionNode, HasCentralizedListener {\n  constructor() {\n    super();\n    this.title = 'BACnet Server Point';\n    this.description =\n      'Bacnet-server-point nodes should be added within a bacnet-server container node. ' +\n      'BACnet point details should be set in settings. BACnet point settings include ID, Type, and Name.';\n    this.mixinEnableInputSetting();\n    this.mixinConnectionStatusOutput();\n    this.addInputWithSettings('point-id', Type.NUMBER, 1, 'BACnet Object Id');\n    this.settings['point-kind'] = NodeSetting.create({\n      description: 'BACnet Object Type',\n      type       : SettingType.DROPDOWN,\n      config     : { items: PointKind.items() },\n      value      : PointKind.ANALOG_INPUT.enumKey,\n    });\n    this.addInputWithSettings('point-name', Type.STRING, 'bacnet-point', 'BACnet Point Name');\n    this.setSettingsConfig(this.mixinPointValueInputOutput());\n  }\n\n  flowHandler(): DataPointFlowHandler<BacnetPoint> {\n    return this;\n  }\n\n  listener(): ICentralizedListener {\n    return MockCentralizedListener.cast(this.getParentNode());\n  }\n\n  pointObservers(): Observer<PointOutput<BacnetPoint>>[] {\n    return [...super.pointObservers(),\n            ...MockHasPointOutputObservers.cast(this.getParentNode()).pointObservers()];\n  }\n\n  notifyOutput(point: BacnetPoint, observers: Observer<PointOutput<BacnetPoint>>[]): void {\n    let cp = this.initializePointBySettingObject() ?? point;\n    if (isNull(cp)) {\n      return;\n    }\n    point.pointValue = isNull(point?.pointValue) ? PointValueCreator.by() : point?.pointValue.merge(cp.pointValue);\n    this.settings[this.modelSettingKey()].value = point;\n    new DefaultObservable(observers).notify({ point: point, connStatus: { status: this.getConnectionStatus() } });\n  }\n\n  onRemoved() {\n    if (this.listener() === MockCentralizedListener.LISTENER) {\n      return;\n    }\n    let event = {\n      action : UNREGISTER_BACNET_POINT,\n      payload: this.createPayload(this.initializePointBySettingObject()),\n    };\n    this.listener().listen(event);\n  }\n\n  handleOnUpdate(current: BacnetPoint, prev?: BacnetPoint): BacnetPoint {\n    if (this.side !== Side.server || (!prev?.objectInstance && !current?.objectInstance)) {\n      return null;\n    }\n    let payload = this.createPayload(current);\n    if (!prev || this.getConnectionStatus().isError()) {\n      this.listener().listen({ action: REGISTER_BACNET_POINT, payload });\n    } else if (!current.mightOnlyValueChanged(prev)) {\n      if (!current.equals(prev)) {\n        current.pointValue = PointValueCreator.by();\n      }\n      payload.prev = this.createPayload(prev);\n      this.listener().listen({ action: UPDATE_BACNET_POINT, payload });\n    }\n    if (!current.enabled || (isNull(current?.pointValue?.presentValue) &&\n                             (prev && !current.equals(prev) || isNull(prev?.pointValue?.presentValue)))) {\n      return current;\n    }\n    let cov = current.pointValue.changedOfValue(prev?.pointValue);\n    if (cov) {\n      payload.data.pointValue = cov;\n    }\n    current.pointValue = this.listener().listen({ action: PUSH_BACNET_POINT_VALUE, payload });\n    return current;\n  }\n\n  initializePointBySettingObject(settings?: { [name: string]: NodeSetting }): BacnetPoint {\n    let st = (settings ?? this.settings) as { [name: string]: NodeSetting };\n    return BacnetPointCreator.from(st[this.modelSettingKey()].value);\n  }\n\n  initializePointBySettingInput(settings?: { [name: string]: NodeSetting }): BacnetPoint {\n    let st = (settings ?? this.settings) as { [name: string]: NodeSetting };\n    let kind = <PointKind>PointKind.enumValueOf(st['point-kind'].value);\n    return BacnetPointCreator.by(this.isEnabled(), st['point-id'].value, kind, st['point-name'].value,\n                                 this.createPointValue(st));\n  }\n\n  reEvaluateSettingByInput(inputs: { [p: number]: NodeInput }, settings: { [name: string]: NodeSetting }) {\n    settings['point-id'].value = inputs[1].updated ? inputs[1].data : settings['point-id'].value;\n    settings['point-name'].value = inputs[2].updated ? inputs[2].data : settings['point-name'].value;\n    super.reEvaluateSettingByInput(inputs, settings);\n  }\n\n  onReceiveMessage(point: BacnetPoint): void {\n    this.notifyOutput(point, this.pointObservers());\n  }\n\n  protected statusOutputIdx(): number {\n    return 0;\n  }\n\n  protected enableDescription(): string {\n    return 'Enable BACnet Point';\n  }\n\n  protected modelSettingKey(): string {\n    return 'bp';\n  }\n\n  protected valueInputIdx(): number {\n    return 3;\n  }\n\n  protected valueOutputIdx(): number {\n    return this.errorOutputIdx() + 1;\n  }\n\n  protected computeTitle(): string {\n    let kind = <PointKind>PointKind.enumValueOf(this.settings['point-kind'].value);\n    return `BACnet Point (ObjectType: ${kind.label}, ObjectId: ${this.settings['point-id'].value})`;\n  }\n\n  private createPayload(point: BacnetPoint) {\n    return {\n      identifier: point?.identifier(),\n      enabled   : point?.enabled,\n      data      : point,\n      nodeId    : IdGenerator.createNodeId(this.cid, this.id),\n      callback  : (p: BacnetPoint) => this.onReceiveMessage(p),\n    } as NodeStoreItem;\n  }\n}\n\nContainer.registerNodeType('protocols/bacnet-server/bacnet-server-point', BACnetServerPointNode,\n                           BACNET_SERVER_NODE_TYPE);\n","import { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport TimeUtils from '../../../utils/time-utils';\n\ninterface LoraSensor {\n  id: string;\n  voltage: number;\n  rssi: number;\n  snr: number;\n  nodeName: string;\n  topic: {}\n  lastMessage: any\n}\ninterface AASensor extends LoraSensor {\n  pulses: number;\n  a1: number;\n  a2: number;\n  a3: number;\n}\ninterface B0Sensor extends LoraSensor {\n  temp: number;\n  pressure: number;\n  humidity: number;\n}\ninterface B1Sensor extends B0Sensor {\n  lux: number;\n}\ninterface B2Sensor extends B1Sensor {\n  movement: boolean;\n}\n\nenum SensorType {\n  Droplet = 'Droplet',\n  MicroEdge = 'MicroEdge',\n}\n\nexport class LoraSensorDecoderNode extends Node {\n  watchdogDelay = 3600000;\n  nodeID = '';\n  timeoutFunc;\n  sensorType: string;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/lora-raw\"][\"lora-sensor-decoder\"].title;\n    this.description = NODE_INFO[\"protocols/lora-raw\"][\"lora-sensor-decoder\"].description;\n    this.settings['sensorType'] = NodeSetting.create({\n      description: 'LORA Sensor Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: SensorType.Droplet, text: SensorType.Droplet },\n          { value: SensorType.MicroEdge, text: SensorType.MicroEdge },\n        ],\n      },\n      value: SensorType.Droplet,\n    });\n    this.addInput('rawInput', Type.STRING);\n    this.addInputWithSettings('nodeID', Type.STRING, '', 'NodeID');\n    this.addInputWithSettings('topic', Type.STRING, '', 'Set topic for use elsewhere in wires');\n    this.addOutput('json', Type.STRING);\n    this.addOutput('id', Type.STRING);\n    this.addOutput('voltage', Type.NUMBER);\n    this.addOutput('rssi', Type.NUMBER);\n    this.addOutput('lowBatteryAlm', Type.BOOLEAN);\n    this.addOutput('watchdog', Type.BOOLEAN);\n    this.addOutput('temperature', Type.NUMBER);\n    this.addOutput('humidity', Type.NUMBER);\n    this.addOutput('lux', Type.NUMBER);\n    this.addOutput('pressure', Type.NUMBER);\n    this.addOutput('movement', Type.BOOLEAN);\n    this.settings['microEdgeA1'] = NodeSetting.create({\n      description: 'MicroEdge a1 Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: '10k', text: '10k Thermistor' },\n          { value: '10vdc', text: '0-10vdc' },\n          { value: 'digital', text: 'Digital' },\n        ],\n      },\n      value: '10vdc',\n    });\n    this.settings['microEdgeA2'] = NodeSetting.create({\n      description: 'MicroEdge a2 Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: '10k', text: '10k Thermistor' },\n          { value: '10vdc', text: '0-10vdc' },\n          { value: 'digital', text: 'Digital' },\n        ],\n      },\n      value: '10vdc',\n    });\n    this.settings['microEdgeA3'] = NodeSetting.create({\n      description: 'MicroEdge a3 Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: '10k', text: '10k Thermistor' },\n          { value: '10vdc', text: '0-10vdc' },\n          { value: 'digital', text: 'Digital' },\n        ],\n      },\n      value: '10vdc',\n    });\n    this.settings['battery-warn'] = NodeSetting.create({\n      description: 'Low battery warning voltage',\n      value: 3.5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['watchdog'] = NodeSetting.create({\n      description: 'Watchdog (No message warning) Delay',\n      value: 60,\n      type: SettingType.NUMBER,\n    });\n    this.settings['time'] = NodeSetting.create({\n      description: 'Time',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'minutes',\n    });\n    this.setSettingsConfig({\n      groups: [{ time: {}, watchdog: { weight: 2 } }],\n      conditions: {\n        microEdgeA1: setting => {\n          return setting['sensorType'].value === SensorType.MicroEdge;\n        },\n        microEdgeA2: setting => {\n          return setting['sensorType'].value === SensorType.MicroEdge;\n        },\n        microEdgeA3: setting => {\n          return setting['sensorType'].value === SensorType.MicroEdge;\n        },\n      },\n    });\n  }\n\n  onAdded() {\n    this.sensorType = this.settings['sensorType'].value;\n    if (this.sensorType === SensorType.MicroEdge) {\n      /**\n       * Issue: #552\n       * On frontend side:\n       * Removing this one here, because constructor() and onAdded() function gets called while doing each refresh\n       * And always 'movement' slot (slot number: 10) gets displayed even when it shouldn't\n       * It's because when sensorType === 'MicroEdge', we are replacing slots 6-9 with new one and leaving 0-5 as is,\n       * But we are doing nothing for node 10, so on it displays on frontend side even it doesn't have real value on backend\n       */\n      this.removeOutput(10);\n    }\n    this.clearOutputs();\n    let nodeID = this.getInputData(1).toUpperCase() || '';\n    if (nodeID != this.nodeID) {\n      this.nodeID = nodeID;\n    }\n    this.updateTitle();\n  }\n\n  onInputUpdated() {\n    const sensorType = this.settings['sensorType'].value;\n    let nodeID = this.getInputData(1).toUpperCase() || '';\n    if (nodeID != this.nodeID) {\n      this.nodeID = nodeID;\n      this.updateTitle(); // Update title is also related with nodeID update so\n      this.broadcastTitleToClients();\n      this.clearOutputs();\n      this.resetWatchdog();\n    }\n    let data: string = this.getInputData(0) || '';\n    if (!data) return;\n    else if (data.length % 2 === 1 && (data[data.length - 1] === '\\r' || data[data.length - 1] === '\\n')) {\n      data = data.substring(0, data.length - 1);\n    } else if (data.substring(data.length - 2, data.length) === '\\r\\n') {\n      data = data.substring(0, data.length - 2);\n    }\n\n    if (\n      data.length !== 36 &&\n      data.length !== 44 &&\n      data.substring(2, 4) !== 'AA' &&\n      data.substring(2, 4) !== 'B0' &&\n      data.substring(2, 4) !== 'B1' &&\n      data.substring(2, 4) !== 'B2'\n    ) {\n      return;\n    }\n\n    if (nodeID == data.substring(0, 8) || nodeID == '') {\n      if (\n        sensorType === SensorType.MicroEdge &&\n        data.substring(2, 4) === 'AA' &&\n        (data.length === 44 || data.length === 36)\n      ) {\n        if (this.inputs[0].updated) this.resetWatchdog();\n        this.writeOutputs(this.microEdgeDecode(data));\n      } else if (\n        sensorType === SensorType.Droplet &&\n        data.substring(2, 3) === 'B' &&\n        (data.length === 44 || data.length === 36)\n      ) {\n        if (this.inputs[0].updated) this.resetWatchdog();\n        this.writeOutputs(this.dropletDecode(data));\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    let watchdogTime = this.settings['watchdog'].value;\n    watchdogTime = TimeUtils.timeConvert(watchdogTime, this.settings['time'].value);\n    if (this.watchdogDelay != watchdogTime) {\n      this.resetWatchdog();\n    }\n    this.setOutputs();\n    this.updateNodeOutput();\n    this.onInputUpdated();\n  }\n\n  private writeOutputs(output: LoraSensor) {\n    switch (this.settings['sensorType'].value) {\n      case SensorType.Droplet:\n        this.setOutputData(0, JSON.stringify(output));\n        this.setOutputData(1, output['id'] == null ? null : output['id']);\n        this.setOutputData(2, output['voltage'] == null ? null : output['voltage']);\n        this.setOutputData(3, output['rssi'] == null ? null : output['rssi']);\n        this.setOutputData(4, output['voltage'] < this.settings['battery-warn'].value);\n        this.setOutputData(6, output['temp'] == null ? null : output['temp']);\n        this.setOutputData(7, output['humidity'] == null ? null : output['humidity']);\n        this.setOutputData(8, output['lux'] == null ? null : output['lux']);\n        this.setOutputData(9, output['pressure'] == null ? null : output['pressure']);\n        this.setOutputData(10, output['movement'] == null ? null : output['movement']);\n        break;\n\n      case SensorType.MicroEdge:\n        this.setOutputData(0, JSON.stringify(output));\n        this.setOutputData(1, output['id'] == null ? null : output['id']);\n        this.setOutputData(2, output['voltage'] == null ? null : output['voltage']);\n        this.setOutputData(3, output['rssi'] == null ? null : output['rssi']);\n        this.setOutputData(4, output['voltage'] < this.settings['battery-warn'].value);\n        this.setOutputData(6, output['pulses'] == null ? null : output['pulses']);\n        const microEdgeOutputs = this.MicroEdgeAnalogs([output['a1'], output['a2'], output['a3']]);\n        this.setOutputData(7, microEdgeOutputs[0] == null ? null : microEdgeOutputs[0]);\n        this.setOutputData(8, microEdgeOutputs[1] == null ? null : microEdgeOutputs[1]);\n        this.setOutputData(9, microEdgeOutputs[2] == null ? null : microEdgeOutputs[2]);\n        break;\n    }\n  }\n\n  private MicroEdgeAnalogs(analogInputs) {\n    let output = [];\n    for (var i = 0; i < 3; i++) {\n      if (typeof analogInputs[i] == 'number') {\n        switch (this.settings[`microEdgeA${i + 1}`].value) {\n          case '10k':\n            const Vref = 3.34;\n            const V = (analogInputs[i] / 1024) * Vref;\n            const R0 = 10000;\n            const R = (R0 * V) / (Vref - V);\n            const T0 = 273 + 25;\n            const B = 3850;\n            const T = 1 / (1 / T0 + (1 / B) * Math.log(R / R0));\n            const temp = T - 273.15;\n            output.push(Math.round(temp * 100) / 100);\n            break;\n\n          case '10vdc':\n            output.push((analogInputs[i] / 1024) * 10);\n            break;\n\n          case 'digital':\n            if (analogInputs[i] === undefined || analogInputs[i] >= 1000) {\n              output.push(false);\n            } else {\n              output.push(true);\n            }\n            break;\n        }\n      } else output.push(null);\n    }\n    return output;\n  }\n\n  lastMessageTimeStamp(){\n    return  new Date()\n  }\n\n  microEdgeDecode(data: string): AASensor {\n    const topic = this.getInputData(2)\n    const topicsBuilder = {\n      id : topic+\"/id\",\n      pulses: topic+\"/pulses\",\n      voltage: topic+\"/voltage\",\n      a1: topic+\"/a1\",\n      a2: topic+\"/a2\",\n      a3: topic+\"/a3\",\n      rssi: topic+\"/rssi\",\n      snr: topic+\"/snr\"\n    }\n    let lastMessage = null;\n    lastMessage = this.lastMessageTimeStamp()\n    return {\n      id: data.substring(0, 8),\n      pulses: parseInt(data.substring(8, 16), 16),\n      voltage: parseInt(data.substring(16, 18), 16) / 50,\n      a1: parseInt(data.substring(18, 22), 16),\n      a2: parseInt(data.substring(22, 26), 16),\n      a3: parseInt(data.substring(26, 30), 16),\n      rssi: parseInt(data.substring(data.length - 4, data.length - 2), 16) * -1,\n      snr: parseInt(data.substring(data.length - 2, data.length), 16) / 10,\n      nodeName: this.name,\n      topic: topicsBuilder,\n      lastMessage: lastMessage\n    };\n  }\n\n  dropletDecode(data: string): B0Sensor {\n    const topic = this.getInputData(2)\n    const topicsBuilder = {\n      id : topic+\"/id\",\n      temp: topic+\"/temp\",\n      pressure: topic+\"/pressure\",\n      humidity: topic+\"/humidity\",\n      lux: topic+\"/lux\",\n      movement: topic+\"/movement\",\n      voltage: topic+\"/voltage\",\n      rssi: topic+\"/rssi\",\n      snr: topic+\"/snr\"\n    }\n    let lastMessage = null;\n    lastMessage = this.lastMessageTimeStamp()\n\n    let output: B0Sensor = {\n      id: data.substring(0, 8),\n      temp: parseInt(data.substring(10, 12) + data.substring(8, 10), 16) / 100,\n      pressure: parseInt(data.substring(14, 16) + data.substring(12, 14), 16) / 10,\n      humidity: parseInt(data.substring(16, 18), 16) % 128,\n      voltage: parseInt(data.substring(22, 24), 16) / 50,\n      rssi: parseInt(data.substring(data.length - 4, data.length - 2), 16) * -1,\n      snr: parseInt(data.substring(data.length - 2, data.length), 16) / 10,\n      nodeName: this.name,\n      topic: topicsBuilder,\n      lastMessage: lastMessage\n    };\n    if (data.substring(2, 4) === 'B1' || data.substring(2, 4) === 'B2') {\n      const b1Sensor: B1Sensor = output as B1Sensor;\n      b1Sensor.lux = parseInt(data.substring(20, 22) + data.substring(18, 20), 16);\n      output = b1Sensor;\n      if (data.substring(2, 4) == 'B2') {\n        const b2_sensor: B2Sensor = b1Sensor as B2Sensor;\n        b2_sensor.movement = parseInt(data.substring(16, 18), 16) > 127;\n        output = b2_sensor;\n      }\n    }\n    return output;\n  }\n\n  resetWatchdog() {\n    this.setOutputData(5, false, true);\n    clearInterval(this.timeoutFunc);\n    let watchdogTime = this.settings['watchdog'].value;\n    watchdogTime = TimeUtils.timeConvert(watchdogTime, this.settings['time'].value);\n    this.watchdogDelay = watchdogTime;\n    this.timeoutFunc = setTimeout(() => {\n      this.setOutputData(5, true, true);\n    }, watchdogTime);\n  }\n\n  setOutputs() {\n    const currentSensorType = this.settings['sensorType'].value;\n    if (this.sensorType != currentSensorType) {\n      switch (currentSensorType) {\n        case SensorType.Droplet:\n          this.removeOutput(6);\n          this.removeOutput(7);\n          this.removeOutput(8);\n          this.removeOutput(9);\n          if (this.outputs[10]) this.removeOutput(10);\n          this.addOutput('temperature', Type.NUMBER);\n          this.addOutput('humidity', Type.NUMBER);\n          this.addOutput('lux', Type.NUMBER);\n          this.addOutput('pressure', Type.NUMBER);\n          this.addOutput('movement', Type.BOOLEAN);\n          this.clearOutputs();\n          break;\n\n        case SensorType.MicroEdge:\n          this.removeOutput(6);\n          this.removeOutput(7);\n          this.removeOutput(8);\n          this.removeOutput(9);\n          this.removeOutput(10);\n          if (this.outputs[11]) this.removeOutput(11);\n          this.addOutput('pulses', Type.NUMBER);\n          this.addOutput('a1', Type.NUMBER);\n          this.addOutput('a2', Type.NUMBER);\n          this.addOutput('a3', Type.NUMBER);\n          this.clearOutputs();\n          break;\n      }\n    }\n    if (currentSensorType == SensorType.MicroEdge) {\n      this.outputs[7].name = `a1 (${this.settings['microEdgeA1'].value})`;\n      this.outputs[8].name = `a2 (${this.settings['microEdgeA2'].value})`;\n      this.outputs[9].name = `a3 (${this.settings['microEdgeA3'].value})`;\n    }\n    this.sensorType = currentSensorType;\n    this.updateTitle();\n  }\n\n  updateTitle() {\n    if (this.nodeID) this.title = `Lora Sensor Decoder (${this.sensorType} | ${this.nodeID})`;\n    else this.title = `Lora Sensor Decoder (${this.sensorType} | ALL)`;\n  }\n\n  clearOutputs() {\n    this.setOutputData(0, null);\n    this.setOutputData(1, null);\n    this.setOutputData(2, null);\n    this.setOutputData(3, null);\n    this.setOutputData(4, null);\n    this.setOutputData(5, null);\n    this.setOutputData(6, null);\n    this.setOutputData(7, null);\n    this.setOutputData(8, null);\n    this.setOutputData(9, null);\n    if (this.settings['sensorType'].value === SensorType.Droplet) this.setOutputData(10, null);\n  }\n}\nContainer.registerNodeType('protocols/lora-raw/lora-sensor-decoder', LoraSensorDecoderNode);\n","import { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport { LORA_DATA_TYPE_LENGTHS, LORA_DATA_TYPE_NAMES } from './lora-two-way-in';\n\nexport class LoRaRawTwoWayOutput extends Node {\n  payloadDefinition: Array<LORA_DATA_TYPE_NAMES> = [];\n  inputsUpdated: Array<boolean> = [];\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/lora-raw\"][\"lora-raw-two-way-out\"].title;\n    this.description = NODE_INFO[\"protocols/lora-raw\"][\"lora-raw-two-way-out\"].description;\n    this.settings['enable'] = NodeSetting.create({\n      description: 'enable',\n      type: SettingType.BOOLEAN,\n      value: false,\n    });\n    this.settings['senderId'] = NodeSetting.create({\n      description: 'sender Id',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n    this.settings['port'] = NodeSetting.create({\n      description: 'port number',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n    // this.settings['sendUpdatedOnly'] = {\n    //   description: 'send only updated inputs',\n    //   type: SettingType.BOOLEAN,\n    //   value: true,\n    // },\n    this.settings['types'] = NodeSetting.create({\n      description: 'Types',\n      type: SettingType.READONLY,\n      value: 'INT8, INT16, INT32, FLOAT',\n      // value: 'INT8, UINT8, INT16, UINT16, INT32, UINT32, FLOAT',\n    });\n    this.settings['definition'] = NodeSetting.create({\n      description: 'payload definition (JSON)',\n      type: SettingType.STRING,\n      value: '',\n    });\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('output', Type.ANY);\n  }\n\n  init() {\n    this.updateOutputs();\n  }\n\n  onAdded() {\n    this.payloadDefinition = this.stringToDataTypes(this.settings['definition'].value);\n    this.inputsUpdated = new Array<boolean>(this.payloadDefinition.length);\n    this.inputsUpdated.fill(false);\n  }\n\n  onInputUpdated() {\n    for (let i = 1; i < this.getInputsCount(); i++) {\n      if (this.inputs[i].updated) {\n        this.inputsUpdated[i - 1] = true;\n      }\n    }\n    if (this.settings['enable'].value === false) return;\n    if (!this.inputs[0].updated || this.getInputData(0) === false) {\n      return;\n    }\n\n    // PARSING\n    const parseError = msg => {\n      this.setOutputData(1, 'parse error: ' + msg);\n    };\n\n    const checkInputAndType = (value, type) => {\n      let isOk = true;\n      switch (type) {\n        case LORA_DATA_TYPE_NAMES.INT8:\n          isOk = value >= -128 && value <= 127;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT8:\n          isOk = value >= 0 && value <= 0xff;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT16:\n          isOk = value >= -32768 && value <= 32767;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT16:\n          isOk = value >= 0 && value <= 0xffff;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT32:\n          isOk = value >= -2147483648 && value <= 2147483647;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT32:\n          isOk = value >= 0 && value <= 0xffffffff;\n          break;\n      }\n      return isOk;\n    };\n\n    // if (!this.settings['sendUpdatedOnly'].value) {\n    //   this.inputsUpdated.fill(true);\n    // }\n    this.inputsUpdated.fill(true);\n    let data_lengths = 0;\n    for (let i = 0; i < this.payloadDefinition.length; i++) {\n      if (this.inputsUpdated[i]) {\n        data_lengths += LORA_DATA_TYPE_LENGTHS[this.payloadDefinition[i]] + 1;\n      }\n    }\n    if (data_lengths === 0) {\n      parseError('No input updates');\n      return;\n    }\n    let buffer = Buffer.alloc(data_lengths + 2);\n\n    buffer.writeUInt8(this.settings['senderId'].value, 0);\n    buffer.writeUInt8(this.settings['port'].value, 1);\n\n    let point = 0;\n    for (let i = 2; i < buffer.length; ) {\n      if (!this.inputsUpdated[point]) {\n        point++;\n        continue;\n      }\n      let type = this.payloadDefinition[point];\n      let value = this.getInputData(point + 1);\n\n      if (!checkInputAndType(value, type)) {\n        parseError('invalid value input ' + point);\n        return;\n      }\n\n      buffer.writeUInt8(point, i++);\n\n      switch (type) {\n        case LORA_DATA_TYPE_NAMES.INT8:\n          buffer.writeInt8(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT8:\n          buffer.writeUInt8(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT16:\n          buffer.writeInt16LE(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT16:\n          buffer.writeUInt16LE(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT32:\n          buffer.writeInt32LE(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT32:\n          buffer.writeUInt32LE(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.FLOAT:\n          buffer.writeFloatLE(value, i);\n          break;\n      }\n\n      i += LORA_DATA_TYPE_LENGTHS[type];\n      point++;\n    }\n\n    this.setOutputData(1, null);\n    this.setOutputData(0, buffer);\n\n    this.inputsUpdated.fill(false);\n  }\n\n  onAfterSettingsChange() {\n    this.payloadDefinition = this.updateOutputs();\n    this.setOutputData(1, null);\n    this.onInputUpdated();\n  }\n\n  private updateOutputs() {\n    const data = this.stringToDataTypes(this.settings['definition'].value);\n    if (this.payloadDefinition.length !== data.length) {\n      const inputsCount = this.getInputsCount();\n      for (let i = 1; i < inputsCount; i++) {\n        this.removeInput(i);\n      }\n\n      this.inputsUpdated = new Array<boolean>(data.length);\n      for (let i = 0; i < data.length; i++) {\n        this.addInput(i.toString(), Type.NUMBER);\n        this.inputsUpdated[i] = false;\n      }\n    }\n    return data;\n  }\n\n  stringToDataTypes(str) {\n    const data = str\n      .toUpperCase()\n      .replace(/ /g, '')\n      .split(',')\n      .filter(x => x !== '');\n\n    if (data && data.length) {\n      for (let i = 0; i < data.length; i++) {\n        if (LORA_DATA_TYPE_NAMES[data[i]] === undefined) {\n          this.setOutputData(1, 'settings parse error');\n          return undefined;\n        }\n        data[i] = LORA_DATA_TYPE_NAMES[data[i]];\n      }\n    }\n    return data;\n  }\n}\nContainer.registerNodeType('protocols/lora-raw/lora-raw-two-way-out', LoRaRawTwoWayOutput);\n","import { Node } from '../../../node';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport { Container } from '../../../container';\nimport Utils from '../../../utils'\nimport * as loraRawCrypt from './lora-raw-crypt';\n\nenum LORA_DATA_TYPE_NAMES {\n  INT8 = 0,\n  UINT8,\n  INT16,\n  UINT16,\n  INT32,\n  UINT32,\n  FLOAT,\n}\n\nconst LORA_DATA_TYPE_LENGTHS = [\n  1, // INT8\n  1, // UINT8\n  2, // INT16\n  2, // UINT16\n  4, // INT32\n  4, // UINT32\n  4, // FLOAT\n];\n\nexport class LoRaRawPointsInput extends Node {\n  payloadDefinition: Array<LORA_DATA_TYPE_NAMES> = [];\n  addressPrefix: string = 'FFFFFF';\n  address: string = '';\n  keyBuffer: Buffer = null;\n  nonce = 0;\n  outputOffset = 3; // 3 static outputs before dynamic outputs\n\n  constructor() {\n    super();\n    this.title = `Nube LoRaRAW Points In`;\n    this.description = 'This node parses Nubes LoRa Points protocol payload';\n    this.settings['enable'] = NodeSetting.create({\n      description: 'enable',\n      type: SettingType.BOOLEAN,\n      value: true,\n    });\n    this.settings['senderId'] = NodeSetting.create({\n      description: 'sender Id [0-254]',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n    this.settings['port'] = NodeSetting.create({\n      description: 'port number [0-254]',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n    this.settings['types'] = NodeSetting.create({\n      description: 'Types # = [8, 16, 23]',\n      type: SettingType.READONLY,\n      // value: 'INT8, UINT8, INT16, UINT16, INT32, UINT32, FLOAT',\n      value: 'INT#, UINT#, FLOAT',\n    });\n    this.settings['definition'] = NodeSetting.create({\n      description: 'payload definition (\\',\\' separated)',\n      type: SettingType.STRING,\n      value: '',\n    });\n    this.settings['key'] = NodeSetting.create({\n      description: 'encryption key (hex)',\n      type: SettingType.STRING,\n      value: '',\n    });\n    this.settings['other_group'] = NodeSetting.create({\n      description: 'Advanced',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['addrPrefix'] = NodeSetting.create({\n      description: 'Address Prefix [6]',\n      type: SettingType.STRING,\n      value: 'FFFFFF',\n    });\n    this.settings['nonceLen'] = NodeSetting.create({\n      description: 'Nonce Length',\n      type: SettingType.NUMBER,\n      value: 2,\n    });\n    this.settings['frameCounterEnabled'] = NodeSetting.create({\n      description: 'frame counters (**TBA**)',\n      type: SettingType.BOOLEAN,\n      value: false,\n    });\n\n    this.addInput('rawInput', Type.STRING);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('rssi', Type.NUMBER);\n    this.addOutput('snr', Type.NUMBER);\n  }\n\n  init() {\n    this.updateSettings();\n    this.updateOutputs(this.payloadDefinition);\n  }\n\n  onAdded() {\n    this.updateSettings();\n  }\n\n  onInputUpdated() {\n    if (this.keyBuffer === null) {\n      return;\n    }\n    let data: string = this.getInputData(0) || '';\n    if (this.settings['enable'].value === false) return;\n    if (!data || data.length < (24 * 2) || data.substring(0, 8).toUpperCase() !== this.address) {\n      return;\n    }\n\n    // remove newline\n    if (data.substring(data.length - 2, data.length) === '\\r\\n') {\n      data = data.substring(0, data.length - 2);\n    } else if (data.length % 2 === 1 && (data[data.length - 1] === '\\n' || data[data.length - 1] === '\\r')) {\n      data = data.substring(0, data.length - 1);\n    }\n\n\n\n    let encryptedBuffer = Buffer.from(data, 'hex');\n    let [dataBuffer, err] = loraRawCrypt.loraRawDecryptBuffer(encryptedBuffer.slice(0, 4), encryptedBuffer.slice(4, encryptedBuffer.length - 2), this.keyBuffer);\n    if (err !== loraRawCrypt.LORA_RAW_ERROR.LRERR_NOERR) {\n      this.setOutputData(0, 'LoRaRaw Crypt ERR: ' + err);\n      return;\n    }\n    let rssi = encryptedBuffer.readInt8(encryptedBuffer.length - 2);\n    let snr = encryptedBuffer.readUInt8(encryptedBuffer.length - 1);\n\n\n    let startPos = this.settings['nonceLen'].value // skip nonce\n    const port = dataBuffer[startPos];\n    if (port !== this.settings['port'].value) {\n      return;\n    }\n\n    // PARSING\n\n    const parseError = msg => {\n      this.setOutputData(0, 'parse error: ' + msg);\n    };\n\n    // convert hex string to buffer\n    let buffer = dataBuffer.slice(startPos + 1); //skip port\n    let outputValues = new Array<number>(this.payloadDefinition.length);\n    let pointParsed = new Array<boolean>(this.payloadDefinition.length);\n    pointParsed.fill(false);\n\n    let i = 0;\n    for (let pointCount = 0; pointCount < this.payloadDefinition.length; pointCount++) {\n      let point = buffer.readUInt8(i++);\n      let type_length = 0;\n\n      if (point >= this.payloadDefinition.length) {\n        parseError('invalid point ' + point);\n        return;\n      }\n      if (pointParsed[point]) {\n        parseError('Bad payload. Point already parsed: ' + point);\n        return;\n      }\n\n      type_length = LORA_DATA_TYPE_LENGTHS[this.payloadDefinition[point]];\n\n      if (buffer.length - i < type_length) {\n        parseError('invalid length');\n        return;\n      }\n\n      switch (this.payloadDefinition[point]) {\n        case LORA_DATA_TYPE_NAMES.INT8:\n          outputValues[point] = buffer.readInt8(i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT8:\n          outputValues[point] = buffer.readUInt8(i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT16:\n          outputValues[point] = buffer.readInt16LE(i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT16:\n          outputValues[point] = buffer.readUInt16LE(i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT32:\n          outputValues[point] = buffer.readInt32LE(i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT32:\n          outputValues[point] = buffer.readUInt32LE(i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.FLOAT:\n          outputValues[point] = buffer.readFloatLE(i);\n          break;\n      }\n      pointParsed[point] = true;\n      i += type_length;\n    }\n\n    for (let i = 0; i < outputValues.length; i++) {\n      this.setOutputData(i + this.outputOffset, outputValues[i]);\n    }\n    this.setOutputData(1, rssi);\n    this.setOutputData(2, snr);\n    this.setOutputData(0, null);\n  }\n\n  onAfterSettingsChange() {\n    if (!this.updateSettings()) {\n      return;\n    }\n    this.updateOutputs(this.payloadDefinition);\n    this.onInputUpdated();\n  }\n\n  private updateSettings() {\n    this.settings['senderId'].value = Utils.clamp(this.settings['senderId'].value, 0, 254);\n    this.settings['port'].value = Utils.clamp(this.settings['port'].value, 0, 254);\n    this.settings['nonceLen'].value = Utils.clamp(this.settings['nonceLen'].value, 1, 4);\n    this.payloadDefinition = this.stringToDataTypes(this.settings['definition'].value);\n    let addrPrefix = this.settings['addrPrefix'].value;\n    this.addressPrefix = addrPrefix && addrPrefix.length === 6 ? addrPrefix : 'FFFFFF';\n    this.address = this.addressPrefix + ('0' + this.settings['senderId'].value.toString(16)).substr(-2);\n    this.address = this.address.toUpperCase();\n    if (this.settings['key'].value.length !== 32) {\n      this.setOutputData(0, 'invalid key');\n      this.keyBuffer = null;\n      return false;\n    }\n    this.keyBuffer = Buffer.from(this.settings['key'].value, 'hex');\n    this.setOutputData(0, null);\n    return true;\n  }\n\n  private updateOutputs(data) {\n    if (this.getOutputsCount() - this.outputOffset !== data.length) {\n      const outputsCount = this.getOutputsCount();\n      for (let i = this.outputOffset; i < outputsCount; i++) {\n        this.removeOutput(i);\n      }\n      for (let i = 0; i < data.length; i++) {\n        this.addOutput(i.toString(), Type.NUMBER);\n      }\n      this.updateNodeOutput();\n    }\n  }\n\n  private stringToDataTypes(str) {\n    const data = str\n      .toUpperCase()\n      .replace(/ /g, '')\n      .split(',')\n      .filter(x => x !== '');\n\n    if (data && data.length) {\n      for (let i = 0; i < data.length; i++) {\n        if (LORA_DATA_TYPE_NAMES[data[i]] === undefined) {\n          this.setOutputData(0, 'settings parse error');\n          return undefined;\n        }\n        data[i] = LORA_DATA_TYPE_NAMES[data[i]];\n      }\n    }\n    return data;\n  }\n}\nContainer.registerNodeType('protocols/lora-raw-v2/lora-raw-points-in', LoRaRawPointsInput);\n\n\n//////////////////////////////////////////////////////////////////////////////////////////////\n\n//////////////////////////////////////////////////////////////////////////////////////////////\n\n\nexport class LoRaRawPointsOutput extends Node {\n  payloadDefinition: Array<LORA_DATA_TYPE_NAMES> = [];\n  addressPrefix: string = 'FFFFFF';\n  address: Buffer = null;\n  keyBuffer: Buffer = null;\n  nonce = 0;\n  // inputsUpdated: Array<boolean> = [];\n\n  errorOutputIndex: number = 1;\n\n  constructor() {\n    super();\n    this.title = `Nube LoRaRAW Points Out`;\n    this.description = 'This node compiles points to Nubes LoRa Points protocol';\n    this.settings['enable'] = NodeSetting.create({\n      description: 'enable',\n      type: SettingType.BOOLEAN,\n      value: true,\n    });\n    // this.settings['sendUpdatedOnly'] = NodeSetting.create({\n    //   description: 'send only updated inputs',\n    //   type: SettingType.BOOLEAN,\n    //   value: true,\n    // },\n    this.settings['enable'] = NodeSetting.create({\n      description: 'enable',\n      type: SettingType.BOOLEAN,\n      value: true,\n    });\n    this.settings['senderId'] = NodeSetting.create({\n      description: 'sender Id [0-254]',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n    this.settings['port'] = NodeSetting.create({\n      description: 'port number [0-254]',\n      type: SettingType.NUMBER,\n      value: 0,\n    });\n    this.settings['types'] = NodeSetting.create({\n      description: 'Types ( # = [8, 16, 23] )',\n      type: SettingType.READONLY,\n      // value: 'INT8, UINT8, INT16, UINT16, INT32, UINT32, FLOAT',\n      value: 'INT#, UINT#, FLOAT',\n    });\n    this.settings['definition'] = NodeSetting.create({\n      description: 'payload definition (\\',\\' separated)',\n      type: SettingType.STRING,\n      value: '',\n    });\n    this.settings['key'] = NodeSetting.create({\n      description: 'encryption key (hex)',\n      type: SettingType.STRING,\n      value: '',\n    });\n    this.settings['other_group'] = NodeSetting.create({\n      description: 'Advanced',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['addrPrefix'] = NodeSetting.create({\n      description: 'Address Prefix [6]',\n      type: SettingType.STRING,\n      value: 'FFFFFF',\n    });\n    this.settings['nonceLen'] = NodeSetting.create({\n      description: 'Nonce Length',\n      type: SettingType.NUMBER,\n      value: 2,\n    });\n    this.settings['frameCounterEnabled'] = NodeSetting.create({\n      description: 'frame counters (**TBA**)',\n      type: SettingType.BOOLEAN,\n      value: false,\n    });\n\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('output', Type.ANY);\n    this.addOutput('error', Type.STRING);\n  }\n\n  init() {\n    this.updateSettings();\n    this.updateInputs(this.payloadDefinition);\n  }\n\n  onAdded() {\n    this.updateSettings();\n    // this.inputsUpdated = new Array<boolean>(this.payloadDefinition.length);\n    // this.inputsUpdated.fill(false);\n  }\n\n  onInputUpdated() {\n    // for (let i = 1; i < this.getInputsCount(); i++) {\n    //   if (this.inputs[i].updated) {\n    //     this.inputsUpdated[i - 1] = true;\n    //   }\n    // }\n    if (this.settings['enable'].value === false) return;\n    if (!this.inputs[0].updated || this.getInputData(0) !== true) {\n      return;\n    }\n\n    // PARSING\n    const parseError = msg => {\n      this.setOutputData(this.errorOutputIndex, 'parse error: ' + msg);\n    };\n\n    const checkInputAndType = (value, type) => {\n      let isOk = true;\n      switch (type) {\n        case LORA_DATA_TYPE_NAMES.INT8:\n          isOk = value >= -128 && value <= 127;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT8:\n          isOk = value >= 0 && value <= 0xff;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT16:\n          isOk = value >= -32768 && value <= 32767;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT16:\n          isOk = value >= 0 && value <= 0xffff;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT32:\n          isOk = value >= -2147483648 && value <= 2147483647;\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT32:\n          isOk = value >= 0 && value <= 0xffffffff;\n          break;\n      }\n      return isOk;\n    };\n\n    // if (!this.settings['sendUpdatedOnly'].value) {\n    //   this.inputsUpdated.fill(true);\n    // }\n    // this.inputsUpdated.fill(true);\n    let data_lengths = 0;\n    for (let i = 0; i < this.payloadDefinition.length; i++) {\n      // if (this.inputsUpdated[i]) {\n      data_lengths += LORA_DATA_TYPE_LENGTHS[this.payloadDefinition[i]] + 1;\n      // }\n    }\n    if (data_lengths === 0) {\n      parseError('No input updates');\n      return;\n    }\n\n    let buffer = Buffer.alloc(data_lengths + this.settings['nonceLen'].value + 1);\n\n    const nonceLen = this.settings['nonceLen'].value;\n    if (nonceLen === 1) {\n      buffer.writeUInt8(this.nonce, 0);\n      this.nonce = (this.nonce + 1) & 0xFF;\n    }\n    else if (nonceLen === 2) {\n      buffer.writeUInt16LE(this.nonce, 0);\n      this.nonce = (this.nonce + 1) & 0xFFFF;\n    }\n    else if (nonceLen === 4) {\n      buffer.writeUInt32LE(this.nonce, 0);\n      this.nonce = (this.nonce + 1) & 0xFFFFFFFF;\n    }\n    buffer.writeUInt8(this.settings['port'].value, nonceLen);\n\n    let point = 0;\n    for (let i = nonceLen + 1; i < buffer.length;) {\n      // if (!this.inputsUpdated[point]) {\n      //   point++;\n      //   continue;\n      // }\n      let type = this.payloadDefinition[point];\n      let value = this.getInputData(point + 1);\n\n      if (!checkInputAndType(value, type)) {\n        parseError('invalid value input ' + point);\n        return;\n      }\n\n      buffer.writeUInt8(point, i++);\n\n      switch (type) {\n        case LORA_DATA_TYPE_NAMES.INT8:\n          buffer.writeInt8(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT8:\n          buffer.writeUInt8(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT16:\n          buffer.writeInt16LE(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT16:\n          buffer.writeUInt16LE(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.INT32:\n          buffer.writeInt32LE(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.UINT32:\n          buffer.writeUInt32LE(value, i);\n          break;\n\n        case LORA_DATA_TYPE_NAMES.FLOAT:\n          buffer.writeFloatLE(value, i);\n          break;\n      }\n\n      i += LORA_DATA_TYPE_LENGTHS[type];\n      point++;\n    }\n\n    let [encBuffer, err] = loraRawCrypt.loraRawEncryptBuffer(this.address, buffer, this.keyBuffer);\n    if (err !== loraRawCrypt.LORA_RAW_ERROR.LRERR_NOERR) {\n      this.setOutputData(this.errorOutputIndex, 'LoRaRaw Crypt ERR: ' + err);\n      return;\n    }\n    buffer = Buffer.concat([this.address, encBuffer]);\n\n    this.setOutputData(this.errorOutputIndex, null);\n    this.setOutputData(0, buffer);\n\n    // this.inputsUpdated.fill(false);\n  }\n\n  onAfterSettingsChange() {\n    if (!this.updateSettings()) {\n      return;\n    }\n    this.updateInputs(this.payloadDefinition);\n    this.setOutputData(this.errorOutputIndex, null);\n    this.onInputUpdated();\n  }\n\n  private updateSettings() {\n    this.settings['senderId'].value = Utils.clamp(this.settings['senderId'].value, 0, 254);\n    this.settings['port'].value = Utils.clamp(this.settings['port'].value, 0, 254);\n    this.settings['nonceLen'].value = Utils.clamp(this.settings['nonceLen'].value, 1, 4);\n    this.payloadDefinition = this.stringToDataTypes(this.settings['definition'].value);\n    if (this.settings['key'].value.length !== 32) {\n      this.setOutputData(this.errorOutputIndex, 'invalid key');\n      this.keyBuffer = null;\n      return false;\n    }\n    this.keyBuffer = Buffer.from(this.settings['key'].value, 'hex');\n    let addrPrefix = this.settings['addrPrefix'].value;\n    this.addressPrefix = addrPrefix && addrPrefix.length === 6 ? addrPrefix.toUpperCase() : 'FFFFFF';\n    this.address = Buffer.from(this.addressPrefix + ('0' + this.settings['senderId'].value.toString(16)).substr(-2), 'hex');\n    this.setOutputData(this.errorOutputIndex, null);\n    return true;\n  }\n\n  private updateInputs(data) {\n    if (this.getInputsCount() - 1 !== data.length) {\n      const inputsCount = this.getInputsCount();\n      for (let i = 1; i < inputsCount; i++) {\n        this.removeInput(i);\n      }\n\n      // this.inputsUpdated = new Array<boolean>(data.length);\n      for (let i = 0; i < data.length; i++) {\n        this.addInput(i.toString(), Type.NUMBER);\n        // this.inputsUpdated[i] = false;\n      }\n      this.updateNodeOutput();\n    }\n  }\n\n  private stringToDataTypes(str) {\n    const data = str\n      .toUpperCase()\n      .replace(/ /g, '')\n      .split(',')\n      .filter(x => x !== '');\n\n    if (data && data.length) {\n      for (let i = 0; i < data.length; i++) {\n        if (LORA_DATA_TYPE_NAMES[data[i]] === undefined) {\n          this.setOutputData(this.errorOutputIndex, 'settings parse error');\n          return undefined;\n        }\n        data[i] = LORA_DATA_TYPE_NAMES[data[i]];\n      }\n    }\n    return data;\n  }\n}\nContainer.registerNodeType('protocols/lora-raw-v2/lora-raw-points-out', LoRaRawPointsOutput);\n","var crypto = require('crypto');\nconst aesCmac = require('node-aes-cmac').aesCmac;\n\nconst IV_DEFAULT = Buffer.alloc(16, 0);\n\nexport enum LORA_RAW_ERROR {\n  LRERR_NOERR,\n  LRERR_INVALID_KEY,\n  LRERR_INVALID_IV,\n  LRERR_INVALID_PAYLOAD,\n  LRERR_INVALID_CMAC,\n};\n\n/* Encrypts a payload for the Nube iO LoRaRaw protocol\n*   AES128 with AES-CMAC\n*   Nonce must be handled externally\n*   \n*   Address - Buffer (4 bytes)\n*   payload - Buffer (any size)\n*   key     - Buffer (16 bytes)\n*   iv     - Buffer (16 bytes). All 0 as DEFAULT\n*\n* Returns array[2]\n*   - Buffer (mod16 bytes) on success or null on error\n*   - LORA_RAW_ERROR code\n*/\nexport function loraRawEncryptBuffer(address, payload, key, iv = IV_DEFAULT) {\n  if (key.length !== 16) {\n    return [null, LORA_RAW_ERROR.LRERR_INVALID_KEY];\n  }\n  if (iv.length !== 16) {\n    return [null, LORA_RAW_ERROR.LRERR_INVALID_IV];\n  }\n\n  var cipher = crypto.createCipheriv('aes-128-cbc', key, iv)\n    .setAutoPadding(false);\n\n  if (payload.length % 16) {\n    payload = Buffer.concat([payload, Buffer.alloc(16 - (payload.length % 16), 0)]);\n  }\n  payload = cipher.update(payload);\n  payload = Buffer.concat([payload, cipher.final()]);\n\n  var cmacBlock = Buffer.concat([address, payload.slice(0, 12)], 16);\n  cmacBlock = Buffer.concat([cmacBlock, payload], 16 + payload.length);\n  var cmac = aesCmac(key, cmacBlock, { returnAsBuffer: true });\n\n  payload = Buffer.concat([payload, cmac.slice(0, 4)], payload.length + 4)\n  return [payload, LORA_RAW_ERROR.LRERR_NOERR];\n}\n\n/* Decrypts payload for Nube iO LoRaRaw protocol\n*   AES128 with AES-CMAC\n*   \n*   Address - Buffer (4 bytes)\n*   payload - Buffer (mod16 bytes + 4 bytes for CMAC)\n*   key     - Buffer (16 bytes)\n*   iv     - Buffer (16 bytes). All 0 as DEFAULT\n*\n* Returns array[2]\n*   - Buffer (mod16 bytes) on success or null on error\n*   - LORA_RAW_ERROR code\n*/\nexport function loraRawDecryptBuffer(address, payload, key, iv = IV_DEFAULT) {\n  if (key.length !== 16) {\n    return [null, LORA_RAW_ERROR.LRERR_INVALID_KEY];\n  }\n  if (iv.length !== 16) {\n    return [null, LORA_RAW_ERROR.LRERR_INVALID_IV];\n  }\n\n  if (payload.length % 16 !== 4) {\n    return [null, LORA_RAW_ERROR.LRERR_INVALID_PAYLOAD];\n  }\n\n  var cmacBlock = Buffer.concat([address, payload], 16);\n  cmacBlock = Buffer.concat([cmacBlock, payload], 16 + payload.length);\n  var cmac = aesCmac(key, cmacBlock, { returnAsBuffer: true }).slice(0, 4);\n  if (!cmac.compare(payload, payload.length - 4)) {\n    return [null, LORA_RAW_ERROR.LRERR_INVALID_CMAC];\n  }\n\n  var cipher = crypto.createDecipheriv('aes-128-cbc', key, iv)\n    .setAutoPadding(false);\n\n  payload = cipher.update(payload.slice(0, payload.length - 4));\n  payload = Buffer.concat([payload, cipher.final()]);\n\n  return [payload, LORA_RAW_ERROR.LRERR_NOERR];\n}\n","module.exports = require(\"node-aes-cmac\");","import { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport TimeUtils from '../../../utils/time-utils';\n\nconst crypto = require('crypto');\n\nconst IV_DEFAULT = Buffer.alloc(16, 0);\n\ninterface LoraSensor {\n  id: string;\n  voltage: number;\n  rssi: number;\n  snr: number;\n  nodeName: string;\n  topic: {}\n  lastMessage: any\n}\ninterface AASensor extends LoraSensor {\n  pulses: number;\n  a1: number;\n  a2: number;\n  a3: number;\n}\ninterface B0Sensor extends LoraSensor {\n  temp: number;\n  pressure: number;\n  humidity: number;\n}\ninterface B1Sensor extends B0Sensor {\n  lux: number;\n}\ninterface B2Sensor extends B1Sensor {\n  movement: boolean;\n}\n\nenum SensorType {\n  Droplet = 'Droplet',\n  MicroEdge = 'MicroEdge',\n}\n\nexport class LoraSensorLegacyDecoderNode extends Node {\n  watchdogDelay = 3600000;\n  nodeID = '';\n  timeoutFunc;\n  sensorType: string;\n  keyBuffer: Buffer = null;\n\n  constructor() {\n    super();\n    this.title = `Lora Sensor Legacy Decoder (Droplet | Micro)`;\n    this.description =\n      'LEGACY DECODER. PROVIDES DECRYPTION AS NEW FIRMWARE DOESNT\\n' +\n      'This node is used to decode raw serial input messages to LORA sensor values.\\n' +\n      'It should be used in conjunction with the protocols/serial-connector node.\\n' +\n      'If a nodeID is set, only messages from matching LORA sensors will be output.\\n' +\n      'If no nodeID is set, all valid LORA sensor messages will be output.\\n' +\n      'Outputs that are not present in the raw serial input message will be null.\\n' +\n      'lowBatteryAlm output will be true if the LORA sensor has a battery voltage value less than the Low battery warning voltage setting\\n' +\n      'otherwise it will be false.\\n' +\n      'watchdog output will be true if there has been no valid message from the nodeID LORA sensor for the Watchdog Delay\\n' +\n      'otherwise watchdog output will be false.  Maximum Watchdog Delay setting is 587 hours.\\n' +\n      'This node can be used for decoding Nube Droplet sensors, and Nube MicroEdge sensors.\\n' +\n      'The sensor type can be selected from settings.';\n\n    this.settings['sensorType'] = NodeSetting.create({\n      description: 'LORA Sensor Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: SensorType.Droplet, text: SensorType.Droplet },\n          { value: SensorType.MicroEdge, text: SensorType.MicroEdge },\n        ],\n      },\n      value: 'Droplet',\n    });\n    this.settings['keyHex'] = NodeSetting.create({\n      description: 'Decryption Key (HEX)',\n      value: '',\n      type: SettingType.STRING,\n    });\n    this.addInput('rawInput', Type.STRING);\n    this.addInputWithSettings('nodeID', Type.STRING, '', 'NodeID');\n    this.addInputWithSettings('topic', Type.STRING, '', 'Set topic for use elsewhere in wires');\n    this.addOutput('json', Type.STRING);\n    this.addOutput('id', Type.STRING);\n    this.addOutput('voltage', Type.NUMBER);\n    this.addOutput('rssi', Type.NUMBER);\n    this.addOutput('lowBatteryAlm', Type.BOOLEAN);\n    this.addOutput('watchdog', Type.BOOLEAN);\n    this.addOutput('temperature', Type.NUMBER);\n    this.addOutput('humidity', Type.NUMBER);\n    this.addOutput('lux', Type.NUMBER);\n    this.addOutput('pressure', Type.NUMBER);\n    this.addOutput('movement', Type.BOOLEAN);\n    this.settings['microEdgeA1'] = NodeSetting.create({\n      description: 'MicroEdge a1 Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: '10k', text: '10k Thermistor' },\n          { value: '10vdc', text: '0-10vdc' },\n          { value: 'digital', text: 'Digital' },\n        ],\n      },\n      value: '10vdc',\n    });\n    this.settings['microEdgeA2'] = NodeSetting.create({\n      description: 'MicroEdge a2 Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: '10k', text: '10k Thermistor' },\n          { value: '10vdc', text: '0-10vdc' },\n          { value: 'digital', text: 'Digital' },\n        ],\n      },\n      value: '10vdc',\n    });\n    this.settings['microEdgeA3'] = NodeSetting.create({\n      description: 'MicroEdge a3 Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: '10k', text: '10k Thermistor' },\n          { value: '10vdc', text: '0-10vdc' },\n          { value: 'digital', text: 'Digital' },\n        ],\n      },\n      value: '10vdc',\n    });\n    this.settings['battery-warn'] = NodeSetting.create({\n      description: 'Low battery warning voltage',\n      value: 3.5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['watchdog'] = NodeSetting.create({\n      description: 'Watchdog (No message warning) Delay',\n      value: 60,\n      type: SettingType.NUMBER,\n    });\n    this.settings['time'] = NodeSetting.create({\n      description: 'Time',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'minutes',\n    });\n    this.setSettingsConfig({\n      groups: [{ time: {}, watchdog: { weight: 2 } }],\n      conditions: {\n        microEdgeA1: setting => {\n          return setting['sensorType'].value === SensorType.MicroEdge;\n        },\n        microEdgeA2: setting => {\n          return setting['sensorType'].value === SensorType.MicroEdge;\n        },\n        microEdgeA3: setting => {\n          return setting['sensorType'].value === SensorType.MicroEdge;\n        },\n      },\n    });\n  }\n\n  onAdded() {\n    this.sensorType = this.settings['sensorType'].value;\n    let keyHex = this.settings['keyHex'].value;\n    this.keyBuffer = keyHex && keyHex.length === 32 ? Buffer.from(keyHex, 'hex') : null;\n    if (this.sensorType === SensorType.MicroEdge) {\n      /**\n       * Issue: #552\n       * On frontend side:\n       * Removing this one here, because constructor() and onAdded() function gets called while doing each refresh\n       * And always 'movement' slot (slot number: 10) gets displayed even when it shouldn't\n       * It's because when sensorType === 'MicroEdge', we are replacing slots 6-9 with new one and leaving 0-5 as is,\n       * But we are doing nothing for node 10, so on it displays on frontend side even it doesn't have real value on backend\n       */\n      this.removeOutput(10);\n    }\n    this.clearOutputs();\n    this.updateTitle();\n  }\n\n  onInputUpdated() {\n\n    const sensorType = this.settings['sensorType'].value;\n    let nodeID = this.getInputData(1).toUpperCase() || '';\n    if (nodeID != this.nodeID) {\n      this.nodeID = nodeID;\n      this.updateTitle(); // Update title is also related with nodeID update so\n      this.broadcastTitleToClients();\n      this.clearOutputs();\n      this.resetWatchdog();\n    }\n\n    if (this.keyBuffer === null) {\n      return;\n    }\n    let data: string = this.getInputData(0) || '';\n    if (!data) return;\n    else if (data.length % 2 === 1 && (data[data.length - 1] === '\\r' || data[data.length - 1] === '\\n')) {\n      data = data.substring(0, data.length - 1);\n    } else if (data.substring(data.length - 2, data.length) === '\\r\\n') {\n      data = data.substring(0, data.length - 2);\n    }\n    if (data.length !== 36 && data.length !== 44) {\n      return;\n    }\n    // Added decryption\n    let buffer = Buffer.from(data.substr(0, 32), 'hex');\n    var decipher = crypto.createDecipheriv('aes-128-cbc', this.keyBuffer, IV_DEFAULT)\n      .setAutoPadding(false);\n    buffer = decipher.update(buffer);\n    data = buffer.toString('hex').toUpperCase() + data.substring(32);\n\n    if (\n      data.length !== 36 &&\n      data.length !== 44 &&\n      data.substring(2, 4) !== 'AA' &&\n      data.substring(2, 4) !== 'B0' &&\n      data.substring(2, 4) !== 'B1' &&\n      data.substring(2, 4) !== 'B2'\n    ) {\n      return;\n    }\n\n    if (nodeID == data.substring(0, 8) || nodeID == '') {\n      if (\n        sensorType === SensorType.MicroEdge &&\n        data.substring(2, 4) === 'AA' &&\n        (data.length === 44 || data.length === 36)\n      ) {\n        if (this.inputs[0].updated) this.resetWatchdog();\n        this.writeOutputs(this.microEdgeDecode(data));\n      } else if (\n        sensorType === SensorType.Droplet &&\n        data.substring(2, 3) === 'B' &&\n        (data.length === 44 || data.length === 36)\n      ) {\n        if (this.inputs[0].updated) this.resetWatchdog();\n        this.writeOutputs(this.dropletDecode(data));\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    let keyHex = this.settings['keyHex'].value;\n    this.keyBuffer = keyHex && keyHex.length === 32 ? Buffer.from(keyHex, 'hex') : null;\n    let watchdogTime = this.settings['watchdog'].value;\n    watchdogTime = TimeUtils.timeConvert(watchdogTime, this.settings['time'].value);\n    if (this.watchdogDelay != watchdogTime) {\n      this.resetWatchdog();\n    }\n    this.setOutputs();\n    this.updateNodeOutput();\n    this.onInputUpdated();\n  }\n\n  private writeOutputs(output: LoraSensor) {\n    switch (this.settings['sensorType'].value) {\n      case SensorType.Droplet:\n        this.setOutputData(0, JSON.stringify(output));\n        this.setOutputData(1, output['id'] == null ? null : output['id']);\n        this.setOutputData(2, output['voltage'] == null ? null : output['voltage']);\n        this.setOutputData(3, output['rssi'] == null ? null : output['rssi']);\n        this.setOutputData(4, output['voltage'] < this.settings['battery-warn'].value);\n        this.setOutputData(6, output['temp'] == null ? null : output['temp']);\n        this.setOutputData(7, output['humidity'] == null ? null : output['humidity']);\n        this.setOutputData(8, output['lux'] == null ? null : output['lux']);\n        this.setOutputData(9, output['pressure'] == null ? null : output['pressure']);\n        this.setOutputData(10, output['movement'] == null ? null : output['movement']);\n        break;\n\n      case SensorType.MicroEdge:\n        this.setOutputData(0, JSON.stringify(output));\n        this.setOutputData(1, output['id'] == null ? null : output['id']);\n        this.setOutputData(2, output['voltage'] == null ? null : output['voltage']);\n        this.setOutputData(3, output['rssi'] == null ? null : output['rssi']);\n        this.setOutputData(4, output['voltage'] < this.settings['battery-warn'].value);\n        this.setOutputData(6, output['pulses'] == null ? null : output['pulses']);\n        const microEdgeOutputs = this.MicroEdgeAnalogs([output['a1'], output['a2'], output['a3']]);\n        this.setOutputData(7, microEdgeOutputs[0] == null ? null : microEdgeOutputs[0]);\n        this.setOutputData(8, microEdgeOutputs[1] == null ? null : microEdgeOutputs[1]);\n        this.setOutputData(9, microEdgeOutputs[2] == null ? null : microEdgeOutputs[2]);\n        break;\n    }\n  }\n\n  private MicroEdgeAnalogs(analogInputs) {\n    let output = [];\n    for (var i = 0; i < 3; i++) {\n      if (typeof analogInputs[i] == 'number') {\n        switch (this.settings[`microEdgeA${i + 1}`].value) {\n          case '10k':\n            const Vref = 3.34;\n            const V = (analogInputs[i] / 1024) * Vref;\n            const R0 = 10000;\n            const R = (R0 * V) / (Vref - V);\n            const T0 = 273 + 25;\n            const B = 3850;\n            const T = 1 / (1 / T0 + (1 / B) * Math.log(R / R0));\n            const temp = T - 273.15;\n            output.push(Math.round(temp * 100) / 100);\n            break;\n\n          case '10vdc':\n            output.push((analogInputs[i] / 1024) * 10);\n            break;\n\n          case 'digital':\n            if (analogInputs[i] === undefined || analogInputs[i] >= 1000) {\n              output.push(false);\n            } else {\n              output.push(true);\n            }\n            break;\n        }\n      } else output.push(null);\n    }\n    return output;\n  }\n\n  lastMessageTimeStamp() {\n    return new Date()\n  }\n\n  microEdgeDecode(data: string): AASensor {\n    const topic = this.getInputData(2)\n    const topicsBuilder = {\n      id: topic + \"/id\",\n      pulses: topic + \"/pulses\",\n      voltage: topic + \"/voltage\",\n      a1: topic + \"/a1\",\n      a2: topic + \"/a2\",\n      a3: topic + \"/a3\",\n      rssi: topic + \"/rssi\",\n      snr: topic + \"/snr\"\n    }\n    let lastMessage = null;\n    lastMessage = this.lastMessageTimeStamp()\n    return {\n      id: data.substring(0, 8),\n      pulses: parseInt(data.substring(8, 16), 16),\n      voltage: parseInt(data.substring(16, 18), 16) / 50,\n      a1: parseInt(data.substring(18, 22), 16),\n      a2: parseInt(data.substring(22, 26), 16),\n      a3: parseInt(data.substring(26, 30), 16),\n      rssi: Buffer.from(data.substring(data.length - 4, data.length - 2), 'hex').readInt8(0),\n      // rssi: (parseInt(data.substring(data.length - 4, data.length - 2), 16) & 127) * -1,\n      snr: parseInt(data.substring(data.length - 2, data.length), 16) / 10,\n      nodeName: this.name,\n      topic: topicsBuilder,\n      lastMessage: lastMessage\n    };\n  }\n\n  dropletDecode(data: string): B0Sensor {\n    const topic = this.getInputData(2)\n    const topicsBuilder = {\n      id: topic + \"/id\",\n      temp: topic + \"/temp\",\n      pressure: topic + \"/pressure\",\n      humidity: topic + \"/humidity\",\n      lux: topic + \"/lux\",\n      movement: topic + \"/movement\",\n      voltage: topic + \"/voltage\",\n      rssi: topic + \"/rssi\",\n      snr: topic + \"/snr\"\n    }\n    let lastMessage = null;\n    lastMessage = this.lastMessageTimeStamp()\n\n    let output: B0Sensor = {\n      id: data.substring(0, 8),\n      temp: parseInt(data.substring(10, 12) + data.substring(8, 10), 16) / 100,\n      pressure: parseInt(data.substring(14, 16) + data.substring(12, 14), 16) / 10,\n      humidity: parseInt(data.substring(16, 18), 16) % 128,\n      voltage: parseInt(data.substring(22, 24), 16) / 50,\n      rssi: Buffer.from(data.substring(data.length - 4, data.length - 2), 'hex').readInt8(0),\n      // rssi: (parseInt(data.substring(data.length - 4, data.length - 2), 16) & 127) * -1,\n      snr: parseInt(data.substring(data.length - 2, data.length), 16) / 10,\n      nodeName: this.name,\n      topic: topicsBuilder,\n      lastMessage: lastMessage\n    };\n    if (data.substring(2, 4) === 'B1' || data.substring(2, 4) === 'B2') {\n      const b1Sensor: B1Sensor = output as B1Sensor;\n      b1Sensor.lux = parseInt(data.substring(20, 22) + data.substring(18, 20), 16);\n      output = b1Sensor;\n      if (data.substring(2, 4) == 'B2') {\n        const b2_sensor: B2Sensor = b1Sensor as B2Sensor;\n        b2_sensor.movement = parseInt(data.substring(16, 18), 16) > 127;\n        output = b2_sensor;\n      }\n    }\n    return output;\n  }\n\n  resetWatchdog() {\n    this.setOutputData(5, false, true);\n    clearInterval(this.timeoutFunc);\n    let watchdogTime = this.settings['watchdog'].value;\n    watchdogTime = TimeUtils.timeConvert(watchdogTime, this.settings['time'].value);\n    this.watchdogDelay = watchdogTime;\n    this.timeoutFunc = setTimeout(() => {\n      this.setOutputData(5, true, true);\n    }, watchdogTime);\n  }\n\n  setOutputs() {\n    const currentSensorType = this.settings['sensorType'].value;\n    if (this.sensorType != currentSensorType) {\n      switch (currentSensorType) {\n        case SensorType.Droplet:\n          this.removeOutput(6);\n          this.removeOutput(7);\n          this.removeOutput(8);\n          this.removeOutput(9);\n          if (this.outputs[10]) this.removeOutput(10);\n          this.addOutput('temperature', Type.NUMBER);\n          this.addOutput('humidity', Type.NUMBER);\n          this.addOutput('lux', Type.NUMBER);\n          this.addOutput('pressure', Type.NUMBER);\n          this.addOutput('movement', Type.BOOLEAN);\n          this.clearOutputs();\n          break;\n\n        case SensorType.MicroEdge:\n          this.removeOutput(6);\n          this.removeOutput(7);\n          this.removeOutput(8);\n          this.removeOutput(9);\n          this.removeOutput(10);\n          if (this.outputs[11]) this.removeOutput(11);\n          this.addOutput('pulses', Type.NUMBER);\n          this.addOutput('a1', Type.NUMBER);\n          this.addOutput('a2', Type.NUMBER);\n          this.addOutput('a3', Type.NUMBER);\n          this.clearOutputs();\n          break;\n      }\n    }\n    if (currentSensorType == SensorType.MicroEdge) {\n      this.outputs[7].name = `a1 (${this.settings['microEdgeA1'].value})`;\n      this.outputs[8].name = `a2 (${this.settings['microEdgeA2'].value})`;\n      this.outputs[9].name = `a3 (${this.settings['microEdgeA3'].value})`;\n    }\n    this.sensorType = currentSensorType;\n    this.updateTitle();\n  }\n\n  updateTitle() {\n    if (this.nodeID) this.title = `Lora Sensor Decoder (${this.sensorType} | ${this.nodeID})`;\n    else this.title = `Lora Sensor Decoder (${this.sensorType} | ALL)`;\n  }\n\n  clearOutputs() {\n    this.setOutputData(0, null);\n    this.setOutputData(1, null);\n    this.setOutputData(2, null);\n    this.setOutputData(3, null);\n    this.setOutputData(4, null);\n    this.setOutputData(5, null);\n    this.setOutputData(6, null);\n    this.setOutputData(7, null);\n    this.setOutputData(8, null);\n    this.setOutputData(9, null);\n    if (this.settings['sensorType'].value === SensorType.Droplet) this.setOutputData(10, null);\n  }\n}\nContainer.registerNodeType('protocols/lora-raw-v2/lora-raw-sensor-decoder-legacy', LoraSensorLegacyDecoderNode);\n","import { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport { NODE_INFO } from '../../../node-info';\n\nlet ModbusRTU = require('modbus-serial');\n\n// guide and code for converting modbus data types\n//https://github.com/ioBroker/ioBroker.modbus\n\nclass ModbusServerNode extends Node {\n  tcpServer = null;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/modbus\"][\"modbus-server\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO[\"protocols/modbus\"][\"modbus-server\"].description + `\\n ` +\n      `   \\n ` +\n      `## Point Address\\n ` +\n      `   \\n ` +\n      `### Coils\\n ` +\n      `   \\n ` +\n      ` Valid Coil range is between 0 and 10001. This will allow any modbus client to read and write to those coli ranges\\n ` +\n      `   \\n ` +\n      `### Holding Register\\n ` +\n      `   \\n ` +\n      ` Valid Holding Register range is between 10001 and 19999. This will allow any modbus client to read and write to those coli ranges\\n ` +\n      `   \\n ` +\n      `### Enable\\n ` +\n      `   \\n ` +\n      ` This will enable/disable the modbus server \\n ` +\n      `   \\n ` +\n      `### Port\\n ` +\n      `   \\n ` +\n      ` This is the setting that the modbus server will listen on \\n ` +\n      `   \\n ` +\n      `### Modbus address\\n ` +\n      `   \\n ` +\n      ` This will set the modbus server modbus address (valid range between 0 and 255) \\n ` +\n      `   \\n `;\n    this.addInput('connect', Type.BOOLEAN);\n    this.addOutput('status', Type.BOOLEAN);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('message', Type.STRING);\n    this.settings['serverEnable'] = NodeSetting.create({\n      description: 'Server enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['port'] = NodeSetting.create({ description: 'port', value: 8502, type: SettingType.NUMBER });\n    this.settings['address'] = NodeSetting.create({\n      description: 'Modbus address',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n  }\n\n  onAdded() {\n    this.createModbusServer();\n  }\n\n  onInputUpdated() {\n    this.createModbusServer();\n  }\n\n  onAfterSettingsChange() {\n    this.createModbusServer();\n  }\n\n  onRemoved() {\n    this.closeTcpServer();\n  }\n\n  private createModbusServer() {\n    if (this.side !== Side.server) return; // only execute on server\n    this.closeTcpServer();\n    this.emitResult(false, false, 'close connection');\n\n    if (this.settings['serverEnable'].value) {\n      // set the server to answer for modbus requests\n      const coils = Buffer.alloc(160008, 0); // coils and discrete inputs\n      const registers = Buffer.alloc(160008, 0); // input and holding registers\n\n      let unitId = this.settings['address'].value;\n      unitId = parseInt(unitId);\n      const minAddress = 0;\n      const maxInputAddress = 10001;\n      const maxAddress = 20001;\n      const bufferFactor = 8;\n\n      // 1...10000*      address - 1      Coils (outputs)    0   Read/Write\n      // 10001...20000*  address - 10001  Discrete Inputs    01  Read\n      // 30001...40000*  address - 30001  Input Registers    04  Read\n      // 40001...50000*  address - 40001  Holding Registers  03  Read/Write\n\n      const vector = {\n        getCoil: function(addr, unitID) {\n          if (unitID === unitId && addr >= minAddress && addr < maxAddress) {\n            // console.log('get coils', coils.readUInt8(addr * bufferFactor));\n            return coils.readUInt8(addr * bufferFactor);\n          }\n        },\n        getInputRegister: function(addr, unitID) {\n          if (unitID === unitId && addr >= minAddress && addr < maxInputAddress) {\n            // 0 to 10001\n            // console.log('get getInputRegister', registers.readUInt16BE(addr * bufferFactor));\n            return registers.readUInt16BE(addr * bufferFactor);\n          }\n        },\n        getHoldingRegister: function(addr, unitID) {\n          if (unitID === unitId && addr >= maxInputAddress && addr < maxAddress) {\n            // 10001 to 20001\n            // console.log('get getHoldingRegister', registers.readUInt16BE(addr * bufferFactor));\n            return registers.readUInt16BE(addr * bufferFactor);\n          }\n        },\n        setCoil: function(addr, value, unitID) {\n          if (unitID === unitId && addr >= minAddress && addr < maxAddress) {\n            // console.log('set coil', addr, value, unitID);\n            coils.writeUInt8(value, addr * bufferFactor);\n          }\n        },\n        setRegister: function(addr, value, unitID) {\n          if (unitID === unitId && addr >= minAddress && addr < maxAddress) {\n            // console.log(' setRegister', addr, value, unitID);\n            registers.writeUInt16BE(value, addr * bufferFactor);\n          }\n        },\n        readDeviceIdentification: function(unitID) {\n          return new Promise(function(resolve) {\n            setTimeout(function() {\n              resolve({\n                0x00: 'Nube-IO',\n                0x01: 'wires-server',\n                0x02: '1',\n                0x05: 'wires-server',\n              });\n            }, 10);\n          });\n        },\n      };\n\n      //make a server to test the port\n      var net = require('net');\n      var server = net.createServer();\n      let port = this.settings['port'].value;\n      let salveAddress = this.settings['address'].value;\n      //make sure port size is >= 4\n      if (port.toString().length >= 3) {\n        server.once('error', err => {\n          if (err.code === 'EADDRINUSE') {\n            this.emitResult(false, false, 'port in use');\n            server.close();\n          }\n        });\n        //check if port is in use\n        server.once('listening', () => {\n          //make a modbus server\n          this.tcpServer = new ModbusRTU.ServerTCP(vector, {\n            host: '0.0.0.0',\n            port: port,\n            debug: true,\n            unitID: parseInt(salveAddress),\n          });\n\n          this.tcpServer.on('socketError', err => {\n            this.emitResult(false, err, 'server error');\n          });\n\n          this.tcpServer.on('initialized', () => {\n            this.emitResult(true, false, 'initialized');\n          });\n          //close test port\n          server.close();\n        });\n        //check port\n        server.listen(port);\n      } else if (port.toString().length < 3) {\n        this.emitResult(null, false, 'use a port >= 3');\n      }\n    }\n  }\n\n  private closeTcpServer() {\n    this.tcpServer &&\n      this.tcpServer.close(() => {\n        this.emitResult(false, false, 'closed');\n      });\n  }\n\n  emitResult(out, err, msg) {\n    this.setOutputData(0, out);\n    this.setOutputData(1, err);\n    this.setOutputData(2, msg);\n  }\n}\nContainer.registerNodeType('protocols/modbus/modbus-server', ModbusServerNode);\n","import { isNull } from '../../../../utils/helper';\nimport { NODE_INFO } from '../../../node-info';\nimport { MODBUS_RTU_DEVICE, MODBUS_RTU_NETWORK } from '../../../constants';\nimport { Container } from '../../../container';\nimport { ContainerNode } from '../../../container-node';\nimport { NodeState } from '../../../node';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\n\nconst net = require('net');\nclass ModbusSerialDeviceNode extends ContainerNode {\n  tcpServer = null;\n  db = null;\n  uuid: Number = null;\n\n  // node outputs\n  outStatus = 0;\n  outError = 1;\n  outMessageJson = 2;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/modbus\"][\"modbus-device\"].title;\n    this.description =\n      `## Description\\n ` +\n      `${NODE_INFO[\"protocols/modbus\"][\"modbus-device\"].description}\\n ` +\n      `### Enable\\n ` +\n      `   \\n ` +\n      ` This will enable/disable the device from polling \\n ` +\n      `   \\n ` +\n      `### Modbus Address\\n ` +\n      `   \\n ` +\n      ` If device is RTU type set the slave modbus address\\n ` +\n      `   \\n ` +\n      `### Device Timeout\\n ` +\n      `   \\n ` +\n      ` This setting is used for the polling. This is the amount of time the polling will wait before moving onto the next register or device to poll\\n ` +\n      `   \\n ` +\n      `### Network Type\\n ` +\n      `   \\n ` +\n      `If type is TCP set select type TCP and set the target device IP and port \\n ` +\n      `If type is RTU set the device address as per setting **Modbus Address** \\n ` +\n      `   \\n ` +\n      `### Point address starting offset\\n ` +\n      `   \\n ` +\n      `Modbus point address offset(Base 1 subtracts 1 to the address) \\n ` +\n      `If set to Base 1 this will make for example point address 1 (from the manufacture data sheet) equal to 0\\n ` +\n      `The default setting is Base 1\\n ` +\n      `   \\n ` +\n      `## Node outputs\\n ` +\n      `   \\n ` +\n      ` If device is TCP when the node is added or after the setting a change a device ping will be sent to see if the device is online\\n ` +\n      ` If device is online **status** will be sent to true and the **error** will be sent to false. If the device if offline the **status** will be sent to false and the **error** true \\n ` +\n      `   \\n `;\n    this.addOutput('status', Type.BOOLEAN);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('message', Type.JSON);\n    this.properties['address'] = 0;\n    this.settings['deviceEnable'] = NodeSetting.create({\n      description: 'Device enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.addInputWithSettings('address', Type.NUMBER, 1, 'Modbus address', false);\n    this.settings['deviceTimeout'] = NodeSetting.create({\n      description: 'Device Timeout Delay Setting (MS)', //TODO ADD CAP/LIMIT\n      value: 2000,\n      type: SettingType.NUMBER,\n    });\n    this.settings['transport'] = NodeSetting.create({\n      description: 'TCP or RTU/RS485',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'rtu', text: 'Modbus RTU over Serial 485' },\n          { value: 'tcp', text: 'Modbus TCP/IP' },\n        ],\n      },\n      value: 'rtu',\n    });\n    this.settings['ipAddress'] = NodeSetting.create({\n      description: 'Network IP Address',\n      value: '0.0.0.0',\n      type: SettingType.STRING,\n    });\n    this.settings['ipPort'] = NodeSetting.create({\n      description: 'Network Port Number',\n      value: 502,\n      type: SettingType.NUMBER,\n    });\n    this.settings['deviceAddressOffset'] = NodeSetting.create({\n      description: 'Point address starting offset',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 1, text: 'Base 1' },\n          { value: 0, text: 'Base 0' },\n        ],\n      },\n      value: 1,\n    });\n    this.setSettingsConfig({\n      conditions: {\n        ipAddress: setting => {\n          return setting['transport'].value === 'tcp';\n        },\n        ipPort: setting => {\n          return setting['transport'].value === 'tcp';\n        },\n      },\n    });\n  }\n\n  onAdded() {\n    super.onAdded();\n    this.onInputUpdated()\n    this.broadcastNameToClients();\n    this.updateTitle()\n    this.nodeColour()\n    if (this.side !== Side.server) return;\n    this.uuid = this.id;\n    if (this.settings['transport'].value === 'tcp') {\n      this.ping();\n    }\n  }\n\n\n  updateTitle() {\n    const address = this.getInputData(0);\n    const transport = this.settings['transport'].value;\n    const ipAddress = this.settings['ipAddress'].value;\n    const ipPort = this.settings['ipPort'].value;\n    if (transport === 'tcp') {\n      this.title = `Modbus Device (Type: ${this.settings['transport'].value}, AD: ${address} , IP: ${ipAddress}:${ipPort})`;\n      this.broadcastSettingsToClients();\n    } else {\n      this.title = `Modbus Device (Type: ${this.settings['transport'].value}, AD: ${address})`;\n      this.broadcastSettingsToClients();\n    }\n\n  }\n\n  ping() {\n    const host = [this.settings['ipAddress'].value, this.settings['ipPort'].value];\n    var sock = new net.Socket();\n    sock.setTimeout(5000);\n    sock\n      .on('connect', () => {\n        this.setOutputData(this.outStatus, true, true);\n        this.setOutputData(this.outError, false, true);\n        this.setOutputData(this.outMessageJson, host[0] + ':' + host[1] + ' is up.', true);\n        sock.destroy();\n      })\n      .on('error', e => {\n        this.setOutputData(this.outError, true, true);\n        this.setOutputData(this.outStatus, false, true);\n        this.setOutputData(this.outMessageJson, host[0] + ':' + host[1] + ' is down: ' + e.message, true);\n      })\n      .on('timeout', e => {\n        this.setOutputData(this.outError, true, true);\n        this.setOutputData(this.outStatus, false, true);\n        this.setOutputData(this.outMessageJson, host[0] + ':' + host[1] + ' is down: timeout', true);\n      })\n      .connect(host[1], host[0]);\n  }\n\n\n\n  onAfterSettingsChange(oldSettings: any) {\n    this.updateTitle()\n    this.onInputUpdated()\n    this.nodeColour()\n    super.onAfterSettingsChange(oldSettings);\n    if (this.side !== Side.server) return;\n    if (this.settings['transport'].value === 'tcp') {\n      this.ping();\n    }\n\n\n  }\n\n\n  onInputUpdated() {\n      const address = this.getInputData(0);\n      if (!isNull(address)) {\n        this.properties['address'] = address;\n        this.persistProperties(false, true);\n      } else {\n        this.properties['address'] = 0\n        this.persistProperties(false, true);\n      }\n  }\n\n\n  subscribeMessage(e) {\n    this.setOutputData(0, true, true);\n    this.setOutputData(1, false, true);\n    this.setOutputData(2, null, true);\n    this.nodeColour(false)\n  }\n\n  subscribeError(e) {\n    if (e === null) return;\n    this.setOutputData(0, false, true);\n    this.setOutputData(1, true, true);\n    this.setOutputData(2, e, true);\n    this.nodeColour(true)\n  }\n\n  nodeColour(err?: boolean) {\n    const deviceEnable = this.settings['deviceEnable'].value\n    if (deviceEnable === false) {\n      this.setNodeState(NodeState.DISABLED);\n    } else if (deviceEnable === true && !err){\n      this.setNodeState(NodeState.NORMAL)\n    } else if (err === true){\n      this.setNodeState(NodeState.ERROR)\n    }\n  }\n}\n\nContainer.registerNodeType(MODBUS_RTU_DEVICE, ModbusSerialDeviceNode, MODBUS_RTU_NETWORK);\n","import { isNull } from '../../../../utils/helper';\nimport { MODBUS_RTU_DEVICE, MODBUS_RTU_POINT } from '../../../constants';\nimport { Container } from '../../../container';\nimport { Node, NodeState } from '../../../node';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport MathUtils, { MATH_FUNC_TYPE } from '../../../utils/MathUtils';\nimport BACnetEnumsUnits from '../../../utils/points/BACnet-enums-units';\nimport { NODE_INFO } from '../../../node-info';\n\nexport class ModbusPointNode extends Node {\n  dynamicInputsExist: boolean = false;\n  dynamicSettingsExist: boolean = false;\n  dynamicInputStartPosition: number = 0;\n  inputCount: number;\n  dynamicMinInputs: number = 0;\n  nullableInputs: boolean = true;\n  dynamicOutputsExist: boolean = false;\n  dynamicInputsStartName: string = 'in';\n  dynamicOutputsStartName: string = 'out';\n  dynamicInputsType: Type = Type.NUMBER;\n  previousPointType;\n\n  lastInputState: any;\n\n  // node inputs\n  inAlarmTrigger = 0;\n  inHistoryTrigger = 1;\n  inInput = 2;\n\n  // poll count\n  pollCount = 0;\n  pollCountFail = 0;\n\n  // node outputs\n  outVal = 0;\n  outError = 1;\n  outModbusMessage = 2;\n  outMessageJson = 3;\n  outArray = 4;\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/modbus\"][\"modbus-point\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO[\"protocols/modbus\"][\"modbus-point\"].description +`\\n ` +\n      `   \\n ` +\n      `## Point Address\\n ` +\n      `   \\n ` +\n      `### Coils\\n ` +\n      `   \\n ` +\n      ` Valid Coil range is between 0 and 10001. This will allow any modbus client to read and write to those coli ranges\\n ` +\n      `   \\n ` +\n      `### Holding Register\\n ` +\n      `   \\n ` +\n      ` Valid Holding Register range is between 10001 and 19999. This will allow any modbus client to read and write to those coli ranges\\n ` +\n      `   \\n ` +\n      `## Enable\\n ` +\n      `   \\n ` +\n      ` This will enable/disable the point from polling \\n ` +\n      `   \\n `;\n\n    this.addInput('[name]', Type.STRING);\n    this.addOutput('output', Type.NUMBER);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('output-msg', Type.STRING);\n    this.addOutput('output-json', Type.STRING);\n    this.addOutput('output-modbus-array', Type.STRING);\n    this.properties['pointVal'] = null;\n    this.properties['pointAddress'] = 0;\n    /**\n      Default point Settings (Will be in point class)\n   */\n    this.settings['pointEnable'] = NodeSetting.create({\n      description: 'Point enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['value_group'] = NodeSetting.create({\n      description: 'Point settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.addInputWithSettings('input', Type.NUMBER, 0, 'point write value', false);\n    this.settings['valOffset'] = NodeSetting.create({\n      description: 'Out value offset',\n      value: 1000,\n      type: SettingType.NUMBER,\n    });\n    this.settings['valPrecision'] = NodeSetting.create({\n      description: 'Out value precision',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.settings['units_group'] = NodeSetting.create({\n      description: 'Units (Save to get units)',\n      type: SettingType.GROUP,\n    });\n    this.settings['unitsType'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: BACnetEnumsUnits.unitCategory,\n      },\n    });\n    this.settings['units'] = NodeSetting.create({\n      description: 'Units',\n      value: BACnetEnumsUnits.COMMON_METRIC.NO_UNITS,\n      type: SettingType.DROPDOWN,\n    });\n\n    /**\n      Point Math settings\n   */\n    this.settings['math_group'] = NodeSetting.create({\n      description: 'Math settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['mathFunc'] = NodeSetting.create({\n      description: 'Math on output value (optional)',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: MATH_FUNC_TYPE.NA, text: 'na' },\n          { value: MATH_FUNC_TYPE.ADD, text: 'add' },\n          { value: MATH_FUNC_TYPE.SUBTRACT, text: 'subtract' },\n          { value: MATH_FUNC_TYPE.MULTIPLY, text: 'multiply' },\n          { value: MATH_FUNC_TYPE.DIVIDE, text: 'divide' },\n          { value: MATH_FUNC_TYPE.BOOL_INVERT, text: 'bool invert' },\n          { value: MATH_FUNC_TYPE.ONE_TO_TRUE, text: 'convert 1/0 to true/false' },\n          { value: MATH_FUNC_TYPE.TRUE_TO_ONE, text: 'convert true/false to 1/0' },\n        ],\n      },\n      value: MATH_FUNC_TYPE.NA,\n    });\n    this.settings['mathValue'] = NodeSetting.create({\n      description: 'Enter a value',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n    /**\n     Modbus (Just for modbus)\n     */\n    this.settings['modbus_group'] = NodeSetting.create({\n      description: 'Modbus point settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['pointType'] = NodeSetting.create({\n      description: 'Select a point type',\n      value: 1,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 1, text: `Read Coil's` },\n          // { value: 21, text: `Read DO` },\n          { value: 2, text: `readDiscreteInput's` },\n          // { value: 22, text: `Read DI` },\n          { value: 3, text: `readHoldingRegister's` },\n          // { value: 23, text: `Read AO` },\n          { value: 4, text: `readInputRegister's` },\n          // { value: 24, text: `Read AI` },\n          { value: 5, text: `writeCoil` },\n          // { value: 25, text: `Write DO` },\n          { value: 6, text: `writeRegister` },\n          // { value: 26, text: `Write AO` },\n          // { value: 15, text: `writeCoil's` },\n          { value: 16, text: `writeRegister's` },\n        ],\n      },\n    });\n    this.addInputWithSettings('pointAddress', Type.NUMBER, 1, 'Register address', false);\n    this.settings['pointTimeout'] = NodeSetting.create({\n      description: 'Point Timeout (MS)',\n      value: 1000,\n      type: SettingType.NUMBER,\n    });\n    this.settings['offset'] = NodeSetting.create({\n      description: 'Register offset',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n    this.settings['dataType'] = NodeSetting.create({\n      description: 'Set data type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'na' }, // use reg length from setting\n          { value: 1, text: 'INT-16' }, // 1 reg\n          { value: 2, text: `UINT-16` }, // 1 reg\n          { value: 3, text: 'INT-32' }, // 2 reg\n          { value: 4, text: 'UINT-32' }, // 2 reg\n          { value: 5, text: 'FLOAT-32' }, // 2 reg // for support of nube hardware BEB_LEW as a float\n          // { value: 6, text: 'INT64' },\n          // { value: 7, text: 'UINT64' },\n          { value: 8, text: 'DOUBLE-64' }, // 4 reg\n        ],\n      },\n      value: 0,\n    });\n    this.settings['dataEndian'] = NodeSetting.create({\n      description: 'Set byte order',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'LE-Byte BE-Word' },\n          { value: 1, text: 'LE-Byte LE-Word' },\n          { value: 2, text: 'BE-Byte LE-Word' },\n          { value: 3, text: 'BE-Byte BE-Word' },\n        ],\n      },\n      value: 0,\n    });\n    this.setSettingsConfig({\n      groups: [\n        { pointAddress: {}, offset: {}, pointTimeout: {} },\n        { dataType: {}, dataEndian: {} },\n        { pointLimitEnable: {}, limitLow: {}, limitHigh: {} },\n        { mathFunc: {}, mathValue: {} },\n        { valOffset: {}, valPrecision: {} },\n      ],\n      conditions: {\n        offset: setting => {\n          const val = setting['pointType'].value;\n          return ![5, 6].includes(val);\n        },\n        dataType: setting => {\n          const val = setting['pointType'].value;\n          return ![1, 2, 5, 15].includes(val);\n        },\n        dataEndian: setting => {\n          const val = setting['pointType'].value;\n          return ![1, 2, 5, 15].includes(val);\n        },\n      },\n    });\n  }\n\n  onCreated() {\n    this.updateTitle();\n    this.nodeColour()\n  }\n\n  onAdded() {\n    this.nodeColour()\n    if (this.side !== Side.server) return;\n    this.onInputUpdated();\n    this.updateTitle();\n  }\n\n  onRemoved() { }\n\n  updateTitle() {\n    let pointAddress = this.getInputData(1);\n    this.title = `Modbus Point (FC: ${this.settings['pointType'].value}, AD: ${pointAddress})`;\n    this.broadcastSettingsToClients();\n  }\n\n  onInputUpdated() {\n    // priority array\n    let pointType = this.settings['pointType'].value;\n    if ([5, 6, 15, 16, 25, 26].includes(pointType)) {\n      const input = this.getInputData(1);\n      if (isNull(input)) return;\n      this.setOutputData(this.outModbusMessage, `write val ${input}`);\n      // lastInputState is to stop a new value that is input into the node but the value hasn't updated\n      if (input !== this.lastInputState) {\n        this.properties['pointVal'] = input;\n        // Persist the pointVal. (This is for outputs nodes only like AO, or BO)\n        this.persistProperties(false, true);\n        this.lastInputState = input;\n      } else if (typeof this.lastInputState === 'undefined') {\n        this.lastInputState = input;\n      }\n    }\n\n    //update point pointAddress\n    if (this.inputs[2].updated) {\n      const pointAddress = this.getInputData(2);\n      if (!isNull(pointAddress)) {\n        this.properties['pointAddress'] = pointAddress;\n        this.persistProperties(false, true);\n      } else {\n        this.properties['pointAddress'] = 0;\n        this.persistProperties(false, true);\n      }\n    }\n\n    //update node name\n    if (this.inputs[0].updated) {\n      let nodeName = this.getInputData(0);\n      if (!isNull(nodeName)) {\n        this.name = nodeName;\n        this.broadcastNameToClients();\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    const pointAddress = this.getInputData(2);\n    if (!isNull(pointAddress)) {\n      this.properties['pointAddress'] = pointAddress;\n      this.persistProperties(false, true);\n    } else {\n      this.properties['pointAddress'] = 0;\n      this.persistProperties(false, true);\n    }\n    this.onInputUpdated();\n    this.updateTitle();\n    this.nodeColour()\n  }\n\n  sendJson(pointValue) {\n    return {\n      name: this.name,\n      pointValue: pointValue,\n      enable: this.settings['pointEnable'].value,\n      address: this.settings['pointAddress'].value,\n      offset: this.settings['offset'].value,\n      pointType: this.settings['pointType'].value,\n      pollCount: this.pollCount,\n      pollCountFail: this.pollCountFail,\n    };\n  }\n  /**\n   * Gets a the modbus values from the network to update the point node values\n   */\n  subscribe(payload) {\n    let pointType = this.settings['pointType'].value;\n    this.setOutputData(this.outArray, payload.res.data);\n    this.setOutputData(this.outError, false, true);\n    this.nodeColour(false)\n    if ([5, 6, 15, 16, 25, 26].includes(pointType)) {\n      if (payload.payload === 'writeOk') {\n        this.setOutputData(this.outVal, this.properties['pointVal']);\n        this.setOutputData(this.outMessageJson, this.sendJson(this.properties['pointVal']));\n        this.pollCount++;\n      } else {\n        this.setOutputData(this.outModbusMessage, `write fail`, true);\n        this.setOutputData(this.outMessageJson, this.sendJson(null));\n        this.pollCountFail++;\n      }\n    } else {\n      const mathFunc = this.settings['mathFunc'].value;\n      const mathValue = this.settings['mathValue'].value;\n      let out: any;\n      if (mathFunc !== 0) {\n        if (MathUtils.validateNumbers(payload.payload, mathValue)) {\n          out = MathUtils.mathSwitch(mathFunc, payload.payload, mathValue);\n          this.setOutputData(this.outVal, out);\n          this.setOutputData(this.outMessageJson, this.sendJson(out));\n          this.setOutputData(this.outModbusMessage, false, true);\n          this.pollCount++;\n        }\n      } else {\n        if (typeof payload.payload === 'number') {\n          this.setOutputData(this.outVal, payload.payload);\n          this.setOutputData(this.outMessageJson, this.sendJson(payload.payload));\n          this.setOutputData(this.outModbusMessage, false, true);\n          this.pollCount++;\n        } else if (typeof payload.payload === 'boolean') {\n          this.setOutputData(this.outVal, payload.payload ? 1 : 0); // convert bool to int\n          this.setOutputData(this.outMessageJson, this.sendJson(payload.payload ? 1 : 0)); // convert bool to int\n          this.setOutputData(this.outModbusMessage, false, true);\n          this.pollCount++;\n        }\n      }\n    }\n  }\n  // this is called from the modbus network node\n  subscribeError(e: any) {\n    this.setOutputData(this.outError, true, true);\n    this.setOutputData(this.outModbusMessage, e, true);\n    this.pollCountFail++;\n    this.nodeColour(true)\n  }\n\n  nodeColour(err?: boolean) {\n    const pointEnable = this.settings['pointEnable'].value\n    if (pointEnable === false) {\n      this.setNodeState(NodeState.DISABLED);\n    } else if (pointEnable === true && !err){\n      this.setNodeState(NodeState.NORMAL)\n    } else if (err === true){\n      this.setNodeState(NodeState.ERROR)\n    }\n  }\n\n}\n\nContainer.registerNodeType(MODBUS_RTU_POINT, ModbusPointNode, MODBUS_RTU_DEVICE);\n","import { ModbusRTU as RTUModbus } from 'modbus-serial/ModbusRTU';\nimport { IdGenerator } from '../../../../utils/id-generator';\nimport { MODBUS_RTU_DEVICE, MODBUS_RTU_NETWORK, MODBUS_RTU_POINT } from '../../../constants';\nimport { Container } from '../../../container';\nimport { ContainerNode } from '../../../container-node';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport { GlobalNodeRegistry } from '../../../node-registry';\nimport Utils from '../../../utils';\nimport ModbusMethods from './modbus-fc/modbus-point-methods';\nimport ModbusUtils from './modbus-functions';\nimport { NODE_INFO } from '../../../node-info';\n\nconst ModbusRTU = require('modbus-serial');\n\nenum Poll {\n  DO_NOT_INIT = 0,\n  FIRST_START = 1,\n  STOP = 2,\n}\n\nenum Transport {\n  TCP = 'tcp',\n  RTU = 'rtu',\n}\n\nclass ModbusSerialNetworkNode extends ContainerNode {\n  rs485DeviceName: string = 'ttyUSB1';\n  isPortOk: boolean = false;\n  isPortInUse: boolean = false;\n  serialPortStatus: boolean = false;\n  checkPort: any;\n\n  // settings\n  networkEnable: boolean;\n  port: string;\n  baudRate: string;\n  parity: number;\n  dataBits: number;\n  stopBits: number;\n  devicePolling: number;\n  registerDelay: number;\n  transport: string;\n\n  // pooling running\n  pollEnableSetting: boolean = false;\n  poll: Poll;\n\n  // modbus client\n  client = null;\n  tcpClients: { [key: string]: RTUModbus } = {};\n\n  inNetworkEnable = 0;\n\n  // node outputs\n  outStatus = 0;\n  outError = 1;\n  outPortStatus = 2;\n  outPortMsg = 3;\n  outMessageJson = 4;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/modbus\"][\"modbus-485-network\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO[\"protocols/modbus\"][\"modbus-485-network\"].description + `\\n ` +\n      `   \\n ` +\n      `### Enable\\n ` +\n      `   \\n ` +\n      ` This will enable/disable the network from polling \\n ` +\n      `   \\n `;\n    this.addInputWithSettings('enable', Type.BOOLEAN, false, 'Network Enable', false);\n    this.addOutput('status', Type.BOOLEAN);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('port status', Type.STRING);\n    this.addOutput('port messages', Type.STRING);\n    this.addOutput('message', Type.STRING);\n    this.settings['devicePolling'] = NodeSetting.create({\n      description: 'Polling time setting in ms',\n      value: 2000, // TODO Add min limit\n      type: SettingType.NUMBER,\n    });\n    this.settings['registerDelay'] = NodeSetting.create({\n      description: 'Polling delay between each register in ms',\n      value: 30, // TODO Add min limit\n      type: SettingType.NUMBER,\n    });\n    this.settings['transport'] = NodeSetting.create({\n      description: 'TCP or RTU/RS485',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: Transport.RTU, text: 'Modbus RTU over Serial 485' },\n          { value: Transport.TCP, text: 'Modbus TCP/IP' },\n        ],\n      },\n      value: Transport.RTU,\n    });\n\n    this.settings['manualPort'] = NodeSetting.create({\n      description: 'Enter port manually',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['port'] = NodeSetting.create({\n      description: 'port',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: '/dev/ttyUSB0', text: 'ttyUSB0' },\n          { value: '/dev/ttyUSB1', text: 'ttyUSB1' },\n          { value: '/dev/ttyUSB2', text: 'RS485-1 (/dev/ttyUSB2)' },\n          { value: '/dev/ttyUSB3', text: 'RS485-2 (/dev/ttyUSB3)' },\n          { value: '/dev/ttyUSB4', text: 'USB Port (/dev/ttyUSB4)' },\n        ],\n      },\n      value: '/dev/ttyUSB0',\n    });\n    this.settings['manualPortNum'] = NodeSetting.create({\n      description: 'Enter port number',\n      value: '/dev/ttyAMA0',\n      type: SettingType.STRING,\n    });\n    this.settings['baudRate'] = NodeSetting.create({\n      description: 'Baud Rate',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 115200, text: '115200' },\n          { value: 57600, text: '57600' },\n          { value: 38400, text: '38400' },\n          { value: 19200, text: '19200' },\n          { value: 9600, text: '9600' },\n        ],\n      },\n      value: 9600,\n    });\n    this.settings['parity'] = NodeSetting.create({\n      description: 'Parity',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'none', text: 'none' },\n          { value: 'even', text: 'even' },\n          { value: 'mark', text: 'mark' },\n          { value: 'odd', text: 'odd' },\n          { value: 'space', text: 'space' },\n        ],\n      },\n      value: 'none',\n    });\n    this.settings['dataBits'] = NodeSetting.create({\n      description: 'Data Bits',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 8, text: '8' },\n          { value: 7, text: '7' },\n          { value: 6, text: '6' },\n          { value: 5, text: '5' },\n        ],\n      },\n      value: 8,\n    });\n    this.settings['stopBits'] = NodeSetting.create({\n      description: 'Stop Bits',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 2, text: '2' },\n          { value: 1.5, text: '1.5' },\n          { value: 1, text: '1' },\n        ],\n      },\n      value: 1,\n    });\n    this.setSettingsConfig({\n      groups: [\n        { port: {}, manualPortNum: {} },\n        { parity: {}, dataBits: {}, stopBits: {} },\n        { devicePolling: {}, registerDelay: {} },\n      ],\n      conditions: {\n        port: setting => {\n          return setting['transport'].value === Transport.RTU;\n        },\n        baudRate: setting => {\n          return setting['transport'].value === Transport.RTU;\n        },\n        parity: setting => {\n          return setting['transport'].value === Transport.RTU;\n        },\n        dataBits: setting => {\n          return setting['transport'].value === Transport.RTU;\n        },\n        stopBits: setting => {\n          return setting['transport'].value === Transport.RTU;\n        },\n        manualPort: setting => {\n          return setting['transport'].value === Transport.RTU;\n        },\n        manualPortNum: setting => {\n          return setting['transport'].value === Transport.RTU;\n        },\n      },\n    });\n  }\n\n  static async getDevicesPoints(sub_container: any, container_db: any) {\n    let devicesPoints = [];\n    let devices: any = await ModbusUtils.getDevice(MODBUS_RTU_DEVICE, sub_container, container_db);\n    for (let device of devices) {\n      let points = await ModbusUtils.getPoints(MODBUS_RTU_POINT, device, container_db);\n      devicesPoints.push(points);\n    }\n    return devicesPoints;\n  }\n\n  async onAdded() {\n    super.onAdded();\n    let nodeDetailsMessage = {\n      nodeId: this.id,\n      cid: this.container.id,\n      sub_id: this.sub_container.id,\n    };\n    this.setOutputData(this.outMessageJson, nodeDetailsMessage);\n    await this.setupForPolling();\n  }\n\n  onCreated() {\n    super.onCreated();\n    if (this.side !== Side.server) return;\n  }\n\n  async onRemoved() {\n    super.onRemoved();\n    await this.polling(Poll.STOP);\n    if (this.client) {\n      this.client.close(() => {});\n    }\n    Object.keys(this.tcpClients).forEach(key => {\n      if (this.tcpClients[key]) this.tcpClients[key].close(() => {});\n    });\n  }\n\n  onInputUpdated() {\n    setTimeout(async () => {\n      await this.setupForPolling();\n    });\n  }\n\n  onAfterSettingsChange(oldSettings: any) {\n    super.onAfterSettingsChange(oldSettings);\n    setTimeout(async () => {\n      await this.setupForPolling();\n    });\n  }\n\n  async polling(poll: Poll) {\n    this.poll = poll;\n    if (this.side !== Side.server) return; // only execute on server\n    if (this.poll === Poll.STOP) {\n      // close MB client\n      this.setOutputData(this.outPortMsg, 'INFO: closed port connection');\n      this.setOutputData(this.outStatus, false, true);\n      if (this.client) this.client.close(() => {});\n      return;\n    }\n    if (this.transport === Transport.RTU) {\n      if (this.client) this.client.close(() => {});\n      this.client = new ModbusRTU();\n      this.client.setTimeout(500);\n      setTimeout(() => {\n        this.client\n          .connectRTUBuffered(this.port, {\n            baudRate: this.baudRate,\n            parity: this.parity,\n            dataBits: this.dataBits,\n            stopBits: this.stopBits,\n          })\n          .catch(() => {\n            this.setOutputData(this.outStatus, false, true);\n            this.setOutputData(this.outError, true, true);\n            this.setOutputData(this.outPortMsg, `ERROR! port: ${this.port.substring(5)}`);\n          });\n        this.setOutputData(this.outStatus, true, true);\n        this.setOutputData(this.outPortMsg, `INFO: polling RS485 `);\n      }, 500);\n    } else {\n      this.setOutputData(this.outPortMsg, `INFO: polling TCP `);\n    }\n    if (this.poll === Poll.FIRST_START) {\n      await this.pollDevicesPoints();\n    }\n  }\n\n  async pollDevicesPoints() {\n    if (this.poll === Poll.STOP) return;\n    const devices = await ModbusSerialNetworkNode.getDevicesPoints(this.sub_container.id, this.container.db);\n    let errorOnModbusDevicesExec = false;\n    for (let device of devices) {\n      let { deviceCID, deviceID, deviceAddress, ipAddress, ipPort, deviceAddressOffset } = device.deviceObj;\n      const deviceNode = GlobalNodeRegistry.instance().get(IdGenerator.createNodeId(deviceCID, deviceID));\n      if (!deviceNode) return;\n      let points = device.points;\n\n      let client = this.client;\n      let existingTcpClients: string[] = [];\n      if (this.transport === Transport.TCP) {\n        const key = this.getTcpKey(ipAddress, ipPort);\n        existingTcpClients.push(key);\n        if (!this.tcpClients[key]) {\n          this.debugInfo(`Creating tcpClient with IP: ${ipAddress} and Port: ${ipPort}`);\n          this.tcpClients[key] = new ModbusRTU();\n        }\n        if (!this.tcpClients[key].isOpen) {\n          this.debugInfo(`Connecting tcpClient with IP: ${ipAddress} and Port: ${ipPort}`);\n          try {\n            await this.tcpClients[key].connectTCP(ipAddress, { port: ipPort });\n            this.tcpClients[key].setTimeout(5000);\n          } catch (e) {\n            errorOnModbusDevicesExec = true;\n            ModbusUtils.sendDeviceError(deviceNode, e);\n            this.setOutputData(this.outError, e);\n            continue;\n          }\n        }\n        client = this.tcpClients[key];\n      }\n\n      // Close if tcpClient doesn't exist\n      Object.keys(this.tcpClients).forEach(key => {\n        if (!existingTcpClients.includes(key)) {\n          this.tcpClients[key].close(() => {});\n        }\n      });\n\n      let errorOnModbusPointsExec = false;\n      for (let point of points) {\n        const { pntAddr, pntType, pntOffset, pntVal, pntCid, pntId, pntDataType, pntDataEndian } = point;\n        await Utils.sleep(this.registerDelay || 50);\n        const pointNode = GlobalNodeRegistry.instance().get(IdGenerator.createNodeId(pntCid, pntId));\n        if (!pointNode) return;\n        // TODO for point write don't return if input properties.pointVal = null\n        // if ((pntType === 5 || pntType === 6) && typeof pntVal === 'number') {\n        try {\n          const response: any = await ModbusMethods.modbusMethods(\n            // TODO add return interface\n            client,\n            deviceAddress,\n            pntType,\n            pntAddr,\n            pntOffset,\n            pntVal,\n            pntDataType,\n            pntDataEndian,\n            deviceAddressOffset,\n          );\n          ModbusUtils.sendPointMessage(pointNode, response);\n          ModbusUtils.sendDeviceMessage(deviceNode, response);\n        } catch (e) {\n          errorOnModbusDevicesExec = true;\n          this.setOutputData(this.outError, e);\n          ModbusUtils.sendDeviceError(deviceNode, e);\n          ModbusUtils.sendPointError(pointNode, e);\n        }\n      }\n      if (!errorOnModbusDevicesExec) ModbusUtils.sendDeviceError(deviceNode, null);\n      errorOnModbusDevicesExec = errorOnModbusDevicesExec || errorOnModbusPointsExec;\n    }\n    if (errorOnModbusDevicesExec) {\n      this.setOutputData(this.outStatus, false, true);\n      this.setOutputData(this.outError, true, true);\n    } else {\n      this.setOutputData(this.outStatus, true, true);\n      this.setOutputData(this.outError, null, true);\n    }\n\n    await Utils.sleep(this.devicePolling || 2000);\n    await this.pollDevicesPoints(); // start loop again\n  }\n\n  private async setupForPolling() {\n    if (this.side !== Side.server) return;\n    this.networkEnable = this.getInputData(this.inNetworkEnable);\n    if (this.settings['manualPort'].value) {\n      this.port = this.settings['manualPortNum'].value;\n    } else {\n      this.port = this.settings['port'].value;\n    }\n    this.baudRate = this.settings['baudRate'].value;\n    this.parity = this.settings['parity'].value;\n    this.dataBits = this.settings['dataBits'].value;\n    this.stopBits = this.settings['stopBits'].value;\n    this.devicePolling = this.settings['devicePolling'].value;\n    this.registerDelay = this.settings['registerDelay'].value;\n    this.transport = this.settings['transport'].value;\n\n    if (this.networkEnable) {\n      if (!this.pollEnableSetting) {\n        // start devicePolling\n        this.pollEnableSetting = true;\n        await this.polling(Poll.FIRST_START);\n      } else {\n        // continue devicePolling\n        await this.polling(Poll.DO_NOT_INIT);\n      }\n    } else {\n      this.pollEnableSetting = false;\n      await this.polling(Poll.STOP);\n    }\n  }\n\n  private getTcpKey(address: string, port: number): string {\n    return `${address}:${port}`;\n  }\n}\nContainer.registerNodeType(MODBUS_RTU_NETWORK, ModbusSerialNetworkNode);\n","import { isNumeric } from '../../../../../utils/helper';\nimport Utils from '../../../../utils';\nimport ModbusByteOrder from './modbus-point-byte-order';\n\nexport default class ModbusMethods {\n  static modbusMethods = async (\n    thisInstance: any,\n    id: number,\n    type: number, // type is for example readInputRegisters\n    regAddr: number,\n    regLength: number,\n    nodeInputValue?: number,\n    pntDataType?: number, // INT16\n    pntDataEndian?: number, // BE-LW\n    deviceAddressOffset?: number, // this is the point base offset 1 is default\n  ) => {\n    // console.log(\n    //   `Modbus call @  ${id}, FC: ${type}, regAddr: ${regAddr}, length: ${regLength} , writeVal: ${nodeInputValue} , pntDataType: ${pntDataType}, pntDataEndian: ${pntDataEndian}`,\n    // );\n    let pointAddress = regAddr - deviceAddressOffset\n    if(pointAddress < 0) pointAddress = 0; //make sure address is not less then 0\n    let ft = await ModbusMethods.pntSwitch(\n      type,\n      pointAddress,\n      regLength,\n      nodeInputValue,\n      pntDataType,\n      pntDataEndian,\n    );\n    // console.log(\n    //   `Modbus pntSwitch FC-METHOD: ${ft.methodType}, @ ${id}, FC: ${ft.funcType}, regAddr: ${regAddr}, length: ${regLength} , writeVal: ${nodeInputValue} , pntDataType: ${pntDataType}, pntDataEndian: ${pntDataEndian}`,\n    // );\n    // console.log(JSON.stringify(ft))\n    await thisInstance.setID(id);\n    await Utils.sleep(5);\n    return await new Promise((resolve, reject) => {\n      // This blocks requests for Modbus functionality, if it's still unsuccessful of 1 sec, it will return as error\n      thisInstance[ft.funcType](...ft.methodType).then((res: any) => {\n        // read holing and or input reg\n        if (type === 3 || type === 4) {\n          if (![0].includes(pntDataType)) {\n            const payload = ModbusByteOrder.readByteOrder(res.buffer, 0, pntDataType, pntDataEndian);\n            resolve({ res: res, payload: payload });\n          } else {\n            resolve({ res: res, payload: res.data[0] });\n          }\n          // read nube BIs and BOs\n        } else if (type === 1 || type === 2 || type === 21 || type === 22) {\n          const payload = ModbusMethods.readBool(res);\n          resolve({ res: res, payload: payload });\n\n          // read nube AIs and AOs\n        } else if (type === 23 || type === 24) {\n          let nubeType = ModbusMethods.nubeAnalogueRead();\n          const payload = ModbusByteOrder.readByteOrder(res.buffer, 0, nubeType[0], nubeType[1]);\n          resolve({ res: res, payload: payload });\n          // write response for nube DOs and AOs and writeCoil, writeCoil's, writeRegister writeRegister's\n        } else if (type === 5 || type === 6 || type === 16 || type === 25 || type === 26) {\n          if (res) {\n            resolve({ res: res, payload: 'writeOk' });\n          }\n        }\n      });\n      setTimeout(() => {\n        reject(\n          `Fail to execute > id: ${id}, FC: ${ft.funcType}, regAddr: ${regAddr}, length: ${regLength} , writeVal: ${nodeInputValue}`,\n        );\n      }, 1000);\n    });\n  };\n\n  private static readBool(res: any) {\n    return res.data[0];\n  }\n\n  private static nubeAnalogueRead() {\n    // this is for support of nube hardware BEB_LEW as a float\n    let pntDataType = 2;\n    let pntDataEndian = 2;\n    return [pntDataType, pntDataEndian];\n  }\n  private static dataTypeCase(c: number) {\n    const type16 = 1;\n    const type32 = 2;\n    const type64 = 4;\n    switch (c) {\n      case 1:\n      case 2:\n        return type16;\n      case 3:\n      case 4:\n      case 5:\n        return type32;\n      case 8:\n        return type64;\n    }\n  }\n\n  private static async pntSwitch(\n    type: number,\n    regAddr: number,\n    regLength: any,\n    nodeInputValue: any,\n    pntDataType?: number,\n    pntDataEndian?: number,\n  ) {\n    let funcType = null;\n    let methodType = null;\n    try {\n      // readCoils\n      if (type === 1) {\n        funcType = 'readCoils'; // (1, 4)  // read the 4 registers starting at address 1\n        methodType = [regAddr, regLength];\n        // read DO\n      } else if (type === 21) {\n        // read DO\n        funcType = 'readCoils';\n        methodType = [regAddr, 1];\n        // readDiscreteInputs\n      } else if (type === 2) {\n        funcType = 'readDiscreteInputs'; // (1, 4)  // read the 4 registers starting at address 1\n        methodType = [regAddr, regLength];\n        // read DI\n      } else if (type === 22) {\n        // read D1\n        funcType = 'readDiscreteInputs';\n        methodType = [regAddr, 1];\n        // read readHoldingRegisters\n      } else if (type === 3) {\n        funcType = 'readHoldingRegisters';\n        if (pntDataType !== 0) {\n          methodType = [regAddr, ModbusMethods.dataTypeCase(pntDataType)];\n        } else methodType = [regAddr, regLength];\n        // read AO\n      } else if (type === 23) {\n        funcType = 'readHoldingRegisters';\n        methodType = [regAddr, 2];\n        // read readInputRegisters\n      } else if (type === 4) {\n        funcType = 'readInputRegisters';\n        if (pntDataType !== 0) {\n          methodType = [regAddr, ModbusMethods.dataTypeCase(pntDataType)];\n        } else methodType = [regAddr, regLength];\n        // read AI\n      } else if (type === 24) {\n        funcType = 'readInputRegisters';\n        methodType = [regAddr, 2];\n        // writeCoil or DO\n      } else if (type === 5 || type === 25) {\n        funcType = 'writeCoil';\n        if (nodeInputValue === 1 || nodeInputValue === 0) {\n          methodType = [regAddr, nodeInputValue];\n        }\n        // writeRegister\n      } else if (type === 6) {\n        funcType = 'writeRegister'; // (5, 12) \"Write 12 to reg 5\"\n        if (isNumeric(nodeInputValue)) {\n          methodType = [regAddr, nodeInputValue];\n        };\n        // writeCoils\n      } else if (type === 16) {\n        funcType = 'writeRegisters'; //// example 1, [1, 22, 33, 444])\n        if (isNumeric(nodeInputValue)) {\n          methodType = [regAddr, ModbusByteOrder.writeValue(nodeInputValue, pntDataType, pntDataEndian)];\n        }\n      }\n      return {\n        funcType: funcType,\n        methodType: methodType,\n      };\n    } catch (error) {\n      console.log(`buffer readValue issue in modus-point-methods. Buffer.alloc ${error}`);\n    }\n  }\n}\n","export default class ModbusUtils {\n  static sendPointMessage(pointNode, msg) {\n    if (pointNode['subscribe']) pointNode['subscribe'](msg);\n  }\n\n  static sendPointError(pointNode, e) {\n    if (pointNode['subscribeError']) pointNode['subscribeError'](e);\n  }\n\n  static sendDeviceError(deviceNode, e) {\n    if (deviceNode['subscribeError']) deviceNode['subscribeError'](e);\n  }\n\n  static sendDeviceMessage(deviceNode, msg) {\n    if (deviceNode['subscribeMessage']) deviceNode['subscribeMessage'](msg);\n  }\n\n  static getDevice(typeDevice: string, cidDevice: any, container_db: any) {\n    return new Promise((resolve, reject) => {\n      let query = { 'type': typeDevice, 'cid': cidDevice, 'settings.deviceEnable.value': true };\n      container_db.listNodes(query, (err: any, docs: Array<any>) => {\n        let output = [];\n        if (!err) {\n          try {\n            docs.forEach(doc => {\n              const { cid, id, sub_container, settings, properties } = doc;\n              output.push({\n                deviceCID: cid,\n                deviceID: id,\n                deviceSubCID: sub_container.id,\n                deviceAddress: properties.address,\n                // deviceAddress.settings.address.value,\n                ipAddress: settings.ipAddress.value,\n                ipPort: settings.ipPort.value,\n                deviceTimeout: settings.deviceTimeout.value,\n                deviceAddressOffset: settings.deviceAddressOffset.value,\n              });\n            });\n          } catch (err) {\n            reject(err);\n          }\n          resolve(output);\n        } else {\n          reject(err);\n        }\n      });\n    });\n  }\n\n  static getPoints(pointType: string, deviceObj: any, container_db: any) {\n    return new Promise((resolve, reject) => {\n      let query = {\n        'type': pointType,\n        'cid': deviceObj.deviceSubCID,\n        'settings.pointEnable.value': true,\n      };\n      container_db.listNodes(query, (err: any, docs: Array<any>) => {\n        let output = [];\n        if (!err) {\n          try {\n            docs.forEach(doc => {\n              const { cid, id, settings, properties } = doc;\n              output.push({\n                pntCid: cid,\n                pntId: id,\n                pntAddr: properties.pointAddress,\n                pntType: settings.pointType.value,\n                pntOffset: settings.offset.value,\n                pntMathFunc: settings.mathFunc.value,\n                pntMathValue: settings.mathValue.value,\n                pntDataType: settings.dataType.value,\n                pntDataEndian: settings.dataEndian.value,\n                pntTimeout: settings.pointTimeout.value,\n                pntVal: properties.pointVal,\n              });\n            });\n          } catch (err) {\n            reject(err);\n          }\n          resolve({\n            deviceObj,\n            points: output,\n          });\n        } else {\n        }\n      });\n    });\n  }\n}\n","import * as mqtt from 'mqtt';\nimport config from '../../../../config';\nimport { isNull } from '../../../../utils/helper';\nimport { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport CryptoUtils from '../../../utils/crypto-utils';\nimport { MQTTMessage } from './core/mqtt-model';\n\nconst matchMQTT = require('mqtt-match');\n\n//import { themes } from 'src/client/editor/renderer-themes';\n\nclass MqttClientNode extends Node {\n  client: any;\n  topicsCount = 0;\n  messageQueue: Array<MQTTMessage> = [];\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/mqtt\"].client.title;\n    this.description = NODE_INFO[\"protocols/mqtt\"].client.description;\n\n    this.addInput('[enable]', Type.BOOLEAN);\n    this.addOutput('connected', Type.BOOLEAN);\n    this.settings['enable'] = NodeSetting.create({ description: 'Enable', value: false, type: SettingType.BOOLEAN });\n    this.settings['broker_group'] = NodeSetting.create({\n      description: 'Broker settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['broker_group'] = NodeSetting.create({\n      description: 'Broker settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['useEnv'] = NodeSetting.create({ description: 'Dont use env settings', value: false, type: SettingType.BOOLEAN });\n    this.settings['server'] = NodeSetting.create({ description: 'Broker URL', value: '0.0.0.0', type: SettingType.STRING });\n    this.settings['port'] = NodeSetting.create({ description: 'Broker port', value: '1883', type: SettingType.STRING });\n    this.settings['authentication'] = NodeSetting.create({\n      description: 'Use Authentication',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['username'] = NodeSetting.create({ description: 'User name', value: '', type: SettingType.STRING });\n    this.settings['password'] = NodeSetting.create({ description: 'Password', value: '', type: SettingType.PASSWORD });\n    this.settings['topics_group'] = NodeSetting.create({\n      description: 'Topic settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['topics_count'] = NodeSetting.create({\n      description: 'Number of Topics',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n    this.settings['decimals'] = NodeSetting.create({\n      description: 'Decimal Places (Numerics)',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: '0' },\n          { value: 1, text: '1' },\n          { value: 2, text: '2' },\n          { value: 3, text: '3' },\n          { value: 4, text: '4' },\n          { value: 5, text: '5' },\n          { value: 6, text: '6' },\n          { value: 7, text: '7' },\n          { value: 8, text: '8' },\n          { value: 9, text: '9' },\n          { value: 10, text: '10' },\n        ],\n      },\n      value: 3,\n    });\n\n    this.setSettingsConfig({\n      groups: [\n        { server: { weight: 3 }, port: { weight: 1 } },\n        { useEnv: {}, authentication: {} },\n        { username: {}, password: {} },\n        { topics_count: {}, decimals: {} },\n      ],\n      conditions: {\n        server: setting => {\n          return !!setting['useEnv'].value;\n        },\n        port: setting => {\n          return !!setting['useEnv'].value;\n        },\n        authentication: setting => {\n          return !!setting['useEnv'].value;\n        },\n        username: setting => {\n          return !!setting['authentication'].value;\n        },\n        password: setting => {\n          return !!setting['authentication'].value;\n        },\n      },\n    });\n  }\n\n  init() {\n    this.changeTopicsCount(this.settings['topics_count'].value);\n  }\n\n  onCreated() {\n    this.renameInputsOutputs();\n  }\n\n  onAdded() {\n    this.EXECUTE_INTERVAL = 200;\n\n    this.topicsCount = this.settings['topics_count'].value;\n    if (this.side == Side.server) {\n      this.setOutputData(0, false);\n      // connect if \"connect\" input disconnected or input data==true\n      if (this.settings['enable'].value && (this.inputs[0].link == null || this.inputs[0].data == true)) {\n        this.connectToBroker();\n      }\n    }\n  }\n\n  connectToBroker() {\n    let { host, port, username, password } = config.mqtt;\n    let options: any = {};\n\n    if (this.settings['useEnv'].value) {\n      // dont use env\n      if (this.settings['server'].value != null && this.settings['server'].value != '')\n        options.host = this.settings['server'].value;\n\n      if (this.settings['port'].value != null && this.settings['port'].value != '')\n        options.port = this.settings['port'].value;\n\n      if (this.settings['username'].value != null && this.settings['username'].value != '')\n        options.username = this.settings['username'].value;\n\n      if (this.settings['password'].value != null && this.settings['password'].value != '')\n        options.password = CryptoUtils.decrypt(this.settings['password'].value);\n    } else {\n      // use use env\n      if (isNull(host)) return;\n      if (isNull(port)) return;\n      options.host = host;\n      options.port = port;\n      if (this.settings['authentication'].value === true) {\n        if (!isNull(options.username)) {\n          options.username = username;\n        }\n        if (!isNull(options.password)) {\n          options.password = CryptoUtils.decrypt(password);\n        }\n      }\n    }\n\n    this.disconnectFromBroker();\n    this.client = mqtt.connect(options);\n    this.client.on('connect', () => {\n      this.setOutputData(0, true);\n      // subscribe\n      for (let i = 1; i <= this.topicsCount; i++) {\n        let topic = this.settings['topic' + i].value;\n        if (topic && topic != '') {\n          this.client.subscribe(topic);\n        }\n      }\n    });\n\n    this.client.on('close', () => {\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, null, true);\n    });\n\n    this.client.on('error', error => {\n      this.debugWarn(error);\n    });\n\n    this.client.on('message', (topic, message) => {\n      let obj: MQTTMessage = { topic: topic, message: message.toString() };\n      this.messageQueue.push(obj);\n    });\n  }\n\n  disconnectFromBroker() {\n    if (this.client) this.client.end();\n  }\n\n  onInputUpdated() {\n    // connect/disconnect\n    if (this.inputs[0].updated) {\n      if (this.inputs[0].data == false) this.disconnectFromBroker();\n      // auto connect when input disconnected\n      else if (this.settings['enable'].value && (this.inputs[0].link == null || this.inputs[0].data == true))\n        this.connectToBroker();\n    }\n\n    // publish message\n    if (this.settings['enable'].value && this.client && this.client.connected) {\n      for (let i = 1; i < this.getInputsCount(); i++) {\n        let data = this.inputs[i].data;\n        if (data && this.inputs[i].updated) {\n          let isJSON = true;\n          try {\n            data = JSON.parse(data);\n          } catch {\n            console.log('Not a valid JSON');\n            isJSON = false;\n          }\n          let topic: string;\n          let payload: string = '';\n\n          if (\n            isJSON &&\n            data.hasOwnProperty('topic') &&\n            typeof data.topic === Type.STRING &&\n            data.hasOwnProperty('payload')\n          ) {\n            payload = JSON.stringify(data.payload);\n            this.client.publish(data.topic, '' + payload);\n          } else {\n            topic = this.settings['topic' + i].value;\n            if (isJSON) payload = JSON.stringify(data);\n            else payload = String(data);\n            this.client.publish(topic, '' + payload);\n          }\n        }\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    let topics = this.settings['topics_count'].value;\n    topics = Utils.clamp(topics, 1, 100);\n    this.settings['topics_count'].value = topics;\n\n    if (this.topicsCount != topics) this.changeTopicsCount(topics);\n\n    this.renameInputsOutputs();\n\n    if (this.container.db)\n      this.container.db.updateNode(this.id, this.container.id, {\n        $set: { inputs: this.inputs, outputs: this.outputs, settings: this.settings },\n      });\n\n    if (this.side == Side.server) {\n      this.disconnectFromBroker();\n\n      if (this.settings['enable'].value) this.connectToBroker();\n    }\n  }\n\n  onRemoved() {\n    this.disconnectFromBroker();\n  }\n\n  changeTopicsCount(target_count) {\n    let diff = target_count - this.topicsCount;\n    if (diff == 0) return;\n\n    // add inputs, outputs\n    this.changeInputsCount(target_count + 1, Type.STRING);\n    this.changeOutputsCount(target_count + 1, Type.STRING);\n\n    // change settings for topics\n    if (diff > 0) {\n      for (let i = this.topicsCount + 1; i <= target_count; i++) {\n        this.settings['outputType' + i] = NodeSetting.create({\n          description: 'Output Type',\n          type: SettingType.DROPDOWN,\n          config: {\n            items: [\n              { value: false, text: 'Payload' },\n              { value: true, text: 'JSON' },\n            ],\n          },\n          value: false,\n        });\n        this.settings['topic' + i] = NodeSetting.create({\n          description: 'Topic ' + i,\n          value: '',\n          type: SettingType.STRING,\n        });\n        for (let i = this.topicsCount + 1; i <= target_count; i++) {\n          this.settingConfigs.groups.push({\n            [`outputType${i}`]: { weight: 2 },\n            [`topic${i}`]: { weight: 5 },\n          });\n        }\n      }\n    } else if (diff < 0) {\n      for (let i = this.topicsCount; i > target_count; i--) {\n        delete this.settings['topic' + i];\n        this.settingConfigs.groups.pop();\n      }\n    }\n\n    this.topicsCount = target_count;\n  }\n\n  renameInputsOutputs() {\n    for (let i = 1; i <= this.topicsCount; i++) {\n      //this.inputs[i].name = '[' + i + ']';\n      let topic = this.settings['topic' + i].value;\n      if (topic.length > 20) topic = '...' + topic.substr(topic.length - 20, 20);\n      this.inputs[i].name = '' + i + ' | ' + topic;\n      this.outputs[i].name = topic + ' | ' + i;\n    }\n\n    if (this.side == Side.editor) {\n      for (let i = 1; i <= this.topicsCount; i++) {\n        this.inputs[i].label = this.inputs[i].name;\n        this.outputs[i].label = this.outputs[i].name;\n      }\n      this.setDirtyCanvas(true, true);\n    }\n  }\n\n  // TODO: queue for each output\n  onExecute() {\n    if (this.messageQueue && this.messageQueue.length > 0) {\n      this.processQueue(this.messageQueue.shift());\n    }\n  }\n\n  setMQTTOutput(mqttMessage: MQTTMessage, outputNum: number) {\n    if (this.settings['outputType' + outputNum].value) {\n      this.setOutputData(outputNum, { topic: mqttMessage.topic, payload: mqttMessage.message }, true);\n      return;\n    } else {\n      let msgAsNum = Number(mqttMessage.message);\n      if (isNaN(msgAsNum)) {\n        this.setOutputData(outputNum, mqttMessage.message);\n        return;\n      }\n      this.setOutputData(outputNum, Utils.toFixedNumber(msgAsNum, this.settings['decimals'].value).toString(), true);\n    }\n  }\n\n  processQueue(mqttMessage: MQTTMessage) {\n    // look into using mqtt-match library. (https://www.npmjs.com/package/mqtt-match)\n    for (let outInd = 1; outInd <= this.topicsCount; outInd++) {\n      if (matchMQTT(this.settings['topic' + outInd].value, mqttMessage.topic)) this.setMQTTOutput(mqttMessage, outInd);\n    }\n  }\n}\nContainer.registerNodeType('protocols/mqtt/client', MqttClientNode);\n","import * as mqtt from 'mqtt';\nimport config from '../../../../config';\nimport { isNull } from '../../../../utils/helper';\nimport { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport CryptoUtils from '../../../utils/crypto-utils';\nimport { MQTTMessage } from './core/mqtt-model';\n\nconst matchMQTT = require('mqtt-match');\n\nclass MqttClientSingleNode extends Node {\n  client: any;\n  enableDebug: boolean;\n  //node inputs\n  inName = 0;\n  inEnable = 1;\n  inData = 2;\n  inTopic = 3;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/mqtt\"][\"client-single\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO[\"protocols/mqtt\"][\"client-single\"].description + '\\n' +\n      `   \\n ` +\n      `### Enable\\n ` +\n      `   \\n ` +\n      ` This will enable/disable the device from broker \\n ` +\n      `   \\n ` +\n      `### Use env settings\\n ` +\n      `   \\n ` +\n      ` If set to true this will allow you to use the MQTT broker details set from the .env configuration file in the device\\n ` +\n      ` If set to false this will allow you to set the MQTT broker details manually\\n ` +\n      `   \\n ` +\n      `### Node input\\n ` +\n      `   \\n ` +\n      ` The input named \"input\" can accept a json input or an mqtt payload to send when the topic is set in the node setting called \"[topic]\".\\n ` +\n      ` The input named \"input\" can accept a json payload input with the name, topic, and mqtt payload. See example below.\\n ` +\n      ` { \"payload\": 22, \"topic\": \"my topic\", \"name\": \"my node node\"}\\n ` +\n      `   \\n `;\n    this.addInput('[name]', Type.STRING);\n    this.addInputWithSettings('enable', Type.BOOLEAN, false, 'enable broker');\n    this.addInputWithSettings('input', Type.STRING, '', 'JSON input or input value');\n    this.addInputWithSettings('topic', Type.STRING, '', 'enter topic if not used from input');\n    this.addOutput('connected', Type.BOOLEAN);\n    this.addOutput('output', Type.ANY);\n    this.addOutput('output-json', Type.JSON);\n    this.settings['retain'] = NodeSetting.create({ description: 'Retain message on publish', value: true, type: SettingType.BOOLEAN });\n    this.settings['payloadJson'] = NodeSetting.create({ description: 'Send payload ', value: false, type: SettingType.BOOLEAN });\n    this.settings['enableDebug'] = NodeSetting.create({ description: 'Log debug messages (view logs in platform)', value: false, type: SettingType.BOOLEAN });\n    this.settings['qos'] = NodeSetting.create({\n      description: 'MQTT Quality Of Service (QoS)',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: -1, text: 'na' },\n          { value: 0, text: 'QoS 0' },\n          { value: 1, text: 'QoS 1' },\n          { value: 2, text: 'QoS 2' },\n        ],\n      },\n      value: 0,\n    });\n    this.settings['broker_group'] = NodeSetting.create({\n      description: 'Broker settings',\n      value: '',\n      type: SettingType.GROUP,\n    });\n    this.settings['useEnv'] = NodeSetting.create({ description: 'Dont use env settings', value: false, type: SettingType.BOOLEAN });\n    this.settings['server'] = NodeSetting.create({ description: 'Broker URL', value: '0.0.0.0', type: SettingType.STRING });\n    this.settings['port'] = NodeSetting.create({ description: 'Broker port', value: '1883', type: SettingType.STRING });\n    this.settings['authentication'] = NodeSetting.create({\n      description: 'Use Authentication',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['username'] = NodeSetting.create({ description: 'User name', value: '', type: SettingType.STRING });\n    this.settings['password'] = NodeSetting.create({ description: 'Password', value: '', type: SettingType.PASSWORD });\n    this.setSettingsConfig({\n      groups: [\n        { server: { weight: 3 }, port: { weight: 1 } },\n        { username: {}, password: {} },\n      ],\n      conditions: {\n        server: setting => {\n          return !!setting['useEnv'].value;\n        },\n        port: setting => {\n          return !!setting['useEnv'].value;\n        },\n        authentication: setting => {\n          return !!setting['useEnv'].value;\n        },\n        username: setting => {\n          return !!setting['authentication'].value;\n        },\n        password: setting => {\n          return !!setting['authentication'].value;\n        },\n      },\n    });\n  }\n\n  onAdded() {\n    this.EXECUTE_INTERVAL = 200;\n    if (this.side == Side.server) {\n      this.setOutputData(0, false);\n      if (this.getInputData(this.inEnable) === true) {\n        this.connectToBroker();\n        this.enableDebug = this.settings['enableDebug'].value;\n        if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: connect to Broker`);\n      }\n    }\n  }\n\n  connectToBroker() {\n    let { host, port, username, password } = config.mqtt;\n    let options: any = {};\n    const qos = this.settings['qos'].value;\n    if (qos !== -1) {\n      options.qos = qos;\n    }\n    if (this.settings['useEnv'].value) {\n      //dont use env\n      if (this.settings['server'].value != null && this.settings['server'].value != '')\n        options.host = this.settings['server'].value;\n      if (this.settings['port'].value != null && this.settings['port'].value != '')\n        options.port = this.settings['port'].value;\n      if (this.settings['username'].value != null && this.settings['username'].value != '')\n        options.username = this.settings['username'].value;\n      if (this.settings['password'].value != null && this.settings['password'].value != '')\n        options.password = CryptoUtils.decrypt(this.settings['password'].value);\n    } else {\n      //use use env\n      if (isNull(host)) return;\n      if (isNull(port)) return;\n      options.host = host;\n      options.port = port;\n      if (this.settings['authentication'].value === true) {\n        if (!isNull(options.username)) {\n          options.username = username;\n        }\n        if (!isNull(options.password)) {\n          options.password = CryptoUtils.decrypt(password);\n        }\n      }\n    }\n    this.disconnectFromBroker();\n    this.client = mqtt.connect(options);\n    this.client.on('connect', () => {\n      if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: this.client = mqtt.connect options: ${JSON.stringify(options)}`);\n      this.setOutputData(0, true);\n      let data = this.getInputData(this.inData);\n      let topic = this.getInputData(this.inTopic);\n      if (data || topic) {\n        let isJSON = true;\n        try {\n          data = JSON.parse(data);\n        } catch {\n          if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: input isn't JSON`);\n          isJSON = false;\n        }\n        if (isJSON && data.hasOwnProperty('topic') && typeof data.topic === Type.STRING) {\n          if (data.topic != '') {\n            this.client.subscribe(data.topic);\n            if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE:  subscribe on json topic ${data.topic}`);\n          }\n        } else {\n          // if no json topic use input 2 topic\n          if (data.topic != '') {\n            if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE:  subscribe on node input topic ${topic}`);\n            this.client.subscribe(topic);\n          }\n        }\n      }\n    });\n    this.client.on('close', () => {\n      this.setOutputData(0, false, true);\n    });\n\n    this.client.on('error', error => {\n      this.debugWarn(error);\n    });\n    this.client.on('message', (topic, message) => {\n      let obj: MQTTMessage = { topic: topic, message: message.toString() };\n      if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE:  this.client.on('message' ${JSON.stringify(obj)}`);\n      this.processMessage(obj);\n    });\n  }\n\n  disconnectFromBroker() {\n    if (this.client) this.client.end();\n  }\n\n  onInputUpdated() {\n    //connect/disconnect\n    if (this.inputs[this.inEnable].updated) {\n      if (this.getInputData(this.inEnable) === true) {\n        this.connectToBroker();\n        if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: connect to Broker`);\n      } else if (this.getInputData(this.inEnable) === false) {\n        this.disconnectFromBroker();\n        if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: disconnect From Broker`);\n      } else if (isNull(this.getInputData(this.inEnable))) {\n        this.onAfterSettingsChange();\n        if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: disconnect enable input from node`);\n      }\n    }\n\n    //update node name\n    if (this.inputs[this.inName].updated) {\n      let nodeName = this.getInputData(this.inName);\n      if (!isNull(nodeName)) {\n        this.name = nodeName;\n        this.broadcastNameToClients();\n      }\n    }\n\n    //update topic\n    if (this.getInputData(this.inEnable) && this.inputs[this.inTopic].updated) {\n      this.connectToBroker();\n      if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: node input topic updated`);\n    }\n\n    //publish message\n    if (this.getInputData(this.inEnable) && this.client && this.client.connected) {\n      let data = this.getInputData(this.inData);\n      if (data && this.inputs[this.inData].updated) {\n        let isJSON = true;\n        try {\n          data = JSON.parse(data);\n        } catch {\n          if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: input isn't JSON`);\n          isJSON = false;\n        }\n        let topic: string;\n        let payload: string = '';\n        if (\n          isJSON &&\n          data.hasOwnProperty('topic') &&\n          typeof data.topic === Type.STRING &&\n          data.hasOwnProperty('payload') || data.hasOwnProperty('fields')\n        ) {\n          if (data.hasOwnProperty('payload')) {\n            payload = JSON.stringify(data.payload);\n          } else if (data.hasOwnProperty('fields')) {\n            payload = JSON.stringify(data.fields.value); //influx db uses fields\n          }\n          if (data.topic == '') {\n            return;\n          }\n          this.publish(data.topic, payload)\n        } else {\n          topic = this.getInputData(this.inTopic);\n          if (isJSON) payload = JSON.stringify(data);\n          else payload = String(data);\n          if (topic == '') {\n            return;\n          }\n          this.publish(topic, payload)\n        }\n      }\n    }\n  }\n\n  publish(topic, payload) {\n    const retain = this.settings['retain'].value\n    const payloadJson = this.settings['payloadJson'].value\n    if (payloadJson) {\n      let out = JSON.stringify({ value: payload })\n      this.client.publish(topic, '' + out, { retain: retain });\n      if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: publish on input topic from json ${topic}, '' + ${out}`);\n    } else {\n      this.client.publish(topic, '' + payload, { retain: retain });\n      if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: publish on input topic from node input ${topic}, '' + ${payload}`);\n    }\n  }\n\n  onAfterSettingsChange() {\n    //update db\n    if (this.container.db)\n      this.container.db.updateNode(this.id, this.container.id, {\n        $set: { inputs: this.inputs, outputs: this.outputs, settings: this.settings },\n      });\n\n    if (this.side == Side.server) {\n      this.disconnectFromBroker();\n      if (this.getInputData(this.inEnable)) {\n        this.connectToBroker();\n        if (this.enableDebug) this.debugInfo(`MQTT-CLIENT-SINGLE NODE: connect to Broker from settings`);\n      }\n    }\n  }\n\n  onRemoved() {\n    this.disconnectFromBroker();\n  }\n\n  processMessage(mqttMessage: MQTTMessage) {\n    // look into using mqtt-match library. (https://www.npmjs.com/package/mqtt-match)\n    let topic = this.getInputData(this.inTopic);\n    if (matchMQTT(topic, mqttMessage.topic)) {\n      this.setOutputData(1, mqttMessage.message);\n      this.setOutputData(2, mqttMessage);\n    }\n  }\n}\nContainer.registerNodeType('protocols/mqtt/client-single', MqttClientSingleNode);\n","import { Colors, create } from 'logplease';\nimport { connect, IClientPublishOptions, IClientSubscribeOptions, MqttClient } from 'mqtt';\nimport { MQTTMessage } from './mqtt-model';\n\nconst logger = create('mqtt', { color: Colors.Blue });\n\nexport interface MqttClientWrapper {\n\n  start(): MqttClientWrapper;\n\n  stop(): void;\n\n  isConnected(): boolean;\n\n  publish(topic: string, payload: string, options?: {}, cb?: any): void;\n\n  subscribe(topic: string, options?: {}, cb?: any): void;\n\n  unsubscribe(topic: string, cb?: any): void;\n}\n\nexport interface MqttLifecycle {\n\n  /**\n   * Emitted on successful (re)connection (i.e. connack rc=0).\n   * @param connack received connack packet.\n   */\n  onConnect(connack): void;\n\n  /**\n   * Emitted when a reconnect starts.\n   */\n  onReconnect(): void;\n\n  /**\n   * Emitted after a disconnection.\n   */\n  onClose(): void;\n\n  /**\n   * Emitted after receiving disconnect packet from broker. MQTT 5.0 feature.\n   */\n  onDisconnect(): void;\n\n  /**\n   * Emitted when the client goes offline.\n   */\n  onOffline(): void;\n\n  /**\n   * Emitted when the client cannot connect (i.e. connack rc != 0) or when a parsing error occurs.\n   */\n  onError(err): void;\n\n  /**\n   * Emitted when mqtt.Client#end() is called.\n   * If a callback was passed to mqtt.Client#end(), this event is emitted once the callback returns.\n   */\n  onEnd(): void;\n\n  /**\n   * Emitted when the client receives a publish packet\n   * @param topic topic of the received packet\n   * @param message payload of the received packet\n   * @param packet received packet, as defined in mqtt-packet\n   */\n  onMessage(topic, message, packet): void;\n\n  /**\n   * Emitted when the client sends any packet.\n   * This includes .published() packets as well as packets used by MQTT for managing subscriptions and connections\n   * @param packet received packet, as defined in mqtt-packet\n   */\n  onPacketSend(packet): void;\n\n  /**\n   * Emitted when the client receives any packet.\n   * This includes packets from subscribed topics as well as packets used by MQTT for managing subscriptions and connections\n   * @param packet received packet, as defined in mqtt-packet\n   */\n  onPacketReceive(packet): void;\n\n}\n\nexport class DefaultMqttClient implements MqttClientWrapper, MqttLifecycle {\n\n  private readonly options: {};\n  private readonly callbackWhenConnected: (client: MqttClientWrapper) => void;\n  private readonly callbackWhenOffline: (client: MqttClientWrapper, offlineMsg?: string) => void;\n  private readonly callbackIncomingMessage: (msg: MQTTMessage) => void;\n  private client: MqttClient;\n  private connected: boolean = false;\n  private clientId: string;\n\n  constructor(options: {}, callbackWhenConnected: (client: MqttClientWrapper) => void,\n              callbackWhenOffline: (client: MqttClientWrapper, offlineMsg?: string) => void,\n              callbackIncomingMessage: (msg: MQTTMessage) => void) {\n    this.options = options;\n    this.callbackWhenConnected = callbackWhenConnected;\n    this.callbackWhenOffline = callbackWhenOffline;\n    this.callbackIncomingMessage = callbackIncomingMessage;\n  }\n\n  static init(options: {}, callbackWhenConnected: (client: MqttClientWrapper) => void,\n              callbackWhenOffline: (client: MqttClientWrapper, offlineMsg?: string) => void,\n              callbackIncomingMessage: (msg: MQTTMessage) => void): MqttClientWrapper {\n    return new DefaultMqttClient(options, callbackWhenConnected, callbackWhenOffline, callbackIncomingMessage).start();\n  }\n\n  onClose(): void {\n    logger.debug(`MQTT Client ${this.clientId} closed`);\n    this.connected = false;\n  }\n\n  onConnect(connack): void {\n    logger.info(`MQTT Client ${this.clientId} connected ${JSON.stringify(connack)}`);\n    this.connected = true;\n    if (this.callbackWhenConnected) {\n      this.callbackWhenConnected(this);\n    }\n  }\n\n  onDisconnect(): void {\n    logger.warn(`MQTT Client ${this.clientId} disconnected`);\n    this.connected = false;\n    if (this.callbackWhenOffline) {\n      this.callbackWhenOffline(this, `Unable connect to server`);\n    }\n  }\n\n  onEnd(): void {\n    logger.info(`MQTT Client ${this.clientId} ended`);\n    this.connected = false;\n    if (this.callbackWhenOffline) {\n      this.callbackWhenOffline(this);\n    }\n  }\n\n  onError(err): void {\n    logger.error(`Error connection in MQTT Client ${this.clientId}: ${err}`);\n    this.stop();\n  }\n\n  onMessage(topic, message, packet): void {\n    logger.info(`MQTT Client '${this.clientId}' dispatch message on topic '${topic}'`);\n    this.callbackIncomingMessage({ topic, message: message.toString() } as MQTTMessage);\n  }\n\n  onOffline(): void {\n    logger.warn(`MQTT Client '${this.clientId}' is offline`);\n    this.connected = false;\n    if (this.callbackWhenOffline) {\n      this.callbackWhenOffline(this, `Unable connect to server`);\n    }\n  }\n\n  onPacketReceive(packet): void {\n    logger.debug(`MQTT Client '${this.clientId}' receives packet '${packet?.cmd}'`);\n  }\n\n  onPacketSend(packet): void {\n    logger.debug(`MQTT Client '${this.clientId}' sends packet '${packet?.cmd}'`);\n  }\n\n  onReconnect(): void {\n    logger.info(`MQTT Client '${this.clientId}' reconnected`);\n    if (this.callbackWhenConnected) {\n      this.callbackWhenConnected(this);\n    }\n  }\n\n  start(): MqttClientWrapper {\n    this.client = connect(this.options);\n    this.client.on('connect', connack => this.onConnect(connack));\n    this.client.on('close', () => this.onClose());\n    this.client.on('disconnect', () => this.onDisconnect());\n    this.client.on('end', () => this.onEnd());\n    this.client.on('error', err => this.onError(err));\n    this.client.on('offline', () => this.onOffline());\n    this.client.on('packetreceive', packet => this.onPacketReceive(packet));\n    this.client.on('packetsend', packet => this.onPacketSend(packet));\n    this.client.on('message', (topic, msg, packet) => this.onMessage(topic, msg, packet));\n    this.clientId = this.client?.options?.clientId;\n    return this;\n  }\n\n  stop(): void {\n    if (this.client) {\n      this.client.end(true);\n    }\n  }\n\n  isConnected(): boolean {\n    return this.client && this.connected;\n  }\n\n  publish(topic: string, payload: string, options?: {}, cb?: any): void {\n    if (!this.isConnected()) {\n      return;\n    }\n    this.client.publish(topic, payload, (options || { retain: true }) as IClientPublishOptions, cb);\n  }\n\n  subscribe(topic: string, options?: {}, cb?: any): void {\n    if (!this.isConnected()) {\n      return;\n    }\n    logger.info(`MQTT Client '${this.clientId}' subscribe topic '${topic}'...`);\n    this.client.subscribe(topic, (options || {}) as IClientSubscribeOptions, cb);\n  }\n\n  unsubscribe(topic: string, cb?: any): void {\n    if (!this.isConnected()) {\n      return;\n    }\n    logger.info(`MQTT Client '${this.clientId}' unsubscribe topic '${topic}'...`);\n    if (topic) {\n      this.client.unsubscribe(topic, cb);\n    }\n  }\n}\n","import { PointOutput, PointValueCreator } from '../../../../backend/models/point-model';\nimport { isEmpty, isNull } from '../../../../utils/helper';\nimport { IdGenerator } from '../../../../utils/id-generator';\nimport {\n  DefaultObservable,\n  HasCentralizedListener,\n  ICentralizedListener,\n  IMessageConverter,\n  MockCentralizedListener,\n  Observer,\n} from '../../../../utils/pattern';\nimport { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NodeInput, NodeSetting, SettingType, Type } from '../../../node-io';\nimport { DependantConnectionNode, DependantConnectionNodeMixin } from '../connection-node-mixin';\nimport {\n  DataPointFlowHandler,\n  HasDataPointFlowHandler,\n  HasPointOutputObservers,\n  MockHasPointOutputObservers,\n  PointNodeMixin,\n} from '../model/point-node';\nimport { MqttPointCreator, MqttPointValue, SillyMqttPoint } from './core/mqtt-model';\nimport {\n  MQTT_CLIENT_NODE,\n  PUBLISH_MQTT_DATA,\n  REGISTER_MQTT_POINT,\n  UNREGISTER_MQTT_POINT,\n  UPDATE_MQTT_POINT,\n} from './mqtt-client-node';\nimport { MqttPointStoreItem } from './mqtt-client-node-store';\nimport { NODE_INFO } from '../../../node-info';\n\nclass MqttPointNode extends DependantConnectionNodeMixin(PointNodeMixin(Node))\n  implements HasPointOutputObservers<SillyMqttPoint>, HasDataPointFlowHandler<SillyMqttPoint>,\n    DependantConnectionNode, DataPointFlowHandler<SillyMqttPoint>, IMessageConverter, HasCentralizedListener {\n\n  private readonly _iTopic = 'topic';\n  private readonly _sReqRes = 'enabledReqRes';\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/mqtt\"][\"mqtt-point\"].title;\n    //TODO Should re-update\n    this.description = NODE_INFO[\"protocols/mqtt\"][\"mqtt-point\"].description;\n    this.mixinEnableInputSetting();\n    this.mixinConnectionStatusOutput();\n    this.addInputWithSettings(this._iTopic, Type.STRING, '', 'MQTT Topic');\n    this.settings[this._sReqRes] = NodeSetting.create({\n      description: 'Request Response mode',\n      type       : SettingType.BOOLEAN,\n      value      : false,\n    });\n    this.setSettingsConfig(this.mixinPointValueInputOutput());\n  }\n\n  flowHandler(): DataPointFlowHandler<SillyMqttPoint> {\n    return this;\n  }\n\n  listener(): ICentralizedListener {\n    return MockCentralizedListener.cast(this.getParentNode());\n  }\n\n  pointObservers(): Observer<PointOutput<SillyMqttPoint>>[] {\n    return [...super.pointObservers(),\n            ...MockHasPointOutputObservers.cast(this.getParentNode()).pointObservers()];\n  }\n\n  notifyOutput(point: SillyMqttPoint, observers: Observer<PointOutput<SillyMqttPoint>>[]): void {\n    if (isNull(point)) {\n      return;\n    }\n    let cp = this.initializePointBySettingObject();\n    point.pointValue = isNull(point?.pointValue) ? PointValueCreator.by() : point.pointValue.merge(cp?.pointValue);\n    this.settings[this.modelSettingKey()].value = point;\n    new DefaultObservable(observers).notify({ point: point, connStatus: { status: this.getConnectionStatus() } });\n  }\n\n  onRemoved() {\n    if (this.listener() === MockCentralizedListener.LISTENER) {\n      return;\n    }\n    let mqttPoint = this.initializePointBySettingObject();\n    if (mqttPoint) {\n      this.listener().listen({ action: UNREGISTER_MQTT_POINT, payload: this.createMqttPointStoreItem(mqttPoint) });\n    }\n  }\n\n  reEvaluateSettingByInput(inputs: { [p: number]: NodeInput }, settings: { [p: string]: NodeSetting }) {\n    settings[this._iTopic].value = inputs[this.topicInputIdx()].updated ? inputs[this.topicInputIdx()].data\n                                                                        : settings[this._iTopic].value;\n    super.reEvaluateSettingByInput(inputs, settings);\n  }\n\n  handleOnUpdate(current: SillyMqttPoint, prev?: SillyMqttPoint): SillyMqttPoint {\n    if (!prev?.mqttTopic && !current?.mqttTopic) {\n      return null;\n    }\n    if (isEmpty(current.mqttTopic)) {\n      throw new Error('Must define MQTT topic');\n    }\n    let payload = this.createMqttPointStoreItem(current);\n    if (isNull(prev) || this.getConnectionStatus().isError()) {\n      this.listener().listen({ action: REGISTER_MQTT_POINT, payload });\n    } else if (!current.mightOnlyValueChanged(prev)) {\n      if (!current.equals(prev)) {\n        current.pointValue = PointValueCreator.by();\n      }\n      payload.publisher.prev = this.createMqttPointStoreItem(prev);\n      payload.subscriber.prev = this.createMqttPointStoreItem(prev);\n      this.listener().listen({ action: UPDATE_MQTT_POINT, payload });\n    }\n    if (!current.enabled || (isNull(current?.pointValue?.presentValue) &&\n                             (prev && !current.equals(prev) || isNull(prev?.pointValue?.presentValue)))) {\n      return current;\n    }\n    if (current.isReqRes) {\n      // Always publish highest data to mqtt broker\n      return this.listener().listen({ action: PUBLISH_MQTT_DATA, payload: payload.toPublisher() });\n    }\n    let cov = current.pointValue.changedOfValue(prev?.pointValue);\n    if (cov) {\n      payload.publisher.data.pointValue = cov;\n    }\n    return this.listener().listen({ action: PUBLISH_MQTT_DATA, payload: payload.toPublisher() });\n  }\n\n  initializePointBySettingInput(settings?: { [name: string]: NodeSetting }): SillyMqttPoint {\n    let st = (settings ?? this.settings) as { [name: string]: NodeSetting };\n    return SillyMqttPoint.by(MqttPointCreator.by(this.isEnabled(), st[this._iTopic].value, this.createPointValue(st)),\n                             this.settings[this._sReqRes].value);\n  }\n\n  initializePointBySettingObject(settings?: { [name: string]: NodeSetting }): SillyMqttPoint {\n    let st = (settings ?? this.settings) as { [name: string]: NodeSetting };\n    return SillyMqttPoint.by(MqttPointCreator.from(st[this.modelSettingKey()].value),\n                             this.settings[this._sReqRes].value);\n  }\n\n  onConvertMessage(data: any): string {\n    return MqttPointValue.by(data?.pointValue).toString();\n  }\n\n  onReceiveMessage(incomingMessage: any): void {\n    let pointValue = MqttPointValue.parse(incomingMessage).to();\n    let cp = this.initializePointBySettingObject();\n    cp.pointValue = pointValue.merge(cp.pointValue);\n    if (this.settings[this._sReqRes].value) {\n      this.listener().listen({ action: PUBLISH_MQTT_DATA, payload: this.createMqttPointStoreItem(cp).toPublisher() });\n    }\n    this.notifyOutput((this.settings[this.modelSettingKey()].value = cp), this.pointObservers());\n  }\n\n  protected statusOutputIdx(): number {\n    return 0;\n  }\n\n  protected modelSettingKey(): string {\n    return `mqttp`;\n  }\n\n  protected valueInputIdx(): number {\n    return 2;\n  }\n\n  protected valueOutputIdx(): number {\n    return 2;\n  }\n\n  protected presentValueType(): Type {\n    return Type.ANY;\n  }\n\n  protected computeTitle(): string {\n    return `MQTT Point (Topic: ${this.settings[this._iTopic].value})`;\n  }\n\n  protected enableDescription(): string {\n    return 'Enable MQTT Point';\n  }\n\n  protected topicInputIdx(): number {\n    return 1;\n  }\n\n  private createMqttPointStoreItem(mqttPoint: SillyMqttPoint): MqttPointStoreItem {\n    return new MqttPointStoreItem(mqttPoint.identifier(), IdGenerator.createNodeId(this.cid, this.id), mqttPoint?.enabled,\n                                  {\n                                    identifier: mqttPoint.publishedTopic(),\n                                    data      : mqttPoint,\n                                    callback  : (data: any) => this.onConvertMessage(data),\n                                  }, {\n                                    identifier: mqttPoint.subscribedTopic(),\n                                    callback  : (msg: any) => this.onReceiveMessage(msg),\n                                  });\n  }\n}\n\nContainer.registerNodeType('protocols/mqtt/mqtt-point', MqttPointNode, MQTT_CLIENT_NODE);\n","import { PointModel, PointValue, PointValueCreator } from '../../../../../backend/models/point-model';\nimport { isJSON, isNull } from '../../../../../utils/helper';\n\nexport interface MqttPoint extends PointModel {\n  mqttTopic: string;\n}\n\nexport class MqttPointCreator {\n  private constructor() {\n  }\n\n  static from = (json: object): MqttPoint => {\n    if (isNull(json)) {\n      return null;\n    }\n    // @ts-ignore\n    let pv = json?.pointValue;\n    // @ts-ignore\n    return MqttPointCreator.by(json?.enabled, json?.mqttTopic,\n                               PointValueCreator.create(pv?.presentValue, pv?.priority, pv?.priorityArray));\n  };\n\n  static by = (enabled: boolean, mqttTopic: string, pointValue: PointValue): MqttPoint => {\n    return new DefaultMqttPoint(enabled, mqttTopic, pointValue);\n  };\n}\n\nclass DefaultMqttPoint implements MqttPoint {\n  enabled: boolean;\n  mqttTopic: string;\n  pointValue: PointValue;\n\n  constructor(enabled: boolean, mqttTopic: string, pointValue: PointValue) {\n    this.enabled = enabled || false;\n    this.mqttTopic = mqttTopic;\n    this.pointValue = pointValue;\n  }\n\n  identifier(): string {\n    return this.mqttTopic;\n  }\n\n  mightOnlyValueChanged(point: MqttPoint): boolean {\n    return this.enabled === point?.enabled && this.mqttTopic === point?.mqttTopic;\n  }\n\n  equals(point: MqttPoint): boolean {\n    return this.identifier() === point?.identifier();\n  }\n}\n\nexport interface MQTTMessage {\n  topic: string;\n  message: any;\n}\n\nexport class MqttPointValue {\n  value: number;\n  priority: number;\n\n  constructor(value: number, priority: number) {\n    this.value = value;\n    this.priority = priority;\n  }\n\n  static by(pv: PointValue): MqttPointValue {\n    return new MqttPointValue(pv?.presentValue, pv?.priority ?? 16);\n  }\n\n  static parse(message: any): MqttPointValue {\n    try {\n      let payload = isJSON(message) ? message : JSON.parse(message);\n      return new MqttPointValue(payload?.value, payload?.priority);\n    } catch (e) {\n      throw new Error('Invalid JSON when parsing MQTTMessage');\n    }\n  }\n\n  to(): PointValue {\n    return PointValueCreator.init(this.value, this.priority);\n  }\n\n  toString() {\n    return JSON.stringify(this);\n  }\n}\n\n//To support NubeIO request/response pattern. It should be removed in future\nexport class SillyMqttPoint extends DefaultMqttPoint implements MqttPoint {\n  readonly isReqRes: boolean = false;\n\n  private constructor(mqttPoint: MqttPoint, isReqRes: boolean) {\n    super(mqttPoint.enabled, mqttPoint.mqttTopic, mqttPoint.pointValue);\n    this.isReqRes = isReqRes;\n  }\n\n  static by = (mqttPoint: MqttPoint, isReqRes: boolean): SillyMqttPoint => {\n    return isNull(mqttPoint) ? null : new SillyMqttPoint(mqttPoint, isReqRes);\n  };\n\n  mightOnlyValueChanged(point: MqttPoint): boolean {\n    return super.mightOnlyValueChanged(point) && this.isReqRes === (<SillyMqttPoint>point)?.isReqRes;\n  }\n\n  subscribedTopic(): string {\n    return this.isReqRes ? `${this.mqttTopic}/req` : this.mqttTopic;\n  }\n\n  publishedTopic(): string {\n    return this.isReqRes ? `${this.mqttTopic}/res` : this.mqttTopic;\n  }\n}\n","import { Constructor, isEmpty, isFunction, isJSON } from '../../../../utils/helper';\nimport { IdGenerator } from '../../../../utils/id-generator';\nimport {\n  HasCentralizedListener,\n  ICentralizedListener,\n  IMessageConverter,\n  IMessageSubscriber,\n  MockCentralizedListener,\n  NodeStoreItem,\n} from '../../../../utils/pattern';\nimport { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { Side } from '../../../node-interface';\nimport { NodeInput, NodeSetting, Type } from '../../../node-io';\nimport { AbleEnableNode, NodeInputEvaluation } from '../../node-mixin';\nimport { DependantConnectionNode, DependantConnectionNodeMixin } from '../connection-node-mixin';\nimport {\n  MQTT_CLIENT_NODE,\n  PUBLISH_MQTT_DATA,\n  REGISTER_MQTT_PUBLISHER,\n  REGISTER_MQTT_SUBSCRIBER,\n  UNREGISTER_MQTT_PUBLISHER,\n  UNREGISTER_MQTT_SUBSCRIBER,\n  UPDATE_MQTT_PUBLISHER,\n  UPDATE_MQTT_SUBSCRIBER,\n} from './mqtt-client-node';\n\nfunction MqttGenericNodeMixin<TBase extends Constructor<Node>>(Base: TBase) {\n  abstract class MqttGenericNodeMixinBase extends AbleEnableNode(Base)\n    implements NodeInputEvaluation, HasCentralizedListener {\n    protected readonly _iTopic = 'topic';\n\n    onAdded(): void {\n      if (this.side !== Side.server) {\n        return;\n      }\n      this.handleOnUpdate(this.createPayload());\n      this.updateTitle();\n    }\n\n    onAfterSettingsChange(oldSettings, oldName?): void {\n      if (this.side !== Side.server) {\n        return;\n      }\n      this.handleOnUpdate(this.createPayload(), this.createPayload(oldSettings));\n      this.updateTitle();\n    }\n\n    onInputUpdated(): void {\n      if (this.side !== Side.server) {\n        return;\n      }\n      let prev = this.createPayload();\n      this.reEvaluateSettingByInput(this.inputs, this.settings);\n      this.handleOnUpdate(this.createPayload(), prev);\n      this.updateTitle();\n    }\n\n    onRemoved() {\n      if (this.listener() === MockCentralizedListener.LISTENER) {\n        return;\n      }\n      this.listener().listen({ action: this.unregisterAction(), payload: this.createPayload() });\n    }\n\n    reEvaluateSettingByInput(inputs: { [p: number]: NodeInput }, settings: { [name: string]: NodeSetting }) {\n      settings[this._iTopic].value = inputs[this.topicInputIdx()].updated ? inputs[this.topicInputIdx()].data\n                                                                          : settings[this._iTopic].value;\n      if (isFunction(super['reEvaluateSettingByInput'])) {\n        super['reEvaluateSettingByInput'](inputs, settings);\n      }\n    }\n\n    listener(): ICentralizedListener {\n      return MockCentralizedListener.cast(this.getParentNode());\n    }\n\n    protected abstract topicInputIdx(): number;\n\n    protected abstract updateTitle(): void;\n\n    protected abstract registerAction(): string;\n\n    protected abstract updateAction(): string;\n\n    protected abstract unregisterAction(): string;\n\n    protected abstract doAfterUpdate(current: NodeStoreItem, prev?: NodeStoreItem): any;\n\n    protected mixinMqttTopicInputSetting() {\n      this.addInputWithSettings(this._iTopic, Type.STRING, '', 'MQTT Topic');\n    }\n\n    protected handleOnUpdate(current: NodeStoreItem, prev?: NodeStoreItem): any {\n      if (!prev?.identifier && !current?.identifier) {\n        return;\n      }\n      if (isEmpty(current.identifier)) {\n        throw new Error('Must define MQTT topic');\n      }\n      if (this.shouldRegister(prev)) {\n        this.listener().listen({ action: this.registerAction(), payload: current });\n      } else if (current.identifier !== prev.identifier || current.enabled !== prev.enabled) {\n        current.prev = prev;\n        this.listener().listen({ action: this.updateAction(), payload: current });\n      }\n      this.doAfterUpdate(current, prev);\n    }\n\n    protected createPayload(settings?: NodeSetting): NodeStoreItem {\n      let identifier = (settings ?? this.settings)['topic']?.value;\n      let enabled = settings ? settings[this.enableSettingKey()]?.value : this.isEnabled();\n      return {\n        identifier: identifier,\n        nodeId    : IdGenerator.createNodeId(this.cid, this.id),\n        enabled   : enabled,\n      } as NodeStoreItem;\n    }\n\n    protected shouldRegister(prev: NodeStoreItem) {\n      return !prev || !prev.identifier;\n    }\n\n  }\n\n  return MqttGenericNodeMixinBase;\n}\n\n// Need to mixin to keep call chain to update status\nabstract class MqttGenericNode extends DependantConnectionNodeMixin(MqttGenericNodeMixin(Node))\n  implements DependantConnectionNode, HasCentralizedListener {\n  protected _title: string;\n\n  protected constructor(title: string, description: string) {\n    super();\n    this._title = this.title = title;\n    this.description = description;\n    this.mixinEnableInputSetting();\n    this.mixinConnectionStatusOutput();\n    this.mixinMqttTopicInputSetting();\n  }\n\n  protected statusOutputIdx(): number {\n    return 0;\n  }\n\n  protected enableDescription(): string {\n    return `Enable ${this._title}`;\n  }\n\n  protected updateTitle() {\n    this.title = `${this._title} (${this.settings['topic'].value})`;\n  }\n\n  protected topicInputIdx() {\n    return 1;\n  }\n\n  protected shouldRegister(prev: NodeStoreItem) {\n    return super.shouldRegister(prev) || this.getConnectionStatus().isError();\n  }\n\n  protected handleError(err: Error, func: string) {\n    super.handleError(err, func);\n  }\n}\n\nclass MqttPublisherNode extends MqttGenericNode implements IMessageConverter {\n\n  constructor() {\n    super('MQTT Publisher', `MQTT Publisher Node is used to publish MQTT message for generic purpose`);\n    this.addInputWithSettings('is-json', Type.BOOLEAN, false, 'MQTT Message is JSON type');\n    this.addInputWithSettings('message', Type.ANY, '', 'MQTT Message');\n  }\n\n  onConvertMessage(data: any): string {\n    return isJSON(data) ? JSON.stringify(data) : data?.toString();\n  }\n\n  reEvaluateSettingByInput(inputs: { [p: number]: NodeInput }, settings: { [name: string]: NodeSetting }) {\n    super.reEvaluateSettingByInput(inputs, settings);\n    this.settings['is-json'].value = this.inputs[2].updated ? this.inputs[2].data : this.settings['is-json'].value;\n    this.settings['message'].value = this.inputs[3].updated ? this.inputs[3].data : this.settings['message'].value;\n  }\n\n  protected registerAction(): string {\n    return REGISTER_MQTT_PUBLISHER;\n  }\n\n  protected updateAction(): string {\n    return UPDATE_MQTT_PUBLISHER;\n  }\n\n  protected unregisterAction(): string {\n    return UNREGISTER_MQTT_PUBLISHER;\n  }\n\n  protected createPayload(settings?: NodeSetting): NodeStoreItem {\n    let payload = super.createPayload(settings);\n    payload.callback = data => this.onConvertMessage(data);\n    payload.data = this.settings['message'].value;\n    return payload;\n  }\n\n  protected doAfterUpdate(current: NodeStoreItem, prev?: NodeStoreItem): any {\n    if (isEmpty(current?.data) && (prev?.identifier && current.identifier !== prev.identifier || isEmpty(prev?.data))) {\n      return current;\n    }\n    if (current?.enabled) {\n      if (this.settings['is-json'].value && !isJSON(current.data)) {\n        try {\n          current.data = isEmpty(current.data) ? {} : JSON.parse(current.data);\n        } catch (err) {\n          this.debug(err);\n          throw new Error(`Payload is invalid JSON in MQTT publisher on topic ${current.identifier}`);\n        }\n      }\n      return this.listener().listen({ action: PUBLISH_MQTT_DATA, payload: current });\n    }\n  }\n\n}\n\nclass MqttSubscriberNode extends MqttGenericNode implements IMessageSubscriber {\n  constructor() {\n    super('MQTT Subscriber', `MQTT Subscriber Node is used for generic purpose`);\n    this.addOutput('out', Type.ANY);\n  }\n\n  onReceiveMessage(incomingMessage: any): void {\n    this.setOutputData(this.errorOutputIdx() + 1, incomingMessage);\n  }\n\n  protected registerAction(): string {\n    return REGISTER_MQTT_SUBSCRIBER;\n  }\n\n  protected updateAction(): string {\n    return UPDATE_MQTT_SUBSCRIBER;\n  }\n\n  protected unregisterAction(): string {\n    return UNREGISTER_MQTT_SUBSCRIBER;\n  }\n\n  protected createPayload(settings?: NodeSetting): NodeStoreItem {\n    let payload = super.createPayload(settings);\n    payload.callback = (out: any) => this.onReceiveMessage(out);\n    return payload;\n  }\n\n  protected doAfterUpdate(current: NodeStoreItem, prev?: NodeStoreItem): any {\n\n  }\n}\n\nContainer.registerNodeType('protocols/mqtt/mqtt-subscriber', MqttSubscriberNode, MQTT_CLIENT_NODE);\nContainer.registerNodeType('protocols/mqtt/mqtt-publisher', MqttPublisherNode, MQTT_CLIENT_NODE);\n","import { exec } from 'child_process';\nimport * as fs from 'fs';\nimport { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport CryptoUtils from '../../../utils/crypto-utils';\nimport { NODE_INFO } from '../../../node-info';\n\nclass MqttBroker extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/mqtt-broker\"][\"mqtt-broker\"].title;\n    this.description = NODE_INFO[\"protocols/mqtt-broker\"][\"mqtt-broker\"].description;\n\n    this.addInput('ping broker', Type.STRING);\n    this.addOutput('status', Type.STRING);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('debug', Type.STRING);\n\n    this.settings['enable'] = NodeSetting.create({\n      description: 'Broker enable',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['authentication'] = NodeSetting.create({\n      description: 'Use Authentication',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['username'] = NodeSetting.create({ description: 'User name', value: '', type: SettingType.STRING });\n    this.settings['password'] = NodeSetting.create({ description: 'Password', value: '', type: SettingType.PASSWORD });\n    //this.settings['password'] = NodeSetting.create({ description: 'Password', value: '', type: SettingType.STRING });\n\n    this.setSettingsConfig({\n      groups: [\n        { enable: {}, authentication: {} },\n        { username: {}, password: {} },\n      ],\n      conditions: {\n        username: setting => {\n          return !!setting['authentication'].value;\n        },\n        password: setting => {\n          return !!setting['authentication'].value;\n        },\n      },\n    });\n\n    this.properties['useAuthentication'];\n  }\n\n  async onRemoved() {\n    // super.onRemoved();\n    await this.stopBroker()\n      .then(e => {\n        console.log(e);\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return; // only execute on server\n    const username = this.settings['username'].value;\n    const password = this.settings['password'].value;\n    const decryptPass = { username, password: CryptoUtils.decrypt(password) };\n    console.log('password', decryptPass);\n\n    this.statusBroker()\n      .then(e => {\n        this.setOutputData(0, e);\n        this.setOutputData(1, false);\n      })\n      .catch(err => {\n        this.setOutputData(0, false);\n        this.setOutputData(1, true);\n      });\n  }\n\n  onAfterSettingsChange() {\n    const enable = this.settings['enable'].value;\n    if (enable) {\n      this.startBroker()\n        .then(e => {\n          this.onInputUpdated(); //call to get broker status (TODO not the best but to busy to care)\n        })\n        .catch(err => {\n          this.setOutputData(0, false);\n          this.setOutputData(1, true);\n        });\n\n      this.checkAuthentication();\n    } else if (enable === false) {\n      this.stopBroker()\n        .then(e => {\n          this.onInputUpdated(); //call to get broker status\n        })\n        .catch(err => {\n          this.onInputUpdated(); //call to get broker status\n        });\n    }\n  }\n\n  stopBroker() {\n    return new Promise((resolve, reject) => {\n      let command = `sudo systemctl stop mosquitto`;\n      exec(command, (err, stdout, stderr) => {\n        if (err) {\n          reject({ err, stderr });\n        } else {\n          resolve(stdout);\n        }\n      });\n    });\n  }\n\n  statusBroker() {\n    return new Promise((resolve, reject) => {\n      let command = `ps -A | grep -i mosquitto | grep -v grep`;\n      exec(command, (err, stdout, stderr) => {\n        if (err) {\n          reject(false);\n        } else {\n          resolve(true);\n        }\n      });\n    });\n  }\n\n  startBroker() {\n    return new Promise((resolve, reject) => {\n      let command = `sudo systemctl start mosquitto`;\n      exec(command, (err, stdout, stderr) => {\n        if (err) {\n          console.log(err);\n          reject({ err, stderr });\n        } else {\n          resolve(stdout);\n        }\n      });\n    });\n  }\n\n  checkAuthentication() {\n    const path = '/etc/mosquitto/';\n    const configFile = 'mosquitto.conf';\n    const passwordFile = 'MQTTPasswords.txt';\n    if (this.settings['authentication'].value && !this.properties['useAuthentication']) {\n      this.properties['useAuthentication'] = this.settings['authentication'].value;\n      const username = this.settings['username'].value;\n      const password = this.settings['password'].value;\n      if (!username || !password) {\n        this.setOutputData(1, 'Invalid Credentials');\n        this.debugErr('Invalid Credentials');\n        return;\n      }\n      const command = 'sudo mosquitto_passwd -U ' + path + passwordFile;\n      fs.writeFile(path + passwordFile, username + ':' + password, err => {\n        if (err) {\n          this.setOutputData(1, err);\n          this.debugErr(err);\n          return;\n        }\n        try {\n          exec(command, (err, stdout, stderr) => {\n            if (stdout) {\n              this.setOutputData(1, stdout);\n              this.debugErr(stdout);\n              return;\n            }\n            if (err) {\n              this.setOutputData(1, err);\n              this.debugErr(err);\n              return;\n            }\n            if (stderr) {\n              this.setOutputData(1, stderr);\n              this.debugErr(stderr);\n              return;\n            }\n          });\n          fs.readFile(path + configFile, (err, buff) => {\n            if (err) {\n              this.setOutputData(1, err);\n              this.debugErr(err);\n              return;\n            }\n            let text = buff.toString('utf8');\n            this.setOutputData(2, text);\n            const allowAnonymousIndex = text.indexOf('allow_anonymous ');\n            if (allowAnonymousIndex >= 0) {\n              const allowAnonymous = text.slice(allowAnonymousIndex, allowAnonymousIndex + 22);\n              let allowAnonymousArray = allowAnonymous.split(' ');\n              if (allowAnonymousArray[1] == 'true') allowAnonymousArray[1] = 'false';\n              text.replace(\n                allowAnonymous,\n                allowAnonymousArray[0] + ' ' + allowAnonymousArray[1] + '       \\n',\n              );\n            } else {\n              text += '\\nallow_anonymous true     \\n';\n            }\n            const passwordRefIndex = text.indexOf('password_file ');\n            if (passwordRefIndex >= 0) {\n              const passwordRef = text.slice(passwordRefIndex, passwordRefIndex + 50);\n              let passwordRefArray = passwordRef.split(' ');\n              if (passwordRefArray[1] !== path + passwordFile) {\n                passwordRefArray[1] = path + passwordFile;\n                text = text.replace(\n                  passwordRef,\n                  passwordRefArray[0] + ' ' + passwordRefArray[1] + '       \\n',\n                );\n              }\n            } else {\n              text += '\\npassword_file /etc/mosquitto/MQTTPasswords.txt     \\n';\n            }\n            fs.writeFile(path + configFile, text, err => {\n              if (err) {\n                this.setOutputData(1, err);\n                this.debugErr(err);\n                return;\n              }\n            });\n            exec('sudo systemctl restart mosquitto', (err, stdout, stderr) => {\n              if (stdout) {\n                this.setOutputData(1, stdout);\n                this.debugErr(stdout);\n                return;\n              }\n              if (err) {\n                this.setOutputData(1, err);\n                this.debugErr(err);\n                return;\n              }\n              if (stderr) {\n                this.setOutputData(1, stderr);\n                this.debugErr(stderr);\n                return;\n              }\n            });\n          });\n        } catch (e) {\n          this.setOutputData(1, e);\n          this.debugErr(e);\n          return;\n        }\n      });\n    } else if (!this.settings['authentication'].value && this.properties['useAuthentication']) {\n      this.properties['useAuthentication'] = this.settings['authentication'].value;\n      fs.unlink(path + passwordFile, err => {\n        if (err) {\n          this.setOutputData(2, err);\n          this.debugErr(err);\n          return;\n        }\n      });\n      fs.readFile(path + configFile, (err, buff) => {\n        if (err) {\n          this.setOutputData(1, err);\n          this.debugErr(err);\n          return;\n        }\n        let text = buff.toString('utf8');\n        this.setOutputData(2, text);\n        const allowAnonymousIndex = text.indexOf('allow_anonymous ');\n        if (allowAnonymousIndex >= 0) {\n          const allowAnonymous = text.slice(allowAnonymousIndex, allowAnonymousIndex + 22);\n          let allowAnonymousArray = allowAnonymous.split(' ');\n          if (allowAnonymousArray[1] == 'false') allowAnonymousArray[1] = 'true';\n          text = text.replace(\n            allowAnonymous,\n            allowAnonymousArray[0] + ' ' + allowAnonymousArray[1] + '   ',\n          );\n        } else {\n          text += '\\nallow_anonymous false     \\n';\n        }\n        fs.writeFile(path + configFile, text, err => {\n          if (err) {\n            this.setOutputData(1, err);\n            this.debugErr(err);\n            return;\n          }\n        });\n        exec('sudo systemctl restart mosquitto', (err, stdout, stderr) => {\n          if (stdout) {\n            this.setOutputData(1, stdout);\n            this.debugErr(stdout);\n            return;\n          }\n          if (err) {\n            this.setOutputData(1, err);\n            this.debugErr(err);\n            return;\n          }\n          if (stderr) {\n            this.setOutputData(1, stderr);\n            this.debugErr(stderr);\n            return;\n          }\n        });\n      });\n    }\n  }\n}\n\nContainer.registerNodeType('protocols/mqtt-broker/mqtt-broker', MqttBroker);\n","import { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { Type } from '../../../node-io';\nimport { NODE_INFO } from '../../../node-info';\n\nclass MqttTopicPartsNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/mqtt\"][\"mqtt-topic-extractor\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO[\"protocols/mqtt\"][\"mqtt-topic-extractor\"]+ `\\n `+\n      `## Settings\\n ` +\n      ` Index will let you select the part of the topic that you want to extract ***topic/abc/123*** \\n `+\n      ` For example if the ***topic*** = ***topic/abc/123***  and ***index*** = 1 the the node ***output*** will = ***abc*** \\n `+\n      `## Inputs\\n ` +\n      ` The input data must be a sting and in a topic format like ***topic/abc/123*** \\n `+\n      `## Outputs\\n ` +\n      ` ***output*** will return the ***index*** selection \\n `+\n      ` ***output-all*** (Returns an array) will return all the topic parts\\n `+\n      ` For example if the ***topic*** = ***topic/abc/123***  the  ***output-all*** will return ***[topic, abc, 123]***\\n `\n    this.addInput('input', Type.STRING);\n    this.addInputWithSettings('index', Type.NUMBER, 0, 'Index', false);\n    this.addOutput('output', Type.STRING);\n    this.addOutput('output-all', Type.JSON);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const text = this.getInputData(0);\n    const index = this.getInputData(1);\n    if (text != null && index != null) {\n      const topic = text.split('/')\n      this.setOutputData(0, topic[index], true);\n      this.setOutputData(1, topic, true);\n    } else {\n      this.setOutputData(0, null, true);\n      this.setOutputData(1, null, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType('protocols/mqtt/mqtt-topic-extractor', MqttTopicPartsNode);\n","import { Container } from '../../../container';\nimport { FlexibleNode } from '../../../flexible-node';\nimport { Type } from '../../../node-io';\nimport { NODE_INFO } from '../../../node-info';\n\nclass MQTTTopicBuilderNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.STRING;\n    super.dynamicInputsStartName = 'string';\n    this.title = NODE_INFO[\"protocols/mqtt\"][\"topic-builder\"].title;\n    //TODO Should re-update\n    this.description = NODE_INFO[\"protocols/mqtt\"][\"topic-builder\"].description; \n   \n    this.addOutput('output', Type.STRING);\n    this.setOutputData(0, null);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const inputs = this.getInputsCount();\n    let output = '';\n    for (let i = this.dynamicInputStartPosition; i < inputs; i++) {\n      const value = (this.getInputData(i) || '').toString(); // making string null i.e `''` and other `null` same\n      if (value != ''){\n        if(output != '') output = output.concat('/');\n        output = output.concat(value);\n        //if(i !== (inputs - 1)) output = output.concat('/');\n      }\n    }\n    this.setOutputData(0, output, true);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType('protocols/mqtt/topic-builder', MQTTTopicBuilderNode);\n","import { isNull } from '../../../../utils/helper';\nimport { Container } from '../../../container';\nimport { Node } from '../../../node';\nimport { NODE_INFO } from '../../../node-info';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport SerialUtils from '../../../utils/serial-utils';\n\nconst SerialPort = require('serialport');\n\nclass SerialConnectorNode extends Node {\n  baudRates = [110, 300, 600, 1200, 2400, 4800, 9600, 14400, 19200, 38400, 57600, 115200, 128000, 256000];\n  isConnected = false;\n  port = null;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO[\"protocols/misc\"][\"serial-connector\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO[\"protocols/misc\"][\"serial-connector\"].description + `\\n ` +\n      `   \\n ` +\n      `## Nube LoRa Raw Baud Rate\\n ` +\n      ` Default Baud Rate For Nube LoRa Raw is ***38400*** \\n `\n    this.addInput('writeValue', Type.STRING);\n    this.addInput('enable', Type.BOOLEAN);\n    this.addInput('list-ports', Type.BOOLEAN);\n    // this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addOutput('output', Type.STRING);\n    this.addOutput('error', Type.STRING);\n    this.addOutput('status', Type.BOOLEAN);\n    this.addOutput('last-message', Type.STRING);\n    this.addOutput('active-ports', Type.BOOLEAN);\n    this.settings['manualPort'] = NodeSetting.create({\n      description: 'Enter port manually',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['port'] = NodeSetting.create({\n      description: 'Serial Port',\n      value: '/dev/ttyUSB2',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: '/dev/ttyUSB2', text: 'RS485-1 (/dev/ttyUSB2)' },\n          { value: '/dev/ttyUSB3', text: 'RS485-2 (/dev/ttyUSB3)' },\n          { value: '/dev/ttyUSB1', text: 'Xbee-1 (/dev/ttyUSB1)' },\n          { value: '/dev/ttyUSB0', text: 'Xbee-2 (/dev/ttyUSB0)' },\n          { value: '/dev/ttyAMA0', text: 'Xbee-3 (/dev/ttyAMA0)' },\n          { value: '/dev/ttyUSB4', text: 'USB Port (/dev/ttyUSB4)' },\n          { value: '/dev/ttyS1', text: 'Edge28 Expansion (/dev/ttyS1)' },\n        ],\n      },\n    });\n    this.settings['manualPortNum'] = NodeSetting.create({\n      description: 'Enter port number',\n      value: '/dev/ttyACM0',\n      type: SettingType.STRING,\n    });\n    this.settings['baudRate'] = NodeSetting.create({\n      description: 'Baud rate',\n      value: this.baudRates[6],\n      type: SettingType.DROPDOWN,\n      config: {\n        items: this.baudRates.map(baudRate => {\n          return { value: baudRate, text: baudRate };\n        }),\n      },\n    });\n    this.setOutputData(0, null);\n    this.setOutputData(1, false);\n    this.setOutputData(2, null);\n\n    this.setSettingsConfig({\n      conditions: {\n        manualPortNum: setting => {\n          return setting['manualPort'].value;\n        },\n        port: setting => {\n          return !setting['manualPort'].value;\n        },\n      },\n    });\n\n  }\n\n  onInputUpdated() {\n    if (!this.isConnected) {\n      this.connectToSerialPort();\n    } else if (this.isConnected && !this.getInputData(1)) {\n      this.isConnected = false;\n      this.clearOutputs();\n      this.closePort();\n      return;\n    }\n\n    this.writePortData(this.getInputData(0));\n\n    if (this.getInputData(2) === true) {\n      this.listPorts();\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.connectToSerialPort();\n  }\n\n  onRemoved() {\n    this.closePort();\n  }\n\n  connectToSerialPort() {\n    if (this.side !== Side.server) return;\n\n    this.clearOutputs();\n    this.closePort();\n\n    if (!this.getInputData(1)) return;\n    let portName = this.settings['port'].value;\n    const manualPort = this.settings['manualPort'].value;\n    const manualPortNum = this.settings['manualPortNum'].value;\n\n    if (manualPort) {\n      if (manualPort === isNull) {\n        portName = portName\n      } else portName = manualPortNum\n    }\n\n    let baudRate = this.settings['baudRate'].value;\n\n    if (!portName) {\n      this.debugErr('Port name is not defined!');\n      this.setOutputData(1, 'Port name is not defined!');\n      return;\n    }\n\n    this.port = new SerialPort(portName, { baudRate: baudRate, autoOpen: false });\n\n    this.port.on('open', () => {\n      this.isConnected = true;\n      this.setOutputData(2, this.isConnected);\n      this.debugInfo('Port connected');\n    });\n\n    this.port.on('error', err => {\n      this.port = null; // this.port contains a serial object but it can't close since it never been opened\n      this.isConnected = false;\n      this.setOutputData(1, err.message);\n      this.setOutputData(2, this.isConnected);\n      this.debugErr(err.message);\n    });\n\n    this.port.on('close', () => {\n      this.debugInfo(this.isConnected ? 'Port closed. Gateway disconnected.' : 'Port closed');\n      this.isConnected = false;\n      this.setOutputData(2, this.isConnected);\n    });\n\n    this.port.on('disconnect', () => {\n      this.isConnected = false;\n      this.setOutputData(2, this.isConnected);\n      this.debugInfo('Disconnected');\n    });\n\n    const Readline = SerialPort.parsers.Readline;\n    const parser = this.port.pipe(new Readline({ delimiter: '\\n' }));\n    parser.on('data', data => this.readPortData(data));\n\n    this.debugInfo('Connecting to ' + portName + ' at ' + baudRate + '...');\n    this.port.open();\n  }\n\n  private clearOutputs() {\n    this.setOutputData(0, null);\n    this.setOutputData(1, null);\n    this.setOutputData(2, false);\n  }\n\n  private listPorts() {\n    SerialUtils.listPorts()\n      .then(e => {\n        this.setOutputData(4, e);\n      })\n      .catch(err => {\n        this.setOutputData(4, err);\n      });\n  }\n\n  private closePort() {\n    if (this.port) {\n      this.port.close();\n    }\n    this.port = null;\n  }\n\n  private readPortData(data) {\n    this.setOutputData(0, data);\n    this.setOutputData(3, this.formattedExecutionTime());\n  }\n\n  private writePortData(message) {\n    if (message) {\n      //TODO: temporary fix\n      //  any byte over 128 gets message up (nodejs serialPort must use signed bytes for strings for some dumb reason...)\n      //  best solution is to be able to send an array to this (typeof [1,2,3] === 'object')\n      //  couldn't get it working for now so sending to this node as a JSON string for now\n      try {\n        message = Buffer.from(JSON.parse(message));\n      } catch (e) { }\n\n      try {\n        this.port.write(message);\n      } catch (e) {\n        this.setOutputData(1, e.message);\n      }\n    }\n  }\n}\n\nContainer.registerNodeType('protocols/misc/serial-connector', SerialConnectorNode);\n","const SerialPort = require('serialport');\n\nexport default class SerialUtils {\n  /**\n   * Get a list of active serial ports on linux\n   * @returns {object}\n   */\n\n  static listPorts() {\n    return new Promise<Array<any>>((resolve, reject) => {\n      try {\n        let portList = [];\n        SerialPort.list().then(ports => {\n          ports.forEach(port => {\n            portList.push(port);\n          });\n          resolve(portList);\n        });\n      } catch (err) {\n        reject(err);\n      }\n    });\n  }\n}\n","import * as moment from 'moment-timezone';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport UuidUtils from '../../utils/uuid-utils';\n\nclass WeeklyScheduleNode extends Node {\n  daysArray = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.schedule[\"weekly-schedule\"].title;\n    this.description = NODE_INFO.schedule[\"weekly-schedule\"].description;\n\n    this.addOutput('output', Type.BOOLEAN);\n\n    this.settings['enable'] = NodeSetting.create({\n      description: 'Schedule Enable',\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.settings['stringScheduleName'] = NodeSetting.create({\n      //description: 'Schedule Name String',\n      description: 'Schedule Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n\n    this.settings['timezone'] = NodeSetting.create({\n      description: 'TIMEZONE: Enter the timezone',\n      value: moment.tz.guess(),\n      type: SettingType.STRING,\n    });\n\n    this.settings['startHour'] = NodeSetting.create({\n      description: 'Start Time',\n      value: 7,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: this.makeHoursDropdown(),\n      },\n    });\n    this.settings['startMin'] = NodeSetting.create({\n      description: '',\n      value: 0,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: this.makeMinsDropdown(),\n      },\n    });\n\n    this.settings['endHour'] = NodeSetting.create({\n      description: 'End Time',\n      value: 19,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: this.makeHoursDropdown(),\n      },\n    });\n    this.settings['endMin'] = NodeSetting.create({\n      description: '',\n      value: 0,\n      type: SettingType.DROPDOWN,\n      config: {\n        items: this.makeMinsDropdown(),\n      },\n    });\n\n    this.settings['sunday'] = NodeSetting.create({\n      description: 'sunday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['monday'] = NodeSetting.create({\n      description: 'monday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['tuesday'] = NodeSetting.create({\n      description: 'tuesday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['wednesday'] = NodeSetting.create({\n      description: 'wednesday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['thursday'] = NodeSetting.create({\n      description: 'thursday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['friday'] = NodeSetting.create({\n      description: 'friday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['saturday'] = NodeSetting.create({\n      description: 'saturday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.settings['payload'] = NodeSetting.create({\n      description: 'Schedule Payload',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n\n    this.setSettingsConfig({\n      groups: [\n        { startHour: {}, startMin: {} },\n        { endHour: {}, endMin: {} },\n      ],\n    });\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    var scheduleOutput = { weekly: {}, events: {} };\n    if (!this.settings['enable'].value) return scheduleOutput;\n    const schedID = UuidUtils.createUUID();\n    const tzOffset = moment.tz(this.settings['timezone'].value).utcOffset();\n    const offsetHours = Math.floor(tzOffset / 60);\n    const offsetMins = tzOffset % 60;\n    var rolloverFlag = 0;\n    var startHourUTC = this.settings['startHour'].value - offsetHours;\n    if (startHourUTC < 0) {\n      rolloverFlag = -1;\n      startHourUTC = startHourUTC + 24;\n    } else if (startHourUTC > 24) {\n      rolloverFlag = 1;\n      startHourUTC = startHourUTC - 24;\n    }\n    var startMinsUTC = this.settings['startMin'].value - offsetMins;\n    if (startMinsUTC < 0) startMinsUTC = startMinsUTC + 60;\n    else if (startMinsUTC >= 60) startMinsUTC = startMinsUTC - 60;\n    var endHourUTC = this.settings['endHour'].value - offsetHours;\n    if (endHourUTC < 0) {\n      endHourUTC = endHourUTC + 24;\n    } else if (endHourUTC > 24) {\n      endHourUTC = endHourUTC - 24;\n    }\n    var endMinsUTC = this.settings['endMin'].value - offsetMins;\n    if (endMinsUTC < 0) endMinsUTC = endMinsUTC + 60;\n    else if (endMinsUTC >= 60) endMinsUTC = endMinsUTC - 60;\n\n    const sundayIndex = this.settings['sunday'].value && rolloverFlag == -1 ? 7 : 0;\n    const saturdayIndex = this.settings['saturday'].value && rolloverFlag == 1 ? -1 : 6;\n    var daysOutput = [];\n    this.settings['sunday'].value ? daysOutput.push(this.daysArray[sundayIndex + rolloverFlag]) : null;\n    this.settings['monday'].value ? daysOutput.push(this.daysArray[1 + rolloverFlag]) : null;\n    this.settings['tuesday'].value ? daysOutput.push(this.daysArray[2 + rolloverFlag]) : null;\n    this.settings['wednesday'].value ? daysOutput.push(this.daysArray[3 + rolloverFlag]) : null;\n    this.settings['thursday'].value ? daysOutput.push(this.daysArray[4 + rolloverFlag]) : null;\n    this.settings['friday'].value ? daysOutput.push(this.daysArray[5 + rolloverFlag]) : null;\n    this.settings['saturday'].value ? daysOutput.push(this.daysArray[saturdayIndex + rolloverFlag]) : null;\n\n    scheduleOutput.weekly = {\n      [schedID]: {\n        colour: '#FFFFFF',\n        name: this.settings['stringScheduleName'].value || 'unknownSchedule',\n        start: `${String(startHourUTC).padStart(2, '0')}:${String(startMinsUTC).padStart(2, '0')}`,\n        end: `${String(endHourUTC).padStart(2, '0')}:${String(endMinsUTC).padStart(2, '0')}`,\n        days: daysOutput,\n        value: this.settings['payload'].value,\n        id: schedID,\n      },\n    };\n    this.setOutputData(0, scheduleOutput);\n  }\n\n  makeHoursDropdown() {\n    var hoursArray = [];\n    for (var h = 0; h < 24; h++) {\n      hoursArray.push({ value: h, text: String(h).padStart(2, '0') });\n    }\n    return hoursArray;\n  }\n\n  makeMinsDropdown() {\n    var minsArray = [];\n    for (var m = 0; m < 60; m++) {\n      minsArray.push({ value: m, text: String(m).padStart(2, '0') });\n    }\n    return minsArray;\n  }\n}\n\nContainer.registerNodeType('schedule/weekly-schedule', WeeklyScheduleNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\n\nclass ScheduleMergeNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicSettingsExist = false;\n    this.dynamicInputsType = Type.STRING;\n    this.title = NODE_INFO.schedule[\"schedule-merge\"].title;\n    this.description = NODE_INFO.schedule[\"schedule-merge\"].description;\n\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('error', Type.STRING);\n  }\n\n  onAdded() {\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    var weeklyOutput = {};\n    var eventOutput = {};\n    var inputString;\n    var inputObject;\n    for (var i = 0; i < this.getInputsCount(); i++) {\n      inputString = this.getInputData(i);\n      if (!inputString) continue;\n      try {\n        inputObject = JSON.parse(inputString);\n        for (var weeklySched in inputObject.weekly) {\n          weeklyOutput[weeklySched] = inputObject.weekly[weeklySched];\n        }\n        for (var eventSched in inputObject.events) {\n          weeklyOutput[eventSched] = inputObject.events[eventSched];\n        }\n        this.setOutputData(0, { weekly: weeklyOutput, events: eventOutput });\n      } catch (e) {\n        this.setOutputData(1, e);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType('schedule/schedule-merge', ScheduleMergeNode);\n","//import * as moment from 'moment';\nimport * as moment from 'moment-timezone';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { ScheduleUtils } from './schedule-utils';\n\n/**\n * ScheduleChecker checks the schedule is active or not on current time\n * This node is for checking a formatted schedule JSON: SCHEDULE_MODE.INPUT\n * https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\n */\nexport class ScheduleChecker extends Node {\n  nextStart;\n  nextStop;\n  schedulePayload;\n  constructor() {\n    super();\n    this.title = NODE_INFO.schedule[\"schedule-checker\"].title;\n    this.description = NODE_INFO.schedule[\"schedule-checker\"].description;\n\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable', false);\n    this.addInput('schedules', Type.JSON);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('payload', Type.BOOLEAN);\n    this.addOutput('nextStart', Type.STRING);\n    this.addOutput('nextStop', Type.STRING);\n    this.addOutput('lastCheck', Type.STRING);\n    this.addOutput('error', Type.STRING);\n    /*\n    this.settings['scheduleName'] = NodeSetting.create({\n      description: 'Select Schedule',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [],\n      },\n      value: '',\n    });\n    this.settings['includeStringName'] = NodeSetting.create({\n      description: \"Use 'Schedule Name String' from Below\",\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    */\n\n    this.settings['stringScheduleName'] = NodeSetting.create({\n      //description: 'Schedule Name String',\n      description: 'Schedule Name',\n      value: '',\n      type: SettingType.STRING,\n    });\n\n    this.settings['timezone'] = NodeSetting.create({\n      description: 'TIMEZONE: Enter the timezone',\n      value: moment.tz.guess(),\n      type: SettingType.STRING,\n    });\n\n    this.settings['interval'] = NodeSetting.create({\n      description: 'Schedule Check Interval (minimum 10 seconds)',\n      value: 30,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n\n    this.settings['numericTimeFormat'] = NodeSetting.create({\n      description: 'Timestamp Output Format',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: false, text: 'Timestamps as Strings' },\n          { value: true, text: 'Timestamps as Epoch Numerics' },\n        ],\n      },\n      value: false,\n    });\n\n    this.nextStart = null;\n    this.nextStop = null;\n    this.schedulePayload = null;\n    this.EXECUTE_INTERVAL = 10000;\n  }\n\n  async onAdded() {\n    await this.updateTitle();\n    await this.onInputUpdated();\n  }\n\n  async onInputUpdated() {\n    if (this.side !== Side.server) return;\n    let input = this.getInputData(1) || { weekly: {}, events: {} };\n\n    /*  FOR USE WITH DROPDOWN SCHEDULE SELECTION\n    let weeklyInput = input['weekly'];\n    let eventsInput = input['events'];\n    console.log(weeklyInput, 'schedule weeklyInput');\n    console.log(eventsInput, 'schedule eventsInput');\n    const scheduleNameItems = [];\n    weeklyInput &&\n      Object.keys(weeklyInput).forEach(key => {\n        scheduleNameItems.push(weeklyInput[key].name);\n      });\n    eventsInput &&\n      Object.keys(eventsInput).forEach(key => {\n        if (!scheduleNameItems.includes(eventsInput[key]['name'])) {\n          scheduleNameItems.push(eventsInput[key]['name']);\n        }\n      });\n    // What if the intended schedule isn't in the current JSON when configuring? Can set a 'Schedule Name String' from settings.\n    if (\n      this.settings['includeStringName'].value &&\n      this.settings['stringScheduleName'].value != '' &&\n      !scheduleNameItems.includes(this.settings['stringScheduleName'].value)\n    ) {\n      scheduleNameItems.push(this.settings['stringScheduleName'].value);\n    }\n    console.log(scheduleNameItems, 'scheduleNameItems');\n    let settingsItems = [];\n    scheduleNameItems.forEach(scheduleName => {\n      settingsItems.push({\n        value: scheduleName,\n        text: scheduleName,\n      });\n    });\n    this.settings['scheduleName'].config.items = settingsItems;\n    this.broadcastSettingsToClients();\n    if (scheduleNameItems.length == 0) {\n      this.settings['scheduleName'].value = null;\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, null, true);\n      this.setOutputData(2, null, true);\n      this.setOutputData(3, null, true);\n      this.setOutputData(4, moment(this.executeLastTime).format('YYYY-MM-DDTHH:MM:ss'), true);\n      this.setOutputData(5, true, true);\n      console.log('Schedule Checker Error: no schedule selected');\n      return;\n    } else if (!scheduleNameItems.includes(this.settings['scheduleName'].value)) {\n      this.settings['scheduleName'].value = null;\n      this.setOutputData(0, false, true);\n      this.setOutputData(1, null, true);\n      this.setOutputData(2, null, true);\n      this.setOutputData(3, null, true);\n      this.setOutputData(4, moment(this.executeLastTime).format('YYYY-MM-DDTHH:MM:ss'), true);\n      this.setOutputData(5, false, true);\n      return;\n    }\n    */\n\n    await this.setOutput(input);\n  }\n\n  async onExecute() {\n    await this.setOutput();\n  }\n\n  async updateTitle() {\n    if (\n      this.settings['stringScheduleName'].value != null &&\n      this.settings['stringScheduleName'].value != ''\n    ) {\n      this.title = `Schedule Checker (${this.settings['stringScheduleName'].value})`;\n    } else this.title = 'Schedule Checker (unconfigured)';\n    this.broadcastTitleToClients();\n  }\n\n  async onAfterSettingsChange() {\n    await this.updateTitle();\n    let interval = this.settings['interval'].value;\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    this.EXECUTE_INTERVAL = Math.max(interval, 10000);\n    await this.onInputUpdated();\n  }\n\n  private async setOutput(input = null) {\n    this.nextStart = null;\n    this.nextStop = null;\n    this.schedulePayload = null;\n    if (!input) input = this.getInputData(1) || { weekly: {}, events: {} };\n    //console.log('input1', input)\n\n\n    //const key = this.settings['scheduleName'].value;   FOR USE WITH DROPDOWN SCHEDULE SELECTION\n    const key = this.settings['stringScheduleName'].value;\n    //console.log('key', key)\n    if (key == null || key === '') {\n      this.setOutputData(0, false);\n      this.setOutputData(1, null);\n      this.setOutputData(2, null);\n      this.setOutputData(3, null);\n      this.setOutputData(4, moment(this.executeLastTime).format('YYYY-MM-DDTHH:MM:ss'));\n      this.setOutputData(5, 'Schedule Checker Error: invalid schedule selected');\n      return;\n    }\n\n    //const now = moment();\n    let timeZone = this.settings['timezone'].value;\n    if (!moment.tz.zone(timeZone)) {\n      timeZone = moment.tz.guess();\n    }\n    const now = moment.tz(timeZone);\n    //console.log('now', now.format())\n    //const now = moment('2020-01-21T07:00:00.000+05:00')\n    //const now = moment.tz(\"2020-03-27T01:30\", 'Canada/Pacific');    //for testing\n    //const now = moment.tz(\"2020-03-26T12:30\", 'Australia/Sydney');  //for testing\n    //const now = moment.tz(\"2020-09-25T04:30\", timeZone);            //for testing\n    //console.log(\"now\", now.format())\n\n    const isEnabled = this.getInputData(0);\n    if (input && key && isEnabled) {\n      let weeklyOutput = false;\n      let weeklyScheduleOutput = null;\n      for (var sched in input['weekly']) {\n        if (input['weekly'][sched]['name'] === key) {\n          weeklyScheduleOutput = ScheduleUtils.checkWeeklySchedule(input['weekly'][sched], now); // returns {scheduleStatus, nextStart, nextStop value}\n          weeklyOutput = weeklyScheduleOutput.scheduleStatus || weeklyOutput;\n          this.schedulePayload = weeklyScheduleOutput.value || this.schedulePayload;\n          if (weeklyScheduleOutput.nextStop != null) {\n            if (this.nextStop == null || weeklyScheduleOutput.nextStop.isBefore(this.nextStop)) {\n              this.nextStop = weeklyScheduleOutput.nextStop;\n            }\n          }\n          if(weeklyScheduleOutput.nextStart != null){\n            if (this.nextStart == null || weeklyScheduleOutput.nextStart.isBefore(this.nextStart)) {\n              this.nextStart = weeklyScheduleOutput.nextStart;\n            }\n          }\n        }\n      }\n\n      let eventsOutput = false;\n      let eventScheduleOutput = null;\n      for (var sched in input['events']) {\n        if (input['events'][sched]['name'] === key) {\n          eventScheduleOutput = ScheduleUtils.checkEventsSchedule(input['events'][sched], now); // returns {scheduleStatus, nextStart, nextStop, value}\n          eventsOutput = eventScheduleOutput.scheduleStatus || eventsOutput;\n          this.schedulePayload = eventScheduleOutput.value || this.schedulePayload;\n          if (eventScheduleOutput.nextStop != null) {\n            if (eventScheduleOutput.nextStop.isBefore(this.nextStop) || this.nextStop == null)\n              this.nextStop = eventScheduleOutput.nextStop;\n          }\n          if (eventScheduleOutput.nextStart != null) {\n            if (eventScheduleOutput.nextStart.isBefore(this.nextStart) || this.nextStart == null)\n              this.nextStart = eventScheduleOutput.nextStart;\n          }\n        }\n      }\n      const output = weeklyOutput || eventsOutput;\n\n      this.setOutputData(0, output);\n      this.setOutputData(1, this.schedulePayload);\n      if (this.nextStart != null) {\n        if (!this.settings['numericTimeFormat'].value)\n          this.setOutputData(2, this.nextStart.tz(timeZone).format());\n        else this.setOutputData(2, this.nextStart.valueOf());\n      } else this.setOutputData(2, null);\n\n      if (this.nextStop != null) {\n        if (!this.settings['numericTimeFormat'].value)\n          this.setOutputData(3, this.nextStop.tz(timeZone).format());\n        else this.setOutputData(3, this.nextStop.valueOf());\n      } else this.setOutputData(3, null);\n    } else {\n      this.setOutputData(0, false);\n      this.setOutputData(1, null);\n      this.setOutputData(2, null);\n      this.setOutputData(3, null);\n    }\n    if (!this.settings['numericTimeFormat'].value) {\n      this.setOutputData(\n        4,\n        moment(this.executeLastTime)\n          .tz(timeZone)\n          .format(),\n      );\n    } else this.setOutputData(4, moment(this.executeLastTime).valueOf());\n    this.setOutputData(5, false);\n  }\n}\nContainer.registerNodeType('schedule/schedule-checker', ScheduleChecker);\n","import * as moment from 'moment-timezone';\nimport Utils from '../../utils';\n\nexport class ScheduleUtils {\n  /**\n   * @param eventSchedule\n   * @param dt: {moment} datetime which is to be compared\n   */\n  static checkEventsSchedule(eventSchedule, dt: moment) {\n    if (eventSchedule && Object.prototype.hasOwnProperty.call(eventSchedule, 'dates')) {\n      let eventOutput = false;\n      let nextOn = null;\n      let nextOff = null;\n      let scheduleValue = null;\n      for (let i = 0; i < eventSchedule.dates.length; i++) {\n        const dtUTC = dt.clone().tz('Etc/UTC'); // remove this line and replace dtUTC with dt once testing is complete\n        const startMoment = moment.tz(eventSchedule.dates[i].start, 'Etc/UTC');\n        const endMoment = moment.tz(eventSchedule.dates[i].end, 'Etc/UTC');\n        //console.log('dtUTC', dtUTC.format('YYYY-MM-DDTHH:MM:ss'));\n        //console.log('startMoment', startMoment.format('YYYY-MM-DDTHH:MM:ss'));\n        //console.log('endMoment', endMoment.format('YYYY-MM-DDTHH:MM:ss'));\n        if (dtUTC.isAfter(startMoment) && dtUTC.isBefore(endMoment)) {\n          //return [true, null, endMoment];\n          eventOutput = true;\n          if (eventSchedule && Object.prototype.hasOwnProperty.call(eventSchedule, 'value'))\n            scheduleValue = eventSchedule.value;\n          if (nextOff == null || endMoment.isBefore(nextOff)) {\n            nextOff = endMoment;\n          }\n        } else if (dtUTC.isBefore(startMoment) && dtUTC.isBefore(endMoment)) {\n          //return [false, startMoment, endMoment];\n          if (nextOn == null || startMoment.isBefore(nextOn)) {\n            nextOn = startMoment;\n          }\n          if (nextOff == null || endMoment.isBefore(nextOff)) {\n            nextOff = endMoment;\n          }\n        }\n      }\n      //return [eventOutput, nextOn, nextOff];\n      return {\n        scheduleStatus: eventOutput,\n        nextStart: nextOn,\n        nextStop: nextOff,\n        value: scheduleValue,\n      };\n    }\n    //return [false, null, null];\n    return { scheduleStatus: false, nextStart: null, nextStop: null, value: null };\n  }\n\n  /**\n   * @param weeklySchedule\n   * @param dt: {moment} datetime which is to be compared\n   */\n  static checkWeeklySchedule(weeklySchedule, dt: moment) {\n    let weeklyOutput = false;\n    let nextOn = null;\n    let nextOff = null;\n    let scheduleValue = null;\n\n    if (weeklySchedule) {\n      //console.log(dt)\n      //console.log('dt', dt.format());\n      const dtUTC = dt.clone().tz('Etc/UTC'); // remove this line and replace dtUTC with dt once testing is complete\n      //console.log(\"dtUTC\", dtUTC.format());\n      //console.log(\"dtUTCday\", dtUTC.isoWeekday());\n      //console.log(\"weeklySchedule.days\", weeklySchedule.days);\n      let daysArray = weeklySchedule.days.map(day => {\n        return Utils.getISOday(day);\n      });\n      //console.log(\"daysArray\", daysArray);\n\n      let startArray = weeklySchedule.start.split(':').map(part => {\n        return Number(part);\n      }); // make the start string into an array of numbers [hour,min]\n      let endArray = weeklySchedule.end.split(':').map(part => {\n        return Number(part);\n      }); // make the end string into an array of numbers [hour,min]\n\n      let rolloverFlag = 0;\n      if (startArray[0] > endArray[0]) {\n        // schedule period runs into next day on UTC\n        rolloverFlag = 1;\n      }\n      //console.log('rolloverFlag', rolloverFlag)\n\n      const date = dtUTC.format('YYYY-MM-DD'); //current date in local (tz) time.\n      //console.log('date', date);\n\n      let startMomentArray = daysArray.map(day => {\n        return moment.tz(`${date}T${weeklySchedule.start}:00.000Z`, 'Etc/UTC').isoWeekday(day);\n      });\n      //console.log(\"startMomentArray\", startMomentArray.map((day)=>{return day.format()}));\n\n      let endMomentArray = daysArray.map(day => {\n        return moment\n          .tz(`${date}T${weeklySchedule.end}:00.000Z`, 'Etc/UTC')\n          .isoWeekday(day + rolloverFlag);\n      });\n      //console.log(\"endMomentArray\", endMomentArray.map((day)=>{return day.format()}));\n\n      // check if any of the end moments are more than a week past current moment.\n      // This is for the edge case where there is a sunday that rolls over into a monday.\n      //if (rolloverFlag && endMomentArray.some((end)=>{return dtUTC.add(1, 'week').isBefore(end)})){\n      if (rolloverFlag) {\n        for (let i = 0; i < endMomentArray.length; i++) {\n          if (\n            dtUTC\n              .clone()\n              .add(1, 'weeks')\n              .isBefore(endMomentArray[i])\n          ) {\n            //endMomentArray[i] = endMomentArray[i].subtract(1, 'weeks');\n            endMomentArray[i].subtract(1, 'weeks');\n            //startMomentArray[i] = startMomentArray[i].subtract(1, 'weeks');\n            startMomentArray[i].subtract(1, 'weeks');\n            //console.log(\"Sunday->Monday Rollover Edge Case\")\n            //console.log(\"startMomentArray\", startMomentArray.map((day)=>{return day.format()}));\n            //console.log(\"endMomentArray\", endMomentArray.map((day)=>{return day.format()}));\n            break;\n          }\n        }\n      }\n\n      // check if all of the start and end moments are before the current moment\n      if (\n        startMomentArray.every(start => {\n          return start.isBefore(dtUTC);\n        }) &&\n        endMomentArray.every(end => {\n          return end.isBefore(dtUTC);\n        })\n      ) {\n        // if so then add a week to all start and end moments\n        //startMomentArray = startMomentArray.map((start)=>{return start.add(1, 'weeks')});\n        startMomentArray.map(start => {\n          return start.add(1, 'weeks');\n        });\n        //endMomentArray = endMomentArray.map((end)=>{return end.add(1, 'weeks')});\n        endMomentArray.map(end => {\n          return end.add(1, 'weeks');\n        });\n        //console.log(\"Added a week to all START and END moments\")\n        //console.log(\"startMomentArray\", startMomentArray.map((day)=>{return day.format()}));\n        //console.log(\"endMomentArray\", endMomentArray.map((day)=>{return day.format()}));\n      }\n      // check if all of the start moments are before the current moment.\n      // This means that the last schedule period is active. There will only be one End time after the last start time.\n      else if (\n        startMomentArray.every(start => {\n          return start.isBefore(dtUTC);\n        })\n      ) {\n        for (let j = 0; j < endMomentArray.length; j++) {\n          if (endMomentArray[j].isBefore(dtUTC)) {\n            endMomentArray[j].add(1, 'weeks');\n            startMomentArray[j].add(1, 'weeks');\n          }\n        }\n      }\n\n      // search the Start and End moments for active schedules, and get nextOn and nextOff times.\n      for (let x = 0; x < startMomentArray.length; x++) {\n        //console.log(\"dtUTC\", dtUTC.format())\n        //console.log(\"startMomentArray[x]\", startMomentArray[x].format())\n        //console.log(\"endMomentArray[x]\", endMomentArray[x].format())\n        if (startMomentArray[x].isBefore(dtUTC) && endMomentArray[x].isAfter(dtUTC)) {\n          weeklyOutput = true;\n          if (weeklySchedule && Object.prototype.hasOwnProperty.call(weeklySchedule, 'value'))\n            scheduleValue = weeklySchedule.value;\n          nextOff = endMomentArray[x];\n          nextOn = startMomentArray[x].add(1, 'weeks');\n        } else if (\n          startMomentArray[x].isAfter(dtUTC) &&\n          (nextOn == null || startMomentArray[x].isBefore(nextOn))\n        ) {\n          nextOn = startMomentArray[x];\n        }\n        if (\n          endMomentArray[x].isAfter(dtUTC) &&\n          (nextOff == null || endMomentArray[x].isBefore(nextOff))\n        ) {\n          nextOff = endMomentArray[x];\n        }\n      }\n      //console.log(\"weeklyOutput\", weeklyOutput)\n      //console.log(\"nextOn\", nextOn.format())\n      //console.log(\"nextOff\", nextOff.format())\n    }\n    //return [weeklyOutput, nextOn, nextOff];\n    return {\n      scheduleStatus: weeklyOutput,\n      nextStart: nextOn,\n      nextStop: nextOff,\n      value: scheduleValue,\n    };\n  }\n}\n\n/*\n * @param weeklySchedule\n * @param dt: {moment} datetime which is to be compared\n */\n/*\n/*\n  static checkWeeklySchedule(weeklySchedule, dt:moment): boolean {\n    // Helper function that shifts the schedule days (weeklySchedule.days): shiftDaysArray(['monday', 'tuesday'], 1) => ['tuesday', 'wednesday']\n    function shiftDaysArray(daysArray:string[], shiftNumber:number) {\n       return daysArray.map((string) => {\n        return moment().day(string).add(shiftNumber,'days').format('dddd').toLowerCase();\n      });\n    }\n    if (weeklySchedule) {\n      //console.log(dt)\n      let tzOffset:number = null;\n      if(dt.hasOwnProperty('_offset')) tzOffset = dt._offset;\n      else tzOffset = 0;\n      const tzOffsetHours = Math.floor(tzOffset/60);\n      const tzOffsetMins = (tzOffset % 60) * Math.sign(tzOffsetHours);\n      let tzone = null;\n      if(dt.hasOwnProperty('_z')){\n        if(dt._z != null){\n          if(dt._z.hasOwnProperty('name')) tzone = dt._z.name;\n        }\n      }\n      if(tzone == null) tzone = 'Etc/UTC';\n      //console.log('tzone', tzone)\n      let daysArray = weeklySchedule.days.map(day => day.toLowerCase());\n      //console.log(\"daysArray1\", daysArray)\n      let startArray = weeklySchedule.start.split(':').map((part)=>{return Number(part)});  // make the start string into an array of numbers [hour,min]\n      let endArray = weeklySchedule.end.split(':').map((part)=>{return Number(part)});  // make the end string into an array of numbers [hour,min]\n      //console.log(\"startArray 1\", startArray)\n      //console.log(\"endArray 1\", endArray)\n      startArray[0] += tzOffsetHours;\n      startArray[1] += tzOffsetMins;\n      endArray[0] += tzOffsetHours;\n      endArray[1] += tzOffsetMins;\n      //console.log(\"startArray 2\", startArray)\n      //console.log(\"endArray 2\", endArray)\n      if (startArray[0] >= 24 && endArray[0] >= 24){\n        startArray[0] -= 24;\n        endArray[0] -= 24;\n        daysArray = shiftDaysArray(daysArray, 1);  //shift days array +1\n      }\n      else if (startArray[0] >= 24 && endArray[0] < 24 && endArray[0] >= 0){\n        startArray[0] -= 24;\n        daysArray = shiftDaysArray(daysArray, 1);  //shift days array +1\n      }\n      else if (startArray[0] < 0 && endArray[0] < 0){\n        startArray[0] += 24;\n        endArray[0] += 24;\n        daysArray = shiftDaysArray(daysArray, -1);  //shift days array -1\n      }\n      else if (endArray[0] < 0 && startArray[0] < 24 && startArray[0] >= 0){\n        endArray[0] += 24;\n      }\n      else if (startArray[0] < 0 && endArray[0] < 24 && endArray[0] >= 0){\n        startArray[0] += 24;\n        daysArray = shiftDaysArray(daysArray, -1);  //shift days array -1\n      }\n      else if (endArray[0] >= 24 && startArray[0] < 24 && startArray[0] >= 0){\n        endArray[0] -= 24;\n      }\n      //console.log(\"daysArray2\", daysArray)\n      //console.log('startArray 3', startArray)\n      //console.log('endArray 3', endArray)\n      \n      const date = dt.format('YYYY-MM-DD');  //current date in local (tz) time.\n      //console.log('date', date);\n      let day = dt.tz(tzone).format('dddd').toLowerCase(); // Sunday, or Monday, or ..\n      //console.log('day', day)\n      //console.log(\"dt\", dt.tz(tzone).format())\n      // make moment objects with the start and end times and the current date\n      const start = moment.tz(`${date}T${startArray[0].toString().padStart(2,'0')}:${startArray[1].toString().padStart(2,'0')}:00`, tzone); \n      //console.log('start', start.format())\n      const end = moment.tz(`${date}T${endArray[0].toString().padStart(2,'0')}:${endArray[1].toString().padStart(2,'0')}:00`, tzone);\n      //console.log('end1', end.format());\n      if (start.isAfter(end)) {   // if the scheduled period runs over into the next day\n        if (daysArray.includes(moment().day(day).subtract(1,'days').format('dddd').toLowerCase())) {    //If daysArray includes the previous day\n          if (dt.isBefore(end)) return true;  // check if we are in the overlap period from the previous day\n        }\n        if (daysArray.includes(day && dt.isAfter(start))) return true; //If we are between the start time and end of the day\n        return false;\n      }\n      else if (daysArray.includes(day)){  \n        if (dt.isAfter(start) && dt.isBefore(end)) return true;\n      }\n  \n    }\n    return false;\n  }\n  */\n","import { Container } from '../../container';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport Statistics from './statistics';\nimport { NODE_INFO } from '../../node-info';\n\nclass MinMaxAvgNode extends Statistics {\n  constructor() {\n    super();\n    this.title = NODE_INFO.statistics[\"min-max-avg\"].title;\n    this.description = NODE_INFO.statistics[\"min-max-avg\"].description;\n    this.addOutput('Min', Type.NUMBER);\n    this.addOutput('Max', Type.NUMBER);\n    this.addOutput('Avg', Type.NUMBER);\n  }\n\n  onInputUpdated() {\n    const data = this.getDefinedInputsOrSettingsValues();\n    const min = Math.min.apply(Math, data);\n    const max = Math.max.apply(Math, data);\n    const count = data.length;\n    const sum = Utils.sum(data);\n    const avg = sum / count;\n\n    this.setOutputData(0, min);\n    this.setOutputData(1, max);\n    this.setOutputData(2, avg);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType('statistics/min-max-avg', MinMaxAvgNode);\n","import { Container } from '../../container';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport Statistics from './statistics';\nimport { NODE_INFO } from '../../node-info';\n\nclass AvgNode extends Statistics {\n  constructor() {\n    super();\n    this.title = NODE_INFO.statistics.avg.title;\n    this.description = NODE_INFO.statistics.avg.description;\n    this.addOutput('Avg', Type.NUMBER);\n    this.addOutput('Count', Type.STRING);\n    this.addOutput('Sum', Type.STRING);\n  }\n\n  onInputUpdated() {\n    const data = this.getDefinedInputsOrSettingsValues();\n    const count = data.length;\n    const sum = Utils.sum(data);\n    let avg = 0;\n    if (count !== 0) {\n      avg = sum / count;\n    }\n\n    this.setOutputData(0, avg);\n    this.setOutputData(1, count);\n    this.setOutputData(2, sum);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('statistics/avg', AvgNode);\n","import { Container } from '../../container';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport Statistics from './statistics';\nimport { NODE_INFO } from '../../node-info';\n\nclass MinNode extends Statistics {\n  constructor() {\n    super();\n    this.title = NODE_INFO.statistics.min.title;\n    this.description = NODE_INFO.statistics.min.description;\n    this.addOutput('min', Type.NUMBER);\n  }\n\n  onInputUpdated() {\n    const data = this.getDefinedInputsOrSettingsValues();\n    const min = Utils.stat.min(data);\n    this.setOutputData(0, min);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('statistics/min', MinNode);\n","import { Container } from '../../container';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport Statistics from './statistics';\nimport { NODE_INFO } from '../../node-info';\n\nclass MaxNode extends Statistics {\n  constructor() {\n    super();\n    this.title = NODE_INFO.statistics.max.title;\n    this.description = NODE_INFO.statistics.max.description;\n    this.addOutput('max', Type.NUMBER);\n  }\n\n  onInputUpdated() {\n    const data = this.getDefinedInputsOrSettingsValues();\n    const max = Utils.stat.max(data);\n    this.setOutputData(0, max);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('statistics/max', MaxNode);\n","import { Container } from '../../container';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport Statistics from './statistics';\nimport { NODE_INFO } from '../../node-info';\n\nclass SumNode extends Statistics {\n  constructor() {\n    super();\n    this.title = NODE_INFO.statistics.sum.title;\n    this.description = NODE_INFO.statistics.sum.description;\n    this.addOutput('sum', Type.NUMBER);\n  }\n\n  onInputUpdated() {\n    const data = this.getDefinedInputsOrSettingsValues();\n    const sum = Utils.stat.sum(data);\n    this.setOutputData(0, sum);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('statistics/sum', SumNode);\n","import { Container } from '../../container';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport Statistics from './statistics';\nimport { NODE_INFO } from '../../node-info';\n\nclass MedianNode extends Statistics {\n  constructor() {\n    super();\n    this.title = NODE_INFO.statistics.median.title;\n    this.description = NODE_INFO.statistics.median.description;\n    this.addOutput('median', Type.NUMBER);\n  }\n\n  onInputUpdated() {\n    const data = this.getDefinedInputsOrSettingsValues();\n    const median = Utils.stat.median(data);\n    this.setOutputData(0, median);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('statistics/median', MedianNode);\n","import { Container } from '../../container';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport Statistics from './statistics';\nimport { NODE_INFO } from '../../node-info';\n\nclass RangeNode extends Statistics {\n  constructor() {\n    super();\n    this.title = NODE_INFO.statistics.range.title;\n    this.description = NODE_INFO.statistics.range.description;\n    this.addOutput('range', Type.NUMBER);\n  }\n\n  onInputUpdated() {\n    const data = this.getDefinedInputsOrSettingsValues();\n    const range = Utils.stat.range(data);\n    this.setOutputData(0, range);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('statistics/range', RangeNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass RankNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicOutputsExist = true;\n    this.dynamicSettingsExist = false;\n    this.dynamicInputsType = Type.NUMBER;\n    super.dynamicOutputsType = Type.NUMBER;\n    this.dynamicDefaultInputs = 5;\n    this.dynamicDefaultOutputs = 3;\n    this.title = NODE_INFO.statistics.rank.title;\n    this.description = NODE_INFO.statistics.rank.description;\n    this.settings['rank'] = NodeSetting.create({\n      description: 'Highest or Lowest',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'top', text: 'Rank Highest' },\n          { value: 'bottom', text: 'Rank Lowest' },\n        ],\n      },\n      value: 'top',\n    });\n  }\n\n  onAdded() {\n    this.updateTitle();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let data = this.getDefinedInputValues();\n    data = data.sort((a, b) => a - b);\n    const outputCount = this.getOutputsCount();\n    if (this.settings['rank'].value === 'bottom') {\n      for (let i = 0; i < outputCount; i++) {\n        this.setOutputData(i, data[i]);\n      }\n    } else {\n      for (let i = 0; i < outputCount; i++) {\n        this.setOutputData(i, data[data.length - (i + 1)]);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    if (Number(this.settings['outputs'].value) > Number(this.settings['inputs'].value)) {\n      this.settings['outputs'].value = Number(this.settings['inputs'].value);\n    }\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n    this.updateTitle();\n  }\n\n  private updateTitle() {\n    if (this.settings['rank'].value === 'top') this.title = 'Rank (Highest)';\n    else if (this.settings['rank'].value === 'bottom') this.title = 'Rank (Lowest)';\n  }\n}\nContainer.registerNodeType('statistics/rank', RankNode);\n","import { Container } from '../../container';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport Statistics from './statistics';\nimport { NODE_INFO } from '../../node-info';\n\nclass AnyStatAllNode extends Statistics {\n  constructor() {\n    super();\n    this.title = NODE_INFO.statistics[\"stats-all\"].title;\n    this.description = NODE_INFO.statistics[\"stats-all\"].description;\n    this.addOutput('max', Type.NUMBER);\n    this.addOutput('min', Type.NUMBER);\n    this.addOutput('range', Type.NUMBER);\n    this.addOutput('sum', Type.NUMBER);\n    this.addOutput('mean', Type.NUMBER);\n    this.addOutput('median', Type.NUMBER);\n    this.addOutput('modes', Type.NUMBER);\n    this.addOutput('variance', Type.NUMBER);\n    this.addOutput('standardDeviation', Type.NUMBER);\n    this.addOutput('meanAbsoluteDeviation', Type.NUMBER);\n    this.addOutput('zScores', Type.NUMBER);\n  }\n\n  onInputUpdated() {\n    const a = this.getDefinedInputsOrSettingsValues();\n    this.setOutputData(0, Utils.stat.max(a));\n    this.setOutputData(1, Utils.stat.min(a));\n    this.setOutputData(2, Utils.stat.range(a));\n    this.setOutputData(3, Utils.stat.sum(a));\n    this.setOutputData(4, Utils.stat.mean(a));\n    this.setOutputData(5, Utils.stat.median(a));\n    this.setOutputData(6, Utils.stat.modes(a));\n    this.setOutputData(7, Utils.stat.variance(a));\n    this.setOutputData(8, Utils.stat.standardDeviation(a));\n    this.setOutputData(9, Utils.stat.meanAbsoluteDeviation(a));\n    this.setOutputData(10, Utils.stat.zScores(a));\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType('statistics/stats-all', AnyStatAllNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass NumbersAverageNode extends Node {\n  values = [];\n  lastReset: boolean;\n  avg: number;\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams[\"stream-average\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO.streams[\"stream-average\"].description + ` \\n ` +\n      ` ## Reset to null\\n ` +\n      `***Reset to null*** if set to option true and a true value on the node ***reset*** this will reset the node ***output*** to a value of null, If set to false it will keep the last node ***output*** value \\n `\n    this.addInput('value', Type.NUMBER);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n    this.settings['null'] = NodeSetting.create({\n      description: 'Reset to null',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.lastReset = false;\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(1);\n    let val = this.getInputData(0);\n    const resetToNull = this.settings['null'].value;\n    if (reset && !this.lastReset) {\n      if (resetToNull) {\n        this.setOutputData(0, null);\n        this.values = [];\n        this.lastReset = reset;\n      } else {\n        this.values = [];\n        this.setOutputData(0, this.avg);\n        this.lastReset = reset;\n      }\n      return;\n    } else if (!reset && this.lastReset) {\n      this.lastReset = reset;\n      return;\n    }\n    if (val == null) return;\n    this.values.push(val);\n    let sum = this.values.reduce(function (a, b) {\n      return a + b;\n    });\n    let avg = sum / this.values.length;\n    this.avg = avg\n    this.setOutputData(0, this.avg);\n  }\n}\nContainer.registerNodeType('streams/stream-average', NumbersAverageNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass NumbersHighestNode extends Node {\n  val: number;\n  lastReset: boolean;\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams[\"stream-highest\"].title;\n    this.description = NODE_INFO.streams[\"stream-highest\"].description;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO.streams[\"stream-highest\"].description + ` \\n ` +\n      ` ## Reset to null\\n ` +\n      `***Reset to null*** if set to option true and a true value on the node ***reset*** this will reset the node ***output*** to a value of null, If set to false it will keep the last node ***output*** value \\n `\n\n    this.addInput('input', Type.NUMBER);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n    this.settings['null'] = NodeSetting.create({\n      description: 'Reset to null',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.lastReset = false;\n    this.val = null;\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(1);\n    const resetToNull = this.settings['null'].value;\n    if (reset && !this.lastReset) {\n      if (resetToNull) {\n        this.setOutputData(0, null);\n        this.val = null\n        this.lastReset = reset;\n      } else {\n        this.setOutputData(0, this.val);\n        this.val = null\n        this.lastReset = reset;\n      }\n      return;\n    } else if (!reset && this.lastReset) {\n      this.lastReset = reset;\n      return;\n    }\n\n    let inputVal = this.getInputData(0);\n    if (inputVal == null) return;\n\n    if (this.val == null || this.val < inputVal) {\n      this.val = inputVal;\n      this.setOutputData(0, this.val);\n    }\n  }\n}\nContainer.registerNodeType('streams/stream-highest', NumbersHighestNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass NumbersLowestNode extends Node {\n  val: number;\n  lastReset: boolean;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams.stack.title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO.streams.stack.description + ` \\n ` +\n      ` ## Reset to null\\n ` +\n      `***Reset to null*** if set to option true and a true value on the node ***reset*** this will reset the node ***output*** to a value of null, If set to false it will keep the last node ***output*** value \\n `\n\n    this.addInput('input', Type.NUMBER);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n    this.settings['null'] = NodeSetting.create({\n      description: 'Reset to null',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.val = null;\n    this.lastReset = false;\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(1);\n    const resetToNull = this.settings['null'].value;\n    if (reset && !this.lastReset) {\n      if (resetToNull) {\n        this.setOutputData(0, null);\n        this.val = null\n        this.lastReset = reset;\n      } else {\n        this.setOutputData(0, this.val);\n        this.val = null\n        this.lastReset = reset;\n      }\n      return;\n    } else if (!reset && this.lastReset) {\n      this.lastReset = reset;\n      return;\n    }\n\n    let inputVal = this.getInputData(0);\n    if (inputVal == null) return;\n\n    if (this.val == null || this.val > inputVal) {\n      this.val = inputVal;\n      this.setOutputData(0, this.val);\n    }\n  }\n}\nContainer.registerNodeType('streams/stream-lowest', NumbersLowestNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass NumbersSumNode extends Node {\n  val = 0;\n  lastReset: boolean;\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams[\"stream-sum\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO.streams[\"stream-sum\"].description + ` \\n ` +\n      ` ## Reset to null\\n ` +\n      `***Reset to null*** if set to option true and a true value on the node ***reset*** this will reset the node ***output*** to a value of null, If set to false it will keep the last node ***output*** value \\n `\n    this.addInput('input', Type.NUMBER);\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('output', Type.NUMBER);\n    this.settings['null'] = NodeSetting.create({\n      description: 'Reset to null',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.lastReset = false;\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(1);\n    const resetToNull = this.settings['null'].value;\n    if (reset && !this.lastReset) {\n      if (resetToNull) {\n        this.setOutputData(0, null);\n        this.val = null\n        this.lastReset = reset;\n      } else {\n        this.setOutputData(0, this.val);\n        this.val = 0\n        this.lastReset = reset;\n      }\n      return;\n    } else if (!reset && this.lastReset) {\n      this.lastReset = reset;\n      return;\n    }\n    if (this.inputs[0].updated && this.inputs[0].data != null) this.val += this.inputs[0].data;\n    this.setOutputData(0, this.val, true);\n  }\n}\nContainer.registerNodeType('streams/stream-sum', NumbersSumNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\n\nclass StreamMergeNode extends FlexibleNode {\n  val: number;\n  lastReset: boolean;\n\n  constructor() {\n    super();\n    this.dynamicSettingsExist = false;\n    this.dynamicInputsType = Type.ANY;\n    this.title = NODE_INFO.streams[\"stream-merge\"].title;\n    this.description = NODE_INFO.streams[\"stream-merge\"].description;\n    this.addOutput('output', Type.ANY);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n    this.size = this.computeSize();\n  }\n\n  onInputUpdated() {\n    const inputs = this.getInputsCount();\n    for (let i = this.dynamicInputStartPosition; i < inputs; i++) {\n      let inputValue = this.getInputData(i);\n      if (Utils.hasInput(inputValue)) {\n        if (this.inputs[i].updated) {\n          this.setOutputData(0, this.inputs[i].data);\n          return;\n        }\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('streams/stream-merge', StreamMergeNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass GateNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams.gate.title;\n    this.description = NODE_INFO.streams.gate.description;\n    this.addInput('input', Type.STRING);\n    this.addInput('open', Type.BOOLEAN);\n    this.addOutput('output', Type.STRING);\n    this.settings['send-null'] = NodeSetting.create({\n      description: 'Send null when closed',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onInputUpdated() {\n    let key = this.getInputData(1);\n\n    if (key) this.setOutputData(0, this.getInputData(0));\n    else if (this.settings['send-null'].value && this.outputs[0].data != null)\n      this.setOutputData(0, null);\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('streams/gate', GateNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass StackNode extends Node {\n  data = [];\n  lastReset: boolean;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams.stack.title;\n    this.description = NODE_INFO.streams.stack.description;\n    this.addInput('input');\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInput('clear', Type.BOOLEAN);\n    this.addOutput('output');\n    this.addOutput('count', Type.NUMBER);\n    this.lastReset = false;\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(2);\n    if (reset && !this.lastReset) {\n      this.data = [];\n      this.setOutputData(0, null);\n      this.setOutputData(1, 0);\n      this.lastReset = reset;\n      return;\n    } else if (!reset && this.lastReset) {\n      this.lastReset = reset;\n      return;\n    }\n\n    if (this.inputs[0].updated && this.inputs[0].data != null) {\n      this.data.push(this.inputs[0].data);\n      this.setOutputData(1, this.data.length);\n    }\n\n    if (this.inputs[1].updated && this.inputs[1].data == true) {\n      let val = this.data.length > 0 ? this.data.pop() : null;\n      this.setOutputData(0, val);\n      this.setOutputData(1, this.data.length);\n    }\n  }\n}\nContainer.registerNodeType('streams/stack', StackNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass QueueNode extends Node {\n  data = [];\n  lastReset: boolean;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams.queue.title;\n    this.description = NODE_INFO.streams.queue.description;\n    this.addInput('input');\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInput('clear', Type.BOOLEAN);\n    this.addOutput('output');\n    this.addOutput('count', Type.NUMBER);\n    this.lastReset = false;\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(2);\n    if (reset && !this.lastReset) {\n      this.data = [];\n      this.setOutputData(0, null);\n      this.setOutputData(1, 0);\n      this.lastReset = reset;\n      return;\n    } else if (!reset && this.lastReset) {\n      this.lastReset = reset;\n      return;\n    }\n\n    if (this.inputs[0].updated && this.inputs[0].data != null) {\n      this.data.unshift(this.inputs[0].data);\n      this.setOutputData(1, this.data.length);\n    }\n\n    if (this.inputs[1].updated && this.inputs[1].data == true) {\n      let val = this.data.length > 0 ? this.data.pop() : null;\n      this.setOutputData(0, val);\n      this.setOutputData(1, this.data.length);\n    }\n  }\n}\nContainer.registerNodeType('streams/queue', QueueNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass DelayNode extends Node {\n  delayedValues = [];\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams[\"stream-delay\"].title;\n    this.description = NODE_INFO.streams[\"stream-delay\"].description;\n    this.addInput('input');\n    this.addInputWithSettings('delay', Type.NUMBER, 1000, 'Delay (millis)', false);\n    this.addOutput('output');\n\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ delay: { weight: 2 }, time: {} }],\n    });\n  }\n\n  onAdded() {\n    this.inputs[1]['name'] = `[delay] (${this.settings['time'].value})`;\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[1]['name'] = `[delay] (${this.settings['time'].value})`;\n  }\n\n  onInputUpdated() {\n    if (this.inputs[0].updated)\n      this.delayedValues.push({\n        val: this.inputs[0].data,\n        time: Date.now(),\n      });\n  }\n\n  onExecute() {\n    if (this.delayedValues.length == 0) return;\n    let delay = this.getInputData(1);\n    delay = TimeUtils.timeConvert(delay, this.settings['time'].value);\n    const val = this.delayedValues[0];\n    if (Date.now() - val.time >= delay) {\n      this.delayedValues.shift();\n      this.setOutputData(0, val.val);\n      return;\n    }\n  }\n}\nContainer.registerNodeType('streams/stream-delay', DelayNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass DelayMeterNode extends Node {\n  lastTime;\n  lastReset: boolean;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams[\"stream-delay-meter\"].title;\n    this.description = NODE_INFO.streams[\"stream-delay-meter\"].description;\n    this.addInput('input');\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('ms', Type.NUMBER);\n    this.lastReset = false;\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(1);\n    if (reset && !this.lastReset) {\n      this.lastTime = null;\n      this.setOutputData(0, null);\n      this.lastReset = reset;\n      return;\n    } else if (!reset && this.lastReset) {\n      this.lastReset = reset;\n      return;\n    }\n\n    if (this.inputs[0].updated && this.inputs[0].data != null) {\n      if (this.lastTime != null) {\n        let delay = Date.now() - this.lastTime;\n        this.setOutputData(0, delay);\n      }\n\n      this.lastTime = Date.now();\n    }\n  }\n}\nContainer.registerNodeType('streams/stream-delay-meter', DelayMeterNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass TimeFrequencyMeterNode extends Node {\n  count = 0;\n  countWas = 0;\n  lastReset: boolean;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams[\"frequency-meter\"].title;\n    this.description = NODE_INFO.streams[\"frequency-meter\"].description;\n    this.addInput('input');\n    this.addInput('reset', Type.BOOLEAN);\n    this.addOutput('events/sec', Type.NUMBER, undefined, { data: 0 });\n    this.lastReset = false;\n\n    setInterval(() => {\n      if (this.count != this.countWas) {\n        this.setOutputData(0, this.count);\n      }\n      this.countWas = this.count;\n      this.count = 0;\n    }, 1000);\n  }\n\n  onInputUpdated() {\n    const reset = this.getInputData(1);\n    if (reset && !this.lastReset) {\n      this.count = 0;\n      this.countWas = 0;\n      this.setOutputData(0, null);\n      this.lastReset = reset;\n      return;\n    } else if (!reset && this.lastReset) {\n      this.lastReset = reset;\n      return;\n    }\n\n    this.count++;\n  }\n}\nContainer.registerNodeType('streams/frequency-meter', TimeFrequencyMeterNode);\n","import { NodeTypeRegistry } from '../../node-type-registry';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils, { TIME_TYPE } from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass FlatlineNode extends Node {\n  lastValue;\n  timeoutFunc;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.streams[\"flatline\"].title;\n    this.description = NODE_INFO.streams[\"flatline\"].description;\n    this.addInput('input', Type.ANY);\n    this.addInputWithSettings('interval', Type.NUMBER, 30, 'Interval');\n    this.addOutput('output', Type.BOOLEAN);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.MILLISECONDS, text: 'Milliseconds' },\n          { value: TIME_TYPE.SECONDS, text: 'Seconds' },\n          { value: TIME_TYPE.MINUTES, text: 'Minutes' },\n          { value: TIME_TYPE.HOURS, text: 'Hours' },\n        ],\n      },\n      value: TIME_TYPE.MINUTES,\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n  }\n\n  onAdded() {\n    this.setOutputData(0, false);\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n  \n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    if (this.inputs[0].updated && input !== this.lastValue) {\n      this.lastValue = input;\n      this.setOutputData(0, false);\n      const interval = TimeUtils.timeConvert(this.getInputData(1), this.settings['time'].value);\n      if (this.timeoutFunc) clearTimeout(this.timeoutFunc);\n      this.timeoutFunc = setTimeout(() => {\n        this.setOutputData(0, true);\n      }, interval);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.setOutputData(0, false);\n    const interval = TimeUtils.timeConvert(this.getInputData(1), this.settings['time'].value);\n    if (this.timeoutFunc) clearTimeout(this.timeoutFunc);\n    this.timeoutFunc = setTimeout(() => {\n      this.setOutputData(0, true);\n    }, interval);\n  }\n}\nNodeTypeRegistry.registerNodeType('streams/flatline', FlatlineNode);\n","import { isNull, isString } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport tagRefs from '../../utils/points/point-ref-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass StringCaseAcronymsNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"string-acronyms\"].title;\n    this.description = NODE_INFO.string[\"string-acronyms\"].description;\n    this.addInput('input', Type.STRING);\n    this.addOutput('output', Type.STRING);\n    // this.setOutputData(0, null);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    if (!Utils.hasInput(input)) {\n      this.setOutputData(0, null, true);\n      return;\n    }\n    if (isNull(input)) return\n    let result:string;\n    let obj = tagRefs.acronyms\n    if (isString(input)) {\n      for (let key in obj) {\n        if (obj[key].toLowerCase() === input.toLowerCase()) {\n          result = obj[key].toUpperCase()\n        }\n      };\n      this.setOutputData(0, result, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n\n\n}\nContainer.registerNodeType('string/string-acronyms', StringCaseAcronymsNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport jsonStringCompare from '../../utils/string-json-compare-utils';\nimport { NODE_INFO } from '../../node-info';\n\nenum compareType {\n  Equals = 'Equals',\n  NotEquals = 'Not Equal',\n  GreaterThanEqual = 'Greater Than Equal',\n  GreaterThan = 'Greater Than',\n  LessThanEqual = 'Less Than Equal',\n  LessThan = 'Less Than',\n  Includes = 'Includes',\n  startsWith = 'Starts With',\n  endsWith = 'Ends With'\n}\nclass StringCompareNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"string-compare\"].title;\n    this.description = NODE_INFO.string[\"string-compare\"].description;\n    this.addInput('input', Type.STRING);\n    this.addInputWithSettings('comparison-to', Type.STRING, '', 'Comparison Value');\n    this.addOutput('match', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.setOutputData(0, null);\n    this.setOutputData(1, null);\n    this.settings['function'] = NodeSetting.create({\n      description: 'Comparison Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: compareType.Equals, text: compareType.Equals },\n          { value: compareType.NotEquals, text: compareType.NotEquals },\n          { value: compareType.GreaterThanEqual, text: compareType.GreaterThanEqual },\n          { value: compareType.GreaterThan, text: compareType.GreaterThan },\n          { value: compareType.LessThanEqual, text: compareType.LessThanEqual },\n          { value: compareType.LessThan, text: compareType.LessThan },\n          { value: compareType.Includes, text: compareType.Includes },\n          { value: compareType.startsWith, text: compareType.startsWith },\n          { value: compareType.endsWith, text: compareType.endsWith },\n        ],\n      },\n      value: compareType.Equals,\n    });\n    this.settings['isNumber'] = NodeSetting.create({\n      description: 'Comparison value is a number',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['passNull'] = NodeSetting.create({\n      description: 'Send null if not a match',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['null'] = NodeSetting.create({\n      description: 'Block null messages on input',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const string1 = this.getInputData(0);\n    const string2 = this.getInputData(1);\n    const resetToNull = this.settings['null'].value;\n    if (!Utils.hasInput(string1)) {\n      this.setOutputData(0, null);\n      return;\n    }\n    if (string1 === null && !resetToNull) {\n      return;\n    }\n    const out = jsonStringCompare.compare(this, string1, string2)\n    if (out) {\n      this.setOutputData(0, true);\n      this.setOutputData(1, string1);\n    } else if (this.settings['passNull'].value === true) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n    } else {\n      this.setOutputData(0, false);\n      this.setOutputData(1, string1);\n    }\n\n  }\n\n  onAfterSettingsChange() {\n    const inputType = this.settings['function'].value\n    const title = \"String Comparison\"\n    this.title = `${title} Compare (${inputType})`;\n    this.broadcastTitleToClients();\n    this.onInputUpdated();\n  }\n\n\n}\nContainer.registerNodeType('string/string-compare', StringCompareNode);\n\n\n\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass TextCutSubstringNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"cut-substring\"].title;\n    this.description = NODE_INFO.string[\"cut-substring\"].description;\n    this.addInput('input', Type.STRING);\n    this.addInputWithSettings('start', Type.NUMBER, 0, 'Start', false);\n    this.addInputWithSettings('length', Type.NUMBER, 1, 'Length', false);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const text = this.getInputData(0);\n    const start = this.getInputData(1);\n    const length = this.getInputData(2);\n    if (text != null && start != null && length != null) {\n      this.setOutputData(0, text.substr(start, length));\n    } else this.setOutputData(0, null);\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('string/cut-substring', TextCutSubstringNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass StringJoinNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.STRING;\n    super.dynamicInputsStartName = 'string';\n    this.title = NODE_INFO.string[\"string-join\"].title;\n    this.description = NODE_INFO.string[\"string-join\"].description;\n    this.addOutput('output', Type.STRING);\n    this.setOutputData(0, null);\n  }\n\n  onAdded() {\n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const inputs = this.getInputsCount();\n    let output = '';\n    for (let i = this.dynamicInputStartPosition; i < inputs; i++) {\n      output = output.concat(this.getInputData(i));\n    }\n    this.setOutputData(0, output, true);\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\n\nContainer.registerNodeType('string/string-join', StringJoinNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass TextStringLengthNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"string-length\"].title;\n    this.description = NODE_INFO.string[\"string-length\"].description;\n    this.addInput('input', Type.STRING);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n    if (val != null) this.setOutputData(0, val.length);\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('string/string-length', TextStringLengthNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass StringIndexOfNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"string-index-of\"].title;\n    this.description = NODE_INFO.string[\"string-index-of\"].description;\n    this.addInputWithSettings('input', Type.STRING, '', 'Input Value', false);\n    this.addInputWithSettings('searchFor', Type.STRING, '', 'Search For Value', false);\n    this.addOutput('startIndex', Type.NUMBER);\n    this.addOutput('endIndex', Type.NUMBER);\n    this.setOutputData(0, null);\n    this.setOutputData(1, null);\n    this.settings['input'] = NodeSetting.create({\n      description: 'string1 Value',\n      value: '',\n      type: SettingType.STRING,\n    });\n    this.settings['searchFor'] = NodeSetting.create({\n      description: 'Search For Value',\n      value: '',\n      type: SettingType.STRING,\n    });\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    const searchFor = this.getInputData(1);\n    const index = input.indexOf(searchFor);\n    const length = searchFor.length;\n    if (index < 0) {\n      this.setOutputData(0, null, true);\n      this.setOutputData(1, null, true);\n    } else {\n      this.setOutputData(0, index, true);\n      this.setOutputData(1, index + length, true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('string/string-index-of', StringIndexOfNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass TextCharAtIndexNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"char-at-index\"].title;\n    this.description = NODE_INFO.string[\"char-at-index\"].description;\n    this.addInput('input', Type.STRING);\n    this.addInputWithSettings('index', Type.NUMBER, 0, 'Index', false);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const text = this.getInputData(0);\n    const index = this.getInputData(1);\n    if (text != null && index != null) {\n      if (index === -1) this.setOutputData(0, text.slice(-1));\n      else this.setOutputData(0, text.slice(index, index + 1));\n    } else this.setOutputData(0, null);\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('string/char-at-index', TextCharAtIndexNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass TextSplitStringsNode extends Node {\n  currentIndex = 0;\n  lastStart:boolean;\n  lastNext:boolean;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"string-split\"].title;\n    this.description = NODE_INFO.string[\"string-split\"].description;\n    this.addInput('input', Type.STRING);\n    this.addInputWithSettings('separator', Type.STRING, '', 'Separator Value', false);\n    this.addInput('start', Type.BOOLEAN);\n    this.addInput('next', Type.BOOLEAN);\n    this.addOutput('output', Type.STRING);\n    this.addOutput('left', Type.NUMBER);\n    this.setOutputData(0, null);\n    this.setOutputData(1, 0);\n  }\n\n  onCreated() {\n    this.lastStart = false;\n    this.lastNext = false;\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const start = this.getInputData(2) || false;\n    const next = this.getInputData(3) || false;\n\n    if (this.inputs[2].updated && start && !this.lastStart) {\n      this.currentIndex = 0;\n      this.splitNext();\n    }\n    this.lastStart = start;\n\n    if (this.inputs[3].updated && next && !this.lastNext) this.splitNext();\n    this.lastNext = next;\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n\n  splitNext() {\n    const text = this.getInputData(0);\n    const separator = this.getInputData(1);\n    if (text == null || separator == null) return;\n\n    const splittedText = text.split(separator);\n    if (this.currentIndex >= splittedText.length) return;\n\n    this.setOutputData(0, splittedText[this.currentIndex]);\n    this.setOutputData(1, splittedText.length - this.currentIndex - 1);\n\n    this.currentIndex++;\n  }\n}\nContainer.registerNodeType('string/string-split', TextSplitStringsNode);\n","import { isNull, isString } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\n\nclass StringCaseChangeNode extends Node {\n  conversionFunction;\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"string-case\"].title;\n    this.description = NODE_INFO.string[\"string-case\"].description;\n    this.addInput('input', Type.STRING);\n    this.addOutput('output', Type.STRING);\n    this.setOutputData(0, null);\n    this.settings['function'] = NodeSetting.create({\n      description: 'Select Case',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'lower', text: 'Lower Case' },\n          { value: 'upper', text: 'Upper Case' },\n          { value: 'first_upper', text: 'First Characters to Upper Case' },\n        ],\n      },\n      value: 'lower',\n    });\n  }\n\n  onAdded() {\n    this.setTitleAndConversionFunction();\n    this.onInputUpdated();\n  }\n\n  toTitleCase = (phrase: string): string => {\n    if (isString(phrase) && !isNull(phrase)) {\n      return phrase\n        .toLowerCase()\n        .split(' ')\n        .map(word => word.charAt(0).toUpperCase() + word.slice(1))\n        .join(' ');\n    } else return null\n  };\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    if (!Utils.hasInput(input)) {\n      this.setOutputData(0, null, true);\n      return;\n    }\n    this.setOutputData(0, this.conversionFunction(input), true);\n  }\n\n  onAfterSettingsChange() {\n    this.setTitleAndConversionFunction();\n    this.onInputUpdated();\n  }\n\n  setTitleAndConversionFunction() {\n    const inputType = this.settings['function'].value;\n    switch (inputType) {\n      case 'first_upper':\n        this.title = 'String Case (First Character to Upper)';\n        this.conversionFunction = s1 => {\n          return this.toTitleCase(s1);\n        };\n        break;\n      case 'lower':\n        this.title = 'String Case (Lower)';\n        this.conversionFunction = s1 => {\n          return s1.toLowerCase();\n        };\n        break;\n      case 'upper':\n        this.title = 'String Case (Upper)';\n        this.conversionFunction = s1 => {\n          return s1.toUpperCase();\n        };\n        break;\n      default:\n        this.title = 'String Case (Lower)';\n        this.conversionFunction = s1 => {\n          return s1.toLowerCase();\n        };\n    }\n  }\n}\nContainer.registerNodeType('string/string-case', StringCaseChangeNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass TextASCIICodeNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"char-to-ascii\"].title;\n    this.description = NODE_INFO.string[\"char-to-ascii\"].description;\n    this.addInput('input', Type.STRING);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    if (val != null) this.setOutputData(0, val.charCodeAt(0));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('string/char-to-ascii', TextASCIICodeNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass TextASCIICharNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.string[\"ascii-to-char\"].title;\n    this.description = NODE_INFO.string[\"ascii-to-char\"].description;\n    this.addInput('input', Type.NUMBER);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let val = this.getInputData(0);\n\n    if (val != null) this.setOutputData(0, String.fromCharCode(val));\n    else this.setOutputData(0, null);\n  }\n}\nContainer.registerNodeType('string/ascii-to-char', TextASCIICharNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nclass StringBufferNode extends Node {\n  useTrigger: boolean;\n  bufferData: string;\n  lastSend:boolean;\n  lastClear:boolean;\n  lastAdd:boolean;\n\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.string[\"string-buffer\"].title;\n    this.description = NODE_INFO.string[\"string-buffer\"].description;\n\n    this.addInput('input', Type.STRING);\n    this.addInput('sendBuffer', Type.BOOLEAN);\n    this.addInput('clearBuffer', Type.BOOLEAN);\n    this.addInput('addToBuffer', Type.BOOLEAN);\n    this.addOutput('output', Type.STRING);\n    this.addOutput('currentBuffer', Type.STRING);\n\n    this.settings['useTrigger'] = NodeSetting.create({\n      description: 'Select a Buffer Input Method',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: true, text: 'Add Input to Buffer When Triggered' },\n          { value: false, text: 'Collect all Input Messages (no Trigger)' },\n        ],\n      },\n      value: true,\n    });\n    this.useTrigger = true;\n    this.bufferData = '';\n  }\n\n  onCreated() {\n    this.lastSend = false;\n    this.lastClear = false;\n    this.lastAdd = false;\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const send = this.getInputData(1) || false;\n    const clear = this.getInputData(2) || false;\n    let addTrigger = false;\n    if (this.useTrigger) addTrigger = this.getInputData(3) || false;\n\n    if (this.inputs[1].updated && send && !this.lastSend) {\n      this.setOutputData(0, this.bufferData);\n      this.bufferData = '';\n    }\n    this.lastSend = send;\n\n    if (this.inputs[2].updated && clear && !this.lastClear) this.bufferData = '';\n    this.lastClear = clear;\n\n    if (\n      (!this.useTrigger && this.inputs[0].updated) ||\n      (this.useTrigger && this.inputs[3].updated && addTrigger && !this.lastAdd)\n    ) {\n      const input = this.getInputData(0);\n      if (input == null) return;\n      this.bufferData += String(input);\n    }\n    this.lastAdd = addTrigger;\n\n    this.setOutputData(1, this.bufferData);\n  }\n\n  onAfterSettingsChange() {\n    const triggerInput = this.settings['useTrigger'].value;\n    if (triggerInput !== this.useTrigger) {\n      if (triggerInput) this.addInput('addToBuffer', Type.BOOLEAN);\n      else this.removeInput(3);\n    }\n    this.useTrigger = triggerInput;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('string/string-buffer', StringBufferNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass BoolSwitchNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.switch[\"bool-switch\"].title;\n    this.description = NODE_INFO.switch[\"bool-switch\"].description;\n    this.addInput('switch', Type.BOOLEAN);\n    this.addInput('[inTrue]', Type.BOOLEAN);\n    this.addInput('[inFalse]', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.settings['inTrue'] = NodeSetting.create({\n      description: 'True Value',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: false, text: 'false' },\n          { value: true, text: 'true' },\n          { value: null, text: 'null' },\n        ],\n      },\n      value: null,\n    });\n    this.settings['inFalse'] = NodeSetting.create({\n      description: 'False Value',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: false, text: 'false' },\n          { value: true, text: 'true' },\n          { value: null, text: 'null' },\n        ],\n      },\n      value: null,\n    });\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let select = this.getInputData(0);\n    if (!Utils.hasInput(select)) {\n      this.setOutputData(0, null);\n      return;\n    }\n    let inA = this.getInputData(1);\n    if (!Utils.hasInput(inA)) inA = this.settings['inTrue'].value;\n    let inB = this.getInputData(2);\n    if (!Utils.hasInput(inB)) inB = this.settings['inFalse'].value;\n\n    if (select) this.setOutputData(0, inA);\n    else this.setOutputData(0, inB);\n  }\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('switch/bool-switch', BoolSwitchNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass NumSwitchNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.switch[\"num-switch\"].title;\n    this.description = NODE_INFO.switch[\"num-switch\"].description;\n    this.addInput('switch', Type.BOOLEAN);\n    this.addInputWithSettings('inTrue', Type.NUMBER, null, 'True Value');\n    this.addInputWithSettings('inFalse', Type.NUMBER, null, 'False Value');\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let select = this.getInputData(0);\n    if (!Utils.hasInput(select)) {\n      this.setOutputData(0, null);\n      return;\n    }\n    const inA = this.getInputData(1);\n    const inB = this.getInputData(2);\n    if (select) this.setOutputData(0, inA);\n    else this.setOutputData(0, inB);\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('switch/num-switch', NumSwitchNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass StringSwitchNode extends Node {\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.switch[\"string-switch\"].title;\n    this.description = NODE_INFO.switch[\"string-switch\"].description;\n    this.addInput('switch', Type.BOOLEAN);\n    this.addInputWithSettings('inTrue', Type.STRING, '', 'True Value');\n    this.addInputWithSettings('inFalse', Type.STRING, '', 'False Value');\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let select = this.getInputData(0);\n    if (!Utils.hasInput(select)) {\n      this.setOutputData(0, null);\n      return;\n    }\n    const inA = this.getInputData(1);\n    const inB = this.getInputData(2);\n    if (select) this.setOutputData(0, inA);\n    else this.setOutputData(0, inB);\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('switch/string-switch', StringSwitchNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\n\nclass BoolSelectNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.BOOLEAN;\n    super.dynamicInputStartPosition = 1;\n    this.title = NODE_INFO.switch[\"bool-select\"].title;\n    this.description = NODE_INFO.switch[\"bool-select\"].description;\n    this.addInput('select', Type.NUMBER);\n    this.addOutput('output', Type.BOOLEAN);\n  }\n\n  onAdded() {\n \n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const select = this.getInputData(0);\n    if (\n      !Utils.hasInput(select) ||\n      select < this.dynamicInputStartPosition ||\n      select > this.getInputsCount() - this.dynamicInputStartPosition\n    ) {\n      this.setOutputData(0, null);\n      return;\n    }\n    this.setOutputData(0, this.getInputData(select));\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('switch/bool-select', BoolSelectNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\n\nclass NumSelectNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.NUMBER;\n    super.dynamicInputStartPosition = 1;\n    this.title = NODE_INFO.switch[\"num-select\"].title;\n    this.description = NODE_INFO.switch[\"num-select\"].description;\n    this.addInput('select', Type.NUMBER);\n    this.addOutput('output', Type.NUMBER);\n  }\n\n  onAdded() {\n \n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const select = this.getInputData(0);\n    if (\n      !Utils.hasInput(select) ||\n      select < this.dynamicInputStartPosition ||\n      select > this.getInputsCount() - this.dynamicInputStartPosition\n    ) {\n      this.setOutputData(0, null);\n      return;\n    }\n    this.setOutputData(0, this.getInputData(select));\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('switch/num-select', NumSelectNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\nimport Utils from '../../utils';\n\nclass StringSelectNode extends FlexibleNode {\n\n  constructor() {\n    super();\n    this.dynamicInputsType = Type.STRING;\n    super.dynamicInputStartPosition = 1;\n    this.title = NODE_INFO.switch[\"string-select\"].title;\n    this.description = NODE_INFO.switch[\"string-select\"].description; \n    this.addInput('select', Type.NUMBER);\n    this.addOutput('output', Type.STRING);\n  }\n\n  onAdded() {\n \n    this.size = this.computeSize();\n    this.onInputUpdated();\n  }\n\n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const select = this.getInputData(0);\n    if (\n      !Utils.hasInput(select) ||\n      select < this.dynamicInputStartPosition ||\n      select > this.getInputsCount() - this.dynamicInputStartPosition\n    ) {\n      this.setOutputData(0, null);\n      return;\n    }\n    this.setOutputData(0, this.getInputData(select));\n  }\n\n  onAfterSettingsChange() {\n    super.onAfterSettingsChange();\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('switch/string-select', StringSelectNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nexport class BoolOutputSelectNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicOutputsExist = true;\n    this.dynamicInputsExist = false;\n    this.dynamicSettingsExist = false;\n    super.dynamicOutputsType = Type.BOOLEAN;\n    this.title = NODE_INFO.switch[\"bool-output-select\"].title;\n    this.description = NODE_INFO.switch[\"bool-output-select\"].description;\n    this.addInput('select', Type.NUMBER);\n    this.addInput('input', Type.BOOLEAN);\n  }\n\n  onInputUpdated() {\n    let active = this.getInputData(0);\n    let val = this.getInputData(1);\n\n    if (active < 0 || active >= this.getOutputsCount()) {\n      this.debugWarn('Defined active output does not exist');\n      return;\n    }\n\n    this.setOutputData(active, val);\n  }\n}\nContainer.registerNodeType('switch/bool-output-select', BoolOutputSelectNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nexport class NumOutputSelectNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicOutputsExist = true;\n    this.dynamicInputsExist = false;\n    this.dynamicSettingsExist = false;\n    super.dynamicOutputsType = Type.NUMBER;\n    this.title = NODE_INFO.switch[\"num-output-select\"].title;\n    this.description = NODE_INFO.switch[\"num-output-select\"].description;\n     this.addInput('select', Type.NUMBER);\n    this.addInput('input', Type.NUMBER);\n  }\n\n  onInputUpdated() {\n    let active = this.getInputData(0);\n    let val = this.getInputData(1);\n\n    if (active < 0 || active >= this.getOutputsCount()) {\n      this.debugWarn('Defined active output does not exist');\n      return;\n    }\n\n    this.setOutputData(active, val);\n  }\n}\nContainer.registerNodeType('switch/num-output-select', NumOutputSelectNode);\n","import { Container } from '../../container';\nimport { FlexibleNode } from '../../flexible-node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nexport class StringOutputSelectNode extends FlexibleNode {\n  constructor() {\n    super();\n    this.dynamicOutputsExist = true;\n    this.dynamicInputsExist = false;\n    this.dynamicSettingsExist = false;\n    super.dynamicOutputsType = Type.STRING;\n    this.title = NODE_INFO.switch[\"string-output-select\"].title;\n    this.description = NODE_INFO.switch[\"string-output-select\"].description;\n    this.addInput('select', Type.NUMBER);\n    this.addInput('input', Type.STRING);\n  }\n\n  onInputUpdated() {\n    let active = this.getInputData(0);\n    let val = this.getInputData(1);\n\n    if (active < 0 || active >= this.getOutputsCount()) {\n      this.debugWarn('Defined active output does not exist');\n      return;\n    }\n    this.setOutputData(active, val);\n  }\n}\nContainer.registerNodeType('switch/string-output-select', StringOutputSelectNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\nimport OsUtils from '../../utils/os-utils';\n\nclass HostInfo extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.system[\"host-info\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO.system[\"host-info\"].description + `   \\n ` +\n      `## On change of settings\\n ` +\n      `   \\n ` +\n      ` On change of settings output ***system-info*** will return data in json format\\n ` +\n      `## On active Input\\n ` +\n      `   \\n ` +\n      ` On an active input ***trigger*** the outputs ***cpu-temp***, ***disc-usage***, ***system-time***, ***system-memory*** will return data in json format\\n ` +\n      `## The data returned\\n ` +\n      `   \\n ` +\n      ` On change of settings output ***system-info*** will return data in json format\\n ` +\n      `   \\n `;\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('system-info', Type.JSON);\n    this.addOutput('cpu-temp', Type.JSON);\n    this.addOutput('disc-usage', Type.JSON);\n    this.addOutput('system-time', Type.JSON);\n    this.addOutput('system-memory', Type.JSON);\n    this.addOutput('error', Type.STRING);\n  }\n\n  onCreated() {\n    this.onAfterSettingsChange();\n  }\n\n  callSystemInfo() {\n    OsUtils.systemInfo()\n      .then(e => this.setOutputData(0, e))\n      .catch(err => this.setOutputData(5, err));\n  }\n\n  callInfo() {\n    OsUtils.cpuTemperature()\n      .then(e => this.setOutputData(1, e))\n      .catch(err => this.setOutputData(5, err));\n    OsUtils.fsSize()\n      .then(e => this.setOutputData(2, e))\n      .catch(err => this.setOutputData(5, err));\n    OsUtils.systemTime()\n      .then(e => this.setOutputData(3, e))\n      .catch(err => this.setOutputData(5, err));\n    OsUtils.systemMem()\n      .then(e => this.setOutputData(4, e))\n      .catch(err => this.setOutputData(5, err));\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return;\n    this.callSystemInfo();\n  }\n\n  onInputUpdated() {\n    if (this.side !== Side.server) return;\n    this.callInfo();\n  }\n}\nContainer.registerNodeType('system/host-info', HostInfo);\n","import PlatformDataSource from '../../../database/datasource/PlatformDataSource';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport OsUtils from '../../utils/os-utils';\n\nclass PlatNode extends Node {\n  haystackAbout = {\n    serverName: OsUtils.hostName(),\n    productVersion: OsUtils.getCurrentWiresVersion(),\n  };\n  constructor() {\n    super();\n    this.title = NODE_INFO.system.platform.title;\n    this.description = NODE_INFO.system.platform.description;\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('wires-version', Type.STRING);\n    this.addOutput('output-json', Type.JSON);\n    this.settings['serverName'] = NodeSetting.create({\n      description: 'serverName',\n      value: '',\n      type: SettingType.READONLY,\n    });\n    this.settings['productVersion'] = NodeSetting.create({\n      description: 'productVersion',\n      value: '',\n      type: SettingType.READONLY,\n    });\n\n\n  }\n\n  async onAdded() {\n    await this.haystackAbout.serverName.then(e => {\n      this.settings['serverName'].value = e;\n      this.broadcastSettingsToClients();\n    }).catch(err => {\n      this.debugInfo(`PLATFORM NODE: try/catch  serverName info, ${err}`);\n    })\n    await this.haystackAbout.productVersion.then(e => {\n      this.settings['productVersion'].value = e;\n      this.broadcastSettingsToClients();\n      this.setOutputData(0, e); // wires version\n    }).catch(err => {\n      this.debugInfo(`PLATFORM NODE: try/catch  productVersion info, ${err}`);\n    })\n\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return; // only execute on server\n    PlatformDataSource.getPlatform().then(e => {\n      this.setOutputData(1, e)\n    }).catch(err => {\n      this.debugInfo(`PLATFORM NODE: try/catch  getPlatform info, ${err}`);\n    })\n\n  }\n\n}\nContainer.registerNodeType('system/platform', PlatNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nconst os = require('os');\n\nfunction getSysInfo(val) {\n  switch (val) {\n    case 0:\n      return os.totalmem() / 1048576;\n    case 1:\n      return os.freemem() / 1048576;\n    case 2:\n      return os.networkInterfaces();\n    case 3:\n      return os.hostname();\n    case 4:\n      return os.platform();\n    case 5:\n      return os.uptime();\n    case 6:\n      return os.homedir();\n    case 7:\n      return os.arch();\n    case 8:\n      return os.loadavg();\n    default:\n      return;\n  }\n}\n\nclass SystemInfo extends Node {\n  constructor() {\n    super();\n    this.title = 'System Info';\n    this.description =\n      'This node outputs various linux system information.  Once a system property has been selected from settings, a false to true transition on the trigger input will update the output.  error will display error information if the request is not successful.';\n    // this.headerColor = '#4A37EE37';\n    // this.iconImageUrl = 'images/node-editor/icons/function/function.svg';\n\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('output', Type.STRING);\n    this.addOutput('error', Type.STRING);\n    this.settings['output-type'] = NodeSetting.create({\n      description: 'Output type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'total memory' },\n          { value: 1, text: 'free memory' },\n          { value: 2, text: 'Network Interfaces' },\n          { value: 3, text: 'hostname' },\n          { value: 4, text: 'platform' },\n          { value: 5, text: 'uptime in sec' },\n          { value: 6, text: 'home dir' },\n          { value: 7, text: 'arch' },\n          { value: 8, text: 'System load average' },\n        ],\n      },\n    });\n  }\n\n  onCreated() {\n    this.onAfterSettingsChange();\n  }\n\n  onAdded() {\n    this.updateTitle();\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n    if (!this.settings['output-type'].value) return;\n    this.updateTitle();\n  }\n\n  private updateTitle() {\n    const settingsConfig = this.settings['output-type'].config.items;\n    const settingsText = [JSON.stringify(this.settings['output-type'].value)];\n    const filteredNodeSettings = Object.keys(settingsConfig)\n      .filter(key => settingsText.includes(key))\n      .reduce((obj, key) => {\n        obj[key] = settingsConfig[key].text;\n        return obj;\n      }, {});\n\n    const settingValue = this.settings['output-type'].value;\n    this.title = 'System Info' + ' ' + '(' + filteredNodeSettings[settingValue] + ')';\n  }\n\n  onInputUpdated() {\n    const outType = this.settings['output-type'].value;\n    try {\n      let call = getSysInfo(outType);\n      this.setOutputData(0, call);\n      this.setOutputData(1, false);\n    } catch (e) {\n      this.setOutputData(1, true);\n    }\n  }\n}\nContainer.registerNodeType('system/system-info', SystemInfo);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass SystemBeepNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.system.beep.title;\n    this.description = NODE_INFO.system.beep.description;\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('error', Type.STRING);\n  }\n\n  onInputUpdated() {\n    try {\n      if (this.getInputData(0) == true) process.stderr.write('\\x07');\n      this.setOutputData(0, false);\n    } catch (e) {\n      this.setOutputData(0, true);\n    }\n  }\n}\nContainer.registerNodeType('system/beep', SystemBeepNode);\n","import { exec } from 'child_process';\nimport { isNull } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\n\nclass SystemExecuteNode extends Node {\n  lastTrigger:boolean;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.system[\"execute-cmd\"].title;\n    this.description = NODE_INFO.system[\"execute-cmd\"].description;\n    this.addInputWithSettings('command', Type.STRING, 'pwd', 'Linux Command', false);\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('out stdout', Type.STRING);\n    this.addOutput('out err', Type.STRING);\n    this.addOutput('out stderr', Type.STRING);\n    this.addOutput('error', Type.STRING);\n  }\n\n  onCreated(){\n    this.lastTrigger = false;\n  }\n\n  // example cmd to run a nodejs script cd /home/aidan/ && node lora-reset.js\n  onInputUpdated() {\n    const trigger = this.getInputData(1) || false;\n    if (this.inputs[1].updated && trigger && !this.lastTrigger) {\n      const command = this.getInputData(0);\n      if(isNull(command))return;\n\n      try {\n        exec(command, (err, stdout, stderr) => {\n          if (stdout) {\n            // this.debugErr(stdout);\n            this.setOutputData(0, stdout);\n            this.setOutputData(3, false);\n          }\n          if (err) {\n            // this.debugInfo(err);\n\n            this.setOutputData(1, err);\n            this.setOutputData(3, true);\n          }\n          if (stderr) {\n            this.setOutputData(2, stderr);\n            this.setOutputData(3, true);\n          }\n        });\n      } catch (e) {\n        this.setOutputData(3, true);\n      }\n    }\n    this.lastTrigger = trigger;\n  }\n}\nContainer.registerNodeType('system/execute-cmd', SystemExecuteNode);\n","import { Container, ContainerRegistry } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nclass FlowExport extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.system[\"flow-export\"].title;\n    this.description = NODE_INFO.system[\"flow-export\"].description;\n    this.addOutput('output', Type.STRING);\n    this.addInput('trigger', Type.BOOLEAN);\n  }\n\n  init() {\n    if (!this.properties) {\n      this.properties['lastTrigger'] = false;\n    }\n  }\n\n  onInputUpdated() {\n    if (this.side != Side.server) return;\n    const input: boolean = this.getInputData(0);\n    if (this.properties['lastTrigger'] !== input && input) {\n      const container = ContainerRegistry.instance().rootContainer();\n      container.db.getNodes((err, docs) => {\n        if (!err) {\n          this.setOutputData(0, JSON.stringify(docs));\n        } else {\n          this.debugErr(` Node id [ ${this.cid}/${this.id} ] has error: ${err.message}.`);\n        }\n      });\n    }\n    this.properties['lastTrigger'] = input;\n    this.persistProperties(false, true);\n  }\n}\nContainer.registerNodeType('system/flow-export', FlowExport);\n","import { exec } from 'child_process';\nimport { Container } from '../../../container';\nimport { Node, NodeState } from '../../../node';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport IpAddressUtils from '../../../utils/ip-address-utils';\nimport NodeColours from '../../../utils/nodes/node-colour-change';\nimport OsUtils from '../../../utils/os-utils';\n\nclass UpdateIPEdge28 extends Node {\n  timeStamp = Utils.getTimeStamp();\n  interfaceEth0 = 'eth0'; //eth0 //wlp3s0\n\n  //outputs\n  eth0Ip = 0;\n  messageOutput = 2;\n  errorOutput = 3;\n\n  constructor() {\n    super();\n    this.title = 'Network Interface EdgeIO-28';\n    this.description =\n      'This node is used to configure the network (IP) interface for edge28 controllers.  Changes made to settings will only be saved if Save changes on save is toggled ON.  In some cases a reboot will be required to save the changes, if Reboot is toggled ON, then clicking save will reboot the controller.        NOTE: Making changes on a remote device could cause the device to become inaccessible.';\n    this.addInput('get interface address', Type.BOOLEAN);\n    this.addInput('enable eth0 ', Type.BOOLEAN);\n    this.addOutput('ip eth0', Type.STRING);\n    this.addOutput('message', Type.STRING);\n    this.addOutput('error', Type.STRING);\n\n    this.settings['writeChanges'] = NodeSetting.create({\n      description: 'Save changes on save',\n      type: SettingType.BOOLEAN,\n      value: false,\n    });\n\n    this.settings['reboot'] = NodeSetting.create({\n      description: 'Optional Reboot. Warning this will reboot the device',\n      type: SettingType.BOOLEAN,\n      value: false,\n    });\n\n    this.settings['eth0_group'] = NodeSetting.create({\n      description: 'Eth Port 0',\n      value: '',\n      type: SettingType.GROUP,\n    });\n\n    this.settings['interfaceTypeEth0'] = NodeSetting.create({\n      description: 'Interface Type eth0',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'DHCP' },\n          { value: 1, text: 'Static' },\n        ],\n      },\n      value: 0,\n    });\n    this.settings['newIpEth0'] = NodeSetting.create({\n      description: 'IP',\n      value: '192.168.0.40',\n      type: SettingType.STRING,\n    });\n\n    this.settings['netNetmaskEth0'] = NodeSetting.create({\n      description: 'Netmask eth0',\n      value: '255.255.255.0',\n      type: SettingType.STRING,\n    });\n    this.settings['newGatewayEth0'] = NodeSetting.create({\n      description: 'Gateway',\n      value: '192.168.0.1',\n      type: SettingType.STRING,\n    });\n\n    this.settings['newNameServerEth0'] = NodeSetting.create({\n      description: 'Name Servers eth0',\n      value: '8.8.8.8',\n      type: SettingType.STRING,\n    });\n\n    this.setSettingsConfig({\n      groups: [\n        { newIpEth0: {}, netNetmaskEth0: {} },\n        { newGatewayEth0: {}, newNameServerEth0: {} },\n      ],\n      conditions: {\n        newIpEth0: setting => {\n          const val = setting['interfaceTypeEth0'].value;\n          return ![0].includes(val);\n        },\n        netNetmaskEth0: setting => {\n          const val = setting['interfaceTypeEth0'].value;\n          return ![0].includes(val);\n        },\n        newGatewayEth0: setting => {\n          const val = setting['interfaceTypeEth0'].value;\n          return ![0].includes(val);\n        },\n        newNameServerEth0: setting => {\n          const val = setting['interfaceTypeEth0'].value;\n          return ![0].includes(val);\n        },\n      },\n    });\n  }\n\n  onAdded() {\n    setTimeout(() => {\n      this.getInterfaces();\n    }, 2000);\n  }\n\n  onInputUpdated() {\n    let enableInterfaceEth0 = this.getInputData(1);\n\n    //refresh the interfaces\n    if (this.inputs[0].updated) {\n      this.msgOut(this.messageOutput, 'called getInterfaces' + ' ' + this.timeStamp);\n      setTimeout(() => {\n        this.getInterfaces();\n      }, 2000);\n    }\n    // enable/disable eth0\n    if (this.inputs[1].updated) {\n      if (enableInterfaceEth0 === true) {\n        this.msgOut(this.messageOutput, 'called enable Eth0 true' + ' ' + this.timeStamp);\n        this.enableNetwork(this.interfaceEth0);\n      } else if (enableInterfaceEth0 === false) {\n        this.msgOut(this.messageOutput, 'called disable Eth0 false' + ' ' + this.timeStamp);\n        this.disableNetwork(this.interfaceEth0);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return; // only execute on server\n    const newIpEth0 = this.settings['newIpEth0'].value;\n    const netNetmaskEth0 = this.settings['netNetmaskEth0'].value;\n    const newGatewayEth0 = this.settings['newGatewayEth0'].value;\n    const newNameServerEth0 = this.settings['newNameServerEth0'].value;\n    const interfaceTypeEth0 = this.settings['interfaceTypeEth0'].value;\n    const writeChanges = this.settings['writeChanges'].value;\n    const reboot = this.settings['reboot'].value;\n\n    const checkIpSettingsEth0 = IpAddressUtils.checkIpValid(\n      newIpEth0,\n      netNetmaskEth0,\n      newGatewayEth0,\n      newNameServerEth0,\n    );\n\n    //device reboot\n    if (reboot) {\n      this.msgOut(this.messageOutput, 'called sudo reboot will reboot in 10 sec' + ' ' + this.timeStamp);\n      //set setting back to false so its not ticked after reboot\n      this.settings['reboot'].value = false;\n      this.broadcastSettingsToClients();\n      //reboot after 10 sec\n      setTimeout(() => {\n        this.execCommand(`sudo reboot`);\n      }, 10000);\n    }\n    // check if OS is the BBB\n    OsUtils.systemInfo()\n      .then(e => {\n        if (e.system.model === \"GENERIC AM33XX (FLATTENED DEVICE TREE)\") {\n          if (checkIpSettingsEth0 && writeChanges) {\n            //network update\n            if (interfaceTypeEth0 == 0) {\n              //DHCP\n              this.title = 'Adapter' + +' ' + '(DHCP)';\n              IpAddressUtils.bbbGetInterfaceDetails()\n                .then(e => {\n                  this.msgOut(this.messageOutput, `'MSG: get interface ID' ${e}`);\n                  IpAddressUtils.bbbSetIPDHCP(e)\n                    .then(e => {\n                      this.msgOut(this.messageOutput, `'MSG: set ip to DHCP' ${e}`);\n                    })\n                    .catch(err => {\n                      this.msgOut(this.messageOutput, `'ERROR: setting to DHCP' ${err}`);\n                    });\n                })\n                .catch(err => {\n                  this.msgOut(this.messageOutput, `'ERROR: setting to DHCP' ${err}`);\n                });\n            } else if (interfaceTypeEth0 == 1) {\n              //Static\n              this.title = 'Adapter' + ' ' + '(Static)';\n              IpAddressUtils.bbbGetInterfaceDetails()\n                .then(iface => {\n                  //iface, ipAddress, subnetMask, gateway\n                  IpAddressUtils.bbbSetIPFixed(iface, newIpEth0, netNetmaskEth0, newGatewayEth0)\n                    .then(e => {\n                      this.msgOut(this.messageOutput, `'MSG: set ip to fixed IP' ${e}`);\n                    })\n                    .catch(err => {\n                      this.msgOut(this.messageOutput, `'ERROR: setting to fixed IP' ${err}`);\n                    });\n                })\n                .catch(err => {\n                  this.msgOut(this.messageOutput, `'ERROR: setting to fixed IP' ${err}`);\n                });\n            }\n          } else {\n            this.msgOut(this.messageOutput, 'invalid ip settings');\n          }\n        } else {\n          // set node to red to show its the incorrect device type\n          NodeColours.nodeColourChange(this, NodeState.ERROR);\n          this.msgOut(this.messageOutput, `'ERROR: incorrect device type ${e.system.model}`)\n        }\n      }).catch(err => this.msgOut(this.messageOutput, `'ERROR: incorrect device type' ${err}`));\n\n    if (!writeChanges) {\n      // user didnt toggle the save button\n      this.msgOut(this.messageOutput, 'nothing saved' + ' ' + this.timeStamp);\n      this.msgOut(this.errorOutput, true);\n    }\n\n\n  }\n\n  //msg output\n  msgOut = (num: number, msg: any) => {\n    this.setOutputData(num, msg);\n  };\n\n  execCommand(command: string) {\n    if (this.side !== Side.server) return;\n    try {\n      exec(command, (err, stdout, stderr) => {\n        this.msgOut(this.messageOutput, 'called command' + ' ' + command + ' ' + this.timeStamp);\n        if (stdout) {\n          this.msgOut(this.messageOutput, stdout + ' ' + this.timeStamp);\n          this.msgOut(this.errorOutput, false);\n        }\n        if (err) {\n          this.msgOut(this.messageOutput, err + ' ' + this.timeStamp);\n          this.msgOut(this.errorOutput, true);\n        }\n        if (stderr) {\n          this.msgOut(this.messageOutput, stderr + ' ' + this.timeStamp);\n          this.msgOut(this.errorOutput, true);\n        }\n      });\n    } catch (e) {\n      this.msgOut(this.messageOutput, e + ' ' + this.timeStamp);\n      this.msgOut(this.errorOutput, true);\n      // this.debugInfo(e);\n    }\n  }\n\n  getInterfaces() {\n    IpAddressUtils.getActiveNetworks()\n      .then(list => {\n        //eth0\n        const getInterfaceEth0 = list.filter(e => {\n          return e.name == this.interfaceEth0;\n        });\n        this.msgOut(this.eth0Ip, getInterfaceEth0[0].ip_address); //ip\n        this.msgOut(this.errorOutput, false); //error\n      })\n      .catch(err => {\n        this.msgOut(this.messageOutput, err);\n        this.msgOut(this.errorOutput, true);\n      });\n  }\n\n  enableNetwork(iface: string) {\n    try {\n      IpAddressUtils.networkUpDown(iface, 'up')\n        .then(r => {\n          console.log(r);\n          setTimeout(() => {\n            this.getInterfaces();\n          }, 5000);\n        })\n        .catch(e => console.log(e));\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  disableNetwork(iface: string) {\n    try {\n      IpAddressUtils.networkUpDown(iface, 'down')\n        .then(r => {\n          console.log(r);\n        })\n        .catch(err => console.log(err));\n    } catch (err) {\n      console.log(err);\n    }\n  }\n}\nContainer.registerNodeType('system/network-interface-edge-28', UpdateIPEdge28);\n","import { exec } from 'child_process';\nimport { Container } from '../../../container';\nimport { Node, NodeState } from '../../../node';\nimport { Side } from '../../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../../node-io';\nimport Utils from '../../../utils';\nimport IpAddressUtils from '../../../utils/ip-address-utils';\nimport NodeColours from '../../../utils/nodes/node-colour-change';\nimport OsUtils from '../../../utils/os-utils';\n\nconst set_ip_address = require('set-ip-address'); //for setting IPs\nconst ip = require('ip'); //for checking if IPs are valid\n\nclass UpdateIP extends Node {\n  timeStamp = Utils.getTimeStamp();\n\n  interfaceEth0 = 'eth0'; //eth0 //wlp3s0\n  interfaceEth1 = 'eth1'; //eth0 //enp0s31f6\n\n  //outputs\n  eth0Ip = 0;\n  eth1Ip = 1;\n  messageOutput = 2;\n  errorOutput = 3;\n\n  constructor() {\n    super();\n    this.title = 'Network Interfaces';\n    this.description =\n      'This node is used to configure the network (IP) interfaces for the device.  Changes made to settings will only be saved if Save changes on save is toggled ON.  In some cases a reboot will be required to save the changes, if Reboot is toggled ON, then clicking save will reboot the controller.      NOTE: Making changes on a remote device could cause the device to become inaccessible.';\n    this.addInput('get interface address', Type.BOOLEAN);\n    this.addInput('enable eth0 ', Type.BOOLEAN);\n    this.addInput('enable eth1 ', Type.BOOLEAN);\n    this.addOutput('ip eth0', Type.STRING);\n    this.addOutput('ip eth1', Type.STRING);\n    this.addOutput('message', Type.STRING);\n    this.addOutput('error', Type.STRING);\n\n    this.settings['writeChanges'] = NodeSetting.create({\n      description: 'Save changes on save',\n      type: SettingType.BOOLEAN,\n      value: false,\n    });\n\n    this.settings['reboot'] = NodeSetting.create({\n      description: 'Reboot. Warning this will reboot the device',\n      type: SettingType.BOOLEAN,\n      value: false,\n    });\n\n    this.settings['eth0_group'] = NodeSetting.create({\n      description: 'ETH-1', //rubix port 1\n      value: '',\n      type: SettingType.GROUP,\n    });\n\n    this.settings['interfaceTypeEth0'] = NodeSetting.create({\n      description: 'Interface Type eth0',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'DHCP' },\n          { value: 1, text: 'Static' },\n        ],\n      },\n      value: 0,\n    });\n    this.settings['newIpEth0'] = NodeSetting.create({\n      description: 'IP',\n      value: '192.168.0.40',\n      type: SettingType.STRING,\n    });\n\n    this.settings['netNetmaskEth0'] = NodeSetting.create({\n      description: 'Netmask eth0',\n      value: '255.255.255.0',\n      type: SettingType.STRING,\n    });\n    this.settings['newGatewayEth0'] = NodeSetting.create({\n      description: 'Gateway',\n      value: '192.168.0.1',\n      type: SettingType.STRING,\n    });\n\n    this.settings['newNameServerEth0'] = NodeSetting.create({\n      description: 'Name Servers eth0',\n      value: '8.8.8.8',\n      type: SettingType.STRING,\n    });\n\n    this.settings['eth1_group'] = NodeSetting.create({\n      description: 'ETH-2', //rubix port 2\n      value: '',\n      type: SettingType.GROUP,\n    });\n\n    this.settings['interfaceTypeEth1'] = NodeSetting.create({\n      description: 'Interface Type eth1',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'DHCP' },\n          { value: 1, text: 'Static' },\n        ],\n      },\n      value: 0,\n    });\n    this.settings['newIpEth1'] = NodeSetting.create({\n      description: 'IP',\n      value: '192.168.1.40',\n      type: SettingType.STRING,\n    });\n\n    this.settings['netNetmaskEth1'] = NodeSetting.create({\n      description: 'Netmask eth1',\n      value: '255.255.255.0',\n      type: SettingType.STRING,\n    });\n    this.settings['newGatewayEth1'] = NodeSetting.create({\n      description: 'Gateway',\n      value: '192.168.1.1',\n      type: SettingType.STRING,\n    });\n\n    this.settings['newNameServerEth1'] = NodeSetting.create({\n      description: 'Name Servers eth1',\n      value: '8.8.8.8',\n      type: SettingType.STRING,\n    });\n\n    this.setSettingsConfig({\n      groups: [\n        { newIpEth0: {}, netNetmaskEth0: {} },\n        { newGatewayEth0: {}, newNameServerEth0: {} },\n        { newIpEth1: {}, netNetmaskEth1: {} },\n        { newGatewayEth1: {}, newNameServerEth1: {} },\n      ],\n      conditions: {\n        newIpEth0: setting => {\n          const val = setting['interfaceTypeEth0'].value;\n          return ![0].includes(val);\n        },\n        netNetmaskEth0: setting => {\n          const val = setting['interfaceTypeEth0'].value;\n          return ![0].includes(val);\n        },\n        newGatewayEth0: setting => {\n          const val = setting['interfaceTypeEth0'].value;\n          return ![0].includes(val);\n        },\n        newNameServerEth0: setting => {\n          const val = setting['interfaceTypeEth0'].value;\n          return ![0].includes(val);\n        },\n        newIpEth1: setting => {\n          const val = setting['interfaceTypeEth1'].value;\n          return ![0].includes(val);\n        },\n        netNetmaskEth1: setting => {\n          const val = setting['interfaceTypeEth1'].value;\n          return ![0].includes(val);\n        },\n        newGatewayEth1: setting => {\n          const val = setting['interfaceTypeEth1'].value;\n          return ![0].includes(val);\n        },\n        newNameServerEth1: setting => {\n          const val = setting['interfaceTypeEth1'].value;\n          return ![0].includes(val);\n        },\n      },\n    });\n  }\n\n  onAdded() {\n    setTimeout(() => {\n      this.getInterfaces();\n    }, 2000);\n  }\n\n  onInputUpdated() {\n    let enableInterfaceEth0 = this.getInputData(1);\n    let enableInterfaceEth1 = this.getInputData(2);\n\n    //refresh the interfaces\n    if (this.inputs[0].updated) {\n      this.msgOut(this.messageOutput, 'called getInterfaces' + ' ' + this.timeStamp);\n      setTimeout(() => {\n        this.getInterfaces();\n      }, 2000);\n    }\n    // enable/disable eth0\n    if (this.inputs[1].updated) {\n      if (enableInterfaceEth0 === true) {\n        this.msgOut(this.messageOutput, 'called enable ETH-1 true' + ' ' + this.timeStamp);\n        this.enableNetwork(this.interfaceEth0);\n      } else if (enableInterfaceEth0 === false) {\n        this.msgOut(this.messageOutput, 'called disable ETH-1 false' + ' ' + this.timeStamp);\n        this.disableNetwork(this.interfaceEth0);\n      }\n    }\n    // enable/disable eth1\n    if (this.inputs[2].updated) {\n      if (enableInterfaceEth1 === true) {\n        this.msgOut(this.messageOutput, 'called enable ETH-2 true' + ' ' + this.timeStamp);\n        this.enableNetwork(this.interfaceEth1);\n      } else if (enableInterfaceEth1 === false) {\n        this.msgOut(this.messageOutput, 'called disable ETH-2 false' + ' ' + this.timeStamp);\n        this.disableNetwork(this.interfaceEth1);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    if (this.side !== Side.server) return; // only execute on server\n    const newIpEth0 = this.settings['newIpEth0'].value;\n    const netNetmaskEth0 = this.settings['netNetmaskEth0'].value;\n    const newGatewayEth0 = this.settings['newGatewayEth0'].value;\n    const newNameServerEth0 = this.settings['newNameServerEth0'].value;\n    const interfaceTypeEth0 = this.settings['interfaceTypeEth0'].value;\n\n    const newIpEth1 = this.settings['newIpEth1'].value;\n    const netNetmaskEth1 = this.settings['netNetmaskEth1'].value;\n    const newGatewayEth1 = this.settings['newGatewayEth1'].value;\n    const newNameServerEth1 = this.settings['newNameServerEth1'].value;\n    const interfaceTypeEth1 = this.settings['interfaceTypeEth1'].value;\n\n    const writeChanges = this.settings['writeChanges'].value;\n    const reboot = this.settings['reboot'].value;\n\n    const checkIpSettingsEth0 = IpAddressUtils.checkIpValid(\n      newIpEth0,\n      netNetmaskEth0,\n      newGatewayEth0,\n      newNameServerEth0,\n    );\n    const checkIpSettingsEth1 = IpAddressUtils.checkIpValid(\n      newIpEth1,\n      netNetmaskEth1,\n      newGatewayEth1,\n      newNameServerEth1,\n    );\n    //device reboot\n    if (reboot) {\n      this.msgOut(\n        this.messageOutput,\n        'called sudo reboot will reboot in 10 sec' + ' ' + this.timeStamp,\n      );\n      //set setting back to false so its not ticked after reboot\n      this.settings['reboot'].value = false;\n      this.broadcastSettingsToClients();\n      //reboot after 10 sec\n      setTimeout(() => {\n        this.execCommand(`sudo reboot`);\n      }, 10000);\n    }\n\n    // check if OS is the PI\n    OsUtils.systemInfo()\n      .then(e => {\n        if (e.system.model === \"BCM2835\") {\n          if (checkIpSettingsEth0 && checkIpSettingsEth1 && writeChanges) {\n            //network update\n            let interfacesArray = [];\n            if (interfaceTypeEth0 == 0) {\n              //DHCP\n              this.title = 'Adapter' + +' ' + '(DHCP)';\n              let eth0 = {\n                interface: this.interfaceEth0,\n                dhcp: true,\n              };\n              interfacesArray.push(eth0);\n            }\n            if (interfaceTypeEth0 == 1) {\n              //Static\n              this.title = 'Adapter' + ' ' + '(Static)';\n              let subnetMaskLength = ip.subnet(newIpEth0, netNetmaskEth0);\n              let eth0 = {\n                interface: this.interfaceEth0,\n                ip_address: newIpEth0,\n                prefix: subnetMaskLength.subnetMaskLength,\n                gateway: newGatewayEth0,\n                nameservers: [newNameServerEth0],\n              };\n              interfacesArray.push(eth0);\n            }\n\n            if (interfaceTypeEth1 == 0) {\n              //DHCP\n              this.title = 'Adapter' + +' ' + '(DHCP)';\n              let eth1 = {\n                interface: this.interfaceEth1,\n                dhcp: true,\n              };\n              interfacesArray.push(eth1);\n            }\n\n            if (interfaceTypeEth1 == 1) {\n              //Static\n              this.title = 'Adapter' + ' ' + '(Static)';\n              let subnetMaskLength = ip.subnet(newIpEth1, netNetmaskEth1);\n              let eth1 = {\n                interface: this.interfaceEth1,\n                ip_address: newIpEth1,\n                prefix: subnetMaskLength.subnetMaskLength,\n                gateway: newGatewayEth1,\n                nameservers: [newNameServerEth1],\n              };\n              interfacesArray.push(eth1);\n            }\n            set_ip_address.configure(interfacesArray).then(() => {\n              this.msgOut(this.messageOutput, 'updated' + ' ' + this.timeStamp);\n              this.msgOut(this.errorOutput, false);\n            });\n          } else this.msgOut(this.messageOutput, 'invalid ip settings');\n        } else {\n          // set node to red to show its the incorrect device type\n          NodeColours.nodeColourChange(this, NodeState.ERROR);\n          this.msgOut(this.messageOutput, `'ERROR: incorrect device type ${e.system.model}`)\n        }\n      }).catch(err => this.msgOut(this.messageOutput, `'ERROR: incorrect device type' ${err}`));\n\n    if (!writeChanges) {\n      // user didnt toggle the save button\n      this.msgOut(this.messageOutput, 'nothing saved' + ' ' + this.timeStamp);\n      this.msgOut(this.errorOutput, true);\n    }\n  }\n  //msg output\n  msgOut = (num: number, msg: any) => {\n    this.setOutputData(num, msg);\n  };\n\n  execCommand(command: string) {\n    if (this.side !== Side.server) return;\n    try {\n      exec(command, (err, stdout, stderr) => {\n        this.msgOut(this.messageOutput, 'called command' + ' ' + command + ' ' + this.timeStamp);\n        if (stdout) {\n          this.msgOut(this.messageOutput, stdout + ' ' + this.timeStamp);\n          this.msgOut(this.errorOutput, false);\n        }\n        if (err) {\n          this.msgOut(this.messageOutput, err + ' ' + this.timeStamp);\n          this.msgOut(this.errorOutput, true);\n        }\n        if (stderr) {\n          this.msgOut(this.messageOutput, stderr + ' ' + this.timeStamp);\n          this.msgOut(this.errorOutput, true);\n        }\n      });\n    } catch (e) {\n      this.msgOut(this.messageOutput, e + ' ' + this.timeStamp);\n      this.msgOut(this.errorOutput, true);\n      // this.debugInfo(e);\n    }\n  }\n\n  getInterfaces() {\n    IpAddressUtils.getActiveNetworks()\n      .then(list => {\n        //eth0\n        const getInterfaceEth0 = list.filter(e => {\n          return e.name == this.interfaceEth0;\n        });\n        this.msgOut(this.eth0Ip, getInterfaceEth0[0].ip_address); //ip\n        this.msgOut(this.errorOutput, false); //error\n\n        //eth1\n        const getInterfaceEth1 = list.filter(e => {\n          return e.name == this.interfaceEth1;\n        });\n        this.msgOut(this.eth1Ip, getInterfaceEth1[0].ip_address); //ip\n        this.msgOut(this.errorOutput, false); //error\n      })\n      .catch(err => {\n        this.msgOut(this.messageOutput, err);\n        this.msgOut(this.errorOutput, true);\n      });\n  }\n\n  enableNetwork(iface: string) {\n    try {\n      IpAddressUtils.networkUpDown(iface, 'up')\n        .then(r => {\n          console.log(r);\n          setTimeout(() => {\n            this.getInterfaces();\n          }, 5000);\n        })\n        .catch(e => console.log(e));\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  disableNetwork(iface: string) {\n    try {\n      IpAddressUtils.networkUpDown(iface, 'down')\n        .then(r => {\n          console.log(r);\n        })\n        .catch(err => console.log(err));\n    } catch (err) {\n      console.log(err);\n    }\n  }\n}\nContainer.registerNodeType('system/network-interfaces', UpdateIP);\n","import { exec } from 'child_process';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nconst pkg = require('../../../../package.json');\n\nclass WiresVersion extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.system[\"system-build-version\"].title;\n    this.description = NODE_INFO.system[\"system-build-version\"].description;\n    this.addInput('in1', Type.STRING);\n    this.addOutput('wires-version', Type.STRING);\n    this.addOutput('nodejs-version', Type.STRING);\n    this.addOutput('npm-version', Type.STRING);\n    this.addOutput('json out', Type.STRING);\n    this.addOutput('error', Type.STRING);\n  }\n\n  getCurrentWiresVersion() {\n    return new Promise(function(resolve) {\n      return resolve({\n        version: pkg.version,\n      });\n    });\n  }\n\n  getNodeJsVersion() {\n    return new Promise((resolve, reject) => {\n      exec('node -v', (err, stdout, stderr) => {\n        if (err) {\n          reject(err);\n          return;\n        } else {\n          resolve({\n            stdout,\n          });\n        }\n      });\n    });\n  }\n\n  getNPMVersion() {\n    return new Promise((resolve, reject) => {\n      exec('npm -v', (err, stdout, stderr) => {\n        if (err) {\n          reject(err);\n          return;\n        } else {\n          resolve({\n            stdout,\n          });\n        }\n      });\n    });\n  }\n\n  onInputUpdated() {\n    let arr = [];\n\n    // wires build\n    this.getCurrentWiresVersion()\n      .then(r => {\n        r = JSON.stringify(r)\n          .replace(/\\\\n/g, '')\n          .split('version')\n          .join('wires version');\n        arr.push(r);\n        this.setOutputData(0, r);\n      })\n      .catch(e => {\n        this.setOutputData(4, e);\n      });\n    // nodejs version\n    this.getNodeJsVersion()\n      .then(r => {\n        r = JSON.stringify(r)\n          .replace(/\\\\n/g, '')\n          .split('stdout')\n          .join('nodejs version');\n        arr.push(r);\n        this.setOutputData(1, r);\n      })\n      .catch(e => {\n        this.setOutputData(4, e);\n      });\n    // npm version\n    this.getNPMVersion()\n      .then(r => {\n        r = JSON.stringify(r)\n          .replace(/\\\\n/g, '')\n          .split('stdout')\n          .join('npm version');\n        arr.push(r);\n        this.setOutputData(3, arr); //json out\n        this.setOutputData(2, r);\n      })\n      .catch(e => {\n        this.setOutputData(4, e);\n      });\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('system/system-build-version', WiresVersion);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport { NODE_INFO } from '../../node-info';\n\nexport class TimeConvertNode extends Node {\n  conversionFunction;\n  constructor() {\n    super();\n    this.title = NODE_INFO.time.conversion.title;\n    this.description = NODE_INFO.time.conversion.description;\n    this.addInput('min', Type.NUMBER);\n    this.addOutput('day', Type.NUMBER);\n    this.addOutput('hour', Type.NUMBER);\n    this.addOutput('sec', Type.NUMBER);\n    this.addOutput('milli', Type.NUMBER);\n    this.settings['inputType'] = NodeSetting.create({\n      description: 'Input Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'day', text: 'Days (day)' },\n          { value: 'hour', text: 'Hours (hour)' },\n          { value: 'min', text: 'Minutes (min)' },\n          { value: 'sec', text: 'Seconds (sec)' },\n          { value: 'milli', text: 'Milliseconds(milli)' },\n        ],\n      },\n      value: 'min',\n    });\n    this.settings['precision'] = NodeSetting.create({ description: 'Precision', type: SettingType.NUMBER, value: '2' });\n    this.conversionFunction = input => {\n      let outputArray: number[] = [null, null, null, null];\n      outputArray[0] = input * 0.000694444;\n      outputArray[1] = input * 0.016666667;\n      outputArray[2] = input * 60;\n      outputArray[3] = input * 60000;\n      return outputArray;\n    };\n  }\n\n  onAdded() {\n    this.setConversionFunction();\n    this.onAfterSettingsChange()\n  }\n\n  onInputUpdated() {\n    this.onInputOrSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.setConversionFunction();\n    this.onInputOrSettingsChange();\n  }\n\n  private onInputOrSettingsChange() {\n    const input = this.getInputData(0);\n    if (!Utils.hasInput(input)) {\n      this.setOutputData(0, null);\n      this.setOutputData(1, null);\n      this.setOutputData(2, null);\n      this.setOutputData(3, null);\n      this.setOutputData(4, null);\n      return;\n    }\n    const output = this.conversionFunction(input);\n    const precision = Math.abs(this.settings['precision'].value);\n    this.setOutputData(0, Number(output[0]).toFixed(precision));\n    this.setOutputData(1, Number(output[1]).toFixed(precision));\n    this.setOutputData(2, Number(output[2]).toFixed(precision));\n    this.setOutputData(3, Number(output[3]).toFixed(precision));\n    this.setOutputData(4, Number(output[4]).toFixed(precision));\n  }\n\n  setConversionFunction() {\n    const inputType = this.settings['inputType'].value;\n    switch (inputType) {\n      case 'min':\n        this.title = 'Time Conversion (min)';\n        this.inputs[0].name = 'min';\n        this.outputs[0].name = 'day';\n        this.outputs[1].name = 'hour';\n        this.outputs[2].name = 'sec';\n        this.outputs[3].name = 'milli';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null];\n          outputArray[0] = input * 0.000694444;\n          outputArray[1] = input * 0.016666667;\n          outputArray[2] = input * 60;\n          outputArray[3] = input * 60000;\n          return outputArray;\n        };\n        break;\n      case 'sec':\n        this.title = 'Time Conversion (sec)';\n        this.inputs[0].name = 'sec';\n        this.outputs[0].name = 'day';\n        this.outputs[1].name = 'hour';\n        this.outputs[2].name = 'min';\n        this.outputs[3].name = 'milli';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null];\n          outputArray[0] = input * 1.1574e-5;\n          outputArray[1] = input * 0.000277778;\n          outputArray[2] = input * 0.016666667;\n          outputArray[3] = input * 1000;\n          return outputArray;\n        };\n        break;\n      case 'milli':\n        this.title = 'Time Conversion (milli)';\n        this.inputs[0].name = 'milli';\n        this.outputs[0].name = 'day';\n        this.outputs[1].name = 'hour';\n        this.outputs[2].name = 'min';\n        this.outputs[3].name = 'sec';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null];\n          outputArray[0] = input * 1.1574e-8;\n          outputArray[1] = input * 2.7778e-7;\n          outputArray[2] = input * 1.6667e-5;\n          outputArray[3] = input * 0.00100002;\n          return outputArray;\n        };\n        break;\n      case 'day':\n        this.title = 'Time Conversion (day)';\n        this.inputs[0].name = 'day';\n        this.outputs[0].name = 'hour';\n        this.outputs[1].name = 'min';\n        this.outputs[2].name = 'sec';\n        this.outputs[3].name = 'milli';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null];\n          outputArray[0] = input * 24;\n          outputArray[1] = input * 1440;\n          outputArray[2] = input * 86400;\n          outputArray[3] = input * 8.64e7;\n          return outputArray;\n        };\n        break;\n      case 'hour':\n        this.title = 'Time Conversion (hour)';\n        this.inputs[0].name = 'hour';\n        this.outputs[0].name = 'day';\n        this.outputs[1].name = 'min';\n        this.outputs[2].name = 'sec';\n        this.outputs[3].name = 'milli';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null];\n          outputArray[0] = input * 0.0416667;\n          outputArray[1] = input * 60;\n          outputArray[2] = input * 3600;\n          outputArray[3] = input * 3.6e6;\n          return outputArray;\n        };\n        break;\n      default:\n        this.title = 'Time Conversion (min)';\n        this.inputs[0].name = 'min';\n        this.outputs[0].name = 'day';\n        this.outputs[1].name = 'hour';\n        this.outputs[2].name = 'sec';\n        this.outputs[3].name = 'milli';\n        this.conversionFunction = input => {\n          let outputArray: number[] = [null, null, null, null];\n          outputArray[0] = input * 0.000694444;\n          outputArray[1] = input * 0.016666667;\n          outputArray[2] = input * 60;\n          outputArray[3] = input * 60000;\n          return outputArray;\n        };\n    }\n  }\n}\nContainer.registerNodeType('time/conversion', TimeConvertNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nenum TIME_TYPE {\n  TIME = 'time string as input',\n  EPOCH = 'time epoch as input',\n  NEW_TS = 'time now',\n}\n\nexport class TimeConvertPlusNode extends Node {\n  conversionFunction;\n  constructor() {\n    super();\n    this.title = NODE_INFO.time[\"conversion-plus\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO.time[\"conversion-plus\"].description +` \\n ` +\n      ` ## Example output\\n ` +\n      ` ***{\"date\":\"Mon Aug 17 2020\",\"yearMonthDay\":\"2020-08-17\",\"year\":\"2020\",\"month\":\"Aug\",\"monthAsNumber\":\"08\",\"dayAsNumber\":\"17\",\"dayOfYearNumber\":\"230\",\"day\":\"Mon\",\"pmOrAm\":\"PM\",\"hourAsAmPm\":\"8\",\"hour\":\"20\",\"timeHourMin\":\"20:26\",\"time\":\"20:26:49\",\"minute\":\"26\",\"minutesSeconds\":\"26:49\",\"seconds\":\"49\",\"milliseconds\":\"000\",\"epoch\":\"1597660009000\",\"rawDate\":\"2020-08-17T10:26:49.000Z\"}***\\n `\n\n    this.addInput('input', Type.ANY);\n    this.addOutput('out-json', Type.JSON);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Time',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: TIME_TYPE.TIME, text: TIME_TYPE.TIME },\n          { value: TIME_TYPE.EPOCH, text: TIME_TYPE.EPOCH },\n          { value: TIME_TYPE.NEW_TS, text: TIME_TYPE.NEW_TS },\n        ],\n      },\n      value: TIME_TYPE.TIME,\n    });\n  }\n\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    const result = this.timeSelection(input)\n    const out = TimeUtils.timeConvertPlus(result)\n    this.setOutputData(0, out);\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated()\n\n  }\n\n  timeSelection(input: any){\n    const timeType = this.settings['time'].value\n    let timeSelection = null;\n    if (timeType === TIME_TYPE.TIME) {\n      timeSelection = new Date(input);\n    } else if (timeType === TIME_TYPE.EPOCH) {\n      timeSelection = new Date(parseInt(input));\n    } else if (timeType === TIME_TYPE.NEW_TS) {\n      timeSelection = new Date();\n    }\n    return timeSelection;\n  }\n\n}\nContainer.registerNodeType('time/conversion-plus', TimeConvertPlusNode);\n","import * as moment from 'moment-timezone';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimezoneUtils from '../../utils/timezone-utils';\n\nexport class TimezoneConvertNode extends Node {\n  conversionFunction;\n  constructor() {\n    super();\n    this.title = NODE_INFO.time[\"timezone-conversion\"].title;\n    this.description = NODE_INFO.time[\"timezone-conversion\"].description;\n\n    this.addInput('input', Type.ANY);\n    this.addOutput('out-time-converted', Type.ANY);\n    this.addOutput('out-local-converted', Type.ANY);\n\n    this.settings['region'] = NodeSetting.create({\n      description: 'Select Region',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: TimezoneUtils.tsCategory,\n      },\n    });\n    this.settings['timezone'] = NodeSetting.create({\n      description: 'Select TimeZone (Hit save to refresh)',\n      value: \"Sydney/Australia\",\n      type: SettingType.DROPDOWN,\n    });\n\n  }\n  onAdded() {\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    try {\n      const m = moment.tz(input, this.settings['timezone'].value);\n      const local = moment(input);\n      this.setOutputData(0, m.format());\n      this.setOutputData(1, local.format());\n    } catch (e) {\n      this.debugWarn(`ERROR: trying to convert a timezone${e}`);\n    }\n\n  }\n\n  onAfterSettingsChange() {\n    const region = this.settings['region'].value;\n    this.settings['timezone'].config = {\n      items: TimezoneUtils.tsType(region),\n    };\n    this.broadcastSettingsToClients();\n    this.onInputUpdated()\n\n  }\n\n\n\n}\nContainer.registerNodeType('time/timezone-conversion', TimezoneConvertNode);\n","enum TIME_TYPE {\n    africaZones = 'Africa',\n    americaZones = 'America',\n    antarcticaZones = 'Antarctica',\n    asiaZones = 'Asia',\n    atlanticZones = 'Atlantic',\n    australiaZones = 'Australia',\n    europeZones = 'Europe',\n    indianZones = 'Indian',\n    pacificZones = 'Pacific',\n}\n\nexport default class TimezoneUtils {\n    static tsCategory = [TIME_TYPE.africaZones, TIME_TYPE.americaZones, TIME_TYPE.antarcticaZones, TIME_TYPE.asiaZones, TIME_TYPE.atlanticZones, TIME_TYPE.australiaZones, TIME_TYPE.europeZones, TIME_TYPE.indianZones, TIME_TYPE.pacificZones].map(\n        point => {\n            return { value: point, text: point };\n        },\n    );\n\n    static tsType(type: string) {\n        switch (type) {\n            case TIME_TYPE.africaZones:\n                return Object.values(this.africaZones);\n            case TIME_TYPE.americaZones:\n                return Object.values(this.americaZones);\n            case TIME_TYPE.antarcticaZones:\n                return Object.values(this.antarcticaZones);\n            case TIME_TYPE.asiaZones:\n                return Object.values(this.asiaZones);\n            case TIME_TYPE.atlanticZones:\n                return Object.values(this.atlanticZones);\n            case TIME_TYPE.australiaZones:\n                return Object.values(this.australiaZones);\n            case TIME_TYPE.europeZones:\n                return Object.values(this.europeZones);\n            case TIME_TYPE.indianZones:\n                return Object.values(this.indianZones);\n            case TIME_TYPE.pacificZones:\n                return Object.values(this.pacificZones);\n        }\n    }\n\n    static europeZones = [\n        'Europe/Amsterdam',\n        'Europe/Andorra',\n        'Europe/Astrakhan',\n        'Europe/Athens',\n        'Europe/Belgrade',\n        'Europe/Berlin',\n        'Europe/Brussels',\n        'Europe/Bucharest',\n        'Europe/Budapest',\n        'Europe/Chisinau',\n        'Europe/Copenhagen',\n        'Europe/Dublin',\n        'Europe/Gibraltar',\n        'Europe/Helsinki',\n        'Europe/Istanbul',\n        'Europe/Kaliningrad',\n        'Europe/Kiev',\n        'Europe/Kirov',\n        'Europe/Lisbon',\n        'Europe/London',\n        'Europe/Luxembourg',\n        'Europe/Madrid',\n        'Europe/Malta',\n        'Europe/Minsk',\n        'Europe/Monaco',\n        'Europe/Moscow',\n        'Europe/Oslo',\n        'Europe/Paris',\n        'Europe/Prague',\n        'Europe/Riga',\n        'Europe/Rome',\n        'Europe/Samara',\n        'Europe/Saratov',\n        'Europe/Simferopol',\n        'Europe/Sofia',\n        'Europe/Stockholm',\n        'Europe/Tallinn',\n        'Europe/Tirane',\n        'Europe/Ulyanovsk',\n        'Europe/Uzhgorod',\n        'Europe/Vienna',\n        'Europe/Vilnius',\n        'Europe/Volgograd',\n        'Europe/Warsaw',\n        'Europe/Zaporozhye',\n        'Europe/Zurich',\n    ];\n\n    static africaZones = [\n        'Africa/Abidjan',\n        'Africa/Accra',\n        'Africa/Algiers',\n        'Africa/Bissau',\n        'Africa/Cairo',\n        'Africa/Casablanca',\n        'Africa/Ceuta',\n        'Africa/El_Aaiun',\n        'Africa/Johannesburg',\n        'Africa/Juba',\n        'Africa/Khartoum',\n        'Africa/Lagos',\n        'Africa/Maputo',\n        'Africa/Monrovia',\n        'Africa/Nairobi',\n        'Africa/Ndjamena',\n        'Africa/Sao_Tome',\n        'Africa/Tripoli',\n        'Africa/Tunis',\n        'Africa/Windhoek',\n    ];\n\n    static asiaZones = [\n        'Asia/Almaty',\n        'Asia/Amman',\n        'Asia/Anadyr',\n        'Asia/Aqtau',\n        'Asia/Aqtobe',\n        'Asia/Ashgabat',\n        'Asia/Atyrau',\n        'Asia/Baghdad',\n        'Asia/Baku',\n        'Asia/Bangkok',\n        'Asia/Barnaul',\n        'Asia/Beirut',\n        'Asia/Bishkek',\n        'Asia/Brunei',\n        'Asia/Chita',\n        'Asia/Choibalsan',\n        'Asia/Colombo',\n        'Asia/Damascus',\n        'Asia/Dhaka',\n        'Asia/Dili',\n        'Asia/Dubai',\n        'Asia/Dushanbe',\n        'Asia/Famagusta',\n        'Asia/Gaza',\n        'Asia/Hebron',\n        'Asia/Ho_Chi_Minh',\n        'Asia/Hong_Kong',\n        'Asia/Hovd',\n        'Asia/Irkutsk',\n        'Asia/Jakarta',\n        'Asia/Jayapura',\n        'Asia/Jerusalem',\n        'Asia/Kabul',\n        'Asia/Kamchatka',\n        'Asia/Karachi',\n        'Asia/Kathmandu',\n        'Asia/Khandyga',\n        'Asia/Kolkata',\n        'Asia/Krasnoyarsk',\n        'Asia/Kuala_Lumpur',\n        'Asia/Kuching',\n        'Asia/Macau',\n        'Asia/Magadan',\n        'Asia/Makassar',\n        'Asia/Manila',\n        'Asia/Nicosia',\n        'Asia/Novokuznetsk',\n        'Asia/Novosibirsk',\n        'Asia/Omsk',\n        'Asia/Oral',\n        'Asia/Pontianak',\n        'Asia/Pyongyang',\n        'Asia/Qatar',\n        'Asia/Qostanay',\n        'Asia/Qyzylorda',\n        'Asia/Riyadh',\n        'Asia/Sakhalin',\n        'Asia/Samarkand',\n        'Asia/Seoul',\n        'Asia/Shanghai',\n        'Asia/Singapore',\n        'Asia/Srednekolymsk',\n        'Asia/Taipei',\n        'Asia/Tashkent',\n        'Asia/Tbilisi',\n        'Asia/Tehran',\n        'Asia/Thimphu',\n        'Asia/Tokyo',\n        'Asia/Tomsk',\n        'Asia/Ulaanbaatar',\n        'Asia/Urumqi',\n        'Asia/Ust-Nera',\n        'Asia/Vladivostok',\n        'Asia/Yakutsk',\n        'Asia/Yangon',\n        'Asia/Yekaterinburg',\n        'Asia/Yerevan',\n    ];\n\n    static antarcticaZones = [\n        'Antarctica/Casey',\n        'Antarctica/Davis',\n        'Antarctica/DumontDUrville',\n        'Antarctica/Macquarie',\n        'Antarctica/Mawson',\n        'Antarctica/Palmer',\n        'Antarctica/Rothera',\n        'Antarctica/Syowa',\n        'Antarctica/Troll',\n        'Antarctica/Vostok',\n    ];\n\n    static americaZones = [\n        'America/Adak',\n        'America/Anchorage',\n        'America/Araguaina',\n        'America/Argentina/Buenos_Aires',\n        'America/Argentina/Catamarca',\n        'America/Argentina/Cordoba',\n        'America/Argentina/Jujuy',\n        'America/Argentina/La_Rioja',\n        'America/Argentina/Mendoza',\n        'America/Argentina/Rio_Gallegos',\n        'America/Argentina/Salta',\n        'America/Argentina/San_Juan',\n        'America/Argentina/San_Luis',\n        'America/Argentina/Tucuman',\n        'America/Argentina/Ushuaia',\n        'America/Asuncion',\n        'America/Atikokan',\n        'America/Bahia',\n        'America/Bahia_Banderas',\n        'America/Barbados',\n        'America/Belem',\n        'America/Belize',\n        'America/Blanc-Sablon',\n        'America/Boa_Vista',\n        'America/Bogota',\n        'America/Boise',\n        'America/Cambridge_Bay',\n        'America/Campo_Grande',\n        'America/Cancun',\n        'America/Caracas',\n        'America/Cayenne',\n        'America/Chicago',\n        'America/Chihuahua',\n        'America/Costa_Rica',\n        'America/Creston',\n        'America/Cuiaba',\n        'America/Curacao',\n        'America/Danmarkshavn',\n        'America/Dawson',\n        'America/Dawson_Creek',\n        'America/Denver',\n        'America/Detroit',\n        'America/Edmonton',\n        'America/Eirunepe',\n        'America/El_Salvador',\n        'America/Fort_Nelson',\n        'America/Fortaleza',\n        'America/Glace_Bay',\n        'America/Godthab',\n        'America/Goose_Bay',\n        'America/Grand_Turk',\n        'America/Guatemala',\n        'America/Guayaquil',\n        'America/Guyana',\n        'America/Halifax',\n        'America/Havana',\n        'America/Hermosillo',\n        'America/Indiana/Indianapolis',\n        'America/Indiana/Knox',\n        'America/Indiana/Marengo',\n        'America/Indiana/Petersburg',\n        'America/Indiana/Tell_City',\n        'America/Indiana/Vevay',\n        'America/Indiana/Vincennes',\n        'America/Indiana/Winamac',\n        'America/Inuvik',\n        'America/Iqaluit',\n        'America/Jamaica',\n        'America/Juneau',\n        'America/Kentucky/Louisville',\n        'America/Kentucky/Monticello',\n        'America/La_Paz',\n        'America/Lima',\n        'America/Los_Angeles',\n        'America/Maceio',\n        'America/Managua',\n        'America/Manaus',\n        'America/Martinique',\n        'America/Matamoros',\n        'America/Mazatlan',\n        'America/Menominee',\n        'America/Merida',\n        'America/Metlakatla',\n        'America/Mexico_City',\n        'America/Miquelon',\n        'America/Moncton',\n        'America/Monterrey',\n        'America/Montevideo',\n        'America/Nassau',\n        'America/New_York',\n        'America/Nipigon',\n        'America/Nome',\n        'America/Noronha',\n        'America/North_Dakota/Beulah',\n        'America/North_Dakota/Center',\n        'America/North_Dakota/New_Salem',\n        'America/Ojinaga',\n        'America/Panama',\n        'America/Pangnirtung',\n        'America/Paramaribo',\n        'America/Phoenix',\n        'America/Port-au-Prince',\n        'America/Port_of_Spain',\n        'America/Porto_Velho',\n        'America/Puerto_Rico',\n        'America/Punta_Arenas',\n        'America/Rainy_River',\n        'America/Rankin_Inlet',\n        'America/Recife',\n        'America/Regina',\n        'America/Resolute',\n        'America/Rio_Branco',\n        'America/Santarem',\n        'America/Santiago',\n        'America/Santo_Domingo',\n        'America/Sao_Paulo',\n        'America/Scoresbysund',\n        'America/Sitka',\n        'America/St_Johns',\n        'America/Swift_Current',\n        'America/Tegucigalpa',\n        'America/Thule',\n        'America/Thunder_Bay',\n        'America/Tijuana',\n        'America/Toronto',\n        'America/Vancouver',\n        'America/Whitehorse',\n        'America/Winnipeg',\n        'America/Yakutat',\n        'America/Yellowknife',\n    ];\n\n    static pacificZones = [\n        'Pacific/Apia',\n        'Pacific/Auckland',\n        'Pacific/Bougainville',\n        'Pacific/Chatham',\n        'Pacific/Chuuk',\n        'Pacific/Easter',\n        'Pacific/Efate',\n        'Pacific/Enderbury',\n        'Pacific/Fakaofo',\n        'Pacific/Fiji',\n        'Pacific/Funafuti',\n        'Pacific/Galapagos',\n        'Pacific/Gambier',\n        'Pacific/Guadalcanal',\n        'Pacific/Guam',\n        'Pacific/Honolulu',\n        'Pacific/Kiritimati',\n        'Pacific/Kosrae',\n        'Pacific/Kwajalein',\n        'Pacific/Majuro',\n        'Pacific/Marquesas',\n        'Pacific/Nauru',\n        'Pacific/Niue',\n        'Pacific/Norfolk',\n        'Pacific/Noumea',\n        'Pacific/Pago_Pago',\n        'Pacific/Palau',\n        'Pacific/Pitcairn',\n        'Pacific/Pohnpei',\n        'Pacific/Port_Moresby',\n        'Pacific/Rarotonga',\n        'Pacific/Tahiti',\n        'Pacific/Tarawa',\n        'Pacific/Tongatapu',\n        'Pacific/Wake',\n        'Pacific/Wallis',\n    ];\n\n    static australiaZones = [\n        'Australia/Adelaide',\n        'Australia/Brisbane',\n        'Australia/Broken_Hill',\n        'Australia/Currie',\n        'Australia/Darwin',\n        'Australia/Eucla',\n        'Australia/Hobart',\n        'Australia/Lindeman',\n        'Australia/Lord_Howe',\n        'Australia/Melbourne',\n        'Australia/Perth',\n        'Australia/Sydney',\n    ];\n\n    static atlanticZones = [\n        'Atlantic/Azores',\n        'Atlantic/Bermuda',\n        'Atlantic/Canary',\n        'Atlantic/Cape_Verde',\n        'Atlantic/Faroe',\n        'Atlantic/Madeira',\n        'Atlantic/Reykjavik',\n        'Atlantic/South_Georgia',\n        'Atlantic/Stanley',\n    ];\n\n    static indianZones = [\n        'Indian/Chagos',\n        'Indian/Christmas',\n        'Indian/Cocos',\n        'Indian/Kerguelen',\n        'Indian/Mahe',\n        'Indian/Maldives',\n        'Indian/Mauritius',\n        'Indian/Reunion',\n    ];\n\n\n}\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Side } from '../../node-interface';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nconst moment = require('moment');\n\nexport class ClockNode extends Node {\n  lastInterval = 1000;\n  timeoutFunc;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.time.clock.title;\n    this.description = NODE_INFO.time.clock.description;\n    this.addOutput('timeString', Type.STRING);\n    this.addOutput('hour', Type.NUMBER);\n    this.addOutput('min', Type.NUMBER);\n    this.addOutput('sec', Type.NUMBER);\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Interval');\n\n    this.settings['time'] = NodeSetting.create({\n      description: 'Time',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ time: {}, interval: { weight: 2 } }],\n    });\n\n    this.settings['advanced'] = NodeSetting.create({\n      description: 'Show Advanced Options',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n\n    this.properties['advancedOutputs'] = false;\n  }\n\n  init() {\n    if (this.settings['advanced'].value) {\n      this.addOutputs();\n    }\n  }\n\n  onAdded() {\n    this.inputs[0]['name'] = `[interval] (${this.settings['time'].value})`;\n    clearInterval(this.timeoutFunc);\n    let interval = this.getInputData(0);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    this.timeoutFunc = setInterval(() => {\n      this.recalculate();\n    }, interval);\n    this.lastInterval = interval;\n    this.recalculate();\n  }\n\n  onInputUpdated() {\n    let interval = this.getInputData(0);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    if (interval != this.lastInterval) {\n      this.lastInterval = interval;\n      clearInterval(this.timeoutFunc);\n      this.timeoutFunc = setInterval(() => {\n        this.recalculate();\n      }, interval);\n    }\n  }\n\n  recalculate() {\n    if (this.side !== Side.server) return;\n    const advanced = this.settings['advanced'].value;\n    const now = moment();\n    this.setOutputData(0, now.format('HH:mm:ss'), true);\n    this.setOutputData(1, now.hours(), true);\n    this.setOutputData(2, now.minutes(), true);\n    this.setOutputData(3, now.seconds(), true);\n    if (advanced) {\n      this.setOutputData(4, now.milliseconds(), true);\n      this.setOutputData(5, now.toString(), true);\n      this.setOutputData(6, now.utcOffset() / 60, true);\n      this.setOutputData(7, now.valueOf(), true);\n    }\n  }\n\n  onAfterSettingsChange() {\n    const advanced = this.settings['advanced'].value;\n    this.inputs[0]['name'] = `[interval] (${this.settings['time'].value})`;\n    if (advanced && !this.properties['advancedOutputs']) {\n      this.addOutputs();\n      this.properties['advancedOutputs'] = true;\n      this.persistProperties(false, true);\n    } else if (!advanced && this.properties['advancedOutputs']) {\n      this.removeOutput(4);\n      this.removeOutput(5);\n      this.removeOutput(6);\n      this.removeOutput(7);\n      this.properties['advancedOutputs'] = false;\n      this.persistProperties(false, true);\n    }\n    this.updateNodeOutput();\n    this.onInputUpdated();\n  }\n\n  private addOutputs() {\n    this.addOutput('millis', Type.NUMBER);\n    this.addOutput('longString', Type.STRING);\n    this.addOutput('TZOffset', Type.NUMBER);\n    this.addOutput('epoch', Type.NUMBER);\n  }\n}\nContainer.registerNodeType('time/clock', ClockNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport { NODE_INFO } from '../../node-info';\n\nexport class DateNode extends Node {\n  interval = 5000;\n  timeoutFunc;\n  constructor() {\n    super();\n    this.title = NODE_INFO.time.date.title;\n    this.description = NODE_INFO.time.date.description;\n    this.addOutput('dateString', Type.STRING);\n    this.addOutput('dayString', Type.STRING);\n    this.addOutput('dayOfWeek', Type.NUMBER);\n    this.addOutput('date', Type.NUMBER);\n    this.addOutput('month', Type.NUMBER);\n    this.addOutput('year', Type.NUMBER);\n  }\n\n  onAdded() {\n    clearInterval(this.timeoutFunc);\n    this.timeoutFunc = setInterval(() => {\n      this.recalculate();\n    }, this.interval);\n    this.recalculate();\n  }\n\n  recalculate() {\n    let now = new Date();\n    const day = now.getDay();\n    let dayString: string = null;\n    switch (day) {\n      case 0:\n        dayString = 'Sunday';\n        break;\n      case 1:\n        dayString = 'Monday';\n        break;\n      case 2:\n        dayString = 'Tuesday';\n        break;\n      case 3:\n        dayString = 'Wednesday';\n        break;\n      case 4:\n        dayString = 'Thursday';\n        break;\n      case 5:\n        dayString = 'Friday';\n        break;\n      case 6:\n        dayString = 'Saturday';\n        break;\n    }\n    this.setOutputData(0, now.toLocaleDateString(), true);\n    this.setOutputData(1, dayString, true);\n    this.setOutputData(2, day, true);\n    this.setOutputData(3, now.getDate(), true);\n    this.setOutputData(4, now.getMonth() + 1, true);\n    this.setOutputData(5, now.getFullYear(), true);\n  }\n}\nContainer.registerNodeType('time/date', DateNode);\n","import * as moment from 'moment';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nenum TIME_TYPE {\n  TIME = 'time string as input (YY:MM:DD)',\n  EPOCH = 'time epoch as input (1597662977823)'\n}\n\nexport class TimeDiffNode extends Node {\n  conversionFunction;\n  constructor() {\n    super();\n    this.title = NODE_INFO.time[\"date-difference\"].title;\n    this.description =\n      `## Description\\n ` +\n      NODE_INFO.time[\"date-difference\"].description + ` \\n ` +\n      `## Inputs\\n ` +\n      ` The inputs can be sent as a unix timestamp ***epoch***. Change the settings ***Time input type*** for different input type \\n ` +\n      `## Outputs (return data type is ***JSON***)\\n ` +\n      ` ***out-difference-time*** will return the time difference in for example: ***hours: 1, minutes: 30 ***\\n ` +\n      ` ***out-difference-totals*** will return the time difference in for example: ***hours: 1, minutes: 90 ***\\n `\n\n    this.addInput('time-compare-1', Type.ANY);\n    this.addInput('time-compare-2', Type.ANY);\n    this.addOutput('out-difference-time', Type.ANY);\n    this.addOutput('out-difference-totals', Type.ANY);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Time input type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          // { value: TIME_TYPE.TIME, text: TIME_TYPE.TIME },\n          { value: TIME_TYPE.EPOCH, text: TIME_TYPE.EPOCH },\n        ],\n      },\n      value: TIME_TYPE.TIME,\n    });\n\n\n  }\n  onAdded() {\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    const date1 = this.getInputData(0);\n    const date2 = this.getInputData(1);\n    const timeType = this.settings['time'].value\n    try {\n      if (timeType === TIME_TYPE.TIME) {\n        this.setOutputData(0, this.diffTime(moment(date1), date2));\n        this.setOutputData(1, this.diffTotals(moment(date1), date2));\n      } else if (timeType === TIME_TYPE.EPOCH) {\n        this.setOutputData(0, this.diffTime(moment(parseInt(date1)), moment(parseInt(date2))));\n        this.setOutputData(1, this.diffTotals(moment(parseInt(date1)), moment(parseInt(date2))));\n      }\n    } catch (e) {\n      this.debugWarn(`ERROR: trying to convert a timezone ${e}`);\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated()\n  }\n\n\n  diffTime(date1: any, date2: any) {\n    let years = date1.diff(date2, 'year');\n    date2.add(years, 'years');\n    let months = date1.diff(date2, 'months');\n    date2.add(months, 'months');\n    let days = date1.diff(date2, 'days');\n    date2.add(days, 'days');\n    let hours = date1.diff(date2, 'hours');\n    date2.add(hours, 'hours');\n    let minutes = date1.diff(date2, 'minutes');\n    date2.add(minutes, 'minutes');\n    let seconds = date1.diff(date2, 'seconds');\n    let ms = date1.diff(date2);\n    return { years, months, days, hours, minutes, seconds, ms };\n  }\n\n  diffTotals(date1: any, date2: any) {\n    let years = date1.diff(date2, 'year');\n    let months = date1.diff(date2, 'months');\n    let days = date1.diff(date2, 'days');\n    let hours = date1.diff(date2, 'hours');\n    let minutes = date1.diff(date2, 'minutes');\n    let seconds = date1.diff(date2, 'seconds');\n    let ms = date1.diff(date2);\n    return { years, months, days, hours, minutes, seconds, ms };\n  }\n\n}\n\nContainer.registerNodeType('time/date-difference', TimeDiffNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass StopwatchNode extends Node {\n  lastRunVal = false;\n  lastResetVal = false;\n  lastInterval = 100;\n  runState = false;\n  startTime = null;\n  elapsed = 0;\n  units = 1;\n  digits = 3;\n  timeoutFunc;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.time.stopwatch.title;\n    this.description = NODE_INFO.time.stopwatch.description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, 0, 'Enable', false);\n    this.addInput('reset', Type.BOOLEAN);\n\n    this.settings['units'] = NodeSetting.create({\n      description: 'Output Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 1, text: 'Milliseconds' },\n          { value: 1000, text: 'Seconds' },\n          { value: 60000, text: 'Minutes' },\n          { value: 3.6e6, text: 'Hours' },\n          { value: 8.64e7, text: 'Days' },\n        ],\n      },\n      value: 1,\n    });\n    this.addInputWithSettings('interval', Type.NUMBER, 200, 'Count Interval', false);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'milliseconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n    this.addOutput('elapsed', Type.NUMBER);\n\n    this.setOutputData(0, null);\n    this.elapsed = 0;\n  }\n\n  onAdded() {\n    this.runState = false;\n    this.setOutputData(0, this.elapsed);\n    this.inputs[2]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.outputs[0]['name'] = '[elapsed] (milliseconds)';\n    this.onAfterSettingsChange();\n  }\n\n  onInputUpdated() {\n    let run = this.getInputData(0);\n    let reset = this.getInputData(1);\n\n    if (reset && !this.lastResetVal) {\n      this.elapsed = 0;\n      this.startTime = Date.now();\n      this.setOutputData(0, 0, true);\n    }\n    this.lastResetVal = reset;\n\n    let interval = this.getInputData(2);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    if (interval != this.lastInterval && this.runState) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, Date.now() - this.startTime + this.elapsed, true);\n      this.timeoutFunc = setInterval(() => {\n        const output = (Date.now() - this.startTime + this.elapsed) / this.units;\n        this.setOutputData(0, Utils.toFixedNumber(output, this.digits), true);\n      }, interval);\n      this.lastInterval = interval;\n    }\n\n    if (run && !this.lastRunVal) {\n      this.setOutputData(0, this.elapsed, true);\n      this.runState = true;\n      this.startTime = Date.now();\n      this.timeoutFunc = setInterval(() => {\n        const output = (Date.now() - this.startTime + this.elapsed) / this.units;\n        this.setOutputData(0, Utils.toFixedNumber(output, this.digits), true);\n      }, interval);\n      this.lastRunVal = run;\n    } else if (!run && this.lastRunVal) {\n      clearInterval(this.timeoutFunc);\n      this.elapsed = Date.now() - this.startTime + this.elapsed;\n      this.runState = false;\n      this.setOutputData(0, this.elapsed, true);\n      this.lastRunVal = run;\n    }\n\n    /*\n    if (run && run != this.lastRunVal) {\n      this.runState = true;\n      this.startTime = Date.now();\n      this.timeoutFunc = setInterval(() => {\n        const output = (Date.now() - this.startTime + this.elapsed) / this.units;\n        this.setOutputData(0, Utils.toFixedNumber(output, this.digits), true);\n      }, interval);\n      this.lastRunVal = run;\n    } else if (!run && run != this.lastRunVal) {\n      this.elapsed = Date.now() - this.startTime + this.elapsed;\n      this.runState = false;\n      clearInterval(this.timeoutFunc);\n      this.lastRunVal = run;\n    }\n\n*/\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[2]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.units = Number(this.settings['units'].value);\n    switch (this.units) {\n      case 1:\n        this.outputs[0]['name'] = '[elapsed] (milliseconds)';\n        break;\n      case 1000:\n        this.outputs[0]['name'] = '[elapsed] (seconds)';\n        break;\n      case 60000:\n        this.outputs[0]['name'] = '[elapsed] (minutes)';\n        break;\n      case 3.6e6:\n        this.outputs[0]['name'] = '[elapsed] (hours)';\n        break;\n      case 8.64e7:\n        this.outputs[0]['name'] = '[elapsed] (days)';\n        break;\n      default:\n        this.outputs[0]['name'] = '[elapsed] (milliseconds)';\n    }\n\n    const output = Number(this.outputs[0].data) / this.units;\n    this.setOutputData(0, Utils.toFixedNumber(output, this.digits), true);\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('time/stopwatch', StopwatchNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nconst CronJob = require('cron').CronJob;\n// const parser = require('cron-parser');\n//const cronTime = require('cron-time-generator');\nconst jsonata = require('jsonata');\nconst construe = require('cronstrue');\n\nexport class CronIntervalNode extends Node {\n  job = null;\n  jobCronExp = '';\n  timeoutFunc;\n  constructor() {\n    super();\n    this.title = NODE_INFO.time[\"cron-interval\"].title;\n    this.description = NODE_INFO.time[\"cron-interval\"].description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, false, 'Enable', false);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('info', Type.STRING);\n    this.addOutput('cronExpression', Type.STRING);\n    this.addOutput('cronDescription', Type.STRING);\n    this.addOutput('nextExecution', Type.STRING);\n\n    this.settings['timezone'] = NodeSetting.create({\n      description: 'Enter the cron time zone',\n      value: 'Australia/Sydney',\n      type: SettingType.STRING,\n    });\n    this.settings['cron-type'] = NodeSetting.create({\n      description: 'Cron Type',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 0, text: 'Every Minutes (At every xth minute)' },\n          { value: 1, text: 'Every Hours (At minute x past every xth hour.)' },\n          { value: 2, text: 'Every Days (At x:xx every x days)' },\n          { value: 8, text: 'Every Day At Time (x:xx)' },\n          { value: 3, text: 'Every Month (Start of every month)' },\n          { value: 4, text: 'Every Month On (On x Day at x:xx)' },\n          { value: 5, text: 'Every Year (Start of every year)' },\n          { value: 6, text: 'Every Year On (On x month x day at x:xx)' },\n          { value: 7, text: 'Between Days (At x:xx between x and x day of the month)' },\n        ],\n      },\n      value: 0,\n    });\n    this.settings['min'] = NodeSetting.create({\n      description: 'Set minute',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n    this.settings['hour'] = NodeSetting.create({\n      description: 'Set hour',\n      value: 13,\n      type: SettingType.NUMBER,\n    });\n    this.settings['day'] = NodeSetting.create({\n      description: 'Set day',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n    this.settings['dayBetweenStart'] = NodeSetting.create({\n      description: 'Day Range Start',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n    this.settings['dayBetweenEnd'] = NodeSetting.create({\n      description: 'Day Range End',\n      value: 15,\n      type: SettingType.NUMBER,\n    });\n    this.settings['month'] = NodeSetting.create({\n      description: 'Set month',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n\n    this.setSettingsConfig({\n      groups: [{ dayBetweenStart: {}, dayBetweenEnd: {} }],\n      conditions: {\n        min: setting => {\n          const cronSetting = setting['cron-type'].value;\n          return (\n            cronSetting == 0 ||\n            cronSetting == 1 ||\n            cronSetting == 2 ||\n            cronSetting == 4 ||\n            cronSetting == 6 ||\n            cronSetting == 7 ||\n            cronSetting == 8\n          );\n        },\n        hour: setting => {\n          const cronSetting = setting['cron-type'].value;\n          return (\n            cronSetting == 1 ||\n            cronSetting == 2 ||\n            cronSetting == 4 ||\n            cronSetting == 6 ||\n            cronSetting == 7 ||\n            cronSetting == 8\n          );\n        },\n        day: setting => {\n          const cronSetting = setting['cron-type'].value;\n          return cronSetting == 2 || cronSetting == 4 || cronSetting == 6 || cronSetting == 7;\n        },\n        dayBetweenStart: setting => {\n          const cronSetting = setting['cron-type'].value;\n          return cronSetting == 7;\n        },\n        dayBetweenEnd: setting => {\n          const cronSetting = setting['cron-type'].value;\n          return cronSetting == 7;\n        },\n        month: setting => {\n          const cronSetting = setting['cron-type'].value;\n          return cronSetting == 6;\n        },\n      },\n    });\n  }\n\n  onAdded() {\n    clearInterval(this.timeoutFunc);\n    this.setOutputData(0, false);\n    this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n\n  onRemoved() {\n    //remove the job on delete of the node\n    if (this.job) this.job.stop();\n  }\n\n  jsonataQuery(nextJobs) {\n    //use jsonata to filter the next scheduled time\n    let expression = jsonata('_d');\n    return expression.evaluate(nextJobs);\n  }\n\n  onInputUpdated() {\n    const enable = this.getInputData(0);\n    const minute = parseInt(this.settings['min'].value);\n    const hour = parseInt(this.settings['hour'].value);\n    const day = parseInt(this.settings['day'].value);\n    const dayBetweenStart = parseInt(this.settings['dayBetweenStart'].value);\n    const dayBetweenEnd = parseInt(this.settings['dayBetweenEnd'].value);\n    const month = parseInt(this.settings['month'].value);\n    const timezone = this.settings['timezone'].value;\n    const cronType = this.settings['cron-type'].value;\n    let cronExp = null;\n\n    if (enable) {\n      cronExp = 'invalid';\n      //build the cronjob string\n      if (cronType == 0 && minute >= 0 && minute < 60) {\n        // 'Every Minutes (At every xth minute)'\n        // cronExp = cronTime.every(minute).minutes();\n        cronExp = '*/' + minute + ' * * * *';\n      } else if (cronType == 1 && minute >= 0 && minute < 60 && hour >= 0 && hour < 24) {\n        // 'Every Hours (At minute x past every xth hour.)'\n        //cronExp = cronTime.every(hour).hours();\n        cronExp = minute + ' */' + hour + ' * * *';\n      } else if (cronType == 2 && minute >= 0 && minute < 60 && hour >= 0 && hour < 24 && day > 0 && day <= 31) {\n        // 'Every Days (At x:xx every x days)'\n        //cronExp = cronTime.every(day).days(hour, minute);\n        cronExp = minute + ' ' + hour + ' */' + day + ' * *';\n      } else if (cronType == 3) {\n        // 'Every Month (Start of every month)'\n        //cronExp = cronTime.everyMonth();\n        cronExp = '0 0 1 * *';\n      } else if (cronType == 4 && minute >= 0 && minute < 60 && hour >= 0 && hour < 24 && day > 0 && day <= 31) {\n        // 'Every Month On (On x Day at x:xx)'\n        //cronExp = cronTime.everyMonthOn(day, hour, minute);\n        cronExp = minute + ' ' + hour + ' ' + day + ' * *';\n      } else if (cronType == 5) {\n        // 'Every Year (Start of every year)'\n        //cronExp = cronTime.everyYear();\n        cronExp = '0 0 1 1 *';\n      } else if (\n        cronType == 6 &&\n        minute >= 0 &&\n        minute < 60 &&\n        hour >= 0 &&\n        hour < 24 &&\n        day > 0 &&\n        day <= 31 &&\n        month >= 0 &&\n        month <= 12\n      ) {\n        // 'Every Year On (On x month x day at x:xx)'\n        //cronExp = cronTime.everyYearIn(month, day, hour, minute);\n        cronExp = minute + ' ' + hour + ' ' + day + ' ' + month + ' *';\n      } else if (\n        cronType == 7 &&\n        minute >= 0 &&\n        minute < 60 &&\n        hour >= 0 &&\n        hour < 24 &&\n        dayBetweenStart < dayBetweenEnd &&\n        dayBetweenStart >= 1 &&\n        dayBetweenStart <= 30 &&\n        dayBetweenEnd >= 2 &&\n        dayBetweenEnd <= 31\n      ) {\n        //'Between Days (Between  x - x th day of the month)'\n        //cronExp = cronTime.between(day, dayBetween).days();\n        cronExp = minute + ' ' + hour + ' ' + dayBetweenStart + '-' + dayBetweenEnd + ' * *';\n      } else if (cronType == 8 && minute >= 0 && minute < 60 && hour >= 0 && hour < 24) {\n        // 'Every Day At Time (x:xx)'\n        cronExp = minute + ' ' + hour + ' * * *';\n      }\n    }\n    if (!enable || cronExp == null || cronExp === 'invalid') {\n      if (cronExp === 'invalid') this.setOutputData(1, 'invalid configuration');\n      else this.setOutputData(1, 'CRON job stopped');\n      try {\n        if (this.job) this.job.stop();\n      } catch (err) {\n        this.setOutputData(1, err);\n      }\n      this.job = null;\n      this.jobCronExp = '';\n      this.setOutputData(0, false, true);\n      this.setOutputData(2, null, true);\n      this.setOutputData(3, null, true);\n      this.setOutputData(4, null, true);\n      return;\n    }\n\n    if (this.job && cronExp !== this.jobCronExp) {\n      this.setOutputData(1, 'CRON job stopped');\n      this.job.stop();\n      this.job = null;\n      this.jobCronExp = '';\n    }\n    try {\n      this.jobCronExp = cronExp;\n      this.setOutputData(2, cronExp);\n      this.setOutputData(3, construe.toString(cronExp));\n      this.job = new CronJob(\n        cronExp,\n        () => {\n          this.setOutputData(0, true);\n          this.timeoutFunc = setTimeout(() => {\n            this.setOutputData(0, false);\n          }, 500);\n          //get next job\n          let nextJobs = this.job.nextDates(1);\n          this.setOutputData(4, this.jsonataQuery(nextJobs));\n        },\n        null,\n        null,\n        timezone,\n      );\n      setTimeout(function() {}, 500);\n      this.setOutputData(1, 'CRON job started');\n      this.job.start();\n      let nextJobs = this.job.nextDates(1);\n      this.setOutputData(4, this.jsonataQuery(nextJobs));\n    } catch (err) {\n      this.setOutputData(1, err);\n    }\n  }\n}\nContainer.registerNodeType('time/cron-interval', CronIntervalNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nconst CronJob = require('cron').CronJob;\n//const parser = require('cron-parser');\n//const cb = require('dx-cron-builder');\nconst jsonata = require('jsonata');\nconst construe = require('cronstrue');\n\nexport class CronWeeklyNode extends Node {\n  job = null;\n  jobCronExp = '';\n  timeoutFunc;\n  constructor() {\n    super();\n    this.title = NODE_INFO.time[\"cron-weekly\"].title;\n    this.description = NODE_INFO.time[\"cron-weekly\"].description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, false, 'Enable', false);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('info', Type.STRING);\n    this.addOutput('cronExpression', Type.STRING);\n    this.addOutput('cronDescription', Type.STRING);\n    this.addOutput('nextExecution', Type.STRING);\n    this.settings['timezone'] = NodeSetting.create({\n      description: 'Enter the cron time zone',\n      value: 'Australia/Sydney',\n      type: SettingType.STRING,\n    });\n\n    this.settings['min'] = NodeSetting.create({\n      description: 'Set minute',\n      value: 0,\n      type: SettingType.NUMBER,\n    });\n    this.settings['hour'] = NodeSetting.create({\n      description: 'Set hour',\n      value: 6,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['sunday'] = NodeSetting.create({\n      description: 'sunday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['monday'] = NodeSetting.create({\n      description: 'monday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['tuesday'] = NodeSetting.create({\n      description: 'tuesday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['wednesday'] = NodeSetting.create({\n      description: 'wednesday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['thursday'] = NodeSetting.create({\n      description: 'thursday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['friday'] = NodeSetting.create({\n      description: 'friday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n    this.settings['saturday'] = NodeSetting.create({\n      description: 'saturday',\n      value: false,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n    clearInterval(this.timeoutFunc);\n    this.setOutputData(0, false);\n    this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n\n  onRemoved() {\n    //remove the job on delete of the node\n    if (this.job) this.job.stop();\n  }\n\n  jsonataQuery(nextJobs) {\n    //use jsonata to filter the next scheduled time\n    let expression = jsonata('_d');\n    return expression.evaluate(nextJobs);\n  }\n\n  onInputUpdated() {\n    const enable = this.getInputData(0);\n    let cronExp = null;\n    //make sure the times are correct\n    if (enable) {\n      cronExp = 'invalid';\n      const minute = this.settings['min'].value;\n      const hour = this.settings['hour'].value;\n      if (minute >= 0 && minute <= 59 && hour >= 0 && hour < 24) {\n        cronExp = minute + ' ' + hour + ' * * ';\n        let daysArray = [];\n        if (this.settings['sunday'].value) daysArray.push('0');\n        if (this.settings['monday'].value) daysArray.push('1');\n        if (this.settings['tuesday'].value) daysArray.push('2');\n        if (this.settings['wednesday'].value) daysArray.push('3');\n        if (this.settings['thursday'].value) daysArray.push('4');\n        if (this.settings['friday'].value) daysArray.push('5');\n        if (this.settings['saturday'].value) daysArray.push('6');\n        cronExp += daysArray.join(',');\n      }\n    }\n    if (!enable || cronExp == null || cronExp === 'invalid') {\n      if (cronExp === 'invalid') this.setOutputData(1, 'invalid configuration');\n      else this.setOutputData(1, 'CRON job stopped');\n      try {\n        if (this.job) this.job.stop();\n      } catch (err) {\n        this.setOutputData(1, err);\n      }\n      this.job = null;\n      this.jobCronExp = '';\n      this.setOutputData(0, false, true);\n      this.setOutputData(2, null, true);\n      this.setOutputData(3, null, true);\n      this.setOutputData(4, null, true);\n      return;\n    }\n    const timezone = this.settings['timezone'].value;\n    if (this.job && cronExp !== this.jobCronExp) {\n      this.setOutputData(1, 'CRON job stopped');\n      this.job.stop();\n      this.job = null;\n      this.jobCronExp = '';\n    }\n    try {\n      this.jobCronExp = cronExp;\n      this.setOutputData(2, cronExp);\n      this.setOutputData(3, construe.toString(cronExp));\n      this.job = new CronJob(\n        cronExp,\n        () => {\n          this.setOutputData(0, true);\n          this.timeoutFunc = setTimeout(() => {\n            this.setOutputData(0, false);\n          }, 500);\n          //get next job\n          let nextJobs = this.job.nextDates(1);\n          this.setOutputData(4, this.jsonataQuery(nextJobs));\n        },\n        null,\n        null,\n        timezone,\n      );\n      setTimeout(function() {}, 500);\n      this.setOutputData(1, 'CRON job started');\n      this.job.start();\n      let nextJobs = this.job.nextDates(1);\n      this.setOutputData(4, this.jsonataQuery(nextJobs));\n    } catch (err) {\n      this.setOutputData(1, err);\n    }\n  }\n}\nContainer.registerNodeType('time/cron-weekly', CronWeeklyNode);\n","import { isNull } from '../../../utils/helper';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nconst CronJob = require('cron').CronJob;\nconst jsonata = require('jsonata');\nconst construe = require('cronstrue');\nconst cronValidator = require('cron-validator');\nimport { NODE_INFO } from '../../node-info';\n\nexport class CronExpressionNode extends Node {\n  job = null;\n  jobCronExp = '';\n  timeoutFunc;\n  constructor() {\n    super();\n    this.title = NODE_INFO.time[\"cron-expression\"].title;\n    this.description = NODE_INFO.time[\"cron-expression\"].description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable', false);\n    this.addInputWithSettings('cronExpression', Type.STRING, '', 'Cron Expression');\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('info', Type.STRING);\n    this.addOutput('cronDescription', Type.STRING);\n    this.addOutput('nextExecution', Type.STRING);\n    this.settings['timezone'] = NodeSetting.create({\n      description: 'Enter the cron time zone',\n      value: 'Australia/Sydney',\n      type: SettingType.STRING,\n    });\n  }\n\n  onAdded() {\n    clearInterval(this.timeoutFunc);\n    this.setOutputData(0, false);\n    this.onAfterSettingsChange();\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n\n  onRemoved() {\n    //remove the job on delete of the node\n    if (this.job) this.job.stop();\n  }\n\n  jsonataQuery(nextJobs) {\n    //use jsonata to filter the next scheduled time\n    let expression = jsonata('_d');\n    return expression.evaluate(nextJobs);\n  }\n\n  onInputUpdated() {\n    const enable = this.getInputData(0);\n    const cronExp = this.getInputData(1);\n    const valid = cronValidator.isValidCron(cronExp);\n    // console.log('valid?', valid)\n    if (!enable || !valid) {\n      if (!valid) {\n        this.setOutputData(1, 'invalid CRON Expression');\n        // console.log('I set the info')\n      }\n      else this.setOutputData(1, 'CRON job stopped');\n      try {\n        if (this.job) this.job.stop();\n      } catch (err) {\n        // console.log('err', err)\n        this.setOutputData(1, err);\n      }\n      this.job = null;\n      this.jobCronExp = '';\n      this.setOutputData(0, false, true);\n      this.setOutputData(2, null, true);\n      this.setOutputData(3, null, true);\n      return;\n    }\n\n    const timezone = this.settings['timezone'].value;\n    if (this.job && cronExp !== this.jobCronExp) {\n      this.setOutputData(1, 'CRON job stopped');\n      this.job.stop();\n      this.job = null;\n      this.jobCronExp = '';\n    }\n    try {\n      this.jobCronExp = cronExp;\n      this.setOutputData(2, construe.toString(cronExp));\n      this.job = new CronJob(\n        cronExp,\n        () => {\n          this.setOutputData(0, true);\n          this.timeoutFunc = setTimeout(() => {\n            this.setOutputData(0, false);\n          }, 500);\n          //get next job\n          if (isNull(this.job)) return\n          let nextJobs = this.job.nextDates(1);\n          this.setOutputData(3, this.jsonataQuery(nextJobs));\n        },\n        null,\n        null,\n        timezone,\n      );\n      setTimeout(function () { }, 500);\n      this.setOutputData(1, 'CRON job started');\n      this.job.start();\n      let nextJobs = this.job.nextDates(1);\n      this.setOutputData(3, this.jsonataQuery(nextJobs));\n    } catch (err) {\n      this.setOutputData(1, err);\n    }\n  }\n}\nContainer.registerNodeType('time/cron-expression', CronExpressionNode);\n","module.exports = require(\"cron-validator\");","import * as moment from 'moment';\nimport { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\n\nexport class TimestampGeneratorNode extends Node {\n\n  constructor() {\n    super();\n\n    this.title = NODE_INFO.time[\"timestamp-generator\"].title;\n    this.description =\n    `## Description\\n ` +\n    NODE_INFO.time[\"timestamp-generator\"].description +` \\n `+\n    `## Inputs\\n ` +\n    ` The an active input a timestamp will be generated based of the device time \\n `+\n    `## Outputs (return data type is ***JSON***)\\n ` +\n    ` ***date-string*** will return the timestamp: **\"2019-08-31T11:54:27+10:00\" ***\\n `+\n    ` ***date-unix*** will return the timestamp: **1598838867***\\n `+\n    ` ***date-format*** will return the time that is formatted as per moment js format options https://momentjs.com/docs/#/displaying/format/*\\n `+\n    `### Formatting options examples\\n ` +\n    `-ENTER in settings\t***LT*** with return 8:30 PM\\n ` +\n    `-ENTER in settings\t***LTS*** with return 8:30:25 PM\\n ` +\n    `-ENTER in settings\t***LLLL*** with return \tThursday, September 4, 1986 8:30 PM\\n `\n    this.addInput('input', Type.ANY);\n    this.addOutput('date-string', Type.STRING);\n    this.addOutput('date-unix', Type.STRING);\n    this.addOutput('date-format', Type.STRING);\n    this.settings['format'] = NodeSetting.create({\n      description: 'Formatting options',\n      value: \"x\",\n      type: SettingType.STRING,\n    });\n  }\n\n  onAfterSettingsChange() {\n    // this.onInputUpdated()\n  }\n\n  onInputUpdated() {\n    const format = this.settings['format'].value\n    let date = moment()\n    this.setOutputData(0, date.format());\n    this.setOutputData(1, date.unix());\n    this.setOutputData(2, date.format(format));\n  }\n\n\n\n}\nContainer.registerNodeType('time/timestamp-generator', TimestampGeneratorNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass COVNode extends Node {\n  lastValue;\n  timeoutFunc;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.trigger[\"change-of-value\"].title;\n    this.description = NODE_INFO.trigger[\"change-of-value\"].description;\n    this.addInput('input', Type.ANY);\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Interval');\n    this.addInputWithSettings('threshold', Type.NUMBER, 0, 'COV Threshold');\n    this.addOutput('output', Type.BOOLEAN);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n  }\n\n  onAdded() {\n \n    this.setOutputData(0, false);\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n  }\n  \n  onExecute(){\n    //this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const input = this.getInputData(0);\n    const isNumber = typeof input === 'number';\n    if (this.inputs[0].updated && input !== this.lastValue) {\n      if (\n        typeof this.lastValue !== 'number' ||\n        !isNumber ||\n        (isNumber && Math.abs(input - this.lastValue) >= this.getInputData(2))\n      ) {\n        this.lastValue = input;\n        this.setOutputData(0, true);\n        const interval = TimeUtils.timeConvert(this.getInputData(1), this.settings['time'].value);\n        if (this.timeoutFunc) clearTimeout(this.timeoutFunc);\n        this.timeoutFunc = setTimeout(() => {\n          this.setOutputData(0, false);\n        }, interval);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[1]['name'] = `[interval] (${this.settings['time'].value})`;\n  }\n}\nContainer.registerNodeType('trigger/change-of-value', COVNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport Utils from '../../utils';\n\nclass RandomNode extends Node {\n  state = false;\n  lastVal;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.trigger.random.title;\n    this.description = NODE_INFO.trigger.random.description;\n    this.settings['digits'] = NodeSetting.create({\n      description: 'Number of decimal places',\n      value: 3,\n      type: SettingType.NUMBER,\n    });\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addInputWithSettings('max', Type.NUMBER, 1, 'Maximum Value');\n    this.addInputWithSettings('min', Type.NUMBER, 0, 'Minimum Value');\n    this.addOutput('output', Type.NUMBER);\n    this.setOutputData(0, null);\n  }\n\n  onAdded() {\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    let trigger = this.getInputData(0);\n    if (trigger == null) {\n      this.lastVal = false;\n      this.setOutputData(0, null);\n      this.state = false;\n    } else if (trigger == this.lastVal) return;\n    if (trigger == true) {\n      const max = this.getInputData(1);\n      const min = this.getInputData(2);\n      this.settings['digits'].value;\n      let digits = this.settings['digits'].value;\n      let result = Math.random() * (max - min) + min;\n      result = Utils.toFixedNumber(result, digits);\n      this.setOutputData(0, result);\n    }\n    this.lastVal = trigger;\n  }\n}\nContainer.registerNodeType('trigger/random', RandomNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { Type } from '../../node-io';\n\nexport class TriggeredInjectNode extends Node {\n  lastTrigger;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.trigger.inject.title;\n    this.description = NODE_INFO.trigger.inject.description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addInputWithSettings('message', Type.STRING, 'true', 'Message');\n    this.addInput('trigger', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n  }\n\n  onCreated() {\n    this.lastTrigger = false;\n  }\n\n  onAdded() {\n    const enable = this.getInputData(0);\n    if (!enable) {\n      this.setOutputData(0, null);\n      return;\n    }\n  }\n\n  onInputUpdated() {\n    const enable = this.getInputData(0);\n    if (!enable) {\n      this.setOutputData(0, null, true);\n      return;\n    }\n    let trigger = this.getInputData(2);\n    if (trigger && !this.lastTrigger) {\n      const message = this.getInputData(1);\n      this.setOutputData(0, message, false);\n    }\n    this.lastTrigger = trigger;\n  }\n\n  onAfterSettingsChange() {}\n}\nContainer.registerNodeType('trigger/inject', TriggeredInjectNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nexport class InjectNode extends Node {\n  lastInterval = 1000;\n  runState: boolean = true;\n  timeoutFunc;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.trigger[\"interval-inject\"].title;\n    this.description = NODE_INFO.trigger[\"interval-inject\"].description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addInputWithSettings('message', Type.ANY, 'true', 'Message');\n    this.addInputWithSettings('interval', Type.NUMBER, 1, 'Interval');\n    this.addOutput('output', Type.BOOLEAN);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n  }\n\n  onAdded() {\n    clearInterval(this.timeoutFunc);\n    this.inputs[2]['name'] = `[interval] (${this.settings['time'].value})`;\n    const enable = this.getInputData(0);\n    if (!enable) {\n      this.setOutputData(0, null);\n      this.runState = false;\n      return;\n    }\n    let interval = this.getInputData(2);\n    interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n    this.timeoutFunc = setInterval(() => {\n      const message = this.getInputData(1);\n      this.setOutputData(0, message);\n    }, interval);\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const enable = this.getInputData(0);\n    if (!enable && this.runState) {\n      clearInterval(this.timeoutFunc);\n      this.setOutputData(0, null, true);\n      this.runState = false;\n      return;\n    } else if (!enable && !this.runState) {\n      this.setOutputData(0, null, true);\n      this.runState = false;\n      return;\n    } else if (enable) {\n      let interval = this.getInputData(2);\n      interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n      if (this.runState) {\n        if (interval != this.lastInterval) {\n          this.lastInterval = interval;\n          clearInterval(this.timeoutFunc);\n          this.timeoutFunc = setInterval(() => {\n            const message = this.getInputData(1);\n            this.setOutputData(0, message);\n          }, interval);\n        }\n        return;\n      } else if (!this.runState) {\n        this.runState = true;\n        this.timeoutFunc = setInterval(() => {\n          const message = this.getInputData(1);\n          this.setOutputData(0, message);\n        }, interval);\n      }\n    }\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[2]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('trigger/interval-inject', InjectNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\n\nexport class TimeIteratorNode extends Node {\n  state: boolean = false;\n  runState: boolean = true;\n  complete: boolean = false;\n  lastStart: boolean = false;\n  lastStop: boolean = false;\n  timeoutFunc;\n  count = 0;\n  reqInterval = null;\n  reqIterations = null;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.trigger.iterator.title;\n    this.description = NODE_INFO.trigger.iterator.description;\n    this.addInputWithSettings('interval', Type.NUMBER, 10, 'Interval', false);\n    this.addInputWithSettings('iterations', Type.NUMBER, 5, 'Iterations', false);\n    this.addInput('start', Type.BOOLEAN);\n    this.addInput('stop', Type.BOOLEAN);\n    this.addOutput('output', Type.BOOLEAN);\n    this.addOutput('complete', Type.BOOLEAN);\n    this.addOutput('count', Type.NUMBER);\n    this.settings['time'] = NodeSetting.create({\n      description: 'Units',\n      type: SettingType.DROPDOWN,\n      config: {\n        items: [\n          { value: 'milliseconds', text: 'Milliseconds' },\n          { value: 'seconds', text: 'Seconds' },\n          { value: 'minutes', text: 'Minutes' },\n          { value: 'hours', text: 'Hours' },\n        ],\n      },\n      value: 'seconds',\n    });\n    this.setSettingsConfig({\n      groups: [{ interval: { weight: 2 }, time: {} }],\n    });\n    this.settings['false'] = NodeSetting.create({\n      description: 'Generate False',\n      value: true,\n      type: SettingType.BOOLEAN,\n    });\n  }\n\n  onAdded() {\n    clearInterval(this.timeoutFunc);\n    this.setOutputData(0, false);\n    this.setOutputData(1, false);\n    this.inputs[0]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.lastStart = false;\n    this.lastStop = false;\n    this.complete = true;\n    this.count = 0;\n    this.onInputUpdated();\n  }\n\n  start() {\n    this.runState = true;\n    if (this.settings['false'].value) {\n      this.timeoutFunc = setInterval(() => {\n        if (this.state == true) {\n          this.state = false;\n          this.setOutputData(0, false);\n          if (this.count >= this.reqIterations) {\n            clearInterval(this.timeoutFunc);\n            this.setOutputData(1, false);\n            this.complete = true;\n            this.runState = false;\n          }\n        } else {\n          this.state = true;\n          this.setOutputData(0, true);\n          this.count++;\n          this.setOutputData(2, this.count);\n        }\n      }, this.reqInterval / (this.reqIterations * 2 - 1));\n    } else {\n      this.timeoutFunc = setInterval(() => {\n        this.state = true;\n        this.setOutputData(0, true);\n        this.count++;\n        this.setOutputData(2, this.count);\n        if (this.count >= this.reqIterations) {\n          clearInterval(this.timeoutFunc);\n          this.complete = true;\n          this.runState = false;\n        }\n      }, this.reqInterval / (this.reqIterations - 1));\n    }\n  }\n\n  onInputUpdated() {\n    let stop = this.getInputData(3);\n    if (stop && !this.lastStop && !this.complete) {\n      this.lastStop = stop;\n      if (this.settings['false'].value) {\n        this.state = false;\n        this.setOutputData(0, false);\n      }\n      clearInterval(this.timeoutFunc);\n      this.runState = false;\n      return;\n    }\n\n    if (!stop && this.lastStop && !this.complete) {\n      this.lastStop = stop;\n      this.start();\n      return;\n    }\n    this.lastStop = stop;\n\n    let start = this.getInputData(2);\n    if (start && !this.lastStart) {\n      this.lastStart = start;\n      clearInterval(this.timeoutFunc);\n      this.count = 0;\n      if (this.settings['false'].value) {\n        this.state = false;\n        this.setOutputData(0, false);\n      }\n      let interval = this.getInputData(0);\n      interval = TimeUtils.timeConvert(interval, this.settings['time'].value);\n      const iterations = this.getInputData(1);\n      if (iterations <= 0 || interval <= 0) {\n        this.runState = false;\n        return;\n      }\n      this.reqInterval = interval;\n      this.reqIterations = iterations;\n      this.setOutputData(0, true);\n      this.state = true;\n      this.complete = false;\n      this.count++;\n      this.setOutputData(2, this.count);\n      if (stop) {\n        if (this.settings['false'].value) {\n          setTimeout(() => {\n            this.runState = false;\n            this.state = false;\n            this.setOutputData(0, false);\n          }, interval / (iterations * 2 - 1));\n          return;\n        }\n        this.runState = false;\n        return;\n      } else this.start();\n    }\n    this.lastStart = start;\n  }\n\n  onAfterSettingsChange() {\n    this.inputs[0]['name'] = `[interval] (${this.settings['time'].value})`;\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('trigger/iterator', TimeIteratorNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass ScheduleAfterhoursOffWidgetNode extends Node {\n  currentMode: string = 'SCHEDULE';\n  remainingRuntime: number = 0;\n  AHRuntime: number;\n  timeoutFunc;\n  updateInterval: number = 5000;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.widget[\"schedule-afterhours-off\"].title;\n    this.description = NODE_INFO.widget[\"schedule-afterhours-off\"].description;\n    this.addInput('modeInput', Type.STRING);\n    this.addInput('scheduleInput', Type.BOOLEAN);\n    this.addInput('scheduleNextStop', Type.NUMBER);\n    this.addInputWithSettings('AH duration (mins)', Type.NUMBER, 120, 'Afterhours Duration (minutes)');\n    this.addOutput('modeOutput', Type.STRING);\n    this.addOutput('enableOutput', Type.BOOLEAN);\n    this.addOutput('remainingRuntime (ms)', Type.NUMBER);\n    this.AHRuntime = TimeUtils.timeConvert(120, 'minutes');\n  }\n\n  onCreated() {\n    this.currentMode = 'OFF';\n    this.onInputUpdated();\n  }\n\n  onAdded() {\n    this.currentMode = 'OFF';\n    this.onInputUpdated();\n  }\n\n  onInputUpdated() {\n    const modeInput = this.getInputData(0);\n    if (modeInput == null) {\n      this.currentMode = null;\n      this.setOutputData(0, '');\n      this.setOutputData(1, null);\n      if (this.timeoutFunc) clearInterval(this.timeoutFunc);\n      this.remainingRuntime = 0;\n      this.setOutputData(2, null);\n      return;\n    } else if (modeInput == 'OFF') {\n      this.currentMode = 'OFF';\n      this.setOutputData(0, 'OFF');\n      this.setOutputData(1, false);\n      if (this.timeoutFunc) clearInterval(this.timeoutFunc);\n      this.remainingRuntime = 0;\n      this.setOutputData(2, 0);\n      return;\n    } else if (modeInput == 'SCHEDULE' && this.currentMode !== modeInput) {\n      this.currentMode = 'SCHEDULE';\n      this.setOutputData(0, 'SCHEDULE');\n      if (this.getInputData(1)) this.startSchedule();\n      else {\n        if (this.timeoutFunc) clearInterval(this.timeoutFunc);\n        this.setOutputData(1, false);\n        this.setOutputData(2, 0);\n      }\n    } else if (modeInput == 'AFTERHOURS' && this.currentMode !== modeInput) {\n      this.startAfterhours();\n    }\n    if (this.currentMode === 'SCHEDULE') {\n      const schedInput = this.getInputData(1);\n      if(!schedInput) this.setOutputData(2, 0);\n      if (this.inputs[1].updated) {\n        if (schedInput) {\n          this.setOutputData(1, true);\n          this.startSchedule();\n        } else {\n          this.setOutputData(1, false);\n          if (this.timeoutFunc) clearInterval(this.timeoutFunc);\n          this.setOutputData(2, 0);\n        }\n      }\n      if (this.getInputData(2) == null) this.setOutputData(2, null);\n      else if (this.inputs[2].updated) {\n        const nextStop = this.getInputData(2);\n        if (nextStop) this.setOutputData(2, nextStop - Date.now());\n      }\n    } else if (\n      TimeUtils.timeConvert(this.getInputData(3), 'minutes') !== this.AHRuntime &&\n      this.currentMode === 'AFTERHOURS'\n    ) {\n      this.startAfterhours();\n    }\n  }\n\n  startSchedule() {\n    if (this.timeoutFunc) clearInterval(this.timeoutFunc);\n    const nextStop = this.getInputData(2);\n    if (nextStop) {\n      this.remainingRuntime = nextStop - Date.now();\n      this.setOutputData(2, this.remainingRuntime);\n      this.timeoutFunc = setInterval(() => {\n        this.remainingRuntime -= this.updateInterval;\n        this.setOutputData(2, this.remainingRuntime);\n      }, this.updateInterval);\n    } else this.setOutputData(2, null);\n    this.setOutputData(1, true);\n  }\n\n  startAfterhours() {\n    this.currentMode = 'AFTERHOURS';\n    this.setOutputData(0, 'AFTERHOURS');\n    this.setOutputData(1, true);\n    clearInterval(this.timeoutFunc);\n    const AHDuration = TimeUtils.timeConvert(this.getInputData(3) || 120, 'minutes');\n    this.AHRuntime = AHDuration;\n    this.remainingRuntime = AHDuration;\n    this.setOutputData(2, AHDuration);\n    this.timeoutFunc = setInterval(() => {\n      this.remainingRuntime -= this.updateInterval;\n      if (this.remainingRuntime <= 0) {\n        this.setOutputData(1, false);\n        this.setOutputData(2, 0);\n        this.currentMode = 'SCHEDULE';\n        this.setOutputData(0, 'SCHEDULE');\n        clearInterval(this.timeoutFunc);\n        if (this.getInputData(1)) this.startSchedule();\n        return;\n      }\n      this.setOutputData(2, this.remainingRuntime);\n    }, this.updateInterval);\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n  }\n}\nContainer.registerNodeType('widget/schedule-afterhours-off', ScheduleAfterhoursOffWidgetNode);\n","import { Container } from '../../container';\nimport { Node } from '../../node';\nimport { NodeSetting, SettingType, Type } from '../../node-io';\nimport TimeUtils from '../../utils/time-utils';\nimport { NODE_INFO } from '../../node-info';\n\nclass SchedulePrestartFixedNode extends Node {\n  enabled;\n  nextStart;\n\n  constructor() {\n    super();\n    this.title = NODE_INFO.widget[\"schedule-prestart-fixed\"].title;\n    this.description = NODE_INFO.widget[\"schedule-prestart-fixed\"].description;\n    this.addInputWithSettings('enable', Type.BOOLEAN, true, 'Enable');\n    this.addInput('temp', Type.NUMBER);\n    this.addInput('SP', Type.NUMBER);\n    this.addInput('scheduleNextStart', Type.NUMBER);\n    this.addInput('reset', Type.NUMBER);\n    this.addOutput('output', Type.STRING);\n\n    this.settings['condition1_range1'] = NodeSetting.create({\n      description: 'temp > (SP + ?):',\n      value: 1,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition1_range2'] = NodeSetting.create({\n      description: 'temp <= (SP + ?)',\n      value: 2.5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition1_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: 20,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition2_range1'] = NodeSetting.create({\n      description: 'temp > (SP + ?):',\n      value: 2.5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition2_range2'] = NodeSetting.create({\n      description: 'temp <= (SP + ?)',\n      value: 5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition2_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: 40,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition3_range1'] = NodeSetting.create({\n      description: 'temp > (SP + ?):',\n      value: 5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition3_range2'] = NodeSetting.create({\n      description: 'temp <= (SP + ?)',\n      value: 100,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition3_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: 60,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition4_range1'] = NodeSetting.create({\n      description: 'temp > (SP + ?):',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition4_range2'] = NodeSetting.create({\n      description: 'temp <= (SP + ?)',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition4_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition5_range1'] = NodeSetting.create({\n      description: 'temp > (SP + ?):',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition5_range2'] = NodeSetting.create({\n      description: 'temp <= (SP + ?)',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition5_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition6_range1'] = NodeSetting.create({\n      description: 'temp < (SP + ?):',\n      value: -1,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition6_range2'] = NodeSetting.create({\n      description: 'temp >= (SP + ?)',\n      value: -2.5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition6_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: 30,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition7_range1'] = NodeSetting.create({\n      description: 'temp < (SP + ?):',\n      value: -2.5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition7_range2'] = NodeSetting.create({\n      description: 'temp >= (SP + ?)',\n      value: -5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition7_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: 40,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition8_range1'] = NodeSetting.create({\n      description: 'temp < (SP + ?):',\n      value: -5,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition8_range2'] = NodeSetting.create({\n      description: 'temp >= (SP + ?)',\n      value: -100,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition8_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: 60,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition9_range1'] = NodeSetting.create({\n      description: 'temp < (SP + ?):',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition9_range2'] = NodeSetting.create({\n      description: 'temp >= (SP + ?)',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition9_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n\n    this.settings['condition10_range1'] = NodeSetting.create({\n      description: 'temp < (SP + ?):',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition10_range2'] = NodeSetting.create({\n      description: 'temp >= (SP + ?)',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n    this.settings['condition10_time'] = NodeSetting.create({\n      description: 'Prestart Time (Mins)',\n      value: null,\n      type: SettingType.NUMBER,\n    });\n\n    this.setSettingsConfig({\n      groups: [\n        { condition1_range1: {}, condition1_range2: {}, condition1_time: {} },\n        { condition2_range1: {}, condition2_range2: {}, condition2_time: {} },\n        { condition3_range1: {}, condition3_range2: {}, condition3_time: {} },\n        { condition4_range1: {}, condition4_range2: {}, condition4_time: {} },\n        { condition5_range1: {}, condition5_range2: {}, condition5_time: {} },\n        { condition6_range1: {}, condition6_range2: {}, condition6_time: {} },\n        { condition7_range1: {}, condition7_range2: {}, condition7_time: {} },\n        { condition8_range1: {}, condition8_range2: {}, condition8_time: {} },\n        { condition9_range1: {}, condition9_range2: {}, condition9_time: {} },\n        { condition10_range1: {}, condition10_range2: {}, condition10_time: {} },\n      ],\n    });\n  }\n\n  onCreated() {\n    this.enabled = false;\n    this.EXECUTE_INTERVAL = 30000;\n  }\n\n  onAdded() {\n    this.EXECUTE_INTERVAL = 30000;\n    this.onInputUpdated();\n  }\n\n  onAfterSettingsChange() {\n    this.onInputUpdated();\n    this.onExecute();\n  }\n\n  onExecute() {\n    const now = new Date().valueOf();\n    const enable = this.getInputData(0);\n    if (!enable || this.nextStart == null || this.nextStart - now < 0) {\n      this.setOutputData(0, false);\n      this.enabled = false;\n      return;\n    }\n    if (this.enabled) return;\n    const temp = this.getInputData(1);\n    const setpoint = this.getInputData(2);\n    if (temp == null || setpoint == null) return;\n    for (var i = 1; i <= 10; i++) {\n      var fromRange = this.settings[`condition${i}_range1`].value;\n      var toRange = this.settings[`condition${i}_range2`].value;\n      var time = this.settings[`condition${i}_time`].value;\n      if (fromRange == null || toRange == null || time == null) continue;\n      time = TimeUtils.timeConvert(time, 'minutes');\n      if (this.nextStart - now <= time) {\n        if (i <= 5 && temp > setpoint + fromRange && temp <= setpoint + toRange) {\n          this.enabled = true;\n          this.setOutputData(0, true);\n          return;\n        }\n        if (i > 5 && temp < setpoint + fromRange && temp >= setpoint + toRange) {\n          this.enabled = true;\n          this.setOutputData(0, true);\n          return;\n        }\n      }\n    }\n  }\n\n  onInputUpdated() {\n    const enable = this.getInputData(0);\n    if (!enable) {\n      this.setOutputData(0, false);\n      this.enabled = false;\n      return;\n    }\n    const reset = this.getInputData(4);\n    if (reset && this.inputs[4].updated) {\n      this.enabled = false;\n      this.setOutputData(0, false);\n    }\n    const nextStart = this.getInputData(3);\n    if (nextStart == null || nextStart !== this.nextStart) {\n      this.nextStart = nextStart;\n      this.setOutputData(0, false);\n      this.enabled = false;\n    }\n  }\n}\nContainer.registerNodeType('widget/schedule-prestart-fixed', SchedulePrestartFixedNode);\n","import { UNKNOWN_NODE } from '../../constants';\nimport { Container } from '../../container';\nimport { UnknownNode } from './unknown';\n\nContainer.registerNodeType(UNKNOWN_NODE, UnknownNode, null, false);\n","import { Node } from '../../node';\nimport { NODE_INFO } from '../../node-info';\n\nexport class UnknownNode extends Node {\n  constructor() {\n    super();\n    this.title = NODE_INFO.unknown.unknown.title;\n    this.description = NODE_INFO.unknown.unknown.description;\n  }\n}\n","/**\n * Created by Derwish (derwish.pro@gmail.com) on 16.02.2017.\n * License: http://www.gnu.org/licenses/gpl-3.0.txt\n */\nimport { Node } from '../nodes/node';\nimport { SerializedNode } from '../nodes/node-interface';\nimport { UiPanel } from '../server/dashboard';\nimport { db_logger as logger } from '../utils/loggers';\nimport { Database } from './database';\nimport AuthUserDatabase from './database/AuthUserDatabase';\nimport DashboardDatabase from './database/DashboardDatabase';\nimport HistorianDatabase from './database/HistorianDatabase';\nimport NodeDatabase from './database/NodeDatabase';\nimport ScheduleDatabase from './database/ScheduleDatabase';\nimport UserDatabase from './database/UserDatabase';\nimport AuthUserDataSource from './datasource/AuthUserDataSource';\nimport DashboardDataSource from './datasource/DashboardDataSource';\nimport HistorianDataSource from './datasource/HistorianDataSource';\nimport NodeDataSource from './datasource/NodeDataSource';\nimport ScheduleDataSource from './datasource/ScheduleDataSource';\nimport UserDataSource from './datasource/UserDataSource';\nimport { AuthUser } from './models/AuthUser';\nimport { History } from './models/historian';\nimport { Schedule } from './models/schedule';\nimport { User } from './models/user';\n\nclass NeDbDatabase implements Database {\n  private static CLEANUP_INTERVAL = 5 * 60 * 1000;\n  private authUserDatabase: AuthUserDatabase;\n  private userDatabase: UserDatabase;\n  private nodeDatabase: NodeDatabase;\n  private dashboardDatabase: DashboardDatabase;\n  private scheduleDatabase: ScheduleDatabase;\n  private historianDatabase: HistorianDatabase;\n\n  constructor() {\n    this.authUserDatabase = new AuthUserDataSource();\n    this.userDatabase = new UserDataSource();\n    this.nodeDatabase = new NodeDataSource();\n    this.dashboardDatabase = new DashboardDataSource();\n    this.scheduleDatabase = new ScheduleDataSource();\n    this.historianDatabase = new HistorianDataSource();\n  }\n\n  async asyncLoadDatabase(dataPath: string, cleanUpInterval: any = NeDbDatabase.CLEANUP_INTERVAL): Promise<any> {\n    return Promise.all([this.authUserDatabase.asyncLoadDatabase(dataPath, cleanUpInterval),\n                        this.userDatabase.asyncLoadDatabase(dataPath, cleanUpInterval),\n                        this.nodeDatabase.asyncLoadDatabase(dataPath, cleanUpInterval),\n                        this.dashboardDatabase.asyncLoadDatabase(dataPath, cleanUpInterval),\n                        this.scheduleDatabase.asyncLoadDatabase(dataPath, cleanUpInterval),\n                        this.historianDatabase.asyncLoadDatabase(dataPath, cleanUpInterval)])\n                  .then(res => {\n                    logger.info(`Finish loading ${res.length} datasource`);\n                    return res;\n                  });\n  }\n\n  addUser(user: User, callback?: (err?: Error, doc?: User) => void) {\n    this.userDatabase.addUser(user, callback);\n  }\n\n  addOrUpdateUser(query: object, user: User): Promise<any> {\n    return this.userDatabase.addOrUpdateUser(query, user);\n  }\n\n  getUsers(callback?: (err?: Error, docs?: Array<User>) => void) {\n    this.userDatabase.getUsers(callback);\n  }\n\n  getUser(query: object, callback?: (err?: Error, doc?: User) => void) {\n    this.userDatabase.getUser(query, callback);\n  }\n\n  getAsyncUsers(): Promise<any> {\n    return this.userDatabase.getAsyncUsers();\n  }\n\n  updateUser(query: object, user: User, callback?: (err?: Error) => void) {\n    this.userDatabase.updateUser(query, user);\n  }\n\n  getUsersCount(callback?: (err?: Error, num?: number) => void) {\n    this.userDatabase.getUsersCount(callback);\n  }\n\n  removeUser(query: object, callback?: (err?: Error) => void) {\n    this.userDatabase.removeUser(query, callback);\n  }\n\n  dropUsers(callback?: (err?: Error) => void) {\n    this.userDatabase.dropUsers();\n  }\n\n  addNode(node: Node, callback?: (err?: Error, doc?: SerializedNode) => void) {\n    this.nodeDatabase.addNode(node, callback);\n  }\n\n  batchInsertNodes(nodes: SerializedNode[], callback?: (err?: Error, docs?: Array<SerializedNode>) => void) {\n    this.nodeDatabase.batchInsertNodes(nodes, callback);\n  }\n\n  batchDeleteNodes(query, callback?: (err?: Error, docs?: number) => void) {\n    this.nodeDatabase.batchDeleteNodes(query, callback);\n  }\n\n  getNodes(callback?: (err?: Error, docs?: Array<SerializedNode>) => void) {\n    this.nodeDatabase.getNodes(callback);\n  }\n\n  getNodeType(type: string, callback?: (err?: Error, docs?: Array<SerializedNode>) => void) {\n    this.nodeDatabase.getNodeType(type, callback);\n  }\n\n  listNodes(query, callback?: (err?: Error, docs?: Array<SerializedNode>) => void) {\n    this.nodeDatabase.listNodes(query, callback);\n  }\n\n  getNode(id: number, cid: number, callback?: (err?: Error, doc?: SerializedNode) => void) {\n    this.nodeDatabase.getNode(id, cid, callback);\n  }\n\n  updateNode(id: number, cid: number, update: any, callback?: (err?: Error) => void) {\n    this.nodeDatabase.updateNode(id, cid, update, callback);\n  }\n\n  removeNode(id: number, cid: number, callback?: (err?: Error) => void) {\n    this.nodeDatabase.removeNode(id, cid, callback);\n  }\n\n  dropNodes(callback?: (err?: Error) => void) {\n    this.nodeDatabase.dropNodes(callback);\n  }\n\n  addUiPanel(panel: UiPanel, callback?: (err?: Error, doc?: UiPanel) => void) {\n    this.dashboardDatabase.addUiPanel(panel, callback);\n  }\n\n  getUiPanels(callback?: (err?: Error, docs?: UiPanel[]) => void) {\n    this.dashboardDatabase.getUiPanels(callback);\n  }\n\n  getUiPanel(name: string, callback?: (err?: Error, doc?: UiPanel) => void) {\n    this.dashboardDatabase.getUiPanel(name, callback);\n  }\n\n  updateUiPanel(name: string, update: any, callback?: (err?: Error) => void) {\n    this.dashboardDatabase.updateUiPanel(name, update, callback);\n  }\n\n  dropUiPanels(callback?: (err?: Error) => void) {\n    this.dashboardDatabase.dropUiPanels(callback);\n  }\n\n  removeUiPanel(name: string, callback?: (err?: Error) => void) {\n    this.dashboardDatabase.removeUiPanel(name, callback);\n  }\n\n  addSchedule(schedule: Schedule, callback?: (err?: Error, doc?: Schedule) => void) {\n    this.scheduleDatabase.addSchedule(schedule, callback);\n  }\n\n  updateSchedule(query: object, schedule: Schedule, callback?: (err?: Error) => void) {\n    this.scheduleDatabase.updateSchedule(query, schedule, callback);\n  }\n\n  removeSchedule(query: object, callback?: (err?: Error) => void) {\n    this.scheduleDatabase.removeSchedule(query, callback);\n  }\n\n  //// HistorianDatabase historian history\n\n  addHistory(history: History, callback?: (err?: Error, doc?: History) => void) {\n    this.historianDatabase.addHistory(history, callback);\n  }\n\n  updateHistory(query: object, history: History, callback?: (err?: Error) => void) {\n    this.historianDatabase.updateHistory(query, history, callback);\n  }\n\n  removeHistory(query: object, callback?: (err?: Error) => void) {\n    this.historianDatabase.removeHistory(query, callback);\n  }\n\n  addAuthUser(authUser: AuthUser): Promise<AuthUser> {\n    return this.authUserDatabase.addAuthUser(authUser);\n  }\n\n  getAuthUser(): Promise<AuthUser> {\n    return this.authUserDatabase.getAuthUser();\n  }\n\n  deleteAuthUsers(): Promise<string> {\n    return this.authUserDatabase.deleteAuthUsers();\n  }\n\n  getAuthToken(authUser: AuthUser): Promise<string> {\n    return this.authUserDatabase.getAuthToken(authUser);\n  }\n\n  isAuthenticated(token: string): Promise<any> {\n    return this.authUserDatabase.isAuthenticated(token);\n  }\n\n}\n\nconst db = new NeDbDatabase();\nexport { db };\n","import config from '../../config';\nimport CryptoUtils from '../../nodes/utils/crypto-utils';\nimport { db_logger as logger } from '../../utils/loggers';\nimport AuthUserDatabase from '../database/AuthUserDatabase';\nimport { AbstractDatabase } from '../database/BaseDatabase';\nimport { AuthUser } from '../models/AuthUser';\n\nconst jwt = require('jsonwebtoken');\n\nexport default class AuthUserDataSource extends AbstractDatabase implements AuthUserDatabase {\n\n  addAuthUser(authUser: AuthUser): Promise<AuthUser> {\n    return new Promise((resolve, reject) => {\n      this.db.find({}, (err, doc: Array<AuthUser>) => {\n        if (doc.length) {\n          logger.warn('User is already inserted');\n          reject('User is already inserted');\n          return;\n        }\n        if (!config.secretKey) {\n          const error = 'Please provide secret key on environment';\n          logger.error(error);\n          reject(error);\n          return;\n        }\n        authUser.password = CryptoUtils.encrypt(authUser.password);\n        this.db.insert(authUser, (err, doc) => {\n          if (err) {\n            logger.error(err.message);\n            reject(err);\n          } else {\n            resolve(doc);\n          }\n        });\n      });\n    });\n  }\n\n  getAuthUser(): Promise<AuthUser> {\n    return new Promise((resolve, reject) => {\n      this.db.findOne({}, (err, doc) => {\n        if (err) {\n          logger.error(err.message);\n          reject(err);\n        } else {\n          resolve(doc);\n        }\n      });\n    });\n  }\n\n  deleteAuthUsers(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      this.db.remove({}, { multi: true }, err => {\n        if (err) {\n          logger.error(err.message);\n          reject(err);\n        } else {\n          resolve('Successfully removed');\n        }\n      });\n    });\n  }\n\n  getAuthToken(authUser: AuthUser): Promise<string> {\n    return new Promise((resolve, reject) => {\n      this.db.findOne({ username: authUser.username }, (err, doc) => {\n        if (err) {\n          logger.error(err.message);\n          reject(err);\n        } else if (doc && CryptoUtils.decrypt(doc.password) === authUser.password) {\n          try {\n            const token = jwt.sign({ username: doc.username }, config.secretKey, { expiresIn: 18000 });\n            resolve(`${token}`);\n          } catch (e) {\n            logger.error(`Error: ${e.message}`);\n            reject(e.message);\n          }\n        } else {\n          logger.warn('Invalid Credentials');\n          reject('Invalid Credentials');\n        }\n      });\n    });\n  }\n\n  isAuthenticated(token: string): Promise<any> {\n    return new Promise((resolve, reject) => {\n      jwt.verify(token, config.secretKey, (err, decoded) => {\n        if (err) {\n          logger.error(err);\n          reject(err);\n        } else {\n          resolve(decoded);\n        }\n      });\n    });\n  }\n\n  protected dbName(): string {\n    return `auth`;\n  }\n\n}\n","module.exports = require(\"nedb\");","module.exports = require(\"jsonwebtoken\");","import { UiPanel } from '../../server/dashboard';\nimport { db_logger as logger } from '../../utils/loggers';\nimport { AbstractDatabase } from '../database/BaseDatabase';\nimport DashboardDatabase from '../database/DashboardDatabase';\n\nexport default class DashboardDataSource extends AbstractDatabase implements DashboardDatabase {\n\n  addUiPanel(panel: UiPanel, callback?: (err?: Error, doc?: UiPanel) => void) {\n    this.db.insert(panel, function (err, doc) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  getUiPanels(callback?: (err?: Error, docs?: UiPanel[]) => void) {\n    this.db.find({}, function (err, docs) {\n      if (err) logger.error(err);\n      if (callback) callback(err, docs);\n    });\n  }\n\n  getUiPanel(name: string, callback?: (err?: Error, doc?: UiPanel) => void) {\n    this.db.findOne({ name: name }, function (err, doc: any) {\n      if (err) logger.warn(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  updateUiPanel(name: string, update: any, callback?: (err?: Error) => void) {\n    this.db.update({ name: name }, update, {}, function (err, updated) {\n      if (err) logger.error(err.message);\n      if (updated == 0) logger.error(`Cat't update dashboard panel [${name}]. Document not found.`);\n      if (callback) callback(err);\n    });\n  }\n\n  removeUiPanel(name: string, callback?: (err?: Error) => void) {\n    this.db.remove({ name: name }, {}, function (err, removed) {\n      if (err) logger.error(err.message);\n      if (removed == 0) logger.error('Cat\\'t remove. Document not found.');\n      if (callback) callback(err);\n    });\n  }\n\n  dropUiPanels(callback?: (err?: Error) => void) {\n    this.db.remove({}, { multi: true }, function (err) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err);\n    });\n  }\n\n  protected dbName(): string {\n    return `dashboard`;\n  }\n}\n","import { db_logger as logger } from '../../utils/loggers';\nimport { AbstractDatabase } from '../database/BaseDatabase';\nimport HistorianDatabase from '../database/HistorianDatabase';\nimport { History } from '../models/historian';\n\nexport default class HistorianDataSource extends AbstractDatabase implements HistorianDatabase {\n  addHistory(history: History, callback?: (err?: Error, doc?: History) => void) {\n    this.db.insert(history, function (err, doc) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  updateHistory(\n    query: object,\n    history: History,\n    callback?: (err?: Error) => void,\n    updatedCallback?: (updated?: number) => void,\n  ) {\n    this.db.update(query, history, {}, function (err, updated) {\n      if (err) {\n        logger.error(err.message);\n      } else {\n        updatedCallback(updated);\n      }\n      if (updated == 0) logger.error(`Can't update history [${name}]. Document not found.`);\n      if (callback) callback(err);\n    });\n  }\n\n  //remove\n  removeHistory(\n    query: object,\n    callback?: (err?: Error) => void,\n    removedCallback?: (removed?: number) => void,\n  ) {\n    this.db.remove(query, {}, function (err, removed) {\n      if (err) {\n        logger.error(err.message);\n      } else {\n        removedCallback(removed);\n      }\n      if (removed == 0) logger.debug('Cat\\'t remove. History Document not found.');\n      if (callback) callback(err);\n    });\n  }\n\n  protected dbName(): string {\n    return `history`;\n  }\n}\n\n// async function find(id) {\n//     return new Promise((resolve, reject) => {\n//         try {\n//             let ab = { pntId: id };\n//             db.find({ ...ab }, (err, docs) => {\n//                 let output = [];\n//                 if (!err) {\n//                     console.logger(docs);\n//                     resolve(docs);\n//                 } else {\n//                     reject(err);\n//                 }\n//             });\n//         } catch (error) {\n//             console.logger(error);\n//         }\n//     });\n// }\n\n// async function count(id) {\n//     return new Promise((resolve, reject) => {\n//         try {\n//             let ab = { pntId: id };\n//             db.count({ ...ab }, (err, docs) => {\n//                 let output = [];\n//                 if (!err) {\n//                     console.logger(docs);\n//                     resolve(docs);\n//                 } else {\n//                     reject(err);\n//                 }\n//             });\n//         } catch (error) {\n//             console.logger(error);\n//         }\n//     });\n// }\n\n// async function add(id, obj) {\n//     return new Promise((resolve, reject) => {\n//         try {\n//             let ab = { pntId: id, ts: obj}\n//             db.insert({ ...ab }, (err, docs) => {\n//                 let output = [];\n//                 if (!err) {\n//                     console.logger(docs);\n//                     resolve(docs);\n//                 } else {\n//                     reject(err);\n//                 }\n//             });\n//         } catch (error) {\n//             console.logger(error);\n//         }\n//     });\n// }\n// //   add(123, arr)\n\n// async function deleteHis(id, hisLimit) {\n//     return new Promise((resolve, reject) => {\n//         try {\n//             let ab = { pntId: id, hisCount: { $gte: hisLimit } }\n//             db.find({ ...ab }, (err, docs) => {\n//                 let output = [];\n//                 if (!err) {\n//                     docs.forEach(element => {\n//                         db.remove({ _id: element._id }, {}, function (err, numRemoved) {\n//                             // numRemoved = 1\n//                             console.logger(numRemoved + 'num rem')\n//                         });\n//                     });\n//                     resolve(docs);\n//                 } else {\n//                     reject(err);\n//                 }\n//             });\n//         } catch (error) {\n//             console.logger(error);\n//         }\n//     });\n// }\n// //   deleteHis(123, 0)\n","import { Node } from '../../nodes/node';\nimport { SerializedNode } from '../../nodes/node-interface';\nimport { SerializableHelper } from '../../nodes/serializable';\nimport { IdGenerator } from '../../utils/id-generator';\nimport { db_logger as logger } from '../../utils/loggers';\nimport { AbstractDatabase } from '../database/BaseDatabase';\nimport NodeDatabase from '../database/NodeDatabase';\n\nexport default class NodeDataSource extends AbstractDatabase implements NodeDatabase {\n\n  addNode(node: Node, callback?: (err?: Error, doc?: SerializedNode) => void) {\n    let ser_node = SerializableHelper.serialize<SerializedNode>(node);\n    ser_node['_id'] = IdGenerator.createNodeId(ser_node.cid, ser_node.id);\n\n    this.db.insert(ser_node, function (err, doc) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  batchInsertNodes(nodes: SerializedNode[], callback?: (err?: Error, docs?: SerializedNode[]) => void) {\n    this.db.insert(nodes.map(n => {\n      n['_id'] = IdGenerator.createNodeId(n.cid, n.id);\n      return SerializableHelper.serialize<SerializedNode>(n);\n    }), function (err, doc) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  batchDeleteNodes(query, callback?: (err?: Error, docs?: number) => void) {\n    this.db.remove(query, { multi: true }, function (err, docs) {\n      if (err) logger.warn(err.message);\n      if (callback) callback(err, docs);\n    });\n  }\n\n  getNodes(callback?: (err?: Error, docs?: Array<SerializedNode>) => void) {\n    this.db.find({}, function (err, docs) {\n      if (err) logger.warn(err);\n      if (callback) callback(err, docs);\n    });\n  }\n\n  getNode(id: number, cid: number, callback?: (err?: Error, doc?: SerializedNode) => void) {\n    let _id = IdGenerator.createNodeId(cid, id);\n    this.db.findOne({ _id: _id }, function (err, doc: any) {\n      if (err) logger.warn(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  getNodeType(type: string, callback?: (err?: Error, docs?: Array<SerializedNode>) => void) {\n    this.db.find({ type: type }, function (err, docs) {\n      if (err) logger.warn(err.message);\n      if (callback) callback(err, docs);\n    });\n  }\n\n  listNodes(query, callback?: (err?: Error, docs?: Array<any>) => void) {\n    this.db.find(query, function (err, docs) {\n      if (err) logger.warn(err.message);\n      if (callback) callback(err, docs);\n    });\n  }\n\n  updateNode(id: number, cid: number, update: any, callback?: (err?: Error) => void) {\n    let _id = IdGenerator.createNodeId(cid, id);\n    this.db.update({ _id: _id }, update, {}, function (err, updated) {\n      if (err) logger.error(err.message);\n      if (updated == 0) logger.warn(`Can't update node [${cid}/${id}]. Document not found.`);\n      if (callback) callback(err);\n    });\n  }\n\n  removeNode(id: number, cid: number, callback?: (err?: Error) => void) {\n    let _id = IdGenerator.createNodeId(cid, id);\n    this.db.remove({ _id: _id }, {}, function (err, removed) {\n      if (err) logger.error(err.message);\n      if (removed == 0) logger.warn(`Can't remove. Document not found.`);\n      if (callback) callback(err);\n    });\n  }\n\n  dropNodes(callback?: (err?: Error) => void) {\n    this.db.remove({}, { multi: true }, function (err) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err);\n    });\n  }\n\n  protected dbName(): string {\n    return `nodes`;\n  }\n}\n","import * as NeDBDataStore from 'nedb';\nimport { db_logger as logger } from '../../utils/loggers';\nimport { AbstractDatabase } from '../database/BaseDatabase';\nimport ScheduleDatabase from '../database/ScheduleDatabase';\nimport { Schedule } from '../models/schedule';\n\nexport default class ScheduleDataSource extends AbstractDatabase implements ScheduleDatabase {\n  db: NeDBDataStore;\n\n  addSchedule(schedule: Schedule, callback?: (err?: Error, doc?: Schedule) => void) {\n    this.db.insert(schedule, function (err, doc) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  updateSchedule(\n    query: object,\n    schedule: Schedule,\n    callback?: (err?: Error) => void,\n    updatedCallback?: (updated?: number) => void,\n  ) {\n    this.db.update(query, schedule, {}, function (err, updated) {\n      if (err) {\n        logger.error(err.message);\n      } else {\n        updatedCallback(updated);\n      }\n      if (updated == 0) logger.error(`Can't update schedule [${name}]. Document not found.`);\n      if (callback) callback(err);\n    });\n  }\n\n  //remove\n  removeSchedule(\n    query: object,\n    callback?: (err?: Error) => void,\n    removedCallback?: (removed?: number) => void,\n  ) {\n    this.db.remove(query, {}, function (err, removed) {\n      if (err) {\n        logger.error(err.message);\n      } else {\n        removedCallback(removed);\n      }\n      if (removed == 0) logger.debug('Cat\\'t remove. Schedule Document not found.');\n      if (callback) callback(err);\n    });\n  }\n\n  protected dbName(): string {\n    return `schedule`;\n  }\n}\n","import { db_logger as logger } from '../../utils/loggers';\nimport { AbstractDatabase } from '../database/BaseDatabase';\nimport UserDatabase from '../database/UserDatabase';\nimport { User } from '../models/user';\n\nexport default class UserDataSource extends AbstractDatabase implements UserDatabase {\n\n  addUser(user: User, callback?: (err?: Error, doc?: User) => void) {\n    this.db.insert(user, function (err, doc) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  getUser(query: object, callback?: (err?: Error, doc?: User) => void) {\n    this.db.findOne(query, function (err, doc: any) {\n      if (err) logger.warn(err.message);\n      if (callback) callback(err, doc);\n    });\n  }\n\n  getUsers(callback?: (err?: Error, docs?: Array<User>) => void) {\n    this.db.find({}, function (err, docs) {\n      if (err) logger.error(err);\n      if (callback) callback(err, docs);\n    });\n  }\n\n  getAsyncUsers(): Promise<any> {\n    return new Promise((resolve, reject) => {\n      this.db.find({}, function (err, doc: any) {\n        if (err) {\n          logger.warn(err.message);\n          reject(err);\n        } else {\n          resolve(doc);\n        }\n      });\n    });\n  }\n\n  updateUser(query: object, user: User, callback?: (err?: Error) => void) {\n    this.db.update(query, user, {}, function (err, updated) {\n      if (err) logger.error(err.message);\n      if (updated == 0) logger.error(`Cat't update user [${name}]. Document not found.`);\n      if (callback) callback(err);\n    });\n  }\n\n  getUsersCount(callback?: (err?: Error, num?: number) => void) {\n    this.db.count({}, function (err, num) {\n      if (err) logger.warn(err.message);\n      if (callback) callback(err, num);\n    });\n  }\n\n  addOrUpdateUser(query: object, user: User): Promise<any> {\n    return new Promise((resolve, reject) => {\n      this.getUser(query, (err, usr) => {\n        if (usr) {\n          this.updateUser(query, user, err => {\n            if (err) {\n              reject(err);\n            } else {\n              resolve();\n            }\n          });\n        } else {\n          this.addUser(user, err => {\n            if (err) {\n              reject(err);\n            } else {\n              resolve();\n            }\n          });\n        }\n      });\n    });\n  }\n\n  removeUser(query: object, callback?: (err?: Error) => void) {\n    this.db.remove(query, {}, function (err, removed) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err);\n    });\n  }\n\n  dropUsers(callback?: (err?: Error) => void) {\n    this.db.remove({}, { multi: true }, function (err) {\n      if (err) logger.error(err.message);\n      if (callback) callback(err);\n    });\n  }\n\n  protected dbName(): string {\n    return `users`;\n  }\n}\n"],"sourceRoot":""}